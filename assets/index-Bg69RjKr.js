var kM=Object.defineProperty;var IM=(t,e,n)=>e in t?kM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var de=(t,e,n)=>IM(t,typeof e!="symbol"?e+"":e,n);function CM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function PM(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $I={exports:{}},Vp={},WI={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sh=Symbol.for("react.element"),AM=Symbol.for("react.portal"),RM=Symbol.for("react.fragment"),NM=Symbol.for("react.strict_mode"),DM=Symbol.for("react.profiler"),OM=Symbol.for("react.provider"),MM=Symbol.for("react.context"),jM=Symbol.for("react.forward_ref"),LM=Symbol.for("react.suspense"),VM=Symbol.for("react.memo"),FM=Symbol.for("react.lazy"),Wb=Symbol.iterator;function UM(t){return t===null||typeof t!="object"?null:(t=Wb&&t[Wb]||t["@@iterator"],typeof t=="function"?t:null)}var HI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qI=Object.assign,KI={};function Nl(t,e,n){this.props=t,this.context=e,this.refs=KI,this.updater=n||HI}Nl.prototype.isReactComponent={};Nl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Nl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function GI(){}GI.prototype=Nl.prototype;function B_(t,e,n){this.props=t,this.context=e,this.refs=KI,this.updater=n||HI}var z_=B_.prototype=new GI;z_.constructor=B_;qI(z_,Nl.prototype);z_.isPureReactComponent=!0;var Hb=Array.isArray,YI=Object.prototype.hasOwnProperty,$_={current:null},QI={key:!0,ref:!0,__self:!0,__source:!0};function XI(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)YI.call(e,r)&&!QI.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:sh,type:t,key:s,ref:o,props:i,_owner:$_.current}}function BM(t,e){return{$$typeof:sh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function W_(t){return typeof t=="object"&&t!==null&&t.$$typeof===sh}function zM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qb=/\/+/g;function og(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zM(""+t.key):e.toString(36)}function Yd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sh:case AM:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+og(o,0):r,Hb(i)?(n="",t!=null&&(n=t.replace(qb,"$&/")+"/"),Yd(i,e,n,"",function(c){return c})):i!=null&&(W_(i)&&(i=BM(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(qb,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Hb(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+og(s,a);o+=Yd(s,e,n,l,i)}else if(l=UM(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+og(s,a++),o+=Yd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function rd(t,e,n){if(t==null)return t;var r=[],i=0;return Yd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function $M(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pn={current:null},Qd={transition:null},WM={ReactCurrentDispatcher:Pn,ReactCurrentBatchConfig:Qd,ReactCurrentOwner:$_};function JI(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:rd,forEach:function(t,e,n){rd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rd(t,function(){e++}),e},toArray:function(t){return rd(t,function(e){return e})||[]},only:function(t){if(!W_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};be.Component=Nl;be.Fragment=RM;be.Profiler=DM;be.PureComponent=B_;be.StrictMode=NM;be.Suspense=LM;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WM;be.act=JI;be.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qI({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=$_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)YI.call(e,l)&&!QI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:sh,type:t.type,key:i,ref:s,props:r,_owner:o}};be.createContext=function(t){return t={$$typeof:MM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:OM,_context:t},t.Consumer=t};be.createElement=XI;be.createFactory=function(t){var e=XI.bind(null,t);return e.type=t,e};be.createRef=function(){return{current:null}};be.forwardRef=function(t){return{$$typeof:jM,render:t}};be.isValidElement=W_;be.lazy=function(t){return{$$typeof:FM,_payload:{_status:-1,_result:t},_init:$M}};be.memo=function(t,e){return{$$typeof:VM,type:t,compare:e===void 0?null:e}};be.startTransition=function(t){var e=Qd.transition;Qd.transition={};try{t()}finally{Qd.transition=e}};be.unstable_act=JI;be.useCallback=function(t,e){return Pn.current.useCallback(t,e)};be.useContext=function(t){return Pn.current.useContext(t)};be.useDebugValue=function(){};be.useDeferredValue=function(t){return Pn.current.useDeferredValue(t)};be.useEffect=function(t,e){return Pn.current.useEffect(t,e)};be.useId=function(){return Pn.current.useId()};be.useImperativeHandle=function(t,e,n){return Pn.current.useImperativeHandle(t,e,n)};be.useInsertionEffect=function(t,e){return Pn.current.useInsertionEffect(t,e)};be.useLayoutEffect=function(t,e){return Pn.current.useLayoutEffect(t,e)};be.useMemo=function(t,e){return Pn.current.useMemo(t,e)};be.useReducer=function(t,e,n){return Pn.current.useReducer(t,e,n)};be.useRef=function(t){return Pn.current.useRef(t)};be.useState=function(t){return Pn.current.useState(t)};be.useSyncExternalStore=function(t,e,n){return Pn.current.useSyncExternalStore(t,e,n)};be.useTransition=function(){return Pn.current.useTransition()};be.version="18.3.1";WI.exports=be;var O=WI.exports;const it=PM(O),HM=CM({__proto__:null,default:it},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qM=O,KM=Symbol.for("react.element"),GM=Symbol.for("react.fragment"),YM=Object.prototype.hasOwnProperty,QM=qM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XM={key:!0,ref:!0,__self:!0,__source:!0};function ZI(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)YM.call(e,r)&&!XM.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:KM,type:t,key:s,ref:o,props:i,_owner:QM.current}}Vp.Fragment=GM;Vp.jsx=ZI;Vp.jsxs=ZI;$I.exports=Vp;var f=$I.exports,Ay={},eC={exports:{}},nr={},tC={exports:{}},nC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,X){var Y=z.length;z.push(X);e:for(;0<Y;){var ye=Y-1>>>1,pe=z[ye];if(0<i(pe,X))z[ye]=X,z[Y]=pe,Y=ye;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var X=z[0],Y=z.pop();if(Y!==X){z[0]=Y;e:for(var ye=0,pe=z.length,xe=pe>>>1;ye<xe;){var Ve=2*(ye+1)-1,Fe=z[Ve],qe=Ve+1,pt=z[qe];if(0>i(Fe,Y))qe<pe&&0>i(pt,Fe)?(z[ye]=pt,z[qe]=Y,ye=qe):(z[ye]=Fe,z[Ve]=Y,ye=Ve);else if(qe<pe&&0>i(pt,Y))z[ye]=pt,z[qe]=Y,ye=qe;else break e}}return X}function i(z,X){var Y=z.sortIndex-X.sortIndex;return Y!==0?Y:z.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,p=3,m=!1,y=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(z){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=z)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(c)}}function I(z){if(v=!1,E(z),!y)if(n(l)!==null)y=!0,re(C);else{var X=n(c);X!==null&&ne(I,X.startTime-z)}}function C(z,X){y=!1,v&&(v=!1,w(_),_=-1),m=!0;var Y=p;try{for(E(X),d=n(l);d!==null&&(!(d.expirationTime>X)||z&&!A());){var ye=d.callback;if(typeof ye=="function"){d.callback=null,p=d.priorityLevel;var pe=ye(d.expirationTime<=X);X=t.unstable_now(),typeof pe=="function"?d.callback=pe:d===n(l)&&r(l),E(X)}else r(l);d=n(l)}if(d!==null)var xe=!0;else{var Ve=n(c);Ve!==null&&ne(I,Ve.startTime-X),xe=!1}return xe}finally{d=null,p=Y,m=!1}}var M=!1,S=null,_=-1,k=5,P=-1;function A(){return!(t.unstable_now()-P<k)}function D(){if(S!==null){var z=t.unstable_now();P=z;var X=!0;try{X=S(!0,z)}finally{X?N():(M=!1,S=null)}}else M=!1}var N;if(typeof b=="function")N=function(){b(D)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,te=q.port2;q.port1.onmessage=D,N=function(){te.postMessage(null)}}else N=function(){x(D,0)};function re(z){S=z,M||(M=!0,N())}function ne(z,X){_=x(function(){z(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,re(C))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var Y=p;p=X;try{return z()}finally{p=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Y=p;p=z;try{return X()}finally{p=Y}},t.unstable_scheduleCallback=function(z,X,Y){var ye=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ye+Y:ye):Y=ye,z){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Y+pe,z={id:u++,callback:X,priorityLevel:z,startTime:Y,expirationTime:pe,sortIndex:-1},Y>ye?(z.sortIndex=Y,e(c,z),n(l)===null&&z===n(c)&&(v?(w(_),_=-1):v=!0,ne(I,Y-ye))):(z.sortIndex=pe,e(l,z),y||m||(y=!0,re(C))),z},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(z){var X=p;return function(){var Y=p;p=X;try{return z.apply(this,arguments)}finally{p=Y}}}})(nC);tC.exports=nC;var JM=tC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZM=O,er=JM;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var rC=new Set,gu={};function ta(t,e){al(t,e),al(t+"Capture",e)}function al(t,e){for(gu[t]=e,t=0;t<e.length;t++)rC.add(e[t])}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ry=Object.prototype.hasOwnProperty,ej=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kb={},Gb={};function tj(t){return Ry.call(Gb,t)?!0:Ry.call(Kb,t)?!1:ej.test(t)?Gb[t]=!0:(Kb[t]=!0,!1)}function nj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rj(t,e,n,r){if(e===null||typeof e>"u"||nj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function An(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nn[t]=new An(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nn[e]=new An(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nn[t]=new An(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nn[t]=new An(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nn[t]=new An(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nn[t]=new An(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nn[t]=new An(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nn[t]=new An(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nn[t]=new An(t,5,!1,t.toLowerCase(),null,!1,!1)});var H_=/[\-:]([a-z])/g;function q_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(H_,q_);nn[e]=new An(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(H_,q_);nn[e]=new An(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(H_,q_);nn[e]=new An(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nn[t]=new An(t,1,!1,t.toLowerCase(),null,!1,!1)});nn.xlinkHref=new An("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nn[t]=new An(t,1,!1,t.toLowerCase(),null,!0,!0)});function K_(t,e,n,r){var i=nn.hasOwnProperty(e)?nn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rj(e,n,i,r)&&(n=null),r||i===null?tj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hi=ZM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,id=Symbol.for("react.element"),Ca=Symbol.for("react.portal"),Pa=Symbol.for("react.fragment"),G_=Symbol.for("react.strict_mode"),Ny=Symbol.for("react.profiler"),iC=Symbol.for("react.provider"),sC=Symbol.for("react.context"),Y_=Symbol.for("react.forward_ref"),Dy=Symbol.for("react.suspense"),Oy=Symbol.for("react.suspense_list"),Q_=Symbol.for("react.memo"),ss=Symbol.for("react.lazy"),oC=Symbol.for("react.offscreen"),Yb=Symbol.iterator;function lc(t){return t===null||typeof t!="object"?null:(t=Yb&&t[Yb]||t["@@iterator"],typeof t=="function"?t:null)}var ht=Object.assign,ag;function kc(t){if(ag===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ag=e&&e[1]||""}return`
`+ag+t}var lg=!1;function cg(t,e){if(!t||lg)return"";lg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{lg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?kc(t):""}function ij(t){switch(t.tag){case 5:return kc(t.type);case 16:return kc("Lazy");case 13:return kc("Suspense");case 19:return kc("SuspenseList");case 0:case 2:case 15:return t=cg(t.type,!1),t;case 11:return t=cg(t.type.render,!1),t;case 1:return t=cg(t.type,!0),t;default:return""}}function My(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pa:return"Fragment";case Ca:return"Portal";case Ny:return"Profiler";case G_:return"StrictMode";case Dy:return"Suspense";case Oy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sC:return(t.displayName||"Context")+".Consumer";case iC:return(t._context.displayName||"Context")+".Provider";case Y_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Q_:return e=t.displayName||null,e!==null?e:My(t.type)||"Memo";case ss:e=t._payload,t=t._init;try{return My(t(e))}catch{}}return null}function sj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return My(e);case 8:return e===G_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function js(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function aC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oj(t){var e=aC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sd(t){t._valueTracker||(t._valueTracker=oj(t))}function lC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=aC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jy(t,e){var n=e.checked;return ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=js(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function cC(t,e){e=e.checked,e!=null&&K_(t,"checked",e,!1)}function Ly(t,e){cC(t,e);var n=js(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Vy(t,e.type,n):e.hasOwnProperty("defaultValue")&&Vy(t,e.type,js(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Vy(t,e,n){(e!=="number"||Cf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ic=Array.isArray;function Ga(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+js(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Fy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Ic(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:js(n)}}function uC(t,e){var n=js(e.value),r=js(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Zb(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function hC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?hC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var od,dC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(od=od||document.createElement("div"),od.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=od.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aj=["Webkit","ms","Moz","O"];Object.keys(Wc).forEach(function(t){aj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wc[e]=Wc[t]})});function fC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wc.hasOwnProperty(t)&&Wc[t]?(""+e).trim():e+"px"}function pC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=fC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var lj=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function By(t,e){if(e){if(lj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function zy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $y=null;function X_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wy=null,Ya=null,Qa=null;function eT(t){if(t=lh(t)){if(typeof Wy!="function")throw Error(W(280));var e=t.stateNode;e&&(e=$p(e),Wy(t.stateNode,t.type,e))}}function mC(t){Ya?Qa?Qa.push(t):Qa=[t]:Ya=t}function gC(){if(Ya){var t=Ya,e=Qa;if(Qa=Ya=null,eT(t),e)for(t=0;t<e.length;t++)eT(e[t])}}function yC(t,e){return t(e)}function vC(){}var ug=!1;function _C(t,e,n){if(ug)return t(e,n);ug=!0;try{return yC(t,e,n)}finally{ug=!1,(Ya!==null||Qa!==null)&&(vC(),gC())}}function vu(t,e){var n=t.stateNode;if(n===null)return null;var r=$p(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Hy=!1;if(ji)try{var cc={};Object.defineProperty(cc,"passive",{get:function(){Hy=!0}}),window.addEventListener("test",cc,cc),window.removeEventListener("test",cc,cc)}catch{Hy=!1}function cj(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Hc=!1,Pf=null,Af=!1,qy=null,uj={onError:function(t){Hc=!0,Pf=t}};function hj(t,e,n,r,i,s,o,a,l){Hc=!1,Pf=null,cj.apply(uj,arguments)}function dj(t,e,n,r,i,s,o,a,l){if(hj.apply(this,arguments),Hc){if(Hc){var c=Pf;Hc=!1,Pf=null}else throw Error(W(198));Af||(Af=!0,qy=c)}}function na(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function xC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tT(t){if(na(t)!==t)throw Error(W(188))}function fj(t){var e=t.alternate;if(!e){if(e=na(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return tT(i),t;if(s===r)return tT(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function wC(t){return t=fj(t),t!==null?bC(t):null}function bC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bC(t);if(e!==null)return e;t=t.sibling}return null}var TC=er.unstable_scheduleCallback,nT=er.unstable_cancelCallback,pj=er.unstable_shouldYield,mj=er.unstable_requestPaint,bt=er.unstable_now,gj=er.unstable_getCurrentPriorityLevel,J_=er.unstable_ImmediatePriority,SC=er.unstable_UserBlockingPriority,Rf=er.unstable_NormalPriority,yj=er.unstable_LowPriority,EC=er.unstable_IdlePriority,Fp=null,Gr=null;function vj(t){if(Gr&&typeof Gr.onCommitFiberRoot=="function")try{Gr.onCommitFiberRoot(Fp,t,void 0,(t.current.flags&128)===128)}catch{}}var kr=Math.clz32?Math.clz32:wj,_j=Math.log,xj=Math.LN2;function wj(t){return t>>>=0,t===0?32:31-(_j(t)/xj|0)|0}var ad=64,ld=4194304;function Cc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Cc(a):(s&=o,s!==0&&(r=Cc(s)))}else o=n&~i,o!==0?r=Cc(o):s!==0&&(r=Cc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-kr(e),i=1<<n,r|=t[n],e&=~i;return r}function bj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-kr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=bj(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Ky(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function kC(){var t=ad;return ad<<=1,!(ad&4194240)&&(ad=64),t}function hg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function oh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kr(e),t[e]=n}function Sj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-kr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Z_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-kr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var je=0;function IC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var CC,e0,PC,AC,RC,Gy=!1,cd=[],Ts=null,Ss=null,Es=null,_u=new Map,xu=new Map,as=[],Ej="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rT(t,e){switch(t){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":_u.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(e.pointerId)}}function uc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=lh(e),e!==null&&e0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kj(t,e,n,r,i){switch(e){case"focusin":return Ts=uc(Ts,t,e,n,r,i),!0;case"dragenter":return Ss=uc(Ss,t,e,n,r,i),!0;case"mouseover":return Es=uc(Es,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return _u.set(s,uc(_u.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,xu.set(s,uc(xu.get(s)||null,t,e,n,r,i)),!0}return!1}function NC(t){var e=Eo(t.target);if(e!==null){var n=na(e);if(n!==null){if(e=n.tag,e===13){if(e=xC(n),e!==null){t.blockedOn=e,RC(t.priority,function(){PC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$y=r,n.target.dispatchEvent(r),$y=null}else return e=lh(n),e!==null&&e0(e),t.blockedOn=n,!1;e.shift()}return!0}function iT(t,e,n){Xd(t)&&n.delete(e)}function Ij(){Gy=!1,Ts!==null&&Xd(Ts)&&(Ts=null),Ss!==null&&Xd(Ss)&&(Ss=null),Es!==null&&Xd(Es)&&(Es=null),_u.forEach(iT),xu.forEach(iT)}function hc(t,e){t.blockedOn===e&&(t.blockedOn=null,Gy||(Gy=!0,er.unstable_scheduleCallback(er.unstable_NormalPriority,Ij)))}function wu(t){function e(i){return hc(i,t)}if(0<cd.length){hc(cd[0],t);for(var n=1;n<cd.length;n++){var r=cd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ts!==null&&hc(Ts,t),Ss!==null&&hc(Ss,t),Es!==null&&hc(Es,t),_u.forEach(e),xu.forEach(e),n=0;n<as.length;n++)r=as[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<as.length&&(n=as[0],n.blockedOn===null);)NC(n),n.blockedOn===null&&as.shift()}var Xa=Hi.ReactCurrentBatchConfig,Df=!0;function Cj(t,e,n,r){var i=je,s=Xa.transition;Xa.transition=null;try{je=1,t0(t,e,n,r)}finally{je=i,Xa.transition=s}}function Pj(t,e,n,r){var i=je,s=Xa.transition;Xa.transition=null;try{je=4,t0(t,e,n,r)}finally{je=i,Xa.transition=s}}function t0(t,e,n,r){if(Df){var i=Yy(t,e,n,r);if(i===null)wg(t,e,r,Of,n),rT(t,r);else if(kj(i,t,e,n,r))r.stopPropagation();else if(rT(t,r),e&4&&-1<Ej.indexOf(t)){for(;i!==null;){var s=lh(i);if(s!==null&&CC(s),s=Yy(t,e,n,r),s===null&&wg(t,e,r,Of,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else wg(t,e,r,null,n)}}var Of=null;function Yy(t,e,n,r){if(Of=null,t=X_(r),t=Eo(t),t!==null)if(e=na(t),e===null)t=null;else if(n=e.tag,n===13){if(t=xC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Of=t,null}function DC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gj()){case J_:return 1;case SC:return 4;case Rf:case yj:return 16;case EC:return 536870912;default:return 16}default:return 16}}var ms=null,n0=null,Jd=null;function OC(){if(Jd)return Jd;var t,e=n0,n=e.length,r,i="value"in ms?ms.value:ms.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Jd=i.slice(t,1<r?1-r:void 0)}function Zd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ud(){return!0}function sT(){return!1}function rr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ud:sT,this.isPropagationStopped=sT,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ud)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ud)},persist:function(){},isPersistent:ud}),e}var Dl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},r0=rr(Dl),ah=ht({},Dl,{view:0,detail:0}),Aj=rr(ah),dg,fg,dc,Up=ht({},ah,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:i0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==dc&&(dc&&t.type==="mousemove"?(dg=t.screenX-dc.screenX,fg=t.screenY-dc.screenY):fg=dg=0,dc=t),dg)},movementY:function(t){return"movementY"in t?t.movementY:fg}}),oT=rr(Up),Rj=ht({},Up,{dataTransfer:0}),Nj=rr(Rj),Dj=ht({},ah,{relatedTarget:0}),pg=rr(Dj),Oj=ht({},Dl,{animationName:0,elapsedTime:0,pseudoElement:0}),Mj=rr(Oj),jj=ht({},Dl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Lj=rr(jj),Vj=ht({},Dl,{data:0}),aT=rr(Vj),Fj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Bj[t])?!!e[t]:!1}function i0(){return zj}var $j=ht({},ah,{key:function(t){if(t.key){var e=Fj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Uj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:i0,charCode:function(t){return t.type==="keypress"?Zd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Wj=rr($j),Hj=ht({},Up,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lT=rr(Hj),qj=ht({},ah,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:i0}),Kj=rr(qj),Gj=ht({},Dl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yj=rr(Gj),Qj=ht({},Up,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Xj=rr(Qj),Jj=[9,13,27,32],s0=ji&&"CompositionEvent"in window,qc=null;ji&&"documentMode"in document&&(qc=document.documentMode);var Zj=ji&&"TextEvent"in window&&!qc,MC=ji&&(!s0||qc&&8<qc&&11>=qc),cT=" ",uT=!1;function jC(t,e){switch(t){case"keyup":return Jj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Aa=!1;function eL(t,e){switch(t){case"compositionend":return LC(e);case"keypress":return e.which!==32?null:(uT=!0,cT);case"textInput":return t=e.data,t===cT&&uT?null:t;default:return null}}function tL(t,e){if(Aa)return t==="compositionend"||!s0&&jC(t,e)?(t=OC(),Jd=n0=ms=null,Aa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return MC&&e.locale!=="ko"?null:e.data;default:return null}}var nL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!nL[t.type]:e==="textarea"}function VC(t,e,n,r){mC(r),e=Mf(e,"onChange"),0<e.length&&(n=new r0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Kc=null,bu=null;function rL(t){YC(t,0)}function Bp(t){var e=Da(t);if(lC(e))return t}function iL(t,e){if(t==="change")return e}var FC=!1;if(ji){var mg;if(ji){var gg="oninput"in document;if(!gg){var dT=document.createElement("div");dT.setAttribute("oninput","return;"),gg=typeof dT.oninput=="function"}mg=gg}else mg=!1;FC=mg&&(!document.documentMode||9<document.documentMode)}function fT(){Kc&&(Kc.detachEvent("onpropertychange",UC),bu=Kc=null)}function UC(t){if(t.propertyName==="value"&&Bp(bu)){var e=[];VC(e,bu,t,X_(t)),_C(rL,e)}}function sL(t,e,n){t==="focusin"?(fT(),Kc=e,bu=n,Kc.attachEvent("onpropertychange",UC)):t==="focusout"&&fT()}function oL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Bp(bu)}function aL(t,e){if(t==="click")return Bp(e)}function lL(t,e){if(t==="input"||t==="change")return Bp(e)}function cL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pr=typeof Object.is=="function"?Object.is:cL;function Tu(t,e){if(Pr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ry.call(e,i)||!Pr(t[i],e[i]))return!1}return!0}function pT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mT(t,e){var n=pT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pT(n)}}function BC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?BC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function zC(){for(var t=window,e=Cf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cf(t.document)}return e}function o0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uL(t){var e=zC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&BC(n.ownerDocument.documentElement,n)){if(r!==null&&o0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=mT(n,s);var o=mT(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var hL=ji&&"documentMode"in document&&11>=document.documentMode,Ra=null,Qy=null,Gc=null,Xy=!1;function gT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Xy||Ra==null||Ra!==Cf(r)||(r=Ra,"selectionStart"in r&&o0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gc&&Tu(Gc,r)||(Gc=r,r=Mf(Qy,"onSelect"),0<r.length&&(e=new r0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ra)))}function hd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Na={animationend:hd("Animation","AnimationEnd"),animationiteration:hd("Animation","AnimationIteration"),animationstart:hd("Animation","AnimationStart"),transitionend:hd("Transition","TransitionEnd")},yg={},$C={};ji&&($C=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function zp(t){if(yg[t])return yg[t];if(!Na[t])return t;var e=Na[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $C)return yg[t]=e[n];return t}var WC=zp("animationend"),HC=zp("animationiteration"),qC=zp("animationstart"),KC=zp("transitionend"),GC=new Map,yT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hs(t,e){GC.set(t,e),ta(e,[t])}for(var vg=0;vg<yT.length;vg++){var _g=yT[vg],dL=_g.toLowerCase(),fL=_g[0].toUpperCase()+_g.slice(1);Hs(dL,"on"+fL)}Hs(WC,"onAnimationEnd");Hs(HC,"onAnimationIteration");Hs(qC,"onAnimationStart");Hs("dblclick","onDoubleClick");Hs("focusin","onFocus");Hs("focusout","onBlur");Hs(KC,"onTransitionEnd");al("onMouseEnter",["mouseout","mouseover"]);al("onMouseLeave",["mouseout","mouseover"]);al("onPointerEnter",["pointerout","pointerover"]);al("onPointerLeave",["pointerout","pointerover"]);ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ta("onBeforeInput",["compositionend","keypress","textInput","paste"]);ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pc));function vT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dj(r,e,void 0,t),t.currentTarget=null}function YC(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;vT(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;vT(i,a,c),s=l}}}if(Af)throw t=qy,Af=!1,qy=null,t}function Je(t,e){var n=e[nv];n===void 0&&(n=e[nv]=new Set);var r=t+"__bubble";n.has(r)||(QC(e,t,2,!1),n.add(r))}function xg(t,e,n){var r=0;e&&(r|=4),QC(n,t,r,e)}var dd="_reactListening"+Math.random().toString(36).slice(2);function Su(t){if(!t[dd]){t[dd]=!0,rC.forEach(function(n){n!=="selectionchange"&&(pL.has(n)||xg(n,!1,t),xg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dd]||(e[dd]=!0,xg("selectionchange",!1,e))}}function QC(t,e,n,r){switch(DC(e)){case 1:var i=Cj;break;case 4:i=Pj;break;default:i=t0}n=i.bind(null,e,n,t),i=void 0,!Hy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Eo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}_C(function(){var c=s,u=X_(n),d=[];e:{var p=GC.get(t);if(p!==void 0){var m=r0,y=t;switch(t){case"keypress":if(Zd(n)===0)break e;case"keydown":case"keyup":m=Wj;break;case"focusin":y="focus",m=pg;break;case"focusout":y="blur",m=pg;break;case"beforeblur":case"afterblur":m=pg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=oT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Nj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Kj;break;case WC:case HC:case qC:m=Mj;break;case KC:m=Yj;break;case"scroll":m=Aj;break;case"wheel":m=Xj;break;case"copy":case"cut":case"paste":m=Lj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=lT}var v=(e&4)!==0,x=!v&&t==="scroll",w=v?p!==null?p+"Capture":null:p;v=[];for(var b=c,E;b!==null;){E=b;var I=E.stateNode;if(E.tag===5&&I!==null&&(E=I,w!==null&&(I=vu(b,w),I!=null&&v.push(Eu(b,I,E)))),x)break;b=b.return}0<v.length&&(p=new m(p,y,null,n,u),d.push({event:p,listeners:v}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==$y&&(y=n.relatedTarget||n.fromElement)&&(Eo(y)||y[Li]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?Eo(y):null,y!==null&&(x=na(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(v=oT,I="onMouseLeave",w="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(v=lT,I="onPointerLeave",w="onPointerEnter",b="pointer"),x=m==null?p:Da(m),E=y==null?p:Da(y),p=new v(I,b+"leave",m,n,u),p.target=x,p.relatedTarget=E,I=null,Eo(u)===c&&(v=new v(w,b+"enter",y,n,u),v.target=E,v.relatedTarget=x,I=v),x=I,m&&y)t:{for(v=m,w=y,b=0,E=v;E;E=xa(E))b++;for(E=0,I=w;I;I=xa(I))E++;for(;0<b-E;)v=xa(v),b--;for(;0<E-b;)w=xa(w),E--;for(;b--;){if(v===w||w!==null&&v===w.alternate)break t;v=xa(v),w=xa(w)}v=null}else v=null;m!==null&&_T(d,p,m,v,!1),y!==null&&x!==null&&_T(d,x,y,v,!0)}}e:{if(p=c?Da(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var C=iL;else if(hT(p))if(FC)C=lL;else{C=oL;var M=sL}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=aL);if(C&&(C=C(t,c))){VC(d,C,n,u);break e}M&&M(t,p,c),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Vy(p,"number",p.value)}switch(M=c?Da(c):window,t){case"focusin":(hT(M)||M.contentEditable==="true")&&(Ra=M,Qy=c,Gc=null);break;case"focusout":Gc=Qy=Ra=null;break;case"mousedown":Xy=!0;break;case"contextmenu":case"mouseup":case"dragend":Xy=!1,gT(d,n,u);break;case"selectionchange":if(hL)break;case"keydown":case"keyup":gT(d,n,u)}var S;if(s0)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Aa?jC(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(MC&&n.locale!=="ko"&&(Aa||_!=="onCompositionStart"?_==="onCompositionEnd"&&Aa&&(S=OC()):(ms=u,n0="value"in ms?ms.value:ms.textContent,Aa=!0)),M=Mf(c,_),0<M.length&&(_=new aT(_,t,null,n,u),d.push({event:_,listeners:M}),S?_.data=S:(S=LC(n),S!==null&&(_.data=S)))),(S=Zj?eL(t,n):tL(t,n))&&(c=Mf(c,"onBeforeInput"),0<c.length&&(u=new aT("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=S))}YC(d,e)})}function Eu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=vu(t,n),s!=null&&r.unshift(Eu(t,s,i)),s=vu(t,e),s!=null&&r.push(Eu(t,s,i))),t=t.return}return r}function xa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function _T(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=vu(n,s),l!=null&&o.unshift(Eu(n,l,a))):i||(l=vu(n,s),l!=null&&o.push(Eu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var mL=/\r\n?/g,gL=/\u0000|\uFFFD/g;function xT(t){return(typeof t=="string"?t:""+t).replace(mL,`
`).replace(gL,"")}function fd(t,e,n){if(e=xT(e),xT(t)!==e&&n)throw Error(W(425))}function jf(){}var Jy=null,Zy=null;function ev(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tv=typeof setTimeout=="function"?setTimeout:void 0,yL=typeof clearTimeout=="function"?clearTimeout:void 0,wT=typeof Promise=="function"?Promise:void 0,vL=typeof queueMicrotask=="function"?queueMicrotask:typeof wT<"u"?function(t){return wT.resolve(null).then(t).catch(_L)}:tv;function _L(t){setTimeout(function(){throw t})}function bg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),wu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);wu(e)}function ks(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ol=Math.random().toString(36).slice(2),Wr="__reactFiber$"+Ol,ku="__reactProps$"+Ol,Li="__reactContainer$"+Ol,nv="__reactEvents$"+Ol,xL="__reactListeners$"+Ol,wL="__reactHandles$"+Ol;function Eo(t){var e=t[Wr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Li]||n[Wr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bT(t);t!==null;){if(n=t[Wr])return n;t=bT(t)}return e}t=n,n=t.parentNode}return null}function lh(t){return t=t[Wr]||t[Li],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Da(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function $p(t){return t[ku]||null}var rv=[],Oa=-1;function qs(t){return{current:t}}function et(t){0>Oa||(t.current=rv[Oa],rv[Oa]=null,Oa--)}function Qe(t,e){Oa++,rv[Oa]=t.current,t.current=e}var Ls={},xn=qs(Ls),Fn=qs(!1),Bo=Ls;function ll(t,e){var n=t.type.contextTypes;if(!n)return Ls;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Un(t){return t=t.childContextTypes,t!=null}function Lf(){et(Fn),et(xn)}function TT(t,e,n){if(xn.current!==Ls)throw Error(W(168));Qe(xn,e),Qe(Fn,n)}function XC(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,sj(t)||"Unknown",i));return ht({},n,r)}function Vf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ls,Bo=xn.current,Qe(xn,t),Qe(Fn,Fn.current),!0}function ST(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=XC(t,e,Bo),r.__reactInternalMemoizedMergedChildContext=t,et(Fn),et(xn),Qe(xn,t)):et(Fn),Qe(Fn,n)}var bi=null,Wp=!1,Tg=!1;function JC(t){bi===null?bi=[t]:bi.push(t)}function bL(t){Wp=!0,JC(t)}function Ks(){if(!Tg&&bi!==null){Tg=!0;var t=0,e=je;try{var n=bi;for(je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bi=null,Wp=!1}catch(i){throw bi!==null&&(bi=bi.slice(t+1)),TC(J_,Ks),i}finally{je=e,Tg=!1}}return null}var Ma=[],ja=0,Ff=null,Uf=0,lr=[],cr=0,zo=null,Ei=1,ki="";function yo(t,e){Ma[ja++]=Uf,Ma[ja++]=Ff,Ff=t,Uf=e}function ZC(t,e,n){lr[cr++]=Ei,lr[cr++]=ki,lr[cr++]=zo,zo=t;var r=Ei;t=ki;var i=32-kr(r)-1;r&=~(1<<i),n+=1;var s=32-kr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ei=1<<32-kr(e)+i|n<<i|r,ki=s+t}else Ei=1<<s|n<<i|r,ki=t}function a0(t){t.return!==null&&(yo(t,1),ZC(t,1,0))}function l0(t){for(;t===Ff;)Ff=Ma[--ja],Ma[ja]=null,Uf=Ma[--ja],Ma[ja]=null;for(;t===zo;)zo=lr[--cr],lr[cr]=null,ki=lr[--cr],lr[cr]=null,Ei=lr[--cr],lr[cr]=null}var Jn=null,Gn=null,st=!1,br=null;function eP(t,e){var n=ur(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ET(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jn=t,Gn=ks(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jn=t,Gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zo!==null?{id:Ei,overflow:ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ur(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jn=t,Gn=null,!0):!1;default:return!1}}function iv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sv(t){if(st){var e=Gn;if(e){var n=e;if(!ET(t,e)){if(iv(t))throw Error(W(418));e=ks(n.nextSibling);var r=Jn;e&&ET(t,e)?eP(r,n):(t.flags=t.flags&-4097|2,st=!1,Jn=t)}}else{if(iv(t))throw Error(W(418));t.flags=t.flags&-4097|2,st=!1,Jn=t}}}function kT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jn=t}function pd(t){if(t!==Jn)return!1;if(!st)return kT(t),st=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ev(t.type,t.memoizedProps)),e&&(e=Gn)){if(iv(t))throw tP(),Error(W(418));for(;e;)eP(t,e),e=ks(e.nextSibling)}if(kT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gn=ks(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gn=null}}else Gn=Jn?ks(t.stateNode.nextSibling):null;return!0}function tP(){for(var t=Gn;t;)t=ks(t.nextSibling)}function cl(){Gn=Jn=null,st=!1}function c0(t){br===null?br=[t]:br.push(t)}var TL=Hi.ReactCurrentBatchConfig;function fc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function md(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function IT(t){var e=t._init;return e(t._payload)}function nP(t){function e(w,b){if(t){var E=w.deletions;E===null?(w.deletions=[b],w.flags|=16):E.push(b)}}function n(w,b){if(!t)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function r(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function i(w,b){return w=As(w,b),w.index=0,w.sibling=null,w}function s(w,b,E){return w.index=E,t?(E=w.alternate,E!==null?(E=E.index,E<b?(w.flags|=2,b):E):(w.flags|=2,b)):(w.flags|=1048576,b)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,b,E,I){return b===null||b.tag!==6?(b=Ag(E,w.mode,I),b.return=w,b):(b=i(b,E),b.return=w,b)}function l(w,b,E,I){var C=E.type;return C===Pa?u(w,b,E.props.children,I,E.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ss&&IT(C)===b.type)?(I=i(b,E.props),I.ref=fc(w,b,E),I.return=w,I):(I=af(E.type,E.key,E.props,null,w.mode,I),I.ref=fc(w,b,E),I.return=w,I)}function c(w,b,E,I){return b===null||b.tag!==4||b.stateNode.containerInfo!==E.containerInfo||b.stateNode.implementation!==E.implementation?(b=Rg(E,w.mode,I),b.return=w,b):(b=i(b,E.children||[]),b.return=w,b)}function u(w,b,E,I,C){return b===null||b.tag!==7?(b=Mo(E,w.mode,I,C),b.return=w,b):(b=i(b,E),b.return=w,b)}function d(w,b,E){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Ag(""+b,w.mode,E),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case id:return E=af(b.type,b.key,b.props,null,w.mode,E),E.ref=fc(w,null,b),E.return=w,E;case Ca:return b=Rg(b,w.mode,E),b.return=w,b;case ss:var I=b._init;return d(w,I(b._payload),E)}if(Ic(b)||lc(b))return b=Mo(b,w.mode,E,null),b.return=w,b;md(w,b)}return null}function p(w,b,E,I){var C=b!==null?b.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return C!==null?null:a(w,b,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case id:return E.key===C?l(w,b,E,I):null;case Ca:return E.key===C?c(w,b,E,I):null;case ss:return C=E._init,p(w,b,C(E._payload),I)}if(Ic(E)||lc(E))return C!==null?null:u(w,b,E,I,null);md(w,E)}return null}function m(w,b,E,I,C){if(typeof I=="string"&&I!==""||typeof I=="number")return w=w.get(E)||null,a(b,w,""+I,C);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case id:return w=w.get(I.key===null?E:I.key)||null,l(b,w,I,C);case Ca:return w=w.get(I.key===null?E:I.key)||null,c(b,w,I,C);case ss:var M=I._init;return m(w,b,E,M(I._payload),C)}if(Ic(I)||lc(I))return w=w.get(E)||null,u(b,w,I,C,null);md(b,I)}return null}function y(w,b,E,I){for(var C=null,M=null,S=b,_=b=0,k=null;S!==null&&_<E.length;_++){S.index>_?(k=S,S=null):k=S.sibling;var P=p(w,S,E[_],I);if(P===null){S===null&&(S=k);break}t&&S&&P.alternate===null&&e(w,S),b=s(P,b,_),M===null?C=P:M.sibling=P,M=P,S=k}if(_===E.length)return n(w,S),st&&yo(w,_),C;if(S===null){for(;_<E.length;_++)S=d(w,E[_],I),S!==null&&(b=s(S,b,_),M===null?C=S:M.sibling=S,M=S);return st&&yo(w,_),C}for(S=r(w,S);_<E.length;_++)k=m(S,w,_,E[_],I),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?_:k.key),b=s(k,b,_),M===null?C=k:M.sibling=k,M=k);return t&&S.forEach(function(A){return e(w,A)}),st&&yo(w,_),C}function v(w,b,E,I){var C=lc(E);if(typeof C!="function")throw Error(W(150));if(E=C.call(E),E==null)throw Error(W(151));for(var M=C=null,S=b,_=b=0,k=null,P=E.next();S!==null&&!P.done;_++,P=E.next()){S.index>_?(k=S,S=null):k=S.sibling;var A=p(w,S,P.value,I);if(A===null){S===null&&(S=k);break}t&&S&&A.alternate===null&&e(w,S),b=s(A,b,_),M===null?C=A:M.sibling=A,M=A,S=k}if(P.done)return n(w,S),st&&yo(w,_),C;if(S===null){for(;!P.done;_++,P=E.next())P=d(w,P.value,I),P!==null&&(b=s(P,b,_),M===null?C=P:M.sibling=P,M=P);return st&&yo(w,_),C}for(S=r(w,S);!P.done;_++,P=E.next())P=m(S,w,_,P.value,I),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?_:P.key),b=s(P,b,_),M===null?C=P:M.sibling=P,M=P);return t&&S.forEach(function(D){return e(w,D)}),st&&yo(w,_),C}function x(w,b,E,I){if(typeof E=="object"&&E!==null&&E.type===Pa&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case id:e:{for(var C=E.key,M=b;M!==null;){if(M.key===C){if(C=E.type,C===Pa){if(M.tag===7){n(w,M.sibling),b=i(M,E.props.children),b.return=w,w=b;break e}}else if(M.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ss&&IT(C)===M.type){n(w,M.sibling),b=i(M,E.props),b.ref=fc(w,M,E),b.return=w,w=b;break e}n(w,M);break}else e(w,M);M=M.sibling}E.type===Pa?(b=Mo(E.props.children,w.mode,I,E.key),b.return=w,w=b):(I=af(E.type,E.key,E.props,null,w.mode,I),I.ref=fc(w,b,E),I.return=w,w=I)}return o(w);case Ca:e:{for(M=E.key;b!==null;){if(b.key===M)if(b.tag===4&&b.stateNode.containerInfo===E.containerInfo&&b.stateNode.implementation===E.implementation){n(w,b.sibling),b=i(b,E.children||[]),b.return=w,w=b;break e}else{n(w,b);break}else e(w,b);b=b.sibling}b=Rg(E,w.mode,I),b.return=w,w=b}return o(w);case ss:return M=E._init,x(w,b,M(E._payload),I)}if(Ic(E))return y(w,b,E,I);if(lc(E))return v(w,b,E,I);md(w,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,b!==null&&b.tag===6?(n(w,b.sibling),b=i(b,E),b.return=w,w=b):(n(w,b),b=Ag(E,w.mode,I),b.return=w,w=b),o(w)):n(w,b)}return x}var ul=nP(!0),rP=nP(!1),Bf=qs(null),zf=null,La=null,u0=null;function h0(){u0=La=zf=null}function d0(t){var e=Bf.current;et(Bf),t._currentValue=e}function ov(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ja(t,e){zf=t,u0=La=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vn=!0),t.firstContext=null)}function fr(t){var e=t._currentValue;if(u0!==t)if(t={context:t,memoizedValue:e,next:null},La===null){if(zf===null)throw Error(W(308));La=t,zf.dependencies={lanes:0,firstContext:t}}else La=La.next=t;return e}var ko=null;function f0(t){ko===null?ko=[t]:ko.push(t)}function iP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,f0(e)):(n.next=i.next,i.next=n),e.interleaved=n,Vi(t,r)}function Vi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var os=!1;function p0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ai(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Is(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Vi(t,n)}return i=r.interleaved,i===null?(e.next=e,f0(r)):(e.next=i.next,i.next=e),r.interleaved=e,Vi(t,n)}function ef(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Z_(t,n)}}function CT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $f(t,e,n,r){var i=t.updateQueue;os=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,v=a;switch(p=e,m=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(m,d,p);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,p=typeof y=="function"?y.call(m,d,p):y,p==null)break e;d=ht({},d,p);break e;case 2:os=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=d):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Wo|=o,t.lanes=o,t.memoizedState=d}}function PT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var ch={},Yr=qs(ch),Iu=qs(ch),Cu=qs(ch);function Io(t){if(t===ch)throw Error(W(174));return t}function m0(t,e){switch(Qe(Cu,e),Qe(Iu,t),Qe(Yr,ch),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uy(e,t)}et(Yr),Qe(Yr,e)}function hl(){et(Yr),et(Iu),et(Cu)}function oP(t){Io(Cu.current);var e=Io(Yr.current),n=Uy(e,t.type);e!==n&&(Qe(Iu,t),Qe(Yr,n))}function g0(t){Iu.current===t&&(et(Yr),et(Iu))}var lt=qs(0);function Wf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sg=[];function y0(){for(var t=0;t<Sg.length;t++)Sg[t]._workInProgressVersionPrimary=null;Sg.length=0}var tf=Hi.ReactCurrentDispatcher,Eg=Hi.ReactCurrentBatchConfig,$o=0,ut=null,Dt=null,Ut=null,Hf=!1,Yc=!1,Pu=0,SL=0;function an(){throw Error(W(321))}function v0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pr(t[n],e[n]))return!1;return!0}function _0(t,e,n,r,i,s){if($o=s,ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tf.current=t===null||t.memoizedState===null?CL:PL,t=n(r,i),Yc){s=0;do{if(Yc=!1,Pu=0,25<=s)throw Error(W(301));s+=1,Ut=Dt=null,e.updateQueue=null,tf.current=AL,t=n(r,i)}while(Yc)}if(tf.current=qf,e=Dt!==null&&Dt.next!==null,$o=0,Ut=Dt=ut=null,Hf=!1,e)throw Error(W(300));return t}function x0(){var t=Pu!==0;return Pu=0,t}function Ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?ut.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function pr(){if(Dt===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=Dt.next;var e=Ut===null?ut.memoizedState:Ut.next;if(e!==null)Ut=e,Dt=t;else{if(t===null)throw Error(W(310));Dt=t,t={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Ut===null?ut.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function Au(t,e){return typeof e=="function"?e(t):e}function kg(t){var e=pr(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Dt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if(($o&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,ut.lanes|=u,Wo|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Pr(r,e.memoizedState)||(Vn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ut.lanes|=s,Wo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ig(t){var e=pr(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Pr(s,e.memoizedState)||(Vn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function aP(){}function lP(t,e){var n=ut,r=pr(),i=e(),s=!Pr(r.memoizedState,i);if(s&&(r.memoizedState=i,Vn=!0),r=r.queue,w0(hP.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,Ru(9,uP.bind(null,n,r,i,e),void 0,null),Bt===null)throw Error(W(349));$o&30||cP(n,e,i)}return i}function cP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function uP(t,e,n,r){e.value=n,e.getSnapshot=r,dP(e)&&fP(t)}function hP(t,e,n){return n(function(){dP(e)&&fP(t)})}function dP(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pr(t,n)}catch{return!0}}function fP(t){var e=Vi(t,1);e!==null&&Ir(e,t,1,-1)}function AT(t){var e=Ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Au,lastRenderedState:t},e.queue=t,t=t.dispatch=IL.bind(null,ut,t),[e.memoizedState,t]}function Ru(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function pP(){return pr().memoizedState}function nf(t,e,n,r){var i=Ur();ut.flags|=t,i.memoizedState=Ru(1|e,n,void 0,r===void 0?null:r)}function Hp(t,e,n,r){var i=pr();r=r===void 0?null:r;var s=void 0;if(Dt!==null){var o=Dt.memoizedState;if(s=o.destroy,r!==null&&v0(r,o.deps)){i.memoizedState=Ru(e,n,s,r);return}}ut.flags|=t,i.memoizedState=Ru(1|e,n,s,r)}function RT(t,e){return nf(8390656,8,t,e)}function w0(t,e){return Hp(2048,8,t,e)}function mP(t,e){return Hp(4,2,t,e)}function gP(t,e){return Hp(4,4,t,e)}function yP(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vP(t,e,n){return n=n!=null?n.concat([t]):null,Hp(4,4,yP.bind(null,e,t),n)}function b0(){}function _P(t,e){var n=pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&v0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function xP(t,e){var n=pr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&v0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function wP(t,e,n){return $o&21?(Pr(n,e)||(n=kC(),ut.lanes|=n,Wo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vn=!0),t.memoizedState=n)}function EL(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var r=Eg.transition;Eg.transition={};try{t(!1),e()}finally{je=n,Eg.transition=r}}function bP(){return pr().memoizedState}function kL(t,e,n){var r=Ps(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},TP(t))SP(e,n);else if(n=iP(t,e,n,r),n!==null){var i=In();Ir(n,t,r,i),EP(n,e,r)}}function IL(t,e,n){var r=Ps(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(TP(t))SP(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Pr(a,o)){var l=e.interleaved;l===null?(i.next=i,f0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=iP(t,e,i,r),n!==null&&(i=In(),Ir(n,t,r,i),EP(n,e,r))}}function TP(t){var e=t.alternate;return t===ut||e!==null&&e===ut}function SP(t,e){Yc=Hf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function EP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Z_(t,n)}}var qf={readContext:fr,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},CL={readContext:fr,useCallback:function(t,e){return Ur().memoizedState=[t,e===void 0?null:e],t},useContext:fr,useEffect:RT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nf(4194308,4,yP.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nf(4194308,4,t,e)},useInsertionEffect:function(t,e){return nf(4,2,t,e)},useMemo:function(t,e){var n=Ur();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ur();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=kL.bind(null,ut,t),[r.memoizedState,t]},useRef:function(t){var e=Ur();return t={current:t},e.memoizedState=t},useState:AT,useDebugValue:b0,useDeferredValue:function(t){return Ur().memoizedState=t},useTransition:function(){var t=AT(!1),e=t[0];return t=EL.bind(null,t[1]),Ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ut,i=Ur();if(st){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),Bt===null)throw Error(W(349));$o&30||cP(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,RT(hP.bind(null,r,s,t),[t]),r.flags|=2048,Ru(9,uP.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Ur(),e=Bt.identifierPrefix;if(st){var n=ki,r=Ei;n=(r&~(1<<32-kr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=SL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},PL={readContext:fr,useCallback:_P,useContext:fr,useEffect:w0,useImperativeHandle:vP,useInsertionEffect:mP,useLayoutEffect:gP,useMemo:xP,useReducer:kg,useRef:pP,useState:function(){return kg(Au)},useDebugValue:b0,useDeferredValue:function(t){var e=pr();return wP(e,Dt.memoizedState,t)},useTransition:function(){var t=kg(Au)[0],e=pr().memoizedState;return[t,e]},useMutableSource:aP,useSyncExternalStore:lP,useId:bP,unstable_isNewReconciler:!1},AL={readContext:fr,useCallback:_P,useContext:fr,useEffect:w0,useImperativeHandle:vP,useInsertionEffect:mP,useLayoutEffect:gP,useMemo:xP,useReducer:Ig,useRef:pP,useState:function(){return Ig(Au)},useDebugValue:b0,useDeferredValue:function(t){var e=pr();return Dt===null?e.memoizedState=t:wP(e,Dt.memoizedState,t)},useTransition:function(){var t=Ig(Au)[0],e=pr().memoizedState;return[t,e]},useMutableSource:aP,useSyncExternalStore:lP,useId:bP,unstable_isNewReconciler:!1};function xr(t,e){if(t&&t.defaultProps){e=ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function av(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qp={isMounted:function(t){return(t=t._reactInternals)?na(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=In(),i=Ps(t),s=Ai(r,i);s.payload=e,n!=null&&(s.callback=n),e=Is(t,s,i),e!==null&&(Ir(e,t,i,r),ef(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=In(),i=Ps(t),s=Ai(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Is(t,s,i),e!==null&&(Ir(e,t,i,r),ef(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=In(),r=Ps(t),i=Ai(n,r);i.tag=2,e!=null&&(i.callback=e),e=Is(t,i,r),e!==null&&(Ir(e,t,r,n),ef(e,t,r))}};function NT(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Tu(n,r)||!Tu(i,s):!0}function kP(t,e,n){var r=!1,i=Ls,s=e.contextType;return typeof s=="object"&&s!==null?s=fr(s):(i=Un(e)?Bo:xn.current,r=e.contextTypes,s=(r=r!=null)?ll(t,i):Ls),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function DT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qp.enqueueReplaceState(e,e.state,null)}function lv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},p0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=fr(s):(s=Un(e)?Bo:xn.current,i.context=ll(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(av(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qp.enqueueReplaceState(i,i.state,null),$f(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function dl(t,e){try{var n="",r=e;do n+=ij(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Cg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RL=typeof WeakMap=="function"?WeakMap:Map;function IP(t,e,n){n=Ai(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gf||(Gf=!0,_v=r),cv(t,e)},n}function CP(t,e,n){n=Ai(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){cv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){cv(t,e),typeof r!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function OT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=HL.bind(null,t,e,n),e.then(t,t))}function MT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jT(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ai(-1,1),e.tag=2,Is(n,e,1))),n.lanes|=1),t)}var NL=Hi.ReactCurrentOwner,Vn=!1;function En(t,e,n,r){e.child=t===null?rP(e,null,n,r):ul(e,t.child,n,r)}function LT(t,e,n,r,i){n=n.render;var s=e.ref;return Ja(e,i),r=_0(t,e,n,r,s,i),n=x0(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fi(t,e,i)):(st&&n&&a0(e),e.flags|=1,En(t,e,r,i),e.child)}function VT(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!A0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,PP(t,e,s,r,i)):(t=af(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Tu,n(o,r)&&t.ref===e.ref)return Fi(t,e,i)}return e.flags|=1,t=As(s,r),t.ref=e.ref,t.return=e,e.child=t}function PP(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Tu(s,r)&&t.ref===e.ref)if(Vn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Vn=!0);else return e.lanes=t.lanes,Fi(t,e,i)}return uv(t,e,n,r,i)}function AP(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(Fa,qn),qn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Qe(Fa,qn),qn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Qe(Fa,qn),qn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Qe(Fa,qn),qn|=r;return En(t,e,i,n),e.child}function RP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uv(t,e,n,r,i){var s=Un(n)?Bo:xn.current;return s=ll(e,s),Ja(e,i),n=_0(t,e,n,r,s,i),r=x0(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fi(t,e,i)):(st&&r&&a0(e),e.flags|=1,En(t,e,n,i),e.child)}function FT(t,e,n,r,i){if(Un(n)){var s=!0;Vf(e)}else s=!1;if(Ja(e,i),e.stateNode===null)rf(t,e),kP(e,n,r),lv(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=fr(c):(c=Un(n)?Bo:xn.current,c=ll(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&DT(e,o,r,c),os=!1;var p=e.memoizedState;o.state=p,$f(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Fn.current||os?(typeof u=="function"&&(av(e,n,u,r),l=e.memoizedState),(a=os||NT(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,sP(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:xr(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=fr(l):(l=Un(n)?Bo:xn.current,l=ll(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&DT(e,o,r,l),os=!1,p=e.memoizedState,o.state=p,$f(e,r,o,i);var y=e.memoizedState;a!==d||p!==y||Fn.current||os?(typeof m=="function"&&(av(e,n,m,r),y=e.memoizedState),(c=os||NT(e,n,c,r,p,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return hv(t,e,n,r,s,i)}function hv(t,e,n,r,i,s){RP(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ST(e,n,!1),Fi(t,e,s);r=e.stateNode,NL.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ul(e,t.child,null,s),e.child=ul(e,null,a,s)):En(t,e,a,s),e.memoizedState=r.state,i&&ST(e,n,!0),e.child}function NP(t){var e=t.stateNode;e.pendingContext?TT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&TT(t,e.context,!1),m0(t,e.containerInfo)}function UT(t,e,n,r,i){return cl(),c0(i),e.flags|=256,En(t,e,n,r),e.child}var dv={dehydrated:null,treeContext:null,retryLane:0};function fv(t){return{baseLanes:t,cachePool:null,transitions:null}}function DP(t,e,n){var r=e.pendingProps,i=lt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Qe(lt,i&1),t===null)return sv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Yp(o,r,0,null),t=Mo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=fv(n),e.memoizedState=dv,t):T0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return DL(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=As(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=As(a,s):(s=Mo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?fv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=dv,r}return s=t.child,t=s.sibling,r=As(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function T0(t,e){return e=Yp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gd(t,e,n,r){return r!==null&&c0(r),ul(e,t.child,null,n),t=T0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DL(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Cg(Error(W(422))),gd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Yp({mode:"visible",children:r.children},i,0,null),s=Mo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ul(e,t.child,null,o),e.child.memoizedState=fv(o),e.memoizedState=dv,s);if(!(e.mode&1))return gd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=Cg(s,r,void 0),gd(t,e,o,r)}if(a=(o&t.childLanes)!==0,Vn||a){if(r=Bt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Vi(t,i),Ir(r,t,i,-1))}return P0(),r=Cg(Error(W(421))),gd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=qL.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Gn=ks(i.nextSibling),Jn=e,st=!0,br=null,t!==null&&(lr[cr++]=Ei,lr[cr++]=ki,lr[cr++]=zo,Ei=t.id,ki=t.overflow,zo=e),e=T0(e,r.children),e.flags|=4096,e)}function BT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ov(t.return,e,n)}function Pg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function OP(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(En(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&BT(t,n,e);else if(t.tag===19)BT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Qe(lt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Wf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Pg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Pg(e,!0,n,null,s);break;case"together":Pg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=As(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=As(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OL(t,e,n){switch(e.tag){case 3:NP(e),cl();break;case 5:oP(e);break;case 1:Un(e.type)&&Vf(e);break;case 4:m0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Qe(Bf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Qe(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?DP(t,e,n):(Qe(lt,lt.current&1),t=Fi(t,e,n),t!==null?t.sibling:null);Qe(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return OP(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Qe(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,AP(t,e,n)}return Fi(t,e,n)}var MP,pv,jP,LP;MP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pv=function(){};jP=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Io(Yr.current);var s=null;switch(n){case"input":i=jy(t,i),r=jy(t,r),s=[];break;case"select":i=ht({},i,{value:void 0}),r=ht({},r,{value:void 0}),s=[];break;case"textarea":i=Fy(t,i),r=Fy(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jf)}By(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(gu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(gu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Je("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};LP=function(t,e,n,r){n!==r&&(e.flags|=4)};function pc(t,e){if(!st)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ML(t,e,n){var r=e.pendingProps;switch(l0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return Un(e.type)&&Lf(),ln(e),null;case 3:return r=e.stateNode,hl(),et(Fn),et(xn),y0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,br!==null&&(bv(br),br=null))),pv(t,e),ln(e),null;case 5:g0(e);var i=Io(Cu.current);if(n=e.type,t!==null&&e.stateNode!=null)jP(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return ln(e),null}if(t=Io(Yr.current),pd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Wr]=e,r[ku]=s,t=(e.mode&1)!==0,n){case"dialog":Je("cancel",r),Je("close",r);break;case"iframe":case"object":case"embed":Je("load",r);break;case"video":case"audio":for(i=0;i<Pc.length;i++)Je(Pc[i],r);break;case"source":Je("error",r);break;case"img":case"image":case"link":Je("error",r),Je("load",r);break;case"details":Je("toggle",r);break;case"input":Qb(r,s),Je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Je("invalid",r);break;case"textarea":Jb(r,s),Je("invalid",r)}By(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&fd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&fd(r.textContent,a,t),i=["children",""+a]):gu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Je("scroll",r)}switch(n){case"input":sd(r),Xb(r,s,!0);break;case"textarea":sd(r),Zb(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=jf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=hC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Wr]=e,t[ku]=r,MP(t,e,!1,!1),e.stateNode=t;e:{switch(o=zy(n,r),n){case"dialog":Je("cancel",t),Je("close",t),i=r;break;case"iframe":case"object":case"embed":Je("load",t),i=r;break;case"video":case"audio":for(i=0;i<Pc.length;i++)Je(Pc[i],t);i=r;break;case"source":Je("error",t),i=r;break;case"img":case"image":case"link":Je("error",t),Je("load",t),i=r;break;case"details":Je("toggle",t),i=r;break;case"input":Qb(t,r),i=jy(t,r),Je("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ht({},r,{value:void 0}),Je("invalid",t);break;case"textarea":Jb(t,r),i=Fy(t,r),Je("invalid",t);break;default:i=r}By(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?pC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&dC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&yu(t,l):typeof l=="number"&&yu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Je("scroll",t):l!=null&&K_(t,s,l,o))}switch(n){case"input":sd(t),Xb(t,r,!1);break;case"textarea":sd(t),Zb(t);break;case"option":r.value!=null&&t.setAttribute("value",""+js(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ga(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ga(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=jf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)LP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=Io(Cu.current),Io(Yr.current),pd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Wr]=e,(s=r.nodeValue!==n)&&(t=Jn,t!==null))switch(t.tag){case 3:fd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Wr]=e,e.stateNode=r}return ln(e),null;case 13:if(et(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&Gn!==null&&e.mode&1&&!(e.flags&128))tP(),cl(),e.flags|=98560,s=!1;else if(s=pd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[Wr]=e}else cl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),s=!1}else br!==null&&(bv(br),br=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?Ot===0&&(Ot=3):P0())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return hl(),pv(t,e),t===null&&Su(e.stateNode.containerInfo),ln(e),null;case 10:return d0(e.type._context),ln(e),null;case 17:return Un(e.type)&&Lf(),ln(e),null;case 19:if(et(lt),s=e.memoizedState,s===null)return ln(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)pc(s,!1);else{if(Ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wf(t),o!==null){for(e.flags|=128,pc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Qe(lt,lt.current&1|2),e.child}t=t.sibling}s.tail!==null&&bt()>fl&&(e.flags|=128,r=!0,pc(s,!1),e.lanes=4194304)}else{if(!r)if(t=Wf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!st)return ln(e),null}else 2*bt()-s.renderingStartTime>fl&&n!==1073741824&&(e.flags|=128,r=!0,pc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=bt(),e.sibling=null,n=lt.current,Qe(lt,r?n&1|2:n&1),e):(ln(e),null);case 22:case 23:return C0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?qn&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function jL(t,e){switch(l0(e),e.tag){case 1:return Un(e.type)&&Lf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return hl(),et(Fn),et(xn),y0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return g0(e),null;case 13:if(et(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));cl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return et(lt),null;case 4:return hl(),null;case 10:return d0(e.type._context),null;case 22:case 23:return C0(),null;case 24:return null;default:return null}}var yd=!1,pn=!1,LL=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Va(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){vt(t,e,r)}else n.current=null}function mv(t,e,n){try{n()}catch(r){vt(t,e,r)}}var zT=!1;function VL(t,e){if(Jy=Df,t=zC(),o0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,p=null;t:for(;;){for(var m;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)p=d,d=m;for(;;){if(d===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zy={focusedElem:t,selectionRange:n},Df=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,x=y.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?v:xr(e.type,v),x);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(I){vt(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return y=zT,zT=!1,y}function Qc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&mv(e,n,s)}i=i.next}while(i!==r)}}function Kp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function VP(t){var e=t.alternate;e!==null&&(t.alternate=null,VP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Wr],delete e[ku],delete e[nv],delete e[xL],delete e[wL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function FP(t){return t.tag===5||t.tag===3||t.tag===4}function $T(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||FP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jf));else if(r!==4&&(t=t.child,t!==null))for(yv(t,e,n),t=t.sibling;t!==null;)yv(t,e,n),t=t.sibling}function vv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vv(t,e,n),t=t.sibling;t!==null;)vv(t,e,n),t=t.sibling}var Kt=null,wr=!1;function ts(t,e,n){for(n=n.child;n!==null;)UP(t,e,n),n=n.sibling}function UP(t,e,n){if(Gr&&typeof Gr.onCommitFiberUnmount=="function")try{Gr.onCommitFiberUnmount(Fp,n)}catch{}switch(n.tag){case 5:pn||Va(n,e);case 6:var r=Kt,i=wr;Kt=null,ts(t,e,n),Kt=r,wr=i,Kt!==null&&(wr?(t=Kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kt.removeChild(n.stateNode));break;case 18:Kt!==null&&(wr?(t=Kt,n=n.stateNode,t.nodeType===8?bg(t.parentNode,n):t.nodeType===1&&bg(t,n),wu(t)):bg(Kt,n.stateNode));break;case 4:r=Kt,i=wr,Kt=n.stateNode.containerInfo,wr=!0,ts(t,e,n),Kt=r,wr=i;break;case 0:case 11:case 14:case 15:if(!pn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&mv(n,e,o),i=i.next}while(i!==r)}ts(t,e,n);break;case 1:if(!pn&&(Va(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){vt(n,e,a)}ts(t,e,n);break;case 21:ts(t,e,n);break;case 22:n.mode&1?(pn=(r=pn)||n.memoizedState!==null,ts(t,e,n),pn=r):ts(t,e,n);break;default:ts(t,e,n)}}function WT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new LL),e.forEach(function(r){var i=KL.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function vr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Kt=a.stateNode,wr=!1;break e;case 3:Kt=a.stateNode.containerInfo,wr=!0;break e;case 4:Kt=a.stateNode.containerInfo,wr=!0;break e}a=a.return}if(Kt===null)throw Error(W(160));UP(s,o,i),Kt=null,wr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){vt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)BP(e,t),e=e.sibling}function BP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vr(e,t),jr(t),r&4){try{Qc(3,t,t.return),Kp(3,t)}catch(v){vt(t,t.return,v)}try{Qc(5,t,t.return)}catch(v){vt(t,t.return,v)}}break;case 1:vr(e,t),jr(t),r&512&&n!==null&&Va(n,n.return);break;case 5:if(vr(e,t),jr(t),r&512&&n!==null&&Va(n,n.return),t.flags&32){var i=t.stateNode;try{yu(i,"")}catch(v){vt(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&cC(i,s),zy(a,o);var c=zy(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?pC(i,d):u==="dangerouslySetInnerHTML"?dC(i,d):u==="children"?yu(i,d):K_(i,u,d,c)}switch(a){case"input":Ly(i,s);break;case"textarea":uC(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ga(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ga(i,!!s.multiple,s.defaultValue,!0):Ga(i,!!s.multiple,s.multiple?[]:"",!1))}i[ku]=s}catch(v){vt(t,t.return,v)}}break;case 6:if(vr(e,t),jr(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){vt(t,t.return,v)}}break;case 3:if(vr(e,t),jr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wu(e.containerInfo)}catch(v){vt(t,t.return,v)}break;case 4:vr(e,t),jr(t);break;case 13:vr(e,t),jr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(k0=bt())),r&4&&WT(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(pn=(c=pn)||u,vr(e,t),pn=c):vr(e,t),jr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ee=t,u=t.child;u!==null;){for(d=ee=u;ee!==null;){switch(p=ee,m=p.child,p.tag){case 0:case 11:case 14:case 15:Qc(4,p,p.return);break;case 1:Va(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){vt(r,n,v)}}break;case 5:Va(p,p.return);break;case 22:if(p.memoizedState!==null){qT(d);continue}}m!==null?(m.return=p,ee=m):qT(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=fC("display",o))}catch(v){vt(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){vt(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vr(e,t),jr(t),r&4&&WT(t);break;case 21:break;default:vr(e,t),jr(t)}}function jr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(FP(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(yu(i,""),r.flags&=-33);var s=$T(t);vv(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=$T(t);yv(t,a,o);break;default:throw Error(W(161))}}catch(l){vt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FL(t,e,n){ee=t,zP(t)}function zP(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||yd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||pn;a=yd;var c=pn;if(yd=o,(pn=l)&&!c)for(ee=i;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?KT(i):l!==null?(l.return=o,ee=l):KT(i);for(;s!==null;)ee=s,zP(s),s=s.sibling;ee=i,yd=a,pn=c}HT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):HT(t)}}function HT(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pn||Kp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:xr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&PT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}PT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&wu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}pn||e.flags&512&&gv(e)}catch(p){vt(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function qT(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function KT(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Kp(4,e)}catch(l){vt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){vt(e,i,l)}}var s=e.return;try{gv(e)}catch(l){vt(e,s,l)}break;case 5:var o=e.return;try{gv(e)}catch(l){vt(e,o,l)}}}catch(l){vt(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var UL=Math.ceil,Kf=Hi.ReactCurrentDispatcher,S0=Hi.ReactCurrentOwner,dr=Hi.ReactCurrentBatchConfig,Pe=0,Bt=null,Ct=null,en=0,qn=0,Fa=qs(0),Ot=0,Nu=null,Wo=0,Gp=0,E0=0,Xc=null,Mn=null,k0=0,fl=1/0,wi=null,Gf=!1,_v=null,Cs=null,vd=!1,gs=null,Yf=0,Jc=0,xv=null,sf=-1,of=0;function In(){return Pe&6?bt():sf!==-1?sf:sf=bt()}function Ps(t){return t.mode&1?Pe&2&&en!==0?en&-en:TL.transition!==null?(of===0&&(of=kC()),of):(t=je,t!==0||(t=window.event,t=t===void 0?16:DC(t.type)),t):1}function Ir(t,e,n,r){if(50<Jc)throw Jc=0,xv=null,Error(W(185));oh(t,n,r),(!(Pe&2)||t!==Bt)&&(t===Bt&&(!(Pe&2)&&(Gp|=n),Ot===4&&ls(t,en)),Bn(t,r),n===1&&Pe===0&&!(e.mode&1)&&(fl=bt()+500,Wp&&Ks()))}function Bn(t,e){var n=t.callbackNode;Tj(t,e);var r=Nf(t,t===Bt?en:0);if(r===0)n!==null&&nT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&nT(n),e===1)t.tag===0?bL(GT.bind(null,t)):JC(GT.bind(null,t)),vL(function(){!(Pe&6)&&Ks()}),n=null;else{switch(IC(r)){case 1:n=J_;break;case 4:n=SC;break;case 16:n=Rf;break;case 536870912:n=EC;break;default:n=Rf}n=QP(n,$P.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function $P(t,e){if(sf=-1,of=0,Pe&6)throw Error(W(327));var n=t.callbackNode;if(Za()&&t.callbackNode!==n)return null;var r=Nf(t,t===Bt?en:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qf(t,r);else{e=r;var i=Pe;Pe|=2;var s=HP();(Bt!==t||en!==e)&&(wi=null,fl=bt()+500,Oo(t,e));do try{$L();break}catch(a){WP(t,a)}while(!0);h0(),Kf.current=s,Pe=i,Ct!==null?e=0:(Bt=null,en=0,e=Ot)}if(e!==0){if(e===2&&(i=Ky(t),i!==0&&(r=i,e=wv(t,i))),e===1)throw n=Nu,Oo(t,0),ls(t,r),Bn(t,bt()),n;if(e===6)ls(t,r);else{if(i=t.current.alternate,!(r&30)&&!BL(i)&&(e=Qf(t,r),e===2&&(s=Ky(t),s!==0&&(r=s,e=wv(t,s))),e===1))throw n=Nu,Oo(t,0),ls(t,r),Bn(t,bt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:vo(t,Mn,wi);break;case 3:if(ls(t,r),(r&130023424)===r&&(e=k0+500-bt(),10<e)){if(Nf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){In(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=tv(vo.bind(null,t,Mn,wi),e);break}vo(t,Mn,wi);break;case 4:if(ls(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-kr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=bt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*UL(r/1960))-r,10<r){t.timeoutHandle=tv(vo.bind(null,t,Mn,wi),r);break}vo(t,Mn,wi);break;case 5:vo(t,Mn,wi);break;default:throw Error(W(329))}}}return Bn(t,bt()),t.callbackNode===n?$P.bind(null,t):null}function wv(t,e){var n=Xc;return t.current.memoizedState.isDehydrated&&(Oo(t,e).flags|=256),t=Qf(t,e),t!==2&&(e=Mn,Mn=n,e!==null&&bv(e)),t}function bv(t){Mn===null?Mn=t:Mn.push.apply(Mn,t)}function BL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Pr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ls(t,e){for(e&=~E0,e&=~Gp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-kr(e),r=1<<n;t[n]=-1,e&=~r}}function GT(t){if(Pe&6)throw Error(W(327));Za();var e=Nf(t,0);if(!(e&1))return Bn(t,bt()),null;var n=Qf(t,e);if(t.tag!==0&&n===2){var r=Ky(t);r!==0&&(e=r,n=wv(t,r))}if(n===1)throw n=Nu,Oo(t,0),ls(t,e),Bn(t,bt()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vo(t,Mn,wi),Bn(t,bt()),null}function I0(t,e){var n=Pe;Pe|=1;try{return t(e)}finally{Pe=n,Pe===0&&(fl=bt()+500,Wp&&Ks())}}function Ho(t){gs!==null&&gs.tag===0&&!(Pe&6)&&Za();var e=Pe;Pe|=1;var n=dr.transition,r=je;try{if(dr.transition=null,je=1,t)return t()}finally{je=r,dr.transition=n,Pe=e,!(Pe&6)&&Ks()}}function C0(){qn=Fa.current,et(Fa)}function Oo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,yL(n)),Ct!==null)for(n=Ct.return;n!==null;){var r=n;switch(l0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lf();break;case 3:hl(),et(Fn),et(xn),y0();break;case 5:g0(r);break;case 4:hl();break;case 13:et(lt);break;case 19:et(lt);break;case 10:d0(r.type._context);break;case 22:case 23:C0()}n=n.return}if(Bt=t,Ct=t=As(t.current,null),en=qn=e,Ot=0,Nu=null,E0=Gp=Wo=0,Mn=Xc=null,ko!==null){for(e=0;e<ko.length;e++)if(n=ko[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ko=null}return t}function WP(t,e){do{var n=Ct;try{if(h0(),tf.current=qf,Hf){for(var r=ut.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Hf=!1}if($o=0,Ut=Dt=ut=null,Yc=!1,Pu=0,S0.current=null,n===null||n.return===null){Ot=1,Nu=e,Ct=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=en,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=MT(o);if(m!==null){m.flags&=-257,jT(m,o,a,s,e),m.mode&1&&OT(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(l),e.updateQueue=v}else y.add(l);break e}else{if(!(e&1)){OT(s,c,e),P0();break e}l=Error(W(426))}}else if(st&&a.mode&1){var x=MT(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),jT(x,o,a,s,e),c0(dl(l,a));break e}}s=l=dl(l,a),Ot!==4&&(Ot=2),Xc===null?Xc=[s]:Xc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=IP(s,l,e);CT(s,w);break e;case 1:a=l;var b=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Cs===null||!Cs.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=CP(s,a,e);CT(s,I);break e}}s=s.return}while(s!==null)}KP(n)}catch(C){e=C,Ct===n&&n!==null&&(Ct=n=n.return);continue}break}while(!0)}function HP(){var t=Kf.current;return Kf.current=qf,t===null?qf:t}function P0(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Bt===null||!(Wo&268435455)&&!(Gp&268435455)||ls(Bt,en)}function Qf(t,e){var n=Pe;Pe|=2;var r=HP();(Bt!==t||en!==e)&&(wi=null,Oo(t,e));do try{zL();break}catch(i){WP(t,i)}while(!0);if(h0(),Pe=n,Kf.current=r,Ct!==null)throw Error(W(261));return Bt=null,en=0,Ot}function zL(){for(;Ct!==null;)qP(Ct)}function $L(){for(;Ct!==null&&!pj();)qP(Ct)}function qP(t){var e=YP(t.alternate,t,qn);t.memoizedProps=t.pendingProps,e===null?KP(t):Ct=e,S0.current=null}function KP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=jL(n,e),n!==null){n.flags&=32767,Ct=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ot=6,Ct=null;return}}else if(n=ML(n,e,qn),n!==null){Ct=n;return}if(e=e.sibling,e!==null){Ct=e;return}Ct=e=t}while(e!==null);Ot===0&&(Ot=5)}function vo(t,e,n){var r=je,i=dr.transition;try{dr.transition=null,je=1,WL(t,e,n,r)}finally{dr.transition=i,je=r}return null}function WL(t,e,n,r){do Za();while(gs!==null);if(Pe&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Sj(t,s),t===Bt&&(Ct=Bt=null,en=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vd||(vd=!0,QP(Rf,function(){return Za(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=dr.transition,dr.transition=null;var o=je;je=1;var a=Pe;Pe|=4,S0.current=null,VL(t,n),BP(n,t),uL(Zy),Df=!!Jy,Zy=Jy=null,t.current=n,FL(n),mj(),Pe=a,je=o,dr.transition=s}else t.current=n;if(vd&&(vd=!1,gs=t,Yf=i),s=t.pendingLanes,s===0&&(Cs=null),vj(n.stateNode),Bn(t,bt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gf)throw Gf=!1,t=_v,_v=null,t;return Yf&1&&t.tag!==0&&Za(),s=t.pendingLanes,s&1?t===xv?Jc++:(Jc=0,xv=t):Jc=0,Ks(),null}function Za(){if(gs!==null){var t=IC(Yf),e=dr.transition,n=je;try{if(dr.transition=null,je=16>t?16:t,gs===null)var r=!1;else{if(t=gs,gs=null,Yf=0,Pe&6)throw Error(W(331));var i=Pe;for(Pe|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ee=c;ee!==null;){var u=ee;switch(u.tag){case 0:case 11:case 15:Qc(8,u,s)}var d=u.child;if(d!==null)d.return=u,ee=d;else for(;ee!==null;){u=ee;var p=u.sibling,m=u.return;if(VP(u),u===c){ee=null;break}if(p!==null){p.return=m,ee=p;break}ee=m}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qc(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,ee=w;break e}ee=s.return}}var b=t.current;for(ee=b;ee!==null;){o=ee;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ee=E;else e:for(o=b;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Kp(9,a)}}catch(C){vt(a,a.return,C)}if(a===o){ee=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,ee=I;break e}ee=a.return}}if(Pe=i,Ks(),Gr&&typeof Gr.onPostCommitFiberRoot=="function")try{Gr.onPostCommitFiberRoot(Fp,t)}catch{}r=!0}return r}finally{je=n,dr.transition=e}}return!1}function YT(t,e,n){e=dl(n,e),e=IP(t,e,1),t=Is(t,e,1),e=In(),t!==null&&(oh(t,1,e),Bn(t,e))}function vt(t,e,n){if(t.tag===3)YT(t,t,n);else for(;e!==null;){if(e.tag===3){YT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cs===null||!Cs.has(r))){t=dl(n,t),t=CP(e,t,1),e=Is(e,t,1),t=In(),e!==null&&(oh(e,1,t),Bn(e,t));break}}e=e.return}}function HL(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=In(),t.pingedLanes|=t.suspendedLanes&n,Bt===t&&(en&n)===n&&(Ot===4||Ot===3&&(en&130023424)===en&&500>bt()-k0?Oo(t,0):E0|=n),Bn(t,e)}function GP(t,e){e===0&&(t.mode&1?(e=ld,ld<<=1,!(ld&130023424)&&(ld=4194304)):e=1);var n=In();t=Vi(t,e),t!==null&&(oh(t,e,n),Bn(t,n))}function qL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),GP(t,n)}function KL(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),GP(t,n)}var YP;YP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Fn.current)Vn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vn=!1,OL(t,e,n);Vn=!!(t.flags&131072)}else Vn=!1,st&&e.flags&1048576&&ZC(e,Uf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rf(t,e),t=e.pendingProps;var i=ll(e,xn.current);Ja(e,n),i=_0(null,e,r,t,i,n);var s=x0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Un(r)?(s=!0,Vf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,p0(e),i.updater=qp,e.stateNode=i,i._reactInternals=e,lv(e,r,t,n),e=hv(null,e,r,!0,s,n)):(e.tag=0,st&&s&&a0(e),En(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=YL(r),t=xr(r,t),i){case 0:e=uv(null,e,r,t,n);break e;case 1:e=FT(null,e,r,t,n);break e;case 11:e=LT(null,e,r,t,n);break e;case 14:e=VT(null,e,r,xr(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xr(r,i),uv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xr(r,i),FT(t,e,r,i,n);case 3:e:{if(NP(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,sP(t,e),$f(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=dl(Error(W(423)),e),e=UT(t,e,r,n,i);break e}else if(r!==i){i=dl(Error(W(424)),e),e=UT(t,e,r,n,i);break e}else for(Gn=ks(e.stateNode.containerInfo.firstChild),Jn=e,st=!0,br=null,n=rP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cl(),r===i){e=Fi(t,e,n);break e}En(t,e,r,n)}e=e.child}return e;case 5:return oP(e),t===null&&sv(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ev(r,i)?o=null:s!==null&&ev(r,s)&&(e.flags|=32),RP(t,e),En(t,e,o,n),e.child;case 6:return t===null&&sv(e),null;case 13:return DP(t,e,n);case 4:return m0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ul(e,null,r,n):En(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xr(r,i),LT(t,e,r,i,n);case 7:return En(t,e,e.pendingProps,n),e.child;case 8:return En(t,e,e.pendingProps.children,n),e.child;case 12:return En(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Qe(Bf,r._currentValue),r._currentValue=o,s!==null)if(Pr(s.value,o)){if(s.children===i.children&&!Fn.current){e=Fi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ai(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),ov(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ov(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}En(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ja(e,n),i=fr(i),r=r(i),e.flags|=1,En(t,e,r,n),e.child;case 14:return r=e.type,i=xr(r,e.pendingProps),i=xr(r.type,i),VT(t,e,r,i,n);case 15:return PP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xr(r,i),rf(t,e),e.tag=1,Un(r)?(t=!0,Vf(e)):t=!1,Ja(e,n),kP(e,r,i),lv(e,r,i,n),hv(null,e,r,!0,t,n);case 19:return OP(t,e,n);case 22:return AP(t,e,n)}throw Error(W(156,e.tag))};function QP(t,e){return TC(t,e)}function GL(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(t,e,n,r){return new GL(t,e,n,r)}function A0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YL(t){if(typeof t=="function")return A0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Y_)return 11;if(t===Q_)return 14}return 2}function As(t,e){var n=t.alternate;return n===null?(n=ur(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function af(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")A0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Pa:return Mo(n.children,i,s,e);case G_:o=8,i|=8;break;case Ny:return t=ur(12,n,e,i|2),t.elementType=Ny,t.lanes=s,t;case Dy:return t=ur(13,n,e,i),t.elementType=Dy,t.lanes=s,t;case Oy:return t=ur(19,n,e,i),t.elementType=Oy,t.lanes=s,t;case oC:return Yp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case iC:o=10;break e;case sC:o=9;break e;case Y_:o=11;break e;case Q_:o=14;break e;case ss:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=ur(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Mo(t,e,n,r){return t=ur(7,t,r,e),t.lanes=n,t}function Yp(t,e,n,r){return t=ur(22,t,r,e),t.elementType=oC,t.lanes=n,t.stateNode={isHidden:!1},t}function Ag(t,e,n){return t=ur(6,t,null,e),t.lanes=n,t}function Rg(t,e,n){return e=ur(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function QL(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hg(0),this.expirationTimes=hg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function R0(t,e,n,r,i,s,o,a,l){return t=new QL(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ur(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},p0(s),t}function XL(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ca,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function XP(t){if(!t)return Ls;t=t._reactInternals;e:{if(na(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Un(n))return XC(t,n,e)}return e}function JP(t,e,n,r,i,s,o,a,l){return t=R0(n,r,!0,t,i,s,o,a,l),t.context=XP(null),n=t.current,r=In(),i=Ps(n),s=Ai(r,i),s.callback=e??null,Is(n,s,i),t.current.lanes=i,oh(t,i,r),Bn(t,r),t}function Qp(t,e,n,r){var i=e.current,s=In(),o=Ps(i);return n=XP(n),e.context===null?e.context=n:e.pendingContext=n,e=Ai(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Is(i,e,o),t!==null&&(Ir(t,i,o,s),ef(t,i,o)),o}function Xf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function QT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function N0(t,e){QT(t,e),(t=t.alternate)&&QT(t,e)}function JL(){return null}var ZP=typeof reportError=="function"?reportError:function(t){console.error(t)};function D0(t){this._internalRoot=t}Xp.prototype.render=D0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Qp(t,e,null,null)};Xp.prototype.unmount=D0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ho(function(){Qp(null,t,null,null)}),e[Li]=null}};function Xp(t){this._internalRoot=t}Xp.prototype.unstable_scheduleHydration=function(t){if(t){var e=AC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<as.length&&e!==0&&e<as[n].priority;n++);as.splice(n,0,t),n===0&&NC(t)}};function O0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Jp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function XT(){}function ZL(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Xf(o);s.call(c)}}var o=JP(e,r,t,0,null,!1,!1,"",XT);return t._reactRootContainer=o,t[Li]=o.current,Su(t.nodeType===8?t.parentNode:t),Ho(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Xf(l);a.call(c)}}var l=R0(t,0,!1,null,null,!1,!1,"",XT);return t._reactRootContainer=l,t[Li]=l.current,Su(t.nodeType===8?t.parentNode:t),Ho(function(){Qp(e,l,n,r)}),l}function Zp(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Xf(o);a.call(l)}}Qp(e,o,t,i)}else o=ZL(n,e,t,i,r);return Xf(o)}CC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Cc(e.pendingLanes);n!==0&&(Z_(e,n|1),Bn(e,bt()),!(Pe&6)&&(fl=bt()+500,Ks()))}break;case 13:Ho(function(){var r=Vi(t,1);if(r!==null){var i=In();Ir(r,t,1,i)}}),N0(t,1)}};e0=function(t){if(t.tag===13){var e=Vi(t,134217728);if(e!==null){var n=In();Ir(e,t,134217728,n)}N0(t,134217728)}};PC=function(t){if(t.tag===13){var e=Ps(t),n=Vi(t,e);if(n!==null){var r=In();Ir(n,t,e,r)}N0(t,e)}};AC=function(){return je};RC=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};Wy=function(t,e,n){switch(e){case"input":if(Ly(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=$p(r);if(!i)throw Error(W(90));lC(r),Ly(r,i)}}}break;case"textarea":uC(t,n);break;case"select":e=n.value,e!=null&&Ga(t,!!n.multiple,e,!1)}};yC=I0;vC=Ho;var eV={usingClientEntryPoint:!1,Events:[lh,Da,$p,mC,gC,I0]},mc={findFiberByHostInstance:Eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tV={bundleType:mc.bundleType,version:mc.version,rendererPackageName:mc.rendererPackageName,rendererConfig:mc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wC(t),t===null?null:t.stateNode},findFiberByHostInstance:mc.findFiberByHostInstance||JL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_d.isDisabled&&_d.supportsFiber)try{Fp=_d.inject(tV),Gr=_d}catch{}}nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eV;nr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!O0(e))throw Error(W(200));return XL(t,e,null,n)};nr.createRoot=function(t,e){if(!O0(t))throw Error(W(299));var n=!1,r="",i=ZP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=R0(t,1,!1,null,null,n,!1,r,i),t[Li]=e.current,Su(t.nodeType===8?t.parentNode:t),new D0(e)};nr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=wC(e),t=t===null?null:t.stateNode,t};nr.flushSync=function(t){return Ho(t)};nr.hydrate=function(t,e,n){if(!Jp(e))throw Error(W(200));return Zp(null,t,e,!0,n)};nr.hydrateRoot=function(t,e,n){if(!O0(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ZP;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=JP(e,null,t,1,n??null,i,!1,s,o),t[Li]=e.current,Su(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Xp(e)};nr.render=function(t,e,n){if(!Jp(e))throw Error(W(200));return Zp(null,t,e,!1,n)};nr.unmountComponentAtNode=function(t){if(!Jp(t))throw Error(W(40));return t._reactRootContainer?(Ho(function(){Zp(null,null,t,!1,function(){t._reactRootContainer=null,t[Li]=null})}),!0):!1};nr.unstable_batchedUpdates=I0;nr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Jp(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Zp(t,e,n,!1,r)};nr.version="18.3.1-next-f1338f8080-20240426";function eA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eA)}catch(t){console.error(t)}}eA(),eC.exports=nr;var nV=eC.exports,JT=nV;Ay.createRoot=JT.createRoot,Ay.hydrateRoot=JT.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Du(){return Du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Du.apply(this,arguments)}var ys;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ys||(ys={}));const ZT="popstate";function rV(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=ra(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Tv("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:Jf(s))}function r(i,s){M0(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return sV(e,n,r,t)}function St(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function M0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iV(){return Math.random().toString(36).substr(2,8)}function eS(t,e){return{usr:t.state,key:t.key,idx:e}}function Tv(t,e,n,r){return n===void 0&&(n=null),Du({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ra(e):e,{state:n,key:e&&e.key||r||iV()})}function Jf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ra(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function sV(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ys.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Du({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=ys.Pop;let x=u(),w=x==null?null:x-c;c=x,l&&l({action:a,location:v.location,delta:w})}function p(x,w){a=ys.Push;let b=Tv(v.location,x,w);n&&n(b,x),c=u()+1;let E=eS(b,c),I=v.createHref(b);try{o.pushState(E,"",I)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(I)}s&&l&&l({action:a,location:v.location,delta:1})}function m(x,w){a=ys.Replace;let b=Tv(v.location,x,w);n&&n(b,x),c=u();let E=eS(b,c),I=v.createHref(b);o.replaceState(E,"",I),s&&l&&l({action:a,location:v.location,delta:0})}function y(x){let w=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof x=="string"?x:Jf(x);return b=b.replace(/ $/,"%20"),St(w,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,w)}let v={get action(){return a},get location(){return t(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ZT,d),l=x,()=>{i.removeEventListener(ZT,d),l=null}},createHref(x){return e(i,x)},createURL:y,encodeLocation(x){let w=y(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:m,go(x){return o.go(x)}};return v}var tS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(tS||(tS={}));function oV(t,e,n){return n===void 0&&(n="/"),aV(t,e,n)}function aV(t,e,n,r){let i=typeof e=="string"?ra(e):e,s=j0(i.pathname||"/",n);if(s==null)return null;let o=tA(t);lV(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=xV(s);a=yV(o[l],c)}return a}function tA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(St(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Rs([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(St(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),tA(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:mV(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of nA(s.path))i(s,o,l)}),e}function nA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=nA(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function lV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:gV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cV=/^:[\w-]+$/,uV=3,hV=2,dV=1,fV=10,pV=-2,nS=t=>t==="*";function mV(t,e){let n=t.split("/"),r=n.length;return n.some(nS)&&(r+=pV),e&&(r+=hV),n.filter(i=>!nS(i)).reduce((i,s)=>i+(cV.test(s)?uV:s===""?dV:fV),r)}function gV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function yV(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",d=vV({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Rs([s,d.pathname]),pathnameBase:SV(Rs([s,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(s=Rs([s,d.pathnameBase]))}return o}function vV(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_V(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const y=a[d];return m&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function _V(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),M0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function xV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return M0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function j0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function wV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ra(t):t;return{pathname:n?n.startsWith("/")?n:bV(n,e):e,search:EV(r),hash:kV(i)}}function bV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ng(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function TV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function L0(t,e){let n=TV(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function V0(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ra(t):(i=Du({},t),St(!i.pathname||!i.pathname.includes("?"),Ng("?","pathname","search",i)),St(!i.pathname||!i.pathname.includes("#"),Ng("#","pathname","hash",i)),St(!i.search||!i.search.includes("#"),Ng("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=wV(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Rs=t=>t.join("/").replace(/\/\/+/g,"/"),SV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),EV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,kV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function IV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const rA=["post","put","patch","delete"];new Set(rA);const CV=["get",...rA];new Set(CV);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ou.apply(this,arguments)}const F0=O.createContext(null),PV=O.createContext(null),Gs=O.createContext(null),em=O.createContext(null),ai=O.createContext({outlet:null,matches:[],isDataRoute:!1}),iA=O.createContext(null);function AV(t,e){let{relative:n}=e===void 0?{}:e;Ml()||St(!1);let{basename:r,navigator:i}=O.useContext(Gs),{hash:s,pathname:o,search:a}=aA(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Rs([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ml(){return O.useContext(em)!=null}function qi(){return Ml()||St(!1),O.useContext(em).location}function sA(t){O.useContext(Gs).static||O.useLayoutEffect(t)}function $t(){let{isDataRoute:t}=O.useContext(ai);return t?HV():RV()}function RV(){Ml()||St(!1);let t=O.useContext(F0),{basename:e,future:n,navigator:r}=O.useContext(Gs),{matches:i}=O.useContext(ai),{pathname:s}=qi(),o=JSON.stringify(L0(i,n.v7_relativeSplatPath)),a=O.useRef(!1);return sA(()=>{a.current=!0}),O.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=V0(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Rs([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}const NV=O.createContext(null);function DV(t){let e=O.useContext(ai).outlet;return e&&O.createElement(NV.Provider,{value:t},e)}function oA(){let{matches:t}=O.useContext(ai),e=t[t.length-1];return e?e.params:{}}function aA(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(Gs),{matches:i}=O.useContext(ai),{pathname:s}=qi(),o=JSON.stringify(L0(i,r.v7_relativeSplatPath));return O.useMemo(()=>V0(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function OV(t,e){return MV(t,e)}function MV(t,e,n,r){Ml()||St(!1);let{navigator:i}=O.useContext(Gs),{matches:s}=O.useContext(ai),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=qi(),u;if(e){var d;let x=typeof e=="string"?ra(e):e;l==="/"||(d=x.pathname)!=null&&d.startsWith(l)||St(!1),u=x}else u=c;let p=u.pathname||"/",m=p;if(l!=="/"){let x=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=oV(t,{pathname:m}),v=UV(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Rs([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Rs([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&v?O.createElement(em.Provider,{value:{location:Ou({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ys.Pop}},v):v}function jV(){let t=WV(),e=IV(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const LV=O.createElement(jV,null);class VV extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(ai.Provider,{value:this.props.routeContext},O.createElement(iA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FV(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(F0);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(ai.Provider,{value:e},r)}function UV(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||St(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:p,errors:m}=n,y=d.route.loader&&p[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,p)=>{let m,y=!1,v=null,x=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||LV,l&&(c<0&&p===0?(qV("route-fallback"),y=!0,x=null):c===p&&(y=!0,x=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),b=()=>{let E;return m?E=v:y?E=x:d.route.Component?E=O.createElement(d.route.Component,null):d.route.element?E=d.route.element:E=u,O.createElement(FV,{match:d,routeContext:{outlet:u,matches:w,isDataRoute:n!=null},children:E})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?O.createElement(VV,{location:n.location,revalidation:n.revalidation,component:v,error:m,children:b(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):b()},null)}var lA=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(lA||{}),cA=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(cA||{});function BV(t){let e=O.useContext(F0);return e||St(!1),e}function zV(t){let e=O.useContext(PV);return e||St(!1),e}function $V(t){let e=O.useContext(ai);return e||St(!1),e}function uA(t){let e=$V(),n=e.matches[e.matches.length-1];return n.route.id||St(!1),n.route.id}function WV(){var t;let e=O.useContext(iA),n=zV(),r=uA();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function HV(){let{router:t}=BV(lA.UseNavigateStable),e=uA(cA.UseNavigateStable),n=O.useRef(!1);return sA(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ou({fromRouteId:e},s)))},[t,e])}const rS={};function qV(t,e,n){rS[t]||(rS[t]=!0)}function KV(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function lf(t){let{to:e,replace:n,state:r,relative:i}=t;Ml()||St(!1);let{future:s,static:o}=O.useContext(Gs),{matches:a}=O.useContext(ai),{pathname:l}=qi(),c=$t(),u=V0(e,L0(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(u);return O.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:i}),[c,d,i,n,r]),null}function hA(t){return DV(t.context)}function _t(t){St(!1)}function GV(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ys.Pop,navigator:s,static:o=!1,future:a}=t;Ml()&&St(!1);let l=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:l,navigator:s,static:o,future:Ou({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ra(r));let{pathname:u="/",search:d="",hash:p="",state:m=null,key:y="default"}=r,v=O.useMemo(()=>{let x=j0(u,l);return x==null?null:{location:{pathname:x,search:d,hash:p,state:m,key:y},navigationType:i}},[l,u,d,p,m,y,i]);return v==null?null:O.createElement(Gs.Provider,{value:c},O.createElement(em.Provider,{children:n,value:v}))}function YV(t){let{children:e,location:n}=t;return OV(Sv(e),n)}new Promise(()=>{});function Sv(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let s=[...e,i];if(r.type===O.Fragment){n.push.apply(n,Sv(r.props.children,s));return}r.type!==_t&&St(!1),!r.props.index||!r.props.children||St(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Sv(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ev(){return Ev=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ev.apply(this,arguments)}function QV(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function XV(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function JV(t,e){return t.button===0&&(!e||e==="_self")&&!XV(t)}const ZV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],eF="6";try{window.__reactRouterVersion=eF}catch{}const tF="startTransition",iS=HM[tF];function nF(t){let{basename:e,children:n,future:r,window:i}=t,s=O.useRef();s.current==null&&(s.current=rV({window:i,v5Compat:!0}));let o=s.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=O.useCallback(d=>{c&&iS?iS(()=>l(d)):l(d)},[l,c]);return O.useLayoutEffect(()=>o.listen(u),[o,u]),O.useEffect(()=>KV(r),[r]),O.createElement(GV,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const rF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Co=O.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:d}=e,p=QV(e,ZV),{basename:m}=O.useContext(Gs),y,v=!1;if(typeof c=="string"&&iF.test(c)&&(y=c,rF))try{let E=new URL(window.location.href),I=c.startsWith("//")?new URL(E.protocol+c):new URL(c),C=j0(I.pathname,m);I.origin===E.origin&&C!=null?c=C+I.search+I.hash:v=!0}catch{}let x=AV(c,{relative:i}),w=sF(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:d});function b(E){r&&r(E),E.defaultPrevented||w(E)}return O.createElement("a",Ev({},p,{href:y||x,onClick:v||s?r:b,ref:n,target:l}))});var sS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sS||(sS={}));var oS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(oS||(oS={}));function sF(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=$t(),c=qi(),u=aA(t,{relative:o});return O.useCallback(d=>{if(JV(d,n)){d.preventDefault();let p=r!==void 0?r:Jf(c)===Jf(u);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}var aS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},oF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},fA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,d=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[u],n[d],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):oF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||d==null)throw new aF;const p=s<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class aF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lF=function(t){const e=dA(t);return fA.encodeByteArray(e,!0)},Zf=function(t){return lF(t).replace(/\./g,"")},pA=function(t){try{return fA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF=()=>cF().__FIREBASE_DEFAULTS__,hF=()=>{if(typeof process>"u"||typeof aS>"u")return;const t=aS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pA(t[1]);return e&&JSON.parse(e)},tm=()=>{try{return uF()||hF()||dF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mA=t=>{var e,n;return(n=(e=tm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gA=t=>{const e=mA(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yA=()=>{var t;return(t=tm())===null||t===void 0?void 0:t.config},vA=t=>{var e;return(e=tm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Zf(JSON.stringify(n)),Zf(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function mF(){var t;const e=(t=tm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _F(){const t=wn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xF(){return!mF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wF(){try{return typeof indexedDB=="object"}catch{return!1}}function bF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF="FirebaseError";class li extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TF,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uh.prototype.create)}}class uh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?SF(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new li(i,a,r)}}function SF(t,e){return t.replace(EF,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const EF=/\{\$([^}]+)}/g;function kF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ep(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(lS(s)&&lS(o)){if(!ep(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function lS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ac(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Rc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function IF(t,e){const n=new CF(t,e);return n.subscribe.bind(n)}class CF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");PF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Dg),i.error===void 0&&(i.error=Dg),i.complete===void 0&&(i.complete=Dg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Dg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(t){return t&&t._delegate?t._delegate:t}class Vs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new fF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NF(e))try{this.getOrInitializeService({instanceIdentifier:_o})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=_o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_o){return this.instances.has(e)}getOptions(e=_o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_o){return this.component?this.component.multipleInstances?e:_o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RF(t){return t===_o?void 0:t}function NF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const OF={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},MF=Se.INFO,jF={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},LF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=jF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class U0{constructor(e){this.name=e,this._logLevel=MF,this._logHandler=LF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const VF=(t,e)=>e.some(n=>t instanceof n);let cS,uS;function FF(){return cS||(cS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UF(){return uS||(uS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const xA=new WeakMap,kv=new WeakMap,wA=new WeakMap,Og=new WeakMap,B0=new WeakMap;function BF(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ns(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&xA.set(n,t)}).catch(()=>{}),B0.set(e,t),e}function zF(t){if(kv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});kv.set(t,e)}let Iv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ns(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $F(t){Iv=t(Iv)}function WF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Mg(this),e,...n);return wA.set(r,e.sort?e.sort():[e]),Ns(r)}:UF().includes(t)?function(...e){return t.apply(Mg(this),e),Ns(xA.get(this))}:function(...e){return Ns(t.apply(Mg(this),e))}}function HF(t){return typeof t=="function"?WF(t):(t instanceof IDBTransaction&&zF(t),VF(t,FF())?new Proxy(t,Iv):t)}function Ns(t){if(t instanceof IDBRequest)return BF(t);if(Og.has(t))return Og.get(t);const e=HF(t);return e!==t&&(Og.set(t,e),B0.set(e,t)),e}const Mg=t=>B0.get(t);function qF(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ns(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ns(o.result),l.oldVersion,l.newVersion,Ns(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const KF=["get","getKey","getAll","getAllKeys","count"],GF=["put","add","delete","clear"],jg=new Map;function hS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jg.get(e))return jg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=GF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||KF.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return jg.set(e,s),s}$F(t=>({...t,get:(e,n,r)=>hS(e,n)||t.get(e,n,r),has:(e,n)=>!!hS(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QF(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function QF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Cv="@firebase/app",dS="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new U0("@firebase/app"),XF="@firebase/app-compat",JF="@firebase/analytics-compat",ZF="@firebase/analytics",e4="@firebase/app-check-compat",t4="@firebase/app-check",n4="@firebase/auth",r4="@firebase/auth-compat",i4="@firebase/database",s4="@firebase/data-connect",o4="@firebase/database-compat",a4="@firebase/functions",l4="@firebase/functions-compat",c4="@firebase/installations",u4="@firebase/installations-compat",h4="@firebase/messaging",d4="@firebase/messaging-compat",f4="@firebase/performance",p4="@firebase/performance-compat",m4="@firebase/remote-config",g4="@firebase/remote-config-compat",y4="@firebase/storage",v4="@firebase/storage-compat",_4="@firebase/firestore",x4="@firebase/vertexai-preview",w4="@firebase/firestore-compat",b4="firebase",T4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv="[DEFAULT]",S4={[Cv]:"fire-core",[XF]:"fire-core-compat",[ZF]:"fire-analytics",[JF]:"fire-analytics-compat",[t4]:"fire-app-check",[e4]:"fire-app-check-compat",[n4]:"fire-auth",[r4]:"fire-auth-compat",[i4]:"fire-rtdb",[s4]:"fire-data-connect",[o4]:"fire-rtdb-compat",[a4]:"fire-fn",[l4]:"fire-fn-compat",[c4]:"fire-iid",[u4]:"fire-iid-compat",[h4]:"fire-fcm",[d4]:"fire-fcm-compat",[f4]:"fire-perf",[p4]:"fire-perf-compat",[m4]:"fire-rc",[g4]:"fire-rc-compat",[y4]:"fire-gcs",[v4]:"fire-gcs-compat",[_4]:"fire-fst",[w4]:"fire-fst-compat",[x4]:"fire-vertex","fire-js":"fire-js",[b4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=new Map,E4=new Map,Av=new Map;function fS(t,e){try{t.container.addComponent(e)}catch(n){Ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qo(t){const e=t.name;if(Av.has(e))return Ui.debug(`There were multiple attempts to register component ${e}.`),!1;Av.set(e,t);for(const n of tp.values())fS(n,t);for(const n of E4.values())fS(n,t);return!0}function nm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function qr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ds=new uh("app","Firebase",k4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=T4;function bA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Pv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ds.create("bad-app-name",{appName:String(i)});if(n||(n=yA()),!n)throw Ds.create("no-options");const s=tp.get(i);if(s){if(ep(n,s.options)&&ep(r,s.config))return s;throw Ds.create("duplicate-app",{appName:i})}const o=new DF(i);for(const l of Av.values())o.addComponent(l);const a=new I4(n,r,o);return tp.set(i,a),a}function z0(t=Pv){const e=tp.get(t);if(!e&&t===Pv&&yA())return bA();if(!e)throw Ds.create("no-app",{appName:t});return e}function Qr(t,e,n){var r;let i=(r=S4[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ui.warn(a.join(" "));return}qo(new Vs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="firebase-heartbeat-database",P4=1,Mu="firebase-heartbeat-store";let Lg=null;function TA(){return Lg||(Lg=qF(C4,P4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ds.create("idb-open",{originalErrorMessage:t.message})})),Lg}async function A4(t){try{const n=(await TA()).transaction(Mu),r=await n.objectStore(Mu).get(SA(t));return await n.done,r}catch(e){if(e instanceof li)Ui.warn(e.message);else{const n=Ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ui.warn(n.message)}}}async function pS(t,e){try{const r=(await TA()).transaction(Mu,"readwrite");await r.objectStore(Mu).put(e,SA(t)),await r.done}catch(n){if(n instanceof li)Ui.warn(n.message);else{const r=Ds.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ui.warn(r.message)}}}function SA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=1024,N4=30*24*60*60*1e3;class D4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=mS();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=N4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ui.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=mS(),{heartbeatsToSend:r,unsentEntries:i}=O4(this._heartbeatsCache.heartbeats),s=Zf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ui.warn(n),""}}}function mS(){return new Date().toISOString().substring(0,10)}function O4(t,e=R4){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),gS(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class M4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wF()?bF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await A4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return pS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return pS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function gS(t){return Zf(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(t){qo(new Vs("platform-logger",e=>new YF(e),"PRIVATE")),qo(new Vs("heartbeat",e=>new D4(e),"PRIVATE")),Qr(Cv,dS,t),Qr(Cv,dS,"esm2017"),Qr("fire-js","")}j4("");function $0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function EA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L4=EA,kA=new uh("auth","Firebase",EA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np=new U0("@firebase/auth");function V4(t,...e){np.logLevel<=Se.WARN&&np.warn(`Auth (${ia}): ${t}`,...e)}function cf(t,...e){np.logLevel<=Se.ERROR&&np.error(`Auth (${ia}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(t,...e){throw W0(t,...e)}function Xr(t,...e){return W0(t,...e)}function IA(t,e,n){const r=Object.assign(Object.assign({},L4()),{[e]:n});return new uh("auth","Firebase",r).create(e,{appName:t.name})}function Ri(t){return IA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function W0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return kA.create(t,...e)}function ce(t,e,...n){if(!t)throw W0(e,...n)}function Ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cf(e),new Error(e)}function Bi(t,e){t||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function F4(){return yS()==="http:"||yS()==="https:"}function yS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(F4()||yF()||"connection"in navigator)?navigator.onLine:!0}function B4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bi(n>e,"Short delay should be less than long delay!"),this.isMobile=pF()||vF()}get(){return U4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(t,e){Bi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=new dh(3e4,6e4);function Ki(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ci(t,e,n,r,i={}){return PA(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=hh(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return gF()||(c.referrerPolicy="no-referrer"),CA.fetch()(AA(t,t.config.apiHost,n,a),c)})}async function PA(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},z4),e);try{const i=new H4(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw xd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw xd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw xd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw xd(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw IA(t,u,c);Ar(t,u)}}catch(i){if(i instanceof li)throw i;Ar(t,"network-request-failed",{message:String(i)})}}async function fh(t,e,n,r,i={}){const s=await ci(t,e,n,r,i);return"mfaPendingCredential"in s&&Ar(t,"multi-factor-auth-required",{_serverResponse:s}),s}function AA(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?H0(t.config,i):`${t.config.apiScheme}://${i}`}function W4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class H4{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Xr(this.auth,"network-request-failed")),$4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Xr(t,e,r);return i.customData._tokenResponse=n,i}function vS(t){return t!==void 0&&t.enterprise!==void 0}class q4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return W4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function K4(t,e){return ci(t,"GET","/v2/recaptchaConfig",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G4(t,e){return ci(t,"POST","/v1/accounts:delete",e)}async function RA(t,e){return ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Y4(t,e=!1){const n=Be(t),r=await n.getIdToken(e),i=q0(r);ce(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Zc(Vg(i.auth_time)),issuedAtTime:Zc(Vg(i.iat)),expirationTime:Zc(Vg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Vg(t){return Number(t)*1e3}function q0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cf("JWT malformed, contained fewer than 3 sections"),null;try{const i=pA(n);return i?JSON.parse(i):(cf("Failed to decode base64 JWT payload"),null)}catch(i){return cf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function _S(t){const e=q0(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof li&&Q4(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Q4({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zc(this.lastLoginAt),this.creationTime=Zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await pl(t,RA(n,{idToken:r}));ce(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?NA(s.providerUserInfo):[],a=Z4(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Nv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function J4(t){const e=Be(t);await rp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Z4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function NA(t){return t.map(e=>{var{providerId:n}=e,r=$0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eU(t,e){const n=await PA(t,{},async()=>{const r=hh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=AA(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",CA.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tU(t,e){return ci(t,"POST","/v2/accounts:revokeToken",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_S(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=_S(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await eU(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new el;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ce(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ce(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new el,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ci{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=$0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new X4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Nv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await pl(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Y4(this,e)}reload(){return J4(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ci(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await rp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(qr(this.auth.app))return Promise.reject(Ri(this.auth));const e=await this.getIdToken();return await pl(this,G4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,b=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:I,isAnonymous:C,providerData:M,stsTokenManager:S}=n;ce(E&&S,e,"internal-error");const _=el.fromJSON(this.name,S);ce(typeof E=="string",e,"internal-error"),ns(d,e.name),ns(p,e.name),ce(typeof I=="boolean",e,"internal-error"),ce(typeof C=="boolean",e,"internal-error"),ns(m,e.name),ns(y,e.name),ns(v,e.name),ns(x,e.name),ns(w,e.name),ns(b,e.name);const k=new Ci({uid:E,auth:e,email:p,emailVerified:I,displayName:d,isAnonymous:C,photoURL:y,phoneNumber:m,tenantId:v,stsTokenManager:_,createdAt:w,lastLoginAt:b});return M&&Array.isArray(M)&&(k.providerData=M.map(P=>Object.assign({},P))),x&&(k._redirectEventId=x),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new el;i.updateFromServerResponse(n);const s=new Ci({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await rp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ce(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?NA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new el;a.updateFromIdToken(r);const l=new Ci({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Nv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=new Map;function Pi(t){Bi(t instanceof Function,"Expected a class definition");let e=xS.get(t);return e?(Bi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}DA.type="NONE";const wS=DA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(t,e,n){return`firebase:${t}:${e}:${n}`}class tl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=uf(this.userKey,i.apiKey,s),this.fullPersistenceKey=uf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ci._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new tl(Pi(wS),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Pi(wS);const o=uf(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=Ci._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new tl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new tl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FA(e))return"Blackberry";if(UA(e))return"Webos";if(MA(e))return"Safari";if((e.includes("chrome/")||jA(e))&&!e.includes("edge/"))return"Chrome";if(VA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function OA(t=wn()){return/firefox\//i.test(t)}function MA(t=wn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jA(t=wn()){return/crios\//i.test(t)}function LA(t=wn()){return/iemobile/i.test(t)}function VA(t=wn()){return/android/i.test(t)}function FA(t=wn()){return/blackberry/i.test(t)}function UA(t=wn()){return/webos/i.test(t)}function K0(t=wn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nU(t=wn()){var e;return K0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rU(){return _F()&&document.documentMode===10}function BA(t=wn()){return K0(t)||VA(t)||UA(t)||FA(t)||/windows phone/i.test(t)||LA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(t,e=[]){let n;switch(t){case"Browser":n=bS(wn());break;case"Worker":n=`${bS(wn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ia}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sU(t,e={}){return ci(t,"GET","/v2/passwordPolicy",Ki(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oU=6;class aU{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:oU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new TS(this),this.idTokenSubscription=new TS(this),this.beforeStateQueue=new iU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await tl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await RA(this,{idToken:e}),r=await Ci._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(qr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await rp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=B4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(qr(this.app))return Promise.reject(Ri(this));const n=e?Be(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return qr(this.app)?Promise.reject(Ri(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return qr(this.app)?Promise.reject(Ri(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sU(this),n=new aU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new uh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await tU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pi(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await tl.create(this,[Pi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&V4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ys(t){return Be(t)}class TS{constructor(e){this.auth=e,this.observer=null,this.addObserver=IF(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cU(t){rm=t}function $A(t){return rm.loadJS(t)}function uU(){return rm.recaptchaEnterpriseScript}function hU(){return rm.gapiScript}function dU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const fU="recaptcha-enterprise",pU="NO_RECAPTCHA";class mU{constructor(e){this.type=fU,this.auth=Ys(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{K4(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new q4(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;vS(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(pU)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&vS(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=uU();l.length!==0&&(l+=a),$A(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function SS(t,e,n,r=!1){const i=new mU(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ip(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await SS(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await SS(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(t,e){const n=nm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ep(s,e??{}))return i;Ar(i,"already-initialized")}return n.initialize({options:e})}function yU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vU(t,e,n){const r=Ys(t);ce(r._canInitEmulator,r,"emulator-config-failed"),ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=WA(e),{host:o,port:a}=_U(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),xU()}function WA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _U(t){const e=WA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:ES(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:ES(o)}}}function ES(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,n){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}async function wU(t,e){return ci(t,"POST","/v1/accounts:update",e)}async function bU(t,e){return ci(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TU(t,e){return fh(t,"POST","/v1/accounts:signInWithPassword",Ki(t,e))}async function SU(t,e){return ci(t,"POST","/v1/accounts:sendOobCode",Ki(t,e))}async function EU(t,e){return SU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kU(t,e){return fh(t,"POST","/v1/accounts:signInWithEmailLink",Ki(t,e))}async function IU(t,e){return fh(t,"POST","/v1/accounts:signInWithEmailLink",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends G0{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ju(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ju(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ip(e,n,"signInWithPassword",TU);case"emailLink":return kU(e,{email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ip(e,r,"signUpPassword",bU);case"emailLink":return IU(e,{idToken:n,email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(t,e){return fh(t,"POST","/v1/accounts:signInWithIdp",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CU="http://localhost";class Ko extends G0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ar("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=$0(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ko(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return nl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,nl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,nl(e,n)}buildRequest(){const e={requestUri:CU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=hh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AU(t){const e=Ac(Rc(t)).link,n=e?Ac(Rc(e)).deep_link_id:null,r=Ac(Rc(t)).deep_link_id;return(r?Ac(Rc(r)).link:null)||r||n||e||t}class Y0{constructor(e){var n,r,i,s,o,a;const l=Ac(Rc(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=PU((i=l.mode)!==null&&i!==void 0?i:null);ce(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=AU(e);try{return new Y0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.providerId=jl.PROVIDER_ID}static credential(e,n){return ju._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Y0.parseLink(n);return ce(r,"argument-error"),ju._fromEmailAndCode(e,r.code,r.tenantId)}}jl.PROVIDER_ID="password";jl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph extends HA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends ph{constructor(){super("facebook.com")}static credential(e){return Ko._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends ph{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ko._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return us.credential(n,r)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends ph{constructor(){super("github.com")}static credential(e){return Ko._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.GITHUB_SIGN_IN_METHOD="github.com";hs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends ph{constructor(){super("twitter.com")}static credential(e,n){return Ko._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ds.credential(n,r)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RU(t,e){return fh(t,"POST","/v1/accounts:signUp",Ki(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ci._fromIdTokenResponse(e,r,i),o=kS(r);return new Go({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=kS(r);return new Go({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function kS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp extends li{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,sp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new sp(e,n,r,i)}}function qA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?sp._fromErrorAndOperation(t,s,e,r):s})}async function NU(t,e,n=!1){const r=await pl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Go._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DU(t,e,n=!1){const{auth:r}=t;if(qr(r.app))return Promise.reject(Ri(r));const i="reauthenticate";try{const s=await pl(t,qA(r,i,e,t),n);ce(s.idToken,r,"internal-error");const o=q0(s.idToken);ce(o,r,"internal-error");const{sub:a}=o;return ce(t.uid===a,r,"user-mismatch"),Go._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Ar(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(t,e,n=!1){if(qr(t.app))return Promise.reject(Ri(t));const r="signIn",i=await qA(t,r,e),s=await Go._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function OU(t,e){return KA(Ys(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(t){const e=Ys(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function MU(t,e,n){const r=Ys(t);await ip(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",EU)}async function jU(t,e,n){if(qr(t.app))return Promise.reject(Ri(t));const r=Ys(t),o=await ip(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",RU).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&GA(t),l}),a=await Go._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function YA(t,e,n){return qr(t.app)?Promise.reject(Ri(t)):OU(Be(t),jl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&GA(t),r})}function LU(t,e){return VU(Be(t),null,e)}async function VU(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await pl(t,wU(r,s));await t._updateTokensIfNecessary(o,!0)}function FU(t,e,n,r){return Be(t).onIdTokenChanged(e,n,r)}function UU(t,e,n){return Be(t).beforeAuthStateChanged(e,n)}function BU(t,e,n,r){return Be(t).onAuthStateChanged(e,n,r)}function ml(t){return Be(t).signOut()}const op="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(op,"1"),this.storage.removeItem(op),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU=1e3,$U=10;class XA extends QA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);rU()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,$U):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},zU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}XA.type="LOCAL";const WU=XA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA extends QA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}JA.type="SESSION";const ZA=JA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new im(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await HU(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}im.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Q0("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const p=d;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(){return window}function KU(t){Jr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(){return typeof Jr().WorkerGlobalScope<"u"&&typeof Jr().importScripts=="function"}async function GU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function QU(){return eR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="firebaseLocalStorageDb",XU=1,ap="firebaseLocalStorage",nR="fbase_key";class mh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sm(t,e){return t.transaction([ap],e?"readwrite":"readonly").objectStore(ap)}function JU(){const t=indexedDB.deleteDatabase(tR);return new mh(t).toPromise()}function Dv(){const t=indexedDB.open(tR,XU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ap,{keyPath:nR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ap)?e(r):(r.close(),await JU(),e(await Dv()))})})}async function IS(t,e,n){const r=sm(t,!0).put({[nR]:e,value:n});return new mh(r).toPromise()}async function ZU(t,e){const n=sm(t,!1).get(e),r=await new mh(n).toPromise();return r===void 0?null:r.value}function CS(t,e){const n=sm(t,!0).delete(e);return new mh(n).toPromise()}const eB=800,tB=3;class rR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Dv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>tB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=im._getInstance(QU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await GU(),!this.activeServiceWorker)return;this.sender=new qU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Dv();return await IS(e,op,"1"),await CS(e,op),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>IS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ZU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>CS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=sm(i,!1).getAll();return new mh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),eB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rR.type="LOCAL";const nB=rR;new dh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rB(t,e){return e?Pi(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0 extends G0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return nl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return nl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function iB(t){return KA(t.auth,new X0(t),t.bypassAuthState)}function sB(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),DU(n,new X0(t),t.bypassAuthState)}async function oB(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),NU(n,new X0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iB;case"linkViaPopup":case"linkViaRedirect":return oB;case"reauthViaPopup":case"reauthViaRedirect":return sB;default:Ar(this.auth,"internal-error")}}resolve(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB=new dh(2e3,1e4);class Ua extends iR{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ua.currentPopupAction&&Ua.currentPopupAction.cancel(),Ua.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){Bi(this.filter.length===1,"Popup operations only handle one event");const e=Q0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ua.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aB.get())};e()}}Ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB="pendingRedirect",hf=new Map;class cB extends iR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=hf.get(this.auth._key());if(!e){try{const r=await uB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}hf.set(this.auth._key(),e)}return this.bypassAuthState||hf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function uB(t,e){const n=fB(e),r=dB(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function hB(t,e){hf.set(t._key(),e)}function dB(t){return Pi(t._redirectPersistence)}function fB(t){return uf(lB,t.config.apiKey,t.name)}async function pB(t,e,n=!1){if(qr(t.app))return Promise.reject(Ri(t));const r=Ys(t),i=rB(r,e),o=await new cB(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=10*60*1e3;class gB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!yB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!sR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Xr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=mB&&this.cachedEventUids.clear(),this.cachedEventUids.has(PS(e))}saveEventToCache(e){this.cachedEventUids.add(PS(e)),this.lastProcessedEventTime=Date.now()}}function PS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function sR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function yB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vB(t,e={}){return ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xB=/^https?/;async function wB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await vB(t);for(const n of e)try{if(bB(n))return}catch{}Ar(t,"unauthorized-domain")}function bB(t){const e=Rv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xB.test(n))return!1;if(_B.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TB=new dh(3e4,6e4);function AS(){const t=Jr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function SB(t){return new Promise((e,n)=>{var r,i,s;function o(){AS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{AS(),n(Xr(t,"network-request-failed"))},timeout:TB.get()})}if(!((i=(r=Jr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Jr().gapi)===null||s===void 0)&&s.load)o();else{const a=dU("iframefcb");return Jr()[a]=()=>{gapi.load?o():n(Xr(t,"network-request-failed"))},$A(`${hU()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw df=null,e})}let df=null;function EB(t){return df=df||SB(t),df}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB=new dh(5e3,15e3),IB="__/auth/iframe",CB="emulator/auth/iframe",PB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function RB(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?H0(e,CB):`https://${t.config.authDomain}/${IB}`,r={apiKey:e.apiKey,appName:t.name,v:ia},i=AB.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${hh(r).slice(1)}`}async function NB(t){const e=await EB(t),n=Jr().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:RB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PB,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Xr(t,"network-request-failed"),a=Jr().setTimeout(()=>{s(o)},kB.get());function l(){Jr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OB=500,MB=600,jB="_blank",LB="http://localhost";class RS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VB(t,e,n,r=OB,i=MB){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},DB),{width:r.toString(),height:i.toString(),top:s,left:o}),c=wn().toLowerCase();n&&(a=jA(c)?jB:n),OA(c)&&(e=e||LB,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(nU(c)&&a!=="_self")return FB(e||"",a),new RS(null);const d=window.open(e||"",a,u);ce(d,t,"popup-blocked");try{d.focus()}catch{}return new RS(d)}function FB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UB="__/auth/handler",BB="emulator/auth/handler",zB=encodeURIComponent("fac");async function NS(t,e,n,r,i,s){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ia,eventId:i};if(e instanceof HA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",kF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof ph){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${zB}=${encodeURIComponent(l)}`:"";return`${$B(t)}?${hh(a).slice(1)}${c}`}function $B({config:t}){return t.emulator?H0(t,BB):`https://${t.authDomain}/${UB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg="webStorageSupport";class WB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ZA,this._completeRedirectFn=pB,this._overrideRedirectResult=hB}async _openPopup(e,n,r,i){var s;Bi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await NS(e,n,r,Rv(),i);return VB(e,o,Q0())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await NS(e,n,r,Rv(),i);return KU(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Bi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await NB(e),r=new gB(e);return n.register("authEvent",i=>(ce(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fg,{type:Fg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Fg];o!==void 0&&n(!!o),Ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BA()||MA()||K0()}}const HB=WB;var DS="@firebase/auth",OS="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GB(t){qo(new Vs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zA(t)},c=new lU(r,i,s,l);return yU(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qo(new Vs("auth-internal",e=>{const n=Ys(e.getProvider("auth").getImmediate());return(r=>new qB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qr(DS,OS,KB(t)),Qr(DS,OS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB=5*60,QB=vA("authIdTokenMaxAge")||YB;let MS=null;const XB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>QB)return;const i=n==null?void 0:n.token;MS!==i&&(MS=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Gi(t=z0()){const e=nm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gU(t,{popupRedirectResolver:HB,persistence:[nB,WU,ZA]}),r=vA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=XB(s.toString());UU(n,o,()=>o(n.currentUser)),FU(n,a=>o(a))}}const i=mA("auth");return i&&vU(n,`http://${i}`),n}function JB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Xr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",JB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GB("Browser");var jS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jo,oR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,_){function k(){}k.prototype=_.prototype,S.D=_.prototype,S.prototype=new k,S.prototype.constructor=S,S.C=function(P,A,D){for(var N=Array(arguments.length-2),q=2;q<arguments.length;q++)N[q-2]=arguments[q];return _.prototype[A].apply(P,N)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,_,k){k||(k=0);var P=Array(16);if(typeof _=="string")for(var A=0;16>A;++A)P[A]=_.charCodeAt(k++)|_.charCodeAt(k++)<<8|_.charCodeAt(k++)<<16|_.charCodeAt(k++)<<24;else for(A=0;16>A;++A)P[A]=_[k++]|_[k++]<<8|_[k++]<<16|_[k++]<<24;_=S.g[0],k=S.g[1],A=S.g[2];var D=S.g[3],N=_+(D^k&(A^D))+P[0]+3614090360&4294967295;_=k+(N<<7&4294967295|N>>>25),N=D+(A^_&(k^A))+P[1]+3905402710&4294967295,D=_+(N<<12&4294967295|N>>>20),N=A+(k^D&(_^k))+P[2]+606105819&4294967295,A=D+(N<<17&4294967295|N>>>15),N=k+(_^A&(D^_))+P[3]+3250441966&4294967295,k=A+(N<<22&4294967295|N>>>10),N=_+(D^k&(A^D))+P[4]+4118548399&4294967295,_=k+(N<<7&4294967295|N>>>25),N=D+(A^_&(k^A))+P[5]+1200080426&4294967295,D=_+(N<<12&4294967295|N>>>20),N=A+(k^D&(_^k))+P[6]+2821735955&4294967295,A=D+(N<<17&4294967295|N>>>15),N=k+(_^A&(D^_))+P[7]+4249261313&4294967295,k=A+(N<<22&4294967295|N>>>10),N=_+(D^k&(A^D))+P[8]+1770035416&4294967295,_=k+(N<<7&4294967295|N>>>25),N=D+(A^_&(k^A))+P[9]+2336552879&4294967295,D=_+(N<<12&4294967295|N>>>20),N=A+(k^D&(_^k))+P[10]+4294925233&4294967295,A=D+(N<<17&4294967295|N>>>15),N=k+(_^A&(D^_))+P[11]+2304563134&4294967295,k=A+(N<<22&4294967295|N>>>10),N=_+(D^k&(A^D))+P[12]+1804603682&4294967295,_=k+(N<<7&4294967295|N>>>25),N=D+(A^_&(k^A))+P[13]+4254626195&4294967295,D=_+(N<<12&4294967295|N>>>20),N=A+(k^D&(_^k))+P[14]+2792965006&4294967295,A=D+(N<<17&4294967295|N>>>15),N=k+(_^A&(D^_))+P[15]+1236535329&4294967295,k=A+(N<<22&4294967295|N>>>10),N=_+(A^D&(k^A))+P[1]+4129170786&4294967295,_=k+(N<<5&4294967295|N>>>27),N=D+(k^A&(_^k))+P[6]+3225465664&4294967295,D=_+(N<<9&4294967295|N>>>23),N=A+(_^k&(D^_))+P[11]+643717713&4294967295,A=D+(N<<14&4294967295|N>>>18),N=k+(D^_&(A^D))+P[0]+3921069994&4294967295,k=A+(N<<20&4294967295|N>>>12),N=_+(A^D&(k^A))+P[5]+3593408605&4294967295,_=k+(N<<5&4294967295|N>>>27),N=D+(k^A&(_^k))+P[10]+38016083&4294967295,D=_+(N<<9&4294967295|N>>>23),N=A+(_^k&(D^_))+P[15]+3634488961&4294967295,A=D+(N<<14&4294967295|N>>>18),N=k+(D^_&(A^D))+P[4]+3889429448&4294967295,k=A+(N<<20&4294967295|N>>>12),N=_+(A^D&(k^A))+P[9]+568446438&4294967295,_=k+(N<<5&4294967295|N>>>27),N=D+(k^A&(_^k))+P[14]+3275163606&4294967295,D=_+(N<<9&4294967295|N>>>23),N=A+(_^k&(D^_))+P[3]+4107603335&4294967295,A=D+(N<<14&4294967295|N>>>18),N=k+(D^_&(A^D))+P[8]+1163531501&4294967295,k=A+(N<<20&4294967295|N>>>12),N=_+(A^D&(k^A))+P[13]+2850285829&4294967295,_=k+(N<<5&4294967295|N>>>27),N=D+(k^A&(_^k))+P[2]+4243563512&4294967295,D=_+(N<<9&4294967295|N>>>23),N=A+(_^k&(D^_))+P[7]+1735328473&4294967295,A=D+(N<<14&4294967295|N>>>18),N=k+(D^_&(A^D))+P[12]+2368359562&4294967295,k=A+(N<<20&4294967295|N>>>12),N=_+(k^A^D)+P[5]+4294588738&4294967295,_=k+(N<<4&4294967295|N>>>28),N=D+(_^k^A)+P[8]+2272392833&4294967295,D=_+(N<<11&4294967295|N>>>21),N=A+(D^_^k)+P[11]+1839030562&4294967295,A=D+(N<<16&4294967295|N>>>16),N=k+(A^D^_)+P[14]+4259657740&4294967295,k=A+(N<<23&4294967295|N>>>9),N=_+(k^A^D)+P[1]+2763975236&4294967295,_=k+(N<<4&4294967295|N>>>28),N=D+(_^k^A)+P[4]+1272893353&4294967295,D=_+(N<<11&4294967295|N>>>21),N=A+(D^_^k)+P[7]+4139469664&4294967295,A=D+(N<<16&4294967295|N>>>16),N=k+(A^D^_)+P[10]+3200236656&4294967295,k=A+(N<<23&4294967295|N>>>9),N=_+(k^A^D)+P[13]+681279174&4294967295,_=k+(N<<4&4294967295|N>>>28),N=D+(_^k^A)+P[0]+3936430074&4294967295,D=_+(N<<11&4294967295|N>>>21),N=A+(D^_^k)+P[3]+3572445317&4294967295,A=D+(N<<16&4294967295|N>>>16),N=k+(A^D^_)+P[6]+76029189&4294967295,k=A+(N<<23&4294967295|N>>>9),N=_+(k^A^D)+P[9]+3654602809&4294967295,_=k+(N<<4&4294967295|N>>>28),N=D+(_^k^A)+P[12]+3873151461&4294967295,D=_+(N<<11&4294967295|N>>>21),N=A+(D^_^k)+P[15]+530742520&4294967295,A=D+(N<<16&4294967295|N>>>16),N=k+(A^D^_)+P[2]+3299628645&4294967295,k=A+(N<<23&4294967295|N>>>9),N=_+(A^(k|~D))+P[0]+4096336452&4294967295,_=k+(N<<6&4294967295|N>>>26),N=D+(k^(_|~A))+P[7]+1126891415&4294967295,D=_+(N<<10&4294967295|N>>>22),N=A+(_^(D|~k))+P[14]+2878612391&4294967295,A=D+(N<<15&4294967295|N>>>17),N=k+(D^(A|~_))+P[5]+4237533241&4294967295,k=A+(N<<21&4294967295|N>>>11),N=_+(A^(k|~D))+P[12]+1700485571&4294967295,_=k+(N<<6&4294967295|N>>>26),N=D+(k^(_|~A))+P[3]+2399980690&4294967295,D=_+(N<<10&4294967295|N>>>22),N=A+(_^(D|~k))+P[10]+4293915773&4294967295,A=D+(N<<15&4294967295|N>>>17),N=k+(D^(A|~_))+P[1]+2240044497&4294967295,k=A+(N<<21&4294967295|N>>>11),N=_+(A^(k|~D))+P[8]+1873313359&4294967295,_=k+(N<<6&4294967295|N>>>26),N=D+(k^(_|~A))+P[15]+4264355552&4294967295,D=_+(N<<10&4294967295|N>>>22),N=A+(_^(D|~k))+P[6]+2734768916&4294967295,A=D+(N<<15&4294967295|N>>>17),N=k+(D^(A|~_))+P[13]+1309151649&4294967295,k=A+(N<<21&4294967295|N>>>11),N=_+(A^(k|~D))+P[4]+4149444226&4294967295,_=k+(N<<6&4294967295|N>>>26),N=D+(k^(_|~A))+P[11]+3174756917&4294967295,D=_+(N<<10&4294967295|N>>>22),N=A+(_^(D|~k))+P[2]+718787259&4294967295,A=D+(N<<15&4294967295|N>>>17),N=k+(D^(A|~_))+P[9]+3951481745&4294967295,S.g[0]=S.g[0]+_&4294967295,S.g[1]=S.g[1]+(A+(N<<21&4294967295|N>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.u=function(S,_){_===void 0&&(_=S.length);for(var k=_-this.blockSize,P=this.B,A=this.h,D=0;D<_;){if(A==0)for(;D<=k;)i(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<_;)if(P[A++]=S.charCodeAt(D++),A==this.blockSize){i(this,P),A=0;break}}else for(;D<_;)if(P[A++]=S[D++],A==this.blockSize){i(this,P),A=0;break}}this.h=A,this.o+=_},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var _=1;_<S.length-8;++_)S[_]=0;var k=8*this.o;for(_=S.length-8;_<S.length;++_)S[_]=k&255,k/=256;for(this.u(S),S=Array(16),_=k=0;4>_;++_)for(var P=0;32>P;P+=8)S[k++]=this.g[_]>>>P&255;return S};function s(S,_){var k=a;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=_(S)}function o(S,_){this.h=_;for(var k=[],P=!0,A=S.length-1;0<=A;A--){var D=S[A]|0;P&&D==_||(k[A]=D,P=!1)}this.g=k}var a={};function l(S){return-128<=S&&128>S?s(S,function(_){return new o([_|0],0>_?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return x(c(-S));for(var _=[],k=1,P=0;S>=k;P++)_[P]=S/k|0,k*=4294967296;return new o(_,0)}function u(S,_){if(S.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(S.charAt(0)=="-")return x(u(S.substring(1),_));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(_,8)),P=d,A=0;A<S.length;A+=8){var D=Math.min(8,S.length-A),N=parseInt(S.substring(A,A+D),_);8>D?(D=c(Math.pow(_,D)),P=P.j(D).add(c(N))):(P=P.j(k),P=P.add(c(N)))}return P}var d=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(v(this))return-x(this).m();for(var S=0,_=1,k=0;k<this.g.length;k++){var P=this.i(k);S+=(0<=P?P:4294967296+P)*_,_*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(v(this))return"-"+x(this).toString(S);for(var _=c(Math.pow(S,6)),k=this,P="";;){var A=I(k,_).g;k=w(k,A.j(_));var D=((0<k.g.length?k.g[0]:k.h)>>>0).toString(S);if(k=A,y(k))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var _=0;_<S.g.length;_++)if(S.g[_]!=0)return!1;return!0}function v(S){return S.h==-1}t.l=function(S){return S=w(this,S),v(S)?-1:y(S)?0:1};function x(S){for(var _=S.g.length,k=[],P=0;P<_;P++)k[P]=~S.g[P];return new o(k,~S.h).add(p)}t.abs=function(){return v(this)?x(this):this},t.add=function(S){for(var _=Math.max(this.g.length,S.g.length),k=[],P=0,A=0;A<=_;A++){var D=P+(this.i(A)&65535)+(S.i(A)&65535),N=(D>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);P=N>>>16,D&=65535,N&=65535,k[A]=N<<16|D}return new o(k,k[k.length-1]&-2147483648?-1:0)};function w(S,_){return S.add(x(_))}t.j=function(S){if(y(this)||y(S))return d;if(v(this))return v(S)?x(this).j(x(S)):x(x(this).j(S));if(v(S))return x(this.j(x(S)));if(0>this.l(m)&&0>S.l(m))return c(this.m()*S.m());for(var _=this.g.length+S.g.length,k=[],P=0;P<2*_;P++)k[P]=0;for(P=0;P<this.g.length;P++)for(var A=0;A<S.g.length;A++){var D=this.i(P)>>>16,N=this.i(P)&65535,q=S.i(A)>>>16,te=S.i(A)&65535;k[2*P+2*A]+=N*te,b(k,2*P+2*A),k[2*P+2*A+1]+=D*te,b(k,2*P+2*A+1),k[2*P+2*A+1]+=N*q,b(k,2*P+2*A+1),k[2*P+2*A+2]+=D*q,b(k,2*P+2*A+2)}for(P=0;P<_;P++)k[P]=k[2*P+1]<<16|k[2*P];for(P=_;P<2*_;P++)k[P]=0;return new o(k,0)};function b(S,_){for(;(S[_]&65535)!=S[_];)S[_+1]+=S[_]>>>16,S[_]&=65535,_++}function E(S,_){this.g=S,this.h=_}function I(S,_){if(y(_))throw Error("division by zero");if(y(S))return new E(d,d);if(v(S))return _=I(x(S),_),new E(x(_.g),x(_.h));if(v(_))return _=I(S,x(_)),new E(x(_.g),_.h);if(30<S.g.length){if(v(S)||v(_))throw Error("slowDivide_ only works with positive integers.");for(var k=p,P=_;0>=P.l(S);)k=C(k),P=C(P);var A=M(k,1),D=M(P,1);for(P=M(P,2),k=M(k,2);!y(P);){var N=D.add(P);0>=N.l(S)&&(A=A.add(k),D=N),P=M(P,1),k=M(k,1)}return _=w(S,A.j(_)),new E(A,_)}for(A=d;0<=S.l(_);){for(k=Math.max(1,Math.floor(S.m()/_.m())),P=Math.ceil(Math.log(k)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=c(k),N=D.j(_);v(N)||0<N.l(S);)k-=P,D=c(k),N=D.j(_);y(D)&&(D=p),A=A.add(D),S=w(S,N)}return new E(A,S)}t.A=function(S){return I(this,S).h},t.and=function(S){for(var _=Math.max(this.g.length,S.g.length),k=[],P=0;P<_;P++)k[P]=this.i(P)&S.i(P);return new o(k,this.h&S.h)},t.or=function(S){for(var _=Math.max(this.g.length,S.g.length),k=[],P=0;P<_;P++)k[P]=this.i(P)|S.i(P);return new o(k,this.h|S.h)},t.xor=function(S){for(var _=Math.max(this.g.length,S.g.length),k=[],P=0;P<_;P++)k[P]=this.i(P)^S.i(P);return new o(k,this.h^S.h)};function C(S){for(var _=S.g.length+1,k=[],P=0;P<_;P++)k[P]=S.i(P)<<1|S.i(P-1)>>>31;return new o(k,S.h)}function M(S,_){var k=_>>5;_%=32;for(var P=S.g.length-k,A=[],D=0;D<P;D++)A[D]=0<_?S.i(D+k)>>>_|S.i(D+k+1)<<32-_:S.i(D+k);return new o(A,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,oR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,jo=o}).apply(typeof jS<"u"?jS:typeof self<"u"?self:typeof window<"u"?window:{});var wd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var aR,Nc,lR,ff,Ov,cR,uR,hR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,g,T){return h==Array.prototype||h==Object.prototype||(h[g]=T.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof wd=="object"&&wd];for(var g=0;g<h.length;++g){var T=h[g];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function i(h,g){if(g)e:{var T=r;h=h.split(".");for(var R=0;R<h.length-1;R++){var L=h[R];if(!(L in T))break e;T=T[L]}h=h[h.length-1],R=T[h],g=g(R),g!=R&&g!=null&&e(T,h,{configurable:!0,writable:!0,value:g})}}function s(h,g){h instanceof String&&(h+="");var T=0,R=!1,L={next:function(){if(!R&&T<h.length){var F=T++;return{value:g(F,h[F]),done:!1}}return R=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(h){return h||function(){return s(this,function(g,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var g=typeof h;return g=g!="object"?g:h?Array.isArray(h)?"array":g:"null",g=="array"||g=="object"&&typeof h.length=="number"}function c(h){var g=typeof h;return g=="object"&&h!=null||g=="function"}function u(h,g,T){return h.call.apply(h.bind,arguments)}function d(h,g,T){if(!h)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,R),h.apply(g,L)}}return function(){return h.apply(g,arguments)}}function p(h,g,T){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,p.apply(null,arguments)}function m(h,g){var T=Array.prototype.slice.call(arguments,1);return function(){var R=T.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function y(h,g){function T(){}T.prototype=g.prototype,h.aa=g.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(R,L,F){for(var G=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)G[$e-2]=arguments[$e];return g.prototype[L].apply(R,G)}}function v(h){const g=h.length;if(0<g){const T=Array(g);for(let R=0;R<g;R++)T[R]=h[R];return T}return[]}function x(h,g){for(let T=1;T<arguments.length;T++){const R=arguments[T];if(l(R)){const L=h.length||0,F=R.length||0;h.length=L+F;for(let G=0;G<F;G++)h[L+G]=R[G]}else h.push(R)}}class w{constructor(g,T){this.i=g,this.j=T,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function b(h){return/^[\s\xa0]*$/.test(h)}function E(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function I(h){return I[" "](h),h}I[" "]=function(){};var C=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function M(h,g,T){for(const R in h)g.call(T,h[R],R,h)}function S(h,g){for(const T in h)g.call(void 0,h[T],T,h)}function _(h){const g={};for(const T in h)g[T]=h[T];return g}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,g){let T,R;for(let L=1;L<arguments.length;L++){R=arguments[L];for(T in R)h[T]=R[T];for(let F=0;F<k.length;F++)T=k[F],Object.prototype.hasOwnProperty.call(R,T)&&(h[T]=R[T])}}function A(h){var g=1;h=h.split(":");const T=[];for(;0<g&&h.length;)T.push(h.shift()),g--;return h.length&&T.push(h.join(":")),T}function D(h){a.setTimeout(()=>{throw h},0)}function N(){var h=X;let g=null;return h.g&&(g=h.g,h.g=h.g.next,h.g||(h.h=null),g.next=null),g}class q{constructor(){this.h=this.g=null}add(g,T){const R=te.get();R.set(g,T),this.h?this.h.next=R:this.g=R,this.h=R}}var te=new w(()=>new re,h=>h.reset());class re{constructor(){this.next=this.g=this.h=null}set(g,T){this.h=g,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,z=!1,X=new q,Y=()=>{const h=a.Promise.resolve(void 0);ne=()=>{h.then(ye)}};var ye=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(T){D(T)}var g=te;g.j(h),100>g.h&&(g.h++,h.next=g.g,g.g=h)}z=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(h,g){this.type=h,this.g=this.target=g,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,g=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};a.addEventListener("test",T,g),a.removeEventListener("test",T,g)}catch{}return h}();function Fe(h,g){if(xe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=g,g=h.relatedTarget){if(C){e:{try{I(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else T=="mouseover"?g=h.fromElement:T=="mouseout"&&(g=h.toElement);this.relatedTarget=g,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:qe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Fe.aa.h.call(this)}}y(Fe,xe);var qe={2:"touch",3:"pen",4:"mouse"};Fe.prototype.h=function(){Fe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var pt="closure_listenable_"+(1e6*Math.random()|0),ie=0;function Ie(h,g,T,R,L){this.listener=h,this.proxy=null,this.src=g,this.type=T,this.capture=!!R,this.ha=L,this.key=++ie,this.da=this.fa=!1}function ze(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ke(h){this.src=h,this.g={},this.h=0}Ke.prototype.add=function(h,g,T,R,L){var F=h.toString();h=this.g[F],h||(h=this.g[F]=[],this.h++);var G=hi(h,g,R,L);return-1<G?(g=h[G],T||(g.fa=!1)):(g=new Ie(g,this.src,F,!!R,L),g.fa=T,h.push(g)),g};function Ne(h,g){var T=g.type;if(T in h.g){var R=h.g[T],L=Array.prototype.indexOf.call(R,g,void 0),F;(F=0<=L)&&Array.prototype.splice.call(R,L,1),F&&(ze(g),h.g[T].length==0&&(delete h.g[T],h.h--))}}function hi(h,g,T,R){for(var L=0;L<h.length;++L){var F=h[L];if(!F.da&&F.listener==g&&F.capture==!!T&&F.ha==R)return L}return-1}var Ge="closure_lm_"+(1e6*Math.random()|0),ir={};function Wt(h,g,T,R,L){if(Array.isArray(g)){for(var F=0;F<g.length;F++)Wt(h,g[F],T,R,L);return null}return T=H(T),h&&h[pt]?h.K(g,T,c(R)?!!R.capture:!1,L):Xi(h,g,T,!1,R,L)}function Xi(h,g,T,R,L,F){if(!g)throw Error("Invalid event type");var G=c(L)?!!L.capture:!!L,$e=Q(h);if($e||(h[Ge]=$e=new Ke(h)),T=$e.add(g,T,R,G,F),T.proxy)return T;if(R=Kl(),T.proxy=R,R.src=h,R.listener=T,h.addEventListener)Ve||(L=G),L===void 0&&(L=!1),h.addEventListener(g.toString(),R,L);else if(h.attachEvent)h.attachEvent(V(g.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Kl(){function h(T){return g.call(h.src,h.listener,T)}const g=U;return h}function Ji(h,g,T,R,L){if(Array.isArray(g))for(var F=0;F<g.length;F++)Ji(h,g[F],T,R,L);else R=c(R)?!!R.capture:!!R,T=H(T),h&&h[pt]?(h=h.i,g=String(g).toString(),g in h.g&&(F=h.g[g],T=hi(F,T,R,L),-1<T&&(ze(F[T]),Array.prototype.splice.call(F,T,1),F.length==0&&(delete h.g[g],h.h--)))):h&&(h=Q(h))&&(g=h.g[g.toString()],h=-1,g&&(h=hi(g,T,R,L)),(T=-1<h?g[h]:null)&&j(T))}function j(h){if(typeof h!="number"&&h&&!h.da){var g=h.src;if(g&&g[pt])Ne(g.i,h);else{var T=h.type,R=h.proxy;g.removeEventListener?g.removeEventListener(T,R,h.capture):g.detachEvent?g.detachEvent(V(T),R):g.addListener&&g.removeListener&&g.removeListener(R),(T=Q(g))?(Ne(T,h),T.h==0&&(T.src=null,g[Ge]=null)):ze(h)}}}function V(h){return h in ir?ir[h]:ir[h]="on"+h}function U(h,g){if(h.da)h=!0;else{g=new Fe(g,this);var T=h.listener,R=h.ha||h.src;h.fa&&j(h),h=T.call(R,g)}return h}function Q(h){return h=h[Ge],h instanceof Ke?h:null}var K="__closure_events_fn_"+(1e9*Math.random()>>>0);function H(h){return typeof h=="function"?h:(h[K]||(h[K]=function(g){return h.handleEvent(g)}),h[K])}function J(){pe.call(this),this.i=new Ke(this),this.M=this,this.F=null}y(J,pe),J.prototype[pt]=!0,J.prototype.removeEventListener=function(h,g,T,R){Ji(this,h,g,T,R)};function he(h,g){var T,R=h.F;if(R)for(T=[];R;R=R.F)T.push(R);if(h=h.M,R=g.type||g,typeof g=="string")g=new xe(g,h);else if(g instanceof xe)g.target=g.target||h;else{var L=g;g=new xe(R,h),P(g,L)}if(L=!0,T)for(var F=T.length-1;0<=F;F--){var G=g.g=T[F];L=Ce(G,R,!0,g)&&L}if(G=g.g=h,L=Ce(G,R,!0,g)&&L,L=Ce(G,R,!1,g)&&L,T)for(F=0;F<T.length;F++)G=g.g=T[F],L=Ce(G,R,!1,g)&&L}J.prototype.N=function(){if(J.aa.N.call(this),this.i){var h=this.i,g;for(g in h.g){for(var T=h.g[g],R=0;R<T.length;R++)ze(T[R]);delete h.g[g],h.h--}}this.F=null},J.prototype.K=function(h,g,T,R){return this.i.add(String(h),g,!1,T,R)},J.prototype.L=function(h,g,T,R){return this.i.add(String(h),g,!0,T,R)};function Ce(h,g,T,R){if(g=h.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,F=0;F<g.length;++F){var G=g[F];if(G&&!G.da&&G.capture==T){var $e=G.listener,Ht=G.ha||G.src;G.fa&&Ne(h.i,G),L=$e.call(Ht,R)!==!1&&L}}return L&&!R.defaultPrevented}function Nt(h,g,T){if(typeof h=="function")T&&(h=p(h,T));else if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(h,g||0)}function Nr(h){h.g=Nt(()=>{h.g=null,h.i&&(h.i=!1,Nr(h))},h.l);const g=h.h;h.h=null,h.m.apply(null,g)}class $n extends pe{constructor(g,T){super(),this.m=g,this.l=T,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Nr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function di(h){pe.call(this),this.h=h,this.g={}}y(di,pe);var gr=[];function fi(h){M(h.g,function(g,T){this.g.hasOwnProperty(T)&&j(g)},h),h.g={}}di.prototype.N=function(){di.aa.N.call(this),fi(this)},di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var no=a.JSON.stringify,ro=a.JSON.parse,pa=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Dr(){}Dr.prototype.h=null;function Bh(h){return h.h||(h.h=h.i())}function Gl(){}var io={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ma(){xe.call(this,"d")}y(ma,xe);function jt(){xe.call(this,"c")}y(jt,xe);var mt={},so=null;function Ue(){return so=so||new J}mt.La="serverreachability";function Wn(h){xe.call(this,mt.La,h)}y(Wn,xe);function oo(h){const g=Ue();he(g,new Wn(g))}mt.STAT_EVENT="statevent";function ga(h,g){xe.call(this,mt.STAT_EVENT,h),this.stat=g}y(ga,xe);function Lt(h){const g=Ue();he(g,new ga(g,h))}mt.Ma="timingevent";function Yl(h,g){xe.call(this,mt.Ma,h),this.size=g}y(Yl,xe);function pi(h,g){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},g)}function Or(){this.g=!0}Or.prototype.xa=function(){this.g=!1};function Ql(h,g,T,R,L,F){h.info(function(){if(h.g)if(F)for(var G="",$e=F.split("&"),Ht=0;Ht<$e.length;Ht++){var Ae=$e[Ht].split("=");if(1<Ae.length){var sn=Ae[0];Ae=Ae[1];var on=sn.split("_");G=2<=on.length&&on[1]=="type"?G+(sn+"="+Ae+"&"):G+(sn+"=redacted&")}}else G=null;else G=F;return"XMLHTTP REQ ("+R+") [attempt "+L+"]: "+g+`
`+T+`
`+G})}function Xl(h,g,T,R,L,F,G){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+L+"]: "+g+`
`+T+`
`+F+" "+G})}function Mr(h,g,T,R){h.info(function(){return"XMLHTTP TEXT ("+g+"): "+Jl(h,T)+(R?" "+R:"")})}function Qm(h,g){h.info(function(){return"TIMEOUT: "+g})}Or.prototype.info=function(){};function Jl(h,g){if(!h.g)return g;if(!g)return null;try{var T=JSON.parse(g);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var R=T[h];if(!(2>R.length)){var L=R[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var G=1;G<L.length;G++)L[G]=""}}}}return no(T)}catch{return g}}var ao={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zl;function ve(){}y(ve,Dr),ve.prototype.g=function(){return new XMLHttpRequest},ve.prototype.i=function(){return{}},Zl=new ve;function De(h,g,T,R){this.j=h,this.i=g,this.l=T,this.R=R||1,this.U=new di(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new at}function at(){this.i=null,this.g="",this.h=!1}var Rn={},Tn={};function lo(h,g,T){h.L=1,h.v=Gh(mi(g)),h.m=T,h.P=!0,$h(h,null)}function $h(h,g){h.F=Date.now(),Hh(h),h.A=mi(h.v);var T=h.A,R=h.R;Array.isArray(R)||(R=[String(R)]),bb(T.i,"t",R),h.C=0,T=h.j.J,h.h=new at,h.g=Ub(h.j,T?g:null,!h.m),0<h.O&&(h.M=new $n(p(h.Y,h,h.g),h.O)),g=h.U,T=h.g,R=h.ca;var L="readystatechange";Array.isArray(L)||(L&&(gr[0]=L.toString()),L=gr);for(var F=0;F<L.length;F++){var G=Wt(T,L[F],R||g.handleEvent,!1,g.h||g);if(!G)break;g.g[G.key]=G}g=h.H?_(h.H):{},h.m?(h.u||(h.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,g)):(h.u="GET",h.g.ea(h.A,h.u,null,g)),oo(),Ql(h.i,h.u,h.A,h.l,h.R,h.m)}De.prototype.ca=function(h){h=h.target;const g=this.M;g&&gi(h)==3?g.j():this.Y(h)},De.prototype.Y=function(h){try{if(h==this.g)e:{const on=gi(this.g);var g=this.g.Ba();const _a=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||Pb(this.g)))){this.J||on!=4||g==7||(g==8||0>=_a?oo(3):oo(2)),Xm(this);var T=this.g.Z();this.X=T;t:if(Wh(this)){var R=Pb(this.g);h="";var L=R.length,F=gi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){co(this),ec(this);var G="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,h+=this.h.i.decode(R[g],{stream:!(F&&g==L-1)});R.length=0,this.h.g+=h,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=T==200,Xl(this.i,this.u,this.A,this.l,this.R,on,T),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,Ht=this.g;if(($e=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b($e)){var Ae=$e;break t}}Ae=null}if(T=Ae)Mr(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jm(this,T);else{this.o=!1,this.s=3,Lt(12),co(this),ec(this);break e}}if(this.P){T=!0;let yr;for(;!this.J&&this.C<G.length;)if(yr=aM(this,G),yr==Tn){on==4&&(this.s=4,Lt(14),T=!1),Mr(this.i,this.l,null,"[Incomplete Response]");break}else if(yr==Rn){this.s=4,Lt(15),Mr(this.i,this.l,G,"[Invalid Chunk]"),T=!1;break}else Mr(this.i,this.l,yr,null),Jm(this,yr);if(Wh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||G.length!=0||this.h.h||(this.s=1,Lt(16),T=!1),this.o=this.o&&T,!T)Mr(this.i,this.l,G,"[Invalid Chunked Response]"),co(this),ec(this);else if(0<G.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),ig(sn),sn.M=!0,Lt(11))}}else Mr(this.i,this.l,G,null),Jm(this,G);on==4&&co(this),this.o&&!this.J&&(on==4?jb(this.j,this):(this.o=!1,Hh(this)))}else SM(this.g),T==400&&0<G.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),co(this),ec(this)}}}catch{}finally{}};function Wh(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function aM(h,g){var T=h.C,R=g.indexOf(`
`,T);return R==-1?Tn:(T=Number(g.substring(T,R)),isNaN(T)?Rn:(R+=1,R+T>g.length?Tn:(g=g.slice(R,R+T),h.C=R+T,g)))}De.prototype.cancel=function(){this.J=!0,co(this)};function Hh(h){h.S=Date.now()+h.I,ub(h,h.I)}function ub(h,g){if(h.B!=null)throw Error("WatchDog timer not null");h.B=pi(p(h.ba,h),g)}function Xm(h){h.B&&(a.clearTimeout(h.B),h.B=null)}De.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Qm(this.i,this.A),this.L!=2&&(oo(),Lt(17)),co(this),this.s=2,ec(this)):ub(this,this.S-h)};function ec(h){h.j.G==0||h.J||jb(h.j,h)}function co(h){Xm(h);var g=h.M;g&&typeof g.ma=="function"&&g.ma(),h.M=null,fi(h.U),h.g&&(g=h.g,h.g=null,g.abort(),g.ma())}function Jm(h,g){try{var T=h.j;if(T.G!=0&&(T.g==h||Zm(T.h,h))){if(!h.K&&Zm(T.h,h)&&T.G==3){try{var R=T.Da.g.parse(g)}catch{R=null}if(Array.isArray(R)&&R.length==3){var L=R;if(L[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)ed(T),Jh(T);else break e;rg(T),Lt(18)}}else T.za=L[1],0<T.za-T.T&&37500>L[2]&&T.F&&T.v==0&&!T.C&&(T.C=pi(p(T.Za,T),6e3));if(1>=fb(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else ho(T,11)}else if((h.K||T.g==h)&&ed(T),!b(g))for(L=T.Da.g.parse(g),g=0;g<L.length;g++){let Ae=L[g];if(T.T=Ae[0],Ae=Ae[1],T.G==2)if(Ae[0]=="c"){T.K=Ae[1],T.ia=Ae[2];const sn=Ae[3];sn!=null&&(T.la=sn,T.j.info("VER="+T.la));const on=Ae[4];on!=null&&(T.Aa=on,T.j.info("SVER="+T.Aa));const _a=Ae[5];_a!=null&&typeof _a=="number"&&0<_a&&(R=1.5*_a,T.L=R,T.j.info("backChannelRequestTimeoutMs_="+R)),R=T;const yr=h.g;if(yr){const nd=yr.g?yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nd){var F=R.h;F.g||nd.indexOf("spdy")==-1&&nd.indexOf("quic")==-1&&nd.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(eg(F,F.h),F.h=null))}if(R.D){const sg=yr.g?yr.g.getResponseHeader("X-HTTP-Session-Id"):null;sg&&(R.ya=sg,Xe(R.I,R.D,sg))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),R=T;var G=h;if(R.qa=Fb(R,R.J?R.ia:null,R.W),G.K){pb(R.h,G);var $e=G,Ht=R.L;Ht&&($e.I=Ht),$e.B&&(Xm($e),Hh($e)),R.g=G}else Ob(R);0<T.i.length&&Zh(T)}else Ae[0]!="stop"&&Ae[0]!="close"||ho(T,7);else T.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?ho(T,7):ng(T):Ae[0]!="noop"&&T.l&&T.l.ta(Ae),T.v=0)}}oo(4)}catch{}}var lM=class{constructor(h,g){this.g=h,this.map=g}};function hb(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function db(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function fb(h){return h.h?1:h.g?h.g.size:0}function Zm(h,g){return h.h?h.h==g:h.g?h.g.has(g):!1}function eg(h,g){h.g?h.g.add(g):h.h=g}function pb(h,g){h.h&&h.h==g?h.h=null:h.g&&h.g.has(g)&&h.g.delete(g)}hb.prototype.cancel=function(){if(this.i=mb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function mb(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let g=h.i;for(const T of h.g.values())g=g.concat(T.D);return g}return v(h.i)}function cM(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var g=[],T=h.length,R=0;R<T;R++)g.push(h[R]);return g}g=[],T=0;for(R in h)g[T++]=h[R];return g}function uM(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var g=[];h=h.length;for(var T=0;T<h;T++)g.push(T);return g}g=[],T=0;for(const R in h)g[T++]=R;return g}}}function gb(h,g){if(h.forEach&&typeof h.forEach=="function")h.forEach(g,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,g,void 0);else for(var T=uM(h),R=cM(h),L=R.length,F=0;F<L;F++)g.call(void 0,R[F],T&&T[F],h)}var yb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hM(h,g){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var R=h[T].indexOf("="),L=null;if(0<=R){var F=h[T].substring(0,R);L=h[T].substring(R+1)}else F=h[T];g(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function uo(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof uo){this.h=h.h,qh(this,h.j),this.o=h.o,this.g=h.g,Kh(this,h.s),this.l=h.l;var g=h.i,T=new rc;T.i=g.i,g.g&&(T.g=new Map(g.g),T.h=g.h),vb(this,T),this.m=h.m}else h&&(g=String(h).match(yb))?(this.h=!1,qh(this,g[1]||"",!0),this.o=tc(g[2]||""),this.g=tc(g[3]||"",!0),Kh(this,g[4]),this.l=tc(g[5]||"",!0),vb(this,g[6]||"",!0),this.m=tc(g[7]||"")):(this.h=!1,this.i=new rc(null,this.h))}uo.prototype.toString=function(){var h=[],g=this.j;g&&h.push(nc(g,_b,!0),":");var T=this.g;return(T||g=="file")&&(h.push("//"),(g=this.o)&&h.push(nc(g,_b,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(nc(T,T.charAt(0)=="/"?pM:fM,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",nc(T,gM)),h.join("")};function mi(h){return new uo(h)}function qh(h,g,T){h.j=T?tc(g,!0):g,h.j&&(h.j=h.j.replace(/:$/,""))}function Kh(h,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);h.s=g}else h.s=null}function vb(h,g,T){g instanceof rc?(h.i=g,yM(h.i,h.h)):(T||(g=nc(g,mM)),h.i=new rc(g,h.h))}function Xe(h,g,T){h.i.set(g,T)}function Gh(h){return Xe(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function tc(h,g){return h?g?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function nc(h,g,T){return typeof h=="string"?(h=encodeURI(h).replace(g,dM),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function dM(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var _b=/[#\/\?@]/g,fM=/[#\?:]/g,pM=/[#\?]/g,mM=/[#\?@]/g,gM=/#/g;function rc(h,g){this.h=this.g=null,this.i=h||null,this.j=!!g}function Zi(h){h.g||(h.g=new Map,h.h=0,h.i&&hM(h.i,function(g,T){h.add(decodeURIComponent(g.replace(/\+/g," ")),T)}))}t=rc.prototype,t.add=function(h,g){Zi(this),this.i=null,h=ya(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(g),this.h+=1,this};function xb(h,g){Zi(h),g=ya(h,g),h.g.has(g)&&(h.i=null,h.h-=h.g.get(g).length,h.g.delete(g))}function wb(h,g){return Zi(h),g=ya(h,g),h.g.has(g)}t.forEach=function(h,g){Zi(this),this.g.forEach(function(T,R){T.forEach(function(L){h.call(g,L,R,this)},this)},this)},t.na=function(){Zi(this);const h=Array.from(this.g.values()),g=Array.from(this.g.keys()),T=[];for(let R=0;R<g.length;R++){const L=h[R];for(let F=0;F<L.length;F++)T.push(g[R])}return T},t.V=function(h){Zi(this);let g=[];if(typeof h=="string")wb(this,h)&&(g=g.concat(this.g.get(ya(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)g=g.concat(h[T])}return g},t.set=function(h,g){return Zi(this),this.i=null,h=ya(this,h),wb(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[g]),this.h+=1,this},t.get=function(h,g){return h?(h=this.V(h),0<h.length?String(h[0]):g):g};function bb(h,g,T){xb(h,g),0<T.length&&(h.i=null,h.g.set(ya(h,g),v(T)),h.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],g=Array.from(this.g.keys());for(var T=0;T<g.length;T++){var R=g[T];const F=encodeURIComponent(String(R)),G=this.V(R);for(R=0;R<G.length;R++){var L=F;G[R]!==""&&(L+="="+encodeURIComponent(String(G[R]))),h.push(L)}}return this.i=h.join("&")};function ya(h,g){return g=String(g),h.j&&(g=g.toLowerCase()),g}function yM(h,g){g&&!h.j&&(Zi(h),h.i=null,h.g.forEach(function(T,R){var L=R.toLowerCase();R!=L&&(xb(this,R),bb(this,L,T))},h)),h.j=g}function vM(h,g){const T=new Or;if(a.Image){const R=new Image;R.onload=m(es,T,"TestLoadImage: loaded",!0,g,R),R.onerror=m(es,T,"TestLoadImage: error",!1,g,R),R.onabort=m(es,T,"TestLoadImage: abort",!1,g,R),R.ontimeout=m(es,T,"TestLoadImage: timeout",!1,g,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else g(!1)}function _M(h,g){const T=new Or,R=new AbortController,L=setTimeout(()=>{R.abort(),es(T,"TestPingServer: timeout",!1,g)},1e4);fetch(h,{signal:R.signal}).then(F=>{clearTimeout(L),F.ok?es(T,"TestPingServer: ok",!0,g):es(T,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),es(T,"TestPingServer: error",!1,g)})}function es(h,g,T,R,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),R(T)}catch{}}function xM(){this.g=new pa}function wM(h,g,T){const R=T||"";try{gb(h,function(L,F){let G=L;c(L)&&(G=no(L)),g.push(R+F+"="+encodeURIComponent(G))})}catch(L){throw g.push(R+"type="+encodeURIComponent("_badmap")),L}}function Yh(h){this.l=h.Ub||null,this.j=h.eb||!1}y(Yh,Dr),Yh.prototype.g=function(){return new Qh(this.l,this.j)},Yh.prototype.i=function(h){return function(){return h}}({});function Qh(h,g){J.call(this),this.D=h,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Qh,J),t=Qh.prototype,t.open=function(h,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=g,this.readyState=1,sc(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(g.body=h),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ic(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,sc(this)),this.g&&(this.readyState=3,sc(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tb(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tb(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var g=h.value?h.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!h.done}))&&(this.response=this.responseText+=g)}h.done?ic(this):sc(this),this.readyState==3&&Tb(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ic(this))},t.Qa=function(h){this.g&&(this.response=h,ic(this))},t.ga=function(){this.g&&ic(this)};function ic(h){h.readyState=4,h.l=null,h.j=null,h.v=null,sc(h)}t.setRequestHeader=function(h,g){this.u.append(h,g)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],g=this.h.entries();for(var T=g.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=g.next();return h.join(`\r
`)};function sc(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Qh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Sb(h){let g="";return M(h,function(T,R){g+=R,g+=":",g+=T,g+=`\r
`}),g}function tg(h,g,T){e:{for(R in T){var R=!1;break e}R=!0}R||(T=Sb(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):Xe(h,g,T))}function gt(h){J.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(gt,J);var bM=/^https?$/i,TM=["POST","PUT"];t=gt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,g,T,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);g=g?g.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zl.g(),this.v=this.o?Bh(this.o):Bh(Zl),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(h),!0),this.B=!1}catch(F){Eb(this,F);return}if(h=T||"",T=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var L in R)T.set(L,R[L]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const F of R.keys())T.set(F,R.get(F));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(T.keys()).find(F=>F.toLowerCase()=="content-type"),L=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(TM,g,void 0))||R||L||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,G]of T)this.g.setRequestHeader(F,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Cb(this),this.u=!0,this.g.send(h),this.u=!1}catch(F){Eb(this,F)}};function Eb(h,g){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=g,h.m=5,kb(h),Xh(h)}function kb(h){h.A||(h.A=!0,he(h,"complete"),he(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,he(this,"complete"),he(this,"abort"),Xh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xh(this,!0)),gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ib(this):this.bb())},t.bb=function(){Ib(this)};function Ib(h){if(h.h&&typeof o<"u"&&(!h.v[1]||gi(h)!=4||h.Z()!=2)){if(h.u&&gi(h)==4)Nt(h.Ea,0,h);else if(he(h,"readystatechange"),gi(h)==4){h.h=!1;try{const G=h.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var T;if(!(T=g)){var R;if(R=G===0){var L=String(h.D).match(yb)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),R=!bM.test(L?L.toLowerCase():"")}T=R}if(T)he(h,"complete"),he(h,"success");else{h.m=6;try{var F=2<gi(h)?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.Z()+"]",kb(h)}}finally{Xh(h)}}}}function Xh(h,g){if(h.g){Cb(h);const T=h.g,R=h.v[0]?()=>{}:null;h.g=null,h.v=null,g||he(h,"ready");try{T.onreadystatechange=R}catch{}}}function Cb(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function gi(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<gi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var g=this.g.responseText;return h&&g.indexOf(h)==0&&(g=g.substring(h.length)),ro(g)}};function Pb(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function SM(h){const g={};h=(h.g&&2<=gi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(b(h[R]))continue;var T=A(h[R]);const L=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const F=g[L]||[];g[L]=F,F.push(T)}S(g,function(R){return R.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function oc(h,g,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||g}function Ab(h){this.Aa=0,this.i=[],this.j=new Or,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=oc("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=oc("baseRetryDelayMs",5e3,h),this.cb=oc("retryDelaySeedMs",1e4,h),this.Wa=oc("forwardChannelMaxRetries",2,h),this.wa=oc("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new hb(h&&h.concurrentRequestLimit),this.Da=new xM,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ab.prototype,t.la=8,t.G=1,t.connect=function(h,g,T,R){Lt(0),this.W=h,this.H=g||{},T&&R!==void 0&&(this.H.OSID=T,this.H.OAID=R),this.F=this.X,this.I=Fb(this,null,this.W),Zh(this)};function ng(h){if(Rb(h),h.G==3){var g=h.U++,T=mi(h.I);if(Xe(T,"SID",h.K),Xe(T,"RID",g),Xe(T,"TYPE","terminate"),ac(h,T),g=new De(h,h.j,g),g.L=2,g.v=Gh(mi(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!T&&a.Image&&(new Image().src=g.v,T=!0),T||(g.g=Ub(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Hh(g)}Vb(h)}function Jh(h){h.g&&(ig(h),h.g.cancel(),h.g=null)}function Rb(h){Jh(h),h.u&&(a.clearTimeout(h.u),h.u=null),ed(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function Zh(h){if(!db(h.h)&&!h.s){h.s=!0;var g=h.Ga;ne||Y(),z||(ne(),z=!0),X.add(g,h),h.B=0}}function EM(h,g){return fb(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=g.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=pi(p(h.Ga,h,g),Lb(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const L=new De(this,this.j,h);let F=this.o;if(this.S&&(F?(F=_(F),P(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var g=0,T=0;T<this.i.length;T++){t:{var R=this.i[T];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(g+=R,4096<g){g=T;break e}if(g===4096||T===this.i.length-1){g=T+1;break e}}g=1e3}else g=1e3;g=Db(this,L,g),T=mi(this.I),Xe(T,"RID",h),Xe(T,"CVER",22),this.D&&Xe(T,"X-HTTP-Session-Id",this.D),ac(this,T),F&&(this.O?g="headers="+encodeURIComponent(String(Sb(F)))+"&"+g:this.m&&tg(T,this.m,F)),eg(this.h,L),this.Ua&&Xe(T,"TYPE","init"),this.P?(Xe(T,"$req",g),Xe(T,"SID","null"),L.T=!0,lo(L,T,null)):lo(L,T,g),this.G=2}}else this.G==3&&(h?Nb(this,h):this.i.length==0||db(this.h)||Nb(this))};function Nb(h,g){var T;g?T=g.l:T=h.U++;const R=mi(h.I);Xe(R,"SID",h.K),Xe(R,"RID",T),Xe(R,"AID",h.T),ac(h,R),h.m&&h.o&&tg(R,h.m,h.o),T=new De(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),g&&(h.i=g.D.concat(h.i)),g=Db(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),eg(h.h,T),lo(T,R,g)}function ac(h,g){h.H&&M(h.H,function(T,R){Xe(g,R,T)}),h.l&&gb({},function(T,R){Xe(g,R,T)})}function Db(h,g,T){T=Math.min(h.i.length,T);var R=h.l?p(h.l.Na,h.l,h):null;e:{var L=h.i;let F=-1;for(;;){const G=["count="+T];F==-1?0<T?(F=L[0].g,G.push("ofs="+F)):F=0:G.push("ofs="+F);let $e=!0;for(let Ht=0;Ht<T;Ht++){let Ae=L[Ht].g;const sn=L[Ht].map;if(Ae-=F,0>Ae)F=Math.max(0,L[Ht].g-100),$e=!1;else try{wM(sn,G,"req"+Ae+"_")}catch{R&&R(sn)}}if($e){R=G.join("&");break e}}}return h=h.i.splice(0,T),g.D=h,R}function Ob(h){if(!h.g&&!h.u){h.Y=1;var g=h.Fa;ne||Y(),z||(ne(),z=!0),X.add(g,h),h.v=0}}function rg(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=pi(p(h.Fa,h),Lb(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,Mb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=pi(p(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),Jh(this),Mb(this))};function ig(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function Mb(h){h.g=new De(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var g=mi(h.qa);Xe(g,"RID","rpc"),Xe(g,"SID",h.K),Xe(g,"AID",h.T),Xe(g,"CI",h.F?"0":"1"),!h.F&&h.ja&&Xe(g,"TO",h.ja),Xe(g,"TYPE","xmlhttp"),ac(h,g),h.m&&h.o&&tg(g,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=Gh(mi(g)),T.m=null,T.P=!0,$h(T,h)}t.Za=function(){this.C!=null&&(this.C=null,Jh(this),rg(this),Lt(19))};function ed(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function jb(h,g){var T=null;if(h.g==g){ed(h),ig(h),h.g=null;var R=2}else if(Zm(h.h,g))T=g.D,pb(h.h,g),R=1;else return;if(h.G!=0){if(g.o)if(R==1){T=g.m?g.m.length:0,g=Date.now()-g.F;var L=h.B;R=Ue(),he(R,new Yl(R,T)),Zh(h)}else Ob(h);else if(L=g.s,L==3||L==0&&0<g.X||!(R==1&&EM(h,g)||R==2&&rg(h)))switch(T&&0<T.length&&(g=h.h,g.i=g.i.concat(T)),L){case 1:ho(h,5);break;case 4:ho(h,10);break;case 3:ho(h,6);break;default:ho(h,2)}}}function Lb(h,g){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*g}function ho(h,g){if(h.j.info("Error code "+g),g==2){var T=p(h.fb,h),R=h.Xa;const L=!R;R=new uo(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||qh(R,"https"),Gh(R),L?vM(R.toString(),T):_M(R.toString(),T)}else Lt(2);h.G=0,h.l&&h.l.sa(g),Vb(h),Rb(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Vb(h){if(h.G=0,h.ka=[],h.l){const g=mb(h.h);(g.length!=0||h.i.length!=0)&&(x(h.ka,g),x(h.ka,h.i),h.h.i.length=0,v(h.i),h.i.length=0),h.l.ra()}}function Fb(h,g,T){var R=T instanceof uo?mi(T):new uo(T);if(R.g!="")g&&(R.g=g+"."+R.g),Kh(R,R.s);else{var L=a.location;R=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var F=new uo(null);R&&qh(F,R),g&&(F.g=g),L&&Kh(F,L),T&&(F.l=T),R=F}return T=h.D,g=h.ya,T&&g&&Xe(R,T,g),Xe(R,"VER",h.la),ac(h,R),R}function Ub(h,g,T){if(g&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=h.Ca&&!h.pa?new gt(new Yh({eb:T})):new gt(h.pa),g.Ha(h.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bb(){}t=Bb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function td(){}td.prototype.g=function(h,g){return new Hn(h,g)};function Hn(h,g){J.call(this),this.g=new Ab(g),this.l=h,this.h=g&&g.messageUrlParams||null,h=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(h?h["X-WebChannel-Content-Type"]=g.messageContentType:h={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(h?h["X-WebChannel-Client-Profile"]=g.va:h={"X-WebChannel-Client-Profile":g.va}),this.g.S=h,(h=g&&g.Sb)&&!b(h)&&(this.g.m=h),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!b(g)&&(this.g.D=g,h=this.h,h!==null&&g in h&&(h=this.h,g in h&&delete h[g])),this.j=new va(this)}y(Hn,J),Hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Hn.prototype.close=function(){ng(this.g)},Hn.prototype.o=function(h){var g=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=no(h),h=T);g.i.push(new lM(g.Ya++,h)),g.G==3&&Zh(g)},Hn.prototype.N=function(){this.g.l=null,delete this.j,ng(this.g),delete this.g,Hn.aa.N.call(this)};function zb(h){ma.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var g=h.__sm__;if(g){e:{for(const T in g){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,g=g!==null&&h in g?g[h]:void 0),this.data=g}else this.data=h}y(zb,ma);function $b(){jt.call(this),this.status=1}y($b,jt);function va(h){this.g=h}y(va,Bb),va.prototype.ua=function(){he(this.g,"a")},va.prototype.ta=function(h){he(this.g,new zb(h))},va.prototype.sa=function(h){he(this.g,new $b)},va.prototype.ra=function(){he(this.g,"b")},td.prototype.createWebChannel=td.prototype.g,Hn.prototype.send=Hn.prototype.o,Hn.prototype.open=Hn.prototype.m,Hn.prototype.close=Hn.prototype.close,hR=function(){return new td},uR=function(){return Ue()},cR=mt,Ov={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ao.NO_ERROR=0,ao.TIMEOUT=8,ao.HTTP_ERROR=6,ff=ao,zh.COMPLETE="complete",lR=zh,Gl.EventType=io,io.OPEN="a",io.CLOSE="b",io.ERROR="c",io.MESSAGE="d",J.prototype.listen=J.prototype.K,Nc=Gl,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,aR=gt}).apply(typeof wd<"u"?wd:typeof self<"u"?self:typeof window<"u"?window:{});const LS="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=new U0("@firebase/firestore");function gc(){return Yo.logLevel}function se(t,...e){if(Yo.logLevel<=Se.DEBUG){const n=e.map(J0);Yo.debug(`Firestore (${Ll}): ${t}`,...n)}}function zi(t,...e){if(Yo.logLevel<=Se.ERROR){const n=e.map(J0);Yo.error(`Firestore (${Ll}): ${t}`,...n)}}function gl(t,...e){if(Yo.logLevel<=Se.WARN){const n=e.map(J0);Yo.warn(`Firestore (${Ll}): ${t}`,...n)}}function J0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${Ll}) INTERNAL ASSERTION FAILED: `+t;throw zi(e),new Error(e)}function Le(t,e){t||fe()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(fn.UNAUTHENTICATED))}shutdown(){}}class e5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class t5{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ni,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ni)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string"),new dR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string"),new fn(e)}}class n5{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class r5{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new n5(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class i5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s5{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Le(this.o===void 0);const r=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string"),this.R=n.token,new i5(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=o5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Re(t,e){return t<e?-1:t>e?1:0}function yl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Mt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new Mt(0,0))}static max(){return new me(new Mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(),r===void 0?r=e.length-n:r>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Lu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Lu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ye extends Lu{construct(e,n,r){return new Ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ye(n)}static emptyPath(){return new Ye([])}}const a5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Lu{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return a5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Z(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new Z(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Z(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Z(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Ye.fromString(e))}static fromName(e){return new ae(Ye.fromString(e).popFirst(5))}static empty(){return new ae(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Ye(e.slice()))}}function l5(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=me.fromTimestamp(r===1e9?new Mt(n+1,0):new Mt(n,r));return new Fs(i,ae.empty(),e)}function c5(t){return new Fs(t.readTime,t.key,-1)}class Fs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fs(me.min(),ae.empty(),-1)}static max(){return new Fs(me.max(),ae.empty(),-1)}}function u5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gh(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==h5)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(i=>i?$.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new $((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new $((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function f5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Z0.oe=-1;function om(t){return t==null}function lp(t){return t===0&&1/t==-1/0}function p5(t){return typeof t=="number"&&Number.isInteger(t)&&!lp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function pR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){this.comparator=e,this.root=n||Yt.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bd(this.root,e,this.comparator,!1)}getReverseIterator(){return new bd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bd(this.root,e,this.comparator,!0)}}class bd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Yt.RED,this.left=i??Yt.EMPTY,this.right=s??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Yt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Yt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Yt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new FS(this.data.getIterator())}getIteratorFrom(e){return new FS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tn(this.comparator);return n.data=e,n}}class FS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Yn([])}unionWith(e){let n=new tn(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return yl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new mR("Invalid base64 string: "+s):s}}(e);return new rn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new rn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const m5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Us(t){if(Le(!!t),typeof t=="string"){let e=0;const n=m5.exec(t);if(Le(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:wt(t.seconds),nanos:wt(t.nanos)}}function wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qo(t){return typeof t=="string"?rn.fromBase64String(t):rn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function tx(t){const e=t.mapValue.fields.__previous_value__;return ex(e)?tx(e):e}function Vu(t){const e=Us(t.mapValue.fields.__local_write_time__.timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g5{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Fu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Fu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Fu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td={mapValue:{}};function Xo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ex(t)?4:v5(t)?9007199254740991:y5(t)?10:11:fe()}function si(t,e){if(t===e)return!0;const n=Xo(t);if(n!==Xo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vu(t).isEqual(Vu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Us(i.timestampValue),a=Us(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Qo(i.bytesValue).isEqual(Qo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return wt(i.geoPointValue.latitude)===wt(s.geoPointValue.latitude)&&wt(i.geoPointValue.longitude)===wt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return wt(i.integerValue)===wt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=wt(i.doubleValue),a=wt(s.doubleValue);return o===a?lp(o)===lp(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return yl(t.arrayValue.values||[],e.arrayValue.values||[],si);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(VS(o)!==VS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!si(o[l],a[l])))return!1;return!0}(t,e);default:return fe()}}function Uu(t,e){return(t.values||[]).find(n=>si(n,e))!==void 0}function vl(t,e){if(t===e)return 0;const n=Xo(t),r=Xo(e);if(n!==r)return Re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=wt(s.integerValue||s.doubleValue),l=wt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return US(t.timestampValue,e.timestampValue);case 4:return US(Vu(t),Vu(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Qo(s),l=Qo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Re(a[c],l[c]);if(u!==0)return u}return Re(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Re(wt(s.latitude),wt(o.latitude));return a!==0?a:Re(wt(s.longitude),wt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return BS(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const d=s.fields||{},p=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,v=Re(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:BS(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Td.mapValue&&o===Td.mapValue)return 0;if(s===Td.mapValue)return 1;if(o===Td.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const p=Re(l[d],u[d]);if(p!==0)return p;const m=vl(a[l[d]],c[u[d]]);if(m!==0)return m}return Re(l.length,u.length)}(t.mapValue,e.mapValue);default:throw fe()}}function US(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=Us(t),r=Us(e),i=Re(n.seconds,r.seconds);return i!==0?i:Re(n.nanos,r.nanos)}function BS(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=vl(n[i],r[i]);if(s)return s}return Re(n.length,r.length)}function _l(t){return Mv(t)}function Mv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Us(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Mv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Mv(n.fields[o])}`;return i+"}"}(t.mapValue):fe()}function zS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jv(t){return!!t&&"integerValue"in t}function nx(t){return!!t&&"arrayValue"in t}function $S(t){return!!t&&"nullValue"in t}function WS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pf(t){return!!t&&"mapValue"in t}function y5(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function eu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return sa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=eu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function v5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(n)}setAll(e){let n=Qt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=eu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());pf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return si(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];pf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){sa(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new jn(eu(this.value))}}function gR(t){const e=[];return sa(t.fields,(n,r)=>{const i=new Qt([n]);if(pf(r)){const s=gR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mn(e,0,me.min(),me.min(),me.min(),jn.empty(),0)}static newFoundDocument(e,n,r,i){return new mn(e,1,n,me.min(),r,i,0)}static newNoDocument(e,n){return new mn(e,2,n,me.min(),me.min(),jn.empty(),0)}static newUnknownDocument(e,n){return new mn(e,3,n,me.min(),me.min(),jn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,n){this.position=e,this.inclusive=n}}function HS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ae.comparator(ae.fromName(o.referenceValue),n.key):r=vl(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function qS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!si(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n="asc"){this.field=e,this.dir=n}}function _5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{}class Pt extends yR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new w5(e,n,r):n==="array-contains"?new S5(e,r):n==="in"?new E5(e,r):n==="not-in"?new k5(e,r):n==="array-contains-any"?new I5(e,r):new Pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new b5(e,r):new T5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(vl(n,this.value)):n!==null&&Xo(this.value)===Xo(n)&&this.matchesComparison(vl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rr extends yR{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Rr(e,n)}matches(e){return vR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function vR(t){return t.op==="and"}function _R(t){return x5(t)&&vR(t)}function x5(t){for(const e of t.filters)if(e instanceof Rr)return!1;return!0}function Lv(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+_l(t.value);if(_R(t))return t.filters.map(e=>Lv(e)).join(",");{const e=t.filters.map(n=>Lv(n)).join(",");return`${t.op}(${e})`}}function xR(t,e){return t instanceof Pt?function(r,i){return i instanceof Pt&&r.op===i.op&&r.field.isEqual(i.field)&&si(r.value,i.value)}(t,e):t instanceof Rr?function(r,i){return i instanceof Rr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&xR(o,i.filters[a]),!0):!1}(t,e):void fe()}function wR(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${_l(n.value)}`}(t):t instanceof Rr?function(n){return n.op.toString()+" {"+n.getFilters().map(wR).join(" ,")+"}"}(t):"Filter"}class w5 extends Pt{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class b5 extends Pt{constructor(e,n){super(e,"in",n),this.keys=bR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class T5 extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=bR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class S5 extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nx(n)&&Uu(n.arrayValue,this.value)}}class E5 extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uu(this.value.arrayValue,n)}}class k5 extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Uu(this.value.arrayValue,n)}}class I5 extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Uu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function KS(t,e=null,n=[],r=[],i=null,s=null,o=null){return new C5(t,e,n,r,i,s,o)}function rx(t){const e=ge(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Lv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),om(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_l(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_l(r)).join(",")),e.ue=n}return e.ue}function ix(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!qS(t.startAt,e.startAt)&&qS(t.endAt,e.endAt)}function Vv(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function P5(t,e,n,r,i,s,o,a){return new oa(t,e,n,r,i,s,o,a)}function am(t){return new oa(t)}function GS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TR(t){return t.collectionGroup!==null}function tu(t){const e=ge(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tn(Qt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Bu(s,r))}),n.has(Qt.keyField().canonicalString())||e.ce.push(new Bu(Qt.keyField(),r))}return e.ce}function Zr(t){const e=ge(t);return e.le||(e.le=A5(e,tu(t))),e.le}function A5(t,e){if(t.limitType==="F")return KS(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Bu(i.field,s)});const n=t.endAt?new cp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cp(t.startAt.position,t.startAt.inclusive):null;return KS(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Fv(t,e){const n=t.filters.concat([e]);return new oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function up(t,e,n){return new oa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lm(t,e){return ix(Zr(t),Zr(e))&&t.limitType===e.limitType}function SR(t){return`${rx(Zr(t))}|lt:${t.limitType}`}function Sa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>wR(i)).join(", ")}]`),om(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>_l(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>_l(i)).join(",")),`Target(${r})`}(Zr(t))}; limitType=${t.limitType})`}function cm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ae.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of tu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=HS(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,tu(r),i)||r.endAt&&!function(o,a,l){const c=HS(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,tu(r),i))}(t,e)}function R5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ER(t){return(e,n)=>{let r=!1;for(const i of tu(t)){const s=N5(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function N5(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?vl(l,c):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){sa(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return pR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D5=new dt(ae.comparator);function $i(){return D5}const kR=new dt(ae.comparator);function Dc(...t){let e=kR;for(const n of t)e=e.insert(n.key,n);return e}function IR(t){let e=kR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Po(){return nu()}function CR(){return nu()}function nu(){return new Vl(t=>t.toString(),(t,e)=>t.isEqual(e))}const O5=new dt(ae.comparator),M5=new tn(ae.comparator);function Te(...t){let e=M5;for(const n of t)e=e.add(n);return e}const j5=new tn(Re);function L5(){return j5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lp(e)?"-0":e}}function PR(t){return{integerValue:""+t}}function V5(t,e){return p5(e)?PR(e):sx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this._=void 0}}function F5(t,e,n){return t instanceof zu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ex(s)&&(s=tx(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof $u?RR(t,e):t instanceof Wu?NR(t,e):function(i,s){const o=AR(i,s),a=YS(o)+YS(i.Pe);return jv(o)&&jv(i.Pe)?PR(a):sx(i.serializer,a)}(t,e)}function U5(t,e,n){return t instanceof $u?RR(t,e):t instanceof Wu?NR(t,e):n}function AR(t,e){return t instanceof hp?function(r){return jv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class zu extends um{}class $u extends um{constructor(e){super(),this.elements=e}}function RR(t,e){const n=DR(e);for(const r of t.elements)n.some(i=>si(i,r))||n.push(r);return{arrayValue:{values:n}}}class Wu extends um{constructor(e){super(),this.elements=e}}function NR(t,e){let n=DR(e);for(const r of t.elements)n=n.filter(i=>!si(i,r));return{arrayValue:{values:n}}}class hp extends um{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function YS(t){return wt(t.integerValue||t.doubleValue)}function DR(t){return nx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,n){this.field=e,this.transform=n}}function z5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof $u&&i instanceof $u||r instanceof Wu&&i instanceof Wu?yl(r.elements,i.elements,si):r instanceof hp&&i instanceof hp?si(r.Pe,i.Pe):r instanceof zu&&i instanceof zu}(t.transform,e.transform)}class $5{constructor(e,n){this.version=e,this.transformResults=n}}class Cn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Cn}static exists(e){return new Cn(void 0,e)}static updateTime(e){return new Cn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class hm{}function OR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dm(t.key,Cn.none()):new vh(t.key,t.data,Cn.none());{const n=t.data,r=jn.empty();let i=new tn(Qt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Qs(t.key,r,new Yn(i.toArray()),Cn.none())}}function W5(t,e,n){t instanceof vh?function(i,s,o){const a=i.value.clone(),l=XS(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Qs?function(i,s,o){if(!mf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=XS(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(MR(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ru(t,e,n,r){return t instanceof vh?function(s,o,a,l){if(!mf(s.precondition,o))return a;const c=s.value.clone(),u=JS(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Qs?function(s,o,a,l){if(!mf(s.precondition,o))return a;const c=JS(s.fieldTransforms,l,o),u=o.data;return u.setAll(MR(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return mf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function H5(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=AR(r.transform,i||null);s!=null&&(n===null&&(n=jn.empty()),n.set(r.field,s))}return n||null}function QS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&yl(r,i,(s,o)=>z5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vh extends hm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qs extends hm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function MR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function XS(t,e,n){const r=new Map;Le(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,U5(o,a,n[i]))}return r}function JS(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,F5(s,o,e))}return r}class dm extends hm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class q5 extends hm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&W5(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ru(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ru(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=CR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=OR(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Te())}isEqual(e){return this.batchId===e.batchId&&yl(this.mutations,e.mutations,(n,r)=>QS(n,r))&&yl(this.baseMutations,e.baseMutations,(n,r)=>QS(n,r))}}class ox{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Le(e.mutations.length===r.length);let i=function(){return O5}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ox(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,ke;function Q5(t){switch(t){default:return fe();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function jR(t){if(t===void 0)return zi("GRPC error has no .code"),B.UNKNOWN;switch(t){case kt.OK:return B.OK;case kt.CANCELLED:return B.CANCELLED;case kt.UNKNOWN:return B.UNKNOWN;case kt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case kt.INTERNAL:return B.INTERNAL;case kt.UNAVAILABLE:return B.UNAVAILABLE;case kt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case kt.NOT_FOUND:return B.NOT_FOUND;case kt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case kt.ABORTED:return B.ABORTED;case kt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case kt.DATA_LOSS:return B.DATA_LOSS;default:return fe()}}(ke=kt||(kt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5=new jo([4294967295,4294967295],0);function ZS(t){const e=X5().encode(t),n=new oR;return n.update(e),new Uint8Array(n.digest())}function eE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new jo([n,r],0),new jo([i,s],0)]}class ax{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oc(`Invalid padding: ${n}`);if(r<0)throw new Oc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=jo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(jo.fromNumber(r)));return i.compare(J5)===1&&(i=new jo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ZS(e),[r,i]=eE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new ax(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=ZS(e),[r,i]=eE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,_h.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new fm(me.min(),i,new dt(Re),$i(),Te())}}class _h{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new _h(r,n,Te(),Te(),Te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class LR{constructor(e,n){this.targetId=e,this.me=n}}class VR{constructor(e,n,r=rn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class tE{constructor(){this.fe=0,this.ge=rE(),this.pe=rn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Te(),n=Te(),r=Te();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fe()}}),new _h(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=rE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Z5{constructor(e){this.Le=e,this.Be=new Map,this.ke=$i(),this.qe=nE(),this.Qe=new dt(Re)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Vv(s))if(r===0){const o=new ae(s.path);this.Ue(n,o,mn.newNoDocument(o,me.min()))}else Le(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Qo(r).toUint8Array()}catch(l){if(l instanceof mR)return gl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new ax(o,i,s)}catch(l){return gl(l instanceof Oc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Vv(a.target)){const l=new ae(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,mn.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Te();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new fm(e,n,this.Qe,this.ke,r);return this.ke=$i(),this.qe=nE(),this.Qe=new dt(Re),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new tE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new tn(Re),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new tE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function nE(){return new dt(ae.comparator)}function rE(){return new dt(ae.comparator)}const ez={asc:"ASCENDING",desc:"DESCENDING"},tz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nz={and:"AND",or:"OR"};class rz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Uv(t,e){return t.useProto3Json||om(e)?e:{value:e}}function dp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function FR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iz(t,e){return dp(t,e.toTimestamp())}function ei(t){return Le(!!t),me.fromTimestamp(function(n){const r=Us(n);return new Mt(r.seconds,r.nanos)}(t))}function lx(t,e){return Bv(t,e).canonicalString()}function Bv(t,e){const n=function(i){return new Ye(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function UR(t){const e=Ye.fromString(t);return Le(HR(e)),e}function zv(t,e){return lx(t.databaseId,e.path)}function Ug(t,e){const n=UR(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(zR(n))}function BR(t,e){return lx(t.databaseId,e)}function sz(t){const e=UR(t);return e.length===4?Ye.emptyPath():zR(e)}function $v(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zR(t){return Le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function iE(t,e,n){return{name:zv(t,e),fields:n.value.mapValue.fields}}function oz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Le(u===void 0||typeof u=="string"),rn.fromBase64String(u||"")):(Le(u===void 0||u instanceof Buffer||u instanceof Uint8Array),rn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?B.UNKNOWN:jR(c.code);return new Z(u,c.message||"")}(o);n=new VR(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ug(t,r.document.name),s=ei(r.document.updateTime),o=r.document.createTime?ei(r.document.createTime):me.min(),a=new jn({mapValue:{fields:r.document.fields}}),l=mn.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new gf(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ug(t,r.document),s=r.readTime?ei(r.readTime):me.min(),o=mn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new gf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ug(t,r.document),s=r.removedTargetIds||[];n=new gf([],s,i,null)}else{if(!("filter"in e))return fe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Y5(i,s),a=r.targetId;n=new LR(a,o)}}return n}function az(t,e){let n;if(e instanceof vh)n={update:iE(t,e.key,e.value)};else if(e instanceof dm)n={delete:zv(t,e.key)};else if(e instanceof Qs)n={update:iE(t,e.key,e.data),updateMask:gz(e.fieldMask)};else{if(!(e instanceof q5))return fe();n={verify:zv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof zu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $u)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Wu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof hp)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:iz(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe()}(t,e.precondition)),n}function lz(t,e){return t&&t.length>0?(Le(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ei(i.updateTime):ei(s);return o.isEqual(me.min())&&(o=ei(s)),new $5(o,i.transformResults||[])}(n,e))):[]}function cz(t,e){return{documents:[BR(t,e.path)]}}function uz(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=BR(t,i);const s=function(c){if(c.length!==0)return WR(Rr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:Ea(p.field),direction:fz(p.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Uv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function hz(t){let e=sz(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Le(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){const p=$R(d);return p instanceof Rr&&_R(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(y){return new Bu(ka(y.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,om(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,m=d.values||[];return new cp(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,m=d.values||[];return new cp(m,p)}(n.endAt)),P5(e,i,o,s,a,"F",l,c)}function dz(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function $R(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ka(n.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ka(n.unaryFilter.field);return Pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ka(n.unaryFilter.field);return Pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ka(n.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(ka(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Rr.create(n.compositeFilter.filters.map(r=>$R(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function fz(t){return ez[t]}function pz(t){return tz[t]}function mz(t){return nz[t]}function Ea(t){return{fieldPath:t.canonicalString()}}function ka(t){return Qt.fromServerFormat(t.fieldPath)}function WR(t){return t instanceof Pt?function(n){if(n.op==="=="){if(WS(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NAN"}};if($S(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(WS(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NOT_NAN"}};if($S(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ea(n.field),op:pz(n.op),value:n.value}}}(t):t instanceof Rr?function(n){const r=n.getFilters().map(i=>WR(i));return r.length===1?r[0]:{compositeFilter:{op:mz(n.op),filters:r}}}(t):fe()}function gz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function HR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n,r,i,s=me.min(),o=me.min(),a=rn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(e){this.ct=e}}function vz(t){const e=hz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?up(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(){this.un=new xz}addToCollectionParentIndex(e,n){return this.un.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Fs.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class xz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new tn(Ye.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tn(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xl(0)}static kn(){return new xl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(){this.changes=new Vl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ru(r.mutation,i,Yn.empty(),Mt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Te()){const i=Po();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Dc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Po();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Te()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=$i();const o=nu(),a=function(){return nu()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Qs)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),ru(u.mutation,c,u.mutation.getFieldMask(),Mt.now())):o.set(c.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return a.set(c,new bz(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=nu();let i=new dt((o,a)=>o-a),s=Te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Yn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(i.get(a.batchId)||Te()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=CR();u.forEach(p=>{if(!s.has(p)){const m=OR(n.get(p),r.get(p));m!==null&&d.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):$.resolve(Po());let a=-1,l=s;return o.next(c=>$.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?$.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Te())).next(u=>({batchId:a,changes:IR(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let i=Dc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Dc();return this.indexManager.getCollectionParents(e,s).next(a=>$.forEach(a,l=>{const c=function(d,p){return new oa(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,mn.newInvalidDocument(u)))});let a=Dc();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&ru(u.mutation,c,Yn.empty(),Mt.now()),cm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return $.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ei(i.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:vz(i.bundledQuery),readTime:ei(i.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(){this.overlays=new dt(ae.comparator),this.Ir=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Po();return $.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const i=Po(),s=n.length+1,o=new ae(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new dt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Po(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Po(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return $.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new G5(n,r));let s=this.Ir.get(n);s===void 0&&(s=Te(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(){this.Tr=new tn(Ft.Er),this.dr=new tn(Ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ft(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ft(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ae(new Ye([])),r=new Ft(n,e),i=new Ft(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ae(new Ye([])),r=new Ft(n,e),i=new Ft(n,e+1);let s=Te();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ft(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ae.comparator(e.key,n.key)||Re(e.wr,n.wr)}static Ar(e,n){return Re(e.wr,n.wr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new tn(Ft.Er)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new K5(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Ft(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ft(n,0),i=new Ft(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tn(Re);return n.forEach(i=>{const s=new Ft(i,0),o=new Ft(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),$.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ae.isDocumentKey(s)||(s=s.child(""));const o=new Ft(new ae(s),0);let a=new tn(Re);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),$.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return $.forEach(n.mutations,i=>{const s=new Ft(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ft(n,0),i=this.br.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e){this.Mr=e,this.docs=function(){return new dt(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(n))}getEntries(e,n){let r=$i();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mn.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=$i();const o=n.path,a=new ae(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||u5(c5(u),r)<=0||(i.has(u.key)||cm(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(e,n,r,i){fe()}Or(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Pz(this)}getSize(e){return $.resolve(this.size)}}class Pz extends wz{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e){this.persistence=e,this.Nr=new Vl(n=>rx(n),ix),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cx,this.targetCount=0,this.kr=xl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),$.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new xl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Kn(n),$.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(s).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Z0(0),this.Kr=!1,this.Kr=!0,this.$r=new kz,this.referenceDelegate=e(this),this.Ur=new Az(this),this.indexManager=new _z,this.remoteDocumentCache=function(i){return new Cz(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new yz(n),this.Gr=new Sz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ez,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Iz(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const i=new Nz(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return $.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Nz extends d5{constructor(e){super(),this.currentSequenceNumber=e}}class ux{constructor(e){this.persistence=e,this.Jr=new cx,this.Yr=null}static Zr(e){return new ux(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),$.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Xr,r=>{const i=ae.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return $.or([()=>$.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Te(),i=Te();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new hx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xF()?8:f5(wn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Dz;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(gc()<=Se.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Sa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),$.resolve()):(gc()<=Se.DEBUG&&se("QueryEngine","Query:",Sa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(gc()<=Se.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Sa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zr(n))):$.resolve())}Yi(e,n){if(GS(n))return $.resolve(null);let r=Zr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=up(n,null,"F"),r=Zr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Te(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,up(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return GS(n)||i.isEqual(me.min())?$.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?$.resolve(null):(gc()<=Se.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sa(n)),this.rs(e,o,n,l5(i,-1)).next(a=>a))})}ts(e,n){let r=new tn(ER(e));return n.forEach((i,s)=>{cm(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return gc()<=Se.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Sa(n)),this.Ji.getDocumentsMatchingQuery(e,n,Fs.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new dt(Re),this._s=new Vl(s=>rx(s),ix),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tz(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function jz(t,e,n,r){return new Mz(t,e,n,r)}async function qR(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Te();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Lz(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,p=d.keys();let m=$.resolve();return p.forEach(y=>{m=m.next(()=>u.getEntry(l,y)).next(v=>{const x=c.docVersions.get(y);Le(x!==null),v.version.compareTo(x)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Te();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function KR(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Vz(t,e){const n=ge(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((u,d)=>{const p=i.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,u.addedDocuments,d)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(rn.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(d,m),function(v,x,w){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,m,u)&&a.push(n.Ur.updateTargetData(s,m))});let l=$i(),c=Te();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Fz(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(me.min())){const u=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return $.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function Fz(t,e,n){let r=Te(),i=Te();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=$i();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):se("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function Uz(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bz(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,$.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new vs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Wv(t,e,n){const r=ge(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!yh(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function sE(t,e,n){const r=ge(t);let i=me.min(),s=Te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=ge(l),p=d._s.get(u);return p!==void 0?$.resolve(d.os.get(p)):d.Ur.getTargetData(c,u)}(r,o,Zr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:me.min(),n?s:Te())).next(a=>(zz(r,R5(e),a),{documents:a,Ts:s})))}function zz(t,e,n){let r=t.us.get(e)||me.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class oE{constructor(){this.activeTargetIds=L5()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $z{constructor(){this.so=new oE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new oE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wz{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sd=null;function Bg(){return Sd===null?Sd=function(){return 268435456+Math.round(2147483648*Math.random())}():Sd++,"0x"+Sd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class Kz extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Bg(),l=this.xo(n,r.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(u=>(se("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw gl("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ll}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=Hz[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Bg();return new Promise((o,a)=>{const l=new aR;l.setWithCredentials(!0),l.listenOnce(lR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ff.NO_ERROR:const u=l.getResponseJson();se(cn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case ff.TIMEOUT:se(cn,`RPC '${e}' ${s} timed out`),a(new Z(B.DEADLINE_EXCEEDED,"Request time out"));break;case ff.HTTP_ERROR:const d=l.getStatus();if(se(cn,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(x){const w=x.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(w)>=0?w:B.UNKNOWN}(m.status);a(new Z(y,m.message))}else a(new Z(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Z(B.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{se(cn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);se(cn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Bg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hR(),a=uR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");se(cn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);let p=!1,m=!1;const y=new qz({Io:x=>{m?se(cn,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(p||(se(cn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),p=!0),se(cn,`RPC '${e}' stream ${i} sending:`,x),d.send(x))},To:()=>d.close()}),v=(x,w,b)=>{x.listen(w,E=>{try{b(E)}catch(I){setTimeout(()=>{throw I},0)}})};return v(d,Nc.EventType.OPEN,()=>{m||(se(cn,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),v(d,Nc.EventType.CLOSE,()=>{m||(m=!0,se(cn,`RPC '${e}' stream ${i} transport closed`),y.So())}),v(d,Nc.EventType.ERROR,x=>{m||(m=!0,gl(cn,`RPC '${e}' stream ${i} transport errored:`,x),y.So(new Z(B.UNAVAILABLE,"The operation could not be completed")))}),v(d,Nc.EventType.MESSAGE,x=>{var w;if(!m){const b=x.data[0];Le(!!b);const E=b,I=E.error||((w=E[0])===null||w===void 0?void 0:w.error);if(I){se(cn,`RPC '${e}' stream ${i} received error:`,I);const C=I.status;let M=function(k){const P=kt[k];if(P!==void 0)return jR(P)}(C),S=I.message;M===void 0&&(M=B.INTERNAL,S="Unknown error status: "+C+" with message "+I.message),m=!0,y.So(new Z(M,S)),d.close()}else se(cn,`RPC '${e}' stream ${i} received:`,b),y.bo(b)}}),v(a,cR.STAT_EVENT,x=>{x.stat===Ov.PROXY?se(cn,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Ov.NOPROXY&&se(cn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function zg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t){return new rz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new GR(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(zi(n.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Z(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Gz extends YR{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=oz(this.serializer,e),r=function(s){if(!("targetChange"in s))return me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?ei(o.readTime):me.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=$v(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Vv(l)?{documents:cz(s,l)}:{query:uz(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=FR(s,o.resumeToken);const c=Uv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(me.min())>0){a.readTime=dp(s,o.snapshotVersion.toTimestamp());const c=Uv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=dz(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=$v(this.serializer),n.removeTarget=e,this.a_(n)}}class Yz extends YR{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Le(!!e.streamToken),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=lz(e.writeResults,e.commitTime),r=ei(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=$v(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>az(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Bv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Z(B.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Bv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Xz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zi(n),this.D_=!1):se("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{aa(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ge(l);c.L_.add(4),await xh(c),c.q_.set("Unknown"),c.L_.delete(4),await mm(c)}(this))})}),this.q_=new Xz(r,i)}}async function mm(t){if(aa(t))for(const e of t.B_)await e(!0)}async function xh(t){for(const e of t.B_)await e(!1)}function QR(t,e){const n=ge(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),mx(n)?px(n):Fl(n).r_()&&fx(n,e))}function dx(t,e){const n=ge(t),r=Fl(n);n.N_.delete(e),r.r_()&&XR(n,e),n.N_.size===0&&(r.r_()?r.o_():aa(n)&&n.q_.set("Unknown"))}function fx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fl(t).A_(e)}function XR(t,e){t.Q_.xe(e),Fl(t).R_(e)}function px(t){t.Q_=new Z5({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Fl(t).start(),t.q_.v_()}function mx(t){return aa(t)&&!Fl(t).n_()&&t.N_.size>0}function aa(t){return ge(t).L_.size===0}function JR(t){t.Q_=void 0}async function Zz(t){t.q_.set("Online")}async function e3(t){t.N_.forEach((e,n)=>{fx(t,e)})}async function t3(t,e){JR(t),mx(t)?(t.q_.M_(e),px(t)):t.q_.set("Unknown")}async function n3(t,e,n){if(t.q_.set("Online"),e instanceof VR&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await fp(t,r)}else if(e instanceof gf?t.Q_.Ke(e):e instanceof LR?t.Q_.He(e):t.Q_.We(e),!n.isEqual(me.min()))try{const r=await KR(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(rn.EMPTY_BYTE_STRING,u.snapshotVersion)),XR(s,l);const d=new vs(u.target,l,c,u.sequenceNumber);fx(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await fp(t,r)}}async function fp(t,e,n){if(!yh(e))throw e;t.L_.add(1),await xh(t),t.q_.set("Offline"),n||(n=()=>KR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await mm(t)})}function ZR(t,e){return e().catch(n=>fp(t,n,e))}async function gm(t){const e=ge(t),n=Bs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;r3(e);)try{const i=await Uz(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,i3(e,i)}catch(i){await fp(e,i)}eN(e)&&tN(e)}function r3(t){return aa(t)&&t.O_.length<10}function i3(t,e){t.O_.push(e);const n=Bs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function eN(t){return aa(t)&&!Bs(t).n_()&&t.O_.length>0}function tN(t){Bs(t).start()}async function s3(t){Bs(t).p_()}async function o3(t){const e=Bs(t);for(const n of t.O_)e.m_(n.mutations)}async function a3(t,e,n){const r=t.O_.shift(),i=ox.from(r,e,n);await ZR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await gm(t)}async function l3(t,e){e&&Bs(t).V_&&await async function(r,i){if(function(o){return Q5(o)&&o!==B.ABORTED}(i.code)){const s=r.O_.shift();Bs(r).s_(),await ZR(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await gm(r)}}(t,e),eN(t)&&tN(t)}async function lE(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=aa(n);n.L_.add(3),await xh(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await mm(n)}async function c3(t,e){const n=ge(t);e?(n.L_.delete(2),await mm(n)):e||(n.L_.add(2),await xh(n),n.q_.set("Unknown"))}function Fl(t){return t.K_||(t.K_=function(n,r,i){const s=ge(n);return s.w_(),new Gz(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Zz.bind(null,t),Ro:e3.bind(null,t),mo:t3.bind(null,t),d_:n3.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),mx(t)?px(t):t.q_.set("Unknown")):(await t.K_.stop(),JR(t))})),t.K_}function Bs(t){return t.U_||(t.U_=function(n,r,i){const s=ge(n);return s.w_(),new Yz(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:s3.bind(null,t),mo:l3.bind(null,t),f_:o3.bind(null,t),g_:a3.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await gm(t)):(await t.U_.stop(),t.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new gx(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yx(t,e){if(zi("AsyncQueue",`${e}: ${t}`),yh(t))return new Z(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=Dc(),this.sortedSet=new dt(this.comparator)}static emptySet(e){return new rl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof rl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new rl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.W_=new dt(ae.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class wl{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new wl(e,n,rl.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class h3{constructor(){this.queries=uE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ge(n),s=i.queries;i.queries=uE(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new Z(B.ABORTED,"Firestore shutting down"))}}function uE(){return new Vl(t=>SR(t),lm)}async function vx(t,e){const n=ge(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new u3,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=yx(o,`Initialization of query '${Sa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&xx(n)}async function _x(t,e){const n=ge(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function d3(t,e){const n=ge(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&xx(n)}function f3(t,e,n){const r=ge(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function xx(t){t.Y_.forEach(e=>{e.next()})}var Hv,hE;(hE=Hv||(Hv={})).ea="default",hE.Cache="cache";class wx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new wl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=wl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Hv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.key=e}}class rN{constructor(e){this.key=e}}class p3{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Te(),this.mutatedKeys=Te(),this.Aa=ER(e),this.Ra=new rl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new cE,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const p=i.get(u),m=cm(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;p&&m?p.data.isEqual(m.data)?y!==v&&(r.track({type:3,doc:m}),x=!0):this.ga(p,m)||(r.track({type:2,doc:m}),x=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),x=!0):p&&!m&&(r.track({type:1,doc:p}),x=!0,(l||c)&&(a=!0)),x&&(m?(o=o.add(m),s=v?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,d)=>function(m,y){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return v(m)-v(y)}(u.type,d.type)||this.Aa(u.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new wl(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new cE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new rN(r))}),this.da.forEach(r=>{e.has(r)||n.push(new nN(r))}),n}ba(e){this.Ta=e.Ts,this.da=Te();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return wl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class m3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class g3{constructor(e){this.key=e,this.va=!1}}class y3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Vl(a=>SR(a),lm),this.Ma=new Map,this.xa=new Set,this.Oa=new dt(ae.comparator),this.Na=new Map,this.La=new cx,this.Ba={},this.ka=new Map,this.qa=xl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function v3(t,e,n=!0){const r=cN(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await iN(r,e,n,!0),i}async function _3(t,e){const n=cN(t);await iN(n,e,!0,!1)}async function iN(t,e,n,r){const i=await Bz(t.localStore,Zr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await x3(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&QR(t.remoteStore,i),a}async function x3(t,e,n,r,i){t.Ka=(d,p,m)=>async function(v,x,w,b){let E=x.view.ma(w);E.ns&&(E=await sE(v.localStore,x.query,!1).then(({documents:S})=>x.view.ma(S,E)));const I=b&&b.targetChanges.get(x.targetId),C=b&&b.targetMismatches.get(x.targetId)!=null,M=x.view.applyChanges(E,v.isPrimaryClient,I,C);return fE(v,x.targetId,M.wa),M.snapshot}(t,d,p,m);const s=await sE(t.localStore,e,!0),o=new p3(e,s.Ts),a=o.ma(s.documents),l=_h.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);fE(t,n,c.wa);const u=new m3(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function w3(t,e,n){const r=ge(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!lm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Wv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dx(r.remoteStore,i.targetId),qv(r,i.targetId)}).catch(gh)):(qv(r,i.targetId),await Wv(r.localStore,i.targetId,!0))}async function b3(t,e){const n=ge(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dx(n.remoteStore,r.targetId))}async function T3(t,e,n){const r=A3(t);try{const i=await function(o,a){const l=ge(o),c=Mt.now(),u=a.reduce((m,y)=>m.add(y.key),Te());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=$i(),v=Te();return l.cs.getEntries(m,u).next(x=>{y=x,y.forEach((w,b)=>{b.isValidDocument()||(v=v.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(x=>{d=x;const w=[];for(const b of a){const E=H5(b,d.get(b.key).overlayedDocument);E!=null&&w.push(new Qs(b.key,E,gR(E.value.mapValue),Cn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,w,a)}).next(x=>{p=x;const w=x.applyToLocalDocumentSet(d,v);return l.documentOverlayCache.saveOverlays(m,x.batchId,w)})}).then(()=>({batchId:p.batchId,changes:IR(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new dt(Re)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await wh(r,i.changes),await gm(r.remoteStore)}catch(i){const s=yx(i,"Failed to persist write");n.reject(s)}}async function sN(t,e){const n=ge(t);try{const r=await Vz(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Le(o.va):i.removedDocuments.size>0&&(Le(o.va),o.va=!1))}),await wh(n,r,e)}catch(r){await gh(r)}}function dE(t,e,n){const r=ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ge(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&xx(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function S3(t,e,n){const r=ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new dt(ae.comparator);o=o.insert(s,mn.newNoDocument(s,me.min()));const a=Te().add(s),l=new fm(me.min(),new Map,new dt(Re),o,a);await sN(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),bx(r)}else await Wv(r.localStore,e,!1).then(()=>qv(r,e,n)).catch(gh)}async function E3(t,e){const n=ge(t),r=e.batch.batchId;try{const i=await Lz(n.localStore,e);aN(n,r,null),oN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wh(n,i)}catch(i){await gh(i)}}async function k3(t,e,n){const r=ge(t);try{const i=await function(o,a){const l=ge(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Le(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);aN(r,e,n),oN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wh(r,i)}catch(i){await gh(i)}}function oN(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function aN(t,e,n){const r=ge(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function qv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||lN(t,r)})}function lN(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(dx(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),bx(t))}function fE(t,e,n){for(const r of n)r instanceof nN?(t.La.addReference(r.key,e),I3(t,r)):r instanceof rN?(se("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||lN(t,r.key)):fe()}function I3(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(se("SyncEngine","New document in limbo: "+n),t.xa.add(r),bx(t))}function bx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ae(Ye.fromString(e)),r=t.qa.next();t.Na.set(r,new g3(n)),t.Oa=t.Oa.insert(n,r),QR(t.remoteStore,new vs(Zr(am(n.path)),r,"TargetPurposeLimboResolution",Z0.oe))}}async function wh(t,e,n){const r=ge(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){i.push(c);const d=hx.Wi(l.targetId,c);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const u=ge(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>$.forEach(c,p=>$.forEach(p.$i,m=>u.persistence.referenceDelegate.addReference(d,p.targetId,m)).next(()=>$.forEach(p.Ui,m=>u.persistence.referenceDelegate.removeReference(d,p.targetId,m)))))}catch(d){if(!yh(d))throw d;se("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const m=u.os.get(p),y=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(y);u.os=u.os.insert(p,v)}}}(r.localStore,s))}async function C3(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await qR(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new Z(B.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wh(n,r.hs)}}function P3(t,e){const n=ge(t),r=n.Na.get(e);if(r&&r.va)return Te().add(r.key);{let i=Te();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function cN(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S3.bind(null,e),e.Ca.d_=d3.bind(null,e.eventManager),e.Ca.$a=f3.bind(null,e.eventManager),e}function A3(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=E3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k3.bind(null,e),e}class pp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return jz(this.persistence,new Oz,e.initialUser,this.serializer)}Ga(e){return new Rz(ux.Zr,this.serializer)}Wa(e){return new $z}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pp.provider={build:()=>new pp};class Kv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=C3.bind(null,this.syncEngine),await c3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new h3}()}createDatastore(e){const n=pm(e.databaseInfo.databaseId),r=function(s){return new Kz(s)}(e.databaseInfo);return function(s,o,a,l){return new Qz(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Jz(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>dE(this.syncEngine,n,0),function(){return aE.D()?new aE:new Wz}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const d=new y3(i,s,o,a,l,c);return u&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ge(i);se("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await xh(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Kv.provider={build:()=>new Kv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=fn.UNAUTHENTICATED,this.clientId=fR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{se("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function $g(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await qR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function pE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await N3(t);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>lE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>lE(e.remoteStore,i)),t._onlineComponents=e}async function N3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await $g(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;gl("Error using user provided cache. Falling back to memory cache: "+n),await $g(t,new pp)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await $g(t,new pp);return t._offlineComponents}async function uN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await pE(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await pE(t,new Kv))),t._onlineComponents}function D3(t){return uN(t).then(e=>e.syncEngine)}async function mp(t){const e=await uN(t),n=e.eventManager;return n.onListen=v3.bind(null,e.syncEngine),n.onUnlisten=w3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=b3.bind(null,e.syncEngine),n}function O3(t,e,n={}){const r=new Ni;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new Tx({next:p=>{u.Za(),o.enqueueAndForget(()=>_x(s,d));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new Z(B.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new Z(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new wx(am(a.path),u,{includeMetadataChanges:!0,_a:!0});return vx(s,d)}(await mp(t),t.asyncQueue,e,n,r)),r.promise}function M3(t,e,n={}){const r=new Ni;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new Tx({next:p=>{u.Za(),o.enqueueAndForget(()=>_x(s,d)),p.fromCache&&l.source==="server"?c.reject(new Z(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new wx(a,u,{includeMetadataChanges:!0,_a:!0});return vx(s,d)}(await mp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(t,e,n){if(!n)throw new Z(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function j3(t,e,n,r){if(e===!0&&r===!0)throw new Z(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gE(t){if(!ae.isDocumentKey(t))throw new Z(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yE(t){if(ae.isDocumentKey(t))throw new Z(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ym(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function vn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ym(t);throw new Z(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function L3(t,e){if(e<=0)throw new Z(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}j3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ZB;switch(r.type){case"firstParty":return new r5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=mE.get(n);r&&(se("ComponentProvider","Removing Datastore"),mE.delete(n),r.terminate())}(this),Promise.resolve()}}function V3(t,e,n,r={}){var i;const s=(t=vn(t,bh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&gl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=fn.MOCK_USER;else{a=_A(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Z(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new fn(c)}t._authCredentials=new e5(new dR(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ui(this.firestore,e,this._query)}}class _n{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _n(this.firestore,e,this._key)}}class Os extends ui{constructor(e,n,r){super(e,n,am(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _n(this.firestore,null,new ae(e))}withConverter(e){return new Os(this.firestore,e,this._path)}}function Jt(t,e,...n){if(t=Be(t),Sx("collection","path",e),t instanceof bh){const r=Ye.fromString(e,...n);return yE(r),new Os(t,null,r)}{if(!(t instanceof _n||t instanceof Os))throw new Z(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return yE(r),new Os(t.firestore,null,r)}}function iu(t,e){if(t=vn(t,bh),Sx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Z(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ui(t,null,function(r){return new oa(Ye.emptyPath(),r)}(e))}function He(t,e,...n){if(t=Be(t),arguments.length===1&&(e=fR.newId()),Sx("doc","path",e),t instanceof bh){const r=Ye.fromString(e,...n);return gE(r),new _n(t,null,new ae(r))}{if(!(t instanceof _n||t instanceof Os))throw new Z(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return gE(r),new _n(t.firestore,t instanceof Os?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new GR(this,"async_queue_retry"),this.Vu=()=>{const r=zg();r&&se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=zg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=zg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ni;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yh(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw zi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=gx.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function xE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class oi extends bh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new _E,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _E(e),this._firestoreClient=void 0,await e}}}function F3(t,e){const n=typeof t=="object"?t:z0(),r=typeof t=="string"?t:"(default)",i=nm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=gA("firestore");s&&V3(i,...s)}return i}function Th(t){if(t._terminated)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||U3(t),t._firestoreClient}function U3(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new g5(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,hN(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new R3(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bl(rn.fromBase64String(e))}catch(n){throw new Z(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bl(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=/^__.*__$/;class z3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new vh(e,this.data,n,this.fieldTransforms)}}class dN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Qs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function fN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class Ix{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ix(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return gp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(fN(this.Cu)&&B3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class $3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pm(e)}Qu(e,n,r,i=!1){return new Ix({Cu:e,methodName:n,qu:r,path:Qt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Eh(t){const e=t._freezeSettings(),n=pm(t._databaseId);return new $3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Cx(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Ax("Data must be an object, but it was:",o,r);const a=gN(r,o);let l,c;if(s.merge)l=new Yn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const p=Gv(e,d,n);if(!o.contains(p))throw new Z(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);vN(u,p)||u.push(p)}l=new Yn(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new z3(new jn(a),l,c)}class _m extends vm{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _m}}class Px extends vm{_toFieldTransform(e){return new B5(e.path,new zu)}isEqual(e){return e instanceof Px}}function pN(t,e,n,r){const i=t.Qu(1,e,n);Ax("Data must be an object, but it was:",i,r);const s=[],o=jn.empty();sa(r,(l,c)=>{const u=Rx(e,l,n);c=Be(c);const d=i.Nu(u);if(c instanceof _m)s.push(u);else{const p=kh(c,d);p!=null&&(s.push(u),o.set(u,p))}});const a=new Yn(s);return new dN(o,a,i.fieldTransforms)}function mN(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Gv(e,r,n)],l=[i];if(s.length%2!=0)throw new Z(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Gv(e,s[p])),l.push(s[p+1]);const c=[],u=jn.empty();for(let p=a.length-1;p>=0;--p)if(!vN(c,a[p])){const m=a[p];let y=l[p];y=Be(y);const v=o.Nu(m);if(y instanceof _m)c.push(m);else{const x=kh(y,v);x!=null&&(c.push(m),u.set(m,x))}}const d=new Yn(c);return new dN(u,d,o.fieldTransforms)}function W3(t,e,n,r=!1){return kh(n,t.Qu(r?4:3,e))}function kh(t,e){if(yN(t=Be(t)))return Ax("Unsupported field value:",e,t),gN(t,e);if(t instanceof vm)return function(r,i){if(!fN(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=kh(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return V5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Mt.fromDate(r);return{timestampValue:dp(i.serializer,s)}}if(r instanceof Mt){const s=new Mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dp(i.serializer,s)}}if(r instanceof Ex)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bl)return{bytesValue:FR(i.serializer,r._byteString)};if(r instanceof _n){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof kx)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return sx(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ym(r)}`)}(t,e)}function gN(t,e){const n={};return pR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sa(t,(r,i)=>{const s=kh(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function yN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Mt||t instanceof Ex||t instanceof bl||t instanceof _n||t instanceof vm||t instanceof kx)}function Ax(t,e,n){if(!yN(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=ym(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Gv(t,e,n){if((e=Be(e))instanceof Sh)return e._internalPath;if(typeof e=="string")return Rx(t,e);throw gp("Field path arguments must be of type string or ",t,!1,void 0,n)}const H3=new RegExp("[~\\*/\\[\\]]");function Rx(t,e,n){if(e.search(H3)>=0)throw gp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Sh(...e.split("."))._internalPath}catch{throw gp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Z(B.INVALID_ARGUMENT,a+t+l)}function vN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new q3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(xm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class q3 extends _N{data(){return super.data()}}function xm(t,e){return typeof e=="string"?Rx(t,e):e instanceof Sh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nx{}class Dx extends Nx{}function ti(t,e,...n){let r=[];e instanceof Nx&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Ox).length,a=s.filter(l=>l instanceof wm).length;if(o>1||o>0&&a>0)throw new Z(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class wm extends Dx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new wm(e,n,r)}_apply(e){const n=this._parse(e);return wN(e._query,n),new ui(e.firestore,e.converter,Fv(e._query,n))}_parse(e){const n=Eh(e.firestore);return function(s,o,a,l,c,u,d){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new Z(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){bE(d,u);const m=[];for(const y of d)m.push(wE(l,s,y));p={arrayValue:{values:m}}}else p=wE(l,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||bE(d,u),p=W3(a,o,d,u==="in"||u==="not-in");return Pt.create(c,u,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Wg(t,e,n){const r=e,i=xm("where",t);return wm._create(i,r,n)}class Ox extends Nx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ox(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Rr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)wN(o,l),o=Fv(o,l)}(e._query,n),new ui(e.firestore,e.converter,Fv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mx extends Dx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Mx(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Z(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Z(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bu(s,o)}(e._query,this._field,this._direction);return new ui(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new oa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Jo(t,e="asc"){const n=e,r=xm("orderBy",t);return Mx._create(r,n)}class jx extends Dx{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new jx(e,n,r)}_apply(e){return new ui(e.firestore,e.converter,up(e._query,this._limit,this._limitType))}}function Yv(t){return L3("limit",t),jx._create("limit",t,"F")}function wE(t,e,n){if(typeof(n=Be(n))=="string"){if(n==="")throw new Z(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TR(e)&&n.indexOf("/")!==-1)throw new Z(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ye.fromString(n));if(!ae.isDocumentKey(r))throw new Z(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zS(t,new ae(r))}if(n instanceof _n)return zS(t,n._key);throw new Z(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ym(n)}.`)}function bE(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wN(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class K3{convertValue(e,n="none"){switch(Xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return sa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>wt(o.doubleValue));return new kx(s)}convertGeoPoint(e){return new Ex(wt(e.latitude),wt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=tx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vu(e));default:return null}}convertTimestamp(e){const n=Us(e);return new Mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ye.fromString(e);Le(HR(r));const i=new Fu(r.get(1),r.get(3)),s=new ae(r.popFirst(5));return i.isEqual(n)||zi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bN extends _N{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(xm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class yf extends bN{data(e={}){return super.data(e)}}class TN{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Mc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yf(this._firestore,this._userDataWriter,r.key,r,new Mc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new yf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new yf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:G3(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function G3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t){t=vn(t,_n);const e=vn(t.firestore,oi);return O3(Th(e),t._key).then(n=>SN(e,t,n))}class Vx extends K3{constructor(e){super(),this.firestore=e}convertBytes(e){return new bl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,n)}}function Y3(t){t=vn(t,ui);const e=vn(t.firestore,oi),n=Th(e),r=new Vx(e);return xN(t._query),M3(n,t._query).then(i=>new TN(e,r,t,i))}function Tl(t,e,n){t=vn(t,_n);const r=vn(t.firestore,oi),i=Lx(t.converter,e,n);return Ih(r,[Cx(Eh(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Cn.none())])}function bm(t,e,n,...r){t=vn(t,_n);const i=vn(t.firestore,oi),s=Eh(i);let o;return o=typeof(e=Be(e))=="string"||e instanceof Sh?mN(s,"updateDoc",t._key,e,n,r):pN(s,"updateDoc",t._key,e),Ih(i,[o.toMutation(t._key,Cn.exists(!0))])}function Fx(t){return Ih(vn(t.firestore,oi),[new dm(t._key,Cn.none())])}function Tm(t,e){const n=vn(t.firestore,oi),r=He(t),i=Lx(t.converter,e);return Ih(n,[Cx(Eh(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Cn.exists(!1))]).then(()=>r)}function Zt(t,...e){var n,r,i;t=Be(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||xE(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(xE(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,c,u;if(t instanceof _n)c=vn(t.firestore,oi),u=am(t._key.path),l={next:d=>{e[o]&&e[o](SN(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=vn(t,ui);c=vn(d.firestore,oi),u=d._query;const p=new Vx(c);l={next:m=>{e[o]&&e[o](new TN(c,p,d,m))},error:e[o+1],complete:e[o+2]},xN(t._query)}return function(p,m,y,v){const x=new Tx(v),w=new wx(m,x,y);return p.asyncQueue.enqueueAndForget(async()=>vx(await mp(p),w)),()=>{x.Za(),p.asyncQueue.enqueueAndForget(async()=>_x(await mp(p),w))}}(Th(c),u,a,l)}function Ih(t,e){return function(r,i){const s=new Ni;return r.asyncQueue.enqueueAndForget(async()=>T3(await D3(r),i,s)),s.promise}(Th(t),e)}function SN(t,e,n){const r=n.docs.get(e._key),i=new Vx(t);return new bN(t,i,e._key,r,new Mc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Eh(e)}set(e,n,r){this._verifyNotCommitted();const i=Hg(e,this._firestore),s=Lx(i.converter,n,r),o=Cx(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Cn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Hg(e,this._firestore);let o;return o=typeof(n=Be(n))=="string"||n instanceof Sh?mN(this._dataReader,"WriteBatch.update",s._key,n,r,i):pN(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Cn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Hg(e,this._firestore);return this._mutations=this._mutations.concat(new dm(n._key,Cn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hg(t,e){if((t=Be(t)).firestore!==e)throw new Z(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function zn(){return new Px("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(t){return Th(t=vn(t,oi)),new Q3(t,e=>Ih(t,e))}(function(e,n=!0){(function(i){Ll=i})(ia),qo(new Vs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new oi(new t5(r.getProvider("auth-internal")),new s5(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Z(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fu(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Qr(LS,"4.7.3",e),Qr(LS,"4.7.3","esm2017")})();var X3="firebase",J3="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qr(X3,J3,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="firebasestorage.googleapis.com",IN="storageBucket",Z3=2*60*1e3,e6=10*60*1e3,t6=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft extends li{constructor(e,n,r=0){super(qg(e),`Firebase Storage: ${n} (${qg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ft.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return qg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var nt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(nt||(nt={}));function qg(t){return"storage/"+t}function Ux(){const t="An unknown error occurred, please check the error payload for server response.";return new ft(nt.UNKNOWN,t)}function n6(t){return new ft(nt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function r6(t){return new ft(nt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function i6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ft(nt.UNAUTHENTICATED,t)}function s6(){return new ft(nt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function o6(t){return new ft(nt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function CN(){return new ft(nt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function PN(){return new ft(nt.CANCELED,"User canceled the upload/download.")}function a6(t){return new ft(nt.INVALID_URL,"Invalid URL '"+t+"'.")}function l6(t){return new ft(nt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function c6(){return new ft(nt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+IN+"' property when initializing the app?")}function AN(){return new ft(nt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function u6(){return new ft(nt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function h6(){return new ft(nt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function d6(t){return new ft(nt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Qv(t){return new ft(nt.INVALID_ARGUMENT,t)}function RN(){return new ft(nt.APP_DELETED,"The Firebase app was deleted.")}function f6(t){return new ft(nt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function su(t,e){return new ft(nt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function yc(t){throw new ft(nt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Qn.makeFromUrl(e,n)}catch{return new Qn(e,"")}if(r.path==="")return r;throw l6(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(I){I.path_=decodeURIComponent(I.path)}const u="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${d}/${u}/b/${i}/o${p}`,"i"),y={bucket:1,path:3},v=n===kN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",w=new RegExp(`^https?://${v}/${i}/${x}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:m,indices:y,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let I=0;I<E.length;I++){const C=E[I],M=C.regex.exec(e);if(M){const S=M[C.indices.bucket];let _=M[C.indices.path];_||(_=""),r=new Qn(S,_),C.postModify(r);break}}if(r==null)throw a6(e);return r}}class p6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...x){c||(c=!0,e.apply(null,x))}function d(x){i=setTimeout(()=>{i=null,t(m,l())},x)}function p(){s&&clearTimeout(s)}function m(x,...w){if(c){p();return}if(x){p(),u.call(null,x,...w);return}if(l()||o){p(),u.call(null,x,...w);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,d(E)}let y=!1;function v(x){y||(y=!0,p(),!c&&(i!==null?(x||(a=2),clearTimeout(i),d(0)):x||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,v(!0)},n),v}function g6(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(t){return t!==void 0}function v6(t){return typeof t=="function"}function _6(t){return typeof t=="object"&&!Array.isArray(t)}function Sm(t){return typeof t=="string"||t instanceof String}function TE(t){return Bx()&&t instanceof Blob}function Bx(){return typeof Blob<"u"}function SE(t,e,n,r){if(r<e)throw Qv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Qv(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function NN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Lo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Lo||(Lo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{constructor(e,n,r,i,s,o,a,l,c,u,d,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=d,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ed(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Lo.NO_ERROR,l=s.getStatus();if(!a||DN(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Lo.ABORT;r(!1,new Ed(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Ed(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());y6(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Ux();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?RN():PN();o(l)}else{const l=CN();o(l)}};this.canceled_?n(!1,new Ed(!1,null,!0)):this.backoffId_=m6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&g6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ed{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function w6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function b6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function T6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function S6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function E6(t,e,n,r,i,s,o=!0){const a=NN(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return T6(c,e),w6(c,n),b6(c,s),S6(c,r),new x6(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function I6(...t){const e=k6();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Bx())return new Blob(t);throw new ft(nt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function C6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t){if(typeof atob>"u")throw d6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Kg{constructor(e,n){this.data=e,this.contentType=n||null}}function A6(t,e){switch(t){case Kr.RAW:return new Kg(ON(e));case Kr.BASE64:case Kr.BASE64URL:return new Kg(MN(t,e));case Kr.DATA_URL:return new Kg(N6(e),D6(e))}throw Ux()}function ON(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function R6(t){let e;try{e=decodeURIComponent(t)}catch{throw su(Kr.DATA_URL,"Malformed data URL.")}return ON(e)}function MN(t,e){switch(t){case Kr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw su(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Kr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw su(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=P6(e)}catch(i){throw i.message.includes("polyfill")?i:su(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class jN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw su(Kr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=O6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function N6(t){const e=new jN(t);return e.base64?MN(Kr.BASE64,e.rest):R6(e.rest)}function D6(t){return new jN(t).contentType}function O6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n){let r=0,i="";TE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(TE(this.data_)){const r=this.data_,i=C6(r,e,n);return i===null?null:new Si(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Si(r,!0)}}static getBlob(...e){if(Bx()){const n=e.map(r=>r instanceof Si?r.data_:r);return new Si(I6.apply(null,n))}else{const n=e.map(o=>Sm(o)?A6(Kr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Si(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){let e;try{e=JSON.parse(t)}catch{return null}return _6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function j6(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function VN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(t,e){return e}class Sn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||L6}}let kd=null;function V6(t){return!Sm(t)||t.length<2?t:VN(t)}function zx(){if(kd)return kd;const t=[];t.push(new Sn("bucket")),t.push(new Sn("generation")),t.push(new Sn("metageneration")),t.push(new Sn("name","fullPath",!0));function e(s,o){return V6(o)}const n=new Sn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Sn("size");return i.xform=r,t.push(i),t.push(new Sn("timeCreated")),t.push(new Sn("updated")),t.push(new Sn("md5Hash",null,!0)),t.push(new Sn("cacheControl",null,!0)),t.push(new Sn("contentDisposition",null,!0)),t.push(new Sn("contentEncoding",null,!0)),t.push(new Sn("contentLanguage",null,!0)),t.push(new Sn("contentType",null,!0)),t.push(new Sn("metadata","customMetadata",!0)),kd=t,kd}function F6(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Qn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function U6(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return F6(r,t),r}function FN(t,e,n){const r=LN(e);return r===null?null:U6(t,r,n)}function B6(t,e,n,r){const i=LN(e);if(i===null||!Sm(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,d=t.fullPath,p="/b/"+o(u)+"/o/"+o(d),m=Ul(p,n,r),y=NN({alt:"media",token:c});return m+y})[0]}function UN(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class la{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t){if(!t)throw Ux()}function $x(t,e){function n(r,i){const s=FN(t,i,e);return Di(s!==null),s}return n}function z6(t,e){function n(r,i){const s=FN(t,i,e);return Di(s!==null),B6(s,i,t.host,t._protocol)}return n}function Ch(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=s6():i=i6():n.getStatus()===402?i=r6(t.bucket):n.getStatus()===403?i=o6(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Wx(t){const e=Ch(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=n6(t.path)),s.serverResponse=i.serverResponse,s}return n}function $6(t,e,n){const r=e.fullServerUrl(),i=Ul(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new la(i,s,$x(t,n),o);return a.errorHandler=Wx(e),a}function W6(t,e,n){const r=e.fullServerUrl(),i=Ul(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new la(i,s,z6(t,n),o);return a.errorHandler=Wx(e),a}function H6(t,e){const n=e.fullServerUrl(),r=Ul(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new la(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Wx(e),a}function q6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function BN(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=q6(null,e)),r}function zN(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let I=0;I<2;I++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=BN(e,r,i),u=UN(c,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Si.getBlob(d,r,p);if(m===null)throw AN();const y={name:c.fullPath},v=Ul(s,t.host,t._protocol),x="POST",w=t.maxUploadRetryTime,b=new la(v,x,$x(t,n),w);return b.urlParams=y,b.headers=o,b.body=m.uploadData(),b.errorHandler=Ch(e),b}class yp{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Hx(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Di(!1)}return Di(!!n&&(e||["active"]).indexOf(n)!==-1),n}function K6(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=BN(e,r,i),a={name:o.fullPath},l=Ul(s,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=UN(o,n),p=t.maxUploadRetryTime;function m(v){Hx(v);let x;try{x=v.getResponseHeader("X-Goog-Upload-URL")}catch{Di(!1)}return Di(Sm(x)),x}const y=new la(l,c,m,p);return y.urlParams=a,y.headers=u,y.body=d,y.errorHandler=Ch(e),y}function G6(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const u=Hx(c,["active","final"]);let d=null;try{d=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Di(!1)}d||Di(!1);const p=Number(d);return Di(!isNaN(p)),new yp(p,r.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,l=new la(n,o,s,a);return l.headers=i,l.errorHandler=Ch(e),l}const EE=256*1024;function Y6(t,e,n,r,i,s,o,a){const l=new yp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw u6();const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,p=d+u;let m="";u===0?m="finalize":c===u?m="upload, finalize":m="upload";const y={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},v=r.slice(d,p);if(v===null)throw AN();function x(I,C){const M=Hx(I,["active","final"]),S=l.current+u,_=r.size();let k;return M==="final"?k=$x(e,s)(I,C):k=null,new yp(S,_,M==="final",k)}const w="POST",b=e.maxUploadRetryTime,E=new la(n,w,x,b);return E.headers=y,E.body=v.uploadData(),E.progressCallback=a||null,E.errorHandler=Ch(t),E}const On={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Gg(t){switch(t){case"running":case"pausing":case"canceling":return On.RUNNING;case"paused":return On.PAUSED;case"success":return On.SUCCESS;case"canceled":return On.CANCELED;case"error":return On.ERROR;default:return On.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,n,r){if(v6(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class X6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Lo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Lo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Lo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw yc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class J6 extends X6{initXhr(){this.xhr_.responseType="text"}}function fs(){return new J6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=zx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(nt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(DN(i.status,[]))if(s)i=CN();else{this.sleepTime=Math.max(this.sleepTime*2,t6),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(nt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=K6(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,fs,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=G6(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,fs,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=EE*this._chunkMultiplier,n=new yp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=Y6(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,fs,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){EE*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=$6(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,fs,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=zN(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,fs,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=PN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Gg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new Q6(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Gg(this._state)){case On.SUCCESS:wa(this._resolve.bind(null,this.snapshot))();break;case On.CANCELED:case On.ERROR:const n=this._reject;wa(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Gg(this._state)){case On.RUNNING:case On.PAUSED:e.next&&wa(e.next.bind(e,this.snapshot))();break;case On.SUCCESS:e.complete&&wa(e.complete.bind(e))();break;case On.CANCELED:case On.ERROR:e.error&&wa(e.error.bind(e,this._error))();break;default:e.error&&wa(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this._service=e,n instanceof Qn?this._location=n:this._location=Qn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zo(e,n)}get root(){const e=new Qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VN(this._location.path)}get storage(){return this._service}get parent(){const e=M6(this._location.path);if(e===null)return null;const n=new Qn(this._location.bucket,e);return new Zo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw f6(e)}}function e9(t,e,n){t._throwIfRoot("uploadBytes");const r=zN(t.storage,t._location,zx(),new Si(e,!0),n);return t.storage.makeRequestWithTokens(r,fs).then(i=>({metadata:i,ref:t}))}function t9(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Z6(t,new Si(e),n)}function n9(t){t._throwIfRoot("getDownloadURL");const e=W6(t.storage,t._location,zx());return t.storage.makeRequestWithTokens(e,fs).then(n=>{if(n===null)throw h6();return n})}function r9(t){t._throwIfRoot("deleteObject");const e=H6(t.storage,t._location);return t.storage.makeRequestWithTokens(e,fs)}function i9(t,e){const n=j6(t._location.path,e),r=new Qn(t._location.bucket,n);return new Zo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s9(t){return/^[A-Za-z]+:\/\//.test(t)}function o9(t,e){return new Zo(t,e)}function $N(t,e){if(t instanceof qx){const n=t;if(n._bucket==null)throw c6();const r=new Zo(n,n._bucket);return e!=null?$N(r,e):r}else return e!==void 0?i9(t,e):t}function a9(t,e){if(e&&s9(e)){if(t instanceof qx)return o9(t,e);throw Qv("To use ref(service, url), the first argument must be a Storage instance.")}else return $N(t,e)}function kE(t,e){const n=e==null?void 0:e[IN];return n==null?null:Qn.makeFromBucketSpec(n,t)}function l9(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:_A(i,t.app.options.projectId))}class qx{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=kN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Z3,this._maxUploadRetryTime=e6,this._requests=new Set,i!=null?this._bucket=Qn.makeFromBucketSpec(i,this._host):this._bucket=kE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Qn.makeFromBucketSpec(this._url,e):this._bucket=kE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){SE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){SE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new p6(RN());{const o=E6(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const IE="@firebase/storage",CE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="storage";function HN(t,e,n){return t=Be(t),e9(t,e,n)}function c9(t,e,n){return t=Be(t),t9(t,e,n)}function Em(t){return t=Be(t),n9(t)}function u9(t){return t=Be(t),r9(t)}function Sl(t,e){return t=Be(t),a9(t,e)}function Ph(t=z0(),e){t=Be(t);const r=nm(t,WN).getImmediate({identifier:e}),i=gA("storage");return i&&h9(r,...i),r}function h9(t,e,n,r={}){l9(t,e,n,r)}function d9(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new qx(n,r,i,e,ia)}function f9(){qo(new Vs(WN,d9,"PUBLIC").setMultipleInstances(!0)),Qr(IE,CE,""),Qr(IE,CE,"esm2017")}f9();const p9={apiKey:"AIzaSyDU4GmH6xLhrEd2jSkyATXJOasIyEfisXY",authDomain:"biondo-fitness-coach.firebaseapp.com",projectId:"biondo-fitness-coach",storageBucket:"biondo-fitness-coach.firebasestorage.app",messagingSenderId:"1086406111438",appId:"1:1086406111438:web:1c8c3d9e49f1ffdb77609f",measurementId:"G-869HQ5KGVX"},Kx=bA(p9),ue=F3(Kx),Hr=Gi(Kx),m9=Ph(Kx);var qN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},PE=it.createContext&&it.createContext(qN),g9=["attr","size","title"];function y9(t,e){if(t==null)return{};var n=v9(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function v9(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function vp(){return vp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vp.apply(this,arguments)}function AE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _p(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AE(Object(n),!0).forEach(function(r){_9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AE(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _9(t,e,n){return e=x9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x9(t){var e=w9(t,"string");return typeof e=="symbol"?e:e+""}function w9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KN(t){return t&&t.map((e,n)=>it.createElement(e.tag,_p({key:n},e.attr),KN(e.child)))}function _e(t){return e=>it.createElement(b9,vp({attr:_p({},t.attr)},e),KN(t.child))}function b9(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=y9(t,g9),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),it.createElement("svg",vp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:_p(_p({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&it.createElement("title",null,s),t.children)};return PE!==void 0?it.createElement(PE.Consumer,null,n=>e(n)):e(qN)}function T9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(t)}function S9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function Xs(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function Xv(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function E9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(t)}function Gx(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function GN(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(t)}function Yx(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(t)}function xp(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(t)}function YN(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function QN(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function k9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function I9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function C9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(t)}function Ah(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(t)}function P9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function XN(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(t)}function JN(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(t)}function Qx(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function A9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function R9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function N9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"},child:[]}]})(t)}function D9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(t)}function O9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function M9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function j9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function Xx(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(t)}function km(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function ZN(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Im(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function eD(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function Jx(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(t)}function L9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(t)}function Zx(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function V9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]},{tag:"line",attr:{x1:"12",y1:"12",x2:"12",y2:"21"},child:[]},{tag:"path",attr:{d:"M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"},child:[]},{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]}]})(t)}function F9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(t)}function tD(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function U9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function B9(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(t)}function Cm(t){return _e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}const ew=O.createContext({});function tw(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const Pm=O.createContext(null),nw=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class z9 extends O.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function $9({children:t,isPresent:e}){const n=O.useId(),r=O.useRef(null),i=O.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=O.useContext(nw);return O.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),f.jsx(z9,{isPresent:e,childRef:r,sizeRef:i,children:O.cloneElement(t,{ref:r})})}const W9=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=tw(H9),l=O.useId(),c=O.useCallback(d=>{a.set(d,!0);for(const p of a.values())if(!p)return;r&&r()},[a,r]),u=O.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:d=>(a.set(d,!1),()=>a.delete(d))}),s?[Math.random(),c]:[n,c]);return O.useMemo(()=>{a.forEach((d,p)=>a.set(p,!1))},[n]),O.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=f.jsx($9,{isPresent:n,children:t})),f.jsx(Pm.Provider,{value:u,children:t})};function H9(){return new Map}function nD(t=!0){const e=O.useContext(Pm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=O.useId();O.useEffect(()=>{t&&i(s)},[t]);const o=O.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Id=t=>t.key||"";function RE(t){const e=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&e.push(n)}),e}const rw=typeof window<"u",rD=rw?O.useLayoutEffect:O.useEffect,ca=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=nD(o),c=O.useMemo(()=>RE(t),[t]),u=o&&!a?[]:c.map(Id),d=O.useRef(!0),p=O.useRef(c),m=tw(()=>new Map),[y,v]=O.useState(c),[x,w]=O.useState(c);rD(()=>{d.current=!1,p.current=c;for(let I=0;I<x.length;I++){const C=Id(x[I]);u.includes(C)?m.delete(C):m.get(C)!==!0&&m.set(C,!1)}},[x,u.length,u.join("-")]);const b=[];if(c!==y){let I=[...c];for(let C=0;C<x.length;C++){const M=x[C],S=Id(M);u.includes(S)||(I.splice(C,0,M),b.push(M))}s==="wait"&&b.length&&(I=b),w(RE(I)),v(c);return}const{forceRender:E}=O.useContext(ew);return f.jsx(f.Fragment,{children:x.map(I=>{const C=Id(I),M=o&&!a?!1:c===x||u.includes(C),S=()=>{if(m.has(C))m.set(C,!0);else return;let _=!0;m.forEach(k=>{k||(_=!1)}),_&&(E==null||E(),w(p.current),o&&(l==null||l()),r&&r())};return f.jsx(W9,{isPresent:M,initial:!d.current||n?void 0:!1,custom:M?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:M?void 0:S,children:I},C)})})},Zn=t=>t;let iD=Zn;function iw(t){let e;return()=>(e===void 0&&(e=t()),e)}const El=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Oi=t=>t*1e3,Mi=t=>t/1e3,q9={useManualTiming:!1};function K9(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,d=!1)=>{const m=d&&r?e:n;return u&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const Cd=["read","resolveKeyframes","update","preRender","render","postRender"],G9=40;function sD(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Cd.reduce((w,b)=>(w[b]=K9(s),w),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:p}=o,m=()=>{const w=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,G9),1),i.timestamp=w,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),d.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(m))},y=()=>{n=!0,r=!0,i.isProcessing||t(m)};return{schedule:Cd.reduce((w,b)=>{const E=o[b];return w[b]=(I,C=!1,M=!1)=>(n||y(),E.schedule(I,C,M)),w},{}),cancel:w=>{for(let b=0;b<Cd.length;b++)o[Cd[b]].cancel(w)},state:i,steps:o}}const{schedule:tt,cancel:zs,state:Gt,steps:Yg}=sD(typeof requestAnimationFrame<"u"?requestAnimationFrame:Zn,!0),oD=O.createContext({strict:!1}),NE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},kl={};for(const t in NE)kl[t]={isEnabled:e=>NE[t].some(n=>!!e[n])};function Y9(t){for(const e in t)kl[e]={...kl[e],...t[e]}}const Q9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function wp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Q9.has(t)}let aD=t=>!wp(t);function X9(t){t&&(aD=e=>e.startsWith("on")?!wp(e):t(e))}try{X9(require("@emotion/is-prop-valid").default)}catch{}function J9(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(aD(i)||n===!0&&wp(i)||!e&&!wp(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Z9(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Am=O.createContext({});function Hu(t){return typeof t=="string"||Array.isArray(t)}function Rm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const sw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ow=["initial",...sw];function Nm(t){return Rm(t.animate)||ow.some(e=>Hu(t[e]))}function lD(t){return!!(Nm(t)||t.variants)}function e$(t,e){if(Nm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Hu(n)?n:void 0,animate:Hu(r)?r:void 0}}return t.inherit!==!1?e:{}}function t$(t){const{initial:e,animate:n}=e$(t,O.useContext(Am));return O.useMemo(()=>({initial:e,animate:n}),[DE(e),DE(n)])}function DE(t){return Array.isArray(t)?t.join(" "):t}const n$=Symbol.for("motionComponentSymbol");function Ba(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function r$(t,e,n){return O.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ba(n)&&(n.current=r))},[e])}const aw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),i$="framerAppearId",cD="data-"+aw(i$),{schedule:lw}=sD(queueMicrotask,!1),uD=O.createContext({});function s$(t,e,n,r,i){var s,o;const{visualElement:a}=O.useContext(Am),l=O.useContext(oD),c=O.useContext(Pm),u=O.useContext(nw).reducedMotion,d=O.useRef(null);r=r||l.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const p=d.current,m=O.useContext(uD);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&o$(d.current,n,i,m);const y=O.useRef(!1);O.useInsertionEffect(()=>{p&&y.current&&p.update(n,c)});const v=n[cD],x=O.useRef(!!v&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,v))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,v)));return rD(()=>{p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),lw.render(p.render),x.current&&p.animationState&&p.animationState.animateChanges())}),O.useEffect(()=>{p&&(!x.current&&p.animationState&&p.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)===null||w===void 0||w.call(window,v)}),x.current=!1))}),p}function o$(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:hD(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Ba(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function hD(t){if(t)return t.options.allowProjection!==!1?t.projection:hD(t.parent)}function a$({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&Y9(t);function a(c,u){let d;const p={...O.useContext(nw),...c,layoutId:l$(c)},{isStatic:m}=p,y=t$(c),v=r(c,m);if(!m&&rw){c$();const x=u$(p);d=x.MeasureLayout,y.visualElement=s$(i,v,p,e,x.ProjectionNode)}return f.jsxs(Am.Provider,{value:y,children:[d&&y.visualElement?f.jsx(d,{visualElement:y.visualElement,...p}):null,n(i,c,r$(v,y.visualElement,u),v,m,y.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=O.forwardRef(a);return l[n$]=i,l}function l$({layoutId:t}){const e=O.useContext(ew).id;return e&&t!==void 0?e+"-"+t:t}function c$(t,e){O.useContext(oD).strict}function u$(t){const{drag:e,layout:n}=kl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const h$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cw(t){return typeof t!="string"||t.includes("-")?!1:!!(h$.indexOf(t)>-1||/[A-Z]/u.test(t))}function OE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function uw(t,e,n,r){if(typeof e=="function"){const[i,s]=OE(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=OE(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const Jv=t=>Array.isArray(t),d$=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),f$=t=>Jv(t)?t[t.length-1]||0:t,gn=t=>!!(t&&t.getVelocity);function vf(t){const e=gn(t)?t.get():t;return d$(e)?e.toValue():e}function p$({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:m$(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const dD=t=>(e,n)=>{const r=O.useContext(Am),i=O.useContext(Pm),s=()=>p$(t,e,r,i);return n?s():tw(s)};function m$(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=vf(s[p]);let{initial:o,animate:a}=t;const l=Nm(t),c=lD(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const d=u?a:o;if(d&&typeof d!="boolean"&&!Rm(d)){const p=Array.isArray(d)?d:[d];for(let m=0;m<p.length;m++){const y=uw(t,p[m]);if(y){const{transitionEnd:v,transition:x,...w}=y;for(const b in w){let E=w[b];if(Array.isArray(E)){const I=u?E.length-1:0;E=E[I]}E!==null&&(i[b]=E)}for(const b in v)i[b]=v[b]}}}return i}const Bl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ua=new Set(Bl),fD=t=>e=>typeof e=="string"&&e.startsWith(t),pD=fD("--"),g$=fD("var(--"),hw=t=>g$(t)?y$.test(t.split("/*")[0].trim()):!1,y$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,mD=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Wi=(t,e,n)=>n>e?e:n<t?t:n,zl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},qu={...zl,transform:t=>Wi(0,1,t)},Pd={...zl,default:1},Rh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),is=Rh("deg"),ni=Rh("%"),le=Rh("px"),v$=Rh("vh"),_$=Rh("vw"),ME={...ni,parse:t=>ni.parse(t)/100,transform:t=>ni.transform(t*100)},x$={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,backgroundPositionX:le,backgroundPositionY:le},w$={rotate:is,rotateX:is,rotateY:is,rotateZ:is,scale:Pd,scaleX:Pd,scaleY:Pd,scaleZ:Pd,skew:is,skewX:is,skewY:is,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:qu,originX:ME,originY:ME,originZ:le},jE={...zl,transform:Math.round},dw={...x$,...w$,zIndex:jE,size:le,fillOpacity:qu,strokeOpacity:qu,numOctaves:jE},b$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},T$=Bl.length;function S$(t,e,n){let r="",i=!0;for(let s=0;s<T$;s++){const o=Bl[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=mD(a,dw[o]);if(!l){i=!1;const u=b$[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function fw(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(ua.has(l)){o=!0;continue}else if(pD(l)){i[l]=c;continue}else{const u=mD(c,dw[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=S$(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const E$={offset:"stroke-dashoffset",array:"stroke-dasharray"},k$={offset:"strokeDashoffset",array:"strokeDasharray"};function I$(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?E$:k$;t[s.offset]=le.transform(-r);const o=le.transform(e),a=le.transform(n);t[s.array]=`${o} ${a}`}function LE(t,e,n){return typeof t=="string"?t:le.transform(e+n*t)}function C$(t,e,n){const r=LE(e,t.x,t.width),i=LE(n,t.y,t.height);return`${r} ${i}`}function pw(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,d){if(fw(t,c,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:y}=t;p.transform&&(y&&(m.transform=p.transform),delete p.transform),y&&(i!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=C$(y,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&I$(p,o,a,l,!1)}const mw=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),gD=()=>({...mw(),attrs:{}}),gw=t=>typeof t=="string"&&t.toLowerCase()==="svg";function yD(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const vD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _D(t,e,n,r){yD(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(vD.has(i)?i:aw(i),e.attrs[i])}const bp={};function P$(t){Object.assign(bp,t)}function xD(t,{layout:e,layoutId:n}){return ua.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!bp[t]||t==="opacity")}function yw(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(gn(i[o])||e.style&&gn(e.style[o])||xD(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function wD(t,e,n){const r=yw(t,e,n);for(const i in t)if(gn(t[i])||gn(e[i])){const s=Bl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function A$(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const VE=["x","y","width","height","cx","cy","r"],R$={useVisualState:dD({scrapeMotionValuesFromProps:wD,createRenderState:gD,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(ua.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<VE.length;a++){const l=VE[a];t[l]!==e[l]&&(o=!0)}o&&tt.read(()=>{A$(n,r),tt.render(()=>{pw(r,i,gw(n.tagName),t.transformTemplate),_D(n,r)})})}})},N$={useVisualState:dD({scrapeMotionValuesFromProps:yw,createRenderState:mw})};function bD(t,e,n){for(const r in e)!gn(e[r])&&!xD(r,n)&&(t[r]=e[r])}function D$({transformTemplate:t},e){return O.useMemo(()=>{const n=mw();return fw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function O$(t,e){const n=t.style||{},r={};return bD(r,n,t),Object.assign(r,D$(t,e)),r}function M$(t,e){const n={},r=O$(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function j$(t,e,n,r){const i=O.useMemo(()=>{const s=gD();return pw(s,e,gw(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};bD(s,t.style,t),i.style={...s,...i.style}}return i}function L$(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(cw(n)?j$:M$)(r,s,o,n),c=J9(r,typeof n=="string",t),u=n!==O.Fragment?{...c,...l,ref:i}:{},{children:d}=r,p=O.useMemo(()=>gn(d)?d.get():d,[d]);return O.createElement(n,{...u,children:p})}}function V$(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...cw(r)?R$:N$,preloadedFeatures:t,useRender:L$(i),createVisualElement:e,Component:r};return a$(o)}}function TD(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Dm(t,e,n){const r=t.getProps();return uw(r,e,n!==void 0?n:r.custom,t)}const F$=iw(()=>window.ScrollTimeline!==void 0);class U${constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(F$()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class B$ extends U${then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function vw(t,e){return t?t[e]||t.default||t:void 0}const Zv=2e4;function SD(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Zv;)e+=n,r=t.next(e);return e>=Zv?1/0:e}function _w(t){return typeof t=="function"}function FE(t,e){t.timeline=e,t.onfinish=null}const xw=t=>Array.isArray(t)&&typeof t[0]=="number",z$={linearEasing:void 0};function $$(t,e){const n=iw(t);return()=>{var r;return(r=z$[e])!==null&&r!==void 0?r:n()}}const Tp=$$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ED=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(El(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function kD(t){return!!(typeof t=="function"&&Tp()||!t||typeof t=="string"&&(t in e_||Tp())||xw(t)||Array.isArray(t)&&t.every(kD))}const jc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,e_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jc([0,.65,.55,1]),circOut:jc([.55,0,1,.45]),backIn:jc([.31,.01,.66,-.59]),backOut:jc([.33,1.53,.69,.99])};function ID(t,e){if(t)return typeof t=="function"&&Tp()?ED(t,e):xw(t)?jc(t):Array.isArray(t)?t.map(n=>ID(n,e)||e_.easeOut):e_[t]}const _r={x:!1,y:!1};function CD(){return _r.x||_r.y}function W$(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function PD(t,e){const n=W$(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function UE(t){return e=>{e.pointerType==="touch"||CD()||t(e)}}function H$(t,e,n={}){const[r,i,s]=PD(t,n),o=UE(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=UE(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const AD=(t,e)=>e?t===e?!0:AD(t,e.parentElement):!1,ww=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,q$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function K$(t){return q$.has(t.tagName)||t.tabIndex!==-1}const Lc=new WeakSet;function BE(t){return e=>{e.key==="Enter"&&t(e)}}function Qg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const G$=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=BE(()=>{if(Lc.has(n))return;Qg(n,"down");const i=BE(()=>{Qg(n,"up")}),s=()=>Qg(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function zE(t){return ww(t)&&!CD()}function Y$(t,e,n={}){const[r,i,s]=PD(t,n),o=a=>{const l=a.currentTarget;if(!zE(a)||Lc.has(l))return;Lc.add(l);const c=e(a),u=(m,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",p),!(!zE(m)||!Lc.has(l))&&(Lc.delete(l),typeof c=="function"&&c(m,{success:y}))},d=m=>{u(m,n.useGlobalTarget||AD(l,m.target))},p=m=>{u(m,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{!K$(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>G$(c,i),i)}),s}function Q$(t){return t==="x"||t==="y"?_r[t]?null:(_r[t]=!0,()=>{_r[t]=!1}):_r.x||_r.y?null:(_r.x=_r.y=!0,()=>{_r.x=_r.y=!1})}const RD=new Set(["width","height","top","left","right","bottom",...Bl]);let _f;function X$(){_f=void 0}const ri={now:()=>(_f===void 0&&ri.set(Gt.isProcessing||q9.useManualTiming?Gt.timestamp:performance.now()),_f),set:t=>{_f=t,queueMicrotask(X$)}};function bw(t,e){t.indexOf(e)===-1&&t.push(e)}function Tw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Sw{constructor(){this.subscriptions=[]}add(e){return bw(this.subscriptions,e),()=>Tw(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function ND(t,e){return e?t*(1e3/e):0}const $E=30,J$=t=>!isNaN(parseFloat(t));class Z${constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=ri.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ri.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=J$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Sw);const r=this.events[e].add(n);return e==="change"?()=>{r(),tt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ri.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>$E)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,$E);return ND(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ku(t,e){return new Z$(t,e)}function eW(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ku(n))}function tW(t,e){const n=Dm(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=f$(s[o]);eW(t,o,a)}}function nW(t){return!!(gn(t)&&t.add)}function t_(t,e){const n=t.getValue("willChange");if(nW(n))return n.add(e)}function DD(t){return t.props[cD]}const OD=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,rW=1e-7,iW=12;function sW(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=OD(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>rW&&++a<iW);return o}function Nh(t,e,n,r){if(t===e&&n===r)return Zn;const i=s=>sW(s,0,1,t,n);return s=>s===0||s===1?s:OD(i(s),e,r)}const MD=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,jD=t=>e=>1-t(1-e),LD=Nh(.33,1.53,.69,.99),Ew=jD(LD),VD=MD(Ew),FD=t=>(t*=2)<1?.5*Ew(t):.5*(2-Math.pow(2,-10*(t-1))),kw=t=>1-Math.sin(Math.acos(t)),UD=jD(kw),BD=MD(kw),zD=t=>/^0[^.\s]+$/u.test(t);function oW(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||zD(t):!0}const ou=t=>Math.round(t*1e5)/1e5,Iw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function aW(t){return t==null}const lW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Cw=(t,e)=>n=>!!(typeof n=="string"&&lW.test(n)&&n.startsWith(t)||e&&!aW(n)&&Object.prototype.hasOwnProperty.call(n,e)),$D=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Iw);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},cW=t=>Wi(0,255,t),Xg={...zl,transform:t=>Math.round(cW(t))},Ao={test:Cw("rgb","red"),parse:$D("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Xg.transform(t)+", "+Xg.transform(e)+", "+Xg.transform(n)+", "+ou(qu.transform(r))+")"};function uW(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const n_={test:Cw("#"),parse:uW,transform:Ao.transform},za={test:Cw("hsl","hue"),parse:$D("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ni.transform(ou(e))+", "+ni.transform(ou(n))+", "+ou(qu.transform(r))+")"},dn={test:t=>Ao.test(t)||n_.test(t)||za.test(t),parse:t=>Ao.test(t)?Ao.parse(t):za.test(t)?za.parse(t):n_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ao.transform(t):za.transform(t)},hW=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function dW(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Iw))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(hW))===null||n===void 0?void 0:n.length)||0)>0}const WD="number",HD="color",fW="var",pW="var(",WE="${}",mW=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Gu(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(mW,l=>(dn.test(l)?(r.color.push(s),i.push(HD),n.push(dn.parse(l))):l.startsWith(pW)?(r.var.push(s),i.push(fW),n.push(l)):(r.number.push(s),i.push(WD),n.push(parseFloat(l))),++s,WE)).split(WE);return{values:n,split:a,indexes:r,types:i}}function qD(t){return Gu(t).values}function KD(t){const{split:e,types:n}=Gu(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===WD?s+=ou(i[o]):a===HD?s+=dn.transform(i[o]):s+=i[o]}return s}}const gW=t=>typeof t=="number"?0:t;function yW(t){const e=qD(t);return KD(t)(e.map(gW))}const $s={test:dW,parse:qD,createTransformer:KD,getAnimatableNone:yW},vW=new Set(["brightness","contrast","saturate","opacity"]);function _W(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Iw)||[];if(!r)return t;const i=n.replace(r,"");let s=vW.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const xW=/\b([a-z-]*)\(.*?\)/gu,r_={...$s,getAnimatableNone:t=>{const e=t.match(xW);return e?e.map(_W).join(" "):t}},wW={...dw,color:dn,backgroundColor:dn,outlineColor:dn,fill:dn,stroke:dn,borderColor:dn,borderTopColor:dn,borderRightColor:dn,borderBottomColor:dn,borderLeftColor:dn,filter:r_,WebkitFilter:r_},Pw=t=>wW[t];function GD(t,e){let n=Pw(t);return n!==r_&&(n=$s),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const bW=new Set(["auto","none","0"]);function TW(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!bW.has(s)&&Gu(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=GD(n,i)}const HE=t=>t===zl||t===le,qE=(t,e)=>parseFloat(t.split(", ")[e]),KE=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return qE(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?qE(s[1],t):0}},SW=new Set(["x","y","z"]),EW=Bl.filter(t=>!SW.has(t));function kW(t){const e=[];return EW.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Il={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:KE(4,13),y:KE(5,14)};Il.translateX=Il.x;Il.translateY=Il.y;const Vo=new Set;let i_=!1,s_=!1;function YD(){if(s_){const t=Array.from(Vo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=kW(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}s_=!1,i_=!1,Vo.forEach(t=>t.complete()),Vo.clear()}function QD(){Vo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(s_=!0)})}function IW(){QD(),YD()}class Aw{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Vo.add(this),i_||(i_=!0,tt.read(QD),tt.resolveKeyframes(YD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Vo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Vo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const XD=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),CW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function PW(t){const e=CW.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function JD(t,e,n=1){const[r,i]=PW(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return XD(o)?parseFloat(o):o}return hw(i)?JD(i,e,n+1):i}const ZD=t=>e=>e.test(t),AW={test:t=>t==="auto",parse:t=>t},e2=[zl,le,ni,is,_$,v$,AW],GE=t=>e2.find(ZD(t));class t2 extends Aw{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),hw(c))){const u=JD(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!RD.has(r)||e.length!==2)return;const[i,s]=e,o=GE(i),a=GE(s);if(o!==a)if(HE(o)&&HE(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)oW(e[i])&&r.push(i);r.length&&TW(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Il[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Il[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const YE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&($s.test(t)||t==="0")&&!t.startsWith("url("));function RW(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function NW(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=YE(i,e),a=YE(s,e);return!o||!a?!1:RW(t)||(n==="spring"||_w(n))&&r}const DW=t=>t!==null;function Om(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(DW),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const OW=40;class n2{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ri.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>OW?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&IW(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ri.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!NW(e,r,i,s))if(o)this.options.duration=0;else{l&&l(Om(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ct=(t,e,n)=>t+(e-t)*n;function Jg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function MW({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Jg(l,a,t+1/3),s=Jg(l,a,t),o=Jg(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Sp(t,e){return n=>n>0?e:t}const Zg=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},jW=[n_,Ao,za],LW=t=>jW.find(e=>e.test(t));function QE(t){const e=LW(t);if(!e)return!1;let n=e.parse(t);return e===za&&(n=MW(n)),n}const XE=(t,e)=>{const n=QE(t),r=QE(e);if(!n||!r)return Sp(t,e);const i={...n};return s=>(i.red=Zg(n.red,r.red,s),i.green=Zg(n.green,r.green,s),i.blue=Zg(n.blue,r.blue,s),i.alpha=ct(n.alpha,r.alpha,s),Ao.transform(i))},VW=(t,e)=>n=>e(t(n)),Dh=(...t)=>t.reduce(VW),o_=new Set(["none","hidden"]);function FW(t,e){return o_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function UW(t,e){return n=>ct(t,e,n)}function Rw(t){return typeof t=="number"?UW:typeof t=="string"?hw(t)?Sp:dn.test(t)?XE:$W:Array.isArray(t)?r2:typeof t=="object"?dn.test(t)?XE:BW:Sp}function r2(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Rw(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function BW(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Rw(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function zW(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const $W=(t,e)=>{const n=$s.createTransformer(e),r=Gu(t),i=Gu(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?o_.has(t)&&!i.values.length||o_.has(e)&&!r.values.length?FW(t,e):Dh(r2(zW(r,i),i.values),n):Sp(t,e)};function i2(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ct(t,e,n):Rw(t)(t,e)}const WW=5;function s2(t,e,n){const r=Math.max(e-WW,0);return ND(n-t(r),e-r)}const yt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ey=.001;function HW({duration:t=yt.duration,bounce:e=yt.bounce,velocity:n=yt.velocity,mass:r=yt.mass}){let i,s,o=1-e;o=Wi(yt.minDamping,yt.maxDamping,o),t=Wi(yt.minDuration,yt.maxDuration,Mi(t)),o<1?(i=c=>{const u=c*o,d=u*t,p=u-n,m=a_(c,o),y=Math.exp(-d);return ey-p/m*y},s=c=>{const d=c*o*t,p=d*n+n,m=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-d),v=a_(Math.pow(c,2),o);return(-i(c)+ey>0?-1:1)*((p-m)*y)/v}):(i=c=>{const u=Math.exp(-c*t),d=(c-n)*t+1;return-ey+u*d},s=c=>{const u=Math.exp(-c*t),d=(n-c)*(t*t);return u*d});const a=5/t,l=KW(i,s,a);if(t=Oi(t),isNaN(l))return{stiffness:yt.stiffness,damping:yt.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const qW=12;function KW(t,e,n){let r=n;for(let i=1;i<qW;i++)r=r-t(r)/e(r);return r}function a_(t,e){return t*Math.sqrt(1-e*e)}const GW=["duration","bounce"],YW=["stiffness","damping","mass"];function JE(t,e){return e.some(n=>t[n]!==void 0)}function QW(t){let e={velocity:yt.velocity,stiffness:yt.stiffness,damping:yt.damping,mass:yt.mass,isResolvedFromDuration:!1,...t};if(!JE(t,YW)&&JE(t,GW))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Wi(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:yt.mass,stiffness:i,damping:s}}else{const n=HW(t);e={...e,...n,mass:yt.mass},e.isResolvedFromDuration=!0}return e}function o2(t=yt.visualDuration,e=yt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:p,isResolvedFromDuration:m}=QW({...n,velocity:-Mi(n.velocity||0)}),y=p||0,v=c/(2*Math.sqrt(l*u)),x=o-s,w=Mi(Math.sqrt(l/u)),b=Math.abs(x)<5;r||(r=b?yt.restSpeed.granular:yt.restSpeed.default),i||(i=b?yt.restDelta.granular:yt.restDelta.default);let E;if(v<1){const C=a_(w,v);E=M=>{const S=Math.exp(-v*w*M);return o-S*((y+v*w*x)/C*Math.sin(C*M)+x*Math.cos(C*M))}}else if(v===1)E=C=>o-Math.exp(-w*C)*(x+(y+w*x)*C);else{const C=w*Math.sqrt(v*v-1);E=M=>{const S=Math.exp(-v*w*M),_=Math.min(C*M,300);return o-S*((y+v*w*x)*Math.sinh(_)+C*x*Math.cosh(_))/C}}const I={calculatedDuration:m&&d||null,next:C=>{const M=E(C);if(m)a.done=C>=d;else{let S=0;v<1&&(S=C===0?Oi(y):s2(E,C,M));const _=Math.abs(S)<=r,k=Math.abs(o-M)<=i;a.done=_&&k}return a.value=a.done?o:M,a},toString:()=>{const C=Math.min(SD(I),Zv),M=ED(S=>I.next(C*S).value,C,30);return C+"ms "+M}};return I}function ZE({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const d=t[0],p={done:!1,value:d},m=_=>a!==void 0&&_<a||l!==void 0&&_>l,y=_=>a===void 0?l:l===void 0||Math.abs(a-_)<Math.abs(l-_)?a:l;let v=n*e;const x=d+v,w=o===void 0?x:o(x);w!==x&&(v=w-d);const b=_=>-v*Math.exp(-_/r),E=_=>w+b(_),I=_=>{const k=b(_),P=E(_);p.done=Math.abs(k)<=c,p.value=p.done?w:P};let C,M;const S=_=>{m(p.value)&&(C=_,M=o2({keyframes:[p.value,y(p.value)],velocity:s2(E,_,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return S(0),{calculatedDuration:null,next:_=>{let k=!1;return!M&&C===void 0&&(k=!0,I(_),S(_)),C!==void 0&&_>=C?M.next(_-C):(!k&&I(_),p)}}}const XW=Nh(.42,0,1,1),JW=Nh(0,0,.58,1),a2=Nh(.42,0,.58,1),ZW=t=>Array.isArray(t)&&typeof t[0]!="number",eH={linear:Zn,easeIn:XW,easeInOut:a2,easeOut:JW,circIn:kw,circInOut:BD,circOut:UD,backIn:Ew,backInOut:VD,backOut:LD,anticipate:FD},e1=t=>{if(xw(t)){iD(t.length===4);const[e,n,r,i]=t;return Nh(e,n,r,i)}else if(typeof t=="string")return eH[t];return t};function tH(t,e,n){const r=[],i=n||i2,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Zn:e;a=Dh(l,a)}r.push(a)}return r}function nH(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(iD(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=tH(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const p=El(t[d],t[d+1],u);return a[d](p)};return n?u=>c(Wi(t[0],t[s-1],u)):c}function rH(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=El(0,e,r);t.push(ct(n,1,i))}}function iH(t){const e=[0];return rH(e,t.length-1),e}function sH(t,e){return t.map(n=>n*e)}function oH(t,e){return t.map(()=>e||a2).splice(0,t.length-1)}function Ep({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=ZW(r)?r.map(e1):e1(r),s={done:!1,value:e[0]},o=sH(n&&n.length===e.length?n:iH(e),t),a=nH(o,e,{ease:Array.isArray(i)?i:oH(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const aH=t=>{const e=({timestamp:n})=>t(n);return{start:()=>tt.update(e,!0),stop:()=>zs(e),now:()=>Gt.isProcessing?Gt.timestamp:ri.now()}},lH={decay:ZE,inertia:ZE,tween:Ep,keyframes:Ep,spring:o2},cH=t=>t/100;class Nw extends n2{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Aw,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=_w(n)?n:lH[n]||Ep;let l,c;a!==Ep&&typeof e[0]!="number"&&(l=Dh(cH,i2(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=SD(u));const{calculatedDuration:d}=u,p=d+i,m=p*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:_}=this.options;return{done:!0,value:_[_.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:d}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:y,repeatDelay:v,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const w=this.currentTime-p*(this.speed>=0?1:-1),b=this.speed>=0?w<0:w>u;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let E=this.currentTime,I=s;if(m){const _=Math.min(this.currentTime,u)/d;let k=Math.floor(_),P=_%1;!P&&_>=1&&(P=1),P===1&&k--,k=Math.min(k,m+1),!!(k%2)&&(y==="reverse"?(P=1-P,v&&(P-=v/d)):y==="mirror"&&(I=o)),E=Wi(0,1,P)*d}const C=b?{done:!1,value:l[0]}:I.next(E);a&&(C.value=a(C.value));let{done:M}=C;!b&&c!==null&&(M=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return S&&i!==void 0&&(C.value=Om(l,this.options,i)),x&&x(C.value),S&&this.finish(),C}get duration(){const{resolved:e}=this;return e?Mi(e.calculatedDuration):0}get time(){return Mi(this.currentTime)}set time(e){e=Oi(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Mi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=aH,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const uH=new Set(["opacity","clipPath","filter","transform"]);function hH(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=ID(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const dH=iw(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),kp=10,fH=2e4;function pH(t){return _w(t.type)||t.type==="spring"||!kD(t.ease)}function mH(t,e){const n=new Nw({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<fH;)r=n.sample(s),i.push(r.value),s+=kp;return{times:void 0,keyframes:i,duration:s-kp,ease:"linear"}}const l2={anticipate:FD,backInOut:VD,circInOut:BD};function gH(t){return t in l2}class t1 extends n2{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new t2(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Tp()&&gH(s)&&(s=l2[s]),pH(this.options)){const{onComplete:d,onUpdate:p,motionValue:m,element:y,...v}=this.options,x=mH(e,v);e=x.keyframes,e.length===1&&(e[1]=e[0]),r=x.duration,i=x.times,s=x.ease,o="keyframes"}const u=hH(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(FE(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;a.set(Om(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Mi(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Mi(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Oi(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Zn;const{animation:r}=n;FE(r,e)}return Zn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:d,element:p,...m}=this.options,y=new Nw({...m,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),v=Oi(this.time);c.setWithVelocity(y.sample(v-kp).value,y.sample(v).value,kp)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return dH()&&r&&uH.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const yH={type:"spring",stiffness:500,damping:25,restSpeed:10},vH=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),_H={type:"keyframes",duration:.8},xH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wH=(t,{keyframes:e})=>e.length>2?_H:ua.has(t)?t.startsWith("scale")?vH(e[1]):yH:xH;function bH({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const Dw=(t,e,n,r={},i,s)=>o=>{const a=vw(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Oi(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};bH(a)||(u={...u,...wH(t,u)}),u.duration&&(u.duration=Oi(u.duration)),u.repeatDelay&&(u.repeatDelay=Oi(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const p=Om(u.keyframes,a);if(p!==void 0)return tt.update(()=>{u.onUpdate(p),u.onComplete()}),new B$([])}return!s&&t1.supports(u)?new t1(u):new Nw(u)};function TH({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function c2(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const p=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),m=l[d];if(m===void 0||u&&TH(u,d))continue;const y={delay:n,...vw(o||{},d)};let v=!1;if(window.MotionHandoffAnimation){const w=DD(t);if(w){const b=window.MotionHandoffAnimation(w,d,tt);b!==null&&(y.startTime=b,v=!0)}}t_(t,d),p.start(Dw(d,p,m,t.shouldReduceMotion&&RD.has(d)?{type:!1}:y,t,v));const x=p.animation;x&&c.push(x)}return a&&Promise.all(c).then(()=>{tt.update(()=>{a&&tW(t,a)})}),c}function l_(t,e,n={}){var r;const i=Dm(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(c2(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:p}=s;return SH(t,e,u+c,d,p,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function SH(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(EH).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(l_(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function EH(t,e){return t.sortNodePosition(e)}function kH(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>l_(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=l_(t,e,n);else{const i=typeof e=="function"?Dm(t,e,n.custom):e;r=Promise.all(c2(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const IH=ow.length;function u2(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?u2(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<IH;n++){const r=ow[n],i=t.props[r];(Hu(i)||i===!1)&&(e[r]=i)}return e}const CH=[...sw].reverse(),PH=sw.length;function AH(t){return e=>Promise.all(e.map(({animation:n,options:r})=>kH(t,n,r)))}function RH(t){let e=AH(t),n=n1(),r=!0;const i=l=>(c,u)=>{var d;const p=Dm(t,u,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(p){const{transition:m,transitionEnd:y,...v}=p;c={...c,...v,...y}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=u2(t.parent)||{},d=[],p=new Set;let m={},y=1/0;for(let x=0;x<PH;x++){const w=CH[x],b=n[w],E=c[w]!==void 0?c[w]:u[w],I=Hu(E),C=w===l?b.isActive:null;C===!1&&(y=x);let M=E===u[w]&&E!==c[w]&&I;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),b.protectedKeys={...m},!b.isActive&&C===null||!E&&!b.prevProp||Rm(E)||typeof E=="boolean")continue;const S=NH(b.prevProp,E);let _=S||w===l&&b.isActive&&!M&&I||x>y&&I,k=!1;const P=Array.isArray(E)?E:[E];let A=P.reduce(i(w),{});C===!1&&(A={});const{prevResolvedValues:D={}}=b,N={...D,...A},q=ne=>{_=!0,p.has(ne)&&(k=!0,p.delete(ne)),b.needsAnimating[ne]=!0;const z=t.getValue(ne);z&&(z.liveStyle=!1)};for(const ne in N){const z=A[ne],X=D[ne];if(m.hasOwnProperty(ne))continue;let Y=!1;Jv(z)&&Jv(X)?Y=!TD(z,X):Y=z!==X,Y?z!=null?q(ne):p.add(ne):z!==void 0&&p.has(ne)?q(ne):b.protectedKeys[ne]=!0}b.prevProp=E,b.prevResolvedValues=A,b.isActive&&(m={...m,...A}),r&&t.blockInitialAnimation&&(_=!1),_&&(!(M&&S)||k)&&d.push(...P.map(ne=>({animation:ne,options:{type:w}})))}if(p.size){const x={};p.forEach(w=>{const b=t.getBaseTarget(w),E=t.getValue(w);E&&(E.liveStyle=!0),x[w]=b??null}),d.push({animation:x})}let v=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(d):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const p in n)n[p].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=n1(),r=!0}}}function NH(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!TD(e,t):!1}function fo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function n1(){return{animate:fo(!0),whileInView:fo(),whileHover:fo(),whileTap:fo(),whileDrag:fo(),whileFocus:fo(),exit:fo()}}class Js{constructor(e){this.isMounted=!1,this.node=e}update(){}}class DH extends Js{constructor(e){super(e),e.animationState||(e.animationState=RH(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Rm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let OH=0;class MH extends Js{constructor(){super(...arguments),this.id=OH++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const jH={animation:{Feature:DH},exit:{Feature:MH}};function Yu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Oh(t){return{point:{x:t.pageX,y:t.pageY}}}const LH=t=>e=>ww(e)&&t(e,Oh(e));function au(t,e,n,r){return Yu(t,e,LH(n),r)}const r1=(t,e)=>Math.abs(t-e);function VH(t,e){const n=r1(t.x,e.x),r=r1(t.y,e.y);return Math.sqrt(n**2+r**2)}class h2{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=ny(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=VH(d.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:y}=d,{timestamp:v}=Gt;this.history.push({...y,timestamp:v});const{onStart:x,onMove:w}=this.handlers;p||(x&&x(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=ty(p,this.transformPagePoint),tt.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=ny(d.type==="pointercancel"?this.lastMoveEventInfo:ty(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(d,x),y&&y(d,x)},!ww(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Oh(e),a=ty(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Gt;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,ny(a,this.history)),this.removeListeners=Dh(au(this.contextWindow,"pointermove",this.handlePointerMove),au(this.contextWindow,"pointerup",this.handlePointerUp),au(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),zs(this.updatePoint)}}function ty(t,e){return e?{point:e(t.point)}:t}function i1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ny({point:t},e){return{point:t,delta:i1(t,d2(e)),offset:i1(t,FH(e)),velocity:UH(e,.1)}}function FH(t){return t[0]}function d2(t){return t[t.length-1]}function UH(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=d2(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Oi(e)));)n--;if(!r)return{x:0,y:0};const s=Mi(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const f2=1e-4,BH=1-f2,zH=1+f2,p2=.01,$H=0-p2,WH=0+p2;function tr(t){return t.max-t.min}function HH(t,e,n){return Math.abs(t-e)<=n}function s1(t,e,n,r=.5){t.origin=r,t.originPoint=ct(e.min,e.max,t.origin),t.scale=tr(n)/tr(e),t.translate=ct(n.min,n.max,t.origin)-t.originPoint,(t.scale>=BH&&t.scale<=zH||isNaN(t.scale))&&(t.scale=1),(t.translate>=$H&&t.translate<=WH||isNaN(t.translate))&&(t.translate=0)}function lu(t,e,n,r){s1(t.x,e.x,n.x,r?r.originX:void 0),s1(t.y,e.y,n.y,r?r.originY:void 0)}function o1(t,e,n){t.min=n.min+e.min,t.max=t.min+tr(e)}function qH(t,e,n){o1(t.x,e.x,n.x),o1(t.y,e.y,n.y)}function a1(t,e,n){t.min=e.min-n.min,t.max=t.min+tr(e)}function cu(t,e,n){a1(t.x,e.x,n.x),a1(t.y,e.y,n.y)}function KH(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ct(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ct(n,t,r.max):Math.min(t,n)),t}function l1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function GH(t,{top:e,left:n,bottom:r,right:i}){return{x:l1(t.x,n,i),y:l1(t.y,e,r)}}function c1(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function YH(t,e){return{x:c1(t.x,e.x),y:c1(t.y,e.y)}}function QH(t,e){let n=.5;const r=tr(t),i=tr(e);return i>r?n=El(e.min,e.max-r,t.min):r>i&&(n=El(t.min,t.max-i,e.min)),Wi(0,1,n)}function XH(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const c_=.35;function JH(t=c_){return t===!1?t=0:t===!0&&(t=c_),{x:u1(t,"left","right"),y:u1(t,"top","bottom")}}function u1(t,e,n){return{min:h1(t,e),max:h1(t,n)}}function h1(t,e){return typeof t=="number"?t:t[e]||0}const d1=()=>({translate:0,scale:1,origin:0,originPoint:0}),$a=()=>({x:d1(),y:d1()}),f1=()=>({min:0,max:0}),xt=()=>({x:f1(),y:f1()});function ar(t){return[t("x"),t("y")]}function m2({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function ZH({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function e8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ry(t){return t===void 0||t===1}function u_({scale:t,scaleX:e,scaleY:n}){return!ry(t)||!ry(e)||!ry(n)}function xo(t){return u_(t)||g2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function g2(t){return p1(t.x)||p1(t.y)}function p1(t){return t&&t!=="0%"}function Ip(t,e,n){const r=t-n,i=e*r;return n+i}function m1(t,e,n,r,i){return i!==void 0&&(t=Ip(t,i,r)),Ip(t,n,r)+e}function h_(t,e=0,n=1,r,i){t.min=m1(t.min,e,n,r,i),t.max=m1(t.max,e,n,r,i)}function y2(t,{x:e,y:n}){h_(t.x,e.translate,e.scale,e.originPoint),h_(t.y,n.translate,n.scale,n.originPoint)}const g1=.999999999999,y1=1.0000000000001;function t8(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ha(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,y2(t,o)),r&&xo(s.latestValues)&&Ha(t,s.latestValues))}e.x<y1&&e.x>g1&&(e.x=1),e.y<y1&&e.y>g1&&(e.y=1)}function Wa(t,e){t.min=t.min+e,t.max=t.max+e}function v1(t,e,n,r,i=.5){const s=ct(t.min,t.max,i);h_(t,e,n,s,r)}function Ha(t,e){v1(t.x,e.x,e.scaleX,e.scale,e.originX),v1(t.y,e.y,e.scaleY,e.scale,e.originY)}function v2(t,e){return m2(e8(t.getBoundingClientRect(),e))}function n8(t,e,n){const r=v2(t,n),{scroll:i}=e;return i&&(Wa(r.x,i.offset.x),Wa(r.y,i.offset.y)),r}const _2=({current:t})=>t?t.ownerDocument.defaultView:null,r8=new WeakMap;class i8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Oh(u).point)},s=(u,d)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Q$(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ar(x=>{let w=this.getAxisMotionValue(x).get()||0;if(ni.test(w)){const{projection:b}=this.visualElement;if(b&&b.layout){const E=b.layout.layoutBox[x];E&&(w=tr(E)*(parseFloat(w)/100))}}this.originPoint[x]=w}),y&&tt.postRender(()=>y(u,d)),t_(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(u,d)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:v}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=d;if(m&&this.currentDirection===null){this.currentDirection=s8(x),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",d.point,x),this.updateAxis("y",d.point,x),this.visualElement.render(),v&&v(u,d)},a=(u,d)=>this.stop(u,d),l=()=>ar(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new h2(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:_2(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&tt.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Ad(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=KH(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Ba(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=GH(i.layoutBox,n):this.constraints=!1,this.elastic=JH(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ar(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=XH(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ba(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=n8(r,i.root,this.visualElement.getTransformPagePoint());let o=YH(i.layout.layoutBox,s);if(n){const a=n(ZH(o));this.hasMutatedConstraints=!!a,a&&(o=m2(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=ar(u=>{if(!Ad(u,n,this.currentDirection))return;let d=l&&l[u]||{};o&&(d={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return t_(this.visualElement,e),r.start(Dw(e,r,0,n,this.visualElement,!1))}stopAnimation(){ar(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ar(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ar(n=>{const{drag:r}=this.getProps();if(!Ad(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-ct(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ba(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ar(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=QH({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ar(o=>{if(!Ad(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ct(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;r8.set(this.visualElement,this);const e=this.visualElement.current,n=au(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ba(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),tt.read(r);const o=Yu(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ar(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=c_,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Ad(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function s8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class o8 extends Js{constructor(e){super(e),this.removeGroupControls=Zn,this.removeListeners=Zn,this.controls=new i8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zn}unmount(){this.removeGroupControls(),this.removeListeners()}}const _1=t=>(e,n)=>{t&&tt.postRender(()=>t(e,n))};class a8 extends Js{constructor(){super(...arguments),this.removePointerDownListener=Zn}onPointerDown(e){this.session=new h2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:_1(e),onStart:_1(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&tt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=au(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const xf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function x1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const vc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(le.test(t))t=parseFloat(t);else return t;const n=x1(t,e.target.x),r=x1(t,e.target.y);return`${n}% ${r}%`}},l8={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=$s.parse(t);if(i.length>5)return r;const s=$s.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=ct(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class c8 extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;P$(u8),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),xf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||tt.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),lw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function x2(t){const[e,n]=nD(),r=O.useContext(ew);return f.jsx(c8,{...t,layoutGroup:r,switchLayoutGroup:O.useContext(uD),isPresent:e,safeToRemove:n})}const u8={borderRadius:{...vc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:vc,borderTopRightRadius:vc,borderBottomLeftRadius:vc,borderBottomRightRadius:vc,boxShadow:l8};function h8(t,e,n){const r=gn(t)?t:Ku(t);return r.start(Dw("",r,e,n)),r.animation}function d8(t){return t instanceof SVGElement&&t.tagName!=="svg"}const f8=(t,e)=>t.depth-e.depth;class p8{constructor(){this.children=[],this.isDirty=!1}add(e){bw(this.children,e),this.isDirty=!0}remove(e){Tw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(f8),this.isDirty=!1,this.children.forEach(e)}}function m8(t,e){const n=ri.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(zs(r),t(s-e))};return tt.read(r,!0),()=>zs(r)}const w2=["TopLeft","TopRight","BottomLeft","BottomRight"],g8=w2.length,w1=t=>typeof t=="string"?parseFloat(t):t,b1=t=>typeof t=="number"||le.test(t);function y8(t,e,n,r,i,s){i?(t.opacity=ct(0,n.opacity!==void 0?n.opacity:1,v8(r)),t.opacityExit=ct(e.opacity!==void 0?e.opacity:1,0,_8(r))):s&&(t.opacity=ct(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<g8;o++){const a=`border${w2[o]}Radius`;let l=T1(e,a),c=T1(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||b1(l)===b1(c)?(t[a]=Math.max(ct(w1(l),w1(c),r),0),(ni.test(c)||ni.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=ct(e.rotate||0,n.rotate||0,r))}function T1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const v8=b2(0,.5,UD),_8=b2(.5,.95,Zn);function b2(t,e,n){return r=>r<t?0:r>e?1:n(El(t,e,r))}function S1(t,e){t.min=e.min,t.max=e.max}function sr(t,e){S1(t.x,e.x),S1(t.y,e.y)}function E1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function k1(t,e,n,r,i){return t-=e,t=Ip(t,1/n,r),i!==void 0&&(t=Ip(t,1/i,r)),t}function x8(t,e=0,n=1,r=.5,i,s=t,o=t){if(ni.test(e)&&(e=parseFloat(e),e=ct(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ct(s.min,s.max,r);t===s&&(a-=e),t.min=k1(t.min,e,n,a,i),t.max=k1(t.max,e,n,a,i)}function I1(t,e,[n,r,i],s,o){x8(t,e[n],e[r],e[i],e.scale,s,o)}const w8=["x","scaleX","originX"],b8=["y","scaleY","originY"];function C1(t,e,n,r){I1(t.x,e,w8,n?n.x:void 0,r?r.x:void 0),I1(t.y,e,b8,n?n.y:void 0,r?r.y:void 0)}function P1(t){return t.translate===0&&t.scale===1}function T2(t){return P1(t.x)&&P1(t.y)}function A1(t,e){return t.min===e.min&&t.max===e.max}function T8(t,e){return A1(t.x,e.x)&&A1(t.y,e.y)}function R1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function S2(t,e){return R1(t.x,e.x)&&R1(t.y,e.y)}function N1(t){return tr(t.x)/tr(t.y)}function D1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class S8{constructor(){this.members=[]}add(e){bw(this.members,e),e.scheduleRender()}remove(e){if(Tw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function E8(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:d,rotateY:p,skewX:m,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),d&&(r+=`rotateX(${d}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const wo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Vc=typeof window<"u"&&window.MotionDebug!==void 0,iy=["","X","Y","Z"],k8={visibility:"hidden"},O1=1e3;let I8=0;function sy(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function E2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=DD(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",tt,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&E2(r)}function k2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=I8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Vc&&(wo.totalNodes=wo.resolvedTargetDeltas=wo.recalculatedProjection=0),this.nodes.forEach(A8),this.nodes.forEach(M8),this.nodes.forEach(j8),this.nodes.forEach(R8),Vc&&window.MotionDebug.record(wo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new p8)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Sw),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=d8(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let d;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=m8(p,250),xf.hasAnimatedSinceResize&&(xf.hasAnimatedSinceResize=!1,this.nodes.forEach(j1))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||B8,{onLayoutAnimationStart:x,onLayoutAnimationComplete:w}=u.getProps(),b=!this.targetLayout||!S2(this.targetLayout,y)||m,E=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||p&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,E);const I={...vw(v,"layout"),onPlay:x,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else p||j1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,zs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(L8),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&E2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(M1);return}this.isUpdating||this.nodes.forEach(D8),this.isUpdating=!1,this.nodes.forEach(O8),this.nodes.forEach(C8),this.nodes.forEach(P8),this.clearAllSnapshots();const a=ri.now();Gt.delta=Wi(0,1e3/60,a-Gt.timestamp),Gt.timestamp=a,Gt.isProcessing=!0,Yg.update.process(Gt),Yg.preRender.process(Gt),Yg.render.process(Gt),Gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,lw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(N8),this.sharedNodes.forEach(V8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!T2(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||xo(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),z8(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return xt();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some($8))){const{scroll:u}=this.root;u&&(Wa(l.x,u.offset.x),Wa(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=xt();if(sr(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:p}=u;u!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&sr(l,o),Wa(l.x,d.offset.x),Wa(l.y,d.offset.y))}return l}applyTransform(o,a=!1){const l=xt();sr(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Ha(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),xo(u.latestValues)&&Ha(l,u.latestValues)}return xo(this.latestValues)&&Ha(l,this.latestValues),l}removeTransform(o){const a=xt();sr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!xo(c.latestValues))continue;u_(c.latestValues)&&c.updateSnapshot();const u=xt(),d=c.measurePageBox();sr(u,d),C1(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return xo(this.latestValues)&&C1(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:p}=this.options;if(!(!this.layout||!(d||p))){if(this.resolvedRelativeTargetAt=Gt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),cu(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=xt(),this.targetWithTransforms=xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),qH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sr(this.target,this.layout.layoutBox),y2(this.target,this.targetDelta)):sr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),cu(this.relativeTargetOrigin,this.target,m.target),sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vc&&wo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||u_(this.parent.latestValues)||g2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Gt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;sr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;t8(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=xt());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(E1(this.prevProjectionDelta.x,this.projectionDelta.x),E1(this.prevProjectionDelta.y,this.projectionDelta.y)),lu(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!D1(this.projectionDelta.x,this.prevProjectionDelta.x)||!D1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Vc&&wo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=$a(),this.projectionDelta=$a(),this.projectionDeltaWithTransform=$a()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},d=$a();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=xt(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,v=m!==y,x=this.getStack(),w=!x||x.members.length<=1,b=!!(v&&!w&&this.options.crossfade===!0&&!this.path.some(U8));this.animationProgress=0;let E;this.mixTargetDelta=I=>{const C=I/1e3;L1(d.x,o.x,C),L1(d.y,o.y,C),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cu(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),F8(this.relativeTarget,this.relativeTargetOrigin,p,C),E&&T8(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=xt()),sr(E,this.relativeTarget)),v&&(this.animationValues=u,y8(u,c,this.latestValues,C,b,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(zs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tt.update(()=>{xf.hasAnimatedSinceResize=!0,this.currentAnimation=h8(0,O1,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(O1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&I2(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||xt();const d=tr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=tr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}sr(a,l),Ha(a,u),lu(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new S8),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&sy("z",o,c,this.animationValues);for(let u=0;u<iy.length;u++)sy(`rotate${iy[u]}`,o,c,this.animationValues),sy(`skew${iy[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return k8;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=vf(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=vf(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!xo(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const p=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=E8(this.projectionDeltaWithTransform,this.treeScale,p),u&&(c.transform=u(p,c.transform));const{x:m,y}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,d.animationValues?c.opacity=d===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=d===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const v in bp){if(p[v]===void 0)continue;const{correct:x,applyTo:w}=bp[v],b=c.transform==="none"?p[v]:x(p[v],d);if(w){const E=w.length;for(let I=0;I<E;I++)c[w[I]]=b}else c[v]=b}return this.options.layoutId&&(c.pointerEvents=d===this?vf(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(M1),this.root.sharedNodes.clear()}}}function C8(t){t.updateLayout()}function P8(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?ar(d=>{const p=o?n.measuredBox[d]:n.layoutBox[d],m=tr(p);p.min=r[d].min,p.max=p.min+m}):I2(s,n.layoutBox,r)&&ar(d=>{const p=o?n.measuredBox[d]:n.layoutBox[d],m=tr(r[d]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+m)});const a=$a();lu(a,r,n.layoutBox);const l=$a();o?lu(l,t.applyTransform(i,!0),n.measuredBox):lu(l,r,n.layoutBox);const c=!T2(a);let u=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:m}=d;if(p&&m){const y=xt();cu(y,n.layoutBox,p.layoutBox);const v=xt();cu(v,r,m.layoutBox),S2(y,v)||(u=!0),d.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=y,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function A8(t){Vc&&wo.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function R8(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function N8(t){t.clearSnapshot()}function M1(t){t.clearMeasurements()}function D8(t){t.isLayoutDirty=!1}function O8(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function j1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function M8(t){t.resolveTargetDelta()}function j8(t){t.calcProjection()}function L8(t){t.resetSkewAndRotation()}function V8(t){t.removeLeadSnapshot()}function L1(t,e,n){t.translate=ct(e.translate,0,n),t.scale=ct(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function V1(t,e,n,r){t.min=ct(e.min,n.min,r),t.max=ct(e.max,n.max,r)}function F8(t,e,n,r){V1(t.x,e.x,n.x,r),V1(t.y,e.y,n.y,r)}function U8(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const B8={duration:.45,ease:[.4,0,.1,1]},F1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),U1=F1("applewebkit/")&&!F1("chrome/")?Math.round:Zn;function B1(t){t.min=U1(t.min),t.max=U1(t.max)}function z8(t){B1(t.x),B1(t.y)}function I2(t,e,n){return t==="position"||t==="preserve-aspect"&&!HH(N1(e),N1(n),.2)}function $8(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const W8=k2({attachResizeListener:(t,e)=>Yu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),oy={current:void 0},C2=k2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!oy.current){const t=new W8({});t.mount(window),t.setOptions({layoutScroll:!0}),oy.current=t}return oy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),H8={pan:{Feature:a8},drag:{Feature:o8,ProjectionNode:C2,MeasureLayout:x2}};function z1(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&tt.postRender(()=>s(e,Oh(e)))}class q8 extends Js{mount(){const{current:e}=this.node;e&&(this.unmount=H$(e,n=>(z1(this.node,n,"Start"),r=>z1(this.node,r,"End"))))}unmount(){}}class K8 extends Js{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Dh(Yu(this.node.current,"focus",()=>this.onFocus()),Yu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function $1(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&tt.postRender(()=>s(e,Oh(e)))}class G8 extends Js{mount(){const{current:e}=this.node;e&&(this.unmount=Y$(e,n=>($1(this.node,n,"Start"),(r,{success:i})=>$1(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const d_=new WeakMap,ay=new WeakMap,Y8=t=>{const e=d_.get(t.target);e&&e(t)},Q8=t=>{t.forEach(Y8)};function X8({root:t,...e}){const n=t||document;ay.has(n)||ay.set(n,{});const r=ay.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(Q8,{root:t,...e})),r[i]}function J8(t,e,n){const r=X8(e);return d_.set(t,n),r.observe(t),()=>{d_.delete(t),r.unobserve(t)}}const Z8={some:0,all:1};class eq extends Js{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Z8[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),p=c?u:d;p&&p(l)};return J8(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(tq(e,n))&&this.startObserver()}unmount(){}}function tq({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const nq={inView:{Feature:eq},tap:{Feature:G8},focus:{Feature:K8},hover:{Feature:q8}},rq={layout:{ProjectionNode:C2,MeasureLayout:x2}},f_={current:null},P2={current:!1};function iq(){if(P2.current=!0,!!rw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>f_.current=t.matches;t.addListener(e),e()}else f_.current=!1}const sq=[...e2,dn,$s],oq=t=>sq.find(ZD(t)),W1=new WeakMap;function aq(t,e,n){for(const r in e){const i=e[r],s=n[r];if(gn(i))t.addValue(r,i);else if(gn(s))t.addValue(r,Ku(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Ku(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const H1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class lq{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Aw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=ri.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,tt.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Nm(n),this.isVariantNode=lD(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const y=p[m];l[m]!==void 0&&gn(y)&&y.set(l[m],!1)}}mount(e){this.current=e,W1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),P2.current||iq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:f_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){W1.delete(this.current),this.projection&&this.projection.unmount(),zs(this.notifyUpdate),zs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ua.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&tt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in kl){const n=kl[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<H1.length;r++){const i=H1[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=aq(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ku(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(XD(i)||zD(i))?i=parseFloat(i):!oq(i)&&$s.test(n)&&(i=GD(e,n)),this.setBaseTarget(e,gn(i)?i.get():i)),gn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=uw(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!gn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Sw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class A2 extends lq{constructor(){super(...arguments),this.KeyframeResolver=t2}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function cq(t){return window.getComputedStyle(t)}class uq extends A2{constructor(){super(...arguments),this.type="html",this.renderInstance=yD}readValueFromInstance(e,n){if(ua.has(n)){const r=Pw(n);return r&&r.default||0}else{const r=cq(e),i=(pD(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return v2(e,n)}build(e,n,r){fw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return yw(e,n,r)}}class hq extends A2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ua.has(n)){const r=Pw(n);return r&&r.default||0}return n=vD.has(n)?n:aw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return wD(e,n,r)}build(e,n,r){pw(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){_D(e,n,r,i)}mount(e){this.isSVGTag=gw(e.tagName),super.mount(e)}}const dq=(t,e)=>cw(t)?new hq(e):new uq(e,{allowProjection:t!==O.Fragment}),fq=V$({...jH,...nq,...H8,...rq},dq),We=Z9(fq),pq=()=>f.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden bg-background",children:[f.jsx(We.div,{className:"absolute top-[10%] left-[5%] h-[400px] w-[400px] rounded-full bg-blue-500/20 filter blur-3xl",animate:{x:[0,150,-50,0],y:[0,-50,100,0],scale:[1,1.3,.8,1]},transition:{duration:40,repeat:1/0,repeatType:"mirror"}}),f.jsx(We.div,{className:"absolute bottom-[10%] right-[5%] h-[400px] w-[400px] rounded-full bg-cyan-500/20 filter blur-3xl",animate:{x:[0,-100,50,0],y:[0,100,-50,0],scale:[1,.8,1.2,1]},transition:{duration:45,repeat:1/0,repeatType:"mirror",delay:7}})]}),mq=[{to:"/",icon:f.jsx(R9,{size:18}),label:"Dashboard"},{to:"/clients",icon:f.jsx(U9,{size:18}),label:"Clienti"},{to:"/chat",icon:f.jsx(Xx,{size:18}),label:"Chat"},{to:"/updates",icon:f.jsx(T9,{size:18}),label:"Aggiornamenti"}],gq=({to:t,icon:e,label:n,onClick:r})=>{const s=qi().pathname===t;return f.jsxs("button",{onClick:r,className:`flex items-center gap-3 w-full p-2.5 rounded-md text-sm transition-colors ${s?"bg-primary/20 text-white font-semibold":"text-muted hover:bg-white/5 hover:text-white"}`,children:[e,f.jsx("span",{children:n})]})},q1=({onLinkClick:t})=>{const e=$t();return f.jsxs("aside",{className:"w-60 bg-card/60 backdrop-blur-lg p-4 flex flex-col border-r border-white/10 h-full",children:[f.jsx("h2",{className:"text-xl font-bold mb-8 px-2",children:"PT Manager"}),f.jsx("nav",{className:"flex flex-col gap-2",children:mq.map(n=>f.jsx(gq,{to:n.to,icon:n.icon,label:n.label,onClick:()=>{e(n.to),t&&t()}},n.to))})]})};function yq(){const[t,e]=O.useState(!1),n=qi();return f.jsxs("div",{className:"relative min-h-screen text-foreground",children:[f.jsx(pq,{}),f.jsx("div",{className:"hidden md:flex md:fixed h-full",children:f.jsx(q1,{})}),f.jsx(ca,{children:t&&f.jsx(We.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 left-0 h-full z-50 md:hidden",children:f.jsx(q1,{onLinkClick:()=>e(!1)})})}),f.jsxs("div",{className:"flex-1 md:ml-60",children:[f.jsxs("header",{className:"md:hidden sticky top-0 bg-card/80 backdrop-blur-md h-16 flex items-center justify-between px-4 border-b border-white/10 z-40",children:[f.jsx("h2",{className:"text-lg font-bold",children:"PT Manager"}),f.jsx("button",{onClick:()=>e(!t),children:t?f.jsx(Cm,{size:24}):f.jsx(j9,{size:24})})]}),f.jsx("main",{className:"p-4 sm:p-6 lg:p-8",children:f.jsx(We.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeInOut"},children:f.jsx(hA,{})},n.pathname)})]})]})}function vq(){$t();const[t,e]=O.useState(""),[n,r]=O.useState(""),[i,s]=O.useState(""),o=async a=>{a.preventDefault(),s("");try{await YA(Hr,t,n),sessionStorage.setItem("app_role","admin")}catch(l){s("Credenziali non valide. Riprova."),console.error("Errore di login admin:",l)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background text-foreground",children:f.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-card rounded-2xl border border-white/10 shadow-2xl",children:[f.jsx("h2",{className:"text-3xl font-bold text-center text-white",children:"Accesso Admin"}),f.jsxs("form",{onSubmit:o,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block mb-1 text-sm font-medium text-muted",children:"Email"}),f.jsx("input",{type:"email",value:t,onChange:a=>e(a.target.value),required:!0,className:"w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",autoComplete:"email"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block mb-1 text-sm font-medium text-muted",children:"Password"}),f.jsx("input",{type:"password",value:n,onChange:a=>r(a.target.value),required:!0,className:"w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",autoComplete:"current-password"})]}),i&&f.jsx("p",{className:"text-red-400 text-sm text-center",children:i}),f.jsx("div",{children:f.jsx("button",{type:"submit",className:"w-full px-4 py-2.5 font-bold text-white bg-primary rounded-lg hover:bg-primary/80",children:"Accedi"})})]})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Mh(t){return t+.5|0}const _s=(t,e,n)=>Math.max(Math.min(t,n),e);function Fc(t){return _s(Mh(t*2.55),0,255)}function Ms(t){return _s(Mh(t*255),0,255)}function Ti(t){return _s(Mh(t/2.55)/100,0,1)}function K1(t){return _s(Mh(t*100),0,100)}const or={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},p_=[..."0123456789ABCDEF"],_q=t=>p_[t&15],xq=t=>p_[(t&240)>>4]+p_[t&15],Rd=t=>(t&240)>>4===(t&15),wq=t=>Rd(t.r)&&Rd(t.g)&&Rd(t.b)&&Rd(t.a);function bq(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&or[t[1]]*17,g:255&or[t[2]]*17,b:255&or[t[3]]*17,a:e===5?or[t[4]]*17:255}:(e===7||e===9)&&(n={r:or[t[1]]<<4|or[t[2]],g:or[t[3]]<<4|or[t[4]],b:or[t[5]]<<4|or[t[6]],a:e===9?or[t[7]]<<4|or[t[8]]:255})),n}const Tq=(t,e)=>t<255?e(t):"";function Sq(t){var e=wq(t)?_q:xq;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Tq(t.a,e):void 0}const Eq=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function R2(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function kq(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Iq(t,e,n){const r=R2(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function Cq(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function Ow(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=Cq(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function Mw(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Ms)}function jw(t,e,n){return Mw(R2,t,e,n)}function Pq(t,e,n){return Mw(Iq,t,e,n)}function Aq(t,e,n){return Mw(kq,t,e,n)}function N2(t){return(t%360+360)%360}function Rq(t){const e=Eq.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Fc(+e[5]):Ms(+e[5]));const i=N2(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Pq(i,s,o):e[1]==="hsv"?r=Aq(i,s,o):r=jw(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function Nq(t,e){var n=Ow(t);n[0]=N2(n[0]+e),n=jw(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Dq(t){if(!t)return;const e=Ow(t),n=e[0],r=K1(e[1]),i=K1(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Ti(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const G1={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Y1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Oq(){const t={},e=Object.keys(Y1),n=Object.keys(G1);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,G1[s]);s=parseInt(Y1[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Nd;function Mq(t){Nd||(Nd=Oq(),Nd.transparent=[0,0,0,0]);const e=Nd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const jq=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Lq(t){const e=jq.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Fc(o):_s(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Fc(r):_s(r,0,255)),i=255&(e[4]?Fc(i):_s(i,0,255)),s=255&(e[6]?Fc(s):_s(s,0,255)),{r,g:i,b:s,a:n}}}function Vq(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ti(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const ly=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ba=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Fq(t,e,n){const r=ba(Ti(t.r)),i=ba(Ti(t.g)),s=ba(Ti(t.b));return{r:Ms(ly(r+n*(ba(Ti(e.r))-r))),g:Ms(ly(i+n*(ba(Ti(e.g))-i))),b:Ms(ly(s+n*(ba(Ti(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Dd(t,e,n){if(t){let r=Ow(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=jw(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function D2(t,e){return t&&Object.assign(e||{},t)}function Q1(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ms(t[3]))):(e=D2(t,{r:0,g:0,b:0,a:1}),e.a=Ms(e.a)),e}function Uq(t){return t.charAt(0)==="r"?Lq(t):Rq(t)}class Qu{constructor(e){if(e instanceof Qu)return e;const n=typeof e;let r;n==="object"?r=Q1(e):n==="string"&&(r=bq(e)||Mq(e)||Uq(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=D2(this._rgb);return e&&(e.a=Ti(e.a)),e}set rgb(e){this._rgb=Q1(e)}rgbString(){return this._valid?Vq(this._rgb):void 0}hexString(){return this._valid?Sq(this._rgb):void 0}hslString(){return this._valid?Dq(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Fq(this._rgb,e._rgb,n)),this}clone(){return new Qu(this.rgb)}alpha(e){return this._rgb.a=Ms(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Mh(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Dd(this._rgb,2,e),this}darken(e){return Dd(this._rgb,2,-e),this}saturate(e){return Dd(this._rgb,1,e),this}desaturate(e){return Dd(this._rgb,1,-e),this}rotate(e){return Nq(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function yi(){}const Bq=(()=>{let t=0;return()=>t++})();function Oe(t){return t==null}function At(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ee(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function bn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Lr(t,e){return bn(t)?t:e}function we(t,e){return typeof t>"u"?e:t}const zq=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ze(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Me(t,e,n,r){let i,s,o;if(At(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Ee(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Cp(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Pp(t){if(At(t))return t.map(Pp);if(Ee(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Pp(t[n[i]]);return e}return t}function O2(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function $q(t,e,n,r){if(!O2(t))return;const i=e[t],s=n[t];Ee(i)&&Ee(s)?Xu(i,s,r):e[t]=Pp(s)}function Xu(t,e,n){const r=At(e)?e:[e],i=r.length;if(!Ee(t))return t;n=n||{};const s=n.merger||$q;let o;for(let a=0;a<i;++a){if(o=r[a],!Ee(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function uu(t,e){return Xu(t,e,{merger:Wq})}function Wq(t,e,n){if(!O2(t))return;const r=e[t],i=n[t];Ee(r)&&Ee(i)?uu(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Pp(i))}const X1={"":t=>t,x:t=>t.x,y:t=>t.y};function Hq(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function qq(t){const e=Hq(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Cl(t,e){return(X1[e]||(X1[e]=qq(e)))(t)}function Lw(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ju=t=>typeof t<"u",Ws=t=>typeof t=="function",J1=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Kq(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const zt=Math.PI,Cr=2*zt,Gq=Cr+zt,Ap=Number.POSITIVE_INFINITY,Yq=zt/180,Er=zt/2,po=zt/4,Z1=zt*2/3,M2=Math.log10,ii=Math.sign;function hu(t,e,n){return Math.abs(t-e)<n}function ek(t){const e=Math.round(t);t=hu(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(M2(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Qq(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Xq(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Zu(t){return!Xq(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function Jq(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function Zq(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ro(t){return t*(zt/180)}function e7(t){return t*(180/zt)}function tk(t){if(!bn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function t7(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*zt&&(s+=Cr),{angle:s,distance:i}}function m_(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function n7(t,e){return(t-e+Gq)%Cr-zt}function zr(t){return(t%Cr+Cr)%Cr}function j2(t,e,n,r){const i=zr(t),s=zr(e),o=zr(n),a=zr(s-i),l=zr(o-i),c=zr(i-s),u=zr(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function Xn(t,e,n){return Math.max(e,Math.min(n,t))}function r7(t){return Xn(t,-32768,32767)}function xs(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Vw(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const No=(t,e,n,r)=>Vw(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),i7=(t,e,n)=>Vw(t,n,r=>t[r][e]>=n);function s7(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const L2=["push","pop","shift","splice","unshift"];function o7(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),L2.forEach(n=>{const r="_onData"+Lw(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function nk(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(L2.forEach(s=>{delete t[s]}),delete t._chartjs)}function V2(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const F2=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function U2(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,F2.call(window,()=>{r=!1,t.apply(e,n)}))}}function a7(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Fw=t=>t==="start"?"left":t==="end"?"right":"center",hn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,l7=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function c7(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:d,max:p,minDefined:m,maxDefined:y}=o.getUserBounds();if(m){if(i=Math.min(No(l,u,d).lo,n?r:No(e,u,o.getPixelForValue(d)).lo),c){const v=l.slice(0,i+1).reverse().findIndex(x=>!Oe(x[a.axis]));i-=Math.max(0,v)}i=Xn(i,0,r-1)}if(y){let v=Math.max(No(l,o.axis,p,!0).hi+1,n?0:No(e,u,o.getPixelForValue(p),!0).hi+1);if(c){const x=l.slice(v-1).findIndex(w=>!Oe(w[a.axis]));v+=Math.max(0,x)}s=Xn(v,i,r)-i}else s=r-i}return{start:i,count:s}}function u7(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Od=t=>t===0||t===1,rk=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Cr/n)),ik=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Cr/n)+1,du={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Er)+1,easeOutSine:t=>Math.sin(t*Er),easeInOutSine:t=>-.5*(Math.cos(zt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Od(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Od(t)?t:rk(t,.075,.3),easeOutElastic:t=>Od(t)?t:ik(t,.075,.3),easeInOutElastic(t){return Od(t)?t:t<.5?.5*rk(t*2,.1125,.45):.5+.5*ik(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-du.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?du.easeInBounce(t*2)*.5:du.easeOutBounce(t*2-1)*.5+.5};function Uw(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function sk(t){return Uw(t)?t:new Qu(t)}function cy(t){return Uw(t)?t:new Qu(t).saturate(.5).darken(.1).hexString()}const h7=["x","y","borderWidth","radius","tension"],d7=["color","borderColor","backgroundColor"];function f7(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:d7},numbers:{type:"number",properties:h7}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function p7(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ok=new Map;function m7(t,e){e=e||{};const n=t+JSON.stringify(e);let r=ok.get(n);return r||(r=new Intl.NumberFormat(t,e),ok.set(n,r)),r}function B2(t,e,n){return m7(e,n).format(t)}const g7={values(t){return At(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=y7(t,n)}const o=M2(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),B2(t,r,l)}};function y7(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var z2={formatters:g7};function v7(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:z2.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ea=Object.create(null),g_=Object.create(null);function fu(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function uy(t,e,n){return typeof e=="string"?Xu(fu(t,e),n):Xu(fu(t,""),e)}class _7{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>cy(i.backgroundColor),this.hoverBorderColor=(r,i)=>cy(i.borderColor),this.hoverColor=(r,i)=>cy(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return uy(this,e,n)}get(e){return fu(this,e)}describe(e,n){return uy(g_,e,n)}override(e,n){return uy(ea,e,n)}route(e,n,r,i){const s=fu(this,e),o=fu(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Ee(l)?Object.assign({},c,l):we(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Tt=new _7({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[f7,p7,v7]);function x7(t){return!t||Oe(t.size)||Oe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ak(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function mo(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function lk(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function y_(t,e,n,r){$2(t,e,n,r,null)}function $2(t,e,n,r,i){let s,o,a,l,c,u,d,p;const m=e.pointStyle,y=e.rotation,v=e.radius;let x=(y||0)*Yq;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(x),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,v,0,0,Cr):t.arc(n,r,v,0,Cr),t.closePath();break;case"triangle":u=i?i/2:v,t.moveTo(n+Math.sin(x)*u,r-Math.cos(x)*v),x+=Z1,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*v),x+=Z1,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*v),t.closePath();break;case"rectRounded":c=v*.516,l=v-c,o=Math.cos(x+po)*l,d=Math.cos(x+po)*(i?i/2-c:l),a=Math.sin(x+po)*l,p=Math.sin(x+po)*(i?i/2-c:l),t.arc(n-d,r-a,c,x-zt,x-Er),t.arc(n+p,r-o,c,x-Er,x),t.arc(n+d,r+a,c,x,x+Er),t.arc(n-p,r+o,c,x+Er,x+zt),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*v,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}x+=po;case"rectRot":d=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,p=Math.sin(x)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+p,r-o),t.lineTo(n+d,r+a),t.lineTo(n-p,r+o),t.closePath();break;case"crossRot":x+=po;case"cross":d=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,p=Math.sin(x)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"star":d=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,p=Math.sin(x)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o),x+=po,d=Math.cos(x)*(i?i/2:v),o=Math.cos(x)*v,a=Math.sin(x)*v,p=Math.sin(x)*(i?i/2:v),t.moveTo(n-d,r-a),t.lineTo(n+d,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"line":o=i?i/2:Math.cos(x)*v,a=Math.sin(x)*v,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(x)*(i?i/2:v),r+Math.sin(x)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function eh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Mm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function jm(t){t.restore()}function w7(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function b7(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function T7(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Oe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function S7(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function E7(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function th(t,e,n,r,i,s={}){const o=At(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,T7(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&E7(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Oe(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),S7(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Rp(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*zt,zt,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,zt,Er,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Er,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Er,!0),t.lineTo(n+o.topLeft,r)}const k7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,I7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function C7(t,e){const n=(""+t).match(k7);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const P7=t=>+t||0;function W2(t,e){const n={},r=Ee(e),i=r?Object.keys(e):e,s=Ee(t)?r?o=>we(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=P7(s(o));return n}function H2(t){return W2(t,{top:"y",right:"x",bottom:"y",left:"x"})}function il(t){return W2(t,["topLeft","topRight","bottomLeft","bottomRight"])}function mr(t){const e=H2(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function yn(t,e){t=t||{},e=e||Tt.font;let n=we(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=we(t.style,e.style);r&&!(""+r).match(I7)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:we(t.family,e.family),lineHeight:C7(we(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:we(t.weight,e.weight),string:""};return i.string=x7(i),i}function Md(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function A7(t,e,n){const{min:r,max:i}=t,s=zq(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function ha(t,e){return Object.assign(Object.create(t),e)}function Bw(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=Y2("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>Bw([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return K2(a,l,()=>V7(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return uk(a).includes(l)},ownKeys(a){return uk(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function Pl(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:q2(t,r),setContext:s=>Pl(t,s,n,r),override:s=>Pl(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return K2(s,o,()=>N7(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function q2(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Ws(n)?n:()=>n,isIndexable:Ws(r)?r:()=>r}}const R7=(t,e)=>t?t+Lw(e):e,zw=(t,e)=>Ee(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function K2(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function N7(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Ws(a)&&o.isScriptable(e)&&(a=D7(e,a,t,n)),At(a)&&a.length&&(a=O7(e,a,t,o.isIndexable)),zw(e,a)&&(a=Pl(a,i,s&&s[e],o)),a}function D7(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),zw(t,l)&&(l=$w(i._scopes,i,t,l)),l}function O7(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Ee(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const d=$w(c,i,t,u);e.push(Pl(d,s,o&&o[t],a))}}return e}function G2(t,e,n){return Ws(t)?t(e,n):t}const M7=(t,e)=>t===!0?e:typeof t=="string"?Cl(e,t):void 0;function j7(t,e,n,r,i){for(const s of e){const o=M7(n,s);if(o){t.add(o);const a=G2(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function $w(t,e,n,r){const i=e._rootScopes,s=G2(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=ck(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=ck(a,o,s,l,r),l===null)?!1:Bw(Array.from(a),[""],i,s,()=>L7(e,n,r))}function ck(t,e,n,r,i){for(;n;)n=j7(t,e,n,r,i);return n}function L7(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return At(i)&&Ee(n)?n:i||{}}function V7(t,e,n,r){let i;for(const s of e)if(i=Y2(R7(s,t),n),typeof i<"u")return zw(t,i)?$w(n,r,t,i):i}function Y2(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function uk(t){let e=t._keys;return e||(e=t._keys=F7(t._scopes)),e}function F7(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const U7=Number.EPSILON||1e-14,Al=(t,e)=>e<t.length&&!t[e].skip&&t[e],Q2=t=>t==="x"?"y":"x";function B7(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=m_(s,i),l=m_(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const d=r*c,p=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+p*(o.x-i.x),y:s.y+p*(o.y-i.y)}}}function z7(t,e,n){const r=t.length;let i,s,o,a,l,c=Al(t,0);for(let u=0;u<r-1;++u)if(l=c,c=Al(t,u+1),!(!l||!c)){if(hu(e[u],0,U7)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function $7(t,e,n="x"){const r=Q2(n),i=t.length;let s,o,a,l=Al(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Al(t,c+1),!a)continue;const u=a[n],d=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=d-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=d+s*e[c])}}function W7(t,e="x"){const n=Q2(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Al(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Al(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?ii(i[o-1])!==ii(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}z7(t,i,s),$7(t,s,e)}function jd(t,e,n){return Math.max(Math.min(t,n),e)}function H7(t,e){let n,r,i,s,o,a=eh(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&eh(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=jd(i.cp1x,e.left,e.right),i.cp1y=jd(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=jd(i.cp2x,e.left,e.right),i.cp2y=jd(i.cp2y,e.top,e.bottom)))}function q7(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")W7(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=B7(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&H7(t,n)}function Ww(){return typeof window<"u"&&typeof document<"u"}function Hw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Np(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Lm=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function K7(t,e){return Lm(t).getPropertyValue(e)}const G7=["top","right","bottom","left"];function Fo(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=G7[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Y7=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Q7(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(Y7(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function bo(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Lm(n),s=i.boxSizing==="border-box",o=Fo(i,"padding"),a=Fo(i,"border","width"),{x:l,y:c,box:u}=Q7(t,n),d=o.left+(u&&a.left),p=o.top+(u&&a.top);let{width:m,height:y}=e;return s&&(m-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-d)/m*n.width/r),y:Math.round((c-p)/y*n.height/r)}}function X7(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&Hw(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Lm(s),l=Fo(a,"border","width"),c=Fo(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Np(a.maxWidth,s,"clientWidth"),i=Np(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Ap,maxHeight:i||Ap}}const Ld=t=>Math.round(t*10)/10;function J7(t,e,n,r){const i=Lm(t),s=Fo(i,"margin"),o=Np(i.maxWidth,t,"clientWidth")||Ap,a=Np(i.maxHeight,t,"clientHeight")||Ap,l=X7(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const p=Fo(i,"border","width"),m=Fo(i,"padding");c-=m.width+p.width,u-=m.height+p.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=Ld(Math.min(c,o,l.maxWidth)),u=Ld(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Ld(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Ld(Math.floor(u*r))),{width:c,height:u}}function hk(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const Z7=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Ww()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function dk(t,e){const n=K7(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function To(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function eK(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function tK(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=To(t,i,n),a=To(i,s,n),l=To(s,e,n),c=To(o,a,n),u=To(a,l,n);return To(c,u,n)}const nK=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},rK=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function sl(t,e,n){return t?nK(e,n):rK()}function X2(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function J2(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Z2(t){return t==="angle"?{between:j2,compare:n7,normalize:zr}:{between:xs,compare:(e,n)=>e-n,normalize:e=>e}}function fk({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function iK(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=Z2(r),l=e.length;let{start:c,end:u,loop:d}=t,p,m;if(d){for(c+=l,u+=l,p=0,m=l;p<m&&o(a(e[c%l][r]),i,s);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function eO(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=Z2(r),{start:u,end:d,loop:p,style:m}=iK(t,e,n),y=[];let v=!1,x=null,w,b,E;const I=()=>l(i,E,w)&&a(i,E)!==0,C=()=>a(s,w)===0||l(s,E,w),M=()=>v||I(),S=()=>!v||C();for(let _=u,k=u;_<=d;++_)b=e[_%o],!b.skip&&(w=c(b[r]),w!==E&&(v=l(w,i,s),x===null&&M()&&(x=a(w,i)===0?_:k),x!==null&&S()&&(y.push(fk({start:x,end:_,loop:p,count:o,style:m})),x=null),k=_,E=w));return x!==null&&y.push(fk({start:x,end:d,loop:p,count:o,style:m})),y}function tO(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=eO(r[i],t.points,e);s.length&&n.push(...s)}return n}function sK(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function oK(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function aK(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=sK(n,i,s,r);if(r===!0)return pk(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return pk(t,oK(n,o,l,c),n,e)}function pk(t,e,n,r){return!r||!r.setContext||!n?e:lK(t,e,n,r)}function lK(t,e,n,r){const i=t._chart.getContext(),s=mk(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,d=e[0].start,p=d;function m(y,v,x,w){const b=a?-1:1;if(y!==v){for(y+=l;n[y%l].skip;)y-=b;for(;n[v%l].skip;)v+=b;y%l!==v%l&&(c.push({start:y%l,end:v%l,loop:x,style:w}),u=w,d=v%l)}}for(const y of e){d=a?d:y.start;let v=n[d%l],x;for(p=d+1;p<=y.end;p++){const w=n[p%l];x=mk(r.setContext(ha(i,{type:"segment",p0:v,p1:w,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),cK(x,u)&&m(d,p-1,y.loop,u),v=w,u=x}d<p-1&&m(d,p-1,y.loop,u)}return c}function mk(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function cK(t,e){if(!e)return!1;const n=[],r=function(i,s){return Uw(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Vd(t,e,n){return t.options.clip?t[n]:e[n]}function uK(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Vd(n,e,"left"),right:Vd(n,e,"right"),top:Vd(r,e,"top"),bottom:Vd(r,e,"bottom")}:e}function nO(t,e){const n=e._clip;if(n.disabled)return!1;const r=uK(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class hK{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=F2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var _i=new hK;const gk="transparent",dK={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=sk(t||gk),i=r.valid&&sk(e||gk);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class fK{constructor(e,n,r,i){const s=n[r];i=Md([e.to,i,s,e.from]);const o=Md([e.from,s,i]);this._active=!0,this._fn=e.fn||dK[e.type||typeof o],this._easing=du[e.easing]||du.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Md([e.to,n,i,e.from]),this._from=Md([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class rO{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ee(e))return;const n=Object.keys(Tt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Ee(s))return;const o={};for(const a of n)o[a]=s[a];(At(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=mK(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&pK(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let d=s[c];const p=r.get(c);if(d)if(p&&d.active()){d.update(p,u,a);continue}else d.cancel();if(!p||!p.duration){e[c]=u;continue}s[c]=d=new fK(p,e,c,u),i.push(d)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return _i.add(this._chart,r),!0}}function pK(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function mK(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function yk(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function gK(t,e,n){if(n===!1)return!1;const r=yk(t,n),i=yk(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function yK(t){let e,n,r,i;return Ee(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function iO(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function vk(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],bn(c)&&(s||e===0||ii(e)===ii(c))&&(e+=c)}return!u&&!r.all?0:e}function vK(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function hy(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function _K(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function xK(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function wK(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function _k(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function xk(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=_K(s,o,r),d=e.length;let p;for(let m=0;m<d;++m){const y=e[m],{[l]:v,[c]:x}=y,w=y._stacks||(y._stacks={});p=w[c]=wK(i,u,v),p[a]=x,p._top=_k(p,o,!0,r.type),p._bottom=_k(p,o,!1,r.type);const b=p._visualValues||(p._visualValues={});b[a]=x}}function dy(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function bK(t,e){return ha(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function TK(t,e,n){return ha(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function _c(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const fy=t=>t==="reset"||t==="none",wk=(t,e)=>e?t:Object.assign({},t),SK=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:iO(n,!0),values:null};class ol{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=hy(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&_c(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(d,p,m,y)=>d==="x"?p:d==="r"?y:m,s=n.xAxisID=we(r.xAxisID,dy(e,"x")),o=n.yAxisID=we(r.yAxisID,dy(e,"y")),a=n.rAxisID=we(r.rAxisID,dy(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&nk(this._data,this),e._stacked&&_c(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Ee(n)){const i=this._cachedMeta;this._data=vK(n,i)}else if(r!==n){if(r){nk(r,this);const i=this._cachedMeta;_c(i),i._parsed=[]}n&&Object.isExtensible(n)&&o7(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=hy(n.vScale,n),n.stack!==r.stack&&(i=!0,_c(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(xk(this,n._parsed),n._stacked=hy(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,d,p;if(this._parsing===!1)r._parsed=i,r._sorted=!0,p=i;else{At(i[e])?p=this.parseArrayData(r,i,e,n):Ee(i[e])?p=this.parseObjectData(r,i,e,n):p=this.parsePrimitiveData(r,i,e,n);const m=()=>d[a]===null||c&&d[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=d=p[u],l&&(m()&&(l=!1),c=d);r._sorted=l}o&&xk(this,p)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,d=new Array(i);let p,m,y;for(p=0,m=i;p<m;++p)y=p+r,d[p]={[a]:u||s.parse(c[y],y),[l]:o.parse(n[y],y)};return d}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,d;for(l=0,c=i;l<c;++l)u=l+r,d=n[u],a[l]={x:s.parse(d[0],u),y:o.parse(d[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,d,p,m;for(u=0,d=i;u<d;++u)p=u+r,m=n[p],c[u]={x:s.parse(Cl(m,a),p),y:o.parse(Cl(m,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:iO(i,!0),values:n._stacks[e.axis]._visualValues};return vk(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=vk(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=SK(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:d}=xK(a);let p,m;function y(){m=i[p];const v=m[a.axis];return!bn(m[e.axis])||u>v||d<v}for(p=0;p<o&&!(!y()&&(this.updateRangeFromParsed(c,e,m,l),s));++p);if(s){for(p=o-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],bn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=yK(we(this.options.clip,gK(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const d=i[u];d.hidden||(d.active&&c?o.push(d):d.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=TK(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=bK(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Ju(r);if(a)return wk(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),d=i?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),u),m=Object.keys(Tt.elements[e]),y=()=>this.getContext(r,i,n),v=c.resolveNamedOptions(p,m,y,d);return v.$shared&&(v.$shared=l,s[o]=Object.freeze(wk(v,l))),v}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,d=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),d);l=u.createResolver(p,this.getContext(e,r,n))}const c=new rO(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||fy(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){fy(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!fy(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&_c(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}de(ol,"defaults",{}),de(ol,"datasetElementType",null),de(ol,"dataElementType",null);function EK(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=V2(r.sort((i,s)=>i-s))}return t._cache.$bar}function kK(t){const e=t.iScale,n=EK(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Ju(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function IK(t,e,n,r){const i=n.barThickness;let s,o;return Oe(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function CK(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function PK(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function sO(t,e,n,r){return At(t)?PK(t,e,n,r):e[n.axis]=n.parse(t,r),e}function bk(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,d,p;for(c=n,u=n+r;c<u;++c)p=e[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(sO(p,d,s,c));return l}function py(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function AK(t,e,n){return t!==0?ii(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function RK(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function NK(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=RK(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[Tk(u,o,a,l)]=!0,i=c)),s[Tk(i,o,a,l)]=!0,t.borderSkipped=s}function Tk(t,e,n,r){return r?(t=DK(t,e,n),t=Sk(t,n,e)):t=Sk(t,e,n),t}function DK(t,e,n){return t===e?n:t===n?e:t}function Sk(t,e,n){return t==="start"?e:t==="end"?n:t}function OK(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class wf extends ol{parsePrimitiveData(e,n,r,i){return bk(e,n,r,i)}parseArrayData(e,n,r,i){return bk(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,d=[];let p,m,y,v;for(p=r,m=r+i;p<m;++p)v=n[p],y={},y[s.axis]=s.parse(Cl(v,c),p),d.push(sO(Cl(v,u),y,o,p));return d}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=py(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:d,includeOptions:p}=this._getSharedOptions(n,i);for(let m=n;m<n+r;m++){const y=this.getParsed(m),v=s||Oe(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),x=this._calculateBarIndexPixels(m,u),w=(y._stacks||{})[a.axis],b={horizontal:c,base:v.base,enableBorderRadius:!w||py(y._custom)||o===w._top||o===w._bottom,x:c?v.head:x.center,y:c?x.center:v.head,height:c?x.size:Math.abs(v.size),width:c?Math.abs(v.size):x.size};p&&(b.options=d||this.resolveDataElementOptions(m,e[m].active?"active":i));const E=b.options||e[m].options;NK(b,E,w,o),OK(b,E,u.ratio),this.updateElement(e[m],m,b,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const d=u._parsed.find(m=>m[r.axis]===l),p=d&&d[u.vScale.axis];if(Oe(p)||isNaN(p))return!0};for(const u of i)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[we(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||kK(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=py(c);let d=l[n.axis],p=0,m=r?this.applyStack(n,l,r):d,y,v;m!==d&&(p=m-d,m=d),u&&(d=c.barStart,m=c.barEnd-c.barStart,d!==0&&ii(d)!==ii(c.barEnd)&&(p=0),p+=d);const x=!Oe(s)&&!u?s:p;let w=n.getPixelForValue(x);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(p+m):y=w,v=y-w,Math.abs(v)<o){v=AK(v,n,a)*o,d===a&&(w-=v/2);const b=n.getPixelForDecimal(0),E=n.getPixelForDecimal(1),I=Math.min(b,E),C=Math.max(b,E);w=Math.max(Math.min(w,C),I),y=w+v,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(y)-n.getValueForPixel(w))}if(w===n.getPixelForValue(a)){const b=ii(v)*n.getLineWidthForValue(a)/2;w+=b,v-=b}return{size:v,base:w,head:y,center:y+v/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=we(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const u=s?this._getStackCount(e):n.stackCount,d=i.barThickness==="flex"?CK(e,n,i,u*c):IK(e,n,i,u*c),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(we(p,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+m;a=d.start+d.chunk*y+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}de(wf,"id","bar"),de(wf,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),de(wf,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class bf extends ol{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=c7(n,i,o);this._drawStart=a,this._drawCount=l,u7(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(n,i),p=o.axis,m=a.axis,{spanGaps:y,segment:v}=this.options,x=Zu(y)?y:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||i==="none",b=n+r,E=e.length;let I=n>0&&this.getParsed(n-1);for(let C=0;C<E;++C){const M=e[C],S=w?M:{};if(C<n||C>=b){S.skip=!0;continue}const _=this.getParsed(C),k=Oe(_[m]),P=S[p]=o.getPixelForValue(_[p],C),A=S[m]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[m],C);S.skip=isNaN(P)||isNaN(A)||k,S.stop=C>0&&Math.abs(_[p]-I[p])>x,v&&(S.parsed=_,S.raw=c.data[C]),d&&(S.options=u||this.resolveDataElementOptions(C,M.active?"active":i)),w||this.updateElement(M,C,S,i),I=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}de(bf,"id","line"),de(bf,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),de(bf,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function go(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class qw{constructor(e){de(this,"options");this.options=e||{}}static override(e){Object.assign(qw.prototype,e)}init(){}formats(){return go()}parse(){return go()}format(){return go()}add(){return go()}diff(){return go()}startOf(){return go()}endOf(){return go()}}var MK={_date:qw};function jK(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?i7:No;if(r){if(i._sharedOptions){const u=s[0],d=typeof u.getRange=="function"&&u.getRange(e);if(d){const p=c(s,e,n-d),m=c(s,e,n+d);return{lo:p.lo,hi:m.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:d}=i._cachedMeta,{_parsed:p}=t,m=p.slice(0,u.lo+1).reverse().findIndex(v=>!Oe(v[d.axis]));u.lo-=Math.max(0,m);const y=p.slice(u.hi).findIndex(v=>!Oe(v[d.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:s.length-1}}function Vm(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:d,hi:p}=jK(s[a],e,o,i);for(let m=d;m<=p;++m){const y=u[m];y.skip||r(y,c,m)}}}function LK(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function my(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Vm(t,n,e,function(a,l,c){!i&&!eh(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function VK(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=t7(o,{x:e.x,y:e.y});j2(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return Vm(t,n,e,s),i}function FK(t,e,n,r,i,s){let o=[];const a=LK(n);let l=Number.POSITIVE_INFINITY;function c(u,d,p){const m=u.inRange(e.x,e.y,i);if(r&&!m)return;const y=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!m)return;const x=a(e,y);x<l?(o=[{element:u,datasetIndex:d,index:p}],l=x):x===l&&o.push({element:u,datasetIndex:d,index:p})}return Vm(t,n,e,c),o}function gy(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?VK(t,e,n,i):FK(t,e,n,r,i,s)}function Ek(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Vm(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var UK={modes:{index(t,e,n,r){const i=bo(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?my(t,i,s,r,o):gy(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=bo(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?my(t,i,s,r,o):gy(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=bo(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return my(t,i,s,r,o)},nearest(t,e,n,r){const i=bo(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return gy(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=bo(e,t);return Ek(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=bo(e,t);return Ek(t,i,"y",n.intersect,r)}}};const oO=["left","top","right","bottom"];function xc(t,e){return t.filter(n=>n.pos===e)}function kk(t,e){return t.filter(n=>oO.indexOf(n.pos)===-1&&n.box.axis===e)}function wc(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function BK(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function zK(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!oO.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function $K(t,e){const n=zK(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function WK(t){const e=BK(t),n=wc(e.filter(c=>c.box.fullSize),!0),r=wc(xc(e,"left"),!0),i=wc(xc(e,"right")),s=wc(xc(e,"top"),!0),o=wc(xc(e,"bottom")),a=kk(e,"x"),l=kk(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:xc(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function Ik(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function aO(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function HK(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Ee(i)){n.size&&(t[i]-=n.size);const d=r[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[i]+=n.size}s.getPadding&&aO(o,s.getPadding());const a=Math.max(0,e.outerWidth-Ik(o,t,"left","right")),l=Math.max(0,e.outerHeight-Ik(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function qK(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function KK(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Uc(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,KK(a.horizontal,e));const{same:d,other:p}=HK(e,n,a,r);c|=d&&i.length,u=u||p,l.fullSize||i.push(a)}return c&&Uc(i,e,n,r)||u}function Fd(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Ck(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const d=e.w*u,p=c.size||l.height;Ju(c.start)&&(o=c.start),l.fullSize?Fd(l,i.left,o,n.outerWidth-i.right-i.left,p):Fd(l,e.left+c.placed,o,d,p),c.start=o,c.placed+=d,o=l.bottom}else{const d=e.h*u,p=c.size||l.width;Ju(c.start)&&(s=c.start),l.fullSize?Fd(l,s,i.top,p,n.outerHeight-i.bottom-i.top):Fd(l,s,e.top+c.placed,p,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var hr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=mr(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=WK(t.boxes),l=a.vertical,c=a.horizontal;Me(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=l.reduce((v,x)=>x.box.options&&x.box.options.display===!1?v:v+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},i);aO(p,mr(r));const m=Object.assign({maxPadding:p,w:s,h:o,x:i.left,y:i.top},i),y=$K(l.concat(c),d);Uc(a.fullSize,m,d,y),Uc(l,m,d,y),Uc(c,m,d,y)&&Uc(l,m,d,y),qK(m),Ck(a.leftAndTop,m,d,y),m.x+=m.w,m.y+=m.h,Ck(a.rightAndBottom,m,d,y),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Me(a.chartArea,v=>{const x=v.box;Object.assign(x,t.chartArea),x.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class lO{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class GK extends lO{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Tf="$chartjs",YK={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Pk=t=>t===null||t==="";function QK(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Tf]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Pk(i)){const s=dk(t,"width");s!==void 0&&(t.width=s)}if(Pk(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=dk(t,"height");s!==void 0&&(t.height=s)}return t}const cO=Z7?{passive:!0}:!1;function XK(t,e,n){t&&t.addEventListener(e,n,cO)}function JK(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,cO)}function ZK(t,e){const n=YK[t.type]||t.type,{x:r,y:i}=bo(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Dp(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function eG(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Dp(a.addedNodes,r),o=o&&!Dp(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function tG(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Dp(a.removedNodes,r),o=o&&!Dp(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const nh=new Map;let Ak=0;function uO(){const t=window.devicePixelRatio;t!==Ak&&(Ak=t,nh.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function nG(t,e){nh.size||window.addEventListener("resize",uO),nh.set(t,e)}function rG(t){nh.delete(t),nh.size||window.removeEventListener("resize",uO)}function iG(t,e,n){const r=t.canvas,i=r&&Hw(r);if(!i)return;const s=U2((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),nG(t,s),o}function yy(t,e,n){n&&n.disconnect(),e==="resize"&&rG(t)}function sG(t,e,n){const r=t.canvas,i=U2(s=>{t.ctx!==null&&n(ZK(s,t))},t);return XK(r,e,i),i}class oG extends lO{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(QK(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Tf])return!1;const r=n[Tf].initial;["height","width"].forEach(s=>{const o=r[s];Oe(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Tf],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:eG,detach:tG,resize:iG}[n]||sG;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:yy,detach:yy,resize:yy}[n]||JK)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return J7(e,n,r,i)}isAttached(e){const n=e&&Hw(e);return!!(n&&n.isConnected)}}function aG(t){return!Ww()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?GK:oG}var Gd;let Zs=(Gd=class{constructor(){de(this,"x");de(this,"y");de(this,"active",!1);de(this,"options");de(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Zu(this.x)&&Zu(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},de(Gd,"defaults",{}),de(Gd,"defaultRoutes"),Gd);function lG(t,e){const n=t.options.ticks,r=cG(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?hG(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return dG(e,c,s,o/i),c;const u=uG(s,e,i);if(o>0){let d,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(Ud(e,c,u,Oe(m)?0:a-m,a),d=0,p=o-1;d<p;d++)Ud(e,c,u,s[d],s[d+1]);return Ud(e,c,u,l,Oe(m)?e.length:l+m),c}return Ud(e,c,u),c}function cG(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function uG(t,e,n){const r=fG(t),i=e.length/n;if(!r)return Math.max(i,1);const s=Qq(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function hG(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function dG(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Ud(t,e,n,r,i){const s=we(r,0),o=Math.min(we(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function fG(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const pG=t=>t==="left"?"right":t==="right"?"left":t,Rk=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Nk=(t,e)=>Math.min(e||t,t);function Dk(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function mG(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function gG(t,e){Me(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function bc(t){return t.drawTicks?t.tickLength:0}function Ok(t,e){if(!t.display)return 0;const n=yn(t.font,e),r=mr(t.padding);return(At(t.text)?t.text.length:1)*n.lineHeight+r.height}function yG(t,e){return ha(t,{scale:e,type:"scale"})}function vG(t,e,n){return ha(t,{tick:n,index:e,type:"tick"})}function _G(t,e,n){let r=Fw(t);return(n&&e!=="right"||!n&&e==="right")&&(r=pG(r)),r}function xG(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let d=0,p,m,y;const v=o-i,x=a-s;if(t.isHorizontal()){if(m=hn(r,s,a),Ee(n)){const w=Object.keys(n)[0],b=n[w];y=u[w].getPixelForValue(b)+v-e}else n==="center"?y=(c.bottom+c.top)/2+v-e:y=Rk(t,n,e);p=a-s}else{if(Ee(n)){const w=Object.keys(n)[0],b=n[w];m=u[w].getPixelForValue(b)-x+e}else n==="center"?m=(c.left+c.right)/2-x+e:m=Rk(t,n,e);y=hn(r,o,i),d=n==="left"?-Er:Er}return{titleX:m,titleY:y,maxWidth:p,rotation:d}}class $l extends Zs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Lr(e,Number.POSITIVE_INFINITY),n=Lr(n,Number.NEGATIVE_INFINITY),r=Lr(r,Number.POSITIVE_INFINITY),i=Lr(i,Number.NEGATIVE_INFINITY),{min:Lr(e,r),max:Lr(n,i),minDefined:bn(e),maxDefined:bn(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Lr(n,Lr(r,n)),max:Lr(r,Lr(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ze(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=A7(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Dk(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=lG(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ze(this.options.afterUpdate,[this])}beforeSetDimensions(){Ze(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ze(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ze(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ze(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Ze(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Ze(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ze(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Nk(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),d=u.widest.width,p=u.highest.height,m=Xn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),d+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-bc(e.grid)-n.padding-Ok(e.title,this.chart.options.font),c=Math.sqrt(d*d+p*p),o=e7(Math.min(Math.asin(Xn((u.highest.height+6)/a,-1,1)),Math.asin(Xn(l/c,-1,1))-Math.asin(Xn(p/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ze(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ze(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Ok(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=bc(s)+l):(e.height=this.maxHeight,e.width=bc(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:d,highest:p}=this._getLabelSizes(),m=r.padding*2,y=Ro(this.labelRotation),v=Math.cos(y),x=Math.sin(y);if(a){const w=r.mirror?0:x*d.width+v*p.height;e.height=Math.min(this.maxHeight,e.height+w+m)}else{const w=r.mirror?0:v*d.width+x*p.height;e.width=Math.min(this.maxWidth,e.width+w+m)}this._calculatePadding(c,u,x,v)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=i*e.width,m=r*n.height):(p=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,m=n.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=n.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ze(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Oe(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Dk(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/Nk(n,r));let c=0,u=0,d,p,m,y,v,x,w,b,E,I,C;for(d=0;d<n;d+=l){if(y=e[d].label,v=this._resolveTickFontOptions(d),i.font=x=v.string,w=s[x]=s[x]||{data:{},gc:[]},b=v.lineHeight,E=I=0,!Oe(y)&&!At(y))E=ak(i,w.data,w.gc,E,y),I=b;else if(At(y))for(p=0,m=y.length;p<m;++p)C=y[p],!Oe(C)&&!At(C)&&(E=ak(i,w.data,w.gc,E,C),I+=b);o.push(E),a.push(I),c=Math.max(E,c),u=Math.max(I,u)}gG(s,n);const M=o.indexOf(c),S=a.indexOf(u),_=k=>({width:o[k]||0,height:a[k]||0});return{first:_(0),last:_(n-1),widest:_(M),highest:_(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return r7(this._alignToPixels?mo(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=vG(this.getContext(),e,r))}return this.$context||(this.$context=yG(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ro(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),p=bc(s),m=[],y=a.setContext(this.getContext()),v=y.display?y.width:0,x=v/2,w=function(re){return mo(r,re,v)};let b,E,I,C,M,S,_,k,P,A,D,N;if(o==="top")b=w(this.bottom),S=this.bottom-p,k=b-x,A=w(e.top)+x,N=e.bottom;else if(o==="bottom")b=w(this.top),A=e.top,N=w(e.bottom)-x,S=b+x,k=this.top+p;else if(o==="left")b=w(this.right),M=this.right-p,_=b-x,P=w(e.left)+x,D=e.right;else if(o==="right")b=w(this.left),P=e.left,D=w(e.right)-x,M=b+x,_=this.left+p;else if(n==="x"){if(o==="center")b=w((e.top+e.bottom)/2+.5);else if(Ee(o)){const re=Object.keys(o)[0],ne=o[re];b=w(this.chart.scales[re].getPixelForValue(ne))}A=e.top,N=e.bottom,S=b+x,k=S+p}else if(n==="y"){if(o==="center")b=w((e.left+e.right)/2);else if(Ee(o)){const re=Object.keys(o)[0],ne=o[re];b=w(this.chart.scales[re].getPixelForValue(ne))}M=b-x,_=M-p,P=e.left,D=e.right}const q=we(i.ticks.maxTicksLimit,d),te=Math.max(1,Math.ceil(d/q));for(E=0;E<d;E+=te){const re=this.getContext(E),ne=s.setContext(re),z=a.setContext(re),X=ne.lineWidth,Y=ne.color,ye=z.dash||[],pe=z.dashOffset,xe=ne.tickWidth,Ve=ne.tickColor,Fe=ne.tickBorderDash||[],qe=ne.tickBorderDashOffset;I=mG(this,E,l),I!==void 0&&(C=mo(r,I,X),c?M=_=P=D=C:S=k=A=N=C,m.push({tx1:M,ty1:S,tx2:_,ty2:k,x1:P,y1:A,x2:D,y2:N,width:X,color:Y,borderDash:ye,borderDashOffset:pe,tickWidth:xe,tickColor:Ve,tickBorderDash:Fe,tickBorderDashOffset:qe}))}return this._ticksLength=d,this._borderValue=b,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,p=bc(r.grid),m=p+u,y=d?-u:m,v=-Ro(this.labelRotation),x=[];let w,b,E,I,C,M,S,_,k,P,A,D,N="middle";if(i==="top")M=this.bottom-y,S=this._getXAxisLabelAlignment();else if(i==="bottom")M=this.top+y,S=this._getXAxisLabelAlignment();else if(i==="left"){const te=this._getYAxisLabelAlignment(p);S=te.textAlign,C=te.x}else if(i==="right"){const te=this._getYAxisLabelAlignment(p);S=te.textAlign,C=te.x}else if(n==="x"){if(i==="center")M=(e.top+e.bottom)/2+m;else if(Ee(i)){const te=Object.keys(i)[0],re=i[te];M=this.chart.scales[te].getPixelForValue(re)+m}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")C=(e.left+e.right)/2-m;else if(Ee(i)){const te=Object.keys(i)[0],re=i[te];C=this.chart.scales[te].getPixelForValue(re)}S=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?N="top":l==="end"&&(N="bottom"));const q=this._getLabelSizes();for(w=0,b=a.length;w<b;++w){E=a[w],I=E.label;const te=s.setContext(this.getContext(w));_=this.getPixelForTick(w)+s.labelOffset,k=this._resolveTickFontOptions(w),P=k.lineHeight,A=At(I)?I.length:1;const re=A/2,ne=te.color,z=te.textStrokeColor,X=te.textStrokeWidth;let Y=S;o?(C=_,S==="inner"&&(w===b-1?Y=this.options.reverse?"left":"right":w===0?Y=this.options.reverse?"right":"left":Y="center"),i==="top"?c==="near"||v!==0?D=-A*P+P/2:c==="center"?D=-q.highest.height/2-re*P+P:D=-q.highest.height+P/2:c==="near"||v!==0?D=P/2:c==="center"?D=q.highest.height/2-re*P:D=q.highest.height-A*P,d&&(D*=-1),v!==0&&!te.showLabelBackdrop&&(C+=P/2*Math.sin(v))):(M=_,D=(1-A)*P/2);let ye;if(te.showLabelBackdrop){const pe=mr(te.backdropPadding),xe=q.heights[w],Ve=q.widths[w];let Fe=D-pe.top,qe=0-pe.left;switch(N){case"middle":Fe-=xe/2;break;case"bottom":Fe-=xe;break}switch(S){case"center":qe-=Ve/2;break;case"right":qe-=Ve;break;case"inner":w===b-1?qe-=Ve:w>0&&(qe-=Ve/2);break}ye={left:qe,top:Fe,width:Ve+pe.width,height:xe+pe.height,color:te.backdropColor}}x.push({label:I,font:k,textOffset:D,options:{rotation:v,color:ne,strokeColor:z,strokeWidth:X,textAlign:Y,textBaseline:N,translation:[C,M],backdrop:ye}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ro(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,d,p;this.isHorizontal()?(c=mo(e,this.left,o)-o/2,u=mo(e,this.right,a)+a/2,d=p=l):(d=mo(e,this.top,o)-o/2,p=mo(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Mm(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;th(r,c,0,u,l,a)}i&&jm(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=yn(r.font),o=mr(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Ee(n)?(l+=o.bottom,At(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:d,rotation:p}=xG(this,l,n,a);th(e,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:p,textAlign:_G(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=we(e.grid&&e.grid.z,-1),i=we(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==$l.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return yn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Bd{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;TG(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,wG(e,o,r),this.override&&Tt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Tt[i]&&(delete Tt[i][r],this.override&&delete ea[r])}}function wG(t,e,n){const r=Xu(Object.create(null),[n?Tt.get(n):{},Tt.get(e),t.defaults]);Tt.set(e,r),t.defaultRoutes&&bG(e,t.defaultRoutes),t.descriptors&&Tt.describe(e,t.descriptors)}function bG(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Tt.route(s,i,l,a)})}function TG(t){return"id"in t&&"defaults"in t}class SG{constructor(){this.controllers=new Bd(ol,"datasets",!0),this.elements=new Bd(Zs,"elements"),this.plugins=new Bd(Object,"plugins"),this.scales=new Bd($l,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Me(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=Lw(e);Ze(r["before"+i],[],r),n[e](r),Ze(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Br=new SG;class EG{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Ze(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Oe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=we(r.options&&r.options.plugins,{}),s=kG(r);return i===!1&&!n?[]:CG(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function kG(t){const e={},n=[],r=Object.keys(Br.plugins.items);for(let s=0;s<r.length;s++)n.push(Br.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function IG(t,e){return!e&&t===!1?null:t===!0?{}:t}function CG(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=IG(r[l],i);c!==null&&s.push({plugin:a,options:PG(t.config,{plugin:a,local:n[l]},c,o)})}return s}function PG(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function v_(t,e){const n=Tt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function AG(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function RG(t,e){return t===e?"_index_":"_value_"}function Mk(t){if(t==="x"||t==="y"||t==="r")return t}function NG(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function __(t,...e){if(Mk(t))return t;for(const n of e){const r=n.axis||NG(n.position)||t.length>1&&Mk(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function jk(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function DG(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return jk(t,"x",n[0])||jk(t,"y",n[0])}return{}}function OG(t,e){const n=ea[t.type]||{scales:{}},r=e.scales||{},i=v_(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Ee(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=__(o,a,DG(o,t),Tt.scales[a.type]),c=RG(l,i),u=n.scales||{};s[o]=uu(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||v_(a,e),u=(ea[a]||{}).scales||{};Object.keys(u).forEach(d=>{const p=AG(d,l),m=o[p+"AxisID"]||p;s[m]=s[m]||Object.create(null),uu(s[m],[{axis:p},r[m],u[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];uu(a,[Tt.scales[a.type],Tt.scale])}),s}function hO(t){const e=t.options||(t.options={});e.plugins=we(e.plugins,{}),e.scales=OG(t,e)}function dO(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function MG(t){return t=t||{},t.data=dO(t.data),hO(t),t}const Lk=new Map,fO=new Set;function zd(t,e){let n=Lk.get(t);return n||(n=e(),Lk.set(t,n),fO.add(n)),n}const Tc=(t,e,n)=>{const r=Cl(e,n);r!==void 0&&t.add(r)};class jG{constructor(e){this._config=MG(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=dO(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),hO(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return zd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return zd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return zd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return zd(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>Tc(l,e,d))),u.forEach(d=>Tc(l,i,d)),u.forEach(d=>Tc(l,ea[s]||{},d)),u.forEach(d=>Tc(l,Tt,d)),u.forEach(d=>Tc(l,g_,d))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),fO.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,ea[n]||{},Tt.datasets[n]||{},{type:n},Tt,g_]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Vk(this._resolverCache,e,i);let l=o;if(VG(o,n)){s.$shared=!1,r=Ws(r)?r():r;const c=this.createResolver(e,r,a);l=Pl(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=Vk(this._resolverCache,e,r);return Ee(n)?Pl(s,n,void 0,i):s}}function Vk(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:Bw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const LG=t=>Ee(t)&&Object.getOwnPropertyNames(t).some(e=>Ws(t[e]));function VG(t,e){const{isScriptable:n,isIndexable:r}=q2(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Ws(a)||LG(a))||o&&At(a))return!0}return!1}var FG="4.5.0";const UG=["top","bottom","left","right","chartArea"];function Fk(t,e){return t==="top"||t==="bottom"||UG.indexOf(t)===-1&&e==="x"}function Uk(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Bk(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ze(n&&n.onComplete,[t],e)}function BG(t){const e=t.chart,n=e.options.animation;Ze(n&&n.onProgress,[t],e)}function pO(t){return Ww()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Sf={},zk=t=>{const e=pO(t);return Object.values(Sf).filter(n=>n.canvas===e).pop()};function zG(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function $G(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var rs;let Fm=(rs=class{static register(...e){Br.add(...e),$k()}static unregister(...e){Br.remove(...e),$k()}constructor(e,n){const r=this.config=new jG(n),i=pO(e),s=zk(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||aG(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Bq(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new EG,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=a7(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Sf[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}_i.listen(this,"complete",Bk),_i.listen(this,"progress",BG),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Oe(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Br}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():hk(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return lk(this.canvas,this.ctx),this}stop(){return _i.stop(this),this}resize(e,n){_i.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,hk(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ze(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Me(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=__(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Me(s,o=>{const a=o.options,l=a.id,c=__(l,a),u=we(a.type,o.dtype);(a.position===void 0||Fk(a.position,c)!==Fk(o.dposition))&&(a.position=o.dposition),i[l]=!0;let d=null;if(l in r&&r[l].type===u)d=r[l];else{const p=Br.getScale(u);d=new p({id:l,type:u,ctx:this.ctx,chart:this}),r[d.id]=d}d.init(a,e)}),Me(i,(o,a)=>{o||delete r[a]}),Me(r,o=>{hr.configure(this,o,o.options),hr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Uk("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||v_(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Br.getController(a),{datasetElementType:c,dataElementType:u}=Tt.datasets[a];Object.assign(l,{dataElementType:Br.getElement(u),datasetElementType:c&&Br.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Me(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:d}=this.getDatasetMeta(c),p=!i&&s.indexOf(d)===-1;d.buildOrUpdateElements(p),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Me(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Uk("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Me(this.scales,e=>{hr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!J1(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;zG(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!J1(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;hr.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Me(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Ws(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(_i.has(this)?this.attached&&!_i.running(this)&&_i.start(this):(this.draw(),Bk({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=nO(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Mm(n,i),e.controller.draw(),i&&jm(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return eh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=UK.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=ha(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Ju(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),_i.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),lk(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Sf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Me(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Me(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Me(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Cp(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(d=>u.datasetIndex===d.datasetIndex&&u.index===d.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=Kq(e),c=$G(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Ze(s.onHover,[e,a,this],this),l&&Ze(s.onClick,[e,a,this],this));const u=!Cp(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},de(rs,"defaults",Tt),de(rs,"instances",Sf),de(rs,"overrides",ea),de(rs,"registry",Br),de(rs,"version",FG),de(rs,"getChart",zk),rs);function $k(){return Me(Fm.instances,t=>t._plugins.invalidate())}function mO(t,e,n=e){t.lineCap=we(n.borderCapStyle,e.borderCapStyle),t.setLineDash(we(n.borderDash,e.borderDash)),t.lineDashOffset=we(n.borderDashOffset,e.borderDashOffset),t.lineJoin=we(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=we(n.borderWidth,e.borderWidth),t.strokeStyle=we(n.borderColor,e.borderColor)}function WG(t,e,n){t.lineTo(n.x,n.y)}function HG(t){return t.stepped?w7:t.tension||t.cubicInterpolationMode==="monotone"?b7:WG}function gO(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function qG(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=gO(i,n,r),u=HG(s);let{move:d=!0,reverse:p}=r||{},m,y,v;for(m=0;m<=c;++m)y=i[(a+(p?c-m:m))%o],!y.skip&&(d?(t.moveTo(y.x,y.y),d=!1):u(t,v,y,p,s.stepped),v=y);return l&&(y=i[(a+(p?c:0))%o],u(t,v,y,p,s.stepped)),!!l}function KG(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=gO(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,d=0,p,m,y,v,x,w;const b=I=>(o+(c?a-I:I))%s,E=()=>{v!==x&&(t.lineTo(u,x),t.lineTo(u,v),t.lineTo(u,w))};for(l&&(m=i[b(0)],t.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=i[b(p)],m.skip)continue;const I=m.x,C=m.y,M=I|0;M===y?(C<v?v=C:C>x&&(x=C),u=(d*u+I)/++d):(E(),t.lineTo(I,C),y=M,d=0,v=x=C),w=C}E()}function x_(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?KG:qG}function GG(t){return t.stepped?eK:t.tension||t.cubicInterpolationMode==="monotone"?tK:To}function YG(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),mO(t,e.options),t.stroke(i)}function QG(t,e,n,r){const{segments:i,options:s}=e,o=x_(e);for(const a of i)mO(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const XG=typeof Path2D=="function";function JG(t,e,n,r){XG&&!e.options.segment?YG(t,e,n,r):QG(t,e,n,r)}class ws extends Zs{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;q7(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=aK(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=tO(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=GG(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:d,end:p}=o[c],m=s[d],y=s[p];if(m===y){a.push(m);continue}const v=Math.abs((i-m[n])/(y[n]-m[n])),x=l(m,y,v,r.stepped);x[n]=e[n],a.push(x)}return a.length===1?a[0]:a}pathSegment(e,n,r){return x_(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=x_(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),JG(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}de(ws,"id","line"),de(ws,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),de(ws,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),de(ws,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Wk(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Ef extends Zs{constructor(n){super();de(this,"parsed");de(this,"skip");de(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return Wk(this,n,"x",r)}inYRange(n,r){return Wk(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!eh(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,y_(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}de(Ef,"id","point"),de(Ef,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),de(Ef,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function yO(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,d;return t.horizontal?(d=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-d,u=r+d):(d=s/2,a=n-d,l=n+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function bs(t,e,n,r){return t?0:Xn(e,n,r)}function ZG(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=H2(r);return{t:bs(i.top,s.top,0,n),r:bs(i.right,s.right,0,e),b:bs(i.bottom,s.bottom,0,n),l:bs(i.left,s.left,0,e)}}function eY(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=il(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Ee(i);return{topLeft:bs(!l||a.top||a.left,s.topLeft,0,o),topRight:bs(!l||a.top||a.right,s.topRight,0,o),bottomLeft:bs(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:bs(!l||a.bottom||a.right,s.bottomRight,0,o)}}function tY(t){const e=yO(t),n=e.right-e.left,r=e.bottom-e.top,i=ZG(t,n/2,r/2),s=eY(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function vy(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&yO(t,r);return a&&(i||xs(e,a.left,a.right))&&(s||xs(n,a.top,a.bottom))}function nY(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function rY(t,e){t.rect(e.x,e.y,e.w,e.h)}function _y(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class kf extends Zs{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=tY(this),a=nY(o.radius)?Rp:rY;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,_y(o,n,s)),e.clip(),a(e,_y(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,_y(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return vy(this,e,n,r)}inXRange(e,n){return vy(this,e,null,n)}inYRange(e,n){return vy(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}de(kf,"id","bar"),de(kf,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),de(kf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function iY(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=Um(l,c,i);const u=w_(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const d=tO(e,u);for(const p of d){const m=w_(n,s[p.start],s[p.end],p.loop),y=eO(a,i,m);for(const v of y)o.push({source:v,target:p,start:{[n]:Hk(u,m,"start",Math.max)},end:{[n]:Hk(u,m,"end",Math.min)}})}}return o}function w_(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=zr(i),s=zr(s)),{property:t,start:i,end:s}}function sY(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=Um(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function Um(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function Hk(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function vO(t,e){let n=[],r=!1;return At(t)?(r=!0,n=t):n=sY(t,e),n.length?new ws({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function qk(t){return t&&t.fill!==!1}function oY(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!bn(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function aY(t,e,n){const r=hY(t);if(Ee(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return bn(i)&&Math.floor(i)===i?lY(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function lY(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function cY(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Ee(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function uY(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Ee(t)?r=t.value:r=e.getBaseValue(),r}function hY(t){const e=t.options,n=e.fill;let r=we(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function dY(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=fY(e,n);a.push(vO({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)pY(i,o[u],a)}return new ws({points:i,options:{}})}function fY(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function pY(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=mY(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function mY(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],d=o[u.start][n],p=o[u.end][n];if(xs(i,d,p)){a=i===d,l=i===p;break}}return{first:a,last:l,point:r}}class _O{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Cr},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function gY(t){const{chart:e,fill:n,line:r}=t;if(bn(n))return yY(e,n);if(n==="stack")return dY(t);if(n==="shape")return!0;const i=vY(t);return i instanceof _O?i:vO(i,r)}function yY(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function vY(t){return(t.scale||{}).getPointPositionForValue?xY(t):_Y(t)}function _Y(t){const{scale:e={},fill:n}=t,r=cY(n,e);if(bn(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function xY(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=uY(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new _O({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function xy(t,e,n){const r=gY(e),{chart:i,index:s,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,d=c.backgroundColor,{above:p=d,below:m=d}=u||{},y=i.getDatasetMeta(s),v=nO(i,y);r&&o.points.length&&(Mm(t,n),wY(t,{line:o,target:r,above:p,below:m,area:n,scale:a,axis:l,clip:v}),jm(t))}function wY(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=s;s!==i&&(c==="x"?(Kk(t,r,o.top),wy(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),Kk(t,r,o.bottom)):c==="y"&&(Gk(t,r,o.left),wy(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),Gk(t,r,o.right),u=i)),wy(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function Kk(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],d=i[Um(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Gk(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],d=i[Um(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,d.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function wy(t,e){const{line:n,target:r,property:i,color:s,scale:o,clip:a}=e,l=iY(n,r,i);for(const{source:c,target:u,start:d,end:p}of l){const{style:{backgroundColor:m=s}={}}=c,y=r!==!0;t.save(),t.fillStyle=m,bY(t,o,a,y&&w_(i,d,p)),t.beginPath();const v=!!n.pathSegment(t,c);let x;if(y){v?t.closePath():Yk(t,r,p,i);const w=!!r.pathSegment(t,u,{move:v,reverse:!0});x=v&&w,x||Yk(t,r,d,i)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function bY(t,e,n,r){const i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let l,c,u,d;s==="x"?(l=o,c=i.top,u=a,d=i.bottom):(l=i.left,c=o,u=i.right,d=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),d=Math.min(d,n.bottom)),t.rect(l,c,u-l,d-c),t.clip()}}function Yk(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var TY={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof ws&&(l={visible:t.isDatasetVisible(o),index:o,fill:aY(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=oY(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&xy(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;qk(s)&&xy(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!qk(r)||n.drawTime!=="beforeDatasetDraw"||xy(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Qk=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},SY=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Xk extends Zs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ze(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=yn(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Qk(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let d=e;s.textAlign="left",s.textBaseline="middle";let p=-1,m=-u;return this.legendItems.forEach((y,v)=>{const x=r+n/2+s.measureText(y.text).width;(v===0||c[c.length-1]+x+2*a>o)&&(d+=u,c[c.length-(v>0?0:1)]=0,m+=u,p++),l[v]={left:0,top:m,row:p,width:x,height:i},c[c.length-1]+=x+a}),d}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let d=a,p=0,m=0,y=0,v=0;return this.legendItems.forEach((x,w)=>{const{itemWidth:b,itemHeight:E}=EY(r,n,s,x,i);w>0&&m+E+2*a>u&&(d+=p+a,c.push({width:p,height:m}),y+=p+a,v++,p=m=0),l[w]={left:y,top:m,col:v,width:b,height:E},p=Math.max(p,b),m+=E+a}),d+=p,c.push({width:p,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=sl(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=hn(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=hn(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=hn(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=hn(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Mm(e,this),this._draw(),jm(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Tt.color,l=sl(e.rtl,this.left,this.width),c=yn(o.font),{padding:u}=o,d=c.size,p=d/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:y,boxHeight:v,itemHeight:x}=Qk(o,d),w=function(M,S,_){if(isNaN(y)||y<=0||isNaN(v)||v<0)return;i.save();const k=we(_.lineWidth,1);if(i.fillStyle=we(_.fillStyle,a),i.lineCap=we(_.lineCap,"butt"),i.lineDashOffset=we(_.lineDashOffset,0),i.lineJoin=we(_.lineJoin,"miter"),i.lineWidth=k,i.strokeStyle=we(_.strokeStyle,a),i.setLineDash(we(_.lineDash,[])),o.usePointStyle){const P={radius:v*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:k},A=l.xPlus(M,y/2),D=S+p;$2(i,P,A,D,o.pointStyleWidth&&y)}else{const P=S+Math.max((d-v)/2,0),A=l.leftForLtr(M,y),D=il(_.borderRadius);i.beginPath(),Object.values(D).some(N=>N!==0)?Rp(i,{x:A,y:P,w:y,h:v,radius:D}):i.rect(A,P,y,v),i.fill(),k!==0&&i.stroke()}i.restore()},b=function(M,S,_){th(i,_.text,M,S+x/2,c,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},E=this.isHorizontal(),I=this._computeTitleHeight();E?m={x:hn(s,this.left+u,this.right-r[0]),y:this.top+u+I,line:0}:m={x:this.left+u,y:hn(s,this.top+I+u,this.bottom-n[0].height),line:0},X2(this.ctx,e.textDirection);const C=x+u;this.legendItems.forEach((M,S)=>{i.strokeStyle=M.fontColor,i.fillStyle=M.fontColor;const _=i.measureText(M.text).width,k=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),P=y+p+_;let A=m.x,D=m.y;l.setWidth(this.width),E?S>0&&A+P+u>this.right&&(D=m.y+=C,m.line++,A=m.x=hn(s,this.left+u,this.right-r[m.line])):S>0&&D+C>this.bottom&&(A=m.x=A+n[m.line].width+u,m.line++,D=m.y=hn(s,this.top+I+u,this.bottom-n[m.line].height));const N=l.x(A);if(w(N,D,M),A=l7(k,A+y+p,E?A+P:this.right,e.rtl),b(l.x(A),D,M),E)m.x+=P+u;else if(typeof M.text!="string"){const q=c.lineHeight;m.y+=xO(M,q)+u}else m.y+=C}),J2(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=yn(n.font),i=mr(n.padding);if(!n.display)return;const s=sl(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,d=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,d=hn(e.align,d,this.right-p);else{const y=this.columnSizes.reduce((v,x)=>Math.max(v,x.height),0);u=c+hn(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const m=hn(a,d,d+p);o.textAlign=s.textAlign(Fw(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,th(o,n.text,m,u,r)}_computeTitleHeight(){const e=this.options.title,n=yn(e.font),r=mr(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(xs(e,this.left,this.right)&&xs(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],xs(e,i.left,i.left+i.width)&&xs(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!CY(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=SY(i,r);i&&!s&&Ze(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Ze(n.onHover,[e,r,this],this)}else r&&Ze(n.onClick,[e,r,this],this)}}function EY(t,e,n,r,i){const s=kY(r,t,e,n),o=IY(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function kY(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function IY(t,e,n){let r=t;return typeof e.text!="string"&&(r=xO(e,n)),r}function xO(t,e){const n=t.text?t.text.length:0;return e*n}function CY(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var PY={id:"legend",_element:Xk,start(t,e,n){const r=t.legend=new Xk({ctx:t.ctx,options:n,chart:t});hr.configure(t,r,n),hr.addBox(t,r)},stop(t){hr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;hr.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=mr(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class wO extends Zs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=At(r.text)?r.text.length:1;this._padding=mr(r.padding);const s=i*yn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,d;return this.isHorizontal()?(u=hn(a,r,s),d=n+e,c=s-r):(o.position==="left"?(u=r+e,d=hn(a,i,n),l=zt*-.5):(u=s-e,d=hn(a,n,i),l=zt*.5),c=i-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=yn(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);th(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:Fw(n.align),textBaseline:"middle",translation:[o,a]})}}function AY(t,e){const n=new wO({ctx:t.ctx,options:e,chart:t});hr.configure(t,n,e),hr.addBox(t,n),t.titleBlock=n}var RY={id:"title",_element:wO,start(t,e,n){AY(t,n)},stop(t){const e=t.titleBlock;hr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;hr.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Bc={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=m_(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function Fr(t,e){return e&&(At(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function NY(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Jk(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=yn(e.bodyFont),c=yn(e.titleFont),u=yn(e.footerFont),d=s.length,p=i.length,m=r.length,y=mr(e.padding);let v=y.height,x=0,w=r.reduce((I,C)=>I+C.before.length+C.lines.length+C.after.length,0);if(w+=t.beforeBody.length+t.afterBody.length,d&&(v+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),w){const I=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;v+=m*I+(w-m)*l.lineHeight+(w-1)*e.bodySpacing}p&&(v+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let b=0;const E=function(I){x=Math.max(x,n.measureText(I).width+b)};return n.save(),n.font=c.string,Me(t.title,E),n.font=l.string,Me(t.beforeBody.concat(t.afterBody),E),b=e.displayColors?o+2+e.boxPadding:0,Me(r,I=>{Me(I.before,E),Me(I.lines,E),Me(I.after,E)}),b=0,n.font=u.string,Me(t.footer,E),n.restore(),x+=y.width,{width:x,height:v}}function DY(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function OY(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function MY(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),OY(c,t,e,n)&&(c="center"),c}function Zk(t,e,n){const r=n.yAlign||e.yAlign||DY(t,n);return{xAlign:n.xAlign||e.xAlign||MY(t,e,n,r),yAlign:r}}function jY(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function LY(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function eI(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:d,bottomLeft:p,bottomRight:m}=il(o);let y=jY(e,a);const v=LY(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,p)+i:a==="right"&&(y+=Math.max(d,m)+i),{x:Xn(y,0,r.width-e.width),y:Xn(v,0,r.height-e.height)}}function $d(t,e,n){const r=mr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function tI(t){return Fr([],xi(t))}function VY(t,e,n){return ha(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function nI(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const bO={beforeTitle:yi,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:yi,beforeBody:yi,beforeLabel:yi,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Oe(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:yi,afterBody:yi,beforeFooter:yi,footer:yi,afterFooter:yi};function Nn(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?bO[e].call(n,r):i}class b_ extends Zs{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new rO(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=VY(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Nn(r,"beforeTitle",this,e),s=Nn(r,"title",this,e),o=Nn(r,"afterTitle",this,e);let a=[];return a=Fr(a,xi(i)),a=Fr(a,xi(s)),a=Fr(a,xi(o)),a}getBeforeBody(e,n){return tI(Nn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Me(e,s=>{const o={before:[],lines:[],after:[]},a=nI(r,s);Fr(o.before,xi(Nn(a,"beforeLabel",this,s))),Fr(o.lines,Nn(a,"label",this,s)),Fr(o.after,xi(Nn(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return tI(Nn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Nn(r,"beforeFooter",this,e),s=Nn(r,"footer",this,e),o=Nn(r,"afterFooter",this,e);let a=[];return a=Fr(a,xi(i)),a=Fr(a,xi(s)),a=Fr(a,xi(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(NY(this.chart,n[l]));return e.filter&&(a=a.filter((u,d,p)=>e.filter(u,d,p,r))),e.itemSort&&(a=a.sort((u,d)=>e.itemSort(u,d,r))),Me(a,u=>{const d=nI(e.callbacks,u);i.push(Nn(d,"labelColor",this,u)),s.push(Nn(d,"labelPointStyle",this,u)),o.push(Nn(d,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Bc[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=Jk(this,r),c=Object.assign({},a,l),u=Zk(this.chart,r,c),d=eI(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:d}=il(a),{x:p,y:m}=e,{width:y,height:v}=n;let x,w,b,E,I,C;return s==="center"?(I=m+v/2,i==="left"?(x=p,w=x-o,E=I+o,C=I-o):(x=p+y,w=x+o,E=I-o,C=I+o),b=x):(i==="left"?w=p+Math.max(l,u)+o:i==="right"?w=p+y-Math.max(c,d)-o:w=this.caretX,s==="top"?(E=m,I=E-o,x=w-o,b=w+o):(E=m+v,I=E+o,x=w+o,b=w-o),C=E),{x1:x,x2:w,x3:b,y1:E,y2:I,y3:C}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=sl(r.rtl,this.x,this.width);for(e.x=$d(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=yn(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=yn(s.bodyFont),d=$d(this,"left",s),p=i.x(d),m=l<u.lineHeight?(u.lineHeight-l)/2:0,y=n.y+m;if(s.usePointStyle){const v={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=i.leftForLtr(p,c)+c/2,w=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,y_(e,v,x,w),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,y_(e,v,x,w)}else{e.lineWidth=Ee(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=i.leftForLtr(p,c),x=i.leftForLtr(i.xPlus(p,1),c-2),w=il(o.borderRadius);Object.values(w).some(b=>b!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Rp(e,{x:v,y,w:c,h:l,radius:w}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Rp(e,{x,y:y+1,w:c-2,h:l-2,radius:w}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(v,y,c,l),e.strokeRect(v,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,d=yn(r.bodyFont);let p=d.lineHeight,m=0;const y=sl(r.rtl,this.x,this.width),v=function(_){n.fillText(_,y.x(e.x+m),e.y+p/2),e.y+=p+s},x=y.textAlign(o);let w,b,E,I,C,M,S;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=$d(this,x,r),n.fillStyle=r.bodyColor,Me(this.beforeBody,v),m=a&&x!=="right"?o==="center"?c/2+u:c+2+u:0,I=0,M=i.length;I<M;++I){for(w=i[I],b=this.labelTextColors[I],n.fillStyle=b,Me(w.before,v),E=w.lines,a&&E.length&&(this._drawColorBox(n,e,I,y,r),p=Math.max(d.lineHeight,l)),C=0,S=E.length;C<S;++C)v(E[C]),p=d.lineHeight;Me(w.after,v)}m=0,p=d.lineHeight,Me(this.afterBody,v),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=sl(r.rtl,this.x,this.width);for(e.x=$d(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=yn(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:d,topRight:p,bottomLeft:m,bottomRight:y}=il(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-y),n.quadraticCurveTo(a+c,l+u,a+c-y,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+u),n.quadraticCurveTo(a,l+u,a,l+u-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Bc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Jk(this,e),l=Object.assign({},o,this._size),c=Zk(n,e,l),u=eI(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=mr(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),X2(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),J2(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Cp(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!Cp(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Bc[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}de(b_,"positioners",Bc);var FY={id:"tooltip",_element:b_,positioners:Bc,afterInit(t,e,n){n&&(t.tooltip=new b_({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:bO},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const UY=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function BY(t,e,n,r){const i=t.indexOf(e);if(i===-1)return UY(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const zY=(t,e)=>t===null?null:Xn(Math.round(t),0,e);function rI(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class T_ extends $l{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Oe(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:BY(r,e,we(n,e),this._addedLabels),zY(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return rI.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}de(T_,"id","category"),de(T_,"defaults",{ticks:{callback:rI}});function $Y(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:p}=t,m=s||1,y=u-1,{min:v,max:x}=e,w=!Oe(o),b=!Oe(a),E=!Oe(c),I=(x-v)/(d+1);let C=ek((x-v)/y/m)*m,M,S,_,k;if(C<1e-14&&!w&&!b)return[{value:v},{value:x}];k=Math.ceil(x/C)-Math.floor(v/C),k>y&&(C=ek(k*C/y/m)*m),Oe(l)||(M=Math.pow(10,l),C=Math.ceil(C*M)/M),i==="ticks"?(S=Math.floor(v/C)*C,_=Math.ceil(x/C)*C):(S=v,_=x),w&&b&&s&&Jq((a-o)/s,C/1e3)?(k=Math.round(Math.min((a-o)/C,u)),C=(a-o)/k,S=o,_=a):E?(S=w?o:S,_=b?a:_,k=c-1,C=(_-S)/k):(k=(_-S)/C,hu(k,Math.round(k),C/1e3)?k=Math.round(k):k=Math.ceil(k));const P=Math.max(tk(C),tk(S));M=Math.pow(10,Oe(l)?P:l),S=Math.round(S*M)/M,_=Math.round(_*M)/M;let A=0;for(w&&(p&&S!==o?(n.push({value:o}),S<o&&A++,hu(Math.round((S+A*C)*M)/M,o,iI(o,I,t))&&A++):S<o&&A++);A<k;++A){const D=Math.round((S+A*C)*M)/M;if(b&&D>a)break;n.push({value:D})}return b&&p&&_!==a?n.length&&hu(n[n.length-1].value,a,iI(a,I,t))?n[n.length-1].value=a:n.push({value:a}):(!b||_===a)&&n.push({value:_}),n}function iI(t,e,{horizontal:n,minRotation:r}){const i=Ro(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class WY extends $l{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Oe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=ii(i),c=ii(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=$Y(i,s);return e.bounds==="ticks"&&Zq(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return B2(e,this.chart.options.locale,this.options.ticks.format)}}class S_ extends WY{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=bn(e)?e:0,this.max=bn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Ro(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}de(S_,"id","linear"),de(S_,"defaults",{ticks:{callback:z2.formatters.numeric}});const Bm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ln=Object.keys(Bm);function sI(t,e){return t-e}function oI(t,e){if(Oe(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),bn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Zu(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function aI(t,e,n,r){const i=Ln.length;for(let s=Ln.indexOf(t);s<i-1;++s){const o=Bm[Ln[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Ln[s]}return Ln[i-1]}function HY(t,e,n,r,i){for(let s=Ln.length-1;s>=Ln.indexOf(n);s--){const o=Ln[s];if(Bm[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Ln[n?Ln.indexOf(n):0]}function qY(t){for(let e=Ln.indexOf(t)+1,n=Ln.length;e<n;++e)if(Bm[Ln[e]].common)return Ln[e]}function lI(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=Vw(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function KY(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function cI(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:KY(t,r,i,n)}class Op extends $l{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new MK._date(e.adapters.date);i.init(n),uu(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:oI(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=bn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=bn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=s7(i,s,o);return this._unit=n.unit||(r.autoSkip?aI(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):HY(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:qY(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),cI(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Xn(n,0,o),r=Xn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||aI(s.minUnit,n,r,this._getLabelCapacity(n)),a=we(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Zu(l)||l===!0,u={};let d=n,p,m;if(c&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(p=d,m=0;p<r;p=+e.add(p,a,o),m++)lI(u,p,y);return(p===r||i.bounds==="ticks"||m===1)&&lI(u,p,y),Object.keys(u).sort(sI).map(v=>+v)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Ze(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],d=c&&a[c],p=r[n],m=c&&d&&p&&p.major;return this._adapter.format(e,i||(m?d:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Ro(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,cI(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(oI(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return V2(e.sort(sI))}}de(Op,"id","time"),de(Op,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Wd(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=No(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=No(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class uI extends Op{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Wd(n,this.min),this._tableRange=Wd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Wd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Wd(this._table,r*this._tableRange+this._minPos,!0)}}de(uI,"id","timeseries"),de(uI,"defaults",Op.defaults);const TO="label";function hI(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function GY(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function SO(t,e){t.labels=e}function EO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:TO;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function YY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:TO;const n={labels:[],datasets:[]};return SO(n,t.labels),EO(n,t.datasets,e),n}function QY(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:d,...p}=t,m=O.useRef(null),y=O.useRef(null),v=()=>{m.current&&(y.current=new Fm(m.current,{type:o,data:YY(a,s),options:l&&{...l},plugins:c}),hI(e,y.current))},x=()=>{hI(e,null),y.current&&(y.current.destroy(),y.current=null)};return O.useEffect(()=>{!i&&y.current&&l&&GY(y.current,l)},[i,l]),O.useEffect(()=>{!i&&y.current&&SO(y.current.config.data,a.labels)},[i,a.labels]),O.useEffect(()=>{!i&&y.current&&a.datasets&&EO(y.current.config.data,a.datasets,s)},[i,a.datasets]),O.useEffect(()=>{y.current&&(i?(x(),setTimeout(v)):y.current.update(d))},[i,l,a.labels,a.datasets,d]),O.useEffect(()=>{y.current&&(x(),setTimeout(v))},[o]),O.useEffect(()=>(v(),()=>x()),[]),it.createElement("canvas",{ref:m,role:"img",height:n,width:r,...p},u)}const XY=O.forwardRef(QY);function kO(t,e){return Fm.register(e),O.forwardRef((n,r)=>it.createElement(XY,{...n,ref:r,type:t}))}const JY=kO("line",bf),ZY=kO("bar",wf);Fm.register(T_,S_,kf,Ef,ws,RY,FY,PY,TY);function un(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const eQ=t=>{if(!t)return"";const e=Math.floor((new Date-un(t))/1e3);let n=e/31536e3;return n>1?Math.floor(n)+" anni fa":(n=e/2592e3,n>1?Math.floor(n)+" mesi fa":(n=e/86400,n>1?Math.floor(n)+" gg fa":(n=e/3600,n>1?Math.floor(n)+" ore fa":(n=e/60,n>1?Math.floor(n)+" min fa":"ora"))))},by=({title:t,value:e,icon:n,isCurrency:r=!1,isPercentage:i=!1})=>f.jsxs("div",{className:"bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md h-full",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:"text-muted",children:n}),f.jsx("p",{className:"text-muted text-sm",children:t})]}),f.jsx("p",{className:"text-2xl font-bold text-foreground mt-2",children:r?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):i?`${e}%`:e})]}),tQ=({item:t,navigate:e})=>{const n={expiring:f.jsx(I9,{className:"text-yellow-400"}),new_check:f.jsx(Yx,{className:"text-green-400"}),new_anamnesi:f.jsx(Qx,{className:"text-blue-400"})},r={expiring:"payments",new_check:"checks",new_anamnesi:"anamnesi"};return f.jsxs(We.button,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e(`/client/${t.clientId}?tab=${r[t.type]}`),className:"w-full flex items-start gap-3 p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors text-left",children:[f.jsx("div",{className:"mt-1 flex-shrink-0",children:n[t.type]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm font-semibold",children:t.clientName}),f.jsx("p",{className:"text-xs text-muted",children:t.description})]}),f.jsx("div",{className:"text-xs text-muted flex-shrink-0",children:eQ(t.date)})]})},nQ=({dataType:t,setDataType:e,timeRange:n,setTimeRange:r})=>f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mt-4",children:[f.jsxs("div",{className:"flex bg-card/50 p-1 rounded-lg border border-white/10 backdrop-blur-sm",children:[f.jsx("button",{onClick:()=>e("revenue"),className:`px-3 py-1 text-sm rounded-md transition ${t==="revenue"?"bg-primary text-white":"text-muted"}`,children:"Fatturato"}),f.jsx("button",{onClick:()=>e("clients"),className:`px-3 py-1 text-sm rounded-md transition ${t==="clients"?"bg-primary text-white":"text-muted"}`,children:"Nuovi Clienti"})]}),f.jsxs("div",{className:"flex bg-card/50 p-1 rounded-lg border border-white/10 backdrop-blur-sm",children:[f.jsx("button",{onClick:()=>r("monthly"),className:`px-3 py-1 text-sm rounded-md transition ${n==="monthly"?"bg-white/10 text-white":"text-muted"}`,children:"Mese"}),f.jsx("button",{onClick:()=>r("yearly"),className:`px-3 py-1 text-sm rounded-md transition ${n==="yearly"?"bg-white/10 text-white":"text-muted"}`,children:"Anno"})]})]}),rQ=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(!1),i=He(ue,"app-data","quickNotes");return O.useEffect(()=>{(async()=>{const o=await Yi(i);o.exists()&&e(o.data().content)})()},[]),O.useEffect(()=>{const s=setTimeout(async()=>{if(t!==void 0){r(!0);try{await Tl(i,{content:t,lastUpdated:zn()})}catch(o){console.error("Error saving notes:",o)}finally{setTimeout(()=>r(!1),1e3)}}},2e3);return()=>clearTimeout(s)},[t]),f.jsxs("div",{className:"bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md h-full flex flex-col",children:[f.jsxs("h2",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[f.jsx(JN,{})," Appunti Rapidi"]}),f.jsx("textarea",{value:t,onChange:s=>e(s.target.value),className:"w-full h-full bg-transparent text-sm text-muted outline-none resize-none",placeholder:"Scrivi qui le tue idee o cose da fare..."}),f.jsx("p",{className:"text-xs text-right text-muted mt-2 h-4",children:n&&"Salvataggio..."})]})};function iQ(){const t=$t(),[e,n]=O.useState([]),[r,i]=O.useState([]),[s,o]=O.useState([]),[a,l]=O.useState([]),[c,u]=O.useState("revenue"),[d,p]=O.useState("yearly"),m=O.useMemo(()=>e.reduce((S,_)=>({...S,[_.id]:_.name}),{}),[e]);O.useEffect(()=>{const S=Zt(Jt(ue,"clients"),A=>n(A.docs.map(D=>({id:D.id,...D.data()})))),_=Zt(iu(ue,"payments"),A=>i(A.docs.map(D=>({...D.data(),clientId:D.ref.path.split("/")[1]})))),k=Zt(iu(ue,"checks"),A=>o(A.docs.map(D=>({...D.data(),clientId:D.ref.path.split("/")[1]})))),P=Zt(iu(ue,"anamnesi"),A=>l(A.docs.map(D=>({...D.data(),clientId:D.ref.path.split("/")[1]}))));return()=>{S(),_(),k(),P()}},[]);const{clientStats:y,monthlyIncome:v,activityFeed:x,chartData:w,focusClient:b,retentionRate:E}=O.useMemo(()=>{var pt;const S=new Date,_=new Set(e.map(ie=>ie.id)),k=r.filter(ie=>_.has(ie.clientId));let P=0;e.forEach(ie=>{const Ie=un(ie.scadenza);(!Ie||Ie>=S)&&P++});let A,D,N;if(d==="yearly"){A=Array.from({length:12},(ze,Ke)=>new Date(S.getFullYear(),S.getMonth()-11+Ke,1).toLocaleString("it-IT",{month:"short"}));const ie=Array(12).fill(0),Ie=Array(12).fill(0);k.forEach(ze=>{const Ke=un(ze.paymentDate);if(Ke){const Ne=(S.getFullYear()-Ke.getFullYear())*12+(S.getMonth()-Ke.getMonth());Ne>=0&&Ne<12&&(ie[11-Ne]+=ze.amount)}}),e.forEach(ze=>{const Ke=un(ze.createdAt);if(Ke){const Ne=(S.getFullYear()-Ke.getFullYear())*12+(S.getMonth()-Ke.getMonth());Ne>=0&&Ne<12&&Ie[11-Ne]++}}),D=c==="revenue"?ie:Ie}else{const ie=new Date(S.getFullYear(),S.getMonth()+1,0).getDate();A=Array.from({length:ie},(Ke,Ne)=>Ne+1);const Ie=Array(ie).fill(0),ze=Array(ie).fill(0);k.forEach(Ke=>{const Ne=un(Ke.paymentDate);Ne&&Ne.getFullYear()===S.getFullYear()&&Ne.getMonth()===S.getMonth()&&(Ie[Ne.getDate()-1]+=Ke.amount)}),e.forEach(Ke=>{const Ne=un(Ke.createdAt);Ne&&Ne.getFullYear()===S.getFullYear()&&Ne.getMonth()===S.getMonth()&&ze[Ne.getDate()-1]++}),D=c==="revenue"?Ie:ze}c==="revenue"?N={type:"line",label:"Fatturato",data:D,borderColor:"#22c55e",backgroundColor:"rgba(34, 197, 94, 0.2)",fill:!0,tension:.4}:N={type:"bar",label:"Nuovi Clienti",data:D,backgroundColor:"rgba(37, 99, 235, 0.6)"};const q=e.filter(ie=>{const Ie=un(ie.scadenza);if(!Ie)return!1;const ze=Math.ceil((Ie-S)/(1e3*60*60*24));return ze>=0&&ze<=15}).map(ie=>({type:"expiring",date:ie.scadenza,clientId:ie.id,description:`Scade tra ${Math.ceil((un(ie.scadenza)-S)/(1e3*60*60*24))} giorni`})),te=s.map(ie=>({type:"new_check",date:ie.createdAt,clientId:ie.clientId,description:"Ha inviato un nuovo check"})),re=a.map(ie=>({type:"new_anamnesi",date:ie.createdAt,clientId:ie.clientId,description:"Ha compilato l'anamnesi"})),ne=[...q,...te,...re].sort((ie,Ie)=>(un(Ie.date)||0)-(un(ie.date)||0)).map(ie=>({...ie,clientName:m[ie.clientId]})).filter(ie=>ie.clientName),z=new Date(S.getFullYear(),S.getMonth()-1,1),X=new Date(S.getFullYear(),S.getMonth(),1),Y=new Set(e.filter(ie=>un(ie.scadenza)>z).map(ie=>ie.id)),ye=new Set(e.filter(ie=>un(ie.scadenza)>X).map(ie=>ie.id)),pe=[...Y].filter(ie=>ye.has(ie)).length,xe=Y.size>0?Math.round(pe/Y.size*100):100,Ve=e.filter(ie=>!un(ie.scadenza)||un(ie.scadenza)>=S),Fe=Ve.length>0?Ve[new Date().getDate()%Ve.length]:null,qe=(pt=a.find(ie=>ie.clientId===(Fe==null?void 0:Fe.id)))==null?void 0:pt.mainGoal;return{clientStats:{total:e.length,active:P},monthlyIncome:k.filter(ie=>{var Ie,ze;return((Ie=un(ie.paymentDate))==null?void 0:Ie.getMonth())===S.getMonth()&&((ze=un(ie.paymentDate))==null?void 0:ze.getFullYear())===S.getFullYear()}).reduce((ie,Ie)=>ie+Ie.amount,0),activityFeed:ne,chartData:{labels:A,datasets:[N]},focusClient:Fe?{...Fe,goal:qe}:null,retentionRate:xe}},[e,r,s,a,m,c,d]),I={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"#71717a"},grid:{color:"rgba(255,255,255,0.05)"}},y:{ticks:{color:c==="revenue"?"#22c55e":"#2563eb",callback:S=>c==="revenue"?`€${S}`:Number.isInteger(S)?S:null},grid:{color:"rgba(255,255,255,0.05)"}}}},C={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.07}}},M={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return f.jsxs(We.div,{className:"w-full relative",variants:C,initial:"hidden",animate:"visible",children:[f.jsxs(We.div,{className:"flex justify-between items-center mb-6",variants:M,children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Command Center"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>t("/clients"),className:"px-3 py-1.5 bg-card/50 text-sm rounded-lg border border-white/10 backdrop-blur-sm hover:bg-white/10",children:"Gestisci Clienti"}),f.jsxs("button",{onClick:()=>t("/new"),className:"px-3 py-1.5 bg-primary text-sm font-semibold rounded-lg hover:bg-primary/80",children:[f.jsx(km,{className:"inline -mt-1 mr-1"})," Nuovo Cliente"]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[f.jsx(We.div,{variants:M,children:f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:[f.jsx(by,{title:"Incasso Mensile",value:v,icon:f.jsx(Ah,{className:"text-green-400"}),isCurrency:!0}),f.jsx(by,{title:"Clienti Attivi",value:y.active,icon:f.jsx(Yx,{className:"text-primary"})}),f.jsx(by,{title:"Retention Rate",value:E,icon:f.jsx(ZN,{className:"text-purple-400"}),isPercentage:!0})]})}),f.jsxs(We.div,{className:"bg-card/50 p-4 sm:p-6 rounded-xl border border-white/10 backdrop-blur-md",variants:M,children:[f.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[f.jsx(Xv,{})," Business Overview"]}),f.jsx("div",{className:"h-80",children:c==="revenue"?f.jsx(JY,{data:w,options:I}):f.jsx(ZY,{data:w,options:I})}),f.jsx(nQ,{dataType:c,setDataType:u,timeRange:d,setTimeRange:p})]}),f.jsxs(We.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",variants:M,children:[b&&f.jsxs("div",{className:"bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md",children:[f.jsxs("h2",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[f.jsx(L9,{})," Focus Cliente del Giorno"]}),f.jsx("p",{className:"font-bold text-lg text-primary",children:b.name}),f.jsxs("p",{className:"text-sm text-muted mt-1",children:['Obiettivo: "',b.goal||"Non specificato",'"']})]}),f.jsx(rQ,{})]})]}),f.jsxs(We.div,{className:"bg-card/50 p-4 sm:p-6 rounded-xl border border-white/10 backdrop-blur-md",variants:M,children:[f.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[f.jsx(E9,{})," Feed Attività"]}),f.jsx("div",{className:"space-y-3 max-h-[44rem] overflow-y-auto pr-2",children:f.jsx(ca,{children:x.length>0?x.map(S=>{var _;return f.jsx(tQ,{item:S,navigate:t},`${S.type}-${S.clientId}-${(_=S.date)==null?void 0:_.seconds}`)}):f.jsx("p",{className:"text-sm text-muted p-2",children:"Nessuna attività recente da mostrare."})})})]})]})]})}function zc(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const Sc=t=>{const e=zc(t);if(!e)return"na";const r=Math.ceil((e-new Date)/(1e3*60*60*24));return r<0?"expired":r<=15?"expiring":"paid"},sQ=({status:t})=>{switch(t){case"paid":return f.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-900/50 text-green-400",children:"Pagato"});case"expiring":return f.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-yellow-900/50 text-yellow-400",children:"In Scadenza"});case"expired":return f.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-900/50 text-red-400",children:"Scaduto"});default:return f.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-700 text-gray-300",children:"N/D"})}};function oQ(){const t=$t(),e=qi(),[n,r]=O.useState([]),[i,s]=O.useState(!0),[o,a]=O.useState(""),[l,c]=O.useState("all"),[u,d]=O.useState("createdAt"),[p,m]=O.useState("desc"),[y,v]=O.useState(1),x=10;O.useEffect(()=>{const k=new URLSearchParams(e.search).get("filter");k&&["paid","expiring","expired"].includes(k)&&c(k)},[e.search]),O.useEffect(()=>{const _=Zt(Jt(ue,"clients"),k=>{r(k.docs.map(P=>({id:P.id,...P.data()}))),s(!1)});return()=>_()},[]);const w=async _=>{if(window.confirm("Sei sicuro di voler eliminare questo cliente? L'operazione è irreversibile."))try{await Fx(He(ue,"clients",_))}catch(k){console.error("Errore delete:",k)}},b=O.useMemo(()=>{let _=[...n];l!=="all"&&(_=_.filter(A=>Sc(A.scadenza)===l));const k=o.trim().toLowerCase();k&&(_=_.filter(A=>(A.name||"").toLowerCase().includes(k)||(A.email||"").toLowerCase().includes(k)));const P=(A,D)=>{var N,q;switch(D){case"name":return(A.name||"").toLowerCase();case"scadenza":return((N=zc(A.scadenza))==null?void 0:N.getTime())||0;case"createdAt":default:return((q=zc(A.createdAt))==null?void 0:q.getTime())||0}};return _.sort((A,D)=>{const N=P(A,u),q=P(D,u);return N===q?0:p==="asc"?N>q?1:-1:N<q?1:-1}),_},[n,o,l,u,p]);Math.ceil(b.length/x);const E=b.slice((y-1)*x,y*x),I=_=>{u===_?m(k=>k==="asc"?"desc":"asc"):(d(_),m(_==="scadenza"||_==="createdAt"?"desc":"asc"))},C=({col:_})=>u===_?p==="asc"?f.jsx(k9,{className:"inline ml-1"}):f.jsx(QN,{className:"inline ml-1"}):null,M=({status:_,label:k,count:P})=>{},S=O.useMemo(()=>({all:n.length,paid:n.filter(_=>Sc(_.scadenza)==="paid").length,expiring:n.filter(_=>Sc(_.scadenza)==="expiring").length,expired:n.filter(_=>Sc(_.scadenza)==="expired").length}),[n]);return f.jsxs("div",{className:"w-full",children:[f.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Clienti"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"flex items-center gap-2 bg-card border border-white/10 rounded-lg px-3 py-2",children:[f.jsx(eD,{className:"text-muted"}),f.jsx("input",{value:o,onChange:_=>{a(_.target.value),v(1)},className:"bg-transparent outline-none placeholder-muted w-full",placeholder:"Cerca…"})]}),f.jsxs("button",{onClick:()=>t("/new"),className:"flex items-center justify-center gap-2 px-4 py-2 bg-primary hover:bg-primary/80 text-white rounded-lg",children:[f.jsx(km,{})," Nuovo"]})]})]}),f.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-background rounded-lg",children:[f.jsx(A9,{className:"text-muted ml-1"}),f.jsx(M,{status:"all",label:"Tutti",count:S.all}),f.jsx(M,{status:"paid",label:"Pagato",count:S.paid}),f.jsx(M,{status:"expiring",label:"In Scadenza",count:S.expiring}),f.jsx(M,{status:"expired",label:"Scaduto",count:S.expired})]}),f.jsx(We.div,{className:"bg-card rounded-xl shadow border border-white/10 overflow-hidden",initial:{opacity:0},animate:{opacity:1},children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"bg-white/5 text-left",children:[f.jsxs("th",{className:"p-3 cursor-pointer select-none",onClick:()=>I("name"),children:["Nome ",f.jsx(C,{col:"name"})]}),f.jsx("th",{className:"p-3",children:"Email"}),f.jsx("th",{className:"p-3",children:"Stato Pagamento"}),f.jsxs("th",{className:"p-3 cursor-pointer select-none",onClick:()=>I("scadenza"),children:["Scadenza ",f.jsx(C,{col:"scadenza"})]}),f.jsx("th",{className:"p-3 text-right",children:"Azioni"})]})}),f.jsx("tbody",{children:E.map((_,k)=>f.jsxs(We.tr,{className:"border-b border-white/10 hover:bg-white/5",initial:{opacity:0},animate:{opacity:1},transition:{delay:k*.05},children:[f.jsx("td",{className:"p-3 font-medium",children:f.jsx("button",{className:"hover:underline",onClick:()=>t(`/client/${_.id}`),children:_.name||"-"})}),f.jsx("td",{className:"p-3 text-muted",children:_.email||"-"}),f.jsx("td",{className:"p-3",children:f.jsx(sQ,{status:Sc(_.scadenza)})}),f.jsx("td",{className:"p-3 text-muted",children:zc(_.scadenza)?zc(_.scadenza).toLocaleDateString("it-IT"):"-"}),f.jsx("td",{className:"p-3",children:f.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[f.jsx("button",{onClick:()=>t(`/edit/${_.id}`),className:"p-1.5 text-yellow-400 hover:bg-white/10 rounded-md",title:"Modifica",children:f.jsx(P9,{size:14})}),f.jsx("button",{onClick:()=>w(_.id),className:"p-1.5 text-red-400 hover:bg-white/10 rounded-md",title:"Elimina",children:f.jsx(Zx,{size:14})})]})})]},_.id))})]})})})]})}var jh=t=>t.type==="checkbox",Do=t=>t instanceof Date,kn=t=>t==null;const IO=t=>typeof t=="object";var Rt=t=>!kn(t)&&!Array.isArray(t)&&IO(t)&&!Do(t),aQ=t=>Rt(t)&&t.target?jh(t.target)?t.target.checked:t.target.value:t,lQ=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,cQ=(t,e)=>t.has(lQ(e)),uQ=t=>{const e=t.constructor&&t.constructor.prototype;return Rt(e)&&e.hasOwnProperty("isPrototypeOf")},Kw=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Vt(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(Kw&&(t instanceof Blob||r))&&(n||Rt(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!uQ(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Vt(t[i]));else return t;return e}var zm=t=>/^\w*$/.test(t),It=t=>t===void 0,Gw=t=>Array.isArray(t)?t.filter(Boolean):[],Yw=t=>Gw(t.replace(/["|']|\]/g,"").split(/\.|\[/)),oe=(t,e,n)=>{if(!e||!Rt(t))return n;const r=(zm(e)?[e]:Yw(e)).reduce((i,s)=>kn(i)?i:i[s],t);return It(r)||r===t?It(t[e])?n:t[e]:r},$r=t=>typeof t=="boolean",rt=(t,e,n)=>{let r=-1;const i=zm(e)?[e]:Yw(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=n;if(r!==o){const c=t[a];l=Rt(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const dI={BLUR:"blur",FOCUS_OUT:"focusout"},Tr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},vi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},hQ=it.createContext(null);hQ.displayName="HookFormContext";var dQ=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Tr.all&&(e._proxyFormState[o]=!r||Tr.all),t[o]}});return i};const fQ=typeof window<"u"?it.useLayoutEffect:it.useEffect;var Kn=t=>typeof t=="string",pQ=(t,e,n,r,i)=>Kn(t)?(r&&e.watch.add(t),oe(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),oe(n,s))):(r&&(e.watchAll=!0),n),E_=t=>kn(t)||!IO(t);function ps(t,e,n=new WeakSet){if(E_(t)||E_(e))return t===e;if(Do(t)&&Do(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const s of r){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(Do(o)&&Do(a)||Rt(o)&&Rt(a)||Array.isArray(o)&&Array.isArray(a)?!ps(o,a,n):o!==a)return!1}}return!0}var mQ=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},pu=t=>Array.isArray(t)?t:[t],fI=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function CO(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],s=e[r];if(i&&Rt(i)&&s){const o=CO(i,s);Rt(o)&&(n[r]=o)}else t[r]&&(n[r]=s)}return n}var Dn=t=>Rt(t)&&!Object.keys(t).length,Qw=t=>t.type==="file",Sr=t=>typeof t=="function",Mp=t=>{if(!Kw)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},PO=t=>t.type==="select-multiple",Xw=t=>t.type==="radio",gQ=t=>Xw(t)||jh(t),Ty=t=>Mp(t)&&t.isConnected;function yQ(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=It(t)?r++:t[e[r++]];return t}function vQ(t){for(const e in t)if(t.hasOwnProperty(e)&&!It(t[e]))return!1;return!0}function Et(t,e){const n=Array.isArray(e)?e:zm(e)?[e]:Yw(e),r=n.length===1?t:yQ(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Rt(r)&&Dn(r)||Array.isArray(r)&&vQ(r))&&Et(t,n.slice(0,-1)),t}var _Q=t=>{for(const e in t)if(Sr(t[e]))return!0;return!1};function AO(t){return Array.isArray(t)||Rt(t)&&!_Q(t)}function k_(t,e={}){for(const n in t)AO(t[n])?(e[n]=Array.isArray(t[n])?[]:{},k_(t[n],e[n])):kn(t[n])||(e[n]=!0);return e}function Ia(t,e,n){n||(n=k_(e));for(const r in t)AO(t[r])?It(e)||E_(n[r])?n[r]=k_(t[r],Array.isArray(t[r])?[]:{}):Ia(t[r],kn(e)?{}:e[r],n[r]):n[r]=!ps(t[r],e[r]);return n}const pI={value:!1,isValid:!1},mI={value:!0,isValid:!0};var RO=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!It(t[0].attributes.value)?It(t[0].value)||t[0].value===""?mI:{value:t[0].value,isValid:!0}:mI:pI}return pI},NO=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>It(t)?t:e?t===""?NaN:t&&+t:n&&Kn(t)?new Date(t):r?r(t):t;const gI={isValid:!1,value:null};var DO=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,gI):gI;function yI(t){const e=t.ref;return Qw(e)?e.files:Xw(e)?DO(t.refs).value:PO(e)?[...e.selectedOptions].map(({value:n})=>n):jh(e)?RO(t.refs).value:NO(It(e.value)?t.ref.value:e.value,t)}var xQ=(t,e,n,r)=>{const i={};for(const s of t){const o=oe(e,s);o&&rt(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},jp=t=>t instanceof RegExp,Ec=t=>It(t)?t:jp(t)?t.source:Rt(t)?jp(t.value)?t.value.source:t.value:t,vI=t=>({isOnSubmit:!t||t===Tr.onSubmit,isOnBlur:t===Tr.onBlur,isOnChange:t===Tr.onChange,isOnAll:t===Tr.all,isOnTouch:t===Tr.onTouched});const _I="AsyncFunction";var wQ=t=>!!t&&!!t.validate&&!!(Sr(t.validate)&&t.validate.constructor.name===_I||Rt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===_I)),bQ=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),xI=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const mu=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=oe(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(mu(a,e))break}else if(Rt(a)&&mu(a,e))break}}};function wI(t,e,n){const r=oe(t,n);if(r||zm(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=oe(e,s),a=oe(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:n}}var TQ=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Dn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Tr.all))},SQ=(t,e,n)=>!t||!e||t===e||pu(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),EQ=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,kQ=(t,e)=>!Gw(oe(t,e)).length&&Et(t,e),IQ=(t,e,n)=>{const r=pu(oe(t,n));return rt(r,"root",e[n]),rt(t,n,r),t};function bI(t,e,n="validate"){if(Kn(t)||Array.isArray(t)&&t.every(Kn)||$r(t)&&!t)return{type:n,message:Kn(t)?t:"",ref:e}}var Ta=t=>Rt(t)&&!jp(t)?t:{value:t,message:""},TI=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:d,max:p,pattern:m,validate:y,name:v,valueAsNumber:x,mount:w}=t._f,b=oe(n,v);if(!w||e.has(v))return{};const E=a?a[0]:o,I=D=>{i&&E.reportValidity&&(E.setCustomValidity($r(D)?"":D||""),E.reportValidity())},C={},M=Xw(o),S=jh(o),_=M||S,k=(x||Qw(o))&&It(o.value)&&It(b)||Mp(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,P=mQ.bind(null,v,r,C),A=(D,N,q,te=vi.maxLength,re=vi.minLength)=>{const ne=D?N:q;C[v]={type:D?te:re,message:ne,ref:o,...P(D?te:re,ne)}};if(s?!Array.isArray(b)||!b.length:l&&(!_&&(k||kn(b))||$r(b)&&!b||S&&!RO(a).isValid||M&&!DO(a).isValid)){const{value:D,message:N}=Kn(l)?{value:!!l,message:l}:Ta(l);if(D&&(C[v]={type:vi.required,message:N,ref:E,...P(vi.required,N)},!r))return I(N),C}if(!k&&(!kn(d)||!kn(p))){let D,N;const q=Ta(p),te=Ta(d);if(!kn(b)&&!isNaN(b)){const re=o.valueAsNumber||b&&+b;kn(q.value)||(D=re>q.value),kn(te.value)||(N=re<te.value)}else{const re=o.valueAsDate||new Date(b),ne=Y=>new Date(new Date().toDateString()+" "+Y),z=o.type=="time",X=o.type=="week";Kn(q.value)&&b&&(D=z?ne(b)>ne(q.value):X?b>q.value:re>new Date(q.value)),Kn(te.value)&&b&&(N=z?ne(b)<ne(te.value):X?b<te.value:re<new Date(te.value))}if((D||N)&&(A(!!D,q.message,te.message,vi.max,vi.min),!r))return I(C[v].message),C}if((c||u)&&!k&&(Kn(b)||s&&Array.isArray(b))){const D=Ta(c),N=Ta(u),q=!kn(D.value)&&b.length>+D.value,te=!kn(N.value)&&b.length<+N.value;if((q||te)&&(A(q,D.message,N.message),!r))return I(C[v].message),C}if(m&&!k&&Kn(b)){const{value:D,message:N}=Ta(m);if(jp(D)&&!b.match(D)&&(C[v]={type:vi.pattern,message:N,ref:o,...P(vi.pattern,N)},!r))return I(N),C}if(y){if(Sr(y)){const D=await y(b,n),N=bI(D,E);if(N&&(C[v]={...N,...P(vi.validate,N.message)},!r))return I(N.message),C}else if(Rt(y)){let D={};for(const N in y){if(!Dn(D)&&!r)break;const q=bI(await y[N](b,n),E,N);q&&(D={...q,...P(N,q.message)},I(q.message),r&&(C[v]=D))}if(!Dn(D)&&(C[v]={ref:E,...D},!r))return C}}return I(!0),C};const CQ={mode:Tr.onSubmit,reValidateMode:Tr.onChange,shouldFocusError:!0};function PQ(t={}){let e={...CQ,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Sr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Rt(e.defaultValues)||Rt(e.values)?Vt(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Vt(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d={...u};const p={array:fI(),state:fI()},m=e.criteriaMode===Tr.all,y=j=>V=>{clearTimeout(c),c=setTimeout(j,V)},v=async j=>{if(!e.disabled&&(u.isValid||d.isValid||j)){const V=e.resolver?Dn((await S()).errors):await k(r,!0);V!==n.isValid&&p.state.next({isValid:V})}},x=(j,V)=>{!e.disabled&&(u.isValidating||u.validatingFields||d.isValidating||d.validatingFields)&&((j||Array.from(a.mount)).forEach(U=>{U&&(V?rt(n.validatingFields,U,V):Et(n.validatingFields,U))}),p.state.next({validatingFields:n.validatingFields,isValidating:!Dn(n.validatingFields)}))},w=(j,V=[],U,Q,K=!0,H=!0)=>{if(Q&&U&&!e.disabled){if(o.action=!0,H&&Array.isArray(oe(r,j))){const J=U(oe(r,j),Q.argA,Q.argB);K&&rt(r,j,J)}if(H&&Array.isArray(oe(n.errors,j))){const J=U(oe(n.errors,j),Q.argA,Q.argB);K&&rt(n.errors,j,J),kQ(n.errors,j)}if((u.touchedFields||d.touchedFields)&&H&&Array.isArray(oe(n.touchedFields,j))){const J=U(oe(n.touchedFields,j),Q.argA,Q.argB);K&&rt(n.touchedFields,j,J)}(u.dirtyFields||d.dirtyFields)&&(n.dirtyFields=Ia(i,s)),p.state.next({name:j,isDirty:A(j,V),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else rt(s,j,V)},b=(j,V)=>{rt(n.errors,j,V),p.state.next({errors:n.errors})},E=j=>{n.errors=j,p.state.next({errors:n.errors,isValid:!1})},I=(j,V,U,Q)=>{const K=oe(r,j);if(K){const H=oe(s,j,It(U)?oe(i,j):U);It(H)||Q&&Q.defaultChecked||V?rt(s,j,V?H:yI(K._f)):q(j,H),o.mount&&v()}},C=(j,V,U,Q,K)=>{let H=!1,J=!1;const he={name:j};if(!e.disabled){if(!U||Q){(u.isDirty||d.isDirty)&&(J=n.isDirty,n.isDirty=he.isDirty=A(),H=J!==he.isDirty);const Ce=ps(oe(i,j),V);J=!!oe(n.dirtyFields,j),Ce?Et(n.dirtyFields,j):rt(n.dirtyFields,j,!0),he.dirtyFields=n.dirtyFields,H=H||(u.dirtyFields||d.dirtyFields)&&J!==!Ce}if(U){const Ce=oe(n.touchedFields,j);Ce||(rt(n.touchedFields,j,U),he.touchedFields=n.touchedFields,H=H||(u.touchedFields||d.touchedFields)&&Ce!==U)}H&&K&&p.state.next(he)}return H?he:{}},M=(j,V,U,Q)=>{const K=oe(n.errors,j),H=(u.isValid||d.isValid)&&$r(V)&&n.isValid!==V;if(e.delayError&&U?(l=y(()=>b(j,U)),l(e.delayError)):(clearTimeout(c),l=null,U?rt(n.errors,j,U):Et(n.errors,j)),(U?!ps(K,U):K)||!Dn(Q)||H){const J={...Q,...H&&$r(V)?{isValid:V}:{},errors:n.errors,name:j};n={...n,...J},p.state.next(J)}},S=async j=>{x(j,!0);const V=await e.resolver(s,e.context,xQ(j||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return x(j),V},_=async j=>{const{errors:V}=await S(j);if(j)for(const U of j){const Q=oe(V,U);Q?rt(n.errors,U,Q):Et(n.errors,U)}else n.errors=V;return V},k=async(j,V,U={valid:!0})=>{for(const Q in j){const K=j[Q];if(K){const{_f:H,...J}=K;if(H){const he=a.array.has(H.name),Ce=K._f&&wQ(K._f);Ce&&u.validatingFields&&x([H.name],!0);const Nt=await TI(K,a.disabled,s,m,e.shouldUseNativeValidation&&!V,he);if(Ce&&u.validatingFields&&x([H.name]),Nt[H.name]&&(U.valid=!1,V))break;!V&&(oe(Nt,H.name)?he?IQ(n.errors,Nt,H.name):rt(n.errors,H.name,Nt[H.name]):Et(n.errors,H.name))}!Dn(J)&&await k(J,V,U)}}return U.valid},P=()=>{for(const j of a.unMount){const V=oe(r,j);V&&(V._f.refs?V._f.refs.every(U=>!Ty(U)):!Ty(V._f.ref))&&pt(j)}a.unMount=new Set},A=(j,V)=>!e.disabled&&(j&&V&&rt(s,j,V),!ps(Y(),i)),D=(j,V,U)=>pQ(j,a,{...o.mount?s:It(V)?i:Kn(j)?{[j]:V}:V},U,V),N=j=>Gw(oe(o.mount?s:i,j,e.shouldUnregister?oe(i,j,[]):[])),q=(j,V,U={})=>{const Q=oe(r,j);let K=V;if(Q){const H=Q._f;H&&(!H.disabled&&rt(s,j,NO(V,H)),K=Mp(H.ref)&&kn(V)?"":V,PO(H.ref)?[...H.ref.options].forEach(J=>J.selected=K.includes(J.value)):H.refs?jh(H.ref)?H.refs.forEach(J=>{(!J.defaultChecked||!J.disabled)&&(Array.isArray(K)?J.checked=!!K.find(he=>he===J.value):J.checked=K===J.value||!!K)}):H.refs.forEach(J=>J.checked=J.value===K):Qw(H.ref)?H.ref.value="":(H.ref.value=K,H.ref.type||p.state.next({name:j,values:Vt(s)})))}(U.shouldDirty||U.shouldTouch)&&C(j,K,U.shouldTouch,U.shouldDirty,!0),U.shouldValidate&&X(j)},te=(j,V,U)=>{for(const Q in V){if(!V.hasOwnProperty(Q))return;const K=V[Q],H=j+"."+Q,J=oe(r,H);(a.array.has(j)||Rt(K)||J&&!J._f)&&!Do(K)?te(H,K,U):q(H,K,U)}},re=(j,V,U={})=>{const Q=oe(r,j),K=a.array.has(j),H=Vt(V);rt(s,j,H),K?(p.array.next({name:j,values:Vt(s)}),(u.isDirty||u.dirtyFields||d.isDirty||d.dirtyFields)&&U.shouldDirty&&p.state.next({name:j,dirtyFields:Ia(i,s),isDirty:A(j,H)})):Q&&!Q._f&&!kn(H)?te(j,H,U):q(j,H,U),xI(j,a)&&p.state.next({...n,name:j}),p.state.next({name:o.mount?j:void 0,values:Vt(s)})},ne=async j=>{o.mount=!0;const V=j.target;let U=V.name,Q=!0;const K=oe(r,U),H=Ce=>{Q=Number.isNaN(Ce)||Do(Ce)&&isNaN(Ce.getTime())||ps(Ce,oe(s,U,Ce))},J=vI(e.mode),he=vI(e.reValidateMode);if(K){let Ce,Nt;const Nr=V.type?yI(K._f):aQ(j),$n=j.type===dI.BLUR||j.type===dI.FOCUS_OUT,di=!bQ(K._f)&&!e.resolver&&!oe(n.errors,U)&&!K._f.deps||EQ($n,oe(n.touchedFields,U),n.isSubmitted,he,J),gr=xI(U,a,$n);rt(s,U,Nr),$n?(!V||!V.readOnly)&&(K._f.onBlur&&K._f.onBlur(j),l&&l(0)):K._f.onChange&&K._f.onChange(j);const fi=C(U,Nr,$n),no=!Dn(fi)||gr;if(!$n&&p.state.next({name:U,type:j.type,values:Vt(s)}),di)return(u.isValid||d.isValid)&&(e.mode==="onBlur"?$n&&v():$n||v()),no&&p.state.next({name:U,...gr?{}:fi});if(!$n&&gr&&p.state.next({...n}),e.resolver){const{errors:ro}=await S([U]);if(H(Nr),Q){const pa=wI(n.errors,r,U),Dr=wI(ro,r,pa.name||U);Ce=Dr.error,U=Dr.name,Nt=Dn(ro)}}else x([U],!0),Ce=(await TI(K,a.disabled,s,m,e.shouldUseNativeValidation))[U],x([U]),H(Nr),Q&&(Ce?Nt=!1:(u.isValid||d.isValid)&&(Nt=await k(r,!0)));Q&&(K._f.deps&&(!Array.isArray(K._f.deps)||K._f.deps.length>0)&&X(K._f.deps),M(U,Nt,Ce,fi))}},z=(j,V)=>{if(oe(n.errors,V)&&j.focus)return j.focus(),1},X=async(j,V={})=>{let U,Q;const K=pu(j);if(e.resolver){const H=await _(It(j)?j:K);U=Dn(H),Q=j?!K.some(J=>oe(H,J)):U}else j?(Q=(await Promise.all(K.map(async H=>{const J=oe(r,H);return await k(J&&J._f?{[H]:J}:J)}))).every(Boolean),!(!Q&&!n.isValid)&&v()):Q=U=await k(r);return p.state.next({...!Kn(j)||(u.isValid||d.isValid)&&U!==n.isValid?{}:{name:j},...e.resolver||!j?{isValid:U}:{},errors:n.errors}),V.shouldFocus&&!Q&&mu(r,z,j?K:a.mount),Q},Y=(j,V)=>{let U={...o.mount?s:i};return V&&(U=CO(V.dirtyFields?n.dirtyFields:n.touchedFields,U)),It(j)?U:Kn(j)?oe(U,j):j.map(Q=>oe(U,Q))},ye=(j,V)=>({invalid:!!oe((V||n).errors,j),isDirty:!!oe((V||n).dirtyFields,j),error:oe((V||n).errors,j),isValidating:!!oe(n.validatingFields,j),isTouched:!!oe((V||n).touchedFields,j)}),pe=j=>{j&&pu(j).forEach(V=>Et(n.errors,V)),p.state.next({errors:j?n.errors:{}})},xe=(j,V,U)=>{const Q=(oe(r,j,{_f:{}})._f||{}).ref,K=oe(n.errors,j)||{},{ref:H,message:J,type:he,...Ce}=K;rt(n.errors,j,{...Ce,...V,ref:Q}),p.state.next({name:j,errors:n.errors,isValid:!1}),U&&U.shouldFocus&&Q&&Q.focus&&Q.focus()},Ve=(j,V)=>Sr(j)?p.state.subscribe({next:U=>"values"in U&&j(D(void 0,V),U)}):D(j,V,!0),Fe=j=>p.state.subscribe({next:V=>{SQ(j.name,V.name,j.exact)&&TQ(V,j.formState||u,Xi,j.reRenderRoot)&&j.callback({values:{...s},...n,...V,defaultValues:i})}}).unsubscribe,qe=j=>(o.mount=!0,d={...d,...j.formState},Fe({...j,formState:d})),pt=(j,V={})=>{for(const U of j?pu(j):a.mount)a.mount.delete(U),a.array.delete(U),V.keepValue||(Et(r,U),Et(s,U)),!V.keepError&&Et(n.errors,U),!V.keepDirty&&Et(n.dirtyFields,U),!V.keepTouched&&Et(n.touchedFields,U),!V.keepIsValidating&&Et(n.validatingFields,U),!e.shouldUnregister&&!V.keepDefaultValue&&Et(i,U);p.state.next({values:Vt(s)}),p.state.next({...n,...V.keepDirty?{isDirty:A()}:{}}),!V.keepIsValid&&v()},ie=({disabled:j,name:V})=>{($r(j)&&o.mount||j||a.disabled.has(V))&&(j?a.disabled.add(V):a.disabled.delete(V))},Ie=(j,V={})=>{let U=oe(r,j);const Q=$r(V.disabled)||$r(e.disabled);return rt(r,j,{...U||{},_f:{...U&&U._f?U._f:{ref:{name:j}},name:j,mount:!0,...V}}),a.mount.add(j),U?ie({disabled:$r(V.disabled)?V.disabled:e.disabled,name:j}):I(j,!0,V.value),{...Q?{disabled:V.disabled||e.disabled}:{},...e.progressive?{required:!!V.required,min:Ec(V.min),max:Ec(V.max),minLength:Ec(V.minLength),maxLength:Ec(V.maxLength),pattern:Ec(V.pattern)}:{},name:j,onChange:ne,onBlur:ne,ref:K=>{if(K){Ie(j,V),U=oe(r,j);const H=It(K.value)&&K.querySelectorAll&&K.querySelectorAll("input,select,textarea")[0]||K,J=gQ(H),he=U._f.refs||[];if(J?he.find(Ce=>Ce===H):H===U._f.ref)return;rt(r,j,{_f:{...U._f,...J?{refs:[...he.filter(Ty),H,...Array.isArray(oe(i,j))?[{}]:[]],ref:{type:H.type,name:j}}:{ref:H}}}),I(j,!1,void 0,H)}else U=oe(r,j,{}),U._f&&(U._f.mount=!1),(e.shouldUnregister||V.shouldUnregister)&&!(cQ(a.array,j)&&o.action)&&a.unMount.add(j)}}},ze=()=>e.shouldFocusError&&mu(r,z,a.mount),Ke=j=>{$r(j)&&(p.state.next({disabled:j}),mu(r,(V,U)=>{const Q=oe(r,U);Q&&(V.disabled=Q._f.disabled||j,Array.isArray(Q._f.refs)&&Q._f.refs.forEach(K=>{K.disabled=Q._f.disabled||j}))},0,!1))},Ne=(j,V)=>async U=>{let Q;U&&(U.preventDefault&&U.preventDefault(),U.persist&&U.persist());let K=Vt(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:H,values:J}=await S();n.errors=H,K=Vt(J)}else await k(r);if(a.disabled.size)for(const H of a.disabled)Et(K,H);if(Et(n.errors,"root"),Dn(n.errors)){p.state.next({errors:{}});try{await j(K,U)}catch(H){Q=H}}else V&&await V({...n.errors},U),ze(),setTimeout(ze);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Dn(n.errors)&&!Q,submitCount:n.submitCount+1,errors:n.errors}),Q)throw Q},hi=(j,V={})=>{oe(r,j)&&(It(V.defaultValue)?re(j,Vt(oe(i,j))):(re(j,V.defaultValue),rt(i,j,Vt(V.defaultValue))),V.keepTouched||Et(n.touchedFields,j),V.keepDirty||(Et(n.dirtyFields,j),n.isDirty=V.defaultValue?A(j,Vt(oe(i,j))):A()),V.keepError||(Et(n.errors,j),u.isValid&&v()),p.state.next({...n}))},Ge=(j,V={})=>{const U=j?Vt(j):i,Q=Vt(U),K=Dn(j),H=K?i:Q;if(V.keepDefaultValues||(i=U),!V.keepValues){if(V.keepDirtyValues){const J=new Set([...a.mount,...Object.keys(Ia(i,s))]);for(const he of Array.from(J))oe(n.dirtyFields,he)?rt(H,he,oe(s,he)):re(he,oe(H,he))}else{if(Kw&&It(j))for(const J of a.mount){const he=oe(r,J);if(he&&he._f){const Ce=Array.isArray(he._f.refs)?he._f.refs[0]:he._f.ref;if(Mp(Ce)){const Nt=Ce.closest("form");if(Nt){Nt.reset();break}}}}if(V.keepFieldsRef)for(const J of a.mount)re(J,oe(H,J));else r={}}s=e.shouldUnregister?V.keepDefaultValues?Vt(i):{}:Vt(H),p.array.next({values:{...H}}),p.state.next({values:{...H}})}a={mount:V.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!V.keepIsValid||!!V.keepDirtyValues,o.watch=!!e.shouldUnregister,p.state.next({submitCount:V.keepSubmitCount?n.submitCount:0,isDirty:K?!1:V.keepDirty?n.isDirty:!!(V.keepDefaultValues&&!ps(j,i)),isSubmitted:V.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:K?{}:V.keepDirtyValues?V.keepDefaultValues&&s?Ia(i,s):n.dirtyFields:V.keepDefaultValues&&j?Ia(i,j):V.keepDirty?n.dirtyFields:{},touchedFields:V.keepTouched?n.touchedFields:{},errors:V.keepErrors?n.errors:{},isSubmitSuccessful:V.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},ir=(j,V)=>Ge(Sr(j)?j(s):j,V),Wt=(j,V={})=>{const U=oe(r,j),Q=U&&U._f;if(Q){const K=Q.refs?Q.refs[0]:Q.ref;K.focus&&(K.focus(),V.shouldSelect&&Sr(K.select)&&K.select())}},Xi=j=>{n={...n,...j}},Ji={control:{register:Ie,unregister:pt,getFieldState:ye,handleSubmit:Ne,setError:xe,_subscribe:Fe,_runSchema:S,_focusError:ze,_getWatch:D,_getDirty:A,_setValid:v,_setFieldArray:w,_setDisabledField:ie,_setErrors:E,_getFieldArray:N,_reset:Ge,_resetDefaultValues:()=>Sr(e.defaultValues)&&e.defaultValues().then(j=>{ir(j,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:Ke,_subjects:p,_proxyFormState:u,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(j){o=j},get _defaultValues(){return i},get _names(){return a},set _names(j){a=j},get _formState(){return n},get _options(){return e},set _options(j){e={...e,...j}}},subscribe:qe,trigger:X,register:Ie,handleSubmit:Ne,watch:Ve,setValue:re,getValues:Y,reset:ir,resetField:hi,clearErrors:pe,unregister:pt,setError:xe,setFocus:Wt,getFieldState:ye};return{...Ji,formControl:Ji}}function Wl(t={}){const e=it.useRef(void 0),n=it.useRef(void 0),[r,i]=it.useState({isDirty:!1,isValidating:!1,isLoading:Sr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Sr(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Sr(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=PQ(t);e.current={...a,formState:r}}const s=e.current.control;return s._options=t,fQ(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),it.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),it.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),it.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),it.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),it.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),it.useEffect(()=>{t.values&&!ps(t.values,n.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),it.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=dQ(r,s),e.current}const AQ=()=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let r=0,i=e.length;r<8;++r)n+=e.charAt(Math.floor(Math.random()*i));return n};function RQ(){const t=$t(),{register:e,handleSubmit:n,reset:r,formState:{isSubmitting:i}}=Wl(),[s,o]=O.useState(!1),[a,l]=O.useState(null),[c,u]=O.useState(!1),d=Hr.currentUser,p=async E=>{const I=AQ();try{const M=(await jU(Hr,E.email,I)).user.uid,S=EN(ue),_=He(ue,"clients",M),k=parseInt(E.duration,10),P=new Date;P.setMonth(P.getMonth()+k);const A={name:E.name,name_lowercase:E.name.toLowerCase(),email:E.email,phone:E.phone||null,status:"attivo",planType:E.planType,createdAt:zn(),scadenza:P,isClient:!0,firstLogin:!0};if(S.set(_,A),E.paymentAmount){const D=He(Jt(ue,"clients",M,"payments")),N={amount:parseFloat(E.paymentAmount),duration:`${k} mes${k>1?"i":"e"}`,paymentMethod:E.paymentMethod||null,paymentDate:zn()};S.set(D,N)}await S.commit(),l({name:E.name,email:E.email,password:I}),await ml(Hr),o(!0)}catch(C){console.error("Errore nella creazione del cliente:",C),alert(`Errore: ${C.message}`),Hr.currentUser!==d&&await ml(Hr)}},m=()=>{const E=`Ciao ${a.name},

Ecco le tue credenziali per accedere alla nostra area riservata:

Email: ${a.email}
Password: ${a.password}

Ti consiglio di cambiarla al primo accesso.
A presto!`;navigator.clipboard.writeText(E),u(!0),setTimeout(()=>u(!1),2500)},y=()=>{o(!1),r(),t("/clients")},v="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",x="block mb-1 text-sm font-medium text-muted",w="bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md",b="font-semibold mb-3 text-lg text-primary";return f.jsxs(f.Fragment,{children:[f.jsxs(We.div,{className:"w-full max-w-2xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"Onboarding Nuovo Cliente"}),f.jsxs("button",{onClick:()=>t("/clients"),className:"flex items-center gap-2 px-3 py-1.5 bg-card/50 text-sm rounded-lg border border-white/10 backdrop-blur-sm hover:bg-white/10",children:[f.jsx(Xs,{})," Torna"]})]}),f.jsxs("form",{onSubmit:n(p),className:"space-y-6",children:[f.jsxs("div",{className:w,children:[f.jsx("h4",{className:b,children:"1. Anagrafica"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:x,children:"Nome e Cognome*"}),f.jsx("input",{...e("name",{required:!0}),className:v})]}),f.jsxs("div",{children:[f.jsx("label",{className:x,children:"Email (sarà il suo username)*"}),f.jsx("input",{type:"email",...e("email",{required:!0}),className:v})]}),f.jsxs("div",{children:[f.jsx("label",{className:x,children:"Telefono (Opzionale)"}),f.jsx("input",{...e("phone"),className:v})]})]})]}),f.jsxs("div",{className:w,children:[f.jsx("h4",{className:b,children:"2. Dettagli Percorso"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:x,children:"Tipo di Percorso*"}),f.jsxs("select",{...e("planType",{required:!0}),className:v,children:[f.jsx("option",{value:"allenamento",children:"Solo Allenamento"}),f.jsx("option",{value:"alimentazione",children:"Solo Alimentazione"}),f.jsx("option",{value:"completo",children:"Completo (Allenamento + Alimentazione)"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:x,children:"Durata del Percorso*"}),f.jsxs("select",{...e("duration",{required:!0}),className:v,children:[f.jsx("option",{value:"",children:"Seleziona durata"}),[...Array(24).keys()].map(E=>{const I=E+1;return f.jsxs("option",{value:I,children:[I," mes",I>1?"i":"e"]},I)})]})]})]})]}),f.jsxs("div",{className:w,children:[f.jsxs("h4",{className:b+" flex items-center gap-2",children:[f.jsx(Ah,{})," 3. Primo Pagamento (Opzionale)"]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:x,children:"Importo Pagato (€)"}),f.jsx("input",{type:"number",step:"0.01",...e("paymentAmount"),className:v})]}),f.jsxs("div",{children:[f.jsx("label",{className:x,children:"Metodo di Pagamento"}),f.jsx("input",{...e("paymentMethod"),className:v,placeholder:"Es. Bonifico, Contanti"})]})]})]}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsxs("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-5 py-2.5 bg-primary hover:bg-primary/80 text-white rounded-lg transition disabled:opacity-50 font-semibold",children:[f.jsx(Im,{})," ",i?"Creazione in corso...":"Crea Cliente e Genera Password"]})})]})]}),f.jsx(ca,{children:s&&f.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:f.jsxs(We.div,{className:"bg-card p-6 rounded-2xl border border-white/10 w-full max-w-md shadow-2xl",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[f.jsx("h2",{className:"text-xl font-bold text-center text-foreground",children:"Cliente Creato con Successo!"}),f.jsx("p",{className:"text-center text-muted text-sm mt-2",children:"Copia le credenziali e inviale al cliente per il suo primo accesso."}),f.jsxs("div",{className:"my-6 space-y-3",children:[f.jsxs("div",{className:"bg-background p-3 rounded-lg",children:[f.jsx("p",{className:"text-xs text-muted",children:"Email (Username)"}),f.jsx("p",{className:"font-mono text-white",children:a.email})]}),f.jsxs("div",{className:"bg-background p-3 rounded-lg",children:[f.jsx("p",{className:"text-xs text-muted",children:"Password Temporanea"}),f.jsx("p",{className:"font-mono text-white",children:a.password})]})]}),f.jsx(We.button,{onClick:m,className:"w-full py-3 bg-green-500 text-white font-semibold rounded-lg flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:c?f.jsxs(f.Fragment,{children:[f.jsx(YN,{})," Copiato!"]}):f.jsxs(f.Fragment,{children:[f.jsx(D9,{})," Copia Credenziali"]})}),f.jsx("button",{onClick:y,className:"w-full mt-2 py-2 text-muted text-sm text-center",children:"Chiudi e vai alla lista clienti"})]})})})]})}function OO(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=OO(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function $m(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=OO(t))&&(r&&(r+=" "),r+=e);return r}const NQ=(t,e,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const i=Object.getOwnPropertyDescriptor(t,n),s=Object.getOwnPropertyDescriptor(e,n);!DQ(i,s)&&r||Object.defineProperty(t,n,s)},DQ=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},OQ=(t,e)=>{const n=Object.getPrototypeOf(e);n!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,n)},MQ=(t,e)=>`/* Wrapped ${t}*/
${e}`,jQ=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),LQ=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),VQ=(t,e,n)=>{const r=n===""?"":`with ${n.trim()}() `,i=MQ.bind(null,r,e.toString());Object.defineProperty(i,"name",LQ);const{writable:s,enumerable:o,configurable:a}=jQ;Object.defineProperty(t,"toString",{value:i,writable:s,enumerable:o,configurable:a})};function FQ(t,e,{ignoreNonConfigurable:n=!1}={}){const{name:r}=t;for(const i of Reflect.ownKeys(e))NQ(t,e,i,n);return OQ(t,e),VQ(t,e,r),t}const UQ=new WeakMap,SI=new WeakMap;function MO(t,{cacheKey:e,cache:n=new Map,maxAge:r}={}){if(r===0)return t;if(typeof r=="number"){if(r>2147483647)throw new TypeError("The `maxAge` option cannot exceed 2147483647.");if(r<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const i=function(...s){var u;const o=e?e(s):s[0],a=n.get(o);if(a)return a.data;const l=t.apply(this,s),c=typeof r=="function"?r(...s):r;if(n.set(o,{data:l,maxAge:c?Date.now()+c:Number.POSITIVE_INFINITY}),c&&c>0&&c!==Number.POSITIVE_INFINITY){const d=setTimeout(()=>{n.delete(o)},c);(u=d.unref)==null||u.call(d);const p=SI.get(t)??new Set;p.add(d),SI.set(t,p)}return l};return FQ(i,t,{ignoreNonConfigurable:!0}),UQ.set(i,n),i}function BQ(t){return typeof t=="string"}function zQ(t,e,n){return n.indexOf(t)===e}function $Q(t){return t.toLowerCase()===t}function EI(t){return t.indexOf(",")===-1?t:t.split(",")}function I_(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var e=t.split(".")[0],n=e===void 0?"":e;return I_(n)}if(t.indexOf("@")!==-1){var r=t.split("@")[0],n=r===void 0?"":r;return I_(n)}if(t.indexOf("-")===-1||!$Q(t))return t;var i=t.split("-"),s=i[0],o=i[1],a=o===void 0?"":o;return"".concat(s,"-").concat(a.toUpperCase())}function WQ(t){var e=t===void 0?{}:t,n=e.useFallbackLocale,r=n===void 0?!0:n,i=e.fallbackLocale,s=i===void 0?"en-US":i,o=[];if(typeof navigator<"u"){for(var a=navigator.languages||[],l=[],c=0,u=a;c<u.length;c++){var d=u[c];l=l.concat(EI(d))}var p=navigator.language,m=p&&EI(p);o=o.concat(l,m)}return r&&o.push(s),o.filter(BQ).map(I_).filter(zQ)}var HQ=MO(WQ,{cacheKey:JSON.stringify});function qQ(t){return HQ(t)[0]||null}var jO=MO(qQ,{cacheKey:JSON.stringify});function Qi(t,e,n){return function(i,s=n){const o=t(i)+s;return e(o)}}function Lh(t){return function(n){return new Date(t(n).getTime()-1)}}function Vh(t,e){return function(r){return[t(r),e(r)]}}function ot(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;const e=Number.parseInt(t,10);if(typeof t=="string"&&!Number.isNaN(e))return e;throw new Error(`Failed to get year from date: ${t}.`)}function eo(t){if(t instanceof Date)return t.getMonth();throw new Error(`Failed to get month from date: ${t}.`)}function Wm(t){if(t instanceof Date)return t.getDate();throw new Error(`Failed to get year from date: ${t}.`)}function Hl(t){const e=ot(t),n=e+(-e+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}const KQ=Qi(ot,Hl,-100),LO=Qi(ot,Hl,100),Jw=Lh(LO),GQ=Qi(ot,Jw,-100),VO=Vh(Hl,Jw);function to(t){const e=ot(t),n=e+(-e+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}const FO=Qi(ot,to,-10),Zw=Qi(ot,to,10),Hm=Lh(Zw),UO=Qi(ot,Hm,-10),BO=Vh(to,Hm);function ql(t){const e=ot(t),n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}const zO=Qi(ot,ql,-1),eb=Qi(ot,ql,1),qm=Lh(eb),$O=Qi(ot,qm,-1),YQ=Vh(ql,qm);function tb(t,e){return function(r,i=e){const s=ot(r),o=eo(r)+i,a=new Date;return a.setFullYear(s,o,1),a.setHours(0,0,0,0),t(a)}}function da(t){const e=ot(t),n=eo(t),r=new Date;return r.setFullYear(e,n,1),r.setHours(0,0,0,0),r}const WO=tb(da,-1),nb=tb(da,1),Fh=Lh(nb),HO=tb(Fh,-1),QQ=Vh(da,Fh);function XQ(t,e){return function(r,i=e){const s=ot(r),o=eo(r),a=Wm(r)+i,l=new Date;return l.setFullYear(s,o,a),l.setHours(0,0,0,0),t(l)}}function Uh(t){const e=ot(t),n=eo(t),r=Wm(t),i=new Date;return i.setFullYear(e,n,r),i.setHours(0,0,0,0),i}const JQ=XQ(Uh,1),rb=Lh(JQ),ZQ=Vh(Uh,rb);function qO(t){return Wm(Fh(t))}var Xt={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},eX={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},ib=[0,1,2,3,4,5,6],Sy=new Map;function tX(t){return function(n,r){var i=n||jO();Sy.has(i)||Sy.set(i,new Map);var s=Sy.get(i);return s.has(t)||s.set(t,new Intl.DateTimeFormat(i||void 0,t).format),s.get(t)(r)}}function nX(t){var e=new Date(t);return new Date(e.setHours(12))}function fa(t){return function(e,n){return tX(t)(e,nX(n))}}var rX={day:"numeric"},iX={day:"numeric",month:"long",year:"numeric"},sX={month:"long"},oX={month:"long",year:"numeric"},aX={weekday:"short"},lX={weekday:"long"},cX={year:"numeric"},uX=fa(rX),hX=fa(iX),dX=fa(sX),KO=fa(oX),fX=fa(aX),pX=fa(lX),Km=fa(cX),mX=ib[0],gX=ib[5],kI=ib[6];function rh(t,e){e===void 0&&(e=Xt.ISO_8601);var n=t.getDay();switch(e){case Xt.ISO_8601:return(n+6)%7;case Xt.ISLAMIC:return(n+1)%7;case Xt.HEBREW:case Xt.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function yX(t){var e=Hl(t);return ot(e)}function vX(t){var e=to(t);return ot(e)}function C_(t,e){e===void 0&&(e=Xt.ISO_8601);var n=ot(t),r=eo(t),i=t.getDate()-rh(t,e);return new Date(n,r,i)}function _X(t,e){e===void 0&&(e=Xt.ISO_8601);var n=e===Xt.GREGORY?Xt.GREGORY:Xt.ISO_8601,r=C_(t,e),i=ot(t)+1,s,o;do s=new Date(i,0,n===Xt.ISO_8601?4:1),o=C_(s,e),i-=1;while(t<o);return Math.round((r.getTime()-o.getTime())/(864e5*7))+1}function Uo(t,e){switch(t){case"century":return Hl(e);case"decade":return to(e);case"year":return ql(e);case"month":return da(e);case"day":return Uh(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function xX(t,e){switch(t){case"century":return KQ(e);case"decade":return FO(e);case"year":return zO(e);case"month":return WO(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function GO(t,e){switch(t){case"century":return LO(e);case"decade":return Zw(e);case"year":return eb(e);case"month":return nb(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function wX(t,e){switch(t){case"decade":return FO(e,-100);case"year":return zO(e,-10);case"month":return WO(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function bX(t,e){switch(t){case"decade":return Zw(e,100);case"year":return eb(e,10);case"month":return nb(e,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function YO(t,e){switch(t){case"century":return Jw(e);case"decade":return Hm(e);case"year":return qm(e);case"month":return Fh(e);case"day":return rb(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function TX(t,e){switch(t){case"century":return GQ(e);case"decade":return UO(e);case"year":return $O(e);case"month":return HO(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function SX(t,e){switch(t){case"decade":return UO(e,-100);case"year":return $O(e,-10);case"month":return HO(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function II(t,e){switch(t){case"century":return VO(e);case"decade":return BO(e);case"year":return YQ(e);case"month":return QQ(e);case"day":return ZQ(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function EX(t,e,n){var r=[e,n].sort(function(i,s){return i.getTime()-s.getTime()});return[Uo(t,r[0]),YO(t,r[1])]}function QO(t,e,n){return n.map(function(r){return(e||Km)(t,r)}).join(" – ")}function kX(t,e,n){return QO(t,e,VO(n))}function XO(t,e,n){return QO(t,e,BO(n))}function IX(t){return t.getDay()===new Date().getDay()}function JO(t,e){e===void 0&&(e=Xt.ISO_8601);var n=t.getDay();switch(e){case Xt.ISLAMIC:case Xt.HEBREW:return n===gX||n===kI;case Xt.ISO_8601:case Xt.GREGORY:return n===kI||n===mX;default:throw new Error("Unsupported calendar type.")}}var Vr="react-calendar__navigation";function CX(t){var e=t.activeStartDate,n=t.drillUp,r=t.formatMonthYear,i=r===void 0?KO:r,s=t.formatYear,o=s===void 0?Km:s,a=t.locale,l=t.maxDate,c=t.minDate,u=t.navigationAriaLabel,d=u===void 0?"":u,p=t.navigationAriaLive,m=t.navigationLabel,y=t.next2AriaLabel,v=y===void 0?"":y,x=t.next2Label,w=x===void 0?"»":x,b=t.nextAriaLabel,E=b===void 0?"":b,I=t.nextLabel,C=I===void 0?"›":I,M=t.prev2AriaLabel,S=M===void 0?"":M,_=t.prev2Label,k=_===void 0?"«":_,P=t.prevAriaLabel,A=P===void 0?"":P,D=t.prevLabel,N=D===void 0?"‹":D,q=t.setActiveStartDate,te=t.showDoubleView,re=t.view,ne=t.views,z=ne.indexOf(re)>0,X=re!=="century",Y=xX(re,e),ye=X?wX(re,e):void 0,pe=GO(re,e),xe=X?bX(re,e):void 0,Ve=function(){if(Y.getFullYear()<0)return!0;var Ge=TX(re,e);return c&&c>=Ge}(),Fe=X&&function(){if(ye.getFullYear()<0)return!0;var Ge=SX(re,e);return c&&c>=Ge}(),qe=l&&l<pe,pt=X&&l&&l<xe;function ie(){q(Y,"prev")}function Ie(){q(ye,"prev2")}function ze(){q(pe,"next")}function Ke(){q(xe,"next2")}function Ne(Ge){var ir=function(){switch(re){case"century":return kX(a,o,Ge);case"decade":return XO(a,o,Ge);case"year":return o(a,Ge);case"month":return i(a,Ge);default:throw new Error("Invalid view: ".concat(re,"."))}}();return m?m({date:Ge,label:ir,locale:a||jO()||void 0,view:re}):ir}function hi(){var Ge="".concat(Vr,"__label");return f.jsxs("button",{"aria-label":d,"aria-live":p,className:Ge,disabled:!z,onClick:n,style:{flexGrow:1},type:"button",children:[f.jsx("span",{className:"".concat(Ge,"__labelText ").concat(Ge,"__labelText--from"),children:Ne(e)}),te?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"".concat(Ge,"__divider"),children:" – "}),f.jsx("span",{className:"".concat(Ge,"__labelText ").concat(Ge,"__labelText--to"),children:Ne(pe)})]}):null]})}return f.jsxs("div",{className:Vr,children:[k!==null&&X?f.jsx("button",{"aria-label":S,className:"".concat(Vr,"__arrow ").concat(Vr,"__prev2-button"),disabled:Fe,onClick:Ie,type:"button",children:k}):null,N!==null&&f.jsx("button",{"aria-label":A,className:"".concat(Vr,"__arrow ").concat(Vr,"__prev-button"),disabled:Ve,onClick:ie,type:"button",children:N}),hi(),C!==null&&f.jsx("button",{"aria-label":E,className:"".concat(Vr,"__arrow ").concat(Vr,"__next-button"),disabled:qe,onClick:ze,type:"button",children:C}),w!==null&&X?f.jsx("button",{"aria-label":v,className:"".concat(Vr,"__arrow ").concat(Vr,"__next2-button"),disabled:pt,onClick:Ke,type:"button",children:w}):null]})}var qa=function(){return qa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qa.apply(this,arguments)},PX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function CI(t){return"".concat(t,"%")}function sb(t){var e=t.children,n=t.className,r=t.count,i=t.direction,s=t.offset,o=t.style,a=t.wrap,l=PX(t,["children","className","count","direction","offset","style","wrap"]);return f.jsx("div",qa({className:n,style:qa({display:"flex",flexDirection:i,flexWrap:a?"wrap":"nowrap"},o)},l,{children:O.Children.map(e,function(c,u){var d=s&&u===0?CI(100*s/r):null;return O.cloneElement(c,qa(qa({},c.props),{style:{flexBasis:CI(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:d,marginInlineStart:d,marginInlineEnd:0}}))})}))}function AX(t,e,n){return e&&e>t?e:n&&n<t?n:t}function ih(t,e){return e[0]<=t&&e[1]>=t}function RX(t,e){return t[0]<=e[0]&&t[1]>=e[1]}function ZO(t,e){return ih(t[0],e)||ih(t[1],e)}function PI(t,e,n){var r=ZO(e,t),i=[];if(r){i.push(n);var s=ih(t[0],e),o=ih(t[1],e);s&&i.push("".concat(n,"Start")),o&&i.push("".concat(n,"End")),s&&o&&i.push("".concat(n,"BothEnds"))}return i}function NX(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function DX(t){if(!t)throw new Error("args is required");var e=t.value,n=t.date,r=t.hover,i="react-calendar__tile",s=[i];if(!n)return s;var o=new Date,a=function(){if(Array.isArray(n))return n;var m=t.dateType;if(!m)throw new Error("dateType is required when date is not an array of two dates");return II(m,n)}();if(ih(o,a)&&s.push("".concat(i,"--now")),!e||!NX(e))return s;var l=function(){if(Array.isArray(e))return e;var m=t.valueType;if(!m)throw new Error("valueType is required when value is not an array of two dates");return II(m,e)}();RX(l,a)?s.push("".concat(i,"--active")):ZO(l,a)&&s.push("".concat(i,"--hasActive"));var c=PI(l,a,"".concat(i,"--range"));s.push.apply(s,c);var u=Array.isArray(e)?e:[e];if(r&&u.length===1){var d=r>l[0]?[l[0],r]:[r,l[0]],p=PI(d,a,"".concat(i,"--hover"));s.push.apply(s,p)}return s}function Gm(t){for(var e=t.className,n=t.count,r=n===void 0?3:n,i=t.dateTransform,s=t.dateType,o=t.end,a=t.hover,l=t.offset,c=t.renderTile,u=t.start,d=t.step,p=d===void 0?1:d,m=t.value,y=t.valueType,v=[],x=u;x<=o;x+=p){var w=i(x);v.push(c({classes:DX({date:w,dateType:s,hover:a,value:m,valueType:y}),date:w}))}return f.jsx(sb,{className:e,count:r,offset:l,wrap:!0,children:v})}function Ym(t){var e=t.activeStartDate,n=t.children,r=t.classes,i=t.date,s=t.formatAbbr,o=t.locale,a=t.maxDate,l=t.maxDateTransform,c=t.minDate,u=t.minDateTransform,d=t.onClick,p=t.onMouseOver,m=t.style,y=t.tileClassName,v=t.tileContent,x=t.tileDisabled,w=t.view,b=O.useMemo(function(){var I={activeStartDate:e,date:i,view:w};return typeof y=="function"?y(I):y},[e,i,y,w]),E=O.useMemo(function(){var I={activeStartDate:e,date:i,view:w};return typeof v=="function"?v(I):v},[e,i,v,w]);return f.jsxs("button",{className:$m(r,b),disabled:c&&u(c)>i||a&&l(a)<i||(x==null?void 0:x({activeStartDate:e,date:i,view:w})),onClick:d?function(I){return d(i,I)}:void 0,onFocus:p?function(){return p(i)}:void 0,onMouseOver:p?function(){return p(i)}:void 0,style:m,type:"button",children:[s?f.jsx("abbr",{"aria-label":s(o,i),children:n}):n,E]})}var P_=function(){return P_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},P_.apply(this,arguments)},OX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},AI="react-calendar__century-view__decades__decade";function MX(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentCentury,i=t.formatYear,s=i===void 0?Km:i,o=OX(t,["classes","currentCentury","formatYear"]),a=o.date,l=o.locale,c=[];return n&&c.push.apply(c,n),c.push(AI),Hl(a).getFullYear()!==r&&c.push("".concat(AI,"--neighboringCentury")),f.jsx(Ym,P_({},o,{classes:c,maxDateTransform:Hm,minDateTransform:to,view:"century",children:XO(l,s,a)}))}var A_=function(){return A_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},A_.apply(this,arguments)},RI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function jX(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringCentury,i=t.value,s=t.valueType,o=RI(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),a=yX(e),l=a+(r?119:99);return f.jsx(Gm,{className:"react-calendar__century-view__decades",dateTransform:to,dateType:"decade",end:l,hover:n,renderTile:function(c){var u=c.date,d=RI(c,["date"]);return f.jsx(MX,A_({},o,d,{activeStartDate:e,currentCentury:a,date:u}),u.getTime())},start:a,step:10,value:i,valueType:s})}var R_=function(){return R_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},R_.apply(this,arguments)};function LX(t){function e(){return f.jsx(jX,R_({},t))}return f.jsx("div",{className:"react-calendar__century-view",children:e()})}var N_=function(){return N_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},N_.apply(this,arguments)},VX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},NI="react-calendar__decade-view__years__year";function FX(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentDecade,i=t.formatYear,s=i===void 0?Km:i,o=VX(t,["classes","currentDecade","formatYear"]),a=o.date,l=o.locale,c=[];return n&&c.push.apply(c,n),c.push(NI),to(a).getFullYear()!==r&&c.push("".concat(NI,"--neighboringDecade")),f.jsx(Ym,N_({},o,{classes:c,maxDateTransform:qm,minDateTransform:ql,view:"decade",children:s(l,a)}))}var D_=function(){return D_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},D_.apply(this,arguments)},DI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function UX(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringDecade,i=t.value,s=t.valueType,o=DI(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),a=vX(e),l=a+(r?11:9);return f.jsx(Gm,{className:"react-calendar__decade-view__years",dateTransform:ql,dateType:"year",end:l,hover:n,renderTile:function(c){var u=c.date,d=DI(c,["date"]);return f.jsx(FX,D_({},o,d,{activeStartDate:e,currentDecade:a,date:u}),u.getTime())},start:a,value:i,valueType:s})}var O_=function(){return O_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},O_.apply(this,arguments)};function BX(t){function e(){return f.jsx(UX,O_({},t))}return f.jsx("div",{className:"react-calendar__decade-view",children:e()})}var M_=function(){return M_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},M_.apply(this,arguments)},zX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},OI=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},$X="react-calendar__year-view__months__month";function WX(t){var e=t.classes,n=e===void 0?[]:e,r=t.formatMonth,i=r===void 0?dX:r,s=t.formatMonthYear,o=s===void 0?KO:s,a=zX(t,["classes","formatMonth","formatMonthYear"]),l=a.date,c=a.locale;return f.jsx(Ym,M_({},a,{classes:OI(OI([],n,!0),[$X],!1),formatAbbr:o,maxDateTransform:Fh,minDateTransform:da,view:"year",children:i(c,l)}))}var j_=function(){return j_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},j_.apply(this,arguments)},MI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function HX(t){var e=t.activeStartDate,n=t.hover,r=t.value,i=t.valueType,s=MI(t,["activeStartDate","hover","value","valueType"]),o=0,a=11,l=ot(e);return f.jsx(Gm,{className:"react-calendar__year-view__months",dateTransform:function(c){var u=new Date;return u.setFullYear(l,c,1),da(u)},dateType:"month",end:a,hover:n,renderTile:function(c){var u=c.date,d=MI(c,["date"]);return f.jsx(WX,j_({},s,d,{activeStartDate:e,date:u}),u.getTime())},start:o,value:r,valueType:i})}var L_=function(){return L_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},L_.apply(this,arguments)};function qX(t){function e(){return f.jsx(HX,L_({},t))}return f.jsx("div",{className:"react-calendar__year-view",children:e()})}var V_=function(){return V_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},V_.apply(this,arguments)},KX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Ey="react-calendar__month-view__days__day";function GX(t){var e=t.calendarType,n=t.classes,r=n===void 0?[]:n,i=t.currentMonthIndex,s=t.formatDay,o=s===void 0?uX:s,a=t.formatLongDate,l=a===void 0?hX:a,c=KX(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),u=c.date,d=c.locale,p=[];return r&&p.push.apply(p,r),p.push(Ey),JO(u,e)&&p.push("".concat(Ey,"--weekend")),u.getMonth()!==i&&p.push("".concat(Ey,"--neighboringMonth")),f.jsx(Ym,V_({},c,{classes:p,formatAbbr:l,maxDateTransform:rb,minDateTransform:Uh,view:"month",children:o(d,u)}))}var F_=function(){return F_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},F_.apply(this,arguments)},jI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function YX(t){var e=t.activeStartDate,n=t.calendarType,r=t.hover,i=t.showFixedNumberOfWeeks,s=t.showNeighboringMonth,o=t.value,a=t.valueType,l=jI(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),c=ot(e),u=eo(e),d=i||s,p=rh(e,n),m=d?0:p,y=(d?-p:0)+1,v=function(){if(i)return y+6*7-1;var x=qO(e);if(s){var w=new Date;w.setFullYear(c,u,x),w.setHours(0,0,0,0);var b=7-rh(w,n)-1;return x+b}return x}();return f.jsx(Gm,{className:"react-calendar__month-view__days",count:7,dateTransform:function(x){var w=new Date;return w.setFullYear(c,u,x),Uh(w)},dateType:"day",hover:r,end:v,renderTile:function(x){var w=x.date,b=jI(x,["date"]);return f.jsx(GX,F_({},l,b,{activeStartDate:e,calendarType:n,currentMonthIndex:u,date:w}),w.getTime())},offset:m,start:y,value:o,valueType:a})}var eM="react-calendar__month-view__weekdays",ky="".concat(eM,"__weekday");function QX(t){for(var e=t.calendarType,n=t.formatShortWeekday,r=n===void 0?fX:n,i=t.formatWeekday,s=i===void 0?pX:i,o=t.locale,a=t.onMouseLeave,l=new Date,c=da(l),u=ot(c),d=eo(c),p=[],m=1;m<=7;m+=1){var y=new Date(u,d,m-rh(c,e)),v=s(o,y);p.push(f.jsx("div",{className:$m(ky,IX(y)&&"".concat(ky,"--current"),JO(y,e)&&"".concat(ky,"--weekend")),children:f.jsx("abbr",{"aria-label":v,title:v,children:r(o,y).replace(".","")})},m))}return f.jsx(sb,{className:eM,count:7,onFocus:a,onMouseOver:a,children:p})}var Lp=function(){return Lp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Lp.apply(this,arguments)},LI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},VI="react-calendar__tile";function XX(t){var e=t.onClickWeekNumber,n=t.weekNumber,r=f.jsx("span",{children:n});if(e){var i=t.date,s=t.onClickWeekNumber,o=t.weekNumber,a=LI(t,["date","onClickWeekNumber","weekNumber"]);return f.jsx("button",Lp({},a,{className:VI,onClick:function(l){return s(o,i,l)},type:"button",children:r}))}else{t.date,t.onClickWeekNumber,t.weekNumber;var a=LI(t,["date","onClickWeekNumber","weekNumber"]);return f.jsx("div",Lp({},a,{className:VI,children:r}))}}function JX(t){var e=t.activeStartDate,n=t.calendarType,r=t.onClickWeekNumber,i=t.onMouseLeave,s=t.showFixedNumberOfWeeks,o=function(){if(s)return 6;var c=qO(e),u=rh(e,n),d=c-(7-u);return 1+Math.ceil(d/7)}(),a=function(){for(var c=ot(e),u=eo(e),d=Wm(e),p=[],m=0;m<o;m+=1)p.push(C_(new Date(c,u,d+m*7),n));return p}(),l=a.map(function(c){return _X(c,n)});return f.jsx(sb,{className:"react-calendar__month-view__weekNumbers",count:o,direction:"column",onFocus:i,onMouseOver:i,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:l.map(function(c,u){var d=a[u];if(!d)throw new Error("date is not defined");return f.jsx(XX,{date:d,onClickWeekNumber:r,weekNumber:c},c)})})}var U_=function(){return U_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},U_.apply(this,arguments)},ZX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function eJ(t){if(t)for(var e=0,n=Object.entries(eX);e<n.length;e++){var r=n[e],i=r[0],s=r[1];if(s.includes(t))return i}return Xt.ISO_8601}function tJ(t){var e=t.activeStartDate,n=t.locale,r=t.onMouseLeave,i=t.showFixedNumberOfWeeks,s=t.calendarType,o=s===void 0?eJ(n):s,a=t.formatShortWeekday,l=t.formatWeekday,c=t.onClickWeekNumber,u=t.showWeekNumbers,d=ZX(t,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function p(){return f.jsx(QX,{calendarType:o,formatShortWeekday:a,formatWeekday:l,locale:n,onMouseLeave:r})}function m(){return u?f.jsx(JX,{activeStartDate:e,calendarType:o,onClickWeekNumber:c,onMouseLeave:r,showFixedNumberOfWeeks:i}):null}function y(){return f.jsx(YX,U_({calendarType:o},d))}var v="react-calendar__month-view";return f.jsx("div",{className:$m(v,u?"".concat(v,"--weekNumbers"):""),children:f.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[m(),f.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[p(),y()]})]})})}var Ka=function(){return Ka=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ka.apply(this,arguments)},Hd="react-calendar",If=["century","decade","year","month"],nJ=["decade","year","month","day"],ob=new Date;ob.setFullYear(1,0,1);ob.setHours(0,0,0,0);var rJ=new Date(864e13);function $c(t){return t instanceof Date?t:new Date(t)}function tM(t,e){return If.slice(If.indexOf(t),If.indexOf(e)+1)}function iJ(t,e,n){var r=tM(e,n);return r.indexOf(t)!==-1}function ab(t,e,n){return t&&iJ(t,e,n)?t:n}function nM(t){var e=If.indexOf(t);return nJ[e]}function sJ(t,e){var n=Array.isArray(t)?t[e]:t;if(!n)return null;var r=$c(n);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(t));return r}function rM(t,e){var n=t.value,r=t.minDate,i=t.maxDate,s=t.maxDetail,o=sJ(n,e);if(!o)return null;var a=nM(s),l=function(){switch(e){case 0:return Uo(a,o);case 1:return YO(a,o);default:throw new Error("Invalid index value: ".concat(e))}}();return AX(l,r,i)}var lb=function(t){return rM(t,0)},iM=function(t){return rM(t,1)},oJ=function(t){return[lb,iM].map(function(e){return e(t)})};function sM(t){var e=t.maxDate,n=t.maxDetail,r=t.minDate,i=t.minDetail,s=t.value,o=t.view,a=ab(o,i,n),l=lb({value:s,minDate:r,maxDate:e,maxDetail:n})||new Date;return Uo(a,l)}function aJ(t){var e=t.activeStartDate,n=t.defaultActiveStartDate,r=t.defaultValue,i=t.defaultView,s=t.maxDate,o=t.maxDetail,a=t.minDate,l=t.minDetail,c=t.value,u=t.view,d=ab(u,l,o),p=e||n;return p?Uo(d,p):sM({maxDate:s,maxDetail:o,minDate:a,minDetail:l,value:c||r,view:u||i})}function Iy(t){return t&&(!Array.isArray(t)||t.length===1)}function qd(t,e){return t instanceof Date&&e instanceof Date&&t.getTime()===e.getTime()}var oM=O.forwardRef(function(e,n){var r=e.activeStartDate,i=e.allowPartialRange,s=e.calendarType,o=e.className,a=e.defaultActiveStartDate,l=e.defaultValue,c=e.defaultView,u=e.formatDay,d=e.formatLongDate,p=e.formatMonth,m=e.formatMonthYear,y=e.formatShortWeekday,v=e.formatWeekday,x=e.formatYear,w=e.goToRangeStartOnSelect,b=w===void 0?!0:w,E=e.inputRef,I=e.locale,C=e.maxDate,M=C===void 0?rJ:C,S=e.maxDetail,_=S===void 0?"month":S,k=e.minDate,P=k===void 0?ob:k,A=e.minDetail,D=A===void 0?"century":A,N=e.navigationAriaLabel,q=e.navigationAriaLive,te=e.navigationLabel,re=e.next2AriaLabel,ne=e.next2Label,z=e.nextAriaLabel,X=e.nextLabel,Y=e.onActiveStartDateChange,ye=e.onChange,pe=e.onClickDay,xe=e.onClickDecade,Ve=e.onClickMonth,Fe=e.onClickWeekNumber,qe=e.onClickYear,pt=e.onDrillDown,ie=e.onDrillUp,Ie=e.onViewChange,ze=e.prev2AriaLabel,Ke=e.prev2Label,Ne=e.prevAriaLabel,hi=e.prevLabel,Ge=e.returnValue,ir=Ge===void 0?"start":Ge,Wt=e.selectRange,Xi=e.showDoubleView,Kl=e.showFixedNumberOfWeeks,Ji=e.showNavigation,j=Ji===void 0?!0:Ji,V=e.showNeighboringCentury,U=e.showNeighboringDecade,Q=e.showNeighboringMonth,K=Q===void 0?!0:Q,H=e.showWeekNumbers,J=e.tileClassName,he=e.tileContent,Ce=e.tileDisabled,Nt=e.value,Nr=e.view,$n=O.useState(a),di=$n[0],gr=$n[1],fi=O.useState(null),no=fi[0],ro=fi[1],pa=O.useState(Array.isArray(l)?l.map(function(ve){return ve!==null?$c(ve):null}):l!=null?$c(l):null),Dr=pa[0],Bh=pa[1],Gl=O.useState(c),io=Gl[0],ma=Gl[1],jt=r||di||aJ({activeStartDate:r,defaultActiveStartDate:a,defaultValue:l,defaultView:c,maxDate:M,maxDetail:_,minDate:P,minDetail:D,value:Nt,view:Nr}),mt=function(){var ve=function(){return Wt&&Iy(Dr)?Dr:Nt!==void 0?Nt:Dr}();return ve?Array.isArray(ve)?ve.map(function(De){return De!==null?$c(De):null}):ve!==null?$c(ve):null:null}(),so=nM(_),Ue=ab(Nr||io,D,_),Wn=tM(D,_),oo=Wt?no:null,ga=Wn.indexOf(Ue)<Wn.length-1,Lt=Wn.indexOf(Ue)>0,Yl=O.useCallback(function(ve){var De=function(){switch(ir){case"start":return lb;case"end":return iM;case"range":return oJ;default:throw new Error("Invalid returnValue.")}}();return De({maxDate:M,maxDetail:_,minDate:P,value:ve})},[M,_,P,ir]),pi=O.useCallback(function(ve,De){gr(ve);var at={action:De,activeStartDate:ve,value:mt,view:Ue};Y&&!qd(jt,ve)&&Y(at)},[jt,Y,mt,Ue]),Or=O.useCallback(function(ve,De){var at=function(){switch(Ue){case"century":return xe;case"decade":return qe;case"year":return Ve;case"month":return pe;default:throw new Error("Invalid view: ".concat(Ue,"."))}}();at&&at(ve,De)},[pe,xe,Ve,qe,Ue]),Ql=O.useCallback(function(ve,De){if(ga){Or(ve,De);var at=Wn[Wn.indexOf(Ue)+1];if(!at)throw new Error("Attempted to drill down from the lowest view.");gr(ve),ma(at);var Rn={action:"drillDown",activeStartDate:ve,value:mt,view:at};Y&&!qd(jt,ve)&&Y(Rn),Ie&&Ue!==at&&Ie(Rn),pt&&pt(Rn)}},[jt,ga,Y,Or,pt,Ie,mt,Ue,Wn]),Xl=O.useCallback(function(){if(Lt){var ve=Wn[Wn.indexOf(Ue)-1];if(!ve)throw new Error("Attempted to drill up from the highest view.");var De=Uo(ve,jt);gr(De),ma(ve);var at={action:"drillUp",activeStartDate:De,value:mt,view:ve};Y&&!qd(jt,De)&&Y(at),Ie&&Ue!==ve&&Ie(at),ie&&ie(at)}},[jt,Lt,Y,ie,Ie,mt,Ue,Wn]),Mr=O.useCallback(function(ve,De){var at=mt;Or(ve,De);var Rn=Wt&&!Iy(at),Tn;if(Wt)if(Rn)Tn=Uo(so,ve);else{if(!at)throw new Error("previousValue is required");if(Array.isArray(at))throw new Error("previousValue must not be an array");Tn=EX(so,at,ve)}else Tn=Yl(ve);var lo=!Wt||Rn||b?sM({maxDate:M,maxDetail:_,minDate:P,minDetail:D,value:Tn,view:Ue}):null;De.persist(),gr(lo),Bh(Tn);var $h={action:"onChange",activeStartDate:lo,value:Tn,view:Ue};if(Y&&!qd(jt,lo)&&Y($h),ye)if(Wt){var Wh=Iy(Tn);if(!Wh)ye(Tn||null,De);else if(i){if(Array.isArray(Tn))throw new Error("value must not be an array");ye([Tn||null,null],De)}}else ye(Tn||null,De)},[jt,i,Yl,b,M,_,P,D,Y,ye,Or,Wt,mt,so,Ue]);function Qm(ve){ro(ve)}function Jl(){ro(null)}O.useImperativeHandle(n,function(){return{activeStartDate:jt,drillDown:Ql,drillUp:Xl,onChange:Mr,setActiveStartDate:pi,value:mt,view:Ue}},[jt,Ql,Xl,Mr,pi,mt,Ue]);function ao(ve){var De=ve?GO(Ue,jt):Uo(Ue,jt),at=ga?Ql:Mr,Rn={activeStartDate:De,hover:oo,locale:I,maxDate:M,minDate:P,onClick:at,onMouseOver:Wt?Qm:void 0,tileClassName:J,tileContent:he,tileDisabled:Ce,value:mt,valueType:so};switch(Ue){case"century":return f.jsx(LX,Ka({formatYear:x,showNeighboringCentury:V},Rn));case"decade":return f.jsx(BX,Ka({formatYear:x,showNeighboringDecade:U},Rn));case"year":return f.jsx(qX,Ka({formatMonth:p,formatMonthYear:m},Rn));case"month":return f.jsx(tJ,Ka({calendarType:s,formatDay:u,formatLongDate:d,formatShortWeekday:y,formatWeekday:v,onClickWeekNumber:Fe,onMouseLeave:Wt?Jl:void 0,showFixedNumberOfWeeks:typeof Kl<"u"?Kl:Xi,showNeighboringMonth:K,showWeekNumbers:H},Rn));default:throw new Error("Invalid view: ".concat(Ue,"."))}}function zh(){return j?f.jsx(CX,{activeStartDate:jt,drillUp:Xl,formatMonthYear:m,formatYear:x,locale:I,maxDate:M,minDate:P,navigationAriaLabel:N,navigationAriaLive:q,navigationLabel:te,next2AriaLabel:re,next2Label:ne,nextAriaLabel:z,nextLabel:X,prev2AriaLabel:ze,prev2Label:Ke,prevAriaLabel:Ne,prevLabel:hi,setActiveStartDate:pi,showDoubleView:Xi,view:Ue,views:Wn}):null}var Zl=Array.isArray(mt)?mt:[mt];return f.jsxs("div",{className:$m(Hd,Wt&&Zl.length===1&&"".concat(Hd,"--selectRange"),Xi&&"".concat(Hd,"--doubleView"),o),ref:E,children:[zh(),f.jsxs("div",{className:"".concat(Hd,"__viewContainer"),onBlur:Wt?Jl:void 0,onMouseLeave:Wt?Jl:void 0,children:[ao(),Xi?ao(!0):null]})]})});let Kd;const lJ=new Uint8Array(16);function cJ(){if(!Kd&&(Kd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Kd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Kd(lJ)}const qt=[];for(let t=0;t<256;++t)qt.push((t+256).toString(16).slice(1));function uJ(t,e=0){return qt[t[e+0]]+qt[t[e+1]]+qt[t[e+2]]+qt[t[e+3]]+"-"+qt[t[e+4]]+qt[t[e+5]]+"-"+qt[t[e+6]]+qt[t[e+7]]+"-"+qt[t[e+8]]+qt[t[e+9]]+"-"+qt[t[e+10]]+qt[t[e+11]]+qt[t[e+12]]+qt[t[e+13]]+qt[t[e+14]]+qt[t[e+15]]}const hJ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),FI={randomUUID:hJ};function cb(t,e,n){if(FI.randomUUID&&!t)return FI.randomUUID();t=t||{};const r=t.random||(t.rng||cJ)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,uJ(r)}function dJ({clientId:t}){const{register:e,handleSubmit:n,reset:r,formState:{errors:i}}=Wl(),[s,o]=O.useState(!1),[a,l]=O.useState(0),c=async p=>{o(!0),l(0);const m=Array.from(p.photos);if(m.length===0){alert("Per favore, seleziona almeno una foto."),o(!1);return}try{const y=await Promise.all(m.map(v=>new Promise((x,w)=>{const b=`${cb()}-${v.name}`,E=Sl(m9,`clients/${t}/checks/${b}`),I=c9(E,v);I.on("state_changed",C=>{const M=C.bytesTransferred/C.totalBytes*100;l(M)},C=>w(C),async()=>{const C=await Em(I.snapshot.ref);x(C)})})));await Tm(Jt(ue,"clients",t,"checks"),{notes:p.notes,photoURLs:y,createdAt:zn()}),r()}catch(y){console.error("Errore nel processo di salvataggio del check:",y),alert("Si è verificato un errore durante il salvataggio.")}finally{o(!1),l(0)}},u="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary transition-all",d="block mb-1 text-sm font-medium text-muted";return f.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[f.jsxs("h3",{className:"text-xl font-semibold mb-4 text-primary flex items-center gap-2",children:[f.jsx(V9,{})," Nuovo Check"]}),f.jsxs("form",{onSubmit:n(c),className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"notes",className:d,children:"Note sui progressi"}),f.jsx("textarea",{id:"notes",...e("notes"),rows:"4",className:u,placeholder:"Es. Aumento carichi, sensazioni, misure..."})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"photos",className:d,children:"Foto Progressi"}),f.jsx("input",{id:"photos",type:"file",multiple:!0,accept:"image/png, image/jpeg, image/webp",...e("photos",{required:"Le foto sono obbligatorie."}),className:"w-full text-sm text-muted file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary/20 file:text-primary hover:file:bg-primary/30"}),i.photos&&f.jsx("p",{className:"text-red-400 text-xs mt-1",children:i.photos.message})]}),s&&f.jsx("div",{className:"w-full bg-background rounded-full h-2.5",children:f.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${a}%`}})}),f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{type:"submit",disabled:s,className:"px-5 py-2.5 bg-primary hover:bg-primary/80 text-white rounded-lg transition disabled:opacity-50 font-semibold",children:s?`Caricamento... ${Math.round(a)}%`:"Salva Check"})})]})]})}function fJ({clientId:t,onSave:e}){const{register:n,handleSubmit:r,formState:{isSubmitting:i,errors:s}}=Wl(),[o,a]=O.useState(""),[l,c]=O.useState(!1),u=async v=>{a(""),c(!1);try{const x=He(ue,"clients",t,"anamnesi","initial");await Tl(x,{...v,createdAt:zn()}),a("Anamnesi salvata con successo!"),setTimeout(e,1500)}catch(x){console.error("Errore nel salvataggio dell'anamnesi:",x),a("Si è verificato un errore. Riprova."),c(!0)}},d="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",p="block mb-1 text-sm font-medium text-muted",m="bg-card p-4 rounded-lg border border-white/10",y="font-semibold mb-3 text-lg text-primary";return f.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},children:[f.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Compila Anamnesi Iniziale"}),f.jsxs("form",{onSubmit:r(u),className:"space-y-6",children:[f.jsxs("div",{className:m,children:[f.jsx("h4",{className:y,children:"Dati Anagrafici e Misure"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Nome*"}),f.jsx("input",{...n("firstName",{required:!0}),className:d})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Cognome*"}),f.jsx("input",{...n("lastName",{required:!0}),className:d})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Data di Nascita*"}),f.jsx("input",{type:"date",...n("birthDate",{required:!0}),className:d+" text-muted"})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Che lavoro fai?*"}),f.jsx("input",{...n("job",{required:!0}),className:d,placeholder:"Es. Impiegato, operaio..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Peso (kg)*"}),f.jsx("input",{type:"number",step:"0.1",...n("weight",{required:!0}),className:d,placeholder:"Es. 75.5"})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Altezza (cm)*"}),f.jsx("input",{type:"number",...n("height",{required:!0}),className:d,placeholder:"Es. 180"})]})]})]}),f.jsxs("div",{className:m,children:[f.jsx("h4",{className:y,children:"Abitudini Alimentari"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Quanti pasti riesci a fare al giorno?*"}),f.jsxs("select",{...n("mealsPerDay",{required:!0}),className:d,children:[f.jsx("option",{value:"3",children:"3"}),f.jsx("option",{value:"4",children:"4"}),f.jsx("option",{value:"5",children:"5"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Colazione: Dolce o Salata?*"}),f.jsxs("select",{...n("breakfastType",{required:!0}),className:d,children:[f.jsx("option",{value:"dolce",children:"Dolce"}),f.jsx("option",{value:"salato",children:"Salato"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Scrivimi una lista di alimenti da inserire nella settimana*"}),f.jsx("textarea",{...n("desiredFoods",{required:!0}),rows:"3",className:d,placeholder:"Elenca qui gli alimenti che preferisci..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Cosa non mangi?*"}),f.jsx("textarea",{...n("dislikedFoods",{required:!0}),rows:"2",className:d,placeholder:"Elenca qui gli alimenti da evitare..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Hai intolleranze?*"}),f.jsx("input",{...n("intolerances",{required:!0}),className:d,placeholder:"Es. Lattosio, glutine, nessuna..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Hai problemi di digestione o gonfiore?*"}),f.jsx("input",{...n("digestionIssues",{required:!0}),className:d,placeholder:"Sì/No, e se sì quali..."})]})]})]}),f.jsxs("div",{className:m,children:[f.jsx("h4",{className:y,children:"Allenamento"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Quanti allenamenti a settimana?*"}),f.jsx("input",{type:"number",...n("workoutsPerWeek",{required:!0}),className:d,placeholder:"Es. 3"})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Specialità, dove ti alleni e con quali attrezzi?*"}),f.jsx("textarea",{...n("trainingDetails",{required:!0}),rows:"3",className:d,placeholder:"Es. Bodybuilding in palestra, a casa con manubri e panca..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"A che ora e per quanto tempo ti alleni?*"}),f.jsx("input",{...n("trainingTime",{required:!0}),className:d,placeholder:"Es. La sera dalle 18 alle 19:30"})]})]})]}),f.jsxs("div",{className:m,children:[f.jsx("h4",{className:y,children:"Salute e Obiettivi"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Infortuni o problematiche posturali/articolari?*"}),f.jsx("textarea",{...n("injuries",{required:!0}),rows:"3",className:d,placeholder:"Es. Mal di schiena, ernie, sciatalgie..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Prendi farmaci?*"}),f.jsx("input",{...n("medications",{required:!0}),className:d,placeholder:"Sì/No, e se sì quali..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Usi integratori? (se sì, quali)*"}),f.jsx("input",{...n("supplements",{required:!0}),className:d,placeholder:"Sì/No, e se sì quali..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Scrivimi il tuo obiettivo*"}),f.jsx("textarea",{...n("mainGoal",{required:!0}),rows:"3",className:d,placeholder:"Descrivi in dettaglio l'obiettivo che vuoi raggiungere..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Durata percorso scelto?*"}),f.jsx("input",{...n("programDuration",{required:!0}),className:d,placeholder:"Es. 3 mesi, 6 mesi..."})]})]})]}),f.jsx("div",{className:"bg-primary/10 p-4 rounded-lg border border-primary/30 text-center",children:f.jsx("p",{className:"text-sm text-primary",children:"Ricorda di richiedere al cliente le 4 foto per il check iniziale (frontale, laterali, posteriore)."})}),o&&f.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 text-sm ${l?"bg-red-900/50 text-red-300":"bg-green-900/50 text-green-300"}`,children:[l?f.jsx(S9,{}):f.jsx(Yx,{}),o]}),f.jsx("div",{className:"flex justify-end pt-2",children:f.jsxs("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-5 py-2.5 bg-primary hover:bg-primary/80 text-white rounded-lg transition disabled:opacity-50 font-semibold",children:[f.jsx(Im,{})," ",i?"Salvataggio...":"Salva Anamnesi"]})})]})]})}const UI=t=>{if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e};function pJ({clientId:t}){const{register:e,handleSubmit:n,reset:r,formState:{isSubmitting:i}}=Wl(),[s,o]=O.useState([]),[a,l]=O.useState(!1);O.useEffect(()=>{const m=ti(Jt(ue,"clients",t,"payments"),Jo("paymentDate","desc")),y=Zt(m,v=>{o(v.docs.map(x=>({id:x.id,...x.data()})))});return()=>y()},[t]);const c=async m=>{const y=parseInt(m.duration,10),v=EN(ue),x=He(Jt(ue,"clients",t,"payments"));v.set(x,{amount:parseFloat(m.amount),duration:`${y} mes${y>1?"i":"e"}`,paymentMethod:m.paymentMethod,paymentDate:zn()});const w=He(ue,"clients",t),E=(await Yi(w)).data();let I=UI(E.scadenza);(!I||I<new Date)&&(I=new Date);const C=new Date(I);C.setMonth(C.getMonth()+y),v.update(w,{scadenza:C}),await v.commit(),r(),l(!1)},u=async m=>{if(window.confirm("Sei sicuro di voler eliminare questo pagamento? L'operazione non è reversibile."))try{const y=He(ue,"clients",t,"payments",m);await Fx(y)}catch(y){console.error("Errore nell'eliminazione del pagamento:",y),alert("Si è verificato un errore.")}},d="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",p="block mb-1 text-sm font-medium text-muted";return f.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsxs("h3",{className:"text-xl font-semibold text-primary flex items-center gap-2",children:[f.jsx(Ah,{})," Gestione Pagamenti"]}),f.jsxs("button",{onClick:()=>l(!a),className:"flex items-center gap-2 px-3 py-1.5 bg-primary/20 hover:bg-primary/30 text-primary rounded-lg text-sm",children:[a?f.jsx(Cm,{}):f.jsx(km,{})," ",a?"Annulla":"Aggiungi Rinnovo"]})]}),f.jsx(ca,{children:a&&f.jsxs(We.form,{onSubmit:n(c),className:"space-y-4 mb-6 pt-4 border-t border-white/10",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Importo Pagato (€)*"}),f.jsx("input",{type:"number",step:"0.01",...e("amount",{required:!0}),className:d})]}),f.jsxs("div",{children:[f.jsx("label",{className:p,children:"Durata Rinnovo (mesi)*"}),f.jsx("select",{...e("duration",{required:!0}),className:d,children:[...Array(24).keys()].map(m=>f.jsxs("option",{value:m+1,children:[m+1," mes",m>0?"i":"e"]},m+1))})]}),f.jsxs("div",{className:"md:col-span-2",children:[f.jsx("label",{className:p,children:"Metodo di Pagamento"}),f.jsx("input",{...e("paymentMethod"),className:d,placeholder:"Es. Bonifico, Contanti"})]})]}),f.jsx("div",{className:"flex justify-end",children:f.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-primary text-white rounded-lg font-semibold transition disabled:opacity-50",children:i?"Salvataggio...":"Salva Pagamento"})})]})}),f.jsx("h4",{className:"font-semibold mb-3 mt-4",children:"Cronologia Rinnovi"}),f.jsx("div",{className:"space-y-2",children:s.length>0?s.map(m=>{var y;return f.jsxs("div",{className:"flex justify-between items-center p-3 bg-background rounded-md border border-white/10",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(Gx,{className:"text-muted"}),f.jsxs("div",{children:[f.jsxs("p",{className:"font-semibold",children:[m.duration," - €",m.amount.toFixed(2)]}),f.jsxs("p",{className:"text-xs text-muted",children:["Pagato il ",(y=UI(m.paymentDate))==null?void 0:y.toLocaleDateString("it-IT"),m.paymentMethod&&` via ${m.paymentMethod}`]})]})]}),f.jsx("button",{onClick:()=>u(m.id),className:"p-1.5 text-red-500/50 hover:text-red-500 rounded-md transition-colors",children:f.jsx(Zx,{size:16})})]},m.id)}):f.jsx("p",{className:"text-sm text-muted",children:"Nessun pagamento registrato."})})]})}const mJ=`
.react-calendar { width: 100%; background: #1f2937; border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 1rem; }
.react-calendar__tile, .react-calendar__month-view__weekdays__weekday { color: white; }
.react-calendar__navigation button { color: #22d3ee; font-weight: bold; }
.react-calendar__tile--now { background: #374151; border-radius: 0.5rem; }
.react-calendar__tile--active { background: #0891b2; border-radius: 0.5rem; }
.react-calendar__tile:enabled:hover, .react-calendar__tile:enabled:focus { background: #4b5563; border-radius: 0.5rem; }
.check-day-highlight { background-color: rgba(34, 197, 94, 0.5); border-radius: 50%; }
`;function Rl(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const gJ=({urls:t})=>!t||Object.keys(t).length===0?f.jsx("p",{className:"text-muted italic",children:"Nessuna foto caricata."}):f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-white/10",children:["front","right","left","back"].map(e=>{const n=t[e],r=e==="front"?"Frontale":e==="back"?"Posteriore":`Laterale ${e==="left"?"Sinistro":"Destro"}`;return f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-semibold text-muted mb-1",children:r}),n?f.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:f.jsx("img",{src:n,alt:r,className:"rounded-lg w-full h-auto object-cover border border-white/20"})}):f.jsx("div",{className:"flex justify-center items-center w-full h-24 bg-background/50 rounded-lg text-gray-500 text-xs",children:"N/D"})]},e)})}),yJ=({clientId:t})=>{var l;const[e,n]=O.useState(null),[r,i]=O.useState(!0),[s,o]=O.useState({}),a=Ph();if(O.useEffect(()=>{const c=Zt(He(ue,"clients",t,"anamnesi","initial"),async u=>{if(i(!0),u.exists()){const d=u.data();if(n(d),d.photoPaths){const p={};await Promise.all(Object.entries(d.photoPaths).map(async([m,y])=>{try{const v=await Em(Sl(a,y));p[m]=v}catch(v){console.error(`Errore nel caricamento URL per ${m}:`,v)}})),o(p)}else o({})}else n(null),o({});i(!1)});return()=>c()},[t,a]),r)return f.jsx("p",{className:"text-muted text-center p-4",children:"Caricamento..."});if(e){const{photoPaths:c,submittedAt:u,...d}=e;return f.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[f.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[f.jsx("h3",{className:"text-xl font-semibold text-primary mb-4",children:"Dati Anamnesi"}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(d).map(([p,m])=>{var w;const v=m&&typeof m.toDate=="function"?(w=Rl(m))==null?void 0:w.toLocaleDateString("it-IT"):String(m),x=p.replace(/([A-Z])/g," $1").replace(/_/g," ").trim();return f.jsxs("div",{className:"pb-2",children:[f.jsx("h4",{className:"font-semibold text-muted capitalize text-sm",children:x}),f.jsx("p",{className:"text-foreground whitespace-pre-wrap mt-1",children:v||"N/D"})]},p)})}),u&&f.jsxs("p",{className:"text-xs text-muted mt-4 pt-4 border-t border-white/10",children:["Compilato il: ",(l=Rl(u))==null?void 0:l.toLocaleString("it-IT")]})]}),f.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[f.jsx("h3",{className:"text-xl font-semibold text-primary mb-4",children:"Foto Iniziali"}),f.jsx(gJ,{urls:s})]})]})}return f.jsx(fJ,{clientId:t,onSave:()=>{}})},vJ=({check:t,clientId:e})=>{var m,y;const[n,r]=O.useState(!1),[i,s]=O.useState(t.coachNotes||""),[o,a]=O.useState(!1),[l,c]=O.useState(!1),u=Ph(),d=async()=>{a(!0);try{await bm(He(ue,"clients",e,"checks",t.id),{coachNotes:i})}finally{a(!1)}},p=async()=>{var v;if(window.confirm("Sei sicuro di voler eliminare questo check?")){c(!0);try{((v=t.photoURLs)==null?void 0:v.length)>0&&await Promise.all(t.photoURLs.map(x=>{try{const w=x.split("?")[0].split("o/")[1],b=Sl(u,decodeURIComponent(w));return u9(b)}catch(w){return console.warn("Impossibile eliminare l'immagine dallo Storage. Proseguo con l'eliminazione del documento:",w),Promise.resolve()}})),await Fx(He(ue,"clients",e,"checks",t.id))}catch(x){console.error("Errore eliminazione:",x),alert("Errore durante l'eliminazione."),c(!1)}}};return f.jsxs("div",{className:"bg-card rounded-lg border border-white/10 overflow-hidden",children:[f.jsxs("div",{className:"flex justify-between items-center p-4",children:[f.jsxs("button",{onClick:()=>r(!n),className:"flex-1 flex justify-between items-center text-left",children:[f.jsxs("span",{className:"font-semibold",children:["Check del ",(m=Rl(t.createdAt))==null?void 0:m.toLocaleDateString("it-IT")]}),f.jsx(We.div,{animate:{rotate:n?180:0},children:f.jsx(QN,{})})]}),f.jsx("button",{onClick:p,disabled:l,className:"ml-4 p-1.5 text-red-500/60 hover:text-red-500 rounded-md",title:"Elimina Check",children:f.jsx(Zx,{size:14})})]}),f.jsx(ca,{children:n&&f.jsx(We.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-4 pb-4",children:f.jsxs("div",{className:"pt-4 border-t border-white/20 space-y-4",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-semibold text-muted mb-2",children:"Note del cliente:"}),f.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:t.notes||"-"})]}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:(y=t.photoURLs)==null?void 0:y.map((v,x)=>f.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",children:f.jsx("img",{src:v,alt:`Foto ${x+1}`,className:"rounded-md aspect-square object-cover"})},x))}),f.jsxs("div",{className:"pt-4 border-t border-white/20",children:[f.jsxs("h4",{className:"text-sm font-semibold text-muted mb-2 flex items-center gap-2",children:[f.jsx(XN,{})," Feedback:"]}),f.jsx("textarea",{value:i,onChange:v=>s(v.target.value),rows:"3",className:"w-full p-2 bg-background rounded-lg border border-white/10",placeholder:"Scrivi qui il tuo feedback..."}),f.jsx("div",{className:"flex justify-end mt-2",children:f.jsx("button",{onClick:d,disabled:o,className:"px-3 py-1.5 bg-primary text-white text-xs font-semibold rounded-lg",children:o?"Salvo...":"Salva"})})]})]})})})]})},_J=({clientId:t})=>{const[e,n]=O.useState([]),[r,i]=O.useState(!0),[s,o]=O.useState(null),[a,l]=O.useState(!1);O.useEffect(()=>{const d=ti(Jt(ue,"clients",t,"checks"),Jo("createdAt","desc")),p=Zt(d,m=>{n(m.docs.map(y=>({id:y.id,...y.data()}))),i(!1)});return()=>p()},[t]);const c=({date:d,view:p})=>{if(p==="month"&&e.some(y=>{var v;return((v=Rl(y.createdAt))==null?void 0:v.toDateString())===d.toDateString()}))return"check-day-highlight"},u=s?e.filter(d=>{var p;return((p=Rl(d.createdAt))==null?void 0:p.toDateString())===s.toDateString()}):e;return f.jsxs(f.Fragment,{children:[f.jsx(ca,{children:a&&f.jsx(We.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-center z-50 p-4",onClick:()=>l(!1),children:f.jsxs(We.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-2xl relative",onClick:d=>d.stopPropagation(),children:[f.jsx("button",{onClick:()=>l(!1),className:"absolute -top-2 -right-2 bg-card rounded-full p-1.5 text-muted hover:text-white z-10",children:f.jsx(Cm,{})}),f.jsx(dJ,{clientId:t})]})})}),f.jsxs("div",{className:"pt-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h3",{className:"text-xl font-semibold",children:"Cronologia Check"}),f.jsxs("button",{onClick:()=>l(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-primary hover:bg-primary/80 text-white text-sm font-semibold rounded-lg transition",children:[f.jsx(km,{})," Crea Check"]})]}),r?f.jsx("p",{className:"text-muted",children:"Caricamento..."}):f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"lg:col-span-1",children:[f.jsx(oM,{onChange:o,value:s,tileClassName:c}),s&&f.jsx("button",{onClick:()=>o(null),className:"w-full text-center text-primary text-sm mt-2 p-2 bg-card rounded-lg border border-white/10 hover:bg-white/10",children:"Mostra tutti i check"})]}),f.jsxs("div",{className:"lg:col-span-2",children:[f.jsx("h4",{className:"font-semibold text-muted mb-2",children:s?`Check del ${s.toLocaleDateString("it-IT")}`:"Tutti i check"}),u.length>0?f.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:u.map(d=>f.jsx(vJ,{check:d,clientId:t},d.id))}):f.jsx("div",{className:"text-center text-muted p-4 bg-card rounded-lg border border-white/10",children:f.jsx("p",{children:s?"Nessun check trovato per questa data.":"Nessun check trovato."})})]})]})]})]})};function xJ(){var m;const{clientId:t}=oA(),e=$t(),n=qi(),[r,i]=O.useState(null),[s,o]=O.useState(!0),[a,l]=O.useState("anamnesi"),[c,u]=O.useState(!1);O.useEffect(()=>{const y=new URLSearchParams(n.search).get("tab");y&&l(y)},[n.search]),O.useEffect(()=>{const y=Zt(He(ue,"clients",t),v=>{v.exists()?i({id:v.id,...v.data()}):e("/clients"),o(!1)});return()=>y()},[t,e]);const d=y=>{navigator.clipboard.writeText(y),u(!0),setTimeout(()=>u(!1),2e3)};if(s)return f.jsx("div",{className:"text-center text-muted p-8",children:"Caricamento..."});if(!r)return null;const p=((m=Rl(r.createdAt))==null?void 0:m.toLocaleDateString("it-IT"))||"N/A";return f.jsxs(f.Fragment,{children:[f.jsx("style",{children:mJ}),f.jsxs("div",{className:"w-full",children:[f.jsxs(We.div,{className:"flex items-center justify-between mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:r.name}),f.jsxs("p",{className:"text-muted",children:["Cliente dal: ",p]})]}),f.jsxs("button",{onClick:()=>e("/clients"),className:"flex items-center gap-2 px-3 py-1.5 bg-card hover:bg-white/10 rounded-lg text-sm text-muted border border-white/10",children:[f.jsx(Xs,{})," Torna"]})]}),f.jsxs(We.div,{className:"bg-card p-6 rounded-xl border border-white/10 mb-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[f.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[f.jsx("div",{className:"bg-primary/20 text-primary p-3 rounded-full",children:f.jsx(tD,{size:24})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold",children:"Profilo"}),f.jsx("p",{className:"text-muted",children:r.email}),r.phone&&f.jsx("p",{className:"text-muted",children:r.phone})]})]}),r.tempPassword&&f.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[f.jsxs("div",{className:"bg-background p-3 rounded-lg flex justify-between items-center",children:[f.jsxs("div",{children:[f.jsxs("p",{className:"text-xs text-muted flex items-center gap-1",children:[f.jsx(N9,{size:12})," Password Temporanea"]}),f.jsx("p",{className:"font-mono text-sm",children:r.tempPassword})]}),f.jsx("button",{onClick:()=>d(r.tempPassword),className:"p-2 bg-primary/20 rounded-lg text-primary",children:c?f.jsx(YN,{}):f.jsx(C9,{})})]}),f.jsx("p",{className:"text-xs text-muted mt-2 text-center",children:"Questa password non sarà più visibile una volta che il cliente la cambierà."})]})]}),f.jsxs("div",{className:"flex border-b border-white/10 mb-6",children:[f.jsxs("button",{onClick:()=>l("anamnesi"),className:`px-4 py-2 text-sm ${a==="anamnesi"?"border-b-2 border-primary text-white":"text-muted"}`,children:[f.jsx(Qx,{className:"inline mr-2"}),"Anamnesi"]}),f.jsxs("button",{onClick:()=>l("checks"),className:`px-4 py-2 text-sm ${a==="checks"?"border-b-2 border-primary text-white":"text-muted"}`,children:[f.jsx(xp,{className:"inline mr-2"}),"Checks"]}),f.jsxs("button",{onClick:()=>l("payments"),className:`px-4 py-2 text-sm ${a==="payments"?"border-b-2 border-primary text-white":"text-muted"}`,children:[f.jsx(Ah,{className:"inline mr-2"}),"Pagamenti"]})]}),f.jsxs("div",{children:[a==="anamnesi"&&f.jsx(yJ,{clientId:t}),a==="checks"&&f.jsx(_J,{clientId:t}),a==="payments"&&f.jsx(pJ,{clientId:t})]})]})]})}const wJ=t=>{if(!t)return"";const e=typeof t.toDate=="function"?t.toDate():new Date(t);if(isNaN(e))return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${i}`};function bJ(){const t=$t(),{clientId:e}=oA(),{register:n,handleSubmit:r,reset:i,formState:{isSubmitting:s}}=Wl(),[o,a]=O.useState(!0);O.useEffect(()=>{(async()=>{try{const p=He(ue,"clients",e),m=await Yi(p);if(m.exists()){const y=m.data();i({...y,endDate:wJ(y.endDate)})}else t("/clients")}catch(p){console.error("Errore nel caricamento del cliente:",p)}finally{a(!1)}})()},[e,i,t]);const l=async d=>{try{const p=He(ue,"clients",e);await bm(p,{...d,endDate:d.endDate?new Date(d.endDate):null}),t("/clients")}catch(p){console.error("Errore nell'aggiornamento del cliente: ",p),alert("Si è verificato un errore durante l'aggiornamento.")}},c="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",u="block mb-1 text-sm font-medium text-muted";return o?f.jsx("div",{className:"text-center p-8 text-muted",children:"Caricamento..."}):f.jsxs(We.div,{className:"w-full max-w-2xl mx-auto bg-card rounded-xl shadow border border-white/10 p-6",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsx("h1",{className:"text-2xl font-bold",children:"Modifica Cliente"}),f.jsxs("button",{onClick:()=>t("/clients"),className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-lg text-sm text-muted",children:[f.jsx(Xs,{})," Annulla"]})]}),f.jsxs("form",{onSubmit:r(l),className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:u,children:"Nome e Cognome"}),f.jsx("input",{...n("name",{required:!0}),className:c})]}),f.jsxs("div",{children:[f.jsx("label",{className:u,children:"Email"}),f.jsx("input",{type:"email",...n("email",{required:!0}),className:c})]}),f.jsxs("div",{children:[f.jsx("label",{className:u,children:"Telefono (Opzionale)"}),f.jsx("input",{...n("phone"),className:c})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-white/10",children:[f.jsxs("div",{children:[f.jsx("label",{className:u,children:"Stato Cliente"}),f.jsxs("select",{...n("status"),className:c,children:[f.jsx("option",{value:"attivo",children:"Attivo"}),f.jsx("option",{value:"in prova",children:"In Prova"}),f.jsx("option",{value:"sospeso",children:"Sospeso"}),f.jsx("option",{value:"scaduto",children:"Scaduto"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:u,children:"Data Scadenza Attuale"}),f.jsx("input",{type:"date",...n("endDate"),className:c+" text-muted"})]})]}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsxs("button",{type:"submit",disabled:s,className:"flex items-center gap-2 px-5 py-2.5 bg-primary hover:bg-primary/80 text-white rounded-lg",children:[f.jsx(Im,{})," ",s?"Salvataggio...":"Salva Modifiche"]})})]})]})}function So(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const Cy=({title:t,icon:e,items:n,navigate:r,tab:i,onDismiss:s})=>f.jsxs("div",{className:"bg-card p-4 rounded-lg border border-white/10 flex-1 min-w-[280px]",children:[f.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e," ",t]}),f.jsx("div",{className:"space-y-2",children:f.jsx(ca,{children:n.length>0?n.map((o,a)=>{var l;return f.jsxs(We.div,{layout:!0,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10,transition:{duration:.2}},className:"group flex items-center justify-between p-2 rounded-md hover:bg-white/5",children:[f.jsxs("button",{className:"flex-1 text-left",onClick:()=>r(`/client/${o.clientId}?tab=${i}`),children:[f.jsx("p",{className:"font-medium text-sm",children:o.clientName}),f.jsx("p",{className:"text-xs text-muted",children:(l=So(o.date))==null?void 0:l.toLocaleDateString("it-IT",{day:"numeric",month:"long"})})]}),f.jsx("button",{onClick:()=>s(o.id),className:"p-1 rounded-full opacity-0 group-hover:opacity-60 hover:!opacity-100 hover:bg-white/10 transition-opacity",title:"Archivia notifica",children:f.jsx(Cm,{size:14})})]},o.id)}):f.jsx("p",{className:"text-sm text-muted px-2",children:"Nessun aggiornamento recente."})})})]});function TJ(){const t=$t(),[e,n]=O.useState([]),[r,i]=O.useState([]),[s,o]=O.useState([]),[a,l]=O.useState([]);O.useEffect(()=>{const v=Zt(Jt(ue,"clients"),x=>{n(x.docs.map(w=>({id:w.id,...w.data()})))});return()=>v()},[]);const c=O.useMemo(()=>e.reduce((v,x)=>(v[x.id]=x.name,v),{}),[e]);O.useEffect(()=>{if(Object.keys(c).length===0)return;const v=ti(iu(ue,"checks"),Yv(30)),x=Zt(v,E=>{const I=E.docs.map(C=>{const M=C.ref.path.split("/")[1];return{id:C.id,clientId:M,clientName:c[M],date:C.data().createdAt}}).filter(C=>C.clientName);I.sort((C,M)=>(So(M.date)||0)-(So(C.date)||0)),i(I.slice(0,10))}),w=ti(iu(ue,"anamnesi"),Yv(30)),b=Zt(w,E=>{const I=E.docs.map(C=>{const M=C.ref.path.split("/")[1];return{id:C.id,clientId:M,clientName:c[M],date:C.data().createdAt}}).filter(C=>C.clientName);I.sort((C,M)=>(So(M.date)||0)-(So(C.date)||0)),o(I.slice(0,10))});return()=>{x(),b()}},[c]);const u=O.useMemo(()=>[...e].sort((v,x)=>(So(x.createdAt)||0)-(So(v.createdAt)||0)).slice(0,5).map(v=>({id:v.id,clientId:v.id,clientName:v.name,date:v.createdAt})),[e]),d=v=>{l(x=>[...x,v])},p=u.filter(v=>!a.includes(v.id)),m=r.filter(v=>!a.includes(v.id)),y=s.filter(v=>!a.includes(v.id));return f.jsxs("div",{className:"w-full",children:[f.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Ultimi Aggiornamenti"}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[f.jsx(Cy,{title:"Clienti Nuovi",icon:f.jsx(F9,{className:"text-primary"}),items:p,navigate:t,tab:"anamnesi",onDismiss:d}),f.jsx(Cy,{title:"Check Nuovi",icon:f.jsx(xp,{className:"text-green-400"}),items:m,navigate:t,tab:"checks",onDismiss:d}),f.jsx(Cy,{title:"Anamnesi Nuove",icon:f.jsx(Qx,{className:"text-yellow-400"}),items:y,navigate:t,tab:"anamnesi",onDismiss:d})]})]})}const BI=()=>f.jsx("div",{className:"flex justify-center items-center h-full p-4",children:f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}),SJ=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(null),[i,s]=O.useState([]),[o,a]=O.useState(""),[l,c]=O.useState(!0),[u,d]=O.useState(!1),[p,m]=O.useState(""),[y,v]=O.useState([]),[x,w]=O.useState(!1),b=O.useRef(null),I=Gi().currentUser,C=["QwWST9OVOlTOi5oheyCqfpXLOLg2","AeZKjJYu5zMZ4mvffaGiqCBb0cF2"];O.useEffect(()=>{if(!I)return;const _=Jt(ue,"chats"),k=ti(_,Wg("participants","array-contains-any",C),Jo("lastUpdate","desc")),P=Zt(k,A=>{const D=A.docs.map(N=>({id:N.id,...N.data()}));e(D),c(!1)},A=>{console.error("Errore nel caricare le chat:",A),c(!1)});return()=>P()},[I]),O.useEffect(()=>{if(!n){s([]);return}d(!0);const _=Jt(ue,"chats",n,"messages"),k=ti(_,Jo("createdAt")),P=Zt(k,A=>{s(A.docs.map(D=>({id:D.id,...D.data()}))),d(!1)},A=>{console.error("Errore nel caricare i messaggi:",A),d(!1)});return()=>P()},[n]),O.useEffect(()=>{var _;(_=b.current)==null||_.scrollIntoView({behavior:"smooth"})},[i]),O.useEffect(()=>{const _=async()=>{if(p.trim().length<2){v([]),w(!1);return}w(!0);const P=Jt(ue,"clients"),A=p.toLowerCase(),D=ti(P,Wg("name_lowercase",">=",A),Wg("name_lowercase","<=",A+""),Yv(10));try{const N=await Y3(D);v(N.docs.map(q=>({id:q.id,...q.data()})))}catch(N){console.error("Errore nella ricerca (potrebbe mancare un indice in Firestore):",N)}w(!1)},k=setTimeout(()=>{_()},300);return()=>clearTimeout(k)},[p]);const M=async _=>{if(!I)return;const k=C[0],P=[_.id,k].sort().join("_"),A=t.find(D=>D.id===P);if(A)r(A.id);else{const D=He(ue,"chats",P);await Tl(D,{participants:[_.id,k],participantNames:{[_.id]:_.name,[k]:"Coach"},lastMessage:"Conversazione iniziata",lastUpdate:zn()}),r(P)}m(""),v([])},S=async _=>{if(_.preventDefault(),o.trim()===""||!n||!I)return;const k=Jt(ue,"chats",n,"messages");await Tm(k,{text:o,createdAt:zn(),senderId:I.uid});const P=He(ue,"chats",n);await Tl(P,{lastMessage:o,lastUpdate:zn()},{merge:!0}),a("")};return f.jsxs("div",{className:"flex h-[calc(100vh-120px)] bg-card/60 backdrop-blur-lg rounded-xl border border-white/10 overflow-hidden",children:[f.jsxs("div",{className:"w-1/3 border-r border-white/10 flex flex-col",children:[f.jsx("div",{className:"p-4 border-b border-white/10",children:f.jsxs("div",{className:"relative",children:[f.jsx(eD,{className:"absolute top-1/2 left-3 -translate-y-1/2 text-muted"}),f.jsx("input",{type:"text",placeholder:"Cerca o avvia una chat...",value:p,onChange:_=>m(_.target.value),className:"w-full bg-background p-2 pl-9 rounded-lg border border-white/10 outline-none focus:ring-2 focus:ring-primary"})]})}),p.length>1?f.jsxs("div",{className:"flex-1 overflow-y-auto",children:[x&&f.jsx("p",{className:"p-4 text-muted text-sm",children:"Ricerca..."}),!x&&y.length===0&&f.jsx("p",{className:"p-4 text-muted text-sm",children:"Nessun cliente trovato."}),!x&&y.map(_=>f.jsxs("div",{onClick:()=>M(_),className:"p-4 cursor-pointer hover:bg-white/5",children:[f.jsx("p",{className:"font-semibold text-white",children:_.name}),f.jsx("p",{className:"text-sm text-muted",children:_.email})]},_.id))]}):f.jsx(f.Fragment,{children:l?f.jsx(BI,{}):f.jsx("div",{className:"flex-1 overflow-y-auto",children:t.map(_=>{const k=_.participants.find(A=>!C.includes(A)),P=_.participantNames?_.participantNames[k]:"Cliente";return f.jsxs("div",{onClick:()=>r(_.id),className:`p-4 cursor-pointer border-l-4 ${n===_.id?"bg-primary/20 border-primary":"border-transparent hover:bg-white/5"}`,children:[f.jsx("p",{className:"font-semibold text-white",children:P||"Cliente"}),f.jsx("p",{className:"text-sm text-muted truncate",children:_.lastMessage})]},_.id)})})})]}),f.jsx("div",{className:"w-2/3 flex flex-col",children:n?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[u?f.jsx(BI,{}):i.map(_=>f.jsx("div",{className:`flex ${_.senderId===(I==null?void 0:I.uid)?"justify-end":"justify-start"}`,children:f.jsx("div",{className:`max-w-md p-3 rounded-2xl ${_.senderId===(I==null?void 0:I.uid)?"bg-primary rounded-br-none":"bg-background rounded-bl-none"}`,children:f.jsx("p",{className:"text-white break-words",children:_.text})})},_.id)),f.jsx("div",{ref:b})]}),f.jsx("div",{className:"p-4 border-t border-white/10",children:f.jsxs("form",{onSubmit:S,className:"flex items-center gap-4",children:[f.jsx("input",{type:"text",value:o,onChange:_=>a(_.target.value),placeholder:"Scrivi una risposta...",className:"flex-1 p-3 bg-background border border-white/10 rounded-full outline-none focus:ring-2 focus:ring-primary text-white"}),f.jsx("button",{type:"submit",className:"p-3 bg-primary hover:bg-primary/80 text-white rounded-full disabled:opacity-50",disabled:!o.trim(),children:f.jsx(Jx,{size:20})})]})})]}):f.jsxs("div",{className:"flex flex-col justify-center items-center h-full text-muted",children:[f.jsx(Xx,{size:48}),f.jsx("p",{className:"mt-4",children:"Seleziona una conversazione o cercane una nuova."})]})})]})},EJ=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(""),[i,s]=O.useState(""),o=$t(),a=async l=>{l.preventDefault(),s("");try{const u=(await YA(Hr,t,n)).user,d=He(ue,"clients",u.uid),p=await Yi(d);if(p.exists()&&p.data().isClient===!0){sessionStorage.setItem("app_role","client");const m=p.data().firstLogin===!0;o(m?"/client/first-access":"/client/dashboard")}else s("Accesso non autorizzato. Area riservata ai clienti."),await ml(Hr)}catch(c){s("Credenziali non valide. Riprova."),console.error("Errore di login:",c.message)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:f.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg backdrop-filter backdrop-blur-lg bg-opacity-50",children:[f.jsx("h2",{className:"text-3xl font-bold text-center text-cyan-400",children:"Accesso Area Clienti"}),f.jsx("p",{className:"text-center text-gray-300",children:"Usa le credenziali fornite dal tuo coach."}),f.jsxs("form",{onSubmit:a,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400",children:"Email"}),f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:l=>e(l.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-400",children:"Password"}),f.jsx(Co,{to:"/client/forgot-password",className:"text-xs text-gray-400 hover:text-cyan-400 sm:hidden",children:"Password dimenticata?"})]}),f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:l=>r(l.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),i&&f.jsx("p",{className:"text-red-500 text-sm text-center",children:i}),f.jsx("div",{children:f.jsx("button",{type:"submit",className:"w-full px-4 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500",children:"Accedi"})})]}),f.jsx("div",{className:"text-center hidden sm:block",children:f.jsx(Co,{to:"/client/forgot-password",className:"text-sm text-gray-400 hover:text-cyan-400 hover:underline",children:"Password dimenticata?"})})]})})},kJ=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(""),[i,s]=O.useState(""),[o,a]=O.useState(""),l=$t(),u=Gi().currentUser,d=async p=>{if(p.preventDefault(),s(""),a(""),!u){s("Utente non autenticato. Per favore, effettua nuovamente il login."),setTimeout(()=>l("/client-login"),3e3);return}if(t.length<6){s("La nuova password deve contenere almeno 6 caratteri.");return}if(t!==n){s("Le password non coincidono. Riprova.");return}try{await LU(u,t);const m=He(ue,"clients",u.uid);await bm(m,{firstLogin:!1}),a("Password aggiornata con successo! Sarai reindirizzato alla tua dashboard tra poco."),setTimeout(()=>{l("/client/dashboard")},3e3)}catch(m){s("Si è verificato un errore. Potrebbe essere necessario effettuare nuovamente il login prima di riprovare."),console.error("Errore durante l'aggiornamento della password:",m)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:f.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg",children:[f.jsx("h2",{className:"text-3xl font-bold text-center text-cyan-400",children:"Imposta la tua Password"}),f.jsx("p",{className:"text-center text-gray-300",children:"Per la tua sicurezza, scegli una password personale per i futuri accessi."}),f.jsxs("form",{onSubmit:d,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-400",children:"Nuova Password"}),f.jsx("input",{id:"new-password",type:"password",required:!0,value:t,onChange:p=>e(p.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-400",children:"Conferma Nuova Password"}),f.jsx("input",{id:"confirm-password",type:"password",required:!0,value:n,onChange:p=>r(p.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),i&&f.jsx("p",{className:"text-red-500 text-sm text-center",children:i}),o&&f.jsx("p",{className:"text-green-500 text-sm text-center",children:o}),f.jsx("div",{children:f.jsx("button",{type:"submit",className:"w-full px-4 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-700 disabled:opacity-50",disabled:!!o,children:o?"Reindirizzamento...":"Imposta Nuova Password"})})]})]})})},IJ=()=>f.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),Py=({title:t,value:e,subtext:n,icon:r})=>f.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:t}),f.jsx("div",{className:"text-cyan-400",children:r})]}),f.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:e}),f.jsx("p",{className:"text-sm text-gray-400 mt-1",children:n})]}),CJ=()=>{const[t,e]=O.useState(null),[n,r]=O.useState(!0),i=$t(),s=Gi(),o=s.currentUser;O.useEffect(()=>{o?(async()=>{const p=He(ue,"clients",o.uid),m=await Yi(p);if(m.exists()){const y=m.data();if(e(y),y.firstLogin){i("/client/first-access",{replace:!0});return}}else console.error("Dati del cliente non trovati!"),await ml(s),i("/client-login");r(!1)})():i("/client-login")},[o,i]);const a=()=>{ml(s).then(()=>{i("/client-login")})};if(n||t&&t.firstLogin)return f.jsx(IJ,{});if(!t)return f.jsx("p",{children:"Errore nel caricamento dei dati."});let l="N/D",c="Non impostata";if(t.scadenza&&t.scadenza.toDate){const d=t.scadenza.toDate(),p=new Date;d.setHours(0,0,0,0),p.setHours(0,0,0,0);const m=d-p;l=Math.ceil(m/(1e3*60*60*24)),c=d.toLocaleDateString("it-IT")}let u="N/D";if(t.createdAt&&t.createdAt.toDate){const d=t.createdAt.toDate(),p=new Date(d);p.setDate(d.getDate()+14),p>new Date?u=p.toLocaleDateString("it-IT"):u="Oggi/Passato"}return f.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[f.jsxs("header",{className:"flex justify-between items-center mb-8",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:["Ciao, ",t.name,"!"]}),f.jsx("p",{className:"text-gray-300",children:"Benvenuto nella tua area personale."})]}),f.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-3 py-2 bg-red-600/80 hover:bg-red-600 text-white text-sm font-semibold rounded-lg transition-colors",children:[f.jsx(O9,{}),f.jsx("span",{children:"Logout"})]})]}),f.jsxs("main",{children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[f.jsx(Py,{title:"Scadenza Percorso",value:`${l} giorni`,subtext:`Scade il: ${c}`,icon:f.jsx(Gx,{size:24})}),f.jsx(Py,{title:"Tipo Percorso",value:t.planType||"Non specificato",subtext:"Il tuo piano attuale",icon:f.jsx(Xv,{size:24})}),f.jsx(Py,{title:"Prossimo Check Program.",value:u,subtext:"Ricorda di caricare le foto!",icon:f.jsx(xp,{size:24})})]}),f.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",children:[f.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",children:"Cosa vuoi fare?"}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsxs(Co,{to:"/client/anamnesi",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[f.jsx(tD,{size:22})," La mia Anamnesi"]}),f.jsxs(Co,{to:"/client/checks",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[f.jsx(xp,{size:22})," I miei Check"]}),f.jsxs(Co,{to:"/client/payments",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[f.jsx(Xv,{size:22})," I miei Pagamenti"]}),f.jsxs(Co,{to:"/client/chat",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[f.jsx(Xx,{size:22})," Chatta con il Coach"]})]})]})]})]})},PJ=()=>f.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),AJ=()=>{const[t,e]=O.useState(null),[n,r]=O.useState(!0),[i,s]=O.useState(!1),[o,a]=O.useState({front:null,right:null,left:null,back:null}),[l,c]=O.useState({front:null,right:null,left:null,back:null}),u=$t(),p=Gi().currentUser,m=Ph(),{register:y,handleSubmit:v,setValue:x,formState:{isSubmitting:w}}=Wl();O.useEffect(()=>{if(!p){u("/client-login");return}(async()=>{const D=He(ue,`clients/${p.uid}/anamnesi`,"initial"),N=await Yi(D);if(N.exists()){const q=N.data();if(e(q),q.photoPaths){const te={};await Promise.all(Object.entries(q.photoPaths).map(async([re,ne])=>{try{const z=await Em(Sl(m,ne));te[re]=z}catch(z){console.error(`Errore nel caricamento URL per ${re}:`,z)}})),c(te)}Object.keys(q).forEach(te=>x(te,q[te])),s(!1)}else s(!0);r(!1)})()},[p,u,x]);const b=(A,D)=>{const N=A.target.files[0];N&&(a(q=>({...q,[D]:N})),c(q=>({...q,[D]:URL.createObjectURL(N)})))},E=async A=>{if(p){if(!t&&Object.values(o).some(D=>D===null)){alert("Per favore, carica tutte e 4 le foto iniziali.");return}r(!0);try{let D=(t==null?void 0:t.photoPaths)||{};const N=Object.entries(o).filter(([,re])=>re!==null);N.length>0&&(await Promise.all(N.map(async([ne,z])=>{const X=`clients/${p.uid}/anamnesi_photos/${ne}-${cb()}`,Y=Sl(m,X);return await HN(Y,z),{type:ne,path:X}}))).forEach(({type:ne,path:z})=>{D[ne]=z});const q=He(ue,`clients/${p.uid}/anamnesi`,"initial"),te={...A,photoPaths:D,submittedAt:zn()};await Tl(q,te,{merge:!0}),e(te),s(!1),alert("Anamnesi salvata con successo!"),a({front:null,right:null,left:null,back:null})}catch(D){console.error("Errore nel salvataggio:",D),alert("Si è verificato un errore.")}finally{r(!1)}}};if(n)return f.jsx(PJ,{});const I="w-full p-2 mt-1 bg-gray-700 border border-gray-600 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500",C="block text-sm font-medium text-gray-300",M="bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",S="font-semibold mb-4 text-lg text-cyan-400 border-b border-cyan-400/20 pb-2",_=({type:A,label:D})=>f.jsxs("div",{className:"text-center",children:[f.jsx("label",{className:C,children:D}),f.jsxs("div",{className:"mt-2 flex justify-center items-center w-full h-48 bg-gray-700/50 rounded-lg border-2 border-dashed border-gray-600 relative",children:[l[A]?f.jsx("img",{src:l[A],alt:"preview",className:"h-full w-full object-contain rounded-lg"}):f.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[f.jsx(GN,{size:40}),f.jsx("p",{className:"mt-2 text-sm",children:"Carica foto"})]}),f.jsx("input",{type:"file",accept:"image/*",onChange:N=>b(N,A),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})]}),k=({label:A,value:D})=>f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-semibold text-gray-400",children:A}),f.jsx("p",{className:"mt-1 p-2 bg-gray-800 rounded-lg min-h-[40px] text-white break-words",children:D||"Non specificato"})]}),P=({urls:A})=>f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["front","right","left","back"].map(D=>f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-semibold text-gray-400 capitalize",children:D==="front"?"Frontale":D==="back"?"Posteriore":`Laterale ${D==="left"?"Sinistro":"Destro"}`}),A!=null&&A[D]?f.jsx("img",{src:A[D],alt:D,className:"mt-2 rounded-lg w-full h-auto object-cover"}):f.jsx("div",{className:"mt-2 flex justify-center items-center w-full h-48 bg-gray-800 rounded-lg text-gray-500",children:f.jsx("span",{children:"Non caricata"})})]},D))});return f.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[f.jsxs("header",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:"La mia Anamnesi"}),f.jsxs("button",{onClick:()=>u("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg transition-colors",children:[f.jsx(Xs,{}),f.jsx("span",{children:"Dashboard"})]})]}),i?f.jsxs("form",{onSubmit:v(E),className:"space-y-8",children:[f.jsxs("div",{className:M,children:[f.jsx("h4",{className:S,children:"Dati Anagrafici e Misure"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Nome*"}),f.jsx("input",{...y("firstName",{required:!0}),className:I})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Cognome*"}),f.jsx("input",{...y("lastName",{required:!0}),className:I})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Data di Nascita*"}),f.jsx("input",{type:"date",...y("birthDate",{required:!0}),className:I})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Che lavoro fai?*"}),f.jsx("input",{...y("job",{required:!0}),className:I,placeholder:"Es. Impiegato..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Peso (kg)*"}),f.jsx("input",{type:"number",step:"0.1",...y("weight",{required:!0}),className:I,placeholder:"Es. 75.5"})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Altezza (cm)*"}),f.jsx("input",{type:"number",...y("height",{required:!0}),className:I,placeholder:"Es. 180"})]})]})]}),f.jsxs("div",{className:M,children:[f.jsx("h4",{className:S,children:"Abitudini Alimentari"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Quanti pasti riesci a fare al giorno?*"}),f.jsxs("select",{...y("mealsPerDay",{required:!0}),className:I,children:[f.jsx("option",{value:"3",children:"3"}),f.jsx("option",{value:"4",children:"4"}),f.jsx("option",{value:"5",children:"5"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Colazione: Dolce o Salata?*"}),f.jsxs("select",{...y("breakfastType",{required:!0}),className:I,children:[f.jsx("option",{value:"dolce",children:"Dolce"}),f.jsx("option",{value:"salato",children:"Salato"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Alimenti da inserire nella settimana*"}),f.jsx("textarea",{...y("desiredFoods",{required:!0}),rows:"3",className:I,placeholder:"Elenca qui..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Cosa non mangi?*"}),f.jsx("textarea",{...y("dislikedFoods",{required:!0}),rows:"2",className:I,placeholder:"Elenca qui..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Intolleranze?*"}),f.jsx("input",{...y("intolerances",{required:!0}),className:I,placeholder:"Es. Lattosio, nessuna..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Problemi di digestione o gonfiore?*"}),f.jsx("input",{...y("digestionIssues",{required:!0}),className:I,placeholder:"Sì/No, e se sì quali..."})]})]})]}),f.jsxs("div",{className:M,children:[f.jsx("h4",{className:S,children:"Allenamento"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Quanti allenamenti a settimana?*"}),f.jsx("input",{type:"number",...y("workoutsPerWeek",{required:!0}),className:I,placeholder:"Es. 3"})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Specialità, dove ti alleni e con quali attrezzi?*"}),f.jsx("textarea",{...y("trainingDetails",{required:!0}),rows:"3",className:I,placeholder:"Es. Bodybuilding in palestra..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"A che ora e per quanto tempo ti alleni?*"}),f.jsx("input",{...y("trainingTime",{required:!0}),className:I,placeholder:"Es. La sera dalle 18 alle 19:30"})]})]})]}),f.jsxs("div",{className:M,children:[f.jsx("h4",{className:S,children:"Salute e Obiettivi"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Infortuni o problematiche?*"}),f.jsx("textarea",{...y("injuries",{required:!0}),rows:"3",className:I,placeholder:"Es. Mal di schiena, ernie..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Prendi farmaci?*"}),f.jsx("input",{...y("medications",{required:!0}),className:I,placeholder:"Sì/No, e se sì quali..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Usi integratori?*"}),f.jsx("input",{...y("supplements",{required:!0}),className:I,placeholder:"Sì/No, e se sì quali..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Scrivimi il tuo obiettivo*"}),f.jsx("textarea",{...y("mainGoal",{required:!0}),rows:"3",className:I,placeholder:"Descrivi in dettaglio..."})]}),f.jsxs("div",{children:[f.jsx("label",{className:C,children:"Durata percorso scelto?*"}),f.jsx("input",{...y("programDuration",{required:!0}),className:I,placeholder:"Es. 3 mesi, 6 mesi..."})]})]})]}),f.jsxs("div",{className:M,children:[f.jsx("h4",{className:S,children:"Foto Iniziali"}),f.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Carica 4 foto per il check iniziale: frontale, laterale destro, laterale sinistro e posteriore."}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[f.jsx(_,{type:"front",label:"Frontale"}),f.jsx(_,{type:"right",label:"Laterale Destro"}),f.jsx(_,{type:"left",label:"Laterale Sinistro"}),f.jsx(_,{type:"back",label:"Posteriore"})]})]}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsxs("button",{type:"submit",disabled:w,className:"flex items-center gap-2 px-5 py-2.5 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition font-semibold disabled:opacity-50",children:[f.jsx(Im,{})," ",w?"Salvataggio...":"Salva Anamnesi e Foto"]})})]}):t&&f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:M,children:[f.jsx("h4",{className:S,children:"Dati Anagrafici"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsx(k,{label:"Nome",value:t.firstName}),f.jsx(k,{label:"Cognome",value:t.lastName}),f.jsx(k,{label:"Data di Nascita",value:t.birthDate}),f.jsx(k,{label:"Lavoro",value:t.job}),f.jsx(k,{label:"Peso (kg)",value:t.weight}),f.jsx(k,{label:"Altezza (cm)",value:t.height})]})]}),f.jsxs("div",{className:M,children:[f.jsx("h4",{className:S,children:"Abitudini Alimentari"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(k,{label:"Pasti al giorno",value:t.mealsPerDay}),f.jsx(k,{label:"Tipo Colazione",value:t.breakfastType}),f.jsx(k,{label:"Alimenti da inserire",value:t.desiredFoods}),f.jsx(k,{label:"Alimenti da evitare",value:t.dislikedFoods}),f.jsx(k,{label:"Intolleranze",value:t.intolerances}),f.jsx(k,{label:"Problemi di digestione",value:t.digestionIssues})]})]}),f.jsxs("div",{className:M,children:[f.jsx("h4",{className:S,children:"Allenamento"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(k,{label:"Allenamenti a settimana",value:t.workoutsPerWeek}),f.jsx(k,{label:"Dettagli Allenamento",value:t.trainingDetails}),f.jsx(k,{label:"Orario e Durata",value:t.trainingTime})]})]}),f.jsxs("div",{className:M,children:[f.jsx("h4",{className:S,children:"Salute e Obiettivi"}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(k,{label:"Infortuni o problematiche",value:t.injuries}),f.jsx(k,{label:"Farmaci",value:t.medications}),f.jsx(k,{label:"Integratori",value:t.supplements}),f.jsx(k,{label:"Obiettivo Principale",value:t.mainGoal}),f.jsx(k,{label:"Durata Percorso",value:t.programDuration})]})]}),f.jsxs("div",{className:M,children:[f.jsx("h4",{className:S,children:"Foto Iniziali"}),f.jsx(P,{urls:l})]}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition font-semibold",children:[f.jsx(XN,{})," Modifica"]})})]})]})},RJ=`
.react-calendar { width: 100%; background: rgba(31, 41, 55, 0.5); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 1rem; backdrop-filter: blur(10px); font-family: sans-serif; }
.react-calendar__tile, .react-calendar__month-view__weekdays__weekday { color: white; padding: 0.75em 0.5em; }
.react-calendar__navigation button { color: #22d3ee; font-weight: bold; font-size: 1.1em; }
.react-calendar__tile--now { background: rgba(55, 65, 81, 0.7); border-radius: 0.5rem; }
.react-calendar__tile--active { background: #0891b2; border-radius: 0.5rem; }
.react-calendar__tile:enabled:hover, .react-calendar__tile:enabled:focus { background: rgba(55, 65, 81, 1); border-radius: 0.5rem; }
.check-day { background-color: rgba(220, 38, 38, 0.4); border-radius: 50%; font-weight: bold; }
.check-submitted { background-color: rgba(34, 197, 94, 0.5); border-radius: 50%; }
`,NJ=()=>f.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),DJ=({formState:t,setFormState:e,handleSubmit:n,isUploading:r,handleFileChange:i})=>{const s=()=>e({id:null,notes:"",weight:"",photos:{},photoPreviews:{}}),o=({type:a,label:l,preview:c})=>f.jsxs("div",{className:"text-center",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-300",children:l}),f.jsxs("div",{className:"mt-2 flex justify-center items-center w-full h-48 bg-gray-700/50 rounded-lg border-2 border-dashed border-gray-600 relative",children:[c?f.jsx("img",{src:c,alt:"preview",className:"h-full w-full object-contain rounded-lg"}):f.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[f.jsx(GN,{size:40}),f.jsx("p",{className:"mt-2 text-sm",children:"Carica foto"})]}),f.jsx("input",{type:"file",accept:"image/*",onChange:u=>i(u,a),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})]});return f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("h3",{className:"font-bold text-lg mb-4 text-cyan-400",children:t.id?"Modifica Check":"Carica Check del Giorno"}),f.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",children:f.jsx(B9,{size:20})})]}),f.jsxs("form",{onSubmit:n,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Peso Attuale (kg)*"}),f.jsx("input",{type:"number",step:"0.1",value:t.weight,onChange:a=>e(l=>({...l,weight:a.target.value})),required:!0,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Es. 75.5"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Note sul check"}),f.jsx("textarea",{value:t.notes,onChange:a=>e(l=>({...l,notes:a.target.value})),rows:"4",className:"w-full p-2 bg-gray-700 border border-gray-600 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[f.jsx(o,{type:"front",label:"Frontale",preview:t.photoPreviews.front}),f.jsx(o,{type:"right",label:"Laterale Destro",preview:t.photoPreviews.right}),f.jsx(o,{type:"left",label:"Laterale Sinistro",preview:t.photoPreviews.left}),f.jsx(o,{type:"back",label:"Posteriore",preview:t.photoPreviews.back})]}),f.jsx("div",{className:"flex justify-end",children:f.jsxs("button",{type:"submit",disabled:r,className:"flex items-center gap-2 px-5 py-2.5 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition font-semibold disabled:opacity-50",children:[f.jsx(Jx,{})," ",r?"Salvataggio...":t.id?"Salva Modifiche":"Invia Check"]})})]})]})},OJ=({check:t,handleEditClick:e})=>{const n=(new Date-t.createdAt.toDate())/36e5<2;return f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs("h3",{className:"font-bold text-lg text-cyan-400",children:["Riepilogo del ",t.createdAt.toDate().toLocaleDateString("it-IT")]}),n&&f.jsxs("button",{onClick:()=>e(t),className:"flex items-center gap-2 px-3 py-1.5 bg-gray-600 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg",children:[f.jsx(JN,{})," Modifica"]})]}),f.jsxs("div",{className:"mt-4 space-y-4",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-gray-300",children:"Peso Registrato:"}),f.jsxs("p",{className:"text-white text-xl font-bold",children:[t.weight," kg"]})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-gray-300",children:"Note:"}),f.jsx("p",{className:"text-gray-400 p-3 bg-gray-900/50 rounded-lg",children:t.notes||"Nessuna nota."})]}),f.jsxs("div",{children:[f.jsx("h4",{className:"font-semibold text-gray-300",children:"Foto:"}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-2",children:t.photoURLs&&Object.values(t.photoURLs).map((r,i)=>f.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:f.jsx("img",{src:r,alt:`foto ${i}`,className:"rounded-lg w-full h-auto"},i)}))})]})]})]})};function MJ(){const[t,e]=O.useState(null),[n,r]=O.useState([]),[i,s]=O.useState(!0),[o,a]=O.useState(new Date),[l,c]=O.useState({id:null,notes:"",weight:"",photos:{},photoPreviews:{}}),[u,d]=O.useState(!1),p=$t(),y=Gi().currentUser,v=Ph();O.useEffect(()=>{if(!y){p("/client-login");return}(async()=>{const S=He(ue,"clients",y.uid),_=await Yi(S);_.exists()&&_.data().createdAt?e(_.data().createdAt.toDate()):e(new Date);const k=Jt(ue,`clients/${y.uid}/checks`),P=ti(k,Jo("createdAt","desc"));return Zt(P,D=>{const N=D.docs.map(q=>({id:q.id,...q.data()}));r(N),s(!1)})})()},[y,p]);const x=M=>{if(!t)return[];let S=[],_=new Date(t.getTime());for(;_.getTime()<new Date(M.getFullYear(),M.getMonth()+2,1).getTime();)_.getMonth()===M.getMonth()&&_.getFullYear()===M.getFullYear()&&S.push(new Date(_.getTime())),_.setDate(_.getDate()+14);return S},w=({date:M,view:S})=>{if(S==="month"){if(n.some(A=>A.createdAt&&A.createdAt.toDate().toDateString()===M.toDateString()))return"check-submitted";if(x(M).some(A=>A.toDateString()===M.toDateString()))return"check-day"}},b=(M,S)=>{const _=M.target.files[0];_&&c(k=>({...k,photos:{...k.photos,[S]:_},photoPreviews:{...k.photoPreviews,[S]:URL.createObjectURL(_)}}))},E=M=>{a(M.createdAt.toDate()),c({id:M.id,notes:M.notes,weight:M.weight,photos:{},photoPreviews:M.photoURLs})},I=async M=>{M.preventDefault();const{id:S,notes:_,weight:k,photos:P}=l;if(!y||!S&&Object.values(P).length+Object.values(l.photoPreviews).filter(A=>typeof A=="string").length<4||!k){alert("Per favore, compila il peso e carica tutte e 4 le foto.");return}d(!0);try{const A=S?n.find(q=>q.id===S):null;let D=A?{...A.photoURLs}:{};await Promise.all(Object.entries(P).map(async([q,te])=>{if(te){const re=`clients/${y.uid}/checks/${cb()}-${te.name}`,ne=Sl(v,re);await HN(ne,te),D[q]=await Em(ne)}}));const N={notes:_,weight:parseFloat(k),photoURLs:D};S?(await bm(He(ue,`clients/${y.uid}/checks`,S),{...N,lastUpdatedAt:zn()}),alert("Check modificato con successo!")):(await Tm(Jt(ue,`clients/${y.uid}/checks`),{...N,createdAt:zn()}),alert("Check caricato con successo!")),c({id:null,notes:"",weight:"",photos:{},photoPreviews:{}})}catch(A){console.error("Errore:",A),alert("Si è verificato un errore.")}finally{d(!1)}},C=()=>{const M=n.find(_=>_.createdAt&&_.createdAt.toDate().toDateString()===o.toDateString()),S=x(o).some(_=>_.toDateString()===o.toDateString());return l.id||S&&!M?f.jsx(DJ,{formState:l,setFormState:c,handleSubmit:I,isUploading:u,handleFileChange:b}):M?f.jsx(OJ,{check:M,handleEditClick:E}):f.jsx("p",{className:"text-center text-gray-400 p-8",children:"Nessun check previsto o registrato per questa data."})};return i?f.jsx(NJ,{}):f.jsxs(f.Fragment,{children:[f.jsx("style",{children:RJ}),f.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[f.jsxs("header",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:"I miei Check"}),f.jsxs("button",{onClick:()=>p("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg transition-colors",children:[f.jsx(Xs,{}),f.jsx("span",{children:"Dashboard"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[f.jsx("div",{className:"lg:col-span-1",children:f.jsx(oM,{onChange:a,value:o,tileClassName:w})}),f.jsx("div",{className:"lg:col-span-2 bg-gray-800/50 p-6 rounded-xl border border-white/10 min-h-[400px]",children:C()})]})]})]})}const jJ=()=>f.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),LJ=t=>t&&typeof t.toDate=="function"?t.toDate().toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric"}):"Data non disponibile",VJ=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(!0),i=$t(),o=Gi().currentUser;return O.useEffect(()=>{if(!o){i("/client-login");return}const a=Jt(ue,`clients/${o.uid}/payments`),l=ti(a,Jo("paymentDate","desc")),c=Zt(l,u=>{const d=u.docs.map(p=>({id:p.id,...p.data()}));e(d),r(!1)},u=>{console.error("Errore nel caricare i pagamenti:",u),r(!1)});return()=>c()},[o,i]),n?f.jsx(jJ,{}):f.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[f.jsxs("header",{className:"flex justify-between items-center mb-8",children:[f.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:"Storico Pagamenti"}),f.jsxs("button",{onClick:()=>i("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg transition-colors",children:[f.jsx(Xs,{}),f.jsx("span",{children:"Dashboard"})]})]}),f.jsx("main",{className:"bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-white/10",children:[f.jsxs("th",{className:"p-4 text-sm font-semibold text-gray-300",children:[f.jsx(Gx,{className:"inline mr-2"}),"Data"]}),f.jsxs("th",{className:"p-4 text-sm font-semibold text-gray-300",children:[f.jsx(Ah,{className:"inline mr-2"}),"Importo"]}),f.jsxs("th",{className:"p-4 text-sm font-semibold text-gray-300",children:[f.jsx(ZN,{className:"inline mr-2"}),"Durata"]}),f.jsx("th",{className:"p-4 text-sm font-semibold text-gray-300 hidden sm:table-cell",children:"Metodo"})]})}),f.jsx("tbody",{children:t.length>0?t.map(a=>{var l;return f.jsxs("tr",{className:"border-b border-white/5 last:border-b-0",children:[f.jsx("td",{className:"p-4",children:LJ(a.paymentDate)}),f.jsxs("td",{className:"p-4 font-semibold text-cyan-400",children:["€ ",(l=a.amount)==null?void 0:l.toFixed(2)]}),f.jsx("td",{className:"p-4",children:a.duration}),f.jsx("td",{className:"p-4 hidden sm:table-cell",children:a.paymentMethod||"Non specificato"})]},a.id)}):f.jsx("tr",{children:f.jsx("td",{colSpan:"4",className:"text-center text-gray-500 p-8",children:"Non è stato registrato ancora nessun pagamento."})})})]})})})]})},FJ=()=>f.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),UJ=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(""),[i,s]=O.useState(!0),[o,a]=O.useState(null),l=O.useRef(null),c=$t(),d=Gi().currentUser,p="QwWST9OVOlTOi5oheyCqfpXLOLg2";O.useEffect(()=>{if(!d){c("/client-login");return}const y=[d.uid,p].sort().join("_");a(y);const v=Jt(ue,"chats",y,"messages"),x=ti(v,Jo("createdAt")),w=Zt(x,b=>{const E=b.docs.map(I=>({id:I.id,...I.data()}));e(E),s(!1)});return()=>w()},[d,c]),O.useEffect(()=>{var y;(y=l.current)==null||y.scrollIntoView({behavior:"smooth"})},[t]);const m=async y=>{if(y.preventDefault(),n.trim()===""||!o)return;const v=Jt(ue,"chats",o,"messages");await Tm(v,{text:n,createdAt:zn(),senderId:d.uid});const x=He(ue,"chats",o),w=await Yi(He(ue,"clients",d.uid)),b=w.exists()?w.data().name:d.email;await Tl(x,{lastMessage:n,lastUpdate:zn(),participants:[d.uid,p],clientName:b,participantNames:{[d.uid]:b,[p]:"Coach"}},{merge:!0}),r("")};return i?f.jsx(FJ,{}):f.jsxs("div",{className:"min-h-screen bg-gray-900 text-white font-sans flex flex-col h-screen",children:[f.jsxs("header",{className:"flex justify-between items-center p-4 bg-gray-800/50 backdrop-blur-sm border-b border-white/10 sticky top-0",children:[f.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:"Chat con il Coach"}),f.jsxs("button",{onClick:()=>c("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg",children:[f.jsx(Xs,{}),f.jsx("span",{children:"Dashboard"})]})]}),f.jsxs("main",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.map(y=>{var v;return f.jsx("div",{className:`flex ${y.senderId===d.uid?"justify-end":"justify-start"}`,children:f.jsxs("div",{className:`max-w-xs md:max-w-md p-3 rounded-2xl ${y.senderId===d.uid?"bg-cyan-600 rounded-br-none":"bg-gray-700 rounded-bl-none"}`,children:[f.jsx("p",{className:"text-white break-words",children:y.text}),f.jsx("p",{className:"text-xs text-gray-300 mt-1 text-right",children:(v=y.createdAt)==null?void 0:v.toDate().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})})]})},y.id)}),f.jsx("div",{ref:l})]}),f.jsx("footer",{className:"p-4 bg-gray-800/50 backdrop-blur-sm border-t border-white/10 sticky bottom-0",children:f.jsxs("form",{onSubmit:m,className:"flex items-center gap-4",children:[f.jsx("input",{type:"text",value:n,onChange:y=>r(y.target.value),placeholder:"Scrivi un messaggio...",className:"flex-1 p-3 bg-gray-700 border border-gray-600 rounded-full outline-none focus:ring-2 focus:ring-cyan-500 text-white"}),f.jsx("button",{type:"submit",className:"p-3 bg-cyan-600 hover:bg-cyan-700 text-white rounded-full transition-colors disabled:opacity-50",disabled:!n.trim(),children:f.jsx(Jx,{size:20})})]})})]})},BJ=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(""),[i,s]=O.useState(""),[o,a]=O.useState(!1),l=Gi(),c=async u=>{u.preventDefault(),r(""),s(""),a(!0);try{await MU(l,t),r("Email di reset inviata con successo! Controlla la tua casella di posta.")}catch(d){s("Nessun utente trovato con questa email. Controlla che sia corretta."),console.error("Errore nel reset password:",d)}finally{a(!1)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:f.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg",children:[f.jsx("h2",{className:"text-3xl font-bold text-center text-cyan-400",children:"Recupera Password"}),f.jsx("p",{className:"text-center text-gray-300",children:"Inserisci la tua email per ricevere un link di recupero."}),n?f.jsx("div",{className:"text-center p-4 bg-green-500/20 text-green-300 rounded-lg",children:f.jsx("p",{children:n})}):f.jsxs("form",{onSubmit:c,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400",children:"Email"}),f.jsxs("div",{className:"relative mt-1",children:[f.jsx(M9,{className:"absolute top-1/2 left-3 -translate-y-1/2 text-gray-400"}),f.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:u=>e(u.target.value),className:"w-full pl-10 pr-3 py-2 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]})]}),i&&f.jsx("p",{className:"text-red-500 text-sm text-center",children:i}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:o,className:"w-full px-4 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500 disabled:bg-gray-500",children:o?"Invio in corso...":"Invia Link di Recupero"})})]}),f.jsx("div",{className:"text-center",children:f.jsxs(Co,{to:"/client-login",className:"text-sm text-cyan-400 hover:underline flex items-center justify-center gap-2",children:[f.jsx(Xs,{})," Torna al Login"]})})]})})},zJ=()=>f.jsx("div",{className:"flex justify-center items-center min-h-screen bg-background text-foreground",children:"Caricamento..."}),zI=({isAllowed:t,redirectPath:e,children:n})=>t?n||f.jsx(hA,{}):f.jsx(lf,{to:e,replace:!0}),$J=()=>{const[t,e]=O.useState({isLoading:!0,user:null,isClient:!1}),n=$t();return O.useEffect(()=>{const r=sessionStorage.getItem("app_role"),i=BU(Hr,async s=>{if(s){const o=He(ue,"clients",s.uid),a=await Yi(o),l=a.exists()&&a.data().isClient;if(r==="admin"&&l){await ml(Hr),e({isLoading:!1,user:null,isClient:!1});return}const c={isLoading:!1,user:s,isClient:l};e(c);const u=window.location.hash;(u.includes("#/login")||u.includes("#/client-login"))&&(c.isClient?n("/client/dashboard",{replace:!0}):n("/",{replace:!0}))}else sessionStorage.removeItem("app_role"),e({isLoading:!1,user:null,isClient:!1})});return()=>i()},[n]),t.isLoading?f.jsx(zJ,{}):f.jsxs(YV,{children:[f.jsx(_t,{path:"/login",element:f.jsx(vq,{})}),f.jsx(_t,{path:"/client-login",element:f.jsx(EJ,{})}),f.jsx(_t,{path:"/client/forgot-password",element:f.jsx(BJ,{})}),f.jsx(_t,{element:f.jsx(zI,{isAllowed:t.user&&!t.isClient,redirectPath:"/login"}),children:f.jsxs(_t,{element:f.jsx(yq,{}),children:[f.jsx(_t,{path:"/",element:f.jsx(iQ,{})}),f.jsx(_t,{path:"/clients",element:f.jsx(oQ,{})}),f.jsx(_t,{path:"/new",element:f.jsx(RQ,{})}),f.jsx(_t,{path:"/client/:clientId",element:f.jsx(xJ,{})}),f.jsx(_t,{path:"/edit/:clientId",element:f.jsx(bJ,{})}),f.jsx(_t,{path:"/updates",element:f.jsx(TJ,{})}),f.jsx(_t,{path:"/chat",element:f.jsx(SJ,{})})]})}),f.jsxs(_t,{element:f.jsx(zI,{isAllowed:t.user&&t.isClient,redirectPath:"/client-login"}),children:[f.jsx(_t,{path:"/client/first-access",element:f.jsx(kJ,{})}),f.jsx(_t,{path:"/client/dashboard",element:f.jsx(CJ,{})}),f.jsx(_t,{path:"/client/anamnesi",element:f.jsx(AJ,{})}),f.jsx(_t,{path:"/client/checks",element:f.jsx(MJ,{})}),f.jsx(_t,{path:"/client/payments",element:f.jsx(VJ,{})}),f.jsx(_t,{path:"/client/chat",element:f.jsx(UJ,{})})]}),f.jsx(_t,{path:"*",element:t.user?t.isClient?f.jsx(lf,{to:"/client/dashboard"}):f.jsx(lf,{to:"/"}):f.jsx(lf,{to:"/login"})})]})};function WJ(){return f.jsx(nF,{children:f.jsx($J,{})})}Ay.createRoot(document.getElementById("root")).render(f.jsx(it.StrictMode,{children:f.jsx(WJ,{})}));
