var FM=Object.defineProperty;var UM=(t,e,n)=>e in t?FM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var de=(t,e,n)=>UM(t,typeof e!="symbol"?e+"":e,n);function BM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function zM(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tI={exports:{}},Up={},nI={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ch=Symbol.for("react.element"),$M=Symbol.for("react.portal"),WM=Symbol.for("react.fragment"),HM=Symbol.for("react.strict_mode"),qM=Symbol.for("react.profiler"),KM=Symbol.for("react.provider"),GM=Symbol.for("react.context"),YM=Symbol.for("react.forward_ref"),QM=Symbol.for("react.suspense"),XM=Symbol.for("react.memo"),JM=Symbol.for("react.lazy"),Hb=Symbol.iterator;function ZM(t){return t===null||typeof t!="object"?null:(t=Hb&&t[Hb]||t["@@iterator"],typeof t=="function"?t:null)}var rI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},iI=Object.assign,sI={};function Nl(t,e,n){this.props=t,this.context=e,this.refs=sI,this.updater=n||rI}Nl.prototype.isReactComponent={};Nl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Nl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function oI(){}oI.prototype=Nl.prototype;function $_(t,e,n){this.props=t,this.context=e,this.refs=sI,this.updater=n||rI}var W_=$_.prototype=new oI;W_.constructor=$_;iI(W_,Nl.prototype);W_.isPureReactComponent=!0;var qb=Array.isArray,aI=Object.prototype.hasOwnProperty,H_={current:null},lI={key:!0,ref:!0,__self:!0,__source:!0};function cI(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)aI.call(e,r)&&!lI.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ch,type:t,key:s,ref:o,props:i,_owner:H_.current}}function ej(t,e){return{$$typeof:ch,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function q_(t){return typeof t=="object"&&t!==null&&t.$$typeof===ch}function tj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Kb=/\/+/g;function ug(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tj(""+t.key):e.toString(36)}function Jd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ch:case $M:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ug(o,0):r,qb(i)?(n="",t!=null&&(n=t.replace(Kb,"$&/")+"/"),Jd(i,e,n,"",function(c){return c})):i!=null&&(q_(i)&&(i=ej(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Kb,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",qb(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ug(s,a);o+=Jd(s,e,n,l,i)}else if(l=ZM(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ug(s,a++),o+=Jd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sd(t,e,n){if(t==null)return t;var r=[],i=0;return Jd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function nj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pn={current:null},Zd={transition:null},rj={ReactCurrentDispatcher:Pn,ReactCurrentBatchConfig:Zd,ReactCurrentOwner:H_};function uI(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:sd,forEach:function(t,e,n){sd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sd(t,function(){e++}),e},toArray:function(t){return sd(t,function(e){return e})||[]},only:function(t){if(!q_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ee.Component=Nl;Ee.Fragment=WM;Ee.Profiler=qM;Ee.PureComponent=$_;Ee.StrictMode=HM;Ee.Suspense=QM;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rj;Ee.act=uI;Ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=iI({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=H_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)aI.call(e,l)&&!lI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ch,type:t.type,key:i,ref:s,props:r,_owner:o}};Ee.createContext=function(t){return t={$$typeof:GM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:KM,_context:t},t.Consumer=t};Ee.createElement=cI;Ee.createFactory=function(t){var e=cI.bind(null,t);return e.type=t,e};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(t){return{$$typeof:YM,render:t}};Ee.isValidElement=q_;Ee.lazy=function(t){return{$$typeof:JM,_payload:{_status:-1,_result:t},_init:nj}};Ee.memo=function(t,e){return{$$typeof:XM,type:t,compare:e===void 0?null:e}};Ee.startTransition=function(t){var e=Zd.transition;Zd.transition={};try{t()}finally{Zd.transition=e}};Ee.unstable_act=uI;Ee.useCallback=function(t,e){return Pn.current.useCallback(t,e)};Ee.useContext=function(t){return Pn.current.useContext(t)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(t){return Pn.current.useDeferredValue(t)};Ee.useEffect=function(t,e){return Pn.current.useEffect(t,e)};Ee.useId=function(){return Pn.current.useId()};Ee.useImperativeHandle=function(t,e,n){return Pn.current.useImperativeHandle(t,e,n)};Ee.useInsertionEffect=function(t,e){return Pn.current.useInsertionEffect(t,e)};Ee.useLayoutEffect=function(t,e){return Pn.current.useLayoutEffect(t,e)};Ee.useMemo=function(t,e){return Pn.current.useMemo(t,e)};Ee.useReducer=function(t,e,n){return Pn.current.useReducer(t,e,n)};Ee.useRef=function(t){return Pn.current.useRef(t)};Ee.useState=function(t){return Pn.current.useState(t)};Ee.useSyncExternalStore=function(t,e,n){return Pn.current.useSyncExternalStore(t,e,n)};Ee.useTransition=function(){return Pn.current.useTransition()};Ee.version="18.3.1";nI.exports=Ee;var O=nI.exports;const rt=zM(O),ij=BM({__proto__:null,default:rt},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sj=O,oj=Symbol.for("react.element"),aj=Symbol.for("react.fragment"),lj=Object.prototype.hasOwnProperty,cj=sj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uj={key:!0,ref:!0,__self:!0,__source:!0};function hI(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lj.call(e,r)&&!uj.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:oj,type:t,key:s,ref:o,props:i,_owner:cj.current}}Up.Fragment=aj;Up.jsx=hI;Up.jsxs=hI;tI.exports=Up;var d=tI.exports,Ny={},dI={exports:{}},ir={},fI={exports:{}},pI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,X){var J=z.length;z.push(X);e:for(;0<J;){var ye=J-1>>>1,pe=z[ye];if(0<i(pe,X))z[ye]=X,z[J]=pe,J=ye;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var X=z[0],J=z.pop();if(J!==X){z[0]=J;e:for(var ye=0,pe=z.length,we=pe>>>1;ye<we;){var He=2*(ye+1)-1,tt=z[He],qe=He+1,ot=z[qe];if(0>i(tt,J))qe<pe&&0>i(ot,tt)?(z[ye]=ot,z[qe]=J,ye=qe):(z[ye]=tt,z[He]=J,ye=He);else if(qe<pe&&0>i(ot,J))z[ye]=ot,z[qe]=J,ye=qe;else break e}}return X}function i(z,X){var J=z.sortIndex-X.sortIndex;return J!==0?J:z.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,y=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(z){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=z)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(c)}}function P(z){if(_=!1,E(z),!y)if(n(l)!==null)y=!0,q(C);else{var X=n(c);X!==null&&ee(P,X.startTime-z)}}function C(z,X){y=!1,_&&(_=!1,v(b),b=-1),m=!0;var J=p;try{for(E(X),f=n(l);f!==null&&(!(f.expirationTime>X)||z&&!D());){var ye=f.callback;if(typeof ye=="function"){f.callback=null,p=f.priorityLevel;var pe=ye(f.expirationTime<=X);X=t.unstable_now(),typeof pe=="function"?f.callback=pe:f===n(l)&&r(l),E(X)}else r(l);f=n(l)}if(f!==null)var we=!0;else{var He=n(c);He!==null&&ee(P,He.startTime-X),we=!1}return we}finally{f=null,p=J,m=!1}}var M=!1,S=null,b=-1,k=5,I=-1;function D(){return!(t.unstable_now()-I<k)}function A(){if(S!==null){var z=t.unstable_now();I=z;var X=!0;try{X=S(!0,z)}finally{X?R():(M=!1,S=null)}}else M=!1}var R;if(typeof w=="function")R=function(){w(A)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,H=$.port2;$.port1.onmessage=A,R=function(){H.postMessage(null)}}else R=function(){x(A,0)};function q(z){S=z,M||(M=!0,R())}function ee(z,X){b=x(function(){z(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,q(C))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var J=p;p=X;try{return z()}finally{p=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var J=p;p=z;try{return X()}finally{p=J}},t.unstable_scheduleCallback=function(z,X,J){var ye=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ye+J:ye):J=ye,z){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=J+pe,z={id:u++,callback:X,priorityLevel:z,startTime:J,expirationTime:pe,sortIndex:-1},J>ye?(z.sortIndex=J,e(c,z),n(l)===null&&z===n(c)&&(_?(v(b),b=-1):_=!0,ee(P,J-ye))):(z.sortIndex=pe,e(l,z),y||m||(y=!0,q(C))),z},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(z){var X=p;return function(){var J=p;p=X;try{return z.apply(this,arguments)}finally{p=J}}}})(pI);fI.exports=pI;var hj=fI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dj=O,nr=hj;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mI=new Set,gu={};function Zo(t,e){ll(t,e),ll(t+"Capture",e)}function ll(t,e){for(gu[t]=e,t=0;t<e.length;t++)mI.add(e[t])}var ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dy=Object.prototype.hasOwnProperty,fj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gb={},Yb={};function pj(t){return Dy.call(Yb,t)?!0:Dy.call(Gb,t)?!1:fj.test(t)?Yb[t]=!0:(Gb[t]=!0,!1)}function mj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gj(t,e,n,r){if(e===null||typeof e>"u"||mj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){en[t]=new Rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];en[e]=new Rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){en[t]=new Rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){en[t]=new Rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){en[t]=new Rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){en[t]=new Rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){en[t]=new Rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){en[t]=new Rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){en[t]=new Rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var K_=/[\-:]([a-z])/g;function G_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(K_,G_);en[e]=new Rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(K_,G_);en[e]=new Rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(K_,G_);en[e]=new Rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){en[t]=new Rn(t,1,!1,t.toLowerCase(),null,!1,!1)});en.xlinkHref=new Rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){en[t]=new Rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Y_(t,e,n,r){var i=en.hasOwnProperty(e)?en[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gj(e,n,i,r)&&(n=null),r||i===null?pj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qi=dj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,od=Symbol.for("react.element"),Aa=Symbol.for("react.portal"),Pa=Symbol.for("react.fragment"),Q_=Symbol.for("react.strict_mode"),Oy=Symbol.for("react.profiler"),gI=Symbol.for("react.provider"),yI=Symbol.for("react.context"),X_=Symbol.for("react.forward_ref"),My=Symbol.for("react.suspense"),jy=Symbol.for("react.suspense_list"),J_=Symbol.for("react.memo"),rs=Symbol.for("react.lazy"),vI=Symbol.for("react.offscreen"),Qb=Symbol.iterator;function lc(t){return t===null||typeof t!="object"?null:(t=Qb&&t[Qb]||t["@@iterator"],typeof t=="function"?t:null)}var ht=Object.assign,hg;function kc(t){if(hg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hg=e&&e[1]||""}return`
`+hg+t}var dg=!1;function fg(t,e){if(!t||dg)return"";dg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{dg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?kc(t):""}function yj(t){switch(t.tag){case 5:return kc(t.type);case 16:return kc("Lazy");case 13:return kc("Suspense");case 19:return kc("SuspenseList");case 0:case 2:case 15:return t=fg(t.type,!1),t;case 11:return t=fg(t.type.render,!1),t;case 1:return t=fg(t.type,!0),t;default:return""}}function Ly(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pa:return"Fragment";case Aa:return"Portal";case Oy:return"Profiler";case Q_:return"StrictMode";case My:return"Suspense";case jy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yI:return(t.displayName||"Context")+".Consumer";case gI:return(t._context.displayName||"Context")+".Provider";case X_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case J_:return e=t.displayName||null,e!==null?e:Ly(t.type)||"Memo";case rs:e=t._payload,t=t._init;try{return Ly(t(e))}catch{}}return null}function vj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ly(e);case 8:return e===Q_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function js(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _I(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _j(t){var e=_I(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ad(t){t._valueTracker||(t._valueTracker=_j(t))}function xI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=_I(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Rf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vy(t,e){var n=e.checked;return ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Xb(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=js(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wI(t,e){e=e.checked,e!=null&&Y_(t,"checked",e,!1)}function Fy(t,e){wI(t,e);var n=js(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Uy(t,e.type,n):e.hasOwnProperty("defaultValue")&&Uy(t,e.type,js(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Jb(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Uy(t,e,n){(e!=="number"||Rf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cc=Array.isArray;function Ya(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+js(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function By(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Cc(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:js(n)}}function bI(t,e){var n=js(e.value),r=js(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function eT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function TI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?TI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ld,EI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ld=ld||document.createElement("div"),ld.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ld.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xj=["Webkit","ms","Moz","O"];Object.keys(Wc).forEach(function(t){xj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wc[e]=Wc[t]})});function SI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wc.hasOwnProperty(t)&&Wc[t]?(""+e).trim():e+"px"}function kI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=SI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var wj=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $y(t,e){if(e){if(wj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function Wy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hy=null;function Z_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qy=null,Qa=null,Xa=null;function tT(t){if(t=dh(t)){if(typeof qy!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Hp(e),qy(t.stateNode,t.type,e))}}function CI(t){Qa?Xa?Xa.push(t):Xa=[t]:Qa=t}function II(){if(Qa){var t=Qa,e=Xa;if(Xa=Qa=null,tT(t),e)for(t=0;t<e.length;t++)tT(e[t])}}function AI(t,e){return t(e)}function PI(){}var pg=!1;function RI(t,e,n){if(pg)return t(e,n);pg=!0;try{return AI(t,e,n)}finally{pg=!1,(Qa!==null||Xa!==null)&&(PI(),II())}}function vu(t,e){var n=t.stateNode;if(n===null)return null;var r=Hp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var Ky=!1;if(ji)try{var cc={};Object.defineProperty(cc,"passive",{get:function(){Ky=!0}}),window.addEventListener("test",cc,cc),window.removeEventListener("test",cc,cc)}catch{Ky=!1}function bj(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Hc=!1,Nf=null,Df=!1,Gy=null,Tj={onError:function(t){Hc=!0,Nf=t}};function Ej(t,e,n,r,i,s,o,a,l){Hc=!1,Nf=null,bj.apply(Tj,arguments)}function Sj(t,e,n,r,i,s,o,a,l){if(Ej.apply(this,arguments),Hc){if(Hc){var c=Nf;Hc=!1,Nf=null}else throw Error(K(198));Df||(Df=!0,Gy=c)}}function ea(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function NI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nT(t){if(ea(t)!==t)throw Error(K(188))}function kj(t){var e=t.alternate;if(!e){if(e=ea(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return nT(i),t;if(s===r)return nT(i),e;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function DI(t){return t=kj(t),t!==null?OI(t):null}function OI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OI(t);if(e!==null)return e;t=t.sibling}return null}var MI=nr.unstable_scheduleCallback,rT=nr.unstable_cancelCallback,Cj=nr.unstable_shouldYield,Ij=nr.unstable_requestPaint,wt=nr.unstable_now,Aj=nr.unstable_getCurrentPriorityLevel,e0=nr.unstable_ImmediatePriority,jI=nr.unstable_UserBlockingPriority,Of=nr.unstable_NormalPriority,Pj=nr.unstable_LowPriority,LI=nr.unstable_IdlePriority,Bp=null,Yr=null;function Rj(t){if(Yr&&typeof Yr.onCommitFiberRoot=="function")try{Yr.onCommitFiberRoot(Bp,t,void 0,(t.current.flags&128)===128)}catch{}}var Ir=Math.clz32?Math.clz32:Oj,Nj=Math.log,Dj=Math.LN2;function Oj(t){return t>>>=0,t===0?32:31-(Nj(t)/Dj|0)|0}var cd=64,ud=4194304;function Ic(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ic(a):(s&=o,s!==0&&(r=Ic(s)))}else o=n&~i,o!==0?r=Ic(o):s!==0&&(r=Ic(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ir(e),i=1<<n,r|=t[n],e&=~i;return r}function Mj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ir(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Mj(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Yy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function VI(){var t=cd;return cd<<=1,!(cd&4194240)&&(cd=64),t}function mg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function uh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ir(e),t[e]=n}function Lj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ir(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function t0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ir(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Le=0;function FI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UI,n0,BI,zI,$I,Qy=!1,hd=[],ws=null,bs=null,Ts=null,_u=new Map,xu=new Map,ss=[],Vj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iT(t,e){switch(t){case"focusin":case"focusout":ws=null;break;case"dragenter":case"dragleave":bs=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":_u.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(e.pointerId)}}function uc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=dh(e),e!==null&&n0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Fj(t,e,n,r,i){switch(e){case"focusin":return ws=uc(ws,t,e,n,r,i),!0;case"dragenter":return bs=uc(bs,t,e,n,r,i),!0;case"mouseover":return Ts=uc(Ts,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return _u.set(s,uc(_u.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,xu.set(s,uc(xu.get(s)||null,t,e,n,r,i)),!0}return!1}function WI(t){var e=So(t.target);if(e!==null){var n=ea(e);if(n!==null){if(e=n.tag,e===13){if(e=NI(n),e!==null){t.blockedOn=e,$I(t.priority,function(){BI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ef(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Xy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hy=r,n.target.dispatchEvent(r),Hy=null}else return e=dh(n),e!==null&&n0(e),t.blockedOn=n,!1;e.shift()}return!0}function sT(t,e,n){ef(t)&&n.delete(e)}function Uj(){Qy=!1,ws!==null&&ef(ws)&&(ws=null),bs!==null&&ef(bs)&&(bs=null),Ts!==null&&ef(Ts)&&(Ts=null),_u.forEach(sT),xu.forEach(sT)}function hc(t,e){t.blockedOn===e&&(t.blockedOn=null,Qy||(Qy=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,Uj)))}function wu(t){function e(i){return hc(i,t)}if(0<hd.length){hc(hd[0],t);for(var n=1;n<hd.length;n++){var r=hd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ws!==null&&hc(ws,t),bs!==null&&hc(bs,t),Ts!==null&&hc(Ts,t),_u.forEach(e),xu.forEach(e),n=0;n<ss.length;n++)r=ss[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ss.length&&(n=ss[0],n.blockedOn===null);)WI(n),n.blockedOn===null&&ss.shift()}var Ja=qi.ReactCurrentBatchConfig,jf=!0;function Bj(t,e,n,r){var i=Le,s=Ja.transition;Ja.transition=null;try{Le=1,r0(t,e,n,r)}finally{Le=i,Ja.transition=s}}function zj(t,e,n,r){var i=Le,s=Ja.transition;Ja.transition=null;try{Le=4,r0(t,e,n,r)}finally{Le=i,Ja.transition=s}}function r0(t,e,n,r){if(jf){var i=Xy(t,e,n,r);if(i===null)Sg(t,e,r,Lf,n),iT(t,r);else if(Fj(i,t,e,n,r))r.stopPropagation();else if(iT(t,r),e&4&&-1<Vj.indexOf(t)){for(;i!==null;){var s=dh(i);if(s!==null&&UI(s),s=Xy(t,e,n,r),s===null&&Sg(t,e,r,Lf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Sg(t,e,r,null,n)}}var Lf=null;function Xy(t,e,n,r){if(Lf=null,t=Z_(r),t=So(t),t!==null)if(e=ea(t),e===null)t=null;else if(n=e.tag,n===13){if(t=NI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Lf=t,null}function HI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Aj()){case e0:return 1;case jI:return 4;case Of:case Pj:return 16;case LI:return 536870912;default:return 16}default:return 16}}var fs=null,i0=null,tf=null;function qI(){if(tf)return tf;var t,e=i0,n=e.length,r,i="value"in fs?fs.value:fs.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return tf=i.slice(t,1<r?1-r:void 0)}function nf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dd(){return!0}function oT(){return!1}function sr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?dd:oT,this.isPropagationStopped=oT,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dd)},persist:function(){},isPersistent:dd}),e}var Dl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},s0=sr(Dl),hh=ht({},Dl,{view:0,detail:0}),$j=sr(hh),gg,yg,dc,zp=ht({},hh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:o0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==dc&&(dc&&t.type==="mousemove"?(gg=t.screenX-dc.screenX,yg=t.screenY-dc.screenY):yg=gg=0,dc=t),gg)},movementY:function(t){return"movementY"in t?t.movementY:yg}}),aT=sr(zp),Wj=ht({},zp,{dataTransfer:0}),Hj=sr(Wj),qj=ht({},hh,{relatedTarget:0}),vg=sr(qj),Kj=ht({},Dl,{animationName:0,elapsedTime:0,pseudoElement:0}),Gj=sr(Kj),Yj=ht({},Dl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qj=sr(Yj),Xj=ht({},Dl,{data:0}),lT=sr(Xj),Jj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eL[t])?!!e[t]:!1}function o0(){return tL}var nL=ht({},hh,{key:function(t){if(t.key){var e=Jj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Zj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:o0,charCode:function(t){return t.type==="keypress"?nf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rL=sr(nL),iL=ht({},zp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cT=sr(iL),sL=ht({},hh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:o0}),oL=sr(sL),aL=ht({},Dl,{propertyName:0,elapsedTime:0,pseudoElement:0}),lL=sr(aL),cL=ht({},zp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uL=sr(cL),hL=[9,13,27,32],a0=ji&&"CompositionEvent"in window,qc=null;ji&&"documentMode"in document&&(qc=document.documentMode);var dL=ji&&"TextEvent"in window&&!qc,KI=ji&&(!a0||qc&&8<qc&&11>=qc),uT=" ",hT=!1;function GI(t,e){switch(t){case"keyup":return hL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YI(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ra=!1;function fL(t,e){switch(t){case"compositionend":return YI(e);case"keypress":return e.which!==32?null:(hT=!0,uT);case"textInput":return t=e.data,t===uT&&hT?null:t;default:return null}}function pL(t,e){if(Ra)return t==="compositionend"||!a0&&GI(t,e)?(t=qI(),tf=i0=fs=null,Ra=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KI&&e.locale!=="ko"?null:e.data;default:return null}}var mL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dT(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mL[t.type]:e==="textarea"}function QI(t,e,n,r){CI(r),e=Vf(e,"onChange"),0<e.length&&(n=new s0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Kc=null,bu=null;function gL(t){aA(t,0)}function $p(t){var e=Oa(t);if(xI(e))return t}function yL(t,e){if(t==="change")return e}var XI=!1;if(ji){var _g;if(ji){var xg="oninput"in document;if(!xg){var fT=document.createElement("div");fT.setAttribute("oninput","return;"),xg=typeof fT.oninput=="function"}_g=xg}else _g=!1;XI=_g&&(!document.documentMode||9<document.documentMode)}function pT(){Kc&&(Kc.detachEvent("onpropertychange",JI),bu=Kc=null)}function JI(t){if(t.propertyName==="value"&&$p(bu)){var e=[];QI(e,bu,t,Z_(t)),RI(gL,e)}}function vL(t,e,n){t==="focusin"?(pT(),Kc=e,bu=n,Kc.attachEvent("onpropertychange",JI)):t==="focusout"&&pT()}function _L(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $p(bu)}function xL(t,e){if(t==="click")return $p(e)}function wL(t,e){if(t==="input"||t==="change")return $p(e)}function bL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nr=typeof Object.is=="function"?Object.is:bL;function Tu(t,e){if(Nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Dy.call(e,i)||!Nr(t[i],e[i]))return!1}return!0}function mT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gT(t,e){var n=mT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mT(n)}}function ZI(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ZI(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function eA(){for(var t=window,e=Rf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rf(t.document)}return e}function l0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TL(t){var e=eA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ZI(n.ownerDocument.documentElement,n)){if(r!==null&&l0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=gT(n,s);var o=gT(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var EL=ji&&"documentMode"in document&&11>=document.documentMode,Na=null,Jy=null,Gc=null,Zy=!1;function yT(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Zy||Na==null||Na!==Rf(r)||(r=Na,"selectionStart"in r&&l0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gc&&Tu(Gc,r)||(Gc=r,r=Vf(Jy,"onSelect"),0<r.length&&(e=new s0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Na)))}function fd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Da={animationend:fd("Animation","AnimationEnd"),animationiteration:fd("Animation","AnimationIteration"),animationstart:fd("Animation","AnimationStart"),transitionend:fd("Transition","TransitionEnd")},wg={},tA={};ji&&(tA=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function Wp(t){if(wg[t])return wg[t];if(!Da[t])return t;var e=Da[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in tA)return wg[t]=e[n];return t}var nA=Wp("animationend"),rA=Wp("animationiteration"),iA=Wp("animationstart"),sA=Wp("transitionend"),oA=new Map,vT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qs(t,e){oA.set(t,e),Zo(e,[t])}for(var bg=0;bg<vT.length;bg++){var Tg=vT[bg],SL=Tg.toLowerCase(),kL=Tg[0].toUpperCase()+Tg.slice(1);qs(SL,"on"+kL)}qs(nA,"onAnimationEnd");qs(rA,"onAnimationIteration");qs(iA,"onAnimationStart");qs("dblclick","onDoubleClick");qs("focusin","onFocus");qs("focusout","onBlur");qs(sA,"onTransitionEnd");ll("onMouseEnter",["mouseout","mouseover"]);ll("onMouseLeave",["mouseout","mouseover"]);ll("onPointerEnter",["pointerout","pointerover"]);ll("onPointerLeave",["pointerout","pointerover"]);Zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ac));function _T(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Sj(r,e,void 0,t),t.currentTarget=null}function aA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;_T(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;_T(i,a,c),s=l}}}if(Df)throw t=Gy,Df=!1,Gy=null,t}function Qe(t,e){var n=e[iv];n===void 0&&(n=e[iv]=new Set);var r=t+"__bubble";n.has(r)||(lA(e,t,2,!1),n.add(r))}function Eg(t,e,n){var r=0;e&&(r|=4),lA(n,t,r,e)}var pd="_reactListening"+Math.random().toString(36).slice(2);function Eu(t){if(!t[pd]){t[pd]=!0,mI.forEach(function(n){n!=="selectionchange"&&(CL.has(n)||Eg(n,!1,t),Eg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pd]||(e[pd]=!0,Eg("selectionchange",!1,e))}}function lA(t,e,n,r){switch(HI(e)){case 1:var i=Bj;break;case 4:i=zj;break;default:i=r0}n=i.bind(null,e,n,t),i=void 0,!Ky||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Sg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=So(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}RI(function(){var c=s,u=Z_(n),f=[];e:{var p=oA.get(t);if(p!==void 0){var m=s0,y=t;switch(t){case"keypress":if(nf(n)===0)break e;case"keydown":case"keyup":m=rL;break;case"focusin":y="focus",m=vg;break;case"focusout":y="blur",m=vg;break;case"beforeblur":case"afterblur":m=vg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=aT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Hj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=oL;break;case nA:case rA:case iA:m=Gj;break;case sA:m=lL;break;case"scroll":m=$j;break;case"wheel":m=uL;break;case"copy":case"cut":case"paste":m=Qj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=cT}var _=(e&4)!==0,x=!_&&t==="scroll",v=_?p!==null?p+"Capture":null:p;_=[];for(var w=c,E;w!==null;){E=w;var P=E.stateNode;if(E.tag===5&&P!==null&&(E=P,v!==null&&(P=vu(w,v),P!=null&&_.push(Su(w,P,E)))),x)break;w=w.return}0<_.length&&(p=new m(p,y,null,n,u),f.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Hy&&(y=n.relatedTarget||n.fromElement)&&(So(y)||y[Li]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?So(y):null,y!==null&&(x=ea(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(_=aT,P="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(_=cT,P="onPointerLeave",v="onPointerEnter",w="pointer"),x=m==null?p:Oa(m),E=y==null?p:Oa(y),p=new _(P,w+"leave",m,n,u),p.target=x,p.relatedTarget=E,P=null,So(u)===c&&(_=new _(v,w+"enter",y,n,u),_.target=E,_.relatedTarget=x,P=_),x=P,m&&y)t:{for(_=m,v=y,w=0,E=_;E;E=xa(E))w++;for(E=0,P=v;P;P=xa(P))E++;for(;0<w-E;)_=xa(_),w--;for(;0<E-w;)v=xa(v),E--;for(;w--;){if(_===v||v!==null&&_===v.alternate)break t;_=xa(_),v=xa(v)}_=null}else _=null;m!==null&&xT(f,p,m,_,!1),y!==null&&x!==null&&xT(f,x,y,_,!0)}}e:{if(p=c?Oa(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var C=yL;else if(dT(p))if(XI)C=wL;else{C=_L;var M=vL}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=xL);if(C&&(C=C(t,c))){QI(f,C,n,u);break e}M&&M(t,p,c),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Uy(p,"number",p.value)}switch(M=c?Oa(c):window,t){case"focusin":(dT(M)||M.contentEditable==="true")&&(Na=M,Jy=c,Gc=null);break;case"focusout":Gc=Jy=Na=null;break;case"mousedown":Zy=!0;break;case"contextmenu":case"mouseup":case"dragend":Zy=!1,yT(f,n,u);break;case"selectionchange":if(EL)break;case"keydown":case"keyup":yT(f,n,u)}var S;if(a0)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ra?GI(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(KI&&n.locale!=="ko"&&(Ra||b!=="onCompositionStart"?b==="onCompositionEnd"&&Ra&&(S=qI()):(fs=u,i0="value"in fs?fs.value:fs.textContent,Ra=!0)),M=Vf(c,b),0<M.length&&(b=new lT(b,t,null,n,u),f.push({event:b,listeners:M}),S?b.data=S:(S=YI(n),S!==null&&(b.data=S)))),(S=dL?fL(t,n):pL(t,n))&&(c=Vf(c,"onBeforeInput"),0<c.length&&(u=new lT("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=S))}aA(f,e)})}function Su(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=vu(t,n),s!=null&&r.unshift(Su(t,s,i)),s=vu(t,e),s!=null&&r.push(Su(t,s,i))),t=t.return}return r}function xa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xT(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=vu(n,s),l!=null&&o.unshift(Su(n,l,a))):i||(l=vu(n,s),l!=null&&o.push(Su(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var IL=/\r\n?/g,AL=/\u0000|\uFFFD/g;function wT(t){return(typeof t=="string"?t:""+t).replace(IL,`
`).replace(AL,"")}function md(t,e,n){if(e=wT(e),wT(t)!==e&&n)throw Error(K(425))}function Ff(){}var ev=null,tv=null;function nv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rv=typeof setTimeout=="function"?setTimeout:void 0,PL=typeof clearTimeout=="function"?clearTimeout:void 0,bT=typeof Promise=="function"?Promise:void 0,RL=typeof queueMicrotask=="function"?queueMicrotask:typeof bT<"u"?function(t){return bT.resolve(null).then(t).catch(NL)}:rv;function NL(t){setTimeout(function(){throw t})}function kg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),wu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);wu(e)}function Es(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function TT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ol=Math.random().toString(36).slice(2),Kr="__reactFiber$"+Ol,ku="__reactProps$"+Ol,Li="__reactContainer$"+Ol,iv="__reactEvents$"+Ol,DL="__reactListeners$"+Ol,OL="__reactHandles$"+Ol;function So(t){var e=t[Kr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Li]||n[Kr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=TT(t);t!==null;){if(n=t[Kr])return n;t=TT(t)}return e}t=n,n=t.parentNode}return null}function dh(t){return t=t[Kr]||t[Li],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Oa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Hp(t){return t[ku]||null}var sv=[],Ma=-1;function Ks(t){return{current:t}}function Je(t){0>Ma||(t.current=sv[Ma],sv[Ma]=null,Ma--)}function Ge(t,e){Ma++,sv[Ma]=t.current,t.current=e}var Ls={},wn=Ks(Ls),Bn=Ks(!1),Bo=Ls;function cl(t,e){var n=t.type.contextTypes;if(!n)return Ls;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zn(t){return t=t.childContextTypes,t!=null}function Uf(){Je(Bn),Je(wn)}function ET(t,e,n){if(wn.current!==Ls)throw Error(K(168));Ge(wn,e),Ge(Bn,n)}function cA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(K(108,vj(t)||"Unknown",i));return ht({},n,r)}function Bf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ls,Bo=wn.current,Ge(wn,t),Ge(Bn,Bn.current),!0}function ST(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=cA(t,e,Bo),r.__reactInternalMemoizedMergedChildContext=t,Je(Bn),Je(wn),Ge(wn,t)):Je(Bn),Ge(Bn,n)}var bi=null,qp=!1,Cg=!1;function uA(t){bi===null?bi=[t]:bi.push(t)}function ML(t){qp=!0,uA(t)}function Gs(){if(!Cg&&bi!==null){Cg=!0;var t=0,e=Le;try{var n=bi;for(Le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bi=null,qp=!1}catch(i){throw bi!==null&&(bi=bi.slice(t+1)),MI(e0,Gs),i}finally{Le=e,Cg=!1}}return null}var ja=[],La=0,zf=null,$f=0,cr=[],ur=0,zo=null,Si=1,ki="";function vo(t,e){ja[La++]=$f,ja[La++]=zf,zf=t,$f=e}function hA(t,e,n){cr[ur++]=Si,cr[ur++]=ki,cr[ur++]=zo,zo=t;var r=Si;t=ki;var i=32-Ir(r)-1;r&=~(1<<i),n+=1;var s=32-Ir(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Si=1<<32-Ir(e)+i|n<<i|r,ki=s+t}else Si=1<<s|n<<i|r,ki=t}function c0(t){t.return!==null&&(vo(t,1),hA(t,1,0))}function u0(t){for(;t===zf;)zf=ja[--La],ja[La]=null,$f=ja[--La],ja[La]=null;for(;t===zo;)zo=cr[--ur],cr[ur]=null,ki=cr[--ur],cr[ur]=null,Si=cr[--ur],cr[ur]=null}var er=null,Qn=null,it=!1,Er=null;function dA(t,e){var n=hr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,er=t,Qn=Es(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,er=t,Qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zo!==null?{id:Si,overflow:ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,er=t,Qn=null,!0):!1;default:return!1}}function ov(t){return(t.mode&1)!==0&&(t.flags&128)===0}function av(t){if(it){var e=Qn;if(e){var n=e;if(!kT(t,e)){if(ov(t))throw Error(K(418));e=Es(n.nextSibling);var r=er;e&&kT(t,e)?dA(r,n):(t.flags=t.flags&-4097|2,it=!1,er=t)}}else{if(ov(t))throw Error(K(418));t.flags=t.flags&-4097|2,it=!1,er=t}}}function CT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;er=t}function gd(t){if(t!==er)return!1;if(!it)return CT(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!nv(t.type,t.memoizedProps)),e&&(e=Qn)){if(ov(t))throw fA(),Error(K(418));for(;e;)dA(t,e),e=Es(e.nextSibling)}if(CT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qn=Es(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qn=null}}else Qn=er?Es(t.stateNode.nextSibling):null;return!0}function fA(){for(var t=Qn;t;)t=Es(t.nextSibling)}function ul(){Qn=er=null,it=!1}function h0(t){Er===null?Er=[t]:Er.push(t)}var jL=qi.ReactCurrentBatchConfig;function fc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function yd(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function IT(t){var e=t._init;return e(t._payload)}function pA(t){function e(v,w){if(t){var E=v.deletions;E===null?(v.deletions=[w],v.flags|=16):E.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function i(v,w){return v=Is(v,w),v.index=0,v.sibling=null,v}function s(v,w,E){return v.index=E,t?(E=v.alternate,E!==null?(E=E.index,E<w?(v.flags|=2,w):E):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,E,P){return w===null||w.tag!==6?(w=Og(E,v.mode,P),w.return=v,w):(w=i(w,E),w.return=v,w)}function l(v,w,E,P){var C=E.type;return C===Pa?u(v,w,E.props.children,P,E.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===rs&&IT(C)===w.type)?(P=i(w,E.props),P.ref=fc(v,w,E),P.return=v,P):(P=uf(E.type,E.key,E.props,null,v.mode,P),P.ref=fc(v,w,E),P.return=v,P)}function c(v,w,E,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=Mg(E,v.mode,P),w.return=v,w):(w=i(w,E.children||[]),w.return=v,w)}function u(v,w,E,P,C){return w===null||w.tag!==7?(w=Mo(E,v.mode,P,C),w.return=v,w):(w=i(w,E),w.return=v,w)}function f(v,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Og(""+w,v.mode,E),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case od:return E=uf(w.type,w.key,w.props,null,v.mode,E),E.ref=fc(v,null,w),E.return=v,E;case Aa:return w=Mg(w,v.mode,E),w.return=v,w;case rs:var P=w._init;return f(v,P(w._payload),E)}if(Cc(w)||lc(w))return w=Mo(w,v.mode,E,null),w.return=v,w;yd(v,w)}return null}function p(v,w,E,P){var C=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return C!==null?null:a(v,w,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case od:return E.key===C?l(v,w,E,P):null;case Aa:return E.key===C?c(v,w,E,P):null;case rs:return C=E._init,p(v,w,C(E._payload),P)}if(Cc(E)||lc(E))return C!==null?null:u(v,w,E,P,null);yd(v,E)}return null}function m(v,w,E,P,C){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(E)||null,a(w,v,""+P,C);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case od:return v=v.get(P.key===null?E:P.key)||null,l(w,v,P,C);case Aa:return v=v.get(P.key===null?E:P.key)||null,c(w,v,P,C);case rs:var M=P._init;return m(v,w,E,M(P._payload),C)}if(Cc(P)||lc(P))return v=v.get(E)||null,u(w,v,P,C,null);yd(w,P)}return null}function y(v,w,E,P){for(var C=null,M=null,S=w,b=w=0,k=null;S!==null&&b<E.length;b++){S.index>b?(k=S,S=null):k=S.sibling;var I=p(v,S,E[b],P);if(I===null){S===null&&(S=k);break}t&&S&&I.alternate===null&&e(v,S),w=s(I,w,b),M===null?C=I:M.sibling=I,M=I,S=k}if(b===E.length)return n(v,S),it&&vo(v,b),C;if(S===null){for(;b<E.length;b++)S=f(v,E[b],P),S!==null&&(w=s(S,w,b),M===null?C=S:M.sibling=S,M=S);return it&&vo(v,b),C}for(S=r(v,S);b<E.length;b++)k=m(S,v,b,E[b],P),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?b:k.key),w=s(k,w,b),M===null?C=k:M.sibling=k,M=k);return t&&S.forEach(function(D){return e(v,D)}),it&&vo(v,b),C}function _(v,w,E,P){var C=lc(E);if(typeof C!="function")throw Error(K(150));if(E=C.call(E),E==null)throw Error(K(151));for(var M=C=null,S=w,b=w=0,k=null,I=E.next();S!==null&&!I.done;b++,I=E.next()){S.index>b?(k=S,S=null):k=S.sibling;var D=p(v,S,I.value,P);if(D===null){S===null&&(S=k);break}t&&S&&D.alternate===null&&e(v,S),w=s(D,w,b),M===null?C=D:M.sibling=D,M=D,S=k}if(I.done)return n(v,S),it&&vo(v,b),C;if(S===null){for(;!I.done;b++,I=E.next())I=f(v,I.value,P),I!==null&&(w=s(I,w,b),M===null?C=I:M.sibling=I,M=I);return it&&vo(v,b),C}for(S=r(v,S);!I.done;b++,I=E.next())I=m(S,v,b,I.value,P),I!==null&&(t&&I.alternate!==null&&S.delete(I.key===null?b:I.key),w=s(I,w,b),M===null?C=I:M.sibling=I,M=I);return t&&S.forEach(function(A){return e(v,A)}),it&&vo(v,b),C}function x(v,w,E,P){if(typeof E=="object"&&E!==null&&E.type===Pa&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case od:e:{for(var C=E.key,M=w;M!==null;){if(M.key===C){if(C=E.type,C===Pa){if(M.tag===7){n(v,M.sibling),w=i(M,E.props.children),w.return=v,v=w;break e}}else if(M.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===rs&&IT(C)===M.type){n(v,M.sibling),w=i(M,E.props),w.ref=fc(v,M,E),w.return=v,v=w;break e}n(v,M);break}else e(v,M);M=M.sibling}E.type===Pa?(w=Mo(E.props.children,v.mode,P,E.key),w.return=v,v=w):(P=uf(E.type,E.key,E.props,null,v.mode,P),P.ref=fc(v,w,E),P.return=v,v=P)}return o(v);case Aa:e:{for(M=E.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(v,w.sibling),w=i(w,E.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=Mg(E,v.mode,P),w.return=v,v=w}return o(v);case rs:return M=E._init,x(v,w,M(E._payload),P)}if(Cc(E))return y(v,w,E,P);if(lc(E))return _(v,w,E,P);yd(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(v,w.sibling),w=i(w,E),w.return=v,v=w):(n(v,w),w=Og(E,v.mode,P),w.return=v,v=w),o(v)):n(v,w)}return x}var hl=pA(!0),mA=pA(!1),Wf=Ks(null),Hf=null,Va=null,d0=null;function f0(){d0=Va=Hf=null}function p0(t){var e=Wf.current;Je(Wf),t._currentValue=e}function lv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Za(t,e){Hf=t,d0=Va=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Un=!0),t.firstContext=null)}function pr(t){var e=t._currentValue;if(d0!==t)if(t={context:t,memoizedValue:e,next:null},Va===null){if(Hf===null)throw Error(K(308));Va=t,Hf.dependencies={lanes:0,firstContext:t}}else Va=Va.next=t;return e}var ko=null;function m0(t){ko===null?ko=[t]:ko.push(t)}function gA(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,m0(e)):(n.next=i.next,i.next=n),e.interleaved=n,Vi(t,r)}function Vi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var is=!1;function g0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ri(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Vi(t,n)}return i=r.interleaved,i===null?(e.next=e,m0(r)):(e.next=i.next,i.next=e),r.interleaved=e,Vi(t,n)}function rf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,t0(t,n)}}function AT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qf(t,e,n,r){var i=t.updateQueue;is=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,_=a;switch(p=e,m=n,_.tag){case 1:if(y=_.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=ht({},f,p);break e;case 2:is=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Wo|=o,t.lanes=o,t.memoizedState=f}}function PT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(K(191,i));i.call(r)}}}var fh={},Qr=Ks(fh),Cu=Ks(fh),Iu=Ks(fh);function Co(t){if(t===fh)throw Error(K(174));return t}function y0(t,e){switch(Ge(Iu,e),Ge(Cu,t),Ge(Qr,fh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zy(e,t)}Je(Qr),Ge(Qr,e)}function dl(){Je(Qr),Je(Cu),Je(Iu)}function vA(t){Co(Iu.current);var e=Co(Qr.current),n=zy(e,t.type);e!==n&&(Ge(Cu,t),Ge(Qr,n))}function v0(t){Cu.current===t&&(Je(Qr),Je(Cu))}var lt=Ks(0);function Kf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ig=[];function _0(){for(var t=0;t<Ig.length;t++)Ig[t]._workInProgressVersionPrimary=null;Ig.length=0}var sf=qi.ReactCurrentDispatcher,Ag=qi.ReactCurrentBatchConfig,$o=0,ut=null,Ot=null,Bt=null,Gf=!1,Yc=!1,Au=0,LL=0;function an(){throw Error(K(321))}function x0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nr(t[n],e[n]))return!1;return!0}function w0(t,e,n,r,i,s){if($o=s,ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sf.current=t===null||t.memoizedState===null?BL:zL,t=n(r,i),Yc){s=0;do{if(Yc=!1,Au=0,25<=s)throw Error(K(301));s+=1,Bt=Ot=null,e.updateQueue=null,sf.current=$L,t=n(r,i)}while(Yc)}if(sf.current=Yf,e=Ot!==null&&Ot.next!==null,$o=0,Bt=Ot=ut=null,Gf=!1,e)throw Error(K(300));return t}function b0(){var t=Au!==0;return Au=0,t}function $r(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?ut.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function mr(){if(Ot===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var e=Bt===null?ut.memoizedState:Bt.next;if(e!==null)Bt=e,Ot=t;else{if(t===null)throw Error(K(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Bt===null?ut.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function Pu(t,e){return typeof e=="function"?e(t):e}function Pg(t){var e=mr(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=Ot,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if(($o&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,ut.lanes|=u,Wo|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Nr(r,e.memoizedState)||(Un=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ut.lanes|=s,Wo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rg(t){var e=mr(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Nr(s,e.memoizedState)||(Un=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function _A(){}function xA(t,e){var n=ut,r=mr(),i=e(),s=!Nr(r.memoizedState,i);if(s&&(r.memoizedState=i,Un=!0),r=r.queue,T0(TA.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,Ru(9,bA.bind(null,n,r,i,e),void 0,null),zt===null)throw Error(K(349));$o&30||wA(n,e,i)}return i}function wA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bA(t,e,n,r){e.value=n,e.getSnapshot=r,EA(e)&&SA(t)}function TA(t,e,n){return n(function(){EA(e)&&SA(t)})}function EA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nr(t,n)}catch{return!0}}function SA(t){var e=Vi(t,1);e!==null&&Ar(e,t,1,-1)}function RT(t){var e=$r();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pu,lastRenderedState:t},e.queue=t,t=t.dispatch=UL.bind(null,ut,t),[e.memoizedState,t]}function Ru(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function kA(){return mr().memoizedState}function of(t,e,n,r){var i=$r();ut.flags|=t,i.memoizedState=Ru(1|e,n,void 0,r===void 0?null:r)}function Kp(t,e,n,r){var i=mr();r=r===void 0?null:r;var s=void 0;if(Ot!==null){var o=Ot.memoizedState;if(s=o.destroy,r!==null&&x0(r,o.deps)){i.memoizedState=Ru(e,n,s,r);return}}ut.flags|=t,i.memoizedState=Ru(1|e,n,s,r)}function NT(t,e){return of(8390656,8,t,e)}function T0(t,e){return Kp(2048,8,t,e)}function CA(t,e){return Kp(4,2,t,e)}function IA(t,e){return Kp(4,4,t,e)}function AA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function PA(t,e,n){return n=n!=null?n.concat([t]):null,Kp(4,4,AA.bind(null,e,t),n)}function E0(){}function RA(t,e){var n=mr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function NA(t,e){var n=mr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function DA(t,e,n){return $o&21?(Nr(n,e)||(n=VI(),ut.lanes|=n,Wo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Un=!0),t.memoizedState=n)}function VL(t,e){var n=Le;Le=n!==0&&4>n?n:4,t(!0);var r=Ag.transition;Ag.transition={};try{t(!1),e()}finally{Le=n,Ag.transition=r}}function OA(){return mr().memoizedState}function FL(t,e,n){var r=Cs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},MA(t))jA(e,n);else if(n=gA(t,e,n,r),n!==null){var i=In();Ar(n,t,r,i),LA(n,e,r)}}function UL(t,e,n){var r=Cs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(MA(t))jA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Nr(a,o)){var l=e.interleaved;l===null?(i.next=i,m0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=gA(t,e,i,r),n!==null&&(i=In(),Ar(n,t,r,i),LA(n,e,r))}}function MA(t){var e=t.alternate;return t===ut||e!==null&&e===ut}function jA(t,e){Yc=Gf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function LA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,t0(t,n)}}var Yf={readContext:pr,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},BL={readContext:pr,useCallback:function(t,e){return $r().memoizedState=[t,e===void 0?null:e],t},useContext:pr,useEffect:NT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,of(4194308,4,AA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return of(4194308,4,t,e)},useInsertionEffect:function(t,e){return of(4,2,t,e)},useMemo:function(t,e){var n=$r();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=$r();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FL.bind(null,ut,t),[r.memoizedState,t]},useRef:function(t){var e=$r();return t={current:t},e.memoizedState=t},useState:RT,useDebugValue:E0,useDeferredValue:function(t){return $r().memoizedState=t},useTransition:function(){var t=RT(!1),e=t[0];return t=VL.bind(null,t[1]),$r().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ut,i=$r();if(it){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),zt===null)throw Error(K(349));$o&30||wA(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,NT(TA.bind(null,r,s,t),[t]),r.flags|=2048,Ru(9,bA.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=$r(),e=zt.identifierPrefix;if(it){var n=ki,r=Si;n=(r&~(1<<32-Ir(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Au++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=LL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zL={readContext:pr,useCallback:RA,useContext:pr,useEffect:T0,useImperativeHandle:PA,useInsertionEffect:CA,useLayoutEffect:IA,useMemo:NA,useReducer:Pg,useRef:kA,useState:function(){return Pg(Pu)},useDebugValue:E0,useDeferredValue:function(t){var e=mr();return DA(e,Ot.memoizedState,t)},useTransition:function(){var t=Pg(Pu)[0],e=mr().memoizedState;return[t,e]},useMutableSource:_A,useSyncExternalStore:xA,useId:OA,unstable_isNewReconciler:!1},$L={readContext:pr,useCallback:RA,useContext:pr,useEffect:T0,useImperativeHandle:PA,useInsertionEffect:CA,useLayoutEffect:IA,useMemo:NA,useReducer:Rg,useRef:kA,useState:function(){return Rg(Pu)},useDebugValue:E0,useDeferredValue:function(t){var e=mr();return Ot===null?e.memoizedState=t:DA(e,Ot.memoizedState,t)},useTransition:function(){var t=Rg(Pu)[0],e=mr().memoizedState;return[t,e]},useMutableSource:_A,useSyncExternalStore:xA,useId:OA,unstable_isNewReconciler:!1};function wr(t,e){if(t&&t.defaultProps){e=ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function cv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Gp={isMounted:function(t){return(t=t._reactInternals)?ea(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=In(),i=Cs(t),s=Ri(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ss(t,s,i),e!==null&&(Ar(e,t,i,r),rf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=In(),i=Cs(t),s=Ri(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ss(t,s,i),e!==null&&(Ar(e,t,i,r),rf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=In(),r=Cs(t),i=Ri(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ss(t,i,r),e!==null&&(Ar(e,t,r,n),rf(e,t,r))}};function DT(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Tu(n,r)||!Tu(i,s):!0}function VA(t,e,n){var r=!1,i=Ls,s=e.contextType;return typeof s=="object"&&s!==null?s=pr(s):(i=zn(e)?Bo:wn.current,r=e.contextTypes,s=(r=r!=null)?cl(t,i):Ls),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Gp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function OT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Gp.enqueueReplaceState(e,e.state,null)}function uv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},g0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=pr(s):(s=zn(e)?Bo:wn.current,i.context=cl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(cv(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Gp.enqueueReplaceState(i,i.state,null),qf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fl(t,e){try{var n="",r=e;do n+=yj(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ng(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var WL=typeof WeakMap=="function"?WeakMap:Map;function FA(t,e,n){n=Ri(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Xf||(Xf=!0,wv=r),hv(t,e)},n}function UA(t,e,n){n=Ri(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){hv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){hv(t,e),typeof r!="function"&&(ks===null?ks=new Set([this]):ks.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function MT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new WL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=iV.bind(null,t,e,n),e.then(t,t))}function jT(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function LT(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ri(-1,1),e.tag=2,Ss(n,e,1))),n.lanes|=1),t)}var HL=qi.ReactCurrentOwner,Un=!1;function kn(t,e,n,r){e.child=t===null?mA(e,null,n,r):hl(e,t.child,n,r)}function VT(t,e,n,r,i){n=n.render;var s=e.ref;return Za(e,i),r=w0(t,e,n,r,s,i),n=b0(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fi(t,e,i)):(it&&n&&c0(e),e.flags|=1,kn(t,e,r,i),e.child)}function FT(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!N0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,BA(t,e,s,r,i)):(t=uf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Tu,n(o,r)&&t.ref===e.ref)return Fi(t,e,i)}return e.flags|=1,t=Is(s,r),t.ref=e.ref,t.return=e,e.child=t}function BA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Tu(s,r)&&t.ref===e.ref)if(Un=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Un=!0);else return e.lanes=t.lanes,Fi(t,e,i)}return dv(t,e,n,r,i)}function zA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Ua,Gn),Gn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ge(Ua,Gn),Gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ge(Ua,Gn),Gn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ge(Ua,Gn),Gn|=r;return kn(t,e,i,n),e.child}function $A(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function dv(t,e,n,r,i){var s=zn(n)?Bo:wn.current;return s=cl(e,s),Za(e,i),n=w0(t,e,n,r,s,i),r=b0(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fi(t,e,i)):(it&&r&&c0(e),e.flags|=1,kn(t,e,n,i),e.child)}function UT(t,e,n,r,i){if(zn(n)){var s=!0;Bf(e)}else s=!1;if(Za(e,i),e.stateNode===null)af(t,e),VA(e,n,r),uv(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=pr(c):(c=zn(n)?Bo:wn.current,c=cl(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&OT(e,o,r,c),is=!1;var p=e.memoizedState;o.state=p,qf(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Bn.current||is?(typeof u=="function"&&(cv(e,n,u,r),l=e.memoizedState),(a=is||DT(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,yA(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:wr(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=pr(l):(l=zn(n)?Bo:wn.current,l=cl(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&OT(e,o,r,l),is=!1,p=e.memoizedState,o.state=p,qf(e,r,o,i);var y=e.memoizedState;a!==f||p!==y||Bn.current||is?(typeof m=="function"&&(cv(e,n,m,r),y=e.memoizedState),(c=is||DT(e,n,c,r,p,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return fv(t,e,n,r,s,i)}function fv(t,e,n,r,i,s){$A(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ST(e,n,!1),Fi(t,e,s);r=e.stateNode,HL.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=hl(e,t.child,null,s),e.child=hl(e,null,a,s)):kn(t,e,a,s),e.memoizedState=r.state,i&&ST(e,n,!0),e.child}function WA(t){var e=t.stateNode;e.pendingContext?ET(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ET(t,e.context,!1),y0(t,e.containerInfo)}function BT(t,e,n,r,i){return ul(),h0(i),e.flags|=256,kn(t,e,n,r),e.child}var pv={dehydrated:null,treeContext:null,retryLane:0};function mv(t){return{baseLanes:t,cachePool:null,transitions:null}}function HA(t,e,n){var r=e.pendingProps,i=lt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ge(lt,i&1),t===null)return av(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Xp(o,r,0,null),t=Mo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=mv(n),e.memoizedState=pv,t):S0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return qL(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Is(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Is(a,s):(s=Mo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?mv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=pv,r}return s=t.child,t=s.sibling,r=Is(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function S0(t,e){return e=Xp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vd(t,e,n,r){return r!==null&&h0(r),hl(e,t.child,null,n),t=S0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qL(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ng(Error(K(422))),vd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Xp({mode:"visible",children:r.children},i,0,null),s=Mo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&hl(e,t.child,null,o),e.child.memoizedState=mv(o),e.memoizedState=pv,s);if(!(e.mode&1))return vd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(K(419)),r=Ng(s,r,void 0),vd(t,e,o,r)}if(a=(o&t.childLanes)!==0,Un||a){if(r=zt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Vi(t,i),Ar(r,t,i,-1))}return R0(),r=Ng(Error(K(421))),vd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=sV.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Qn=Es(i.nextSibling),er=e,it=!0,Er=null,t!==null&&(cr[ur++]=Si,cr[ur++]=ki,cr[ur++]=zo,Si=t.id,ki=t.overflow,zo=e),e=S0(e,r.children),e.flags|=4096,e)}function zT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lv(t.return,e,n)}function Dg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(kn(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zT(t,n,e);else if(t.tag===19)zT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ge(lt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Kf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Dg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Kf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Dg(e,!0,n,null,s);break;case"together":Dg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function af(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Wo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Is(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Is(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KL(t,e,n){switch(e.tag){case 3:WA(e),ul();break;case 5:vA(e);break;case 1:zn(e.type)&&Bf(e);break;case 4:y0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ge(Wf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ge(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?HA(t,e,n):(Ge(lt,lt.current&1),t=Fi(t,e,n),t!==null?t.sibling:null);Ge(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ge(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,zA(t,e,n)}return Fi(t,e,n)}var KA,gv,GA,YA;KA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gv=function(){};GA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Co(Qr.current);var s=null;switch(n){case"input":i=Vy(t,i),r=Vy(t,r),s=[];break;case"select":i=ht({},i,{value:void 0}),r=ht({},r,{value:void 0}),s=[];break;case"textarea":i=By(t,i),r=By(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ff)}$y(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(gu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(gu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Qe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};YA=function(t,e,n,r){n!==r&&(e.flags|=4)};function pc(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function GL(t,e,n){var r=e.pendingProps;switch(u0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return zn(e.type)&&Uf(),ln(e),null;case 3:return r=e.stateNode,dl(),Je(Bn),Je(wn),_0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(gd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Er!==null&&(Ev(Er),Er=null))),gv(t,e),ln(e),null;case 5:v0(e);var i=Co(Iu.current);if(n=e.type,t!==null&&e.stateNode!=null)GA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return ln(e),null}if(t=Co(Qr.current),gd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Kr]=e,r[ku]=s,t=(e.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(i=0;i<Ac.length;i++)Qe(Ac[i],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":Xb(r,s),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Qe("invalid",r);break;case"textarea":Zb(r,s),Qe("invalid",r)}$y(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&md(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&md(r.textContent,a,t),i=["children",""+a]):gu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qe("scroll",r)}switch(n){case"input":ad(r),Jb(r,s,!0);break;case"textarea":ad(r),eT(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ff)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=TI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Kr]=e,t[ku]=r,KA(t,e,!1,!1),e.stateNode=t;e:{switch(o=Wy(n,r),n){case"dialog":Qe("cancel",t),Qe("close",t),i=r;break;case"iframe":case"object":case"embed":Qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ac.length;i++)Qe(Ac[i],t);i=r;break;case"source":Qe("error",t),i=r;break;case"img":case"image":case"link":Qe("error",t),Qe("load",t),i=r;break;case"details":Qe("toggle",t),i=r;break;case"input":Xb(t,r),i=Vy(t,r),Qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ht({},r,{value:void 0}),Qe("invalid",t);break;case"textarea":Zb(t,r),i=By(t,r),Qe("invalid",t);break;default:i=r}$y(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?kI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&EI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&yu(t,l):typeof l=="number"&&yu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Qe("scroll",t):l!=null&&Y_(t,s,l,o))}switch(n){case"input":ad(t),Jb(t,r,!1);break;case"textarea":ad(t),eT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+js(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ya(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ya(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ff)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)YA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Co(Iu.current),Co(Qr.current),gd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Kr]=e,(s=r.nodeValue!==n)&&(t=er,t!==null))switch(t.tag){case 3:md(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&md(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kr]=e,e.stateNode=r}return ln(e),null;case 13:if(Je(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&Qn!==null&&e.mode&1&&!(e.flags&128))fA(),ul(),e.flags|=98560,s=!1;else if(s=gd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[Kr]=e}else ul(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),s=!1}else Er!==null&&(Ev(Er),Er=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?Mt===0&&(Mt=3):R0())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return dl(),gv(t,e),t===null&&Eu(e.stateNode.containerInfo),ln(e),null;case 10:return p0(e.type._context),ln(e),null;case 17:return zn(e.type)&&Uf(),ln(e),null;case 19:if(Je(lt),s=e.memoizedState,s===null)return ln(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)pc(s,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Kf(t),o!==null){for(e.flags|=128,pc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ge(lt,lt.current&1|2),e.child}t=t.sibling}s.tail!==null&&wt()>pl&&(e.flags|=128,r=!0,pc(s,!1),e.lanes=4194304)}else{if(!r)if(t=Kf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!it)return ln(e),null}else 2*wt()-s.renderingStartTime>pl&&n!==1073741824&&(e.flags|=128,r=!0,pc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=wt(),e.sibling=null,n=lt.current,Ge(lt,r?n&1|2:n&1),e):(ln(e),null);case 22:case 23:return P0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gn&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function YL(t,e){switch(u0(e),e.tag){case 1:return zn(e.type)&&Uf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dl(),Je(Bn),Je(wn),_0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return v0(e),null;case 13:if(Je(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));ul()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(lt),null;case 4:return dl(),null;case 10:return p0(e.type._context),null;case 22:case 23:return P0(),null;case 24:return null;default:return null}}var _d=!1,pn=!1,QL=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Fa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yt(t,e,r)}else n.current=null}function yv(t,e,n){try{n()}catch(r){yt(t,e,r)}}var $T=!1;function XL(t,e){if(ev=jf,t=eA(),l0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,p=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(tv={focusedElem:t,selectionRange:n},jf=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,x=y.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?_:wr(e.type,_),x);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(P){yt(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return y=$T,$T=!1,y}function Qc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&yv(e,n,s)}i=i.next}while(i!==r)}}function Yp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function QA(t){var e=t.alternate;e!==null&&(t.alternate=null,QA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Kr],delete e[ku],delete e[iv],delete e[DL],delete e[OL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function XA(t){return t.tag===5||t.tag===3||t.tag===4}function WT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||XA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _v(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ff));else if(r!==4&&(t=t.child,t!==null))for(_v(t,e,n),t=t.sibling;t!==null;)_v(t,e,n),t=t.sibling}function xv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xv(t,e,n),t=t.sibling;t!==null;)xv(t,e,n),t=t.sibling}var Kt=null,Tr=!1;function Zi(t,e,n){for(n=n.child;n!==null;)JA(t,e,n),n=n.sibling}function JA(t,e,n){if(Yr&&typeof Yr.onCommitFiberUnmount=="function")try{Yr.onCommitFiberUnmount(Bp,n)}catch{}switch(n.tag){case 5:pn||Fa(n,e);case 6:var r=Kt,i=Tr;Kt=null,Zi(t,e,n),Kt=r,Tr=i,Kt!==null&&(Tr?(t=Kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kt.removeChild(n.stateNode));break;case 18:Kt!==null&&(Tr?(t=Kt,n=n.stateNode,t.nodeType===8?kg(t.parentNode,n):t.nodeType===1&&kg(t,n),wu(t)):kg(Kt,n.stateNode));break;case 4:r=Kt,i=Tr,Kt=n.stateNode.containerInfo,Tr=!0,Zi(t,e,n),Kt=r,Tr=i;break;case 0:case 11:case 14:case 15:if(!pn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&yv(n,e,o),i=i.next}while(i!==r)}Zi(t,e,n);break;case 1:if(!pn&&(Fa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){yt(n,e,a)}Zi(t,e,n);break;case 21:Zi(t,e,n);break;case 22:n.mode&1?(pn=(r=pn)||n.memoizedState!==null,Zi(t,e,n),pn=r):Zi(t,e,n);break;default:Zi(t,e,n)}}function HT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QL),e.forEach(function(r){var i=oV.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _r(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Kt=a.stateNode,Tr=!1;break e;case 3:Kt=a.stateNode.containerInfo,Tr=!0;break e;case 4:Kt=a.stateNode.containerInfo,Tr=!0;break e}a=a.return}if(Kt===null)throw Error(K(160));JA(s,o,i),Kt=null,Tr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){yt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ZA(e,t),e=e.sibling}function ZA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_r(e,t),Fr(t),r&4){try{Qc(3,t,t.return),Yp(3,t)}catch(_){yt(t,t.return,_)}try{Qc(5,t,t.return)}catch(_){yt(t,t.return,_)}}break;case 1:_r(e,t),Fr(t),r&512&&n!==null&&Fa(n,n.return);break;case 5:if(_r(e,t),Fr(t),r&512&&n!==null&&Fa(n,n.return),t.flags&32){var i=t.stateNode;try{yu(i,"")}catch(_){yt(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&wI(i,s),Wy(a,o);var c=Wy(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?kI(i,f):u==="dangerouslySetInnerHTML"?EI(i,f):u==="children"?yu(i,f):Y_(i,u,f,c)}switch(a){case"input":Fy(i,s);break;case"textarea":bI(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ya(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ya(i,!!s.multiple,s.defaultValue,!0):Ya(i,!!s.multiple,s.multiple?[]:"",!1))}i[ku]=s}catch(_){yt(t,t.return,_)}}break;case 6:if(_r(e,t),Fr(t),r&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){yt(t,t.return,_)}}break;case 3:if(_r(e,t),Fr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wu(e.containerInfo)}catch(_){yt(t,t.return,_)}break;case 4:_r(e,t),Fr(t);break;case 13:_r(e,t),Fr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(I0=wt())),r&4&&HT(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(pn=(c=pn)||u,_r(e,t),pn=c):_r(e,t),Fr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ie=t,u=t.child;u!==null;){for(f=ie=u;ie!==null;){switch(p=ie,m=p.child,p.tag){case 0:case 11:case 14:case 15:Qc(4,p,p.return);break;case 1:Fa(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){yt(r,n,_)}}break;case 5:Fa(p,p.return);break;case 22:if(p.memoizedState!==null){KT(f);continue}}m!==null?(m.return=p,ie=m):KT(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=SI("display",o))}catch(_){yt(t,t.return,_)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(_){yt(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:_r(e,t),Fr(t),r&4&&HT(t);break;case 21:break;default:_r(e,t),Fr(t)}}function Fr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(XA(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(yu(i,""),r.flags&=-33);var s=WT(t);xv(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=WT(t);_v(t,a,o);break;default:throw Error(K(161))}}catch(l){yt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JL(t,e,n){ie=t,eP(t)}function eP(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||_d;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||pn;a=_d;var c=pn;if(_d=o,(pn=l)&&!c)for(ie=i;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?GT(i):l!==null?(l.return=o,ie=l):GT(i);for(;s!==null;)ie=s,eP(s),s=s.sibling;ie=i,_d=a,pn=c}qT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ie=s):qT(t)}}function qT(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pn||Yp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:wr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&PT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}PT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&wu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}pn||e.flags&512&&vv(e)}catch(p){yt(e,e.return,p)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function KT(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function GT(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Yp(4,e)}catch(l){yt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){yt(e,i,l)}}var s=e.return;try{vv(e)}catch(l){yt(e,s,l)}break;case 5:var o=e.return;try{vv(e)}catch(l){yt(e,o,l)}}}catch(l){yt(e,e.return,l)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var ZL=Math.ceil,Qf=qi.ReactCurrentDispatcher,k0=qi.ReactCurrentOwner,fr=qi.ReactCurrentBatchConfig,Pe=0,zt=null,At=null,Jt=0,Gn=0,Ua=Ks(0),Mt=0,Nu=null,Wo=0,Qp=0,C0=0,Xc=null,Ln=null,I0=0,pl=1/0,wi=null,Xf=!1,wv=null,ks=null,xd=!1,ps=null,Jf=0,Jc=0,bv=null,lf=-1,cf=0;function In(){return Pe&6?wt():lf!==-1?lf:lf=wt()}function Cs(t){return t.mode&1?Pe&2&&Jt!==0?Jt&-Jt:jL.transition!==null?(cf===0&&(cf=VI()),cf):(t=Le,t!==0||(t=window.event,t=t===void 0?16:HI(t.type)),t):1}function Ar(t,e,n,r){if(50<Jc)throw Jc=0,bv=null,Error(K(185));uh(t,n,r),(!(Pe&2)||t!==zt)&&(t===zt&&(!(Pe&2)&&(Qp|=n),Mt===4&&os(t,Jt)),$n(t,r),n===1&&Pe===0&&!(e.mode&1)&&(pl=wt()+500,qp&&Gs()))}function $n(t,e){var n=t.callbackNode;jj(t,e);var r=Mf(t,t===zt?Jt:0);if(r===0)n!==null&&rT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&rT(n),e===1)t.tag===0?ML(YT.bind(null,t)):uA(YT.bind(null,t)),RL(function(){!(Pe&6)&&Gs()}),n=null;else{switch(FI(r)){case 1:n=e0;break;case 4:n=jI;break;case 16:n=Of;break;case 536870912:n=LI;break;default:n=Of}n=lP(n,tP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tP(t,e){if(lf=-1,cf=0,Pe&6)throw Error(K(327));var n=t.callbackNode;if(el()&&t.callbackNode!==n)return null;var r=Mf(t,t===zt?Jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Zf(t,r);else{e=r;var i=Pe;Pe|=2;var s=rP();(zt!==t||Jt!==e)&&(wi=null,pl=wt()+500,Oo(t,e));do try{nV();break}catch(a){nP(t,a)}while(!0);f0(),Qf.current=s,Pe=i,At!==null?e=0:(zt=null,Jt=0,e=Mt)}if(e!==0){if(e===2&&(i=Yy(t),i!==0&&(r=i,e=Tv(t,i))),e===1)throw n=Nu,Oo(t,0),os(t,r),$n(t,wt()),n;if(e===6)os(t,r);else{if(i=t.current.alternate,!(r&30)&&!eV(i)&&(e=Zf(t,r),e===2&&(s=Yy(t),s!==0&&(r=s,e=Tv(t,s))),e===1))throw n=Nu,Oo(t,0),os(t,r),$n(t,wt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:_o(t,Ln,wi);break;case 3:if(os(t,r),(r&130023424)===r&&(e=I0+500-wt(),10<e)){if(Mf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){In(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=rv(_o.bind(null,t,Ln,wi),e);break}_o(t,Ln,wi);break;case 4:if(os(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ir(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZL(r/1960))-r,10<r){t.timeoutHandle=rv(_o.bind(null,t,Ln,wi),r);break}_o(t,Ln,wi);break;case 5:_o(t,Ln,wi);break;default:throw Error(K(329))}}}return $n(t,wt()),t.callbackNode===n?tP.bind(null,t):null}function Tv(t,e){var n=Xc;return t.current.memoizedState.isDehydrated&&(Oo(t,e).flags|=256),t=Zf(t,e),t!==2&&(e=Ln,Ln=n,e!==null&&Ev(e)),t}function Ev(t){Ln===null?Ln=t:Ln.push.apply(Ln,t)}function eV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Nr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function os(t,e){for(e&=~C0,e&=~Qp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ir(e),r=1<<n;t[n]=-1,e&=~r}}function YT(t){if(Pe&6)throw Error(K(327));el();var e=Mf(t,0);if(!(e&1))return $n(t,wt()),null;var n=Zf(t,e);if(t.tag!==0&&n===2){var r=Yy(t);r!==0&&(e=r,n=Tv(t,r))}if(n===1)throw n=Nu,Oo(t,0),os(t,e),$n(t,wt()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_o(t,Ln,wi),$n(t,wt()),null}function A0(t,e){var n=Pe;Pe|=1;try{return t(e)}finally{Pe=n,Pe===0&&(pl=wt()+500,qp&&Gs())}}function Ho(t){ps!==null&&ps.tag===0&&!(Pe&6)&&el();var e=Pe;Pe|=1;var n=fr.transition,r=Le;try{if(fr.transition=null,Le=1,t)return t()}finally{Le=r,fr.transition=n,Pe=e,!(Pe&6)&&Gs()}}function P0(){Gn=Ua.current,Je(Ua)}function Oo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,PL(n)),At!==null)for(n=At.return;n!==null;){var r=n;switch(u0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Uf();break;case 3:dl(),Je(Bn),Je(wn),_0();break;case 5:v0(r);break;case 4:dl();break;case 13:Je(lt);break;case 19:Je(lt);break;case 10:p0(r.type._context);break;case 22:case 23:P0()}n=n.return}if(zt=t,At=t=Is(t.current,null),Jt=Gn=e,Mt=0,Nu=null,C0=Qp=Wo=0,Ln=Xc=null,ko!==null){for(e=0;e<ko.length;e++)if(n=ko[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ko=null}return t}function nP(t,e){do{var n=At;try{if(f0(),sf.current=Yf,Gf){for(var r=ut.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Gf=!1}if($o=0,Bt=Ot=ut=null,Yc=!1,Au=0,k0.current=null,n===null||n.return===null){Mt=1,Nu=e,At=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Jt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=jT(o);if(m!==null){m.flags&=-257,LT(m,o,a,s,e),m.mode&1&&MT(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var _=new Set;_.add(l),e.updateQueue=_}else y.add(l);break e}else{if(!(e&1)){MT(s,c,e),R0();break e}l=Error(K(426))}}else if(it&&a.mode&1){var x=jT(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),LT(x,o,a,s,e),h0(fl(l,a));break e}}s=l=fl(l,a),Mt!==4&&(Mt=2),Xc===null?Xc=[s]:Xc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=FA(s,l,e);AT(s,v);break e;case 1:a=l;var w=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ks===null||!ks.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=UA(s,a,e);AT(s,P);break e}}s=s.return}while(s!==null)}sP(n)}catch(C){e=C,At===n&&n!==null&&(At=n=n.return);continue}break}while(!0)}function rP(){var t=Qf.current;return Qf.current=Yf,t===null?Yf:t}function R0(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),zt===null||!(Wo&268435455)&&!(Qp&268435455)||os(zt,Jt)}function Zf(t,e){var n=Pe;Pe|=2;var r=rP();(zt!==t||Jt!==e)&&(wi=null,Oo(t,e));do try{tV();break}catch(i){nP(t,i)}while(!0);if(f0(),Pe=n,Qf.current=r,At!==null)throw Error(K(261));return zt=null,Jt=0,Mt}function tV(){for(;At!==null;)iP(At)}function nV(){for(;At!==null&&!Cj();)iP(At)}function iP(t){var e=aP(t.alternate,t,Gn);t.memoizedProps=t.pendingProps,e===null?sP(t):At=e,k0.current=null}function sP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=YL(n,e),n!==null){n.flags&=32767,At=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,At=null;return}}else if(n=GL(n,e,Gn),n!==null){At=n;return}if(e=e.sibling,e!==null){At=e;return}At=e=t}while(e!==null);Mt===0&&(Mt=5)}function _o(t,e,n){var r=Le,i=fr.transition;try{fr.transition=null,Le=1,rV(t,e,n,r)}finally{fr.transition=i,Le=r}return null}function rV(t,e,n,r){do el();while(ps!==null);if(Pe&6)throw Error(K(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Lj(t,s),t===zt&&(At=zt=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xd||(xd=!0,lP(Of,function(){return el(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=fr.transition,fr.transition=null;var o=Le;Le=1;var a=Pe;Pe|=4,k0.current=null,XL(t,n),ZA(n,t),TL(tv),jf=!!ev,tv=ev=null,t.current=n,JL(n),Ij(),Pe=a,Le=o,fr.transition=s}else t.current=n;if(xd&&(xd=!1,ps=t,Jf=i),s=t.pendingLanes,s===0&&(ks=null),Rj(n.stateNode),$n(t,wt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Xf)throw Xf=!1,t=wv,wv=null,t;return Jf&1&&t.tag!==0&&el(),s=t.pendingLanes,s&1?t===bv?Jc++:(Jc=0,bv=t):Jc=0,Gs(),null}function el(){if(ps!==null){var t=FI(Jf),e=fr.transition,n=Le;try{if(fr.transition=null,Le=16>t?16:t,ps===null)var r=!1;else{if(t=ps,ps=null,Jf=0,Pe&6)throw Error(K(331));var i=Pe;for(Pe|=4,ie=t.current;ie!==null;){var s=ie,o=s.child;if(ie.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ie=c;ie!==null;){var u=ie;switch(u.tag){case 0:case 11:case 15:Qc(8,u,s)}var f=u.child;if(f!==null)f.return=u,ie=f;else for(;ie!==null;){u=ie;var p=u.sibling,m=u.return;if(QA(u),u===c){ie=null;break}if(p!==null){p.return=m,ie=p;break}ie=m}}}var y=s.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var x=_.sibling;_.sibling=null,_=x}while(_!==null)}}ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ie=o;else e:for(;ie!==null;){if(s=ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Qc(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,ie=v;break e}ie=s.return}}var w=t.current;for(ie=w;ie!==null;){o=ie;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ie=E;else e:for(o=w;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Yp(9,a)}}catch(C){yt(a,a.return,C)}if(a===o){ie=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,ie=P;break e}ie=a.return}}if(Pe=i,Gs(),Yr&&typeof Yr.onPostCommitFiberRoot=="function")try{Yr.onPostCommitFiberRoot(Bp,t)}catch{}r=!0}return r}finally{Le=n,fr.transition=e}}return!1}function QT(t,e,n){e=fl(n,e),e=FA(t,e,1),t=Ss(t,e,1),e=In(),t!==null&&(uh(t,1,e),$n(t,e))}function yt(t,e,n){if(t.tag===3)QT(t,t,n);else for(;e!==null;){if(e.tag===3){QT(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ks===null||!ks.has(r))){t=fl(n,t),t=UA(e,t,1),e=Ss(e,t,1),t=In(),e!==null&&(uh(e,1,t),$n(e,t));break}}e=e.return}}function iV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=In(),t.pingedLanes|=t.suspendedLanes&n,zt===t&&(Jt&n)===n&&(Mt===4||Mt===3&&(Jt&130023424)===Jt&&500>wt()-I0?Oo(t,0):C0|=n),$n(t,e)}function oP(t,e){e===0&&(t.mode&1?(e=ud,ud<<=1,!(ud&130023424)&&(ud=4194304)):e=1);var n=In();t=Vi(t,e),t!==null&&(uh(t,e,n),$n(t,n))}function sV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),oP(t,n)}function oV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),oP(t,n)}var aP;aP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bn.current)Un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Un=!1,KL(t,e,n);Un=!!(t.flags&131072)}else Un=!1,it&&e.flags&1048576&&hA(e,$f,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;af(t,e),t=e.pendingProps;var i=cl(e,wn.current);Za(e,n),i=w0(null,e,r,t,i,n);var s=b0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zn(r)?(s=!0,Bf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,g0(e),i.updater=Gp,e.stateNode=i,i._reactInternals=e,uv(e,r,t,n),e=fv(null,e,r,!0,s,n)):(e.tag=0,it&&s&&c0(e),kn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(af(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=lV(r),t=wr(r,t),i){case 0:e=dv(null,e,r,t,n);break e;case 1:e=UT(null,e,r,t,n);break e;case 11:e=VT(null,e,r,t,n);break e;case 14:e=FT(null,e,r,wr(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),dv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),UT(t,e,r,i,n);case 3:e:{if(WA(e),t===null)throw Error(K(387));r=e.pendingProps,s=e.memoizedState,i=s.element,yA(t,e),qf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=fl(Error(K(423)),e),e=BT(t,e,r,n,i);break e}else if(r!==i){i=fl(Error(K(424)),e),e=BT(t,e,r,n,i);break e}else for(Qn=Es(e.stateNode.containerInfo.firstChild),er=e,it=!0,Er=null,n=mA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ul(),r===i){e=Fi(t,e,n);break e}kn(t,e,r,n)}e=e.child}return e;case 5:return vA(e),t===null&&av(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,nv(r,i)?o=null:s!==null&&nv(r,s)&&(e.flags|=32),$A(t,e),kn(t,e,o,n),e.child;case 6:return t===null&&av(e),null;case 13:return HA(t,e,n);case 4:return y0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hl(e,null,r,n):kn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),VT(t,e,r,i,n);case 7:return kn(t,e,e.pendingProps,n),e.child;case 8:return kn(t,e,e.pendingProps.children,n),e.child;case 12:return kn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ge(Wf,r._currentValue),r._currentValue=o,s!==null)if(Nr(s.value,o)){if(s.children===i.children&&!Bn.current){e=Fi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ri(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),lv(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),lv(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Za(e,n),i=pr(i),r=r(i),e.flags|=1,kn(t,e,r,n),e.child;case 14:return r=e.type,i=wr(r,e.pendingProps),i=wr(r.type,i),FT(t,e,r,i,n);case 15:return BA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wr(r,i),af(t,e),e.tag=1,zn(r)?(t=!0,Bf(e)):t=!1,Za(e,n),VA(e,r,i),uv(e,r,i,n),fv(null,e,r,!0,t,n);case 19:return qA(t,e,n);case 22:return zA(t,e,n)}throw Error(K(156,e.tag))};function lP(t,e){return MI(t,e)}function aV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(t,e,n,r){return new aV(t,e,n,r)}function N0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lV(t){if(typeof t=="function")return N0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===X_)return 11;if(t===J_)return 14}return 2}function Is(t,e){var n=t.alternate;return n===null?(n=hr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function uf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")N0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Pa:return Mo(n.children,i,s,e);case Q_:o=8,i|=8;break;case Oy:return t=hr(12,n,e,i|2),t.elementType=Oy,t.lanes=s,t;case My:return t=hr(13,n,e,i),t.elementType=My,t.lanes=s,t;case jy:return t=hr(19,n,e,i),t.elementType=jy,t.lanes=s,t;case vI:return Xp(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gI:o=10;break e;case yI:o=9;break e;case X_:o=11;break e;case J_:o=14;break e;case rs:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=hr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Mo(t,e,n,r){return t=hr(7,t,r,e),t.lanes=n,t}function Xp(t,e,n,r){return t=hr(22,t,r,e),t.elementType=vI,t.lanes=n,t.stateNode={isHidden:!1},t}function Og(t,e,n){return t=hr(6,t,null,e),t.lanes=n,t}function Mg(t,e,n){return e=hr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cV(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mg(0),this.expirationTimes=mg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function D0(t,e,n,r,i,s,o,a,l){return t=new cV(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=hr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},g0(s),t}function uV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Aa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function cP(t){if(!t)return Ls;t=t._reactInternals;e:{if(ea(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(zn(n))return cA(t,n,e)}return e}function uP(t,e,n,r,i,s,o,a,l){return t=D0(n,r,!0,t,i,s,o,a,l),t.context=cP(null),n=t.current,r=In(),i=Cs(n),s=Ri(r,i),s.callback=e??null,Ss(n,s,i),t.current.lanes=i,uh(t,i,r),$n(t,r),t}function Jp(t,e,n,r){var i=e.current,s=In(),o=Cs(i);return n=cP(n),e.context===null?e.context=n:e.pendingContext=n,e=Ri(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ss(i,e,o),t!==null&&(Ar(t,i,o,s),rf(t,i,o)),o}function ep(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function XT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function O0(t,e){XT(t,e),(t=t.alternate)&&XT(t,e)}function hV(){return null}var hP=typeof reportError=="function"?reportError:function(t){console.error(t)};function M0(t){this._internalRoot=t}Zp.prototype.render=M0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Jp(t,e,null,null)};Zp.prototype.unmount=M0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ho(function(){Jp(null,t,null,null)}),e[Li]=null}};function Zp(t){this._internalRoot=t}Zp.prototype.unstable_scheduleHydration=function(t){if(t){var e=zI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ss.length&&e!==0&&e<ss[n].priority;n++);ss.splice(n,0,t),n===0&&WI(t)}};function j0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function em(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function JT(){}function dV(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ep(o);s.call(c)}}var o=uP(e,r,t,0,null,!1,!1,"",JT);return t._reactRootContainer=o,t[Li]=o.current,Eu(t.nodeType===8?t.parentNode:t),Ho(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=ep(l);a.call(c)}}var l=D0(t,0,!1,null,null,!1,!1,"",JT);return t._reactRootContainer=l,t[Li]=l.current,Eu(t.nodeType===8?t.parentNode:t),Ho(function(){Jp(e,l,n,r)}),l}function tm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=ep(o);a.call(l)}}Jp(e,o,t,i)}else o=dV(n,e,t,i,r);return ep(o)}UI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ic(e.pendingLanes);n!==0&&(t0(e,n|1),$n(e,wt()),!(Pe&6)&&(pl=wt()+500,Gs()))}break;case 13:Ho(function(){var r=Vi(t,1);if(r!==null){var i=In();Ar(r,t,1,i)}}),O0(t,1)}};n0=function(t){if(t.tag===13){var e=Vi(t,134217728);if(e!==null){var n=In();Ar(e,t,134217728,n)}O0(t,134217728)}};BI=function(t){if(t.tag===13){var e=Cs(t),n=Vi(t,e);if(n!==null){var r=In();Ar(n,t,e,r)}O0(t,e)}};zI=function(){return Le};$I=function(t,e){var n=Le;try{return Le=t,e()}finally{Le=n}};qy=function(t,e,n){switch(e){case"input":if(Fy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Hp(r);if(!i)throw Error(K(90));xI(r),Fy(r,i)}}}break;case"textarea":bI(t,n);break;case"select":e=n.value,e!=null&&Ya(t,!!n.multiple,e,!1)}};AI=A0;PI=Ho;var fV={usingClientEntryPoint:!1,Events:[dh,Oa,Hp,CI,II,A0]},mc={findFiberByHostInstance:So,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pV={bundleType:mc.bundleType,version:mc.version,rendererPackageName:mc.rendererPackageName,rendererConfig:mc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=DI(t),t===null?null:t.stateNode},findFiberByHostInstance:mc.findFiberByHostInstance||hV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{Bp=wd.inject(pV),Yr=wd}catch{}}ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fV;ir.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!j0(e))throw Error(K(200));return uV(t,e,null,n)};ir.createRoot=function(t,e){if(!j0(t))throw Error(K(299));var n=!1,r="",i=hP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=D0(t,1,!1,null,null,n,!1,r,i),t[Li]=e.current,Eu(t.nodeType===8?t.parentNode:t),new M0(e)};ir.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=DI(e),t=t===null?null:t.stateNode,t};ir.flushSync=function(t){return Ho(t)};ir.hydrate=function(t,e,n){if(!em(e))throw Error(K(200));return tm(null,t,e,!0,n)};ir.hydrateRoot=function(t,e,n){if(!j0(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=hP;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=uP(e,null,t,1,n??null,i,!1,s,o),t[Li]=e.current,Eu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Zp(e)};ir.render=function(t,e,n){if(!em(e))throw Error(K(200));return tm(null,t,e,!1,n)};ir.unmountComponentAtNode=function(t){if(!em(t))throw Error(K(40));return t._reactRootContainer?(Ho(function(){tm(null,null,t,!1,function(){t._reactRootContainer=null,t[Li]=null})}),!0):!1};ir.unstable_batchedUpdates=A0;ir.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!em(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return tm(t,e,n,!1,r)};ir.version="18.3.1-next-f1338f8080-20240426";function dP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dP)}catch(t){console.error(t)}}dP(),dI.exports=ir;var mV=dI.exports,ZT=mV;Ny.createRoot=ZT.createRoot,Ny.hydrateRoot=ZT.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Du(){return Du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Du.apply(this,arguments)}var ms;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ms||(ms={}));const eE="popstate";function gV(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=ta(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Sv("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:tp(s))}function r(i,s){L0(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return vV(e,n,r,t)}function St(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function L0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yV(){return Math.random().toString(36).substr(2,8)}function tE(t,e){return{usr:t.state,key:t.key,idx:e}}function Sv(t,e,n,r){return n===void 0&&(n=null),Du({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ta(e):e,{state:n,key:e&&e.key||r||yV()})}function tp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ta(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function vV(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ms.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Du({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=ms.Pop;let x=u(),v=x==null?null:x-c;c=x,l&&l({action:a,location:_.location,delta:v})}function p(x,v){a=ms.Push;let w=Sv(_.location,x,v);n&&n(w,x),c=u()+1;let E=tE(w,c),P=_.createHref(w);try{o.pushState(E,"",P)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(P)}s&&l&&l({action:a,location:_.location,delta:1})}function m(x,v){a=ms.Replace;let w=Sv(_.location,x,v);n&&n(w,x),c=u();let E=tE(w,c),P=_.createHref(w);o.replaceState(E,"",P),s&&l&&l({action:a,location:_.location,delta:0})}function y(x){let v=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof x=="string"?x:tp(x);return w=w.replace(/ $/,"%20"),St(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let _={get action(){return a},get location(){return t(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(eE,f),l=x,()=>{i.removeEventListener(eE,f),l=null}},createHref(x){return e(i,x)},createURL:y,encodeLocation(x){let v=y(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(x){return o.go(x)}};return _}var nE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(nE||(nE={}));function _V(t,e,n){return n===void 0&&(n="/"),xV(t,e,n)}function xV(t,e,n,r){let i=typeof e=="string"?ta(e):e,s=V0(i.pathname||"/",n);if(s==null)return null;let o=fP(t);wV(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=DV(s);a=PV(o[l],c)}return a}function fP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(St(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=As([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(St(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),fP(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:IV(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of pP(s.path))i(s,o,l)}),e}function pP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=pP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function wV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:AV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const bV=/^:[\w-]+$/,TV=3,EV=2,SV=1,kV=10,CV=-2,rE=t=>t==="*";function IV(t,e){let n=t.split("/"),r=n.length;return n.some(rE)&&(r+=CV),e&&(r+=EV),n.filter(i=>!rE(i)).reduce((i,s)=>i+(bV.test(s)?TV:s===""?SV:kV),r)}function AV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function PV(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",f=RV({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:As([s,f.pathname]),pathnameBase:LV(As([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=As([s,f.pathnameBase]))}return o}function RV(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=NV(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,f)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let _=a[f]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const y=a[f];return m&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function NV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),L0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function DV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return L0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function V0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function OV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ta(t):t;return{pathname:n?n.startsWith("/")?n:MV(n,e):e,search:VV(r),hash:FV(i)}}function MV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function jg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function jV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function F0(t,e){let n=jV(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function U0(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ta(t):(i=Du({},t),St(!i.pathname||!i.pathname.includes("?"),jg("?","pathname","search",i)),St(!i.pathname||!i.pathname.includes("#"),jg("#","pathname","hash",i)),St(!i.search||!i.search.includes("#"),jg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=OV(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const As=t=>t.join("/").replace(/\/\/+/g,"/"),LV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function UV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mP=["post","put","patch","delete"];new Set(mP);const BV=["get",...mP];new Set(BV);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ou.apply(this,arguments)}const B0=O.createContext(null),zV=O.createContext(null),Ys=O.createContext(null),nm=O.createContext(null),ai=O.createContext({outlet:null,matches:[],isDataRoute:!1}),gP=O.createContext(null);function $V(t,e){let{relative:n}=e===void 0?{}:e;Ml()||St(!1);let{basename:r,navigator:i}=O.useContext(Ys),{hash:s,pathname:o,search:a}=_P(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:As([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ml(){return O.useContext(nm)!=null}function Ki(){return Ml()||St(!1),O.useContext(nm).location}function yP(t){O.useContext(Ys).static||O.useLayoutEffect(t)}function Wt(){let{isDataRoute:t}=O.useContext(ai);return t?iF():WV()}function WV(){Ml()||St(!1);let t=O.useContext(B0),{basename:e,future:n,navigator:r}=O.useContext(Ys),{matches:i}=O.useContext(ai),{pathname:s}=Ki(),o=JSON.stringify(F0(i,n.v7_relativeSplatPath)),a=O.useRef(!1);return yP(()=>{a.current=!0}),O.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=U0(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:As([e,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[e,r,o,s,t])}const HV=O.createContext(null);function qV(t){let e=O.useContext(ai).outlet;return e&&O.createElement(HV.Provider,{value:t},e)}function vP(){let{matches:t}=O.useContext(ai),e=t[t.length-1];return e?e.params:{}}function _P(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(Ys),{matches:i}=O.useContext(ai),{pathname:s}=Ki(),o=JSON.stringify(F0(i,r.v7_relativeSplatPath));return O.useMemo(()=>U0(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function KV(t,e){return GV(t,e)}function GV(t,e,n,r){Ml()||St(!1);let{navigator:i}=O.useContext(Ys),{matches:s}=O.useContext(ai),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ki(),u;if(e){var f;let x=typeof e=="string"?ta(e):e;l==="/"||(f=x.pathname)!=null&&f.startsWith(l)||St(!1),u=x}else u=c;let p=u.pathname||"/",m=p;if(l!=="/"){let x=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=_V(t,{pathname:m}),_=ZV(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:As([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:As([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&_?O.createElement(nm.Provider,{value:{location:Ou({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ms.Pop}},_):_}function YV(){let t=rF(),e=UV(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const QV=O.createElement(YV,null);class XV extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(ai.Provider,{value:this.props.routeContext},O.createElement(gP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function JV(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(B0);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(ai.Provider,{value:e},r)}function ZV(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);u>=0||St(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:m}=n,y=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,p)=>{let m,y=!1,_=null,x=null;n&&(m=a&&f.route.id?a[f.route.id]:void 0,_=f.route.errorElement||QV,l&&(c<0&&p===0?(sF("route-fallback"),y=!0,x=null):c===p&&(y=!0,x=f.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),w=()=>{let E;return m?E=_:y?E=x:f.route.Component?E=O.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=u,O.createElement(JV,{match:f,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?O.createElement(XV,{location:n.location,revalidation:n.revalidation,component:_,error:m,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var xP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(xP||{}),wP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(wP||{});function eF(t){let e=O.useContext(B0);return e||St(!1),e}function tF(t){let e=O.useContext(zV);return e||St(!1),e}function nF(t){let e=O.useContext(ai);return e||St(!1),e}function bP(t){let e=nF(),n=e.matches[e.matches.length-1];return n.route.id||St(!1),n.route.id}function rF(){var t;let e=O.useContext(gP),n=tF(),r=bP();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function iF(){let{router:t}=eF(xP.UseNavigateStable),e=bP(wP.UseNavigateStable),n=O.useRef(!1);return yP(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ou({fromRouteId:e},s)))},[t,e])}const iE={};function sF(t,e,n){iE[t]||(iE[t]=!0)}function oF(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function hf(t){let{to:e,replace:n,state:r,relative:i}=t;Ml()||St(!1);let{future:s,static:o}=O.useContext(Ys),{matches:a}=O.useContext(ai),{pathname:l}=Ki(),c=Wt(),u=U0(e,F0(a,s.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(u);return O.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function TP(t){return qV(t.context)}function vt(t){St(!1)}function aF(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ms.Pop,navigator:s,static:o=!1,future:a}=t;Ml()&&St(!1);let l=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:l,navigator:s,static:o,future:Ou({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ta(r));let{pathname:u="/",search:f="",hash:p="",state:m=null,key:y="default"}=r,_=O.useMemo(()=>{let x=V0(u,l);return x==null?null:{location:{pathname:x,search:f,hash:p,state:m,key:y},navigationType:i}},[l,u,f,p,m,y,i]);return _==null?null:O.createElement(Ys.Provider,{value:c},O.createElement(nm.Provider,{children:n,value:_}))}function lF(t){let{children:e,location:n}=t;return KV(kv(e),n)}new Promise(()=>{});function kv(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let s=[...e,i];if(r.type===O.Fragment){n.push.apply(n,kv(r.props.children,s));return}r.type!==vt&&St(!1),!r.props.index||!r.props.children||St(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=kv(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cv(){return Cv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cv.apply(this,arguments)}function cF(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function uF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function hF(t,e){return t.button===0&&(!e||e==="_self")&&!uF(t)}const dF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fF="6";try{window.__reactRouterVersion=fF}catch{}const pF="startTransition",sE=ij[pF];function mF(t){let{basename:e,children:n,future:r,window:i}=t,s=O.useRef();s.current==null&&(s.current=gV({window:i,v5Compat:!0}));let o=s.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=O.useCallback(f=>{c&&sE?sE(()=>l(f)):l(f)},[l,c]);return O.useLayoutEffect(()=>o.listen(u),[o,u]),O.useEffect(()=>oF(r),[r]),O.createElement(aF,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const gF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Io=O.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:f}=e,p=cF(e,dF),{basename:m}=O.useContext(Ys),y,_=!1;if(typeof c=="string"&&yF.test(c)&&(y=c,gF))try{let E=new URL(window.location.href),P=c.startsWith("//")?new URL(E.protocol+c):new URL(c),C=V0(P.pathname,m);P.origin===E.origin&&C!=null?c=C+P.search+P.hash:_=!0}catch{}let x=$V(c,{relative:i}),v=vF(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:f});function w(E){r&&r(E),E.defaultPrevented||v(E)}return O.createElement("a",Cv({},p,{href:y||x,onClick:_||s?r:w,ref:n,target:l}))});var oE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(oE||(oE={}));var aE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(aE||(aE={}));function vF(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Wt(),c=Ki(),u=_P(t,{relative:o});return O.useCallback(f=>{if(hF(f,n)){f.preventDefault();let p=r!==void 0?r:tp(c)===tp(u);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}var lE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},_F=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},SP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[u],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(EP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_F(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new xF;const p=s<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const y=c<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wF=function(t){const e=EP(t);return SP.encodeByteArray(e,!0)},np=function(t){return wF(t).replace(/\./g,"")},kP=function(t){try{return SP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=()=>bF().__FIREBASE_DEFAULTS__,EF=()=>{if(typeof process>"u"||typeof lE>"u")return;const t=lE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},SF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kP(t[1]);return e&&JSON.parse(e)},rm=()=>{try{return TF()||EF()||SF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CP=t=>{var e,n;return(n=(e=rm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},IP=t=>{const e=CP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},AP=()=>{var t;return(t=rm())===null||t===void 0?void 0:t.config},PP=t=>{var e;return(e=rm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[np(JSON.stringify(n)),np(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function IF(){var t;const e=(t=rm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NF(){const t=bn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function DF(){return!IF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OF(){try{return typeof indexedDB=="object"}catch{return!1}}function MF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF="FirebaseError";class li extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jF,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ph.prototype.create)}}class ph{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?LF(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new li(i,a,r)}}function LF(t,e){return t.replace(VF,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const VF=/\{\$([^}]+)}/g;function FF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function rp(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(cE(s)&&cE(o)){if(!rp(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function cE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Rc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function UF(t,e){const n=new BF(t,e);return n.subscribe.bind(n)}class BF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Lg),i.error===void 0&&(i.error=Lg),i.complete===void 0&&(i.complete=Lg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Lg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t){return t&&t._delegate?t._delegate:t}class Vs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HF(e))try{this.getOrInitializeService({instanceIdentifier:xo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xo){return this.instances.has(e)}getOptions(e=xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xo){return this.component?this.component.multipleInstances?e:xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WF(t){return t===xo?void 0:t}function HF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $F(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const KF={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},GF=ke.INFO,YF={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},QF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=YF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class z0{constructor(e){this.name=e,this._logLevel=GF,this._logHandler=QF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const XF=(t,e)=>e.some(n=>t instanceof n);let uE,hE;function JF(){return uE||(uE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZF(){return hE||(hE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NP=new WeakMap,Iv=new WeakMap,DP=new WeakMap,Vg=new WeakMap,$0=new WeakMap;function e4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ps(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&NP.set(n,t)}).catch(()=>{}),$0.set(e,t),e}function t4(t){if(Iv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Iv.set(t,e)}let Av={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Iv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||DP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function n4(t){Av=t(Av)}function r4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fg(this),e,...n);return DP.set(r,e.sort?e.sort():[e]),Ps(r)}:ZF().includes(t)?function(...e){return t.apply(Fg(this),e),Ps(NP.get(this))}:function(...e){return Ps(t.apply(Fg(this),e))}}function i4(t){return typeof t=="function"?r4(t):(t instanceof IDBTransaction&&t4(t),XF(t,JF())?new Proxy(t,Av):t)}function Ps(t){if(t instanceof IDBRequest)return e4(t);if(Vg.has(t))return Vg.get(t);const e=i4(t);return e!==t&&(Vg.set(t,e),$0.set(e,t)),e}const Fg=t=>$0.get(t);function s4(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ps(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ps(o.result),l.oldVersion,l.newVersion,Ps(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const o4=["get","getKey","getAll","getAllKeys","count"],a4=["put","add","delete","clear"],Ug=new Map;function dE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ug.get(e))return Ug.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=a4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||o4.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Ug.set(e,s),s}n4(t=>({...t,get:(e,n,r)=>dE(e,n)||t.get(e,n,r),has:(e,n)=>!!dE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(c4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function c4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pv="@firebase/app",fE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new z0("@firebase/app"),u4="@firebase/app-compat",h4="@firebase/analytics-compat",d4="@firebase/analytics",f4="@firebase/app-check-compat",p4="@firebase/app-check",m4="@firebase/auth",g4="@firebase/auth-compat",y4="@firebase/database",v4="@firebase/data-connect",_4="@firebase/database-compat",x4="@firebase/functions",w4="@firebase/functions-compat",b4="@firebase/installations",T4="@firebase/installations-compat",E4="@firebase/messaging",S4="@firebase/messaging-compat",k4="@firebase/performance",C4="@firebase/performance-compat",I4="@firebase/remote-config",A4="@firebase/remote-config-compat",P4="@firebase/storage",R4="@firebase/storage-compat",N4="@firebase/firestore",D4="@firebase/vertexai-preview",O4="@firebase/firestore-compat",M4="firebase",j4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="[DEFAULT]",L4={[Pv]:"fire-core",[u4]:"fire-core-compat",[d4]:"fire-analytics",[h4]:"fire-analytics-compat",[p4]:"fire-app-check",[f4]:"fire-app-check-compat",[m4]:"fire-auth",[g4]:"fire-auth-compat",[y4]:"fire-rtdb",[v4]:"fire-data-connect",[_4]:"fire-rtdb-compat",[x4]:"fire-fn",[w4]:"fire-fn-compat",[b4]:"fire-iid",[T4]:"fire-iid-compat",[E4]:"fire-fcm",[S4]:"fire-fcm-compat",[k4]:"fire-perf",[C4]:"fire-perf-compat",[I4]:"fire-rc",[A4]:"fire-rc-compat",[P4]:"fire-gcs",[R4]:"fire-gcs-compat",[N4]:"fire-fst",[O4]:"fire-fst-compat",[D4]:"fire-vertex","fire-js":"fire-js",[M4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=new Map,V4=new Map,Nv=new Map;function pE(t,e){try{t.container.addComponent(e)}catch(n){Ui.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qo(t){const e=t.name;if(Nv.has(e))return Ui.debug(`There were multiple attempts to register component ${e}.`),!1;Nv.set(e,t);for(const n of ip.values())pE(n,t);for(const n of V4.values())pE(n,t);return!0}function im(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ci(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rs=new ph("app","Firebase",F4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=j4;function OP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Rv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Rs.create("bad-app-name",{appName:String(i)});if(n||(n=AP()),!n)throw Rs.create("no-options");const s=ip.get(i);if(s){if(rp(n,s.options)&&rp(r,s.config))return s;throw Rs.create("duplicate-app",{appName:i})}const o=new qF(i);for(const l of Nv.values())o.addComponent(l);const a=new U4(n,r,o);return ip.set(i,a),a}function W0(t=Rv){const e=ip.get(t);if(!e&&t===Rv&&AP())return OP();if(!e)throw Rs.create("no-app",{appName:t});return e}function Xr(t,e,n){var r;let i=(r=L4[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ui.warn(a.join(" "));return}qo(new Vs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4="firebase-heartbeat-database",z4=1,Mu="firebase-heartbeat-store";let Bg=null;function MP(){return Bg||(Bg=s4(B4,z4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rs.create("idb-open",{originalErrorMessage:t.message})})),Bg}async function $4(t){try{const n=(await MP()).transaction(Mu),r=await n.objectStore(Mu).get(jP(t));return await n.done,r}catch(e){if(e instanceof li)Ui.warn(e.message);else{const n=Rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ui.warn(n.message)}}}async function mE(t,e){try{const r=(await MP()).transaction(Mu,"readwrite");await r.objectStore(Mu).put(e,jP(t)),await r.done}catch(n){if(n instanceof li)Ui.warn(n.message);else{const r=Rs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ui.warn(r.message)}}}function jP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=1024,H4=30*24*60*60*1e3;class q4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new G4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=gE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=H4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ui.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gE(),{heartbeatsToSend:r,unsentEntries:i}=K4(this._heartbeatsCache.heartbeats),s=np(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ui.warn(n),""}}}function gE(){return new Date().toISOString().substring(0,10)}function K4(t,e=W4){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),yE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),yE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class G4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OF()?MF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return mE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return mE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function yE(t){return np(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(t){qo(new Vs("platform-logger",e=>new l4(e),"PRIVATE")),qo(new Vs("heartbeat",e=>new q4(e),"PRIVATE")),Xr(Pv,fE,t),Xr(Pv,fE,"esm2017"),Xr("fire-js","")}Y4("");function H0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function LP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Q4=LP,VP=new ph("auth","Firebase",LP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=new z0("@firebase/auth");function X4(t,...e){sp.logLevel<=ke.WARN&&sp.warn(`Auth (${na}): ${t}`,...e)}function df(t,...e){sp.logLevel<=ke.ERROR&&sp.error(`Auth (${na}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t,...e){throw q0(t,...e)}function Jr(t,...e){return q0(t,...e)}function FP(t,e,n){const r=Object.assign(Object.assign({},Q4()),{[e]:n});return new ph("auth","Firebase",r).create(e,{appName:t.name})}function Ns(t){return FP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function q0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return VP.create(t,...e)}function ue(t,e,...n){if(!t)throw q0(e,...n)}function Ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw df(e),new Error(e)}function Bi(t,e){t||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function J4(){return vE()==="http:"||vE()==="https:"}function vE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J4()||PF()||"connection"in navigator)?navigator.onLine:!0}function eU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.shortDelay=e,this.longDelay=n,Bi(n>e,"Short delay should be less than long delay!"),this.isMobile=CF()||RF()}get(){return Z4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t,e){Bi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nU=new gh(3e4,6e4);function Qs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ci(t,e,n,r,i={}){return BP(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=mh(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return AF()||(c.referrerPolicy="no-referrer"),UP.fetch()(zP(t,t.config.apiHost,n,a),c)})}async function BP(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tU),e);try{const i=new iU(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw bd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw bd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw bd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw bd(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw FP(t,u,c);Dr(t,u)}}catch(i){if(i instanceof li)throw i;Dr(t,"network-request-failed",{message:String(i)})}}async function sm(t,e,n,r,i={}){const s=await ci(t,e,n,r,i);return"mfaPendingCredential"in s&&Dr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function zP(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?K0(t.config,i):`${t.config.apiScheme}://${i}`}function rU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Jr(this.auth,"network-request-failed")),nU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Jr(t,e,r);return i.customData._tokenResponse=n,i}function _E(t){return t!==void 0&&t.enterprise!==void 0}class sU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function oU(t,e){return ci(t,"GET","/v2/recaptchaConfig",Qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aU(t,e){return ci(t,"POST","/v1/accounts:delete",e)}async function $P(t,e){return ci(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lU(t,e=!1){const n=ze(t),r=await n.getIdToken(e),i=G0(r);ue(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Zc(zg(i.auth_time)),issuedAtTime:Zc(zg(i.iat)),expirationTime:Zc(zg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function zg(t){return Number(t)*1e3}function G0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return df("JWT malformed, contained fewer than 3 sections"),null;try{const i=kP(n);return i?JSON.parse(i):(df("Failed to decode base64 JWT payload"),null)}catch(i){return df("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function xE(t){const e=G0(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof li&&cU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zc(this.lastLoginAt),this.creationTime=Zc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function op(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ml(t,$P(n,{idToken:r}));ue(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?WP(s.providerUserInfo):[],a=dU(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ov(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function hU(t){const e=ze(t);await op(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function WP(t){return t.map(e=>{var{providerId:n}=e,r=H0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fU(t,e){const n=await BP(t,{},async()=>{const r=mh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=zP(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",UP.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pU(t,e){return ci(t,"POST","/v2/accounts:revokeToken",Qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):xE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=xE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await fU(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new tl;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ue(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tl,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ai{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=H0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ov(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ml(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lU(this,e)}reload(){return hU(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await op(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ci(this.auth.app))return Promise.reject(Ns(this.auth));const e=await this.getIdToken();return await ml(this,aU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:P,isAnonymous:C,providerData:M,stsTokenManager:S}=n;ue(E&&S,e,"internal-error");const b=tl.fromJSON(this.name,S);ue(typeof E=="string",e,"internal-error"),es(f,e.name),es(p,e.name),ue(typeof P=="boolean",e,"internal-error"),ue(typeof C=="boolean",e,"internal-error"),es(m,e.name),es(y,e.name),es(_,e.name),es(x,e.name),es(v,e.name),es(w,e.name);const k=new Ai({uid:E,auth:e,email:p,emailVerified:P,displayName:f,isAnonymous:C,photoURL:y,phoneNumber:m,tenantId:_,stsTokenManager:b,createdAt:v,lastLoginAt:w});return M&&Array.isArray(M)&&(k.providerData=M.map(I=>Object.assign({},I))),x&&(k._redirectEventId=x),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new tl;i.updateFromServerResponse(n);const s=new Ai({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await op(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ue(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?WP(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new tl;a.updateFromIdToken(r);const l=new Ai({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ov(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=new Map;function Pi(t){Bi(t instanceof Function,"Expected a class definition");let e=wE.get(t);return e?(Bi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}HP.type="NONE";const bE=HP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(t,e,n){return`firebase:${t}:${e}:${n}`}class nl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ff(this.userKey,i.apiKey,s),this.fullPersistenceKey=ff("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ai._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new nl(Pi(bE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Pi(bE);const o=ff(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const f=Ai._fromJSON(e,u);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new nl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new nl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XP(e))return"Blackberry";if(JP(e))return"Webos";if(KP(e))return"Safari";if((e.includes("chrome/")||GP(e))&&!e.includes("edge/"))return"Chrome";if(QP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qP(t=bn()){return/firefox\//i.test(t)}function KP(t=bn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GP(t=bn()){return/crios\//i.test(t)}function YP(t=bn()){return/iemobile/i.test(t)}function QP(t=bn()){return/android/i.test(t)}function XP(t=bn()){return/blackberry/i.test(t)}function JP(t=bn()){return/webos/i.test(t)}function Y0(t=bn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mU(t=bn()){var e;return Y0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gU(){return NF()&&document.documentMode===10}function ZP(t=bn()){return Y0(t)||QP(t)||JP(t)||XP(t)||/windows phone/i.test(t)||YP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(t,e=[]){let n;switch(t){case"Browser":n=TE(bn());break;case"Worker":n=`${TE(bn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${na}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vU(t,e={}){return ci(t,"GET","/v2/passwordPolicy",Qs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=6;class xU{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_U,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new EE(this),this.idTokenSubscription=new EE(this),this.beforeStateQueue=new yU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=VP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await nl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $P(this,{idToken:e}),r=await Ai._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ci(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await op(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ci(this.app))return Promise.reject(Ns(this));const n=e?ze(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ci(this.app)?Promise.reject(Ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ci(this.app)?Promise.reject(Ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vU(this),n=new xU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ph("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pi(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await nl.create(this,[Pi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&X4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ra(t){return ze(t)}class EE{constructor(e){this.auth=e,this.observer=null,this.addObserver=UF(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let om={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bU(t){om=t}function tR(t){return om.loadJS(t)}function TU(){return om.recaptchaEnterpriseScript}function EU(){return om.gapiScript}function SU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const kU="recaptcha-enterprise",CU="NO_RECAPTCHA";class IU{constructor(e){this.type=kU,this.auth=ra(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{oU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new sU(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;_E(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(CU)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&_E(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=TU();l.length!==0&&(l+=a),tR(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function SE(t,e,n,r=!1){const i=new IU(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Mv(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await SE(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await SE(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AU(t,e){const n=im(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(rp(s,e??{}))return i;Dr(i,"already-initialized")}return n.initialize({options:e})}function PU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RU(t,e,n){const r=ra(t);ue(r._canInitEmulator,r,"emulator-config-failed"),ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=nR(e),{host:o,port:a}=NU(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),DU()}function nR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function NU(t){const e=nR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:kE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:kE(o)}}}function kE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function DU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,n){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}async function OU(t,e){return ci(t,"POST","/v1/accounts:update",e)}async function MU(t,e){return ci(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jU(t,e){return sm(t,"POST","/v1/accounts:signInWithPassword",Qs(t,e))}async function LU(t,e){return ci(t,"POST","/v1/accounts:sendOobCode",Qs(t,e))}async function VU(t,e){return LU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(t,e){return sm(t,"POST","/v1/accounts:signInWithEmailLink",Qs(t,e))}async function UU(t,e){return sm(t,"POST","/v1/accounts:signInWithEmailLink",Qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends Q0{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new ju(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ju(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mv(e,n,"signInWithPassword",jU);case"emailLink":return FU(e,{email:this._email,oobCode:this._password});default:Dr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Mv(e,r,"signUpPassword",MU);case"emailLink":return UU(e,{idToken:n,email:this._email,oobCode:this._password});default:Dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(t,e){return sm(t,"POST","/v1/accounts:signInWithIdp",Qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BU="http://localhost";class Ko extends Q0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=H0(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ko(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return rl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,rl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,rl(e,n)}buildRequest(){const e={requestUri:BU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $U(t){const e=Pc(Rc(t)).link,n=e?Pc(Rc(e)).deep_link_id:null,r=Pc(Rc(t)).deep_link_id;return(r?Pc(Rc(r)).link:null)||r||n||e||t}class X0{constructor(e){var n,r,i,s,o,a;const l=Pc(Rc(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,f=zU((i=l.mode)!==null&&i!==void 0?i:null);ue(c&&u&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=$U(e);try{return new X0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.providerId=jl.PROVIDER_ID}static credential(e,n){return ju._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=X0.parseLink(n);return ue(r,"argument-error"),ju._fromEmailAndCode(e,r.code,r.tenantId)}}jl.PROVIDER_ID="password";jl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh extends rR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends yh{constructor(){super("facebook.com")}static credential(e){return Ko._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.FACEBOOK_SIGN_IN_METHOD="facebook.com";as.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends yh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ko._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ls.credential(n,r)}catch{return null}}}ls.GOOGLE_SIGN_IN_METHOD="google.com";ls.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends yh{constructor(){super("github.com")}static credential(e){return Ko._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.GITHUB_SIGN_IN_METHOD="github.com";cs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends yh{constructor(){super("twitter.com")}static credential(e,n){return Ko._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return us.credential(n,r)}catch{return null}}}us.TWITTER_SIGN_IN_METHOD="twitter.com";us.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ai._fromIdTokenResponse(e,r,i),o=CE(r);return new gl({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=CE(r);return new gl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function CE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends li{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ap.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ap(e,n,r,i)}}function iR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ap._fromErrorAndOperation(t,s,e,r):s})}async function WU(t,e,n=!1){const r=await ml(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HU(t,e,n=!1){const{auth:r}=t;if(Ci(r.app))return Promise.reject(Ns(r));const i="reauthenticate";try{const s=await ml(t,iR(r,i,e,t),n);ue(s.idToken,r,"internal-error");const o=G0(s.idToken);ue(o,r,"internal-error");const{sub:a}=o;return ue(t.uid===a,r,"user-mismatch"),gl._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Dr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(t,e,n=!1){if(Ci(t.app))return Promise.reject(Ns(t));const r="signIn",i=await iR(t,r,e),s=await gl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function qU(t,e){return sR(ra(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KU(t){const e=ra(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function GU(t,e,n){const r=ra(t);await Mv(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",VU)}function oR(t,e,n){return Ci(t.app)?Promise.reject(Ns(t)):qU(ze(t),jl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&KU(t),r})}function YU(t,e){return QU(ze(t),null,e)}async function QU(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await ml(t,OU(r,s));await t._updateTokensIfNecessary(o,!0)}function XU(t,e,n,r){return ze(t).onIdTokenChanged(e,n,r)}function JU(t,e,n){return ze(t).beforeAuthStateChanged(e,n)}function ZU(t,e,n,r){return ze(t).onAuthStateChanged(e,n,r)}function Lu(t){return ze(t).signOut()}const lp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(lp,"1"),this.storage.removeItem(lp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=1e3,tB=10;class lR extends aR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);gU()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,tB):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},eB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lR.type="LOCAL";const nB=lR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR extends aR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cR.type="SESSION";const uR=cR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new am(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await rB(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}am.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=J0("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(){return window}function sB(t){Zr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(){return typeof Zr().WorkerGlobalScope<"u"&&typeof Zr().importScripts=="function"}async function oB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function lB(){return hR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR="firebaseLocalStorageDb",cB=1,cp="firebaseLocalStorage",fR="fbase_key";class vh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lm(t,e){return t.transaction([cp],e?"readwrite":"readonly").objectStore(cp)}function uB(){const t=indexedDB.deleteDatabase(dR);return new vh(t).toPromise()}function jv(){const t=indexedDB.open(dR,cB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(cp,{keyPath:fR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(cp)?e(r):(r.close(),await uB(),e(await jv()))})})}async function IE(t,e,n){const r=lm(t,!0).put({[fR]:e,value:n});return new vh(r).toPromise()}async function hB(t,e){const n=lm(t,!1).get(e),r=await new vh(n).toPromise();return r===void 0?null:r.value}function AE(t,e){const n=lm(t,!0).delete(e);return new vh(n).toPromise()}const dB=800,fB=3;class pR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>fB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=am._getInstance(lB()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await oB(),!this.activeServiceWorker)return;this.sender=new iB(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jv();return await IE(e,lp,"1"),await AE(e,lp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>IE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>hB(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>AE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=lm(i,!1).getAll();return new vh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pR.type="LOCAL";const pB=pR;new gh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mB(t,e){return e?Pi(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0 extends Q0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return rl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function gB(t){return sR(t.auth,new Z0(t),t.bypassAuthState)}function yB(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),HU(n,new Z0(t),t.bypassAuthState)}async function vB(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),WU(n,new Z0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gB;case"linkViaPopup":case"linkViaRedirect":return vB;case"reauthViaPopup":case"reauthViaRedirect":return yB;default:Dr(this.auth,"internal-error")}}resolve(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _B=new gh(2e3,1e4);class Ba extends mR{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ba.currentPopupAction&&Ba.currentPopupAction.cancel(),Ba.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){Bi(this.filter.length===1,"Popup operations only handle one event");const e=J0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ba.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_B.get())};e()}}Ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB="pendingRedirect",pf=new Map;class wB extends mR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pf.get(this.auth._key());if(!e){try{const r=await bB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pf.set(this.auth._key(),e)}return this.bypassAuthState||pf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bB(t,e){const n=SB(e),r=EB(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function TB(t,e){pf.set(t._key(),e)}function EB(t){return Pi(t._redirectPersistence)}function SB(t){return ff(xB,t.config.apiKey,t.name)}async function kB(t,e,n=!1){if(Ci(t.app))return Promise.reject(Ns(t));const r=ra(t),i=mB(r,e),o=await new wB(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB=10*60*1e3;class IB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!AB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!gR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Jr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CB&&this.cachedEventUids.clear(),this.cachedEventUids.has(PE(e))}saveEventToCache(e){this.cachedEventUids.add(PE(e)),this.lastProcessedEventTime=Date.now()}}function PE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function AB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PB(t,e={}){return ci(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NB=/^https?/;async function DB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await PB(t);for(const n of e)try{if(OB(n))return}catch{}Dr(t,"unauthorized-domain")}function OB(t){const e=Dv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!NB.test(n))return!1;if(RB.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB=new gh(3e4,6e4);function RE(){const t=Zr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jB(t){return new Promise((e,n)=>{var r,i,s;function o(){RE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{RE(),n(Jr(t,"network-request-failed"))},timeout:MB.get()})}if(!((i=(r=Zr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Zr().gapi)===null||s===void 0)&&s.load)o();else{const a=SU("iframefcb");return Zr()[a]=()=>{gapi.load?o():n(Jr(t,"network-request-failed"))},tR(`${EU()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw mf=null,e})}let mf=null;function LB(t){return mf=mf||jB(t),mf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VB=new gh(5e3,15e3),FB="__/auth/iframe",UB="emulator/auth/iframe",BB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $B(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?K0(e,UB):`https://${t.config.authDomain}/${FB}`,r={apiKey:e.apiKey,appName:t.name,v:na},i=zB.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${mh(r).slice(1)}`}async function WB(t){const e=await LB(t),n=Zr().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:$B(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BB,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Jr(t,"network-request-failed"),a=Zr().setTimeout(()=>{s(o)},VB.get());function l(){Zr().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qB=500,KB=600,GB="_blank",YB="http://localhost";class NE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QB(t,e,n,r=qB,i=KB){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},HB),{width:r.toString(),height:i.toString(),top:s,left:o}),c=bn().toLowerCase();n&&(a=GP(c)?GB:n),qP(c)&&(e=e||YB,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(mU(c)&&a!=="_self")return XB(e||"",a),new NE(null);const f=window.open(e||"",a,u);ue(f,t,"popup-blocked");try{f.focus()}catch{}return new NE(f)}function XB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JB="__/auth/handler",ZB="emulator/auth/handler",e5=encodeURIComponent("fac");async function DE(t,e,n,r,i,s){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:na,eventId:i};if(e instanceof rR){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",FF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))o[u]=f}if(e instanceof yh){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${e5}=${encodeURIComponent(l)}`:"";return`${t5(t)}?${mh(a).slice(1)}${c}`}function t5({config:t}){return t.emulator?K0(t,ZB):`https://${t.authDomain}/${JB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="webStorageSupport";class n5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uR,this._completeRedirectFn=kB,this._overrideRedirectResult=TB}async _openPopup(e,n,r,i){var s;Bi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await DE(e,n,r,Dv(),i);return QB(e,o,J0())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await DE(e,n,r,Dv(),i);return sB(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Bi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await WB(e),r=new IB(e);return n.register("authEvent",i=>(ue(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send($g,{type:$g},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[$g];o!==void 0&&n(!!o),Dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZP()||KP()||Y0()}}const r5=n5;var OE="@firebase/auth",ME="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function o5(t){qo(new Vs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eR(t)},c=new wU(r,i,s,l);return PU(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qo(new Vs("auth-internal",e=>{const n=ra(e.getProvider("auth").getImmediate());return(r=>new i5(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xr(OE,ME,s5(t)),Xr(OE,ME,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5=5*60,l5=PP("authIdTokenMaxAge")||a5;let jE=null;const c5=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>l5)return;const i=n==null?void 0:n.token;jE!==i&&(jE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ui(t=W0()){const e=im(t,"auth");if(e.isInitialized())return e.getImmediate();const n=AU(t,{popupRedirectResolver:r5,persistence:[pB,nB,uR]}),r=PP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=c5(s.toString());JU(n,o,()=>o(n.currentUser)),XU(n,a=>o(a))}}const i=CP("auth");return i&&RU(n,`http://${i}`),n}function u5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}bU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Jr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",u5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});o5("Browser");var LE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jo,yR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,b){function k(){}k.prototype=b.prototype,S.D=b.prototype,S.prototype=new k,S.prototype.constructor=S,S.C=function(I,D,A){for(var R=Array(arguments.length-2),$=2;$<arguments.length;$++)R[$-2]=arguments[$];return b.prototype[D].apply(I,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,b,k){k||(k=0);var I=Array(16);if(typeof b=="string")for(var D=0;16>D;++D)I[D]=b.charCodeAt(k++)|b.charCodeAt(k++)<<8|b.charCodeAt(k++)<<16|b.charCodeAt(k++)<<24;else for(D=0;16>D;++D)I[D]=b[k++]|b[k++]<<8|b[k++]<<16|b[k++]<<24;b=S.g[0],k=S.g[1],D=S.g[2];var A=S.g[3],R=b+(A^k&(D^A))+I[0]+3614090360&4294967295;b=k+(R<<7&4294967295|R>>>25),R=A+(D^b&(k^D))+I[1]+3905402710&4294967295,A=b+(R<<12&4294967295|R>>>20),R=D+(k^A&(b^k))+I[2]+606105819&4294967295,D=A+(R<<17&4294967295|R>>>15),R=k+(b^D&(A^b))+I[3]+3250441966&4294967295,k=D+(R<<22&4294967295|R>>>10),R=b+(A^k&(D^A))+I[4]+4118548399&4294967295,b=k+(R<<7&4294967295|R>>>25),R=A+(D^b&(k^D))+I[5]+1200080426&4294967295,A=b+(R<<12&4294967295|R>>>20),R=D+(k^A&(b^k))+I[6]+2821735955&4294967295,D=A+(R<<17&4294967295|R>>>15),R=k+(b^D&(A^b))+I[7]+4249261313&4294967295,k=D+(R<<22&4294967295|R>>>10),R=b+(A^k&(D^A))+I[8]+1770035416&4294967295,b=k+(R<<7&4294967295|R>>>25),R=A+(D^b&(k^D))+I[9]+2336552879&4294967295,A=b+(R<<12&4294967295|R>>>20),R=D+(k^A&(b^k))+I[10]+4294925233&4294967295,D=A+(R<<17&4294967295|R>>>15),R=k+(b^D&(A^b))+I[11]+2304563134&4294967295,k=D+(R<<22&4294967295|R>>>10),R=b+(A^k&(D^A))+I[12]+1804603682&4294967295,b=k+(R<<7&4294967295|R>>>25),R=A+(D^b&(k^D))+I[13]+4254626195&4294967295,A=b+(R<<12&4294967295|R>>>20),R=D+(k^A&(b^k))+I[14]+2792965006&4294967295,D=A+(R<<17&4294967295|R>>>15),R=k+(b^D&(A^b))+I[15]+1236535329&4294967295,k=D+(R<<22&4294967295|R>>>10),R=b+(D^A&(k^D))+I[1]+4129170786&4294967295,b=k+(R<<5&4294967295|R>>>27),R=A+(k^D&(b^k))+I[6]+3225465664&4294967295,A=b+(R<<9&4294967295|R>>>23),R=D+(b^k&(A^b))+I[11]+643717713&4294967295,D=A+(R<<14&4294967295|R>>>18),R=k+(A^b&(D^A))+I[0]+3921069994&4294967295,k=D+(R<<20&4294967295|R>>>12),R=b+(D^A&(k^D))+I[5]+3593408605&4294967295,b=k+(R<<5&4294967295|R>>>27),R=A+(k^D&(b^k))+I[10]+38016083&4294967295,A=b+(R<<9&4294967295|R>>>23),R=D+(b^k&(A^b))+I[15]+3634488961&4294967295,D=A+(R<<14&4294967295|R>>>18),R=k+(A^b&(D^A))+I[4]+3889429448&4294967295,k=D+(R<<20&4294967295|R>>>12),R=b+(D^A&(k^D))+I[9]+568446438&4294967295,b=k+(R<<5&4294967295|R>>>27),R=A+(k^D&(b^k))+I[14]+3275163606&4294967295,A=b+(R<<9&4294967295|R>>>23),R=D+(b^k&(A^b))+I[3]+4107603335&4294967295,D=A+(R<<14&4294967295|R>>>18),R=k+(A^b&(D^A))+I[8]+1163531501&4294967295,k=D+(R<<20&4294967295|R>>>12),R=b+(D^A&(k^D))+I[13]+2850285829&4294967295,b=k+(R<<5&4294967295|R>>>27),R=A+(k^D&(b^k))+I[2]+4243563512&4294967295,A=b+(R<<9&4294967295|R>>>23),R=D+(b^k&(A^b))+I[7]+1735328473&4294967295,D=A+(R<<14&4294967295|R>>>18),R=k+(A^b&(D^A))+I[12]+2368359562&4294967295,k=D+(R<<20&4294967295|R>>>12),R=b+(k^D^A)+I[5]+4294588738&4294967295,b=k+(R<<4&4294967295|R>>>28),R=A+(b^k^D)+I[8]+2272392833&4294967295,A=b+(R<<11&4294967295|R>>>21),R=D+(A^b^k)+I[11]+1839030562&4294967295,D=A+(R<<16&4294967295|R>>>16),R=k+(D^A^b)+I[14]+4259657740&4294967295,k=D+(R<<23&4294967295|R>>>9),R=b+(k^D^A)+I[1]+2763975236&4294967295,b=k+(R<<4&4294967295|R>>>28),R=A+(b^k^D)+I[4]+1272893353&4294967295,A=b+(R<<11&4294967295|R>>>21),R=D+(A^b^k)+I[7]+4139469664&4294967295,D=A+(R<<16&4294967295|R>>>16),R=k+(D^A^b)+I[10]+3200236656&4294967295,k=D+(R<<23&4294967295|R>>>9),R=b+(k^D^A)+I[13]+681279174&4294967295,b=k+(R<<4&4294967295|R>>>28),R=A+(b^k^D)+I[0]+3936430074&4294967295,A=b+(R<<11&4294967295|R>>>21),R=D+(A^b^k)+I[3]+3572445317&4294967295,D=A+(R<<16&4294967295|R>>>16),R=k+(D^A^b)+I[6]+76029189&4294967295,k=D+(R<<23&4294967295|R>>>9),R=b+(k^D^A)+I[9]+3654602809&4294967295,b=k+(R<<4&4294967295|R>>>28),R=A+(b^k^D)+I[12]+3873151461&4294967295,A=b+(R<<11&4294967295|R>>>21),R=D+(A^b^k)+I[15]+530742520&4294967295,D=A+(R<<16&4294967295|R>>>16),R=k+(D^A^b)+I[2]+3299628645&4294967295,k=D+(R<<23&4294967295|R>>>9),R=b+(D^(k|~A))+I[0]+4096336452&4294967295,b=k+(R<<6&4294967295|R>>>26),R=A+(k^(b|~D))+I[7]+1126891415&4294967295,A=b+(R<<10&4294967295|R>>>22),R=D+(b^(A|~k))+I[14]+2878612391&4294967295,D=A+(R<<15&4294967295|R>>>17),R=k+(A^(D|~b))+I[5]+4237533241&4294967295,k=D+(R<<21&4294967295|R>>>11),R=b+(D^(k|~A))+I[12]+1700485571&4294967295,b=k+(R<<6&4294967295|R>>>26),R=A+(k^(b|~D))+I[3]+2399980690&4294967295,A=b+(R<<10&4294967295|R>>>22),R=D+(b^(A|~k))+I[10]+4293915773&4294967295,D=A+(R<<15&4294967295|R>>>17),R=k+(A^(D|~b))+I[1]+2240044497&4294967295,k=D+(R<<21&4294967295|R>>>11),R=b+(D^(k|~A))+I[8]+1873313359&4294967295,b=k+(R<<6&4294967295|R>>>26),R=A+(k^(b|~D))+I[15]+4264355552&4294967295,A=b+(R<<10&4294967295|R>>>22),R=D+(b^(A|~k))+I[6]+2734768916&4294967295,D=A+(R<<15&4294967295|R>>>17),R=k+(A^(D|~b))+I[13]+1309151649&4294967295,k=D+(R<<21&4294967295|R>>>11),R=b+(D^(k|~A))+I[4]+4149444226&4294967295,b=k+(R<<6&4294967295|R>>>26),R=A+(k^(b|~D))+I[11]+3174756917&4294967295,A=b+(R<<10&4294967295|R>>>22),R=D+(b^(A|~k))+I[2]+718787259&4294967295,D=A+(R<<15&4294967295|R>>>17),R=k+(A^(D|~b))+I[9]+3951481745&4294967295,S.g[0]=S.g[0]+b&4294967295,S.g[1]=S.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+D&4294967295,S.g[3]=S.g[3]+A&4294967295}r.prototype.u=function(S,b){b===void 0&&(b=S.length);for(var k=b-this.blockSize,I=this.B,D=this.h,A=0;A<b;){if(D==0)for(;A<=k;)i(this,S,A),A+=this.blockSize;if(typeof S=="string"){for(;A<b;)if(I[D++]=S.charCodeAt(A++),D==this.blockSize){i(this,I),D=0;break}}else for(;A<b;)if(I[D++]=S[A++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=b},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var b=1;b<S.length-8;++b)S[b]=0;var k=8*this.o;for(b=S.length-8;b<S.length;++b)S[b]=k&255,k/=256;for(this.u(S),S=Array(16),b=k=0;4>b;++b)for(var I=0;32>I;I+=8)S[k++]=this.g[b]>>>I&255;return S};function s(S,b){var k=a;return Object.prototype.hasOwnProperty.call(k,S)?k[S]:k[S]=b(S)}function o(S,b){this.h=b;for(var k=[],I=!0,D=S.length-1;0<=D;D--){var A=S[D]|0;I&&A==b||(k[D]=A,I=!1)}this.g=k}var a={};function l(S){return-128<=S&&128>S?s(S,function(b){return new o([b|0],0>b?-1:0)}):new o([S|0],0>S?-1:0)}function c(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return x(c(-S));for(var b=[],k=1,I=0;S>=k;I++)b[I]=S/k|0,k*=4294967296;return new o(b,0)}function u(S,b){if(S.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(S.charAt(0)=="-")return x(u(S.substring(1),b));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(b,8)),I=f,D=0;D<S.length;D+=8){var A=Math.min(8,S.length-D),R=parseInt(S.substring(D,D+A),b);8>A?(A=c(Math.pow(b,A)),I=I.j(A).add(c(R))):(I=I.j(k),I=I.add(c(R)))}return I}var f=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-x(this).m();for(var S=0,b=1,k=0;k<this.g.length;k++){var I=this.i(k);S+=(0<=I?I:4294967296+I)*b,b*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(y(this))return"0";if(_(this))return"-"+x(this).toString(S);for(var b=c(Math.pow(S,6)),k=this,I="";;){var D=P(k,b).g;k=v(k,D.j(b));var A=((0<k.g.length?k.g[0]:k.h)>>>0).toString(S);if(k=D,y(k))return A+I;for(;6>A.length;)A="0"+A;I=A+I}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function y(S){if(S.h!=0)return!1;for(var b=0;b<S.g.length;b++)if(S.g[b]!=0)return!1;return!0}function _(S){return S.h==-1}t.l=function(S){return S=v(this,S),_(S)?-1:y(S)?0:1};function x(S){for(var b=S.g.length,k=[],I=0;I<b;I++)k[I]=~S.g[I];return new o(k,~S.h).add(p)}t.abs=function(){return _(this)?x(this):this},t.add=function(S){for(var b=Math.max(this.g.length,S.g.length),k=[],I=0,D=0;D<=b;D++){var A=I+(this.i(D)&65535)+(S.i(D)&65535),R=(A>>>16)+(this.i(D)>>>16)+(S.i(D)>>>16);I=R>>>16,A&=65535,R&=65535,k[D]=R<<16|A}return new o(k,k[k.length-1]&-2147483648?-1:0)};function v(S,b){return S.add(x(b))}t.j=function(S){if(y(this)||y(S))return f;if(_(this))return _(S)?x(this).j(x(S)):x(x(this).j(S));if(_(S))return x(this.j(x(S)));if(0>this.l(m)&&0>S.l(m))return c(this.m()*S.m());for(var b=this.g.length+S.g.length,k=[],I=0;I<2*b;I++)k[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<S.g.length;D++){var A=this.i(I)>>>16,R=this.i(I)&65535,$=S.i(D)>>>16,H=S.i(D)&65535;k[2*I+2*D]+=R*H,w(k,2*I+2*D),k[2*I+2*D+1]+=A*H,w(k,2*I+2*D+1),k[2*I+2*D+1]+=R*$,w(k,2*I+2*D+1),k[2*I+2*D+2]+=A*$,w(k,2*I+2*D+2)}for(I=0;I<b;I++)k[I]=k[2*I+1]<<16|k[2*I];for(I=b;I<2*b;I++)k[I]=0;return new o(k,0)};function w(S,b){for(;(S[b]&65535)!=S[b];)S[b+1]+=S[b]>>>16,S[b]&=65535,b++}function E(S,b){this.g=S,this.h=b}function P(S,b){if(y(b))throw Error("division by zero");if(y(S))return new E(f,f);if(_(S))return b=P(x(S),b),new E(x(b.g),x(b.h));if(_(b))return b=P(S,x(b)),new E(x(b.g),b.h);if(30<S.g.length){if(_(S)||_(b))throw Error("slowDivide_ only works with positive integers.");for(var k=p,I=b;0>=I.l(S);)k=C(k),I=C(I);var D=M(k,1),A=M(I,1);for(I=M(I,2),k=M(k,2);!y(I);){var R=A.add(I);0>=R.l(S)&&(D=D.add(k),A=R),I=M(I,1),k=M(k,1)}return b=v(S,D.j(b)),new E(D,b)}for(D=f;0<=S.l(b);){for(k=Math.max(1,Math.floor(S.m()/b.m())),I=Math.ceil(Math.log(k)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),A=c(k),R=A.j(b);_(R)||0<R.l(S);)k-=I,A=c(k),R=A.j(b);y(A)&&(A=p),D=D.add(A),S=v(S,R)}return new E(D,S)}t.A=function(S){return P(this,S).h},t.and=function(S){for(var b=Math.max(this.g.length,S.g.length),k=[],I=0;I<b;I++)k[I]=this.i(I)&S.i(I);return new o(k,this.h&S.h)},t.or=function(S){for(var b=Math.max(this.g.length,S.g.length),k=[],I=0;I<b;I++)k[I]=this.i(I)|S.i(I);return new o(k,this.h|S.h)},t.xor=function(S){for(var b=Math.max(this.g.length,S.g.length),k=[],I=0;I<b;I++)k[I]=this.i(I)^S.i(I);return new o(k,this.h^S.h)};function C(S){for(var b=S.g.length+1,k=[],I=0;I<b;I++)k[I]=S.i(I)<<1|S.i(I-1)>>>31;return new o(k,S.h)}function M(S,b){var k=b>>5;b%=32;for(var I=S.g.length-k,D=[],A=0;A<I;A++)D[A]=0<b?S.i(A+k)>>>b|S.i(A+k+1)<<32-b:S.i(A+k);return new o(D,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,jo=o}).apply(typeof LE<"u"?LE:typeof self<"u"?self:typeof window<"u"?window:{});var Td=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vR,Nc,_R,gf,Lv,xR,wR,bR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,g,T){return h==Array.prototype||h==Object.prototype||(h[g]=T.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Td=="object"&&Td];for(var g=0;g<h.length;++g){var T=h[g];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function i(h,g){if(g)e:{var T=r;h=h.split(".");for(var N=0;N<h.length-1;N++){var L=h[N];if(!(L in T))break e;T=T[L]}h=h[h.length-1],N=T[h],g=g(N),g!=N&&g!=null&&e(T,h,{configurable:!0,writable:!0,value:g})}}function s(h,g){h instanceof String&&(h+="");var T=0,N=!1,L={next:function(){if(!N&&T<h.length){var F=T++;return{value:g(F,h[F]),done:!1}}return N=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(h){return h||function(){return s(this,function(g,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var g=typeof h;return g=g!="object"?g:h?Array.isArray(h)?"array":g:"null",g=="array"||g=="object"&&typeof h.length=="number"}function c(h){var g=typeof h;return g=="object"&&h!=null||g=="function"}function u(h,g,T){return h.call.apply(h.bind,arguments)}function f(h,g,T){if(!h)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,N),h.apply(g,L)}}return function(){return h.apply(g,arguments)}}function p(h,g,T){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,p.apply(null,arguments)}function m(h,g){var T=Array.prototype.slice.call(arguments,1);return function(){var N=T.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function y(h,g){function T(){}T.prototype=g.prototype,h.aa=g.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(N,L,F){for(var Q=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)Q[$e-2]=arguments[$e];return g.prototype[L].apply(N,Q)}}function _(h){const g=h.length;if(0<g){const T=Array(g);for(let N=0;N<g;N++)T[N]=h[N];return T}return[]}function x(h,g){for(let T=1;T<arguments.length;T++){const N=arguments[T];if(l(N)){const L=h.length||0,F=N.length||0;h.length=L+F;for(let Q=0;Q<F;Q++)h[L+Q]=N[Q]}else h.push(N)}}class v{constructor(g,T){this.i=g,this.j=T,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(h){return/^[\s\xa0]*$/.test(h)}function E(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function P(h){return P[" "](h),h}P[" "]=function(){};var C=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function M(h,g,T){for(const N in h)g.call(T,h[N],N,h)}function S(h,g){for(const T in h)g.call(void 0,h[T],T,h)}function b(h){const g={};for(const T in h)g[T]=h[T];return g}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(h,g){let T,N;for(let L=1;L<arguments.length;L++){N=arguments[L];for(T in N)h[T]=N[T];for(let F=0;F<k.length;F++)T=k[F],Object.prototype.hasOwnProperty.call(N,T)&&(h[T]=N[T])}}function D(h){var g=1;h=h.split(":");const T=[];for(;0<g&&h.length;)T.push(h.shift()),g--;return h.length&&T.push(h.join(":")),T}function A(h){a.setTimeout(()=>{throw h},0)}function R(){var h=X;let g=null;return h.g&&(g=h.g,h.g=h.g.next,h.g||(h.h=null),g.next=null),g}class ${constructor(){this.h=this.g=null}add(g,T){const N=H.get();N.set(g,T),this.h?this.h.next=N:this.g=N,this.h=N}}var H=new v(()=>new q,h=>h.reset());class q{constructor(){this.next=this.g=this.h=null}set(g,T){this.h=g,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,z=!1,X=new $,J=()=>{const h=a.Promise.resolve(void 0);ee=()=>{h.then(ye)}};var ye=()=>{for(var h;h=R();){try{h.h.call(h.g)}catch(T){A(T)}var g=H;g.j(h),100>g.h&&(g.h++,h.next=g.g,g.g=h)}z=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(h,g){this.type=h,this.g=this.target=g,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var He=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,g=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};a.addEventListener("test",T,g),a.removeEventListener("test",T,g)}catch{}return h}();function tt(h,g){if(we.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=g,g=h.relatedTarget){if(C){e:{try{P(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else T=="mouseover"?g=h.fromElement:T=="mouseout"&&(g=h.toElement);this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:qe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&tt.aa.h.call(this)}}y(tt,we);var qe={2:"touch",3:"pen",4:"mouse"};tt.prototype.h=function(){tt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ot="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(h,g,T,N,L){this.listener=h,this.proxy=null,this.src=g,this.type=T,this.capture=!!N,this.ha=L,this.key=++nn,this.da=this.fa=!1}function Nn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Wn(h){this.src=h,this.g={},this.h=0}Wn.prototype.add=function(h,g,T,N,L){var F=h.toString();h=this.g[F],h||(h=this.g[F]=[],this.h++);var Q=Fe(h,g,N,L);return-1<Q?(g=h[Q],T||(g.fa=!1)):(g=new rn(g,this.src,F,!!N,L),g.fa=T,h.push(g)),g};function re(h,g){var T=g.type;if(T in h.g){var N=h.g[T],L=Array.prototype.indexOf.call(N,g,void 0),F;(F=0<=L)&&Array.prototype.splice.call(N,L,1),F&&(Nn(g),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Fe(h,g,T,N){for(var L=0;L<h.length;++L){var F=h[L];if(!F.da&&F.listener==g&&F.capture==!!T&&F.ha==N)return L}return-1}var ve="closure_lm_"+(1e6*Math.random()|0),Ue={};function Te(h,g,T,N,L){if(Array.isArray(g)){for(var F=0;F<g.length;F++)Te(h,g[F],T,N,L);return null}return T=G(T),h&&h[ot]?h.K(g,T,c(N)?!!N.capture:!1,L):Yi(h,g,T,!1,N,L)}function Yi(h,g,T,N,L,F){if(!g)throw Error("Invalid event type");var Q=c(L)?!!L.capture:!!L,$e=Z(h);if($e||(h[ve]=$e=new Wn(h)),T=$e.add(g,T,N,Q,F),T.proxy)return T;if(N=Kl(),T.proxy=N,N.src=h,N.listener=T,h.addEventListener)He||(L=Q),L===void 0&&(L=!1),h.addEventListener(g.toString(),N,L);else if(h.attachEvent)h.attachEvent(V(g.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Kl(){function h(T){return g.call(h.src,h.listener,T)}const g=U;return h}function Qi(h,g,T,N,L){if(Array.isArray(g))for(var F=0;F<g.length;F++)Qi(h,g[F],T,N,L);else N=c(N)?!!N.capture:!!N,T=G(T),h&&h[ot]?(h=h.i,g=String(g).toString(),g in h.g&&(F=h.g[g],T=Fe(F,T,N,L),-1<T&&(Nn(F[T]),Array.prototype.splice.call(F,T,1),F.length==0&&(delete h.g[g],h.h--)))):h&&(h=Z(h))&&(g=h.g[g.toString()],h=-1,g&&(h=Fe(g,T,N,L)),(T=-1<h?g[h]:null)&&j(T))}function j(h){if(typeof h!="number"&&h&&!h.da){var g=h.src;if(g&&g[ot])re(g.i,h);else{var T=h.type,N=h.proxy;g.removeEventListener?g.removeEventListener(T,N,h.capture):g.detachEvent?g.detachEvent(V(T),N):g.addListener&&g.removeListener&&g.removeListener(N),(T=Z(g))?(re(T,h),T.h==0&&(T.src=null,g[ve]=null)):Nn(h)}}}function V(h){return h in Ue?Ue[h]:Ue[h]="on"+h}function U(h,g){if(h.da)h=!0;else{g=new tt(g,this);var T=h.listener,N=h.ha||h.src;h.fa&&j(h),h=T.call(N,g)}return h}function Z(h){return h=h[ve],h instanceof Wn?h:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function G(h){return typeof h=="function"?h:(h[Y]||(h[Y]=function(g){return h.handleEvent(g)}),h[Y])}function te(){pe.call(this),this.i=new Wn(this),this.M=this,this.F=null}y(te,pe),te.prototype[ot]=!0,te.prototype.removeEventListener=function(h,g,T,N){Qi(this,h,g,T,N)};function he(h,g){var T,N=h.F;if(N)for(T=[];N;N=N.F)T.push(N);if(h=h.M,N=g.type||g,typeof g=="string")g=new we(g,h);else if(g instanceof we)g.target=g.target||h;else{var L=g;g=new we(N,h),I(g,L)}if(L=!0,T)for(var F=T.length-1;0<=F;F--){var Q=g.g=T[F];L=Ae(Q,N,!0,g)&&L}if(Q=g.g=h,L=Ae(Q,N,!0,g)&&L,L=Ae(Q,N,!1,g)&&L,T)for(F=0;F<T.length;F++)Q=g.g=T[F],L=Ae(Q,N,!1,g)&&L}te.prototype.N=function(){if(te.aa.N.call(this),this.i){var h=this.i,g;for(g in h.g){for(var T=h.g[g],N=0;N<T.length;N++)Nn(T[N]);delete h.g[g],h.h--}}this.F=null},te.prototype.K=function(h,g,T,N){return this.i.add(String(h),g,!1,T,N)},te.prototype.L=function(h,g,T,N){return this.i.add(String(h),g,!0,T,N)};function Ae(h,g,T,N){if(g=h.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,F=0;F<g.length;++F){var Q=g[F];if(Q&&!Q.da&&Q.capture==T){var $e=Q.listener,Ht=Q.ha||Q.src;Q.fa&&re(h.i,Q),L=$e.call(Ht,N)!==!1&&L}}return L&&!N.defaultPrevented}function Dt(h,g,T){if(typeof h=="function")T&&(h=p(h,T));else if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(h,g||0)}function Mr(h){h.g=Dt(()=>{h.g=null,h.i&&(h.i=!1,Mr(h))},h.l);const g=h.h;h.h=null,h.m.apply(null,g)}class Hn extends pe{constructor(g,T){super(),this.m=g,this.l=T,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Mr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function di(h){pe.call(this),this.h=h,this.g={}}y(di,pe);var yr=[];function fi(h){M(h.g,function(g,T){this.g.hasOwnProperty(T)&&j(g)},h),h.g={}}di.prototype.N=function(){di.aa.N.call(this),fi(this)},di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ro=a.JSON.stringify,io=a.JSON.parse,pa=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function jr(){}jr.prototype.h=null;function $h(h){return h.h||(h.h=h.i())}function Gl(){}var so={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ma(){we.call(this,"d")}y(ma,we);function Lt(){we.call(this,"c")}y(Lt,we);var pt={},oo=null;function Be(){return oo=oo||new te}pt.La="serverreachability";function qn(h){we.call(this,pt.La,h)}y(qn,we);function ao(h){const g=Be();he(g,new qn(g))}pt.STAT_EVENT="statevent";function ga(h,g){we.call(this,pt.STAT_EVENT,h),this.stat=g}y(ga,we);function Vt(h){const g=Be();he(g,new ga(g,h))}pt.Ma="timingevent";function Yl(h,g){we.call(this,pt.Ma,h),this.size=g}y(Yl,we);function pi(h,g){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},g)}function Lr(){this.g=!0}Lr.prototype.xa=function(){this.g=!1};function Ql(h,g,T,N,L,F){h.info(function(){if(h.g)if(F)for(var Q="",$e=F.split("&"),Ht=0;Ht<$e.length;Ht++){var Re=$e[Ht].split("=");if(1<Re.length){var sn=Re[0];Re=Re[1];var on=sn.split("_");Q=2<=on.length&&on[1]=="type"?Q+(sn+"="+Re+"&"):Q+(sn+"=redacted&")}}else Q=null;else Q=F;return"XMLHTTP REQ ("+N+") [attempt "+L+"]: "+g+`
`+T+`
`+Q})}function Xl(h,g,T,N,L,F,Q){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+L+"]: "+g+`
`+T+`
`+F+" "+Q})}function Vr(h,g,T,N){h.info(function(){return"XMLHTTP TEXT ("+g+"): "+Jl(h,T)+(N?" "+N:"")})}function eg(h,g){h.info(function(){return"TIMEOUT: "+g})}Lr.prototype.info=function(){};function Jl(h,g){if(!h.g)return g;if(!g)return null;try{var T=JSON.parse(g);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var N=T[h];if(!(2>N.length)){var L=N[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var Q=1;Q<L.length;Q++)L[Q]=""}}}}return ro(T)}catch{return g}}var lo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zl;function _e(){}y(_e,jr),_e.prototype.g=function(){return new XMLHttpRequest},_e.prototype.i=function(){return{}},Zl=new _e;function De(h,g,T,N){this.j=h,this.i=g,this.l=T,this.R=N||1,this.U=new di(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new at}function at(){this.i=null,this.g="",this.h=!1}var Dn={},En={};function co(h,g,T){h.L=1,h.v=Qh(mi(g)),h.m=T,h.P=!0,Hh(h,null)}function Hh(h,g){h.F=Date.now(),Kh(h),h.A=mi(h.v);var T=h.A,N=h.R;Array.isArray(N)||(N=[String(N)]),Tb(T.i,"t",N),h.C=0,T=h.j.J,h.h=new at,h.g=Bb(h.j,T?g:null,!h.m),0<h.O&&(h.M=new Hn(p(h.Y,h,h.g),h.O)),g=h.U,T=h.g,N=h.ca;var L="readystatechange";Array.isArray(L)||(L&&(yr[0]=L.toString()),L=yr);for(var F=0;F<L.length;F++){var Q=Te(T,L[F],N||g.handleEvent,!1,g.h||g);if(!Q)break;g.g[Q.key]=Q}g=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,g)):(h.u="GET",h.g.ea(h.A,h.u,null,g)),ao(),Ql(h.i,h.u,h.A,h.l,h.R,h.m)}De.prototype.ca=function(h){h=h.target;const g=this.M;g&&gi(h)==3?g.j():this.Y(h)},De.prototype.Y=function(h){try{if(h==this.g)e:{const on=gi(this.g);var g=this.g.Ba();const _a=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||Pb(this.g)))){this.J||on!=4||g==7||(g==8||0>=_a?ao(3):ao(2)),tg(this);var T=this.g.Z();this.X=T;t:if(qh(this)){var N=Pb(this.g);h="";var L=N.length,F=gi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){uo(this),ec(this);var Q="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,h+=this.h.i.decode(N[g],{stream:!(F&&g==L-1)});N.length=0,this.h.g+=h,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=T==200,Xl(this.i,this.u,this.A,this.l,this.R,on,T),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,Ht=this.g;if(($e=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w($e)){var Re=$e;break t}}Re=null}if(T=Re)Vr(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ng(this,T);else{this.o=!1,this.s=3,Vt(12),uo(this),ec(this);break e}}if(this.P){T=!0;let vr;for(;!this.J&&this.C<Q.length;)if(vr=xM(this,Q),vr==En){on==4&&(this.s=4,Vt(14),T=!1),Vr(this.i,this.l,null,"[Incomplete Response]");break}else if(vr==Dn){this.s=4,Vt(15),Vr(this.i,this.l,Q,"[Invalid Chunk]"),T=!1;break}else Vr(this.i,this.l,vr,null),ng(this,vr);if(qh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||Q.length!=0||this.h.h||(this.s=1,Vt(16),T=!1),this.o=this.o&&T,!T)Vr(this.i,this.l,Q,"[Invalid Chunked Response]"),uo(this),ec(this);else if(0<Q.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),lg(sn),sn.M=!0,Vt(11))}}else Vr(this.i,this.l,Q,null),ng(this,Q);on==4&&uo(this),this.o&&!this.J&&(on==4?Lb(this.j,this):(this.o=!1,Kh(this)))}else LM(this.g),T==400&&0<Q.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),uo(this),ec(this)}}}catch{}finally{}};function qh(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function xM(h,g){var T=h.C,N=g.indexOf(`
`,T);return N==-1?En:(T=Number(g.substring(T,N)),isNaN(T)?Dn:(N+=1,N+T>g.length?En:(g=g.slice(N,N+T),h.C=N+T,g)))}De.prototype.cancel=function(){this.J=!0,uo(this)};function Kh(h){h.S=Date.now()+h.I,hb(h,h.I)}function hb(h,g){if(h.B!=null)throw Error("WatchDog timer not null");h.B=pi(p(h.ba,h),g)}function tg(h){h.B&&(a.clearTimeout(h.B),h.B=null)}De.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(eg(this.i,this.A),this.L!=2&&(ao(),Vt(17)),uo(this),this.s=2,ec(this)):hb(this,this.S-h)};function ec(h){h.j.G==0||h.J||Lb(h.j,h)}function uo(h){tg(h);var g=h.M;g&&typeof g.ma=="function"&&g.ma(),h.M=null,fi(h.U),h.g&&(g=h.g,h.g=null,g.abort(),g.ma())}function ng(h,g){try{var T=h.j;if(T.G!=0&&(T.g==h||rg(T.h,h))){if(!h.K&&rg(T.h,h)&&T.G==3){try{var N=T.Da.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var L=N;if(L[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)nd(T),ed(T);else break e;ag(T),Vt(18)}}else T.za=L[1],0<T.za-T.T&&37500>L[2]&&T.F&&T.v==0&&!T.C&&(T.C=pi(p(T.Za,T),6e3));if(1>=pb(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else fo(T,11)}else if((h.K||T.g==h)&&nd(T),!w(g))for(L=T.Da.g.parse(g),g=0;g<L.length;g++){let Re=L[g];if(T.T=Re[0],Re=Re[1],T.G==2)if(Re[0]=="c"){T.K=Re[1],T.ia=Re[2];const sn=Re[3];sn!=null&&(T.la=sn,T.j.info("VER="+T.la));const on=Re[4];on!=null&&(T.Aa=on,T.j.info("SVER="+T.Aa));const _a=Re[5];_a!=null&&typeof _a=="number"&&0<_a&&(N=1.5*_a,T.L=N,T.j.info("backChannelRequestTimeoutMs_="+N)),N=T;const vr=h.g;if(vr){const id=vr.g?vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(id){var F=N.h;F.g||id.indexOf("spdy")==-1&&id.indexOf("quic")==-1&&id.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(ig(F,F.h),F.h=null))}if(N.D){const cg=vr.g?vr.g.getResponseHeader("X-HTTP-Session-Id"):null;cg&&(N.ya=cg,Ye(N.I,N.D,cg))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),N=T;var Q=h;if(N.qa=Ub(N,N.J?N.ia:null,N.W),Q.K){mb(N.h,Q);var $e=Q,Ht=N.L;Ht&&($e.I=Ht),$e.B&&(tg($e),Kh($e)),N.g=Q}else Mb(N);0<T.i.length&&td(T)}else Re[0]!="stop"&&Re[0]!="close"||fo(T,7);else T.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?fo(T,7):og(T):Re[0]!="noop"&&T.l&&T.l.ta(Re),T.v=0)}}ao(4)}catch{}}var wM=class{constructor(h,g){this.g=h,this.map=g}};function db(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fb(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function pb(h){return h.h?1:h.g?h.g.size:0}function rg(h,g){return h.h?h.h==g:h.g?h.g.has(g):!1}function ig(h,g){h.g?h.g.add(g):h.h=g}function mb(h,g){h.h&&h.h==g?h.h=null:h.g&&h.g.has(g)&&h.g.delete(g)}db.prototype.cancel=function(){if(this.i=gb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function gb(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let g=h.i;for(const T of h.g.values())g=g.concat(T.D);return g}return _(h.i)}function bM(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var g=[],T=h.length,N=0;N<T;N++)g.push(h[N]);return g}g=[],T=0;for(N in h)g[T++]=h[N];return g}function TM(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var g=[];h=h.length;for(var T=0;T<h;T++)g.push(T);return g}g=[],T=0;for(const N in h)g[T++]=N;return g}}}function yb(h,g){if(h.forEach&&typeof h.forEach=="function")h.forEach(g,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,g,void 0);else for(var T=TM(h),N=bM(h),L=N.length,F=0;F<L;F++)g.call(void 0,N[F],T&&T[F],h)}var vb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function EM(h,g){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var N=h[T].indexOf("="),L=null;if(0<=N){var F=h[T].substring(0,N);L=h[T].substring(N+1)}else F=h[T];g(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ho(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ho){this.h=h.h,Gh(this,h.j),this.o=h.o,this.g=h.g,Yh(this,h.s),this.l=h.l;var g=h.i,T=new rc;T.i=g.i,g.g&&(T.g=new Map(g.g),T.h=g.h),_b(this,T),this.m=h.m}else h&&(g=String(h).match(vb))?(this.h=!1,Gh(this,g[1]||"",!0),this.o=tc(g[2]||""),this.g=tc(g[3]||"",!0),Yh(this,g[4]),this.l=tc(g[5]||"",!0),_b(this,g[6]||"",!0),this.m=tc(g[7]||"")):(this.h=!1,this.i=new rc(null,this.h))}ho.prototype.toString=function(){var h=[],g=this.j;g&&h.push(nc(g,xb,!0),":");var T=this.g;return(T||g=="file")&&(h.push("//"),(g=this.o)&&h.push(nc(g,xb,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(nc(T,T.charAt(0)=="/"?CM:kM,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",nc(T,AM)),h.join("")};function mi(h){return new ho(h)}function Gh(h,g,T){h.j=T?tc(g,!0):g,h.j&&(h.j=h.j.replace(/:$/,""))}function Yh(h,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);h.s=g}else h.s=null}function _b(h,g,T){g instanceof rc?(h.i=g,PM(h.i,h.h)):(T||(g=nc(g,IM)),h.i=new rc(g,h.h))}function Ye(h,g,T){h.i.set(g,T)}function Qh(h){return Ye(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function tc(h,g){return h?g?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function nc(h,g,T){return typeof h=="string"?(h=encodeURI(h).replace(g,SM),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function SM(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var xb=/[#\/\?@]/g,kM=/[#\?:]/g,CM=/[#\?]/g,IM=/[#\?@]/g,AM=/#/g;function rc(h,g){this.h=this.g=null,this.i=h||null,this.j=!!g}function Xi(h){h.g||(h.g=new Map,h.h=0,h.i&&EM(h.i,function(g,T){h.add(decodeURIComponent(g.replace(/\+/g," ")),T)}))}t=rc.prototype,t.add=function(h,g){Xi(this),this.i=null,h=ya(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(g),this.h+=1,this};function wb(h,g){Xi(h),g=ya(h,g),h.g.has(g)&&(h.i=null,h.h-=h.g.get(g).length,h.g.delete(g))}function bb(h,g){return Xi(h),g=ya(h,g),h.g.has(g)}t.forEach=function(h,g){Xi(this),this.g.forEach(function(T,N){T.forEach(function(L){h.call(g,L,N,this)},this)},this)},t.na=function(){Xi(this);const h=Array.from(this.g.values()),g=Array.from(this.g.keys()),T=[];for(let N=0;N<g.length;N++){const L=h[N];for(let F=0;F<L.length;F++)T.push(g[N])}return T},t.V=function(h){Xi(this);let g=[];if(typeof h=="string")bb(this,h)&&(g=g.concat(this.g.get(ya(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)g=g.concat(h[T])}return g},t.set=function(h,g){return Xi(this),this.i=null,h=ya(this,h),bb(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[g]),this.h+=1,this},t.get=function(h,g){return h?(h=this.V(h),0<h.length?String(h[0]):g):g};function Tb(h,g,T){wb(h,g),0<T.length&&(h.i=null,h.g.set(ya(h,g),_(T)),h.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],g=Array.from(this.g.keys());for(var T=0;T<g.length;T++){var N=g[T];const F=encodeURIComponent(String(N)),Q=this.V(N);for(N=0;N<Q.length;N++){var L=F;Q[N]!==""&&(L+="="+encodeURIComponent(String(Q[N]))),h.push(L)}}return this.i=h.join("&")};function ya(h,g){return g=String(g),h.j&&(g=g.toLowerCase()),g}function PM(h,g){g&&!h.j&&(Xi(h),h.i=null,h.g.forEach(function(T,N){var L=N.toLowerCase();N!=L&&(wb(this,N),Tb(this,L,T))},h)),h.j=g}function RM(h,g){const T=new Lr;if(a.Image){const N=new Image;N.onload=m(Ji,T,"TestLoadImage: loaded",!0,g,N),N.onerror=m(Ji,T,"TestLoadImage: error",!1,g,N),N.onabort=m(Ji,T,"TestLoadImage: abort",!1,g,N),N.ontimeout=m(Ji,T,"TestLoadImage: timeout",!1,g,N),a.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else g(!1)}function NM(h,g){const T=new Lr,N=new AbortController,L=setTimeout(()=>{N.abort(),Ji(T,"TestPingServer: timeout",!1,g)},1e4);fetch(h,{signal:N.signal}).then(F=>{clearTimeout(L),F.ok?Ji(T,"TestPingServer: ok",!0,g):Ji(T,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Ji(T,"TestPingServer: error",!1,g)})}function Ji(h,g,T,N,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),N(T)}catch{}}function DM(){this.g=new pa}function OM(h,g,T){const N=T||"";try{yb(h,function(L,F){let Q=L;c(L)&&(Q=ro(L)),g.push(N+F+"="+encodeURIComponent(Q))})}catch(L){throw g.push(N+"type="+encodeURIComponent("_badmap")),L}}function Xh(h){this.l=h.Ub||null,this.j=h.eb||!1}y(Xh,jr),Xh.prototype.g=function(){return new Jh(this.l,this.j)},Xh.prototype.i=function(h){return function(){return h}}({});function Jh(h,g){te.call(this),this.D=h,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Jh,te),t=Jh.prototype,t.open=function(h,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=g,this.readyState=1,sc(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(g.body=h),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ic(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,sc(this)),this.g&&(this.readyState=3,sc(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Eb(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Eb(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var g=h.value?h.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!h.done}))&&(this.response=this.responseText+=g)}h.done?ic(this):sc(this),this.readyState==3&&Eb(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,ic(this))},t.Qa=function(h){this.g&&(this.response=h,ic(this))},t.ga=function(){this.g&&ic(this)};function ic(h){h.readyState=4,h.l=null,h.j=null,h.v=null,sc(h)}t.setRequestHeader=function(h,g){this.u.append(h,g)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],g=this.h.entries();for(var T=g.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=g.next();return h.join(`\r
`)};function sc(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Jh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Sb(h){let g="";return M(h,function(T,N){g+=N,g+=":",g+=T,g+=`\r
`}),g}function sg(h,g,T){e:{for(N in T){var N=!1;break e}N=!0}N||(T=Sb(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):Ye(h,g,T))}function mt(h){te.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(mt,te);var MM=/^https?$/i,jM=["POST","PUT"];t=mt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,g,T,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);g=g?g.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zl.g(),this.v=this.o?$h(this.o):$h(Zl),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(h),!0),this.B=!1}catch(F){kb(this,F);return}if(h=T||"",T=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var L in N)T.set(L,N[L]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const F of N.keys())T.set(F,N.get(F));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(T.keys()).find(F=>F.toLowerCase()=="content-type"),L=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(jM,g,void 0))||N||L||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,Q]of T)this.g.setRequestHeader(F,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ab(this),this.u=!0,this.g.send(h),this.u=!1}catch(F){kb(this,F)}};function kb(h,g){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=g,h.m=5,Cb(h),Zh(h)}function Cb(h){h.A||(h.A=!0,he(h,"complete"),he(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,he(this,"complete"),he(this,"abort"),Zh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zh(this,!0)),mt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ib(this):this.bb())},t.bb=function(){Ib(this)};function Ib(h){if(h.h&&typeof o<"u"&&(!h.v[1]||gi(h)!=4||h.Z()!=2)){if(h.u&&gi(h)==4)Dt(h.Ea,0,h);else if(he(h,"readystatechange"),gi(h)==4){h.h=!1;try{const Q=h.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var T;if(!(T=g)){var N;if(N=Q===0){var L=String(h.D).match(vb)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),N=!MM.test(L?L.toLowerCase():"")}T=N}if(T)he(h,"complete"),he(h,"success");else{h.m=6;try{var F=2<gi(h)?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.Z()+"]",Cb(h)}}finally{Zh(h)}}}}function Zh(h,g){if(h.g){Ab(h);const T=h.g,N=h.v[0]?()=>{}:null;h.g=null,h.v=null,g||he(h,"ready");try{T.onreadystatechange=N}catch{}}}function Ab(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function gi(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<gi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var g=this.g.responseText;return h&&g.indexOf(h)==0&&(g=g.substring(h.length)),io(g)}};function Pb(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function LM(h){const g={};h=(h.g&&2<=gi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(w(h[N]))continue;var T=D(h[N]);const L=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const F=g[L]||[];g[L]=F,F.push(T)}S(g,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function oc(h,g,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||g}function Rb(h){this.Aa=0,this.i=[],this.j=new Lr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=oc("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=oc("baseRetryDelayMs",5e3,h),this.cb=oc("retryDelaySeedMs",1e4,h),this.Wa=oc("forwardChannelMaxRetries",2,h),this.wa=oc("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new db(h&&h.concurrentRequestLimit),this.Da=new DM,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Rb.prototype,t.la=8,t.G=1,t.connect=function(h,g,T,N){Vt(0),this.W=h,this.H=g||{},T&&N!==void 0&&(this.H.OSID=T,this.H.OAID=N),this.F=this.X,this.I=Ub(this,null,this.W),td(this)};function og(h){if(Nb(h),h.G==3){var g=h.U++,T=mi(h.I);if(Ye(T,"SID",h.K),Ye(T,"RID",g),Ye(T,"TYPE","terminate"),ac(h,T),g=new De(h,h.j,g),g.L=2,g.v=Qh(mi(T)),T=!1,a.navigator&&a.navigator.sendBeacon)try{T=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!T&&a.Image&&(new Image().src=g.v,T=!0),T||(g.g=Bb(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Kh(g)}Fb(h)}function ed(h){h.g&&(lg(h),h.g.cancel(),h.g=null)}function Nb(h){ed(h),h.u&&(a.clearTimeout(h.u),h.u=null),nd(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function td(h){if(!fb(h.h)&&!h.s){h.s=!0;var g=h.Ga;ee||J(),z||(ee(),z=!0),X.add(g,h),h.B=0}}function VM(h,g){return pb(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=g.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=pi(p(h.Ga,h,g),Vb(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const L=new De(this,this.j,h);let F=this.o;if(this.S&&(F?(F=b(F),I(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var g=0,T=0;T<this.i.length;T++){t:{var N=this.i[T];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,4096<g){g=T;break e}if(g===4096||T===this.i.length-1){g=T+1;break e}}g=1e3}else g=1e3;g=Ob(this,L,g),T=mi(this.I),Ye(T,"RID",h),Ye(T,"CVER",22),this.D&&Ye(T,"X-HTTP-Session-Id",this.D),ac(this,T),F&&(this.O?g="headers="+encodeURIComponent(String(Sb(F)))+"&"+g:this.m&&sg(T,this.m,F)),ig(this.h,L),this.Ua&&Ye(T,"TYPE","init"),this.P?(Ye(T,"$req",g),Ye(T,"SID","null"),L.T=!0,co(L,T,null)):co(L,T,g),this.G=2}}else this.G==3&&(h?Db(this,h):this.i.length==0||fb(this.h)||Db(this))};function Db(h,g){var T;g?T=g.l:T=h.U++;const N=mi(h.I);Ye(N,"SID",h.K),Ye(N,"RID",T),Ye(N,"AID",h.T),ac(h,N),h.m&&h.o&&sg(N,h.m,h.o),T=new De(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),g&&(h.i=g.D.concat(h.i)),g=Ob(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ig(h.h,T),co(T,N,g)}function ac(h,g){h.H&&M(h.H,function(T,N){Ye(g,N,T)}),h.l&&yb({},function(T,N){Ye(g,N,T)})}function Ob(h,g,T){T=Math.min(h.i.length,T);var N=h.l?p(h.l.Na,h.l,h):null;e:{var L=h.i;let F=-1;for(;;){const Q=["count="+T];F==-1?0<T?(F=L[0].g,Q.push("ofs="+F)):F=0:Q.push("ofs="+F);let $e=!0;for(let Ht=0;Ht<T;Ht++){let Re=L[Ht].g;const sn=L[Ht].map;if(Re-=F,0>Re)F=Math.max(0,L[Ht].g-100),$e=!1;else try{OM(sn,Q,"req"+Re+"_")}catch{N&&N(sn)}}if($e){N=Q.join("&");break e}}}return h=h.i.splice(0,T),g.D=h,N}function Mb(h){if(!h.g&&!h.u){h.Y=1;var g=h.Fa;ee||J(),z||(ee(),z=!0),X.add(g,h),h.v=0}}function ag(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=pi(p(h.Fa,h),Vb(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,jb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=pi(p(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),ed(this),jb(this))};function lg(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function jb(h){h.g=new De(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var g=mi(h.qa);Ye(g,"RID","rpc"),Ye(g,"SID",h.K),Ye(g,"AID",h.T),Ye(g,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ye(g,"TO",h.ja),Ye(g,"TYPE","xmlhttp"),ac(h,g),h.m&&h.o&&sg(g,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=Qh(mi(g)),T.m=null,T.P=!0,Hh(T,h)}t.Za=function(){this.C!=null&&(this.C=null,ed(this),ag(this),Vt(19))};function nd(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function Lb(h,g){var T=null;if(h.g==g){nd(h),lg(h),h.g=null;var N=2}else if(rg(h.h,g))T=g.D,mb(h.h,g),N=1;else return;if(h.G!=0){if(g.o)if(N==1){T=g.m?g.m.length:0,g=Date.now()-g.F;var L=h.B;N=Be(),he(N,new Yl(N,T)),td(h)}else Mb(h);else if(L=g.s,L==3||L==0&&0<g.X||!(N==1&&VM(h,g)||N==2&&ag(h)))switch(T&&0<T.length&&(g=h.h,g.i=g.i.concat(T)),L){case 1:fo(h,5);break;case 4:fo(h,10);break;case 3:fo(h,6);break;default:fo(h,2)}}}function Vb(h,g){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*g}function fo(h,g){if(h.j.info("Error code "+g),g==2){var T=p(h.fb,h),N=h.Xa;const L=!N;N=new ho(N||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gh(N,"https"),Qh(N),L?RM(N.toString(),T):NM(N.toString(),T)}else Vt(2);h.G=0,h.l&&h.l.sa(g),Fb(h),Nb(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Fb(h){if(h.G=0,h.ka=[],h.l){const g=gb(h.h);(g.length!=0||h.i.length!=0)&&(x(h.ka,g),x(h.ka,h.i),h.h.i.length=0,_(h.i),h.i.length=0),h.l.ra()}}function Ub(h,g,T){var N=T instanceof ho?mi(T):new ho(T);if(N.g!="")g&&(N.g=g+"."+N.g),Yh(N,N.s);else{var L=a.location;N=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var F=new ho(null);N&&Gh(F,N),g&&(F.g=g),L&&Yh(F,L),T&&(F.l=T),N=F}return T=h.D,g=h.ya,T&&g&&Ye(N,T,g),Ye(N,"VER",h.la),ac(h,N),N}function Bb(h,g,T){if(g&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=h.Ca&&!h.pa?new mt(new Xh({eb:T})):new mt(h.pa),g.Ha(h.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function zb(){}t=zb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function rd(){}rd.prototype.g=function(h,g){return new Kn(h,g)};function Kn(h,g){te.call(this),this.g=new Rb(g),this.l=h,this.h=g&&g.messageUrlParams||null,h=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(h?h["X-WebChannel-Content-Type"]=g.messageContentType:h={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(h?h["X-WebChannel-Client-Profile"]=g.va:h={"X-WebChannel-Client-Profile":g.va}),this.g.S=h,(h=g&&g.Sb)&&!w(h)&&(this.g.m=h),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,h=this.h,h!==null&&g in h&&(h=this.h,g in h&&delete h[g])),this.j=new va(this)}y(Kn,te),Kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){og(this.g)},Kn.prototype.o=function(h){var g=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=ro(h),h=T);g.i.push(new wM(g.Ya++,h)),g.G==3&&td(g)},Kn.prototype.N=function(){this.g.l=null,delete this.j,og(this.g),delete this.g,Kn.aa.N.call(this)};function $b(h){ma.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var g=h.__sm__;if(g){e:{for(const T in g){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,g=g!==null&&h in g?g[h]:void 0),this.data=g}else this.data=h}y($b,ma);function Wb(){Lt.call(this),this.status=1}y(Wb,Lt);function va(h){this.g=h}y(va,zb),va.prototype.ua=function(){he(this.g,"a")},va.prototype.ta=function(h){he(this.g,new $b(h))},va.prototype.sa=function(h){he(this.g,new Wb)},va.prototype.ra=function(){he(this.g,"b")},rd.prototype.createWebChannel=rd.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,bR=function(){return new rd},wR=function(){return Be()},xR=pt,Lv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lo.NO_ERROR=0,lo.TIMEOUT=8,lo.HTTP_ERROR=6,gf=lo,Wh.COMPLETE="complete",_R=Wh,Gl.EventType=so,so.OPEN="a",so.CLOSE="b",so.ERROR="c",so.MESSAGE="d",te.prototype.listen=te.prototype.K,Nc=Gl,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,vR=mt}).apply(typeof Td<"u"?Td:typeof self<"u"?self:typeof window<"u"?window:{});const VE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=new z0("@firebase/firestore");function gc(){return Go.logLevel}function se(t,...e){if(Go.logLevel<=ke.DEBUG){const n=e.map(ex);Go.debug(`Firestore (${Ll}): ${t}`,...n)}}function zi(t,...e){if(Go.logLevel<=ke.ERROR){const n=e.map(ex);Go.error(`Firestore (${Ll}): ${t}`,...n)}}function yl(t,...e){if(Go.logLevel<=ke.WARN){const n=e.map(ex);Go.warn(`Firestore (${Ll}): ${t}`,...n)}}function ex(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${Ll}) INTERNAL ASSERTION FAILED: `+t;throw zi(e),new Error(e)}function Ve(t,e){t||fe()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(fn.UNAUTHENTICATED))}shutdown(){}}class d5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class f5{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ni,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ni)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve(typeof r.accessToken=="string"),new TR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string"),new fn(e)}}class p5{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class m5{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new p5(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class g5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y5{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ve(this.o===void 0);const r=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ve(typeof n.token=="string"),this.R=n.token,new g5(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=v5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ne(t,e){return t<e?-1:t>e?1:0}function vl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new jt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new jt(0,0))}static max(){return new me(new jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(),r===void 0?r=e.length-n:r>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ke extends Vu{construct(e,n,r){return new Ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ke(n)}static emptyPath(){return new Ke([])}}const _5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Vu{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return _5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ne(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(Ke.fromString(e))}static fromName(e){return new le(Ke.fromString(e).popFirst(5))}static empty(){return new le(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new Ke(e.slice()))}}function x5(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=me.fromTimestamp(r===1e9?new jt(n+1,0):new jt(n,r));return new Fs(i,le.empty(),e)}function w5(t){return new Fs(t.readTime,t.key,-1)}class Fs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fs(me.min(),le.empty(),-1)}static max(){return new Fs(me.max(),le.empty(),-1)}}function b5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==T5)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,r)=>{n(e)})}static reject(e){return new W((n,r)=>{r(e)})}static waitFor(e){return new W((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next(i=>i?W.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new W((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new W((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function S5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tx.oe=-1;function cm(t){return t==null}function up(t){return t===0&&1/t==-1/0}function k5(t){return typeof t=="number"&&Number.isInteger(t)&&!up(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ia(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function SR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n){this.comparator=e,this.root=n||Yt.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ed(this.root,e,this.comparator,!0)}}class Ed{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Yt.RED,this.left=i??Yt.EMPTY,this.right=s??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Yt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Yt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Yt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new UE(this.data.getIterator())}getIteratorFrom(e){return new UE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class UE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Xn([])}unionWith(e){let n=new Zt(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new kR("Invalid base64 string: "+s):s}}(e);return new tn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const C5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Us(t){if(Ve(!!t),typeof t=="string"){let e=0;const n=C5.exec(t);if(Ve(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(t.seconds),nanos:xt(t.nanos)}}function xt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yo(t){return typeof t=="string"?tn.fromBase64String(t):tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function rx(t){const e=t.mapValue.fields.__previous_value__;return nx(e)?rx(e):e}function Fu(t){const e=Us(t.mapValue.fields.__local_write_time__.timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Uu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Uu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Uu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd={mapValue:{}};function Qo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nx(t)?4:P5(t)?9007199254740991:A5(t)?10:11:fe()}function si(t,e){if(t===e)return!0;const n=Qo(t);if(n!==Qo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fu(t).isEqual(Fu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Us(i.timestampValue),a=Us(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Yo(i.bytesValue).isEqual(Yo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return xt(i.geoPointValue.latitude)===xt(s.geoPointValue.latitude)&&xt(i.geoPointValue.longitude)===xt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return xt(i.integerValue)===xt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=xt(i.doubleValue),a=xt(s.doubleValue);return o===a?up(o)===up(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return vl(t.arrayValue.values||[],e.arrayValue.values||[],si);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(FE(o)!==FE(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!si(o[l],a[l])))return!1;return!0}(t,e);default:return fe()}}function Bu(t,e){return(t.values||[]).find(n=>si(n,e))!==void 0}function _l(t,e){if(t===e)return 0;const n=Qo(t),r=Qo(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=xt(s.integerValue||s.doubleValue),l=xt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return BE(t.timestampValue,e.timestampValue);case 4:return BE(Fu(t),Fu(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Yo(s),l=Yo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ne(a[c],l[c]);if(u!==0)return u}return Ne(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ne(xt(s.latitude),xt(o.latitude));return a!==0?a:Ne(xt(s.longitude),xt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return zE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const f=s.fields||{},p=o.fields||{},m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,_=Ne(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0);return _!==0?_:zE(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Sd.mapValue&&o===Sd.mapValue)return 0;if(s===Sd.mapValue)return 1;if(o===Sd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=Ne(l[f],u[f]);if(p!==0)return p;const m=_l(a[l[f]],c[u[f]]);if(m!==0)return m}return Ne(l.length,u.length)}(t.mapValue,e.mapValue);default:throw fe()}}function BE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=Us(t),r=Us(e),i=Ne(n.seconds,r.seconds);return i!==0?i:Ne(n.nanos,r.nanos)}function zE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=_l(n[i],r[i]);if(s)return s}return Ne(n.length,r.length)}function xl(t){return Vv(t)}function Vv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Us(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Vv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Vv(n.fields[o])}`;return i+"}"}(t.mapValue):fe()}function $E(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Fv(t){return!!t&&"integerValue"in t}function ix(t){return!!t&&"arrayValue"in t}function WE(t){return!!t&&"nullValue"in t}function HE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yf(t){return!!t&&"mapValue"in t}function A5(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function eu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ia(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=eu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=eu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function P5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(n)}setAll(e){let n=Qt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=eu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());yf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return si(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];yf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ia(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Vn(eu(this.value))}}function CR(t){const e=[];return ia(t.fields,(n,r)=>{const i=new Qt([n]);if(yf(r)){const s=CR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mn(e,0,me.min(),me.min(),me.min(),Vn.empty(),0)}static newFoundDocument(e,n,r,i){return new mn(e,1,n,me.min(),r,i,0)}static newNoDocument(e,n){return new mn(e,2,n,me.min(),me.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new mn(e,3,n,me.min(),me.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,n){this.position=e,this.inclusive=n}}function qE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),n.key):r=_l(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function KE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!si(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n="asc"){this.field=e,this.dir=n}}function R5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{}class Pt extends IR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new D5(e,n,r):n==="array-contains"?new j5(e,r):n==="in"?new L5(e,r):n==="not-in"?new V5(e,r):n==="array-contains-any"?new F5(e,r):new Pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new O5(e,r):new M5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_l(n,this.value)):n!==null&&Qo(this.value)===Qo(n)&&this.matchesComparison(_l(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Or extends IR{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Or(e,n)}matches(e){return AR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function AR(t){return t.op==="and"}function PR(t){return N5(t)&&AR(t)}function N5(t){for(const e of t.filters)if(e instanceof Or)return!1;return!0}function Uv(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+xl(t.value);if(PR(t))return t.filters.map(e=>Uv(e)).join(",");{const e=t.filters.map(n=>Uv(n)).join(",");return`${t.op}(${e})`}}function RR(t,e){return t instanceof Pt?function(r,i){return i instanceof Pt&&r.op===i.op&&r.field.isEqual(i.field)&&si(r.value,i.value)}(t,e):t instanceof Or?function(r,i){return i instanceof Or&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&RR(o,i.filters[a]),!0):!1}(t,e):void fe()}function NR(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${xl(n.value)}`}(t):t instanceof Or?function(n){return n.op.toString()+" {"+n.getFilters().map(NR).join(" ,")+"}"}(t):"Filter"}class D5 extends Pt{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class O5 extends Pt{constructor(e,n){super(e,"in",n),this.keys=DR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class M5 extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=DR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function DR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class j5 extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ix(n)&&Bu(n.arrayValue,this.value)}}class L5 extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bu(this.value.arrayValue,n)}}class V5 extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Bu(this.value.arrayValue,n)}}class F5 extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ix(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function GE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new U5(t,e,n,r,i,s,o)}function sx(t){const e=ge(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Uv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),cm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xl(r)).join(",")),e.ue=n}return e.ue}function ox(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!R5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!KE(t.startAt,e.startAt)&&KE(t.endAt,e.endAt)}function Bv(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function B5(t,e,n,r,i,s,o,a){return new sa(t,e,n,r,i,s,o,a)}function um(t){return new sa(t)}function YE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function OR(t){return t.collectionGroup!==null}function tu(t){const e=ge(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Zt(Qt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new zu(s,r))}),n.has(Qt.keyField().canonicalString())||e.ce.push(new zu(Qt.keyField(),r))}return e.ce}function ei(t){const e=ge(t);return e.le||(e.le=z5(e,tu(t))),e.le}function z5(t,e){if(t.limitType==="F")return GE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new zu(i.field,s)});const n=t.endAt?new hp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new hp(t.startAt.position,t.startAt.inclusive):null;return GE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function zv(t,e){const n=t.filters.concat([e]);return new sa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function dp(t,e,n){return new sa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hm(t,e){return ox(ei(t),ei(e))&&t.limitType===e.limitType}function MR(t){return`${sx(ei(t))}|lt:${t.limitType}`}function Ea(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>NR(i)).join(", ")}]`),cm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>xl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>xl(i)).join(",")),`Target(${r})`}(ei(t))}; limitType=${t.limitType})`}function dm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of tu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=qE(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,tu(r),i)||r.endAt&&!function(o,a,l){const c=qE(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,tu(r),i))}(t,e)}function $5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jR(t){return(e,n)=>{let r=!1;for(const i of tu(t)){const s=W5(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function W5(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?_l(l,c):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return SR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=new dt(le.comparator);function $i(){return H5}const LR=new dt(le.comparator);function Dc(...t){let e=LR;for(const n of t)e=e.insert(n.key,n);return e}function VR(t){let e=LR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ao(){return nu()}function FR(){return nu()}function nu(){return new Vl(t=>t.toString(),(t,e)=>t.isEqual(e))}const q5=new dt(le.comparator),K5=new Zt(le.comparator);function Se(...t){let e=K5;for(const n of t)e=e.add(n);return e}const G5=new Zt(Ne);function Y5(){return G5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:up(e)?"-0":e}}function UR(t){return{integerValue:""+t}}function Q5(t,e){return k5(e)?UR(e):ax(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this._=void 0}}function X5(t,e,n){return t instanceof $u?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&nx(s)&&(s=rx(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Wu?zR(t,e):t instanceof Hu?$R(t,e):function(i,s){const o=BR(i,s),a=QE(o)+QE(i.Pe);return Fv(o)&&Fv(i.Pe)?UR(a):ax(i.serializer,a)}(t,e)}function J5(t,e,n){return t instanceof Wu?zR(t,e):t instanceof Hu?$R(t,e):n}function BR(t,e){return t instanceof fp?function(r){return Fv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class $u extends fm{}class Wu extends fm{constructor(e){super(),this.elements=e}}function zR(t,e){const n=WR(e);for(const r of t.elements)n.some(i=>si(i,r))||n.push(r);return{arrayValue:{values:n}}}class Hu extends fm{constructor(e){super(),this.elements=e}}function $R(t,e){let n=WR(e);for(const r of t.elements)n=n.filter(i=>!si(i,r));return{arrayValue:{values:n}}}class fp extends fm{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function QE(t){return xt(t.integerValue||t.doubleValue)}function WR(t){return ix(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e,n){this.field=e,this.transform=n}}function ez(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Wu&&i instanceof Wu||r instanceof Hu&&i instanceof Hu?vl(r.elements,i.elements,si):r instanceof fp&&i instanceof fp?si(r.Pe,i.Pe):r instanceof $u&&i instanceof $u}(t.transform,e.transform)}class tz{constructor(e,n){this.version=e,this.transformResults=n}}class An{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pm{}function HR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mm(t.key,An.none()):new wh(t.key,t.data,An.none());{const n=t.data,r=Vn.empty();let i=new Zt(Qt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Xs(t.key,r,new Xn(i.toArray()),An.none())}}function nz(t,e,n){t instanceof wh?function(i,s,o){const a=i.value.clone(),l=JE(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Xs?function(i,s,o){if(!vf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=JE(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(qR(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ru(t,e,n,r){return t instanceof wh?function(s,o,a,l){if(!vf(s.precondition,o))return a;const c=s.value.clone(),u=ZE(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xs?function(s,o,a,l){if(!vf(s.precondition,o))return a;const c=ZE(s.fieldTransforms,l,o),u=o.data;return u.setAll(qR(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return vf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function rz(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=BR(r.transform,i||null);s!=null&&(n===null&&(n=Vn.empty()),n.set(r.field,s))}return n||null}function XE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vl(r,i,(s,o)=>ez(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wh extends pm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xs extends pm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function JE(t,e,n){const r=new Map;Ve(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,J5(o,a,n[i]))}return r}function ZE(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,X5(s,o,e))}return r}class mm extends pm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iz extends pm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&nz(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ru(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ru(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=FR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=HR(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Se())}isEqual(e){return this.batchId===e.batchId&&vl(this.mutations,e.mutations,(n,r)=>XE(n,r))&&vl(this.baseMutations,e.baseMutations,(n,r)=>XE(n,r))}}class lx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ve(e.mutations.length===r.length);let i=function(){return q5}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new lx(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Ie;function lz(t){switch(t){default:return fe();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function KR(t){if(t===void 0)return zi("GRPC error has no .code"),B.UNKNOWN;switch(t){case Ct.OK:return B.OK;case Ct.CANCELLED:return B.CANCELLED;case Ct.UNKNOWN:return B.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return B.INTERNAL;case Ct.UNAVAILABLE:return B.UNAVAILABLE;case Ct.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Ct.NOT_FOUND:return B.NOT_FOUND;case Ct.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Ct.ABORTED:return B.ABORTED;case Ct.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Ct.DATA_LOSS:return B.DATA_LOSS;default:return fe()}}(Ie=Ct||(Ct={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uz=new jo([4294967295,4294967295],0);function eS(t){const e=cz().encode(t),n=new yR;return n.update(e),new Uint8Array(n.digest())}function tS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new jo([n,r],0),new jo([i,s],0)]}class cx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oc(`Invalid padding: ${n}`);if(r<0)throw new Oc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=jo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(jo.fromNumber(r)));return i.compare(uz)===1&&(i=new jo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=eS(e),[r,i]=tS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new cx(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=eS(e),[r,i]=tS(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,bh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gm(me.min(),i,new dt(Ne),$i(),Se())}}class bh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bh(r,n,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class GR{constructor(e,n){this.targetId=e,this.me=n}}class YR{constructor(e,n,r=tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class nS{constructor(){this.fe=0,this.ge=iS(),this.pe=tn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Se(),n=Se(),r=Se();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fe()}}),new bh(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=iS()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hz{constructor(e){this.Le=e,this.Be=new Map,this.ke=$i(),this.qe=rS(),this.Qe=new dt(Ne)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Bv(s))if(r===0){const o=new le(s.path);this.Ue(n,o,mn.newNoDocument(o,me.min()))}else Ve(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Yo(r).toUint8Array()}catch(l){if(l instanceof kR)return yl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new cx(o,i,s)}catch(l){return yl(l instanceof Oc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Bv(a.target)){const l=new le(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,mn.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Se();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new gm(e,n,this.Qe,this.ke,r);return this.ke=$i(),this.qe=rS(),this.Qe=new dt(Ne),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new nS,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Zt(Ne),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new nS),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function rS(){return new dt(le.comparator)}function iS(){return new dt(le.comparator)}const dz={asc:"ASCENDING",desc:"DESCENDING"},fz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pz={and:"AND",or:"OR"};class mz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $v(t,e){return t.useProto3Json||cm(e)?e:{value:e}}function pp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gz(t,e){return pp(t,e.toTimestamp())}function ti(t){return Ve(!!t),me.fromTimestamp(function(n){const r=Us(n);return new jt(r.seconds,r.nanos)}(t))}function ux(t,e){return Wv(t,e).canonicalString()}function Wv(t,e){const n=function(i){return new Ke(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function XR(t){const e=Ke.fromString(t);return Ve(nN(e)),e}function Hv(t,e){return ux(t.databaseId,e.path)}function Wg(t,e){const n=XR(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(ZR(n))}function JR(t,e){return ux(t.databaseId,e)}function yz(t){const e=XR(t);return e.length===4?Ke.emptyPath():ZR(e)}function qv(t){return new Ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ZR(t){return Ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function sS(t,e,n){return{name:Hv(t,e),fields:n.value.mapValue.fields}}function vz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Ve(u===void 0||typeof u=="string"),tn.fromBase64String(u||"")):(Ve(u===void 0||u instanceof Buffer||u instanceof Uint8Array),tn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?B.UNKNOWN:KR(c.code);return new ne(u,c.message||"")}(o);n=new YR(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Wg(t,r.document.name),s=ti(r.document.updateTime),o=r.document.createTime?ti(r.document.createTime):me.min(),a=new Vn({mapValue:{fields:r.document.fields}}),l=mn.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new _f(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Wg(t,r.document),s=r.readTime?ti(r.readTime):me.min(),o=mn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new _f([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Wg(t,r.document),s=r.removedTargetIds||[];n=new _f([],s,i,null)}else{if(!("filter"in e))return fe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new az(i,s),a=r.targetId;n=new GR(a,o)}}return n}function _z(t,e){let n;if(e instanceof wh)n={update:sS(t,e.key,e.value)};else if(e instanceof mm)n={delete:Hv(t,e.key)};else if(e instanceof Xs)n={update:sS(t,e.key,e.data),updateMask:Iz(e.fieldMask)};else{if(!(e instanceof iz))return fe();n={verify:Hv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof $u)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof fp)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:gz(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe()}(t,e.precondition)),n}function xz(t,e){return t&&t.length>0?(Ve(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ti(i.updateTime):ti(s);return o.isEqual(me.min())&&(o=ti(s)),new tz(o,i.transformResults||[])}(n,e))):[]}function wz(t,e){return{documents:[JR(t,e.path)]}}function bz(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=JR(t,i);const s=function(c){if(c.length!==0)return tN(Or.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:Sa(p.field),direction:Sz(p.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=$v(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function Tz(t){let e=yz(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ve(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(f){const p=eN(f);return p instanceof Or&&PR(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(y){return new zu(ka(y.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,cm(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new hp(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new hp(m,p)}(n.endAt)),B5(e,i,o,s,a,"F",l,c)}function Ez(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function eN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ka(n.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ka(n.unaryFilter.field);return Pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ka(n.unaryFilter.field);return Pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ka(n.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(ka(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Or.create(n.compositeFilter.filters.map(r=>eN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function Sz(t){return dz[t]}function kz(t){return fz[t]}function Cz(t){return pz[t]}function Sa(t){return{fieldPath:t.canonicalString()}}function ka(t){return Qt.fromServerFormat(t.fieldPath)}function tN(t){return t instanceof Pt?function(n){if(n.op==="=="){if(HE(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NAN"}};if(WE(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(HE(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NAN"}};if(WE(n.value))return{unaryFilter:{field:Sa(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sa(n.field),op:kz(n.op),value:n.value}}}(t):t instanceof Or?function(n){const r=n.getFilters().map(i=>tN(i));return r.length===1?r[0]:{compositeFilter:{op:Cz(n.op),filters:r}}}(t):fe()}function Iz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function nN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n,r,i,s=me.min(),o=me.min(),a=tn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e){this.ct=e}}function Pz(t){const e=Tz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(){this.un=new Nz}addToCollectionParentIndex(e,n){return this.un.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(Fs.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class Nz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Zt(Ke.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zt(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new wl(0)}static kn(){return new wl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(){this.changes=new Vl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ru(r.mutation,i,Xn.empty(),jt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Se()){const i=Ao();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Dc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ao();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=$i();const o=nu(),a=function(){return nu()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Xs)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),ru(u.mutation,c,u.mutation.getFieldMask(),jt.now())):o.set(c.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new Oz(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=nu();let i=new dt((o,a)=>o-a),s=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Xn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(i.get(a.batchId)||Se()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=FR();u.forEach(p=>{if(!s.has(p)){const m=HR(n.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):OR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):W.resolve(Ao());let a=-1,l=s;return o.next(c=>W.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?W.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Se())).next(u=>({batchId:a,changes:VR(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=Dc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Dc();return this.indexManager.getCollectionParents(e,s).next(a=>W.forEach(a,l=>{const c=function(f,p){return new sa(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,mn.newInvalidDocument(u)))});let a=Dc();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&ru(u.mutation,c,Xn.empty(),jt.now()),dm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return W.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ti(i.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Pz(i.bundledQuery),readTime:ti(i.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(){this.overlays=new dt(le.comparator),this.Ir=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ao();return W.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),W.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const i=Ao(),s=n.length+1,o=new le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return W.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new dt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Ao(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Ao(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return W.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new oz(n,r));let s=this.Ir.get(n);s===void 0&&(s=Se(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(){this.Tr=new Zt(Ut.Er),this.dr=new Zt(Ut.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ut(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ut(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new le(new Ke([])),r=new Ut(n,e),i=new Ut(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new le(new Ke([])),r=new Ut(n,e),i=new Ut(n,e+1);let s=Se();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ut(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ut{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return le.comparator(e.key,n.key)||Ne(e.wr,n.wr)}static Ar(e,n){return Ne(e.wr,n.wr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Zt(Ut.Er)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sz(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Ut(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ut(n,0),i=new Ut(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Zt(Ne);return n.forEach(i=>{const s=new Ut(i,0),o=new Ut(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),W.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;le.isDocumentKey(s)||(s=s.child(""));const o=new Ut(new le(s),0);let a=new Zt(Ne);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),W.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return W.forEach(n.mutations,i=>{const s=new Ut(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ut(n,0),i=this.br.firstAfterOrEqual(r);return W.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(e){this.Mr=e,this.docs=function(){return new dt(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(n))}getEntries(e,n){let r=$i();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mn.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=$i();const o=n.path,a=new le(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||b5(w5(u),r)<=0||(i.has(u.key)||dm(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,n,r,i){fe()}Or(e,n){return W.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Bz(this)}getSize(e){return W.resolve(this.size)}}class Bz extends Dz{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),W.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(e){this.persistence=e,this.Nr=new Vl(n=>sx(n),ox),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new hx,this.targetCount=0,this.kr=wl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),W.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new wl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Kn(n),W.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e,n){this.qr={},this.overlays={},this.Qr=new tx(0),this.Kr=!1,this.Kr=!0,this.$r=new Vz,this.referenceDelegate=e(this),this.Ur=new zz(this),this.indexManager=new Rz,this.remoteDocumentCache=function(i){return new Uz(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Az(n),this.Gr=new jz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Lz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Fz(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const i=new Wz(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return W.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Wz extends E5{constructor(e){super(),this.currentSequenceNumber=e}}class dx{constructor(e){this.persistence=e,this.Jr=new hx,this.Yr=null}static Zr(e){return new dx(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),W.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.Xr,r=>{const i=le.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return W.or([()=>W.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Se(),i=Se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new fx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return DF()?8:S5(bn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Hz;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(gc()<=ke.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Ea(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),W.resolve()):(gc()<=ke.DEBUG&&se("QueryEngine","Query:",Ea(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(gc()<=ke.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Ea(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ei(n))):W.resolve())}Yi(e,n){if(YE(n))return W.resolve(null);let r=ei(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=dp(n,null,"F"),r=ei(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Se(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,dp(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return YE(n)||i.isEqual(me.min())?W.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?W.resolve(null):(gc()<=ke.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ea(n)),this.rs(e,o,n,x5(i,-1)).next(a=>a))})}ts(e,n){let r=new Zt(jR(e));return n.forEach((i,s)=>{dm(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return gc()<=ke.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Ea(n)),this.Ji.getDocumentsMatchingQuery(e,n,Fs.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new dt(Ne),this._s=new Vl(s=>sx(s),ox),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Mz(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Gz(t,e,n,r){return new Kz(t,e,n,r)}async function rN(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Se();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Yz(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,p=f.keys();let m=W.resolve();return p.forEach(y=>{m=m.next(()=>u.getEntry(l,y)).next(_=>{const x=c.docVersions.get(y);Ve(x!==null),_.version.compareTo(x)<0&&(f.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Se();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function iN(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Qz(t,e){const n=ge(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((u,f)=>{const p=i.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,u.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,u.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(tn.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(f,m),function(_,x,v){return _.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,m,u)&&a.push(n.Ur.updateTargetData(s,m))});let l=$i(),c=Se();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Xz(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(me.min())){const u=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return W.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function Xz(t,e,n){let r=Se(),i=Se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=$i();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):se("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function Jz(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Zz(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new gs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Kv(t,e,n){const r=ge(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!xh(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function oS(t,e,n){const r=ge(t);let i=me.min(),s=Se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=ge(l),p=f._s.get(u);return p!==void 0?W.resolve(f.os.get(p)):f.Ur.getTargetData(c,u)}(r,o,ei(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:me.min(),n?s:Se())).next(a=>(e3(r,$5(e),a),{documents:a,Ts:s})))}function e3(t,e,n){let r=t.us.get(e)||me.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class aS{constructor(){this.activeTargetIds=Y5()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t3{constructor(){this.so=new aS,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new aS,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd=null;function Hg(){return kd===null?kd=function(){return 268435456+Math.round(2147483648*Math.random())}():kd++,"0x"+kd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class s3 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Hg(),l=this.xo(n,r.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(u=>(se("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw yl("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ll}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=r3[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Hg();return new Promise((o,a)=>{const l=new vR;l.setWithCredentials(!0),l.listenOnce(_R.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gf.NO_ERROR:const u=l.getResponseJson();se(cn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case gf.TIMEOUT:se(cn,`RPC '${e}' ${s} timed out`),a(new ne(B.DEADLINE_EXCEEDED,"Request time out"));break;case gf.HTTP_ERROR:const f=l.getStatus();if(se(cn,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(v)>=0?v:B.UNKNOWN}(m.status);a(new ne(y,m.message))}else a(new ne(B.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ne(B.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{se(cn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);se(cn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Hg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bR(),a=wR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");se(cn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const f=o.createWebChannel(u,l);let p=!1,m=!1;const y=new i3({Io:x=>{m?se(cn,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(p||(se(cn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),se(cn,`RPC '${e}' stream ${i} sending:`,x),f.send(x))},To:()=>f.close()}),_=(x,v,w)=>{x.listen(v,E=>{try{w(E)}catch(P){setTimeout(()=>{throw P},0)}})};return _(f,Nc.EventType.OPEN,()=>{m||(se(cn,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),_(f,Nc.EventType.CLOSE,()=>{m||(m=!0,se(cn,`RPC '${e}' stream ${i} transport closed`),y.So())}),_(f,Nc.EventType.ERROR,x=>{m||(m=!0,yl(cn,`RPC '${e}' stream ${i} transport errored:`,x),y.So(new ne(B.UNAVAILABLE,"The operation could not be completed")))}),_(f,Nc.EventType.MESSAGE,x=>{var v;if(!m){const w=x.data[0];Ve(!!w);const E=w,P=E.error||((v=E[0])===null||v===void 0?void 0:v.error);if(P){se(cn,`RPC '${e}' stream ${i} received error:`,P);const C=P.status;let M=function(k){const I=Ct[k];if(I!==void 0)return KR(I)}(C),S=P.message;M===void 0&&(M=B.INTERNAL,S="Unknown error status: "+C+" with message "+P.message),m=!0,y.So(new ne(M,S)),f.close()}else se(cn,`RPC '${e}' stream ${i} received:`,w),y.bo(w)}}),_(a,xR.STAT_EVENT,x=>{x.stat===Lv.PROXY?se(cn,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Lv.NOPROXY&&se(cn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function qg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t){return new mz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new sN(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(zi(n.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ne(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o3 extends oN{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=vz(this.serializer,e),r=function(s){if(!("targetChange"in s))return me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?ti(o.readTime):me.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=qv(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Bv(l)?{documents:wz(s,l)}:{query:bz(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=QR(s,o.resumeToken);const c=$v(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(me.min())>0){a.readTime=pp(s,o.snapshotVersion.toTimestamp());const c=$v(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Ez(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=qv(this.serializer),n.removeTarget=e,this.a_(n)}}class a3 extends oN{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=xz(e.writeResults,e.commitTime),r=ti(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=qv(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_z(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ne(B.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Wv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(B.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Wv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(B.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class c3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(zi(n),this.D_=!1):se("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{oa(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ge(l);c.L_.add(4),await Th(c),c.q_.set("Unknown"),c.L_.delete(4),await vm(c)}(this))})}),this.q_=new c3(r,i)}}async function vm(t){if(oa(t))for(const e of t.B_)await e(!0)}async function Th(t){for(const e of t.B_)await e(!1)}function aN(t,e){const n=ge(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),yx(n)?gx(n):Fl(n).r_()&&mx(n,e))}function px(t,e){const n=ge(t),r=Fl(n);n.N_.delete(e),r.r_()&&lN(n,e),n.N_.size===0&&(r.r_()?r.o_():oa(n)&&n.q_.set("Unknown"))}function mx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fl(t).A_(e)}function lN(t,e){t.Q_.xe(e),Fl(t).R_(e)}function gx(t){t.Q_=new hz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Fl(t).start(),t.q_.v_()}function yx(t){return oa(t)&&!Fl(t).n_()&&t.N_.size>0}function oa(t){return ge(t).L_.size===0}function cN(t){t.Q_=void 0}async function h3(t){t.q_.set("Online")}async function d3(t){t.N_.forEach((e,n)=>{mx(t,e)})}async function f3(t,e){cN(t),yx(t)?(t.q_.M_(e),gx(t)):t.q_.set("Unknown")}async function p3(t,e,n){if(t.q_.set("Online"),e instanceof YR&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mp(t,r)}else if(e instanceof _f?t.Q_.Ke(e):e instanceof GR?t.Q_.He(e):t.Q_.We(e),!n.isEqual(me.min()))try{const r=await iN(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(tn.EMPTY_BYTE_STRING,u.snapshotVersion)),lN(s,l);const f=new gs(u.target,l,c,u.sequenceNumber);mx(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await mp(t,r)}}async function mp(t,e,n){if(!xh(e))throw e;t.L_.add(1),await Th(t),t.q_.set("Offline"),n||(n=()=>iN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await vm(t)})}function uN(t,e){return e().catch(n=>mp(t,n,e))}async function _m(t){const e=ge(t),n=Bs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;m3(e);)try{const i=await Jz(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,g3(e,i)}catch(i){await mp(e,i)}hN(e)&&dN(e)}function m3(t){return oa(t)&&t.O_.length<10}function g3(t,e){t.O_.push(e);const n=Bs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function hN(t){return oa(t)&&!Bs(t).n_()&&t.O_.length>0}function dN(t){Bs(t).start()}async function y3(t){Bs(t).p_()}async function v3(t){const e=Bs(t);for(const n of t.O_)e.m_(n.mutations)}async function _3(t,e,n){const r=t.O_.shift(),i=lx.from(r,e,n);await uN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await _m(t)}async function x3(t,e){e&&Bs(t).V_&&await async function(r,i){if(function(o){return lz(o)&&o!==B.ABORTED}(i.code)){const s=r.O_.shift();Bs(r).s_(),await uN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await _m(r)}}(t,e),hN(t)&&dN(t)}async function cS(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=oa(n);n.L_.add(3),await Th(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await vm(n)}async function w3(t,e){const n=ge(t);e?(n.L_.delete(2),await vm(n)):e||(n.L_.add(2),await Th(n),n.q_.set("Unknown"))}function Fl(t){return t.K_||(t.K_=function(n,r,i){const s=ge(n);return s.w_(),new o3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:h3.bind(null,t),Ro:d3.bind(null,t),mo:f3.bind(null,t),d_:p3.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),yx(t)?gx(t):t.q_.set("Unknown")):(await t.K_.stop(),cN(t))})),t.K_}function Bs(t){return t.U_||(t.U_=function(n,r,i){const s=ge(n);return s.w_(),new a3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:y3.bind(null,t),mo:x3.bind(null,t),f_:v3.bind(null,t),g_:_3.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await _m(t)):(await t.U_.stop(),t.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new vx(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _x(t,e){if(zi("AsyncQueue",`${e}: ${t}`),xh(t))return new ne(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=Dc(),this.sortedSet=new dt(this.comparator)}static emptySet(e){return new il(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof il)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new il;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(){this.W_=new dt(le.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class bl{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new bl(e,n,il.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class T3{constructor(){this.queries=hS(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ge(n),s=i.queries;i.queries=hS(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ne(B.ABORTED,"Firestore shutting down"))}}function hS(){return new Vl(t=>MR(t),hm)}async function xx(t,e){const n=ge(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new b3,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=_x(o,`Initialization of query '${Ea(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&bx(n)}async function wx(t,e){const n=ge(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function E3(t,e){const n=ge(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&bx(n)}function S3(t,e,n){const r=ge(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function bx(t){t.Y_.forEach(e=>{e.next()})}var Gv,dS;(dS=Gv||(Gv={})).ea="default",dS.Cache="cache";class Tx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new bl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Gv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.key=e}}class pN{constructor(e){this.key=e}}class k3{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Se(),this.mutatedKeys=Se(),this.Aa=jR(e),this.Ra=new il(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new uS,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const p=i.get(u),m=dm(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;p&&m?p.data.isEqual(m.data)?y!==_&&(r.track({type:3,doc:m}),x=!0):this.ga(p,m)||(r.track({type:2,doc:m}),x=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),x=!0):p&&!m&&(r.track({type:1,doc:p}),x=!0,(l||c)&&(a=!0)),x&&(m?(o=o.add(m),s=_?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,f)=>function(m,y){const _=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return _(m)-_(y)}(u.type,f.type)||this.Aa(u.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new bl(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new uS,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new pN(r))}),this.da.forEach(r=>{e.has(r)||n.push(new fN(r))}),n}ba(e){this.Ta=e.Ts,this.da=Se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return bl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class C3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class I3{constructor(e){this.key=e,this.va=!1}}class A3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Vl(a=>MR(a),hm),this.Ma=new Map,this.xa=new Set,this.Oa=new dt(le.comparator),this.Na=new Map,this.La=new hx,this.Ba={},this.ka=new Map,this.qa=wl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function P3(t,e,n=!0){const r=xN(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await mN(r,e,n,!0),i}async function R3(t,e){const n=xN(t);await mN(n,e,!0,!1)}async function mN(t,e,n,r){const i=await Zz(t.localStore,ei(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await N3(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&aN(t.remoteStore,i),a}async function N3(t,e,n,r,i){t.Ka=(f,p,m)=>async function(_,x,v,w){let E=x.view.ma(v);E.ns&&(E=await oS(_.localStore,x.query,!1).then(({documents:S})=>x.view.ma(S,E)));const P=w&&w.targetChanges.get(x.targetId),C=w&&w.targetMismatches.get(x.targetId)!=null,M=x.view.applyChanges(E,_.isPrimaryClient,P,C);return pS(_,x.targetId,M.wa),M.snapshot}(t,f,p,m);const s=await oS(t.localStore,e,!0),o=new k3(e,s.Ts),a=o.ma(s.documents),l=bh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);pS(t,n,c.wa);const u=new C3(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function D3(t,e,n){const r=ge(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!hm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Kv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&px(r.remoteStore,i.targetId),Yv(r,i.targetId)}).catch(_h)):(Yv(r,i.targetId),await Kv(r.localStore,i.targetId,!0))}async function O3(t,e){const n=ge(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),px(n.remoteStore,r.targetId))}async function M3(t,e,n){const r=z3(t);try{const i=await function(o,a){const l=ge(o),c=jt.now(),u=a.reduce((m,y)=>m.add(y.key),Se());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=$i(),_=Se();return l.cs.getEntries(m,u).next(x=>{y=x,y.forEach((v,w)=>{w.isValidDocument()||(_=_.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(x=>{f=x;const v=[];for(const w of a){const E=rz(w,f.get(w.key).overlayedDocument);E!=null&&v.push(new Xs(w.key,E,CR(E.value.mapValue),An.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,v,a)}).next(x=>{p=x;const v=x.applyToLocalDocumentSet(f,_);return l.documentOverlayCache.saveOverlays(m,x.batchId,v)})}).then(()=>({batchId:p.batchId,changes:VR(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new dt(Ne)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Eh(r,i.changes),await _m(r.remoteStore)}catch(i){const s=_x(i,"Failed to persist write");n.reject(s)}}async function gN(t,e){const n=ge(t);try{const r=await Qz(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ve(o.va):i.removedDocuments.size>0&&(Ve(o.va),o.va=!1))}),await Eh(n,r,e)}catch(r){await _h(r)}}function fS(t,e,n){const r=ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ge(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.j_)p.Z_(a)&&(c=!0)}),c&&bx(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function j3(t,e,n){const r=ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new dt(le.comparator);o=o.insert(s,mn.newNoDocument(s,me.min()));const a=Se().add(s),l=new gm(me.min(),new Map,new dt(Ne),o,a);await gN(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Ex(r)}else await Kv(r.localStore,e,!1).then(()=>Yv(r,e,n)).catch(_h)}async function L3(t,e){const n=ge(t),r=e.batch.batchId;try{const i=await Yz(n.localStore,e);vN(n,r,null),yN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Eh(n,i)}catch(i){await _h(i)}}async function V3(t,e,n){const r=ge(t);try{const i=await function(o,a){const l=ge(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Ve(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);vN(r,e,n),yN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Eh(r,i)}catch(i){await _h(i)}}function yN(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function vN(t,e,n){const r=ge(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Yv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||_N(t,r)})}function _N(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(px(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ex(t))}function pS(t,e,n){for(const r of n)r instanceof fN?(t.La.addReference(r.key,e),F3(t,r)):r instanceof pN?(se("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||_N(t,r.key)):fe()}function F3(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(se("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ex(t))}function Ex(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new le(Ke.fromString(e)),r=t.qa.next();t.Na.set(r,new I3(n)),t.Oa=t.Oa.insert(n,r),aN(t.remoteStore,new gs(ei(um(n.path)),r,"TargetPurposeLimboResolution",tx.oe))}}async function Eh(t,e,n){const r=ge(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=fx.Wi(l.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const u=ge(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>W.forEach(c,p=>W.forEach(p.$i,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>W.forEach(p.Ui,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!xh(f))throw f;se("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=u.os.get(p),y=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(y);u.os=u.os.insert(p,_)}}}(r.localStore,s))}async function U3(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await rN(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ne(B.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Eh(n,r.hs)}}function B3(t,e){const n=ge(t),r=n.Na.get(e);if(r&&r.va)return Se().add(r.key);{let i=Se();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function xN(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=j3.bind(null,e),e.Ca.d_=E3.bind(null,e.eventManager),e.Ca.$a=S3.bind(null,e.eventManager),e}function z3(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=V3.bind(null,e),e}class gp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ym(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Gz(this.persistence,new qz,e.initialUser,this.serializer)}Ga(e){return new $z(dx.Zr,this.serializer)}Wa(e){return new t3}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gp.provider={build:()=>new gp};class Qv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=U3.bind(null,this.syncEngine),await w3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new T3}()}createDatastore(e){const n=ym(e.databaseInfo.databaseId),r=function(s){return new s3(s)}(e.databaseInfo);return function(s,o,a,l){return new l3(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new u3(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>fS(this.syncEngine,n,0),function(){return lS.D()?new lS:new n3}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const f=new A3(i,s,o,a,l,c);return u&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ge(i);se("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Th(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Qv.provider={build:()=>new Qv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $3{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=fn.UNAUTHENTICATED,this.clientId=ER.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{se("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_x(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Kg(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await rN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function mS(t,e){t.asyncQueue.verifyOperationInProgress();const n=await W3(t);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>cS(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>cS(e.remoteStore,i)),t._onlineComponents=e}async function W3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Kg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===B.FAILED_PRECONDITION||i.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;yl("Error using user provided cache. Falling back to memory cache: "+n),await Kg(t,new gp)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await Kg(t,new gp);return t._offlineComponents}async function wN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await mS(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await mS(t,new Qv))),t._onlineComponents}function H3(t){return wN(t).then(e=>e.syncEngine)}async function yp(t){const e=await wN(t),n=e.eventManager;return n.onListen=P3.bind(null,e.syncEngine),n.onUnlisten=D3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=R3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=O3.bind(null,e.syncEngine),n}function q3(t,e,n={}){const r=new Ni;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new Sx({next:p=>{u.Za(),o.enqueueAndForget(()=>wx(s,f));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new ne(B.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new ne(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new Tx(um(a.path),u,{includeMetadataChanges:!0,_a:!0});return xx(s,f)}(await yp(t),t.asyncQueue,e,n,r)),r.promise}function K3(t,e,n={}){const r=new Ni;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new Sx({next:p=>{u.Za(),o.enqueueAndForget(()=>wx(s,f)),p.fromCache&&l.source==="server"?c.reject(new ne(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new Tx(a,u,{includeMetadataChanges:!0,_a:!0});return xx(s,f)}(await yp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t,e,n){if(!n)throw new ne(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function G3(t,e,n,r){if(e===!0&&r===!0)throw new ne(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yS(t){if(!le.isDocumentKey(t))throw new ne(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vS(t){if(le.isDocumentKey(t))throw new ne(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function xm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function _n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xm(t);throw new ne(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Y3(t,e){if(e<=0)throw new ne(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ne(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ne(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ne(B.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _S({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _S(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new h5;switch(r.type){case"firstParty":return new m5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=gS.get(n);r&&(se("ComponentProvider","Removing Datastore"),gS.delete(n),r.terminate())}(this),Promise.resolve()}}function Q3(t,e,n,r={}){var i;const s=(t=_n(t,Sh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=fn.MOCK_USER;else{a=RP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ne(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new fn(c)}t._authCredentials=new d5(new TR(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hi(this.firestore,e,this._query)}}class xn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class Ds extends hi{constructor(e,n,r){super(e,n,um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new le(e))}withConverter(e){return new Ds(this.firestore,e,this._path)}}function bt(t,e,...n){if(t=ze(t),kx("collection","path",e),t instanceof Sh){const r=Ke.fromString(e,...n);return vS(r),new Ds(t,null,r)}{if(!(t instanceof xn||t instanceof Ds))throw new ne(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ke.fromString(e,...n));return vS(r),new Ds(t.firestore,null,r)}}function iu(t,e){if(t=_n(t,Sh),kx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ne(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hi(t,null,function(r){return new sa(Ke.emptyPath(),r)}(e))}function Oe(t,e,...n){if(t=ze(t),arguments.length===1&&(e=ER.newId()),kx("doc","path",e),t instanceof Sh){const r=Ke.fromString(e,...n);return yS(r),new xn(t,null,new le(r))}{if(!(t instanceof xn||t instanceof Ds))throw new ne(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ke.fromString(e,...n));return yS(r),new xn(t.firestore,t instanceof Ds?t.converter:null,new le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new sN(this,"async_queue_retry"),this.Vu=()=>{const r=qg();r&&se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=qg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=qg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ni;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xh(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw zi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=vx.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function wS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class oi extends Sh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new xS,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xS(e),this._firestoreClient=void 0,await e}}}function X3(t,e){const n=typeof t=="object"?t:W0(),r=typeof t=="string"?t:"(default)",i=im(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=IP("firestore");s&&Q3(i,...s)}return i}function kh(t){if(t._terminated)throw new ne(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||J3(t),t._firestoreClient}function J3(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new I5(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,bN(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new $3(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tl(tn.fromBase64String(e))}catch(n){throw new ne(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tl(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=/^__.*__$/;class e6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new wh(e,this.data,n,this.fieldTransforms)}}class TN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function EN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class Ax{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ax(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return vp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(EN(this.Cu)&&Z3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class t6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ym(e)}Qu(e,n,r,i=!1){return new Ax({Cu:e,methodName:n,qu:r,path:Qt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ih(t){const e=t._freezeSettings(),n=ym(t._databaseId);return new t6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Px(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Nx("Data must be an object, but it was:",o,r);const a=CN(r,o);let l,c;if(s.merge)l=new Xn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const f of s.mergeFields){const p=Xv(e,f,n);if(!o.contains(p))throw new ne(B.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);AN(u,p)||u.push(p)}l=new Xn(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new e6(new Vn(a),l,c)}class bm extends wm{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bm}}class Rx extends wm{_toFieldTransform(e){return new Z5(e.path,new $u)}isEqual(e){return e instanceof Rx}}function SN(t,e,n,r){const i=t.Qu(1,e,n);Nx("Data must be an object, but it was:",i,r);const s=[],o=Vn.empty();ia(r,(l,c)=>{const u=Dx(e,l,n);c=ze(c);const f=i.Nu(u);if(c instanceof bm)s.push(u);else{const p=Ah(c,f);p!=null&&(s.push(u),o.set(u,p))}});const a=new Xn(s);return new TN(o,a,i.fieldTransforms)}function kN(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Xv(e,r,n)],l=[i];if(s.length%2!=0)throw new ne(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Xv(e,s[p])),l.push(s[p+1]);const c=[],u=Vn.empty();for(let p=a.length-1;p>=0;--p)if(!AN(c,a[p])){const m=a[p];let y=l[p];y=ze(y);const _=o.Nu(m);if(y instanceof bm)c.push(m);else{const x=Ah(y,_);x!=null&&(c.push(m),u.set(m,x))}}const f=new Xn(c);return new TN(u,f,o.fieldTransforms)}function n6(t,e,n,r=!1){return Ah(n,t.Qu(r?4:3,e))}function Ah(t,e){if(IN(t=ze(t)))return Nx("Unsupported field value:",e,t),CN(t,e);if(t instanceof wm)return function(r,i){if(!EN(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Ah(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Q5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=jt.fromDate(r);return{timestampValue:pp(i.serializer,s)}}if(r instanceof jt){const s=new jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pp(i.serializer,s)}}if(r instanceof Cx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tl)return{bytesValue:QR(i.serializer,r._byteString)};if(r instanceof xn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ux(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ix)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return ax(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${xm(r)}`)}(t,e)}function CN(t,e){const n={};return SR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(t,(r,i)=>{const s=Ah(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function IN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof jt||t instanceof Cx||t instanceof Tl||t instanceof xn||t instanceof wm||t instanceof Ix)}function Nx(t,e,n){if(!IN(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=xm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Xv(t,e,n){if((e=ze(e))instanceof Ch)return e._internalPath;if(typeof e=="string")return Dx(t,e);throw vp("Field path arguments must be of type string or ",t,!1,void 0,n)}const r6=new RegExp("[~\\*/\\[\\]]");function Dx(t,e,n){if(e.search(r6)>=0)throw vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ch(...e.split("."))._internalPath}catch{throw vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ne(B.INVALID_ARGUMENT,a+t+l)}function AN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class i6 extends PN{data(){return super.data()}}function Tm(t,e){return typeof e=="string"?Dx(t,e):e instanceof Ch?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ox{}class Mx extends Ox{}function Pr(t,e,...n){let r=[];e instanceof Ox&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof jx).length,a=s.filter(l=>l instanceof Em).length;if(o>1||o>0&&a>0)throw new ne(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Em extends Mx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Em(e,n,r)}_apply(e){const n=this._parse(e);return NN(e._query,n),new hi(e.firestore,e.converter,zv(e._query,n))}_parse(e){const n=Ih(e.firestore);return function(s,o,a,l,c,u,f){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ne(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){ES(f,u);const m=[];for(const y of f)m.push(TS(l,s,y));p={arrayValue:{values:m}}}else p=TS(l,s,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||ES(f,u),p=n6(a,o,f,u==="in"||u==="not-in");return Pt.create(c,u,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bS(t,e,n){const r=e,i=Tm("where",t);return Em._create(i,r,n)}class jx extends Ox{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new jx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Or.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)NN(o,l),o=zv(o,l)}(e._query,n),new hi(e.firestore,e.converter,zv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lx extends Mx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Lx(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ne(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ne(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zu(s,o)}(e._query,this._field,this._direction);return new hi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new sa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function zs(t,e="asc"){const n=e,r=Tm("orderBy",t);return Lx._create(r,n)}class Vx extends Mx{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Vx(e,n,r)}_apply(e){return new hi(e.firestore,e.converter,dp(e._query,this._limit,this._limitType))}}function Jv(t){return Y3("limit",t),Vx._create("limit",t,"F")}function TS(t,e,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new ne(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OR(e)&&n.indexOf("/")!==-1)throw new ne(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ke.fromString(n));if(!le.isDocumentKey(r))throw new ne(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $E(t,new le(r))}if(n instanceof xn)return $E(t,n._key);throw new ne(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xm(n)}.`)}function ES(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NN(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class s6{convertValue(e,n="none"){switch(Qo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ia(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>xt(o.doubleValue));return new Ix(s)}convertGeoPoint(e){return new Cx(xt(e.latitude),xt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const n=Us(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ke.fromString(e);Ve(nN(r));const i=new Uu(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(n)||zi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DN extends PN{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Tm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class xf extends DN{data(e={}){return super.data(e)}}class ON{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Mc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xf(this._firestore,this._userDataWriter,r.key,r,new Mc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new xf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new xf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Mc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:o6(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function o6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(t){t=_n(t,xn);const e=_n(t.firestore,oi);return q3(kh(e),t._key).then(n=>MN(e,t,n))}class Ux extends s6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,n)}}function SS(t){t=_n(t,hi);const e=_n(t.firestore,oi),n=kh(e),r=new Ux(e);return RN(t._query),K3(n,t._query).then(i=>new ON(e,r,t,i))}function Os(t,e,n){t=_n(t,xn);const r=_n(t.firestore,oi),i=Fx(t.converter,e,n);return Ph(r,[Px(Ih(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,An.none())])}function qu(t,e,n,...r){t=_n(t,xn);const i=_n(t.firestore,oi),s=Ih(i);let o;return o=typeof(e=ze(e))=="string"||e instanceof Ch?kN(s,"updateDoc",t._key,e,n,r):SN(s,"updateDoc",t._key,e),Ph(i,[o.toMutation(t._key,An.exists(!0))])}function Sm(t){return Ph(_n(t.firestore,oi),[new mm(t._key,An.none())])}function km(t,e){const n=_n(t.firestore,oi),r=Oe(t),i=Fx(t.converter,e);return Ph(n,[Px(Ih(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,An.exists(!1))]).then(()=>r)}function Tt(t,...e){var n,r,i;t=ze(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||wS(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(wS(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let l,c,u;if(t instanceof xn)c=_n(t.firestore,oi),u=um(t._key.path),l={next:f=>{e[o]&&e[o](MN(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=_n(t,hi);c=_n(f.firestore,oi),u=f._query;const p=new Ux(c);l={next:m=>{e[o]&&e[o](new ON(c,p,f,m))},error:e[o+1],complete:e[o+2]},RN(t._query)}return function(p,m,y,_){const x=new Sx(_),v=new Tx(m,x,y);return p.asyncQueue.enqueueAndForget(async()=>xx(await yp(p),v)),()=>{x.Za(),p.asyncQueue.enqueueAndForget(async()=>wx(await yp(p),v))}}(kh(c),u,a,l)}function Ph(t,e){return function(r,i){const s=new Ni;return r.asyncQueue.enqueueAndForget(async()=>M3(await H3(r),i,s)),s.promise}(kh(t),e)}function MN(t,e,n){const r=n.docs.get(e._key),i=new Ux(t);return new DN(t,i,e._key,r,new Mc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ih(e)}set(e,n,r){this._verifyNotCommitted();const i=Gg(e,this._firestore),s=Fx(i.converter,n,r),o=Px(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,An.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Gg(e,this._firestore);let o;return o=typeof(n=ze(n))=="string"||n instanceof Ch?kN(this._dataReader,"WriteBatch.update",s._key,n,r,i):SN(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,An.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Gg(e,this._firestore);return this._mutations=this._mutations.concat(new mm(n._key,An.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ne(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gg(t,e){if((t=ze(t)).firestore!==e)throw new ne(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function gn(){return new Rx("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t){return kh(t=_n(t,oi)),new a6(t,e=>Ph(t,e))}(function(e,n=!0){(function(i){Ll=i})(na),qo(new Vs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new oi(new f5(r.getProvider("auth-internal")),new y5(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ne(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uu(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Xr(VE,"4.7.3",e),Xr(VE,"4.7.3","esm2017")})();var l6="firebase",c6="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xr(l6,c6,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN="firebasestorage.googleapis.com",LN="storageBucket",u6=2*60*1e3,h6=10*60*1e3,d6=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft extends li{constructor(e,n,r=0){super(Yg(e),`Firebase Storage: ${n} (${Yg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ft.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var et;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(et||(et={}));function Yg(t){return"storage/"+t}function zx(){const t="An unknown error occurred, please check the error payload for server response.";return new ft(et.UNKNOWN,t)}function f6(t){return new ft(et.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function p6(t){return new ft(et.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function m6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ft(et.UNAUTHENTICATED,t)}function g6(){return new ft(et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function y6(t){return new ft(et.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function VN(){return new ft(et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function FN(){return new ft(et.CANCELED,"User canceled the upload/download.")}function v6(t){return new ft(et.INVALID_URL,"Invalid URL '"+t+"'.")}function _6(t){return new ft(et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function x6(){return new ft(et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+LN+"' property when initializing the app?")}function UN(){return new ft(et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function w6(){return new ft(et.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function b6(){return new ft(et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function T6(t){return new ft(et.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Zv(t){return new ft(et.INVALID_ARGUMENT,t)}function BN(){return new ft(et.APP_DELETED,"The Firebase app was deleted.")}function E6(t){return new ft(et.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function su(t,e){return new ft(et.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function yc(t){throw new ft(et.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Jn.makeFromUrl(e,n)}catch{return new Jn(e,"")}if(r.path==="")return r;throw _6(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const u="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${u}/b/${i}/o${p}`,"i"),y={bucket:1,path:3},_=n===jN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",v=new RegExp(`^https?://${_}/${i}/${x}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:m,indices:y,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<E.length;P++){const C=E[P],M=C.regex.exec(e);if(M){const S=M[C.indices.bucket];let b=M[C.indices.path];b||(b=""),r=new Jn(S,b),C.postModify(r);break}}if(r==null)throw v6(e);return r}}class S6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k6(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...x){c||(c=!0,e.apply(null,x))}function f(x){i=setTimeout(()=>{i=null,t(m,l())},x)}function p(){s&&clearTimeout(s)}function m(x,...v){if(c){p();return}if(x){p(),u.call(null,x,...v);return}if(l()||o){p(),u.call(null,x,...v);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,f(E)}let y=!1;function _(x){y||(y=!0,p(),!c&&(i!==null?(x||(a=2),clearTimeout(i),f(0)):x||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function C6(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(t){return t!==void 0}function A6(t){return typeof t=="function"}function P6(t){return typeof t=="object"&&!Array.isArray(t)}function Cm(t){return typeof t=="string"||t instanceof String}function kS(t){return $x()&&t instanceof Blob}function $x(){return typeof Blob<"u"}function CS(t,e,n,r){if(r<e)throw Zv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Zv(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function zN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Lo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Lo||(Lo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,n,r,i,s,o,a,l,c,u,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Cd(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Lo.NO_ERROR,l=s.getStatus();if(!a||$N(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Lo.ABORT;r(!1,new Cd(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Cd(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());I6(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=zx();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?BN():FN();o(l)}else{const l=VN();o(l)}};this.canceled_?n(!1,new Cd(!1,null,!0)):this.backoffId_=k6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&C6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Cd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function N6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function D6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function O6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function M6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function j6(t,e,n,r,i,s,o=!0){const a=zN(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return O6(c,e),N6(c,n),D6(c,s),M6(c,r),new R6(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function V6(...t){const e=L6();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if($x())return new Blob(t);throw new ft(et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function F6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U6(t){if(typeof atob>"u")throw T6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qg{constructor(e,n){this.data=e,this.contentType=n||null}}function B6(t,e){switch(t){case Gr.RAW:return new Qg(WN(e));case Gr.BASE64:case Gr.BASE64URL:return new Qg(HN(t,e));case Gr.DATA_URL:return new Qg($6(e),W6(e))}throw zx()}function WN(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function z6(t){let e;try{e=decodeURIComponent(t)}catch{throw su(Gr.DATA_URL,"Malformed data URL.")}return WN(e)}function HN(t,e){switch(t){case Gr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw su(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Gr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw su(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=U6(e)}catch(i){throw i.message.includes("polyfill")?i:su(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class qN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw su(Gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=H6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function $6(t){const e=new qN(t);return e.base64?HN(Gr.BASE64,e.rest):z6(e.rest)}function W6(t){return new qN(t).contentType}function H6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n){let r=0,i="";kS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(kS(this.data_)){const r=this.data_,i=F6(r,e,n);return i===null?null:new Ei(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ei(r,!0)}}static getBlob(...e){if($x()){const n=e.map(r=>r instanceof Ei?r.data_:r);return new Ei(V6.apply(null,n))}else{const n=e.map(o=>Cm(o)?B6(Gr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ei(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t){let e;try{e=JSON.parse(t)}catch{return null}return P6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function K6(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function GN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(t,e){return e}class Sn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||G6}}let Id=null;function Y6(t){return!Cm(t)||t.length<2?t:GN(t)}function Wx(){if(Id)return Id;const t=[];t.push(new Sn("bucket")),t.push(new Sn("generation")),t.push(new Sn("metageneration")),t.push(new Sn("name","fullPath",!0));function e(s,o){return Y6(o)}const n=new Sn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Sn("size");return i.xform=r,t.push(i),t.push(new Sn("timeCreated")),t.push(new Sn("updated")),t.push(new Sn("md5Hash",null,!0)),t.push(new Sn("cacheControl",null,!0)),t.push(new Sn("contentDisposition",null,!0)),t.push(new Sn("contentEncoding",null,!0)),t.push(new Sn("contentLanguage",null,!0)),t.push(new Sn("contentType",null,!0)),t.push(new Sn("metadata","customMetadata",!0)),Id=t,Id}function Q6(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Jn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function X6(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return Q6(r,t),r}function YN(t,e,n){const r=KN(e);return r===null?null:X6(t,r,n)}function J6(t,e,n,r){const i=KN(e);if(i===null||!Cm(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,f=t.fullPath,p="/b/"+o(u)+"/o/"+o(f),m=Ul(p,n,r),y=zN({alt:"media",token:c});return m+y})[0]}function QN(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class aa{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t){if(!t)throw zx()}function Hx(t,e){function n(r,i){const s=YN(t,i,e);return Di(s!==null),s}return n}function Z6(t,e){function n(r,i){const s=YN(t,i,e);return Di(s!==null),J6(s,i,t.host,t._protocol)}return n}function Rh(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=g6():i=m6():n.getStatus()===402?i=p6(t.bucket):n.getStatus()===403?i=y6(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function qx(t){const e=Rh(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=f6(t.path)),s.serverResponse=i.serverResponse,s}return n}function e$(t,e,n){const r=e.fullServerUrl(),i=Ul(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new aa(i,s,Hx(t,n),o);return a.errorHandler=qx(e),a}function t$(t,e,n){const r=e.fullServerUrl(),i=Ul(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new aa(i,s,Z6(t,n),o);return a.errorHandler=qx(e),a}function n$(t,e){const n=e.fullServerUrl(),r=Ul(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new aa(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=qx(e),a}function r$(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function XN(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=r$(null,e)),r}function JN(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let P=0;P<2;P++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=XN(e,r,i),u=QN(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Ei.getBlob(f,r,p);if(m===null)throw UN();const y={name:c.fullPath},_=Ul(s,t.host,t._protocol),x="POST",v=t.maxUploadRetryTime,w=new aa(_,x,Hx(t,n),v);return w.urlParams=y,w.headers=o,w.body=m.uploadData(),w.errorHandler=Rh(e),w}class _p{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Kx(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Di(!1)}return Di(!!n&&(e||["active"]).indexOf(n)!==-1),n}function i$(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=XN(e,r,i),a={name:o.fullPath},l=Ul(s,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=QN(o,n),p=t.maxUploadRetryTime;function m(_){Kx(_);let x;try{x=_.getResponseHeader("X-Goog-Upload-URL")}catch{Di(!1)}return Di(Cm(x)),x}const y=new aa(l,c,m,p);return y.urlParams=a,y.headers=u,y.body=f,y.errorHandler=Rh(e),y}function s$(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const u=Kx(c,["active","final"]);let f=null;try{f=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Di(!1)}f||Di(!1);const p=Number(f);return Di(!isNaN(p)),new _p(p,r.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,l=new aa(n,o,s,a);return l.headers=i,l.errorHandler=Rh(e),l}const IS=256*1024;function o$(t,e,n,r,i,s,o,a){const l=new _p(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw w6();const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const f=l.current,p=f+u;let m="";u===0?m="finalize":c===u?m="upload, finalize":m="upload";const y={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},_=r.slice(f,p);if(_===null)throw UN();function x(P,C){const M=Kx(P,["active","final"]),S=l.current+u,b=r.size();let k;return M==="final"?k=Hx(e,s)(P,C):k=null,new _p(S,b,M==="final",k)}const v="POST",w=e.maxUploadRetryTime,E=new aa(n,v,x,w);return E.headers=y,E.body=_.uploadData(),E.progressCallback=a||null,E.errorHandler=Rh(t),E}const jn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Xg(t){switch(t){case"running":case"pausing":case"canceling":return jn.RUNNING;case"paused":return jn.PAUSED;case"success":return jn.SUCCESS;case"canceled":return jn.CANCELED;case"error":return jn.ERROR;default:return jn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a${constructor(e,n,r){if(A6(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class l${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Lo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Lo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Lo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw yc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class c$ extends l${initXhr(){this.xhr_.responseType="text"}}function hs(){return new c$}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u${constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Wx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(et.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if($N(i.status,[]))if(s)i=VN();else{this.sleepTime=Math.max(this.sleepTime*2,d6),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(et.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=i$(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,hs,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=s$(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,hs,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=IS*this._chunkMultiplier,n=new _p(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=o$(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,hs,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){IS*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=e$(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,hs,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=JN(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,hs,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=FN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Xg(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new a$(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Xg(this._state)){case jn.SUCCESS:wa(this._resolve.bind(null,this.snapshot))();break;case jn.CANCELED:case jn.ERROR:const n=this._reject;wa(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Xg(this._state)){case jn.RUNNING:case jn.PAUSED:e.next&&wa(e.next.bind(e,this.snapshot))();break;case jn.SUCCESS:e.complete&&wa(e.complete.bind(e))();break;case jn.CANCELED:case jn.ERROR:e.error&&wa(e.error.bind(e,this._error))();break;default:e.error&&wa(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this._service=e,n instanceof Jn?this._location=n:this._location=Jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Xo(e,n)}get root(){const e=new Jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GN(this._location.path)}get storage(){return this._service}get parent(){const e=q6(this._location.path);if(e===null)return null;const n=new Jn(this._location.bucket,e);return new Xo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw E6(e)}}function h$(t,e,n){t._throwIfRoot("uploadBytes");const r=JN(t.storage,t._location,Wx(),new Ei(e,!0),n);return t.storage.makeRequestWithTokens(r,hs).then(i=>({metadata:i,ref:t}))}function d$(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new u$(t,new Ei(e),n)}function f$(t){t._throwIfRoot("getDownloadURL");const e=t$(t.storage,t._location,Wx());return t.storage.makeRequestWithTokens(e,hs).then(n=>{if(n===null)throw b6();return n})}function p$(t){t._throwIfRoot("deleteObject");const e=n$(t.storage,t._location);return t.storage.makeRequestWithTokens(e,hs)}function m$(t,e){const n=K6(t._location.path,e),r=new Jn(t._location.bucket,n);return new Xo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g$(t){return/^[A-Za-z]+:\/\//.test(t)}function y$(t,e){return new Xo(t,e)}function ZN(t,e){if(t instanceof Gx){const n=t;if(n._bucket==null)throw x6();const r=new Xo(n,n._bucket);return e!=null?ZN(r,e):r}else return e!==void 0?m$(t,e):t}function v$(t,e){if(e&&g$(e)){if(t instanceof Gx)return y$(t,e);throw Zv("To use ref(service, url), the first argument must be a Storage instance.")}else return ZN(t,e)}function AS(t,e){const n=e==null?void 0:e[LN];return n==null?null:Jn.makeFromBucketSpec(n,t)}function _$(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:RP(i,t.app.options.projectId))}class Gx{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=jN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=u6,this._maxUploadRetryTime=h6,this._requests=new Set,i!=null?this._bucket=Jn.makeFromBucketSpec(i,this._host):this._bucket=AS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jn.makeFromBucketSpec(this._url,e):this._bucket=AS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){CS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){CS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new S6(BN());{const o=j6(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const PS="@firebase/storage",RS="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD="storage";function tD(t,e,n){return t=ze(t),h$(t,e,n)}function x$(t,e,n){return t=ze(t),d$(t,e,n)}function Im(t){return t=ze(t),f$(t)}function w$(t){return t=ze(t),p$(t)}function El(t,e){return t=ze(t),v$(t,e)}function Nh(t=W0(),e){t=ze(t);const r=im(t,eD).getImmediate({identifier:e}),i=IP("storage");return i&&b$(r,...i),r}function b$(t,e,n,r={}){_$(t,e,n,r)}function T$(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Gx(n,r,i,e,na)}function E$(){qo(new Vs(eD,T$,"PUBLIC").setMultipleInstances(!0)),Xr(PS,RS,""),Xr(PS,RS,"esm2017")}E$();const S$={apiKey:"AIzaSyDU4GmH6xLhrEd2jSkyATXJOasIyEfisXY",authDomain:"biondo-fitness-coach.firebaseapp.com",projectId:"biondo-fitness-coach",storageBucket:"biondo-fitness-coach.firebasestorage.app",messagingSenderId:"1086406111438",appId:"1:1086406111438:web:1c8c3d9e49f1ffdb77609f",measurementId:"G-869HQ5KGVX"},Yx=OP(S$),ae=X3(Yx),Ku=ui(Yx),k$=Nh(Yx);var nD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},NS=rt.createContext&&rt.createContext(nD),C$=["attr","size","title"];function I$(t,e){if(t==null)return{};var n=A$(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function A$(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function xp(){return xp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xp.apply(this,arguments)}function DS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DS(Object(n),!0).forEach(function(r){P$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function P$(t,e,n){return e=R$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function R$(t){var e=N$(t,"string");return typeof e=="symbol"?e:e+""}function N$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rD(t){return t&&t.map((e,n)=>rt.createElement(e.tag,wp({key:n},e.attr),rD(e.child)))}function xe(t){return e=>rt.createElement(D$,xp({attr:wp({},t.attr)},e),rD(t.child))}function D$(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=I$(t,C$),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),rt.createElement("svg",xp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:wp(wp({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&rt.createElement("title",null,s),t.children)};return NS!==void 0?rt.createElement(NS.Consumer,null,n=>e(n)):e(nD)}function OS(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(t)}function O$(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function Js(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function iD(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function M$(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(t)}function Qx(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function sD(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(t)}function Xx(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(t)}function bp(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(t)}function oD(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function aD(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function j$(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function L$(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function V$(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(t)}function la(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(t)}function F$(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function lD(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(t)}function cD(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(t)}function Jx(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function U$(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function MS(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"},child:[]},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"},child:[]}]})(t)}function jS(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"},child:[]}]})(t)}function B$(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(t)}function uD(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function z$(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function $$(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"},child:[]},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"},child:[]}]})(t)}function Gu(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(t)}function LS(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"16"},child:[]},{tag:"line",attr:{x1:"8",y1:"12",x2:"16",y2:"12"},child:[]}]})(t)}function Am(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function hD(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Pm(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function dD(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function Zx(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(t)}function W$(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(t)}function Rm(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function H$(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]},{tag:"line",attr:{x1:"12",y1:"12",x2:"12",y2:"21"},child:[]},{tag:"path",attr:{d:"M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"},child:[]},{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]}]})(t)}function q$(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(t)}function fD(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function VS(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"},child:[]},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"},child:[]},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"},child:[]}]})(t)}function K$(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(t)}function Nm(t){return xe({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}const ew=O.createContext({});function tw(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const Dm=O.createContext(null),nw=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class G$ extends O.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Y$({children:t,isPresent:e}){const n=O.useId(),r=O.useRef(null),i=O.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=O.useContext(nw);return O.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),d.jsx(G$,{isPresent:e,childRef:r,sizeRef:i,children:O.cloneElement(t,{ref:r})})}const Q$=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=tw(X$),l=O.useId(),c=O.useCallback(f=>{a.set(f,!0);for(const p of a.values())if(!p)return;r&&r()},[a,r]),u=O.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:f=>(a.set(f,!1),()=>a.delete(f))}),s?[Math.random(),c]:[n,c]);return O.useMemo(()=>{a.forEach((f,p)=>a.set(p,!1))},[n]),O.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=d.jsx(Y$,{isPresent:n,children:t})),d.jsx(Dm.Provider,{value:u,children:t})};function X$(){return new Map}function pD(t=!0){const e=O.useContext(Dm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=O.useId();O.useEffect(()=>{t&&i(s)},[t]);const o=O.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Ad=t=>t.key||"";function FS(t){const e=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&e.push(n)}),e}const rw=typeof window<"u",mD=rw?O.useLayoutEffect:O.useEffect,ca=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=pD(o),c=O.useMemo(()=>FS(t),[t]),u=o&&!a?[]:c.map(Ad),f=O.useRef(!0),p=O.useRef(c),m=tw(()=>new Map),[y,_]=O.useState(c),[x,v]=O.useState(c);mD(()=>{f.current=!1,p.current=c;for(let P=0;P<x.length;P++){const C=Ad(x[P]);u.includes(C)?m.delete(C):m.get(C)!==!0&&m.set(C,!1)}},[x,u.length,u.join("-")]);const w=[];if(c!==y){let P=[...c];for(let C=0;C<x.length;C++){const M=x[C],S=Ad(M);u.includes(S)||(P.splice(C,0,M),w.push(M))}s==="wait"&&w.length&&(P=w),v(FS(P)),_(c);return}const{forceRender:E}=O.useContext(ew);return d.jsx(d.Fragment,{children:x.map(P=>{const C=Ad(P),M=o&&!a?!1:c===x||u.includes(C),S=()=>{if(m.has(C))m.set(C,!0);else return;let b=!0;m.forEach(k=>{k||(b=!1)}),b&&(E==null||E(),v(p.current),o&&(l==null||l()),r&&r())};return d.jsx(Q$,{isPresent:M,initial:!f.current||n?void 0:!1,custom:M?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:M?void 0:S,children:P},C)})})},tr=t=>t;let gD=tr;function iw(t){let e;return()=>(e===void 0&&(e=t()),e)}const Sl=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Oi=t=>t*1e3,Mi=t=>t/1e3,J$={useManualTiming:!1};function Z$(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,f=!1)=>{const m=f&&r?e:n;return u&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const Pd=["read","resolveKeyframes","update","preRender","render","postRender"],e9=40;function yD(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Pd.reduce((v,w)=>(v[w]=Z$(s),v),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:f,postRender:p}=o,m=()=>{const v=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,e9),1),i.timestamp=v,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(m))},y=()=>{n=!0,r=!0,i.isProcessing||t(m)};return{schedule:Pd.reduce((v,w)=>{const E=o[w];return v[w]=(P,C=!1,M=!1)=>(n||y(),E.schedule(P,C,M)),v},{}),cancel:v=>{for(let w=0;w<Pd.length;w++)o[Pd[w]].cancel(v)},state:i,steps:o}}const{schedule:Ze,cancel:$s,state:Gt,steps:Jg}=yD(typeof requestAnimationFrame<"u"?requestAnimationFrame:tr,!0),vD=O.createContext({strict:!1}),US={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},kl={};for(const t in US)kl[t]={isEnabled:e=>US[t].some(n=>!!e[n])};function t9(t){for(const e in t)kl[e]={...kl[e],...t[e]}}const n9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Tp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||n9.has(t)}let _D=t=>!Tp(t);function r9(t){t&&(_D=e=>e.startsWith("on")?!Tp(e):t(e))}try{r9(require("@emotion/is-prop-valid").default)}catch{}function i9(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(_D(i)||n===!0&&Tp(i)||!e&&!Tp(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function s9(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Om=O.createContext({});function Yu(t){return typeof t=="string"||Array.isArray(t)}function Mm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const sw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ow=["initial",...sw];function jm(t){return Mm(t.animate)||ow.some(e=>Yu(t[e]))}function xD(t){return!!(jm(t)||t.variants)}function o9(t,e){if(jm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Yu(n)?n:void 0,animate:Yu(r)?r:void 0}}return t.inherit!==!1?e:{}}function a9(t){const{initial:e,animate:n}=o9(t,O.useContext(Om));return O.useMemo(()=>({initial:e,animate:n}),[BS(e),BS(n)])}function BS(t){return Array.isArray(t)?t.join(" "):t}const l9=Symbol.for("motionComponentSymbol");function za(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function c9(t,e,n){return O.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):za(n)&&(n.current=r))},[e])}const aw=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),u9="framerAppearId",wD="data-"+aw(u9),{schedule:lw}=yD(queueMicrotask,!1),bD=O.createContext({});function h9(t,e,n,r,i){var s,o;const{visualElement:a}=O.useContext(Om),l=O.useContext(vD),c=O.useContext(Dm),u=O.useContext(nw).reducedMotion,f=O.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const p=f.current,m=O.useContext(bD);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&d9(f.current,n,i,m);const y=O.useRef(!1);O.useInsertionEffect(()=>{p&&y.current&&p.update(n,c)});const _=n[wD],x=O.useRef(!!_&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,_))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,_)));return mD(()=>{p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),lw.render(p.render),x.current&&p.animationState&&p.animationState.animateChanges())}),O.useEffect(()=>{p&&(!x.current&&p.animationState&&p.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,_)}),x.current=!1))}),p}function d9(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:TD(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&za(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function TD(t){if(t)return t.options.allowProjection!==!1?t.projection:TD(t.parent)}function f9({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&t9(t);function a(c,u){let f;const p={...O.useContext(nw),...c,layoutId:p9(c)},{isStatic:m}=p,y=a9(c),_=r(c,m);if(!m&&rw){m9();const x=g9(p);f=x.MeasureLayout,y.visualElement=h9(i,_,p,e,x.ProjectionNode)}return d.jsxs(Om.Provider,{value:y,children:[f&&y.visualElement?d.jsx(f,{visualElement:y.visualElement,...p}):null,n(i,c,c9(_,y.visualElement,u),_,m,y.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=O.forwardRef(a);return l[l9]=i,l}function p9({layoutId:t}){const e=O.useContext(ew).id;return e&&t!==void 0?e+"-"+t:t}function m9(t,e){O.useContext(vD).strict}function g9(t){const{drag:e,layout:n}=kl;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const y9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cw(t){return typeof t!="string"||t.includes("-")?!1:!!(y9.indexOf(t)>-1||/[A-Z]/u.test(t))}function zS(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function uw(t,e,n,r){if(typeof e=="function"){const[i,s]=zS(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=zS(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const e_=t=>Array.isArray(t),v9=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),_9=t=>e_(t)?t[t.length-1]||0:t,yn=t=>!!(t&&t.getVelocity);function wf(t){const e=yn(t)?t.get():t;return v9(e)?e.toValue():e}function x9({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:w9(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const ED=t=>(e,n)=>{const r=O.useContext(Om),i=O.useContext(Dm),s=()=>x9(t,e,r,i);return n?s():tw(s)};function w9(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=wf(s[p]);let{initial:o,animate:a}=t;const l=jm(t),c=xD(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const f=u?a:o;if(f&&typeof f!="boolean"&&!Mm(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const y=uw(t,p[m]);if(y){const{transitionEnd:_,transition:x,...v}=y;for(const w in v){let E=v[w];if(Array.isArray(E)){const P=u?E.length-1:0;E=E[P]}E!==null&&(i[w]=E)}for(const w in _)i[w]=_[w]}}}return i}const Bl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ua=new Set(Bl),SD=t=>e=>typeof e=="string"&&e.startsWith(t),kD=SD("--"),b9=SD("var(--"),hw=t=>b9(t)?T9.test(t.split("/*")[0].trim()):!1,T9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,CD=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Hi=(t,e,n)=>n>e?e:n<t?t:n,zl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Qu={...zl,transform:t=>Hi(0,1,t)},Rd={...zl,default:1},Dh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ns=Dh("deg"),ni=Dh("%"),ce=Dh("px"),E9=Dh("vh"),S9=Dh("vw"),$S={...ni,parse:t=>ni.parse(t)/100,transform:t=>ni.transform(t*100)},k9={borderWidth:ce,borderTopWidth:ce,borderRightWidth:ce,borderBottomWidth:ce,borderLeftWidth:ce,borderRadius:ce,radius:ce,borderTopLeftRadius:ce,borderTopRightRadius:ce,borderBottomRightRadius:ce,borderBottomLeftRadius:ce,width:ce,maxWidth:ce,height:ce,maxHeight:ce,top:ce,right:ce,bottom:ce,left:ce,padding:ce,paddingTop:ce,paddingRight:ce,paddingBottom:ce,paddingLeft:ce,margin:ce,marginTop:ce,marginRight:ce,marginBottom:ce,marginLeft:ce,backgroundPositionX:ce,backgroundPositionY:ce},C9={rotate:ns,rotateX:ns,rotateY:ns,rotateZ:ns,scale:Rd,scaleX:Rd,scaleY:Rd,scaleZ:Rd,skew:ns,skewX:ns,skewY:ns,distance:ce,translateX:ce,translateY:ce,translateZ:ce,x:ce,y:ce,z:ce,perspective:ce,transformPerspective:ce,opacity:Qu,originX:$S,originY:$S,originZ:ce},WS={...zl,transform:Math.round},dw={...k9,...C9,zIndex:WS,size:ce,fillOpacity:Qu,strokeOpacity:Qu,numOctaves:WS},I9={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},A9=Bl.length;function P9(t,e,n){let r="",i=!0;for(let s=0;s<A9;s++){const o=Bl[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=CD(a,dw[o]);if(!l){i=!1;const u=I9[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function fw(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(ua.has(l)){o=!0;continue}else if(kD(l)){i[l]=c;continue}else{const u=CD(c,dw[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=P9(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const R9={offset:"stroke-dashoffset",array:"stroke-dasharray"},N9={offset:"strokeDashoffset",array:"strokeDasharray"};function D9(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?R9:N9;t[s.offset]=ce.transform(-r);const o=ce.transform(e),a=ce.transform(n);t[s.array]=`${o} ${a}`}function HS(t,e,n){return typeof t=="string"?t:ce.transform(e+n*t)}function O9(t,e,n){const r=HS(e,t.x,t.width),i=HS(n,t.y,t.height);return`${r} ${i}`}function pw(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,f){if(fw(t,c,f),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:y}=t;p.transform&&(y&&(m.transform=p.transform),delete p.transform),y&&(i!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=O9(y,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&D9(p,o,a,l,!1)}const mw=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),ID=()=>({...mw(),attrs:{}}),gw=t=>typeof t=="string"&&t.toLowerCase()==="svg";function AD(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const PD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function RD(t,e,n,r){AD(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(PD.has(i)?i:aw(i),e.attrs[i])}const Ep={};function M9(t){Object.assign(Ep,t)}function ND(t,{layout:e,layoutId:n}){return ua.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ep[t]||t==="opacity")}function yw(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(yn(i[o])||e.style&&yn(e.style[o])||ND(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function DD(t,e,n){const r=yw(t,e,n);for(const i in t)if(yn(t[i])||yn(e[i])){const s=Bl.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function j9(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const qS=["x","y","width","height","cx","cy","r"],L9={useVisualState:ED({scrapeMotionValuesFromProps:DD,createRenderState:ID,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(ua.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<qS.length;a++){const l=qS[a];t[l]!==e[l]&&(o=!0)}o&&Ze.read(()=>{j9(n,r),Ze.render(()=>{pw(r,i,gw(n.tagName),t.transformTemplate),RD(n,r)})})}})},V9={useVisualState:ED({scrapeMotionValuesFromProps:yw,createRenderState:mw})};function OD(t,e,n){for(const r in e)!yn(e[r])&&!ND(r,n)&&(t[r]=e[r])}function F9({transformTemplate:t},e){return O.useMemo(()=>{const n=mw();return fw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function U9(t,e){const n=t.style||{},r={};return OD(r,n,t),Object.assign(r,F9(t,e)),r}function B9(t,e){const n={},r=U9(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function z9(t,e,n,r){const i=O.useMemo(()=>{const s=ID();return pw(s,e,gw(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};OD(s,t.style,t),i.style={...s,...i.style}}return i}function $9(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(cw(n)?z9:B9)(r,s,o,n),c=i9(r,typeof n=="string",t),u=n!==O.Fragment?{...c,...l,ref:i}:{},{children:f}=r,p=O.useMemo(()=>yn(f)?f.get():f,[f]);return O.createElement(n,{...u,children:p})}}function W9(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...cw(r)?L9:V9,preloadedFeatures:t,useRender:$9(i),createVisualElement:e,Component:r};return f9(o)}}function MD(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Lm(t,e,n){const r=t.getProps();return uw(r,e,n!==void 0?n:r.custom,t)}const H9=iw(()=>window.ScrollTimeline!==void 0);class q9{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(H9()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class K9 extends q9{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function vw(t,e){return t?t[e]||t.default||t:void 0}const t_=2e4;function jD(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<t_;)e+=n,r=t.next(e);return e>=t_?1/0:e}function _w(t){return typeof t=="function"}function KS(t,e){t.timeline=e,t.onfinish=null}const xw=t=>Array.isArray(t)&&typeof t[0]=="number",G9={linearEasing:void 0};function Y9(t,e){const n=iw(t);return()=>{var r;return(r=G9[e])!==null&&r!==void 0?r:n()}}const Sp=Y9(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),LD=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Sl(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function VD(t){return!!(typeof t=="function"&&Sp()||!t||typeof t=="string"&&(t in n_||Sp())||xw(t)||Array.isArray(t)&&t.every(VD))}const jc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,n_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jc([0,.65,.55,1]),circOut:jc([.55,0,1,.45]),backIn:jc([.31,.01,.66,-.59]),backOut:jc([.33,1.53,.69,.99])};function FD(t,e){if(t)return typeof t=="function"&&Sp()?LD(t,e):xw(t)?jc(t):Array.isArray(t)?t.map(n=>FD(n,e)||n_.easeOut):n_[t]}const xr={x:!1,y:!1};function UD(){return xr.x||xr.y}function Q9(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function BD(t,e){const n=Q9(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function GS(t){return e=>{e.pointerType==="touch"||UD()||t(e)}}function X9(t,e,n={}){const[r,i,s]=BD(t,n),o=GS(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=GS(f=>{c(f),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const zD=(t,e)=>e?t===e?!0:zD(t,e.parentElement):!1,ww=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,J9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Z9(t){return J9.has(t.tagName)||t.tabIndex!==-1}const Lc=new WeakSet;function YS(t){return e=>{e.key==="Enter"&&t(e)}}function Zg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const eW=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=YS(()=>{if(Lc.has(n))return;Zg(n,"down");const i=YS(()=>{Zg(n,"up")}),s=()=>Zg(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function QS(t){return ww(t)&&!UD()}function tW(t,e,n={}){const[r,i,s]=BD(t,n),o=a=>{const l=a.currentTarget;if(!QS(a)||Lc.has(l))return;Lc.add(l);const c=e(a),u=(m,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),!(!QS(m)||!Lc.has(l))&&(Lc.delete(l),typeof c=="function"&&c(m,{success:y}))},f=m=>{u(m,n.useGlobalTarget||zD(l,m.target))},p=m=>{u(m,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{!Z9(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>eW(c,i),i)}),s}function nW(t){return t==="x"||t==="y"?xr[t]?null:(xr[t]=!0,()=>{xr[t]=!1}):xr.x||xr.y?null:(xr.x=xr.y=!0,()=>{xr.x=xr.y=!1})}const $D=new Set(["width","height","top","left","right","bottom",...Bl]);let bf;function rW(){bf=void 0}const ri={now:()=>(bf===void 0&&ri.set(Gt.isProcessing||J$.useManualTiming?Gt.timestamp:performance.now()),bf),set:t=>{bf=t,queueMicrotask(rW)}};function bw(t,e){t.indexOf(e)===-1&&t.push(e)}function Tw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ew{constructor(){this.subscriptions=[]}add(e){return bw(this.subscriptions,e),()=>Tw(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function WD(t,e){return e?t*(1e3/e):0}const XS=30,iW=t=>!isNaN(parseFloat(t));class sW{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=ri.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ri.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=iW(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ew);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ze.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ri.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>XS)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,XS);return WD(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Xu(t,e){return new sW(t,e)}function oW(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Xu(n))}function aW(t,e){const n=Lm(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=_9(s[o]);oW(t,o,a)}}function lW(t){return!!(yn(t)&&t.add)}function r_(t,e){const n=t.getValue("willChange");if(lW(n))return n.add(e)}function HD(t){return t.props[wD]}const qD=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,cW=1e-7,uW=12;function hW(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=qD(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>cW&&++a<uW);return o}function Oh(t,e,n,r){if(t===e&&n===r)return tr;const i=s=>hW(s,0,1,t,n);return s=>s===0||s===1?s:qD(i(s),e,r)}const KD=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,GD=t=>e=>1-t(1-e),YD=Oh(.33,1.53,.69,.99),Sw=GD(YD),QD=KD(Sw),XD=t=>(t*=2)<1?.5*Sw(t):.5*(2-Math.pow(2,-10*(t-1))),kw=t=>1-Math.sin(Math.acos(t)),JD=GD(kw),ZD=KD(kw),e2=t=>/^0[^.\s]+$/u.test(t);function dW(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||e2(t):!0}const ou=t=>Math.round(t*1e5)/1e5,Cw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fW(t){return t==null}const pW=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Iw=(t,e)=>n=>!!(typeof n=="string"&&pW.test(n)&&n.startsWith(t)||e&&!fW(n)&&Object.prototype.hasOwnProperty.call(n,e)),t2=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Cw);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},mW=t=>Hi(0,255,t),ey={...zl,transform:t=>Math.round(mW(t))},Po={test:Iw("rgb","red"),parse:t2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ey.transform(t)+", "+ey.transform(e)+", "+ey.transform(n)+", "+ou(Qu.transform(r))+")"};function gW(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const i_={test:Iw("#"),parse:gW,transform:Po.transform},$a={test:Iw("hsl","hue"),parse:t2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ni.transform(ou(e))+", "+ni.transform(ou(n))+", "+ou(Qu.transform(r))+")"},dn={test:t=>Po.test(t)||i_.test(t)||$a.test(t),parse:t=>Po.test(t)?Po.parse(t):$a.test(t)?$a.parse(t):i_.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Po.transform(t):$a.transform(t)},yW=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vW(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Cw))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(yW))===null||n===void 0?void 0:n.length)||0)>0}const n2="number",r2="color",_W="var",xW="var(",JS="${}",wW=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ju(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(wW,l=>(dn.test(l)?(r.color.push(s),i.push(r2),n.push(dn.parse(l))):l.startsWith(xW)?(r.var.push(s),i.push(_W),n.push(l)):(r.number.push(s),i.push(n2),n.push(parseFloat(l))),++s,JS)).split(JS);return{values:n,split:a,indexes:r,types:i}}function i2(t){return Ju(t).values}function s2(t){const{split:e,types:n}=Ju(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===n2?s+=ou(i[o]):a===r2?s+=dn.transform(i[o]):s+=i[o]}return s}}const bW=t=>typeof t=="number"?0:t;function TW(t){const e=i2(t);return s2(t)(e.map(bW))}const Ws={test:vW,parse:i2,createTransformer:s2,getAnimatableNone:TW},EW=new Set(["brightness","contrast","saturate","opacity"]);function SW(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Cw)||[];if(!r)return t;const i=n.replace(r,"");let s=EW.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const kW=/\b([a-z-]*)\(.*?\)/gu,s_={...Ws,getAnimatableNone:t=>{const e=t.match(kW);return e?e.map(SW).join(" "):t}},CW={...dw,color:dn,backgroundColor:dn,outlineColor:dn,fill:dn,stroke:dn,borderColor:dn,borderTopColor:dn,borderRightColor:dn,borderBottomColor:dn,borderLeftColor:dn,filter:s_,WebkitFilter:s_},Aw=t=>CW[t];function o2(t,e){let n=Aw(t);return n!==s_&&(n=Ws),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const IW=new Set(["auto","none","0"]);function AW(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!IW.has(s)&&Ju(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=o2(n,i)}const ZS=t=>t===zl||t===ce,e1=(t,e)=>parseFloat(t.split(", ")[e]),t1=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return e1(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?e1(s[1],t):0}},PW=new Set(["x","y","z"]),RW=Bl.filter(t=>!PW.has(t));function NW(t){const e=[];return RW.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Cl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:t1(4,13),y:t1(5,14)};Cl.translateX=Cl.x;Cl.translateY=Cl.y;const Vo=new Set;let o_=!1,a_=!1;function a2(){if(a_){const t=Array.from(Vo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=NW(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}a_=!1,o_=!1,Vo.forEach(t=>t.complete()),Vo.clear()}function l2(){Vo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(a_=!0)})}function DW(){l2(),a2()}class Pw{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Vo.add(this),o_||(o_=!0,Ze.read(l2),Ze.resolveKeyframes(a2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Vo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Vo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const c2=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),OW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function MW(t){const e=OW.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function u2(t,e,n=1){const[r,i]=MW(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return c2(o)?parseFloat(o):o}return hw(i)?u2(i,e,n+1):i}const h2=t=>e=>e.test(t),jW={test:t=>t==="auto",parse:t=>t},d2=[zl,ce,ni,ns,S9,E9,jW],n1=t=>d2.find(h2(t));class f2 extends Pw{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),hw(c))){const u=u2(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!$D.has(r)||e.length!==2)return;const[i,s]=e,o=n1(i),a=n1(s);if(o!==a)if(ZS(o)&&ZS(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)dW(e[i])&&r.push(i);r.length&&AW(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Cl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Cl[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const r1=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ws.test(t)||t==="0")&&!t.startsWith("url("));function LW(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function VW(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=r1(i,e),a=r1(s,e);return!o||!a?!1:LW(t)||(n==="spring"||_w(n))&&r}const FW=t=>t!==null;function Vm(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(FW),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const UW=40;class p2{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ri.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>UW?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&DW(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ri.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!VW(e,r,i,s))if(o)this.options.duration=0;else{l&&l(Vm(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ct=(t,e,n)=>t+(e-t)*n;function ty(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function BW({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=ty(l,a,t+1/3),s=ty(l,a,t),o=ty(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function kp(t,e){return n=>n>0?e:t}const ny=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},zW=[i_,Po,$a],$W=t=>zW.find(e=>e.test(t));function i1(t){const e=$W(t);if(!e)return!1;let n=e.parse(t);return e===$a&&(n=BW(n)),n}const s1=(t,e)=>{const n=i1(t),r=i1(e);if(!n||!r)return kp(t,e);const i={...n};return s=>(i.red=ny(n.red,r.red,s),i.green=ny(n.green,r.green,s),i.blue=ny(n.blue,r.blue,s),i.alpha=ct(n.alpha,r.alpha,s),Po.transform(i))},WW=(t,e)=>n=>e(t(n)),Mh=(...t)=>t.reduce(WW),l_=new Set(["none","hidden"]);function HW(t,e){return l_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function qW(t,e){return n=>ct(t,e,n)}function Rw(t){return typeof t=="number"?qW:typeof t=="string"?hw(t)?kp:dn.test(t)?s1:YW:Array.isArray(t)?m2:typeof t=="object"?dn.test(t)?s1:KW:kp}function m2(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Rw(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function KW(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Rw(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function GW(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const YW=(t,e)=>{const n=Ws.createTransformer(e),r=Ju(t),i=Ju(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?l_.has(t)&&!i.values.length||l_.has(e)&&!r.values.length?HW(t,e):Mh(m2(GW(r,i),i.values),n):kp(t,e)};function g2(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ct(t,e,n):Rw(t)(t,e)}const QW=5;function y2(t,e,n){const r=Math.max(e-QW,0);return WD(n-t(r),e-r)}const gt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},ry=.001;function XW({duration:t=gt.duration,bounce:e=gt.bounce,velocity:n=gt.velocity,mass:r=gt.mass}){let i,s,o=1-e;o=Hi(gt.minDamping,gt.maxDamping,o),t=Hi(gt.minDuration,gt.maxDuration,Mi(t)),o<1?(i=c=>{const u=c*o,f=u*t,p=u-n,m=c_(c,o),y=Math.exp(-f);return ry-p/m*y},s=c=>{const f=c*o*t,p=f*n+n,m=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-f),_=c_(Math.pow(c,2),o);return(-i(c)+ry>0?-1:1)*((p-m)*y)/_}):(i=c=>{const u=Math.exp(-c*t),f=(c-n)*t+1;return-ry+u*f},s=c=>{const u=Math.exp(-c*t),f=(n-c)*(t*t);return u*f});const a=5/t,l=ZW(i,s,a);if(t=Oi(t),isNaN(l))return{stiffness:gt.stiffness,damping:gt.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const JW=12;function ZW(t,e,n){let r=n;for(let i=1;i<JW;i++)r=r-t(r)/e(r);return r}function c_(t,e){return t*Math.sqrt(1-e*e)}const eH=["duration","bounce"],tH=["stiffness","damping","mass"];function o1(t,e){return e.some(n=>t[n]!==void 0)}function nH(t){let e={velocity:gt.velocity,stiffness:gt.stiffness,damping:gt.damping,mass:gt.mass,isResolvedFromDuration:!1,...t};if(!o1(t,tH)&&o1(t,eH))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Hi(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:gt.mass,stiffness:i,damping:s}}else{const n=XW(t);e={...e,...n,mass:gt.mass},e.isResolvedFromDuration=!0}return e}function v2(t=gt.visualDuration,e=gt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:p,isResolvedFromDuration:m}=nH({...n,velocity:-Mi(n.velocity||0)}),y=p||0,_=c/(2*Math.sqrt(l*u)),x=o-s,v=Mi(Math.sqrt(l/u)),w=Math.abs(x)<5;r||(r=w?gt.restSpeed.granular:gt.restSpeed.default),i||(i=w?gt.restDelta.granular:gt.restDelta.default);let E;if(_<1){const C=c_(v,_);E=M=>{const S=Math.exp(-_*v*M);return o-S*((y+_*v*x)/C*Math.sin(C*M)+x*Math.cos(C*M))}}else if(_===1)E=C=>o-Math.exp(-v*C)*(x+(y+v*x)*C);else{const C=v*Math.sqrt(_*_-1);E=M=>{const S=Math.exp(-_*v*M),b=Math.min(C*M,300);return o-S*((y+_*v*x)*Math.sinh(b)+C*x*Math.cosh(b))/C}}const P={calculatedDuration:m&&f||null,next:C=>{const M=E(C);if(m)a.done=C>=f;else{let S=0;_<1&&(S=C===0?Oi(y):y2(E,C,M));const b=Math.abs(S)<=r,k=Math.abs(o-M)<=i;a.done=b&&k}return a.value=a.done?o:M,a},toString:()=>{const C=Math.min(jD(P),t_),M=LD(S=>P.next(C*S).value,C,30);return C+"ms "+M}};return P}function a1({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=t[0],p={done:!1,value:f},m=b=>a!==void 0&&b<a||l!==void 0&&b>l,y=b=>a===void 0?l:l===void 0||Math.abs(a-b)<Math.abs(l-b)?a:l;let _=n*e;const x=f+_,v=o===void 0?x:o(x);v!==x&&(_=v-f);const w=b=>-_*Math.exp(-b/r),E=b=>v+w(b),P=b=>{const k=w(b),I=E(b);p.done=Math.abs(k)<=c,p.value=p.done?v:I};let C,M;const S=b=>{m(p.value)&&(C=b,M=v2({keyframes:[p.value,y(p.value)],velocity:y2(E,b,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return S(0),{calculatedDuration:null,next:b=>{let k=!1;return!M&&C===void 0&&(k=!0,P(b),S(b)),C!==void 0&&b>=C?M.next(b-C):(!k&&P(b),p)}}}const rH=Oh(.42,0,1,1),iH=Oh(0,0,.58,1),_2=Oh(.42,0,.58,1),sH=t=>Array.isArray(t)&&typeof t[0]!="number",oH={linear:tr,easeIn:rH,easeInOut:_2,easeOut:iH,circIn:kw,circInOut:ZD,circOut:JD,backIn:Sw,backInOut:QD,backOut:YD,anticipate:XD},l1=t=>{if(xw(t)){gD(t.length===4);const[e,n,r,i]=t;return Oh(e,n,r,i)}else if(typeof t=="string")return oH[t];return t};function aH(t,e,n){const r=[],i=n||g2,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||tr:e;a=Mh(l,a)}r.push(a)}return r}function lH(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(gD(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=aH(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(u<t[f+1]);f++);const p=Sl(t[f],t[f+1],u);return a[f](p)};return n?u=>c(Hi(t[0],t[s-1],u)):c}function cH(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Sl(0,e,r);t.push(ct(n,1,i))}}function uH(t){const e=[0];return cH(e,t.length-1),e}function hH(t,e){return t.map(n=>n*e)}function dH(t,e){return t.map(()=>e||_2).splice(0,t.length-1)}function Cp({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=sH(r)?r.map(l1):l1(r),s={done:!1,value:e[0]},o=hH(n&&n.length===e.length?n:uH(e),t),a=lH(o,e,{ease:Array.isArray(i)?i:dH(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const fH=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ze.update(e,!0),stop:()=>$s(e),now:()=>Gt.isProcessing?Gt.timestamp:ri.now()}},pH={decay:a1,inertia:a1,tween:Cp,keyframes:Cp,spring:v2},mH=t=>t/100;class Nw extends p2{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Pw,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=_w(n)?n:pH[n]||Cp;let l,c;a!==Cp&&typeof e[0]!="number"&&(l=Mh(mH,g2(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=jD(u));const{calculatedDuration:f}=u,p=f+i,m=p*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:b}=this.options;return{done:!0,value:b[b.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:y,repeatDelay:_,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-p*(this.speed>=0?1:-1),w=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let E=this.currentTime,P=s;if(m){const b=Math.min(this.currentTime,u)/f;let k=Math.floor(b),I=b%1;!I&&b>=1&&(I=1),I===1&&k--,k=Math.min(k,m+1),!!(k%2)&&(y==="reverse"?(I=1-I,_&&(I-=_/f)):y==="mirror"&&(P=o)),E=Hi(0,1,I)*f}const C=w?{done:!1,value:l[0]}:P.next(E);a&&(C.value=a(C.value));let{done:M}=C;!w&&c!==null&&(M=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return S&&i!==void 0&&(C.value=Vm(l,this.options,i)),x&&x(C.value),S&&this.finish(),C}get duration(){const{resolved:e}=this;return e?Mi(e.calculatedDuration):0}get time(){return Mi(this.currentTime)}set time(e){e=Oi(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Mi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=fH,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const gH=new Set(["opacity","clipPath","filter","transform"]);function yH(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=FD(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const vH=iw(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ip=10,_H=2e4;function xH(t){return _w(t.type)||t.type==="spring"||!VD(t.ease)}function wH(t,e){const n=new Nw({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<_H;)r=n.sample(s),i.push(r.value),s+=Ip;return{times:void 0,keyframes:i,duration:s-Ip,ease:"linear"}}const x2={anticipate:XD,backInOut:QD,circInOut:ZD};function bH(t){return t in x2}class c1 extends p2{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new f2(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Sp()&&bH(s)&&(s=x2[s]),xH(this.options)){const{onComplete:f,onUpdate:p,motionValue:m,element:y,..._}=this.options,x=wH(e,_);e=x.keyframes,e.length===1&&(e[1]=e[0]),r=x.duration,i=x.times,s=x.ease,o="keyframes"}const u=yH(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(KS(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:f}=this.options;a.set(Vm(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Mi(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Mi(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Oi(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return tr;const{animation:r}=n;KS(r,e)}return tr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:f,element:p,...m}=this.options,y=new Nw({...m,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),_=Oi(this.time);c.setWithVelocity(y.sample(_-Ip).value,y.sample(_).value,Ip)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return vH()&&r&&gH.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const TH={type:"spring",stiffness:500,damping:25,restSpeed:10},EH=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),SH={type:"keyframes",duration:.8},kH={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},CH=(t,{keyframes:e})=>e.length>2?SH:ua.has(t)?t.startsWith("scale")?EH(e[1]):TH:kH;function IH({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const Dw=(t,e,n,r={},i,s)=>o=>{const a=vw(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Oi(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};IH(a)||(u={...u,...CH(t,u)}),u.duration&&(u.duration=Oi(u.duration)),u.repeatDelay&&(u.repeatDelay=Oi(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const p=Vm(u.keyframes,a);if(p!==void 0)return Ze.update(()=>{u.onUpdate(p),u.onComplete()}),new K9([])}return!s&&c1.supports(u)?new c1(u):new Nw(u)};function AH({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function w2(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const p=t.getValue(f,(s=t.latestValues[f])!==null&&s!==void 0?s:null),m=l[f];if(m===void 0||u&&AH(u,f))continue;const y={delay:n,...vw(o||{},f)};let _=!1;if(window.MotionHandoffAnimation){const v=HD(t);if(v){const w=window.MotionHandoffAnimation(v,f,Ze);w!==null&&(y.startTime=w,_=!0)}}r_(t,f),p.start(Dw(f,p,m,t.shouldReduceMotion&&$D.has(f)?{type:!1}:y,t,_));const x=p.animation;x&&c.push(x)}return a&&Promise.all(c).then(()=>{Ze.update(()=>{a&&aW(t,a)})}),c}function u_(t,e,n={}){var r;const i=Lm(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(w2(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:p}=s;return PH(t,e,u+c,f,p,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function PH(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(RH).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(u_(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function RH(t,e){return t.sortNodePosition(e)}function NH(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>u_(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=u_(t,e,n);else{const i=typeof e=="function"?Lm(t,e,n.custom):e;r=Promise.all(w2(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const DH=ow.length;function b2(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?b2(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<DH;n++){const r=ow[n],i=t.props[r];(Yu(i)||i===!1)&&(e[r]=i)}return e}const OH=[...sw].reverse(),MH=sw.length;function jH(t){return e=>Promise.all(e.map(({animation:n,options:r})=>NH(t,n,r)))}function LH(t){let e=jH(t),n=u1(),r=!0;const i=l=>(c,u)=>{var f;const p=Lm(t,u,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:m,transitionEnd:y,..._}=p;c={...c,..._,...y}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=b2(t.parent)||{},f=[],p=new Set;let m={},y=1/0;for(let x=0;x<MH;x++){const v=OH[x],w=n[v],E=c[v]!==void 0?c[v]:u[v],P=Yu(E),C=v===l?w.isActive:null;C===!1&&(y=x);let M=E===u[v]&&E!==c[v]&&P;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),w.protectedKeys={...m},!w.isActive&&C===null||!E&&!w.prevProp||Mm(E)||typeof E=="boolean")continue;const S=VH(w.prevProp,E);let b=S||v===l&&w.isActive&&!M&&P||x>y&&P,k=!1;const I=Array.isArray(E)?E:[E];let D=I.reduce(i(v),{});C===!1&&(D={});const{prevResolvedValues:A={}}=w,R={...A,...D},$=ee=>{b=!0,p.has(ee)&&(k=!0,p.delete(ee)),w.needsAnimating[ee]=!0;const z=t.getValue(ee);z&&(z.liveStyle=!1)};for(const ee in R){const z=D[ee],X=A[ee];if(m.hasOwnProperty(ee))continue;let J=!1;e_(z)&&e_(X)?J=!MD(z,X):J=z!==X,J?z!=null?$(ee):p.add(ee):z!==void 0&&p.has(ee)?$(ee):w.protectedKeys[ee]=!0}w.prevProp=E,w.prevResolvedValues=D,w.isActive&&(m={...m,...D}),r&&t.blockInitialAnimation&&(b=!1),b&&(!(M&&S)||k)&&f.push(...I.map(ee=>({animation:ee,options:{type:v}})))}if(p.size){const x={};p.forEach(v=>{const w=t.getBaseTarget(v),E=t.getValue(v);E&&(E.liveStyle=!0),x[v]=w??null}),f.push({animation:x})}let _=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(f):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),n[l].isActive=c;const f=o(l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=u1(),r=!0}}}function VH(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!MD(e,t):!1}function po(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function u1(){return{animate:po(!0),whileInView:po(),whileHover:po(),whileTap:po(),whileDrag:po(),whileFocus:po(),exit:po()}}class Zs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class FH extends Zs{constructor(e){super(e),e.animationState||(e.animationState=LH(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Mm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let UH=0;class BH extends Zs{constructor(){super(...arguments),this.id=UH++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const zH={animation:{Feature:FH},exit:{Feature:BH}};function Zu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function jh(t){return{point:{x:t.pageX,y:t.pageY}}}const $H=t=>e=>ww(e)&&t(e,jh(e));function au(t,e,n,r){return Zu(t,e,$H(n),r)}const h1=(t,e)=>Math.abs(t-e);function WH(t,e){const n=h1(t.x,e.x),r=h1(t.y,e.y);return Math.sqrt(n**2+r**2)}class T2{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=sy(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=WH(f.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:y}=f,{timestamp:_}=Gt;this.history.push({...y,timestamp:_});const{onStart:x,onMove:v}=this.handlers;p||(x&&x(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=iy(p,this.transformPagePoint),Ze.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=sy(f.type==="pointercancel"?this.lastMoveEventInfo:iy(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,x),y&&y(f,x)},!ww(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=jh(e),a=iy(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Gt;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,sy(a,this.history)),this.removeListeners=Mh(au(this.contextWindow,"pointermove",this.handlePointerMove),au(this.contextWindow,"pointerup",this.handlePointerUp),au(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),$s(this.updatePoint)}}function iy(t,e){return e?{point:e(t.point)}:t}function d1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function sy({point:t},e){return{point:t,delta:d1(t,E2(e)),offset:d1(t,HH(e)),velocity:qH(e,.1)}}function HH(t){return t[0]}function E2(t){return t[t.length-1]}function qH(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=E2(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Oi(e)));)n--;if(!r)return{x:0,y:0};const s=Mi(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const S2=1e-4,KH=1-S2,GH=1+S2,k2=.01,YH=0-k2,QH=0+k2;function rr(t){return t.max-t.min}function XH(t,e,n){return Math.abs(t-e)<=n}function f1(t,e,n,r=.5){t.origin=r,t.originPoint=ct(e.min,e.max,t.origin),t.scale=rr(n)/rr(e),t.translate=ct(n.min,n.max,t.origin)-t.originPoint,(t.scale>=KH&&t.scale<=GH||isNaN(t.scale))&&(t.scale=1),(t.translate>=YH&&t.translate<=QH||isNaN(t.translate))&&(t.translate=0)}function lu(t,e,n,r){f1(t.x,e.x,n.x,r?r.originX:void 0),f1(t.y,e.y,n.y,r?r.originY:void 0)}function p1(t,e,n){t.min=n.min+e.min,t.max=t.min+rr(e)}function JH(t,e,n){p1(t.x,e.x,n.x),p1(t.y,e.y,n.y)}function m1(t,e,n){t.min=e.min-n.min,t.max=t.min+rr(e)}function cu(t,e,n){m1(t.x,e.x,n.x),m1(t.y,e.y,n.y)}function ZH(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ct(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ct(n,t,r.max):Math.min(t,n)),t}function g1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function e8(t,{top:e,left:n,bottom:r,right:i}){return{x:g1(t.x,n,i),y:g1(t.y,e,r)}}function y1(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function t8(t,e){return{x:y1(t.x,e.x),y:y1(t.y,e.y)}}function n8(t,e){let n=.5;const r=rr(t),i=rr(e);return i>r?n=Sl(e.min,e.max-r,t.min):r>i&&(n=Sl(t.min,t.max-i,e.min)),Hi(0,1,n)}function r8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const h_=.35;function i8(t=h_){return t===!1?t=0:t===!0&&(t=h_),{x:v1(t,"left","right"),y:v1(t,"top","bottom")}}function v1(t,e,n){return{min:_1(t,e),max:_1(t,n)}}function _1(t,e){return typeof t=="number"?t:t[e]||0}const x1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wa=()=>({x:x1(),y:x1()}),w1=()=>({min:0,max:0}),_t=()=>({x:w1(),y:w1()});function lr(t){return[t("x"),t("y")]}function C2({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function s8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function o8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function oy(t){return t===void 0||t===1}function d_({scale:t,scaleX:e,scaleY:n}){return!oy(t)||!oy(e)||!oy(n)}function wo(t){return d_(t)||I2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function I2(t){return b1(t.x)||b1(t.y)}function b1(t){return t&&t!=="0%"}function Ap(t,e,n){const r=t-n,i=e*r;return n+i}function T1(t,e,n,r,i){return i!==void 0&&(t=Ap(t,i,r)),Ap(t,n,r)+e}function f_(t,e=0,n=1,r,i){t.min=T1(t.min,e,n,r,i),t.max=T1(t.max,e,n,r,i)}function A2(t,{x:e,y:n}){f_(t.x,e.translate,e.scale,e.originPoint),f_(t.y,n.translate,n.scale,n.originPoint)}const E1=.999999999999,S1=1.0000000000001;function a8(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&qa(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,A2(t,o)),r&&wo(s.latestValues)&&qa(t,s.latestValues))}e.x<S1&&e.x>E1&&(e.x=1),e.y<S1&&e.y>E1&&(e.y=1)}function Ha(t,e){t.min=t.min+e,t.max=t.max+e}function k1(t,e,n,r,i=.5){const s=ct(t.min,t.max,i);f_(t,e,n,s,r)}function qa(t,e){k1(t.x,e.x,e.scaleX,e.scale,e.originX),k1(t.y,e.y,e.scaleY,e.scale,e.originY)}function P2(t,e){return C2(o8(t.getBoundingClientRect(),e))}function l8(t,e,n){const r=P2(t,n),{scroll:i}=e;return i&&(Ha(r.x,i.offset.x),Ha(r.y,i.offset.y)),r}const R2=({current:t})=>t?t.ownerDocument.defaultView:null,c8=new WeakMap;class u8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_t(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(jh(u).point)},s=(u,f)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=nW(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),lr(x=>{let v=this.getAxisMotionValue(x).get()||0;if(ni.test(v)){const{projection:w}=this.visualElement;if(w&&w.layout){const E=w.layout.layoutBox[x];E&&(v=rr(E)*(parseFloat(v)/100))}}this.originPoint[x]=v}),y&&Ze.postRender(()=>y(u,f)),r_(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(u,f)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:_}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=f;if(m&&this.currentDirection===null){this.currentDirection=h8(x),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,x),this.updateAxis("y",f.point,x),this.visualElement.render(),_&&_(u,f)},a=(u,f)=>this.stop(u,f),l=()=>lr(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new T2(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:R2(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ze.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Nd(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=ZH(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&za(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=e8(i.layoutBox,n):this.constraints=!1,this.elastic=i8(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&lr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=r8(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!za(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=l8(r,i.root,this.visualElement.getTransformPagePoint());let o=t8(i.layout.layoutBox,s);if(n){const a=n(s8(o));this.hasMutatedConstraints=!!a,a&&(o=C2(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=lr(u=>{if(!Nd(u,n,this.currentDirection))return;let f=l&&l[u]||{};o&&(f={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r_(this.visualElement,e),r.start(Dw(e,r,0,n,this.visualElement,!1))}stopAnimation(){lr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){lr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){lr(n=>{const{drag:r}=this.getProps();if(!Nd(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-ct(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!za(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};lr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=n8({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),lr(o=>{if(!Nd(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ct(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;c8.set(this.visualElement,this);const e=this.visualElement.current,n=au(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();za(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ze.read(r);const o=Zu(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(lr(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=h_,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Nd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function h8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class d8 extends Zs{constructor(e){super(e),this.removeGroupControls=tr,this.removeListeners=tr,this.controls=new u8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tr}unmount(){this.removeGroupControls(),this.removeListeners()}}const C1=t=>(e,n)=>{t&&Ze.postRender(()=>t(e,n))};class f8 extends Zs{constructor(){super(...arguments),this.removePointerDownListener=tr}onPointerDown(e){this.session=new T2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:R2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:C1(e),onStart:C1(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ze.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=au(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function I1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const vc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ce.test(t))t=parseFloat(t);else return t;const n=I1(t,e.target.x),r=I1(t,e.target.y);return`${n}% ${r}%`}},p8={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Ws.parse(t);if(i.length>5)return r;const s=Ws.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=ct(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class m8 extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;M9(g8),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Tf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ze.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),lw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function N2(t){const[e,n]=pD(),r=O.useContext(ew);return d.jsx(m8,{...t,layoutGroup:r,switchLayoutGroup:O.useContext(bD),isPresent:e,safeToRemove:n})}const g8={borderRadius:{...vc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:vc,borderTopRightRadius:vc,borderBottomLeftRadius:vc,borderBottomRightRadius:vc,boxShadow:p8};function y8(t,e,n){const r=yn(t)?t:Xu(t);return r.start(Dw("",r,e,n)),r.animation}function v8(t){return t instanceof SVGElement&&t.tagName!=="svg"}const _8=(t,e)=>t.depth-e.depth;class x8{constructor(){this.children=[],this.isDirty=!1}add(e){bw(this.children,e),this.isDirty=!0}remove(e){Tw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(_8),this.isDirty=!1,this.children.forEach(e)}}function w8(t,e){const n=ri.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&($s(r),t(s-e))};return Ze.read(r,!0),()=>$s(r)}const D2=["TopLeft","TopRight","BottomLeft","BottomRight"],b8=D2.length,A1=t=>typeof t=="string"?parseFloat(t):t,P1=t=>typeof t=="number"||ce.test(t);function T8(t,e,n,r,i,s){i?(t.opacity=ct(0,n.opacity!==void 0?n.opacity:1,E8(r)),t.opacityExit=ct(e.opacity!==void 0?e.opacity:1,0,S8(r))):s&&(t.opacity=ct(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<b8;o++){const a=`border${D2[o]}Radius`;let l=R1(e,a),c=R1(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||P1(l)===P1(c)?(t[a]=Math.max(ct(A1(l),A1(c),r),0),(ni.test(c)||ni.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=ct(e.rotate||0,n.rotate||0,r))}function R1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const E8=O2(0,.5,JD),S8=O2(.5,.95,tr);function O2(t,e,n){return r=>r<t?0:r>e?1:n(Sl(t,e,r))}function N1(t,e){t.min=e.min,t.max=e.max}function or(t,e){N1(t.x,e.x),N1(t.y,e.y)}function D1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function O1(t,e,n,r,i){return t-=e,t=Ap(t,1/n,r),i!==void 0&&(t=Ap(t,1/i,r)),t}function k8(t,e=0,n=1,r=.5,i,s=t,o=t){if(ni.test(e)&&(e=parseFloat(e),e=ct(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ct(s.min,s.max,r);t===s&&(a-=e),t.min=O1(t.min,e,n,a,i),t.max=O1(t.max,e,n,a,i)}function M1(t,e,[n,r,i],s,o){k8(t,e[n],e[r],e[i],e.scale,s,o)}const C8=["x","scaleX","originX"],I8=["y","scaleY","originY"];function j1(t,e,n,r){M1(t.x,e,C8,n?n.x:void 0,r?r.x:void 0),M1(t.y,e,I8,n?n.y:void 0,r?r.y:void 0)}function L1(t){return t.translate===0&&t.scale===1}function M2(t){return L1(t.x)&&L1(t.y)}function V1(t,e){return t.min===e.min&&t.max===e.max}function A8(t,e){return V1(t.x,e.x)&&V1(t.y,e.y)}function F1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function j2(t,e){return F1(t.x,e.x)&&F1(t.y,e.y)}function U1(t){return rr(t.x)/rr(t.y)}function B1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class P8{constructor(){this.members=[]}add(e){bw(this.members,e),e.scheduleRender()}remove(e){if(Tw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function R8(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:p,skewX:m,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const bo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Vc=typeof window<"u"&&window.MotionDebug!==void 0,ay=["","X","Y","Z"],N8={visibility:"hidden"},z1=1e3;let D8=0;function ly(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function L2(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=HD(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ze,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&L2(r)}function V2({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=D8++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Vc&&(bo.totalNodes=bo.resolvedTargetDeltas=bo.recalculatedProjection=0),this.nodes.forEach(j8),this.nodes.forEach(B8),this.nodes.forEach(z8),this.nodes.forEach(L8),Vc&&window.MotionDebug.record(bo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new x8)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ew),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=v8(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=w8(p,250),Tf.hasAnimatedSinceResize&&(Tf.hasAnimatedSinceResize=!1,this.nodes.forEach(W1))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||K8,{onLayoutAnimationStart:x,onLayoutAnimationComplete:v}=u.getProps(),w=!this.targetLayout||!j2(this.targetLayout,y)||m,E=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||p&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,E);const P={...vw(_,"layout"),onPlay:x,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else p||W1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,$s(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach($8),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&L2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($1);return}this.isUpdating||this.nodes.forEach(F8),this.isUpdating=!1,this.nodes.forEach(U8),this.nodes.forEach(O8),this.nodes.forEach(M8),this.clearAllSnapshots();const a=ri.now();Gt.delta=Hi(0,1e3/60,a-Gt.timestamp),Gt.timestamp=a,Gt.isProcessing=!0,Jg.update.process(Gt),Jg.preRender.process(Gt),Jg.render.process(Gt),Gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,lw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(V8),this.sharedNodes.forEach(W8)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ze.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ze.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_t(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!M2(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||wo(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),G8(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return _t();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Y8))){const{scroll:u}=this.root;u&&(Ha(l.x,u.offset.x),Ha(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=_t();if(or(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:p}=u;u!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&or(l,o),Ha(l.x,f.offset.x),Ha(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=_t();or(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&qa(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),wo(u.latestValues)&&qa(l,u.latestValues)}return wo(this.latestValues)&&qa(l,this.latestValues),l}removeTransform(o){const a=_t();or(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!wo(c.latestValues))continue;d_(c.latestValues)&&c.updateSnapshot();const u=_t(),f=c.measurePageBox();or(u,f),j1(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return wo(this.latestValues)&&j1(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=Gt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_t(),this.relativeTargetOrigin=_t(),cu(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),or(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=_t(),this.targetWithTransforms=_t()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JH(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):or(this.target,this.layout.layoutBox),A2(this.target,this.targetDelta)):or(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_t(),this.relativeTargetOrigin=_t(),cu(this.relativeTargetOrigin,this.target,m.target),or(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vc&&bo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||d_(this.parent.latestValues)||I2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Gt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;or(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;a8(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=_t());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(D1(this.prevProjectionDelta.x,this.projectionDelta.x),D1(this.prevProjectionDelta.y,this.projectionDelta.y)),lu(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!B1(this.projectionDelta.x,this.prevProjectionDelta.x)||!B1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Vc&&bo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wa(),this.projectionDelta=Wa(),this.projectionDeltaWithTransform=Wa()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=Wa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=_t(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,_=m!==y,x=this.getStack(),v=!x||x.members.length<=1,w=!!(_&&!v&&this.options.crossfade===!0&&!this.path.some(q8));this.animationProgress=0;let E;this.mixTargetDelta=P=>{const C=P/1e3;H1(f.x,o.x,C),H1(f.y,o.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(cu(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),H8(this.relativeTarget,this.relativeTargetOrigin,p,C),E&&A8(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=_t()),or(E,this.relativeTarget)),_&&(this.animationValues=u,T8(u,c,this.latestValues,C,w,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&($s(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ze.update(()=>{Tf.hasAnimatedSinceResize=!0,this.currentAnimation=y8(0,z1,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(z1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&F2(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||_t();const f=rr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=rr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}or(a,l),qa(a,u),lu(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new P8),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&ly("z",o,c,this.animationValues);for(let u=0;u<ay.length;u++)ly(`rotate${ay[u]}`,o,c,this.animationValues),ly(`skew${ay[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return N8;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=wf(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=wf(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!wo(this.latestValues)&&(_.transform=u?u({},""):"none",this.hasProjected=!1),_}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=R8(this.projectionDeltaWithTransform,this.treeScale,p),u&&(c.transform=u(p,c.transform));const{x:m,y}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const _ in Ep){if(p[_]===void 0)continue;const{correct:x,applyTo:v}=Ep[_],w=c.transform==="none"?p[_]:x(p[_],f);if(v){const E=v.length;for(let P=0;P<E;P++)c[v[P]]=w}else c[_]=w}return this.options.layoutId&&(c.pointerEvents=f===this?wf(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach($1),this.root.sharedNodes.clear()}}}function O8(t){t.updateLayout()}function M8(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?lr(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],m=rr(p);p.min=r[f].min,p.max=p.min+m}):F2(s,n.layoutBox,r)&&lr(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],m=rr(r[f]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+m)});const a=Wa();lu(a,r,n.layoutBox);const l=Wa();o?lu(l,t.applyTransform(i,!0),n.measuredBox):lu(l,r,n.layoutBox);const c=!M2(a);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const y=_t();cu(y,n.layoutBox,p.layoutBox);const _=_t();cu(_,r,m.layoutBox),j2(y,_)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=y,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function j8(t){Vc&&bo.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function L8(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function V8(t){t.clearSnapshot()}function $1(t){t.clearMeasurements()}function F8(t){t.isLayoutDirty=!1}function U8(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function W1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function B8(t){t.resolveTargetDelta()}function z8(t){t.calcProjection()}function $8(t){t.resetSkewAndRotation()}function W8(t){t.removeLeadSnapshot()}function H1(t,e,n){t.translate=ct(e.translate,0,n),t.scale=ct(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function q1(t,e,n,r){t.min=ct(e.min,n.min,r),t.max=ct(e.max,n.max,r)}function H8(t,e,n,r){q1(t.x,e.x,n.x,r),q1(t.y,e.y,n.y,r)}function q8(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const K8={duration:.45,ease:[.4,0,.1,1]},K1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),G1=K1("applewebkit/")&&!K1("chrome/")?Math.round:tr;function Y1(t){t.min=G1(t.min),t.max=G1(t.max)}function G8(t){Y1(t.x),Y1(t.y)}function F2(t,e,n){return t==="position"||t==="preserve-aspect"&&!XH(U1(e),U1(n),.2)}function Y8(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const Q8=V2({attachResizeListener:(t,e)=>Zu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),cy={current:void 0},U2=V2({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!cy.current){const t=new Q8({});t.mount(window),t.setOptions({layoutScroll:!0}),cy.current=t}return cy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),X8={pan:{Feature:f8},drag:{Feature:d8,ProjectionNode:U2,MeasureLayout:N2}};function Q1(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ze.postRender(()=>s(e,jh(e)))}class J8 extends Zs{mount(){const{current:e}=this.node;e&&(this.unmount=X9(e,n=>(Q1(this.node,n,"Start"),r=>Q1(this.node,r,"End"))))}unmount(){}}class Z8 extends Zs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mh(Zu(this.node.current,"focus",()=>this.onFocus()),Zu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function X1(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ze.postRender(()=>s(e,jh(e)))}class eq extends Zs{mount(){const{current:e}=this.node;e&&(this.unmount=tW(e,n=>(X1(this.node,n,"Start"),(r,{success:i})=>X1(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const p_=new WeakMap,uy=new WeakMap,tq=t=>{const e=p_.get(t.target);e&&e(t)},nq=t=>{t.forEach(tq)};function rq({root:t,...e}){const n=t||document;uy.has(n)||uy.set(n,{});const r=uy.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(nq,{root:t,...e})),r[i]}function iq(t,e,n){const r=rq(e);return p_.set(t,n),r.observe(t),()=>{p_.delete(t),r.unobserve(t)}}const sq={some:0,all:1};class oq extends Zs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:sq[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),p=c?u:f;p&&p(l)};return iq(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(aq(e,n))&&this.startObserver()}unmount(){}}function aq({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const lq={inView:{Feature:oq},tap:{Feature:eq},focus:{Feature:Z8},hover:{Feature:J8}},cq={layout:{ProjectionNode:U2,MeasureLayout:N2}},m_={current:null},B2={current:!1};function uq(){if(B2.current=!0,!!rw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>m_.current=t.matches;t.addListener(e),e()}else m_.current=!1}const hq=[...d2,dn,Ws],dq=t=>hq.find(h2(t)),J1=new WeakMap;function fq(t,e,n){for(const r in e){const i=e[r],s=n[r];if(yn(i))t.addValue(r,i);else if(yn(s))t.addValue(r,Xu(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Xu(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Z1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class pq{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Pw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=ri.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ze.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=jm(n),this.isVariantNode=xD(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const y=p[m];l[m]!==void 0&&yn(y)&&y.set(l[m],!1)}}mount(e){this.current=e,J1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),B2.current||uq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:m_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){J1.delete(this.current),this.projection&&this.projection.unmount(),$s(this.notifyUpdate),$s(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ua.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ze.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in kl){const n=kl[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_t()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Z1.length;r++){const i=Z1[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=fq(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Xu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(c2(i)||e2(i))?i=parseFloat(i):!dq(i)&&Ws.test(n)&&(i=o2(e,n)),this.setBaseTarget(e,yn(i)?i.get():i)),yn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=uw(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!yn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ew),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class z2 extends pq{constructor(){super(...arguments),this.KeyframeResolver=f2}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;yn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function mq(t){return window.getComputedStyle(t)}class gq extends z2{constructor(){super(...arguments),this.type="html",this.renderInstance=AD}readValueFromInstance(e,n){if(ua.has(n)){const r=Aw(n);return r&&r.default||0}else{const r=mq(e),i=(kD(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return P2(e,n)}build(e,n,r){fw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return yw(e,n,r)}}class yq extends z2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=_t}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ua.has(n)){const r=Aw(n);return r&&r.default||0}return n=PD.has(n)?n:aw(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return DD(e,n,r)}build(e,n,r){pw(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){RD(e,n,r,i)}mount(e){this.isSVGTag=gw(e.tagName),super.mount(e)}}const vq=(t,e)=>cw(t)?new yq(e):new gq(e,{allowProjection:t!==O.Fragment}),_q=W9({...zH,...lq,...X8,...cq},vq),We=s9(_q),$2=()=>d.jsxs("div",{className:"flex items-center gap-2 px-4 py-3",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"#22d3ee",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-7 h-7",children:[d.jsx("path",{d:"M12 2a10 10 0 0 0-7 3c-1.5 1.5-2 4.5-2 7a10 10 0 0 0 14 0c0-2.5.5-5.5 2-7a10 10 0 0 0-7-3z",fill:"rgba(34, 211, 238, 0.1)"}),d.jsx("circle",{cx:"9",cy:"11",r:"1.5",fill:"#22d3ee"}),d.jsx("circle",{cx:"15",cy:"13",r:"1.5",fill:"#22d3ee"}),d.jsx("path",{d:"M10.5 11.5 L13.5 12.5",stroke:"#22d3ee",strokeWidth:"2"})]}),d.jsx("span",{className:"text-xl font-bold text-white",children:"PT Manager"})]}),xq=[{to:"/",icon:d.jsx(MS,{size:18}),label:"Dashboard",iconComponent:MS},{to:"/clients",icon:d.jsx(VS,{size:18}),label:"Clienti",iconComponent:VS},{to:"/new",icon:d.jsx(LS,{size:18}),label:"Nuovo Cliente",iconComponent:LS},{to:"/updates",icon:d.jsx(OS,{size:18}),label:"Aggiornamenti",iconComponent:OS},{to:"/admin/chat",icon:d.jsx(Gu,{size:18}),label:"Chat",iconComponent:Gu}],wq=({to:t,icon:e,label:n,onClick:r,location:i})=>{const s=i.pathname===t||t==="/"&&i.pathname==="/";return d.jsxs("button",{onClick:r,className:`flex items-center gap-3 w-full p-2.5 rounded-md text-sm transition-colors ${s?"bg-primary/20 text-white font-semibold":"text-muted hover:bg-white/5 hover:text-white"}`,children:[e,d.jsx("span",{children:n})]})},ek=({onLinkClick:t})=>{const e=Wt(),n=ui(),r=Ki(),i=()=>{Lu(n).then(()=>{e("/login")})};return d.jsxs("aside",{className:"w-64 bg-card/60 backdrop-blur-lg p-4 flex flex-col border-r border-white/10 h-full",children:[d.jsx($2,{}),d.jsx("nav",{className:"flex flex-col gap-2 flex-1",children:xq.map(s=>d.jsx(wq,{to:s.to,icon:s.icon,label:s.label,location:r,onClick:()=>{e(s.to),t&&t()}},s.to))}),d.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:d.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-3 px-4 py-2 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30 transition-colors",children:[d.jsx(uD,{size:20}),d.jsx("span",{className:"text-sm font-semibold",children:"Logout"})]})})]})};function bq(){const[t,e]=O.useState(!1),n=Ki();return d.jsxs("div",{className:"relative min-h-screen text-foreground flex",children:[d.jsx(Tq,{}),d.jsx("div",{className:"hidden md:flex md:fixed h-full z-30",children:d.jsx(ek,{})}),d.jsx(ca,{children:t&&d.jsx(We.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 left-0 h-full z-50 md:hidden",children:d.jsx(ek,{onLinkClick:()=>e(!1)})})}),d.jsxs("div",{className:"flex-1 md:ml-64 min-h-screen",children:[d.jsxs("header",{className:"md:hidden sticky top-0 bg-card/80 backdrop-blur-md h-16 flex items-center justify-between px-4 border-b border-white/10 z-40",children:[d.jsx("button",{onClick:()=>e(!t),className:"text-white",children:t?d.jsx(Nm,{size:24}):d.jsx($$,{size:24})}),d.jsx($2,{}),d.jsx("div",{className:"w-6 h-6"})]}),d.jsx("main",{className:"p-4 sm:p-6 lg:p-8",children:d.jsx(We.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeInOut"},children:d.jsx(TP,{})},n.pathname)})]})]})}const Tq=()=>d.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden bg-background",children:[d.jsx(We.div,{className:"absolute top-[10%] left-[5%] h-[400px] w-[400px] rounded-full bg-blue-500/20 filter blur-3xl",animate:{x:[0,150,-50,0],y:[0,-50,100,0],scale:[1,1.3,.8,1]},transition:{duration:40,repeat:1/0,repeatType:"mirror"}}),d.jsx(We.div,{className:"absolute bottom-[10%] right-[5%] h-[400px] w-[400px] rounded-full bg-cyan-500/20 filter blur-3xl",animate:{x:[0,-100,50,0],y:[0,100,-50,0],scale:[1,.8,1.2,1]},transition:{duration:45,repeat:1/0,repeatType:"mirror",delay:7}})]});function Eq(){Wt();const[t,e]=O.useState(""),[n,r]=O.useState(""),[i,s]=O.useState(""),o=async a=>{a.preventDefault(),s("");try{await oR(Ku,t,n),sessionStorage.setItem("app_role","admin")}catch(l){s("Credenziali non valide. Riprova."),console.error("Errore di login admin:",l)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background text-foreground",children:d.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-card rounded-2xl border border-white/10 shadow-2xl",children:[d.jsx("h2",{className:"text-3xl font-bold text-center text-white",children:"Accesso Admin"}),d.jsxs("form",{onSubmit:o,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block mb-1 text-sm font-medium text-muted",children:"Email"}),d.jsx("input",{type:"email",value:t,onChange:a=>e(a.target.value),required:!0,className:"w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",autoComplete:"email"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block mb-1 text-sm font-medium text-muted",children:"Password"}),d.jsx("input",{type:"password",value:n,onChange:a=>r(a.target.value),required:!0,className:"w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",autoComplete:"current-password"})]}),i&&d.jsx("p",{className:"text-red-400 text-sm text-center",children:i}),d.jsx("div",{children:d.jsx("button",{type:"submit",className:"w-full px-4 py-2.5 font-bold text-white bg-primary rounded-lg hover:bg-primary/80",children:"Accedi"})})]})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Lh(t){return t+.5|0}const ys=(t,e,n)=>Math.max(Math.min(t,n),e);function Fc(t){return ys(Lh(t*2.55),0,255)}function Ms(t){return ys(Lh(t*255),0,255)}function Ti(t){return ys(Lh(t/2.55)/100,0,1)}function tk(t){return ys(Lh(t*100),0,100)}const ar={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},g_=[..."0123456789ABCDEF"],Sq=t=>g_[t&15],kq=t=>g_[(t&240)>>4]+g_[t&15],Dd=t=>(t&240)>>4===(t&15),Cq=t=>Dd(t.r)&&Dd(t.g)&&Dd(t.b)&&Dd(t.a);function Iq(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ar[t[1]]*17,g:255&ar[t[2]]*17,b:255&ar[t[3]]*17,a:e===5?ar[t[4]]*17:255}:(e===7||e===9)&&(n={r:ar[t[1]]<<4|ar[t[2]],g:ar[t[3]]<<4|ar[t[4]],b:ar[t[5]]<<4|ar[t[6]],a:e===9?ar[t[7]]<<4|ar[t[8]]:255})),n}const Aq=(t,e)=>t<255?e(t):"";function Pq(t){var e=Cq(t)?Sq:kq;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Aq(t.a,e):void 0}const Rq=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function W2(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Nq(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Dq(t,e,n){const r=W2(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function Oq(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function Ow(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=Oq(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function Mw(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Ms)}function jw(t,e,n){return Mw(W2,t,e,n)}function Mq(t,e,n){return Mw(Dq,t,e,n)}function jq(t,e,n){return Mw(Nq,t,e,n)}function H2(t){return(t%360+360)%360}function Lq(t){const e=Rq.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Fc(+e[5]):Ms(+e[5]));const i=H2(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=Mq(i,s,o):e[1]==="hsv"?r=jq(i,s,o):r=jw(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function Vq(t,e){var n=Ow(t);n[0]=H2(n[0]+e),n=jw(n),t.r=n[0],t.g=n[1],t.b=n[2]}function Fq(t){if(!t)return;const e=Ow(t),n=e[0],r=tk(e[1]),i=tk(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Ti(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const nk={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},rk={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Uq(){const t={},e=Object.keys(rk),n=Object.keys(nk);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,nk[s]);s=parseInt(rk[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Od;function Bq(t){Od||(Od=Uq(),Od.transparent=[0,0,0,0]);const e=Od[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const zq=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function $q(t){const e=zq.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Fc(o):ys(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Fc(r):ys(r,0,255)),i=255&(e[4]?Fc(i):ys(i,0,255)),s=255&(e[6]?Fc(s):ys(s,0,255)),{r,g:i,b:s,a:n}}}function Wq(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ti(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const hy=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ba=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Hq(t,e,n){const r=ba(Ti(t.r)),i=ba(Ti(t.g)),s=ba(Ti(t.b));return{r:Ms(hy(r+n*(ba(Ti(e.r))-r))),g:Ms(hy(i+n*(ba(Ti(e.g))-i))),b:Ms(hy(s+n*(ba(Ti(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Md(t,e,n){if(t){let r=Ow(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=jw(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function q2(t,e){return t&&Object.assign(e||{},t)}function ik(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ms(t[3]))):(e=q2(t,{r:0,g:0,b:0,a:1}),e.a=Ms(e.a)),e}function qq(t){return t.charAt(0)==="r"?$q(t):Lq(t)}class eh{constructor(e){if(e instanceof eh)return e;const n=typeof e;let r;n==="object"?r=ik(e):n==="string"&&(r=Iq(e)||Bq(e)||qq(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=q2(this._rgb);return e&&(e.a=Ti(e.a)),e}set rgb(e){this._rgb=ik(e)}rgbString(){return this._valid?Wq(this._rgb):void 0}hexString(){return this._valid?Pq(this._rgb):void 0}hslString(){return this._valid?Fq(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Hq(this._rgb,e._rgb,n)),this}clone(){return new eh(this.rgb)}alpha(e){return this._rgb.a=Ms(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Lh(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Md(this._rgb,2,e),this}darken(e){return Md(this._rgb,2,-e),this}saturate(e){return Md(this._rgb,1,e),this}desaturate(e){return Md(this._rgb,1,-e),this}rotate(e){return Vq(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function yi(){}const Kq=(()=>{let t=0;return()=>t++})();function Me(t){return t==null}function Rt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ce(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Tn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ur(t,e){return Tn(t)?t:e}function be(t,e){return typeof t>"u"?e:t}const Gq=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Xe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function je(t,e,n,r){let i,s,o;if(Rt(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Ce(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Pp(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Rp(t){if(Rt(t))return t.map(Rp);if(Ce(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Rp(t[n[i]]);return e}return t}function K2(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Yq(t,e,n,r){if(!K2(t))return;const i=e[t],s=n[t];Ce(i)&&Ce(s)?th(i,s,r):e[t]=Rp(s)}function th(t,e,n){const r=Rt(e)?e:[e],i=r.length;if(!Ce(t))return t;n=n||{};const s=n.merger||Yq;let o;for(let a=0;a<i;++a){if(o=r[a],!Ce(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function uu(t,e){return th(t,e,{merger:Qq})}function Qq(t,e,n){if(!K2(t))return;const r=e[t],i=n[t];Ce(r)&&Ce(i)?uu(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Rp(i))}const sk={"":t=>t,x:t=>t.x,y:t=>t.y};function Xq(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function Jq(t){const e=Xq(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Il(t,e){return(sk[e]||(sk[e]=Jq(e)))(t)}function Lw(t){return t.charAt(0).toUpperCase()+t.slice(1)}const nh=t=>typeof t<"u",Hs=t=>typeof t=="function",ok=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Zq(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const $t=Math.PI,Rr=2*$t,e7=Rr+$t,Np=Number.POSITIVE_INFINITY,t7=$t/180,Cr=$t/2,mo=$t/4,ak=$t*2/3,G2=Math.log10,ii=Math.sign;function hu(t,e,n){return Math.abs(t-e)<n}function lk(t){const e=Math.round(t);t=hu(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(G2(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function n7(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function r7(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function rh(t){return!r7(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function i7(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function s7(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ro(t){return t*($t/180)}function o7(t){return t*(180/$t)}function ck(t){if(!Tn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function a7(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*$t&&(s+=Rr),{angle:s,distance:i}}function y_(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function l7(t,e){return(t-e+e7)%Rr-$t}function Hr(t){return(t%Rr+Rr)%Rr}function Y2(t,e,n,r){const i=Hr(t),s=Hr(e),o=Hr(n),a=Hr(s-i),l=Hr(o-i),c=Hr(i-s),u=Hr(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function Zn(t,e,n){return Math.max(e,Math.min(n,t))}function c7(t){return Zn(t,-32768,32767)}function vs(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Vw(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const No=(t,e,n,r)=>Vw(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),u7=(t,e,n)=>Vw(t,n,r=>t[r][e]>=n);function h7(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const Q2=["push","pop","shift","splice","unshift"];function d7(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Q2.forEach(n=>{const r="_onData"+Lw(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function uk(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(Q2.forEach(s=>{delete t[s]}),delete t._chartjs)}function X2(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const J2=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Z2(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,J2.call(window,()=>{r=!1,t.apply(e,n)}))}}function f7(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Fw=t=>t==="start"?"left":t==="end"?"right":"center",hn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,p7=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function m7(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:f,max:p,minDefined:m,maxDefined:y}=o.getUserBounds();if(m){if(i=Math.min(No(l,u,f).lo,n?r:No(e,u,o.getPixelForValue(f)).lo),c){const _=l.slice(0,i+1).reverse().findIndex(x=>!Me(x[a.axis]));i-=Math.max(0,_)}i=Zn(i,0,r-1)}if(y){let _=Math.max(No(l,o.axis,p,!0).hi+1,n?0:No(e,u,o.getPixelForValue(p),!0).hi+1);if(c){const x=l.slice(_-1).findIndex(v=>!Me(v[a.axis]));_+=Math.max(0,x)}s=Zn(_,i,r)-i}else s=r-i}return{start:i,count:s}}function g7(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const jd=t=>t===0||t===1,hk=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Rr/n)),dk=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Rr/n)+1,du={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Cr)+1,easeOutSine:t=>Math.sin(t*Cr),easeInOutSine:t=>-.5*(Math.cos($t*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>jd(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>jd(t)?t:hk(t,.075,.3),easeOutElastic:t=>jd(t)?t:dk(t,.075,.3),easeInOutElastic(t){return jd(t)?t:t<.5?.5*hk(t*2,.1125,.45):.5+.5*dk(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-du.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?du.easeInBounce(t*2)*.5:du.easeOutBounce(t*2-1)*.5+.5};function Uw(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function fk(t){return Uw(t)?t:new eh(t)}function dy(t){return Uw(t)?t:new eh(t).saturate(.5).darken(.1).hexString()}const y7=["x","y","borderWidth","radius","tension"],v7=["color","borderColor","backgroundColor"];function _7(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:v7},numbers:{type:"number",properties:y7}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function x7(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const pk=new Map;function w7(t,e){e=e||{};const n=t+JSON.stringify(e);let r=pk.get(n);return r||(r=new Intl.NumberFormat(t,e),pk.set(n,r)),r}function eO(t,e,n){return w7(e,n).format(t)}const b7={values(t){return Rt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=T7(t,n)}const o=G2(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),eO(t,r,l)}};function T7(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var tO={formatters:b7};function E7(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:tO.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Jo=Object.create(null),v_=Object.create(null);function fu(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function fy(t,e,n){return typeof e=="string"?th(fu(t,e),n):th(fu(t,""),e)}class S7{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>dy(i.backgroundColor),this.hoverBorderColor=(r,i)=>dy(i.borderColor),this.hoverColor=(r,i)=>dy(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return fy(this,e,n)}get(e){return fu(this,e)}describe(e,n){return fy(v_,e,n)}override(e,n){return fy(Jo,e,n)}route(e,n,r,i){const s=fu(this,e),o=fu(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Ce(l)?Object.assign({},c,l):be(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Et=new S7({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[_7,x7,E7]);function k7(t){return!t||Me(t.size)||Me(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function mk(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function go(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function gk(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function __(t,e,n,r){nO(t,e,n,r,null)}function nO(t,e,n,r,i){let s,o,a,l,c,u,f,p;const m=e.pointStyle,y=e.rotation,_=e.radius;let x=(y||0)*t7;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(x),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,_,0,0,Rr):t.arc(n,r,_,0,Rr),t.closePath();break;case"triangle":u=i?i/2:_,t.moveTo(n+Math.sin(x)*u,r-Math.cos(x)*_),x+=ak,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*_),x+=ak,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*_),t.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(x+mo)*l,f=Math.cos(x+mo)*(i?i/2-c:l),a=Math.sin(x+mo)*l,p=Math.sin(x+mo)*(i?i/2-c:l),t.arc(n-f,r-a,c,x-$t,x-Cr),t.arc(n+p,r-o,c,x-Cr,x),t.arc(n+f,r+a,c,x,x+Cr),t.arc(n-p,r+o,c,x+Cr,x+$t),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*_,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}x+=mo;case"rectRot":f=Math.cos(x)*(i?i/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(i?i/2:_),t.moveTo(n-f,r-a),t.lineTo(n+p,r-o),t.lineTo(n+f,r+a),t.lineTo(n-p,r+o),t.closePath();break;case"crossRot":x+=mo;case"cross":f=Math.cos(x)*(i?i/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(i?i/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"star":f=Math.cos(x)*(i?i/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(i?i/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o),x+=mo,f=Math.cos(x)*(i?i/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(i?i/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"line":o=i?i/2:Math.cos(x)*_,a=Math.sin(x)*_,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(x)*(i?i/2:_),r+Math.sin(x)*_);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ih(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Fm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Um(t){t.restore()}function C7(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function I7(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function A7(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Me(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function P7(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function R7(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function sh(t,e,n,r,i,s={}){const o=Rt(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,A7(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&R7(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Me(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),P7(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Dp(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*$t,$t,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,$t,Cr,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Cr,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Cr,!0),t.lineTo(n+o.topLeft,r)}const N7=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,D7=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function O7(t,e){const n=(""+t).match(N7);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const M7=t=>+t||0;function rO(t,e){const n={},r=Ce(e),i=r?Object.keys(e):e,s=Ce(t)?r?o=>be(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=M7(s(o));return n}function iO(t){return rO(t,{top:"y",right:"x",bottom:"y",left:"x"})}function sl(t){return rO(t,["topLeft","topRight","bottomLeft","bottomRight"])}function gr(t){const e=iO(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function vn(t,e){t=t||{},e=e||Et.font;let n=be(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=be(t.style,e.style);r&&!(""+r).match(D7)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:be(t.family,e.family),lineHeight:O7(be(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:be(t.weight,e.weight),string:""};return i.string=k7(i),i}function Ld(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function j7(t,e,n){const{min:r,max:i}=t,s=Gq(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function ha(t,e){return Object.assign(Object.create(t),e)}function Bw(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=lO("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>Bw([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return oO(a,l,()=>W7(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return vk(a).includes(l)},ownKeys(a){return vk(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function Al(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:sO(t,r),setContext:s=>Al(t,s,n,r),override:s=>Al(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return oO(s,o,()=>V7(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function sO(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Hs(n)?n:()=>n,isIndexable:Hs(r)?r:()=>r}}const L7=(t,e)=>t?t+Lw(e):e,zw=(t,e)=>Ce(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function oO(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function V7(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Hs(a)&&o.isScriptable(e)&&(a=F7(e,a,t,n)),Rt(a)&&a.length&&(a=U7(e,a,t,o.isIndexable)),zw(e,a)&&(a=Al(a,i,s&&s[e],o)),a}function F7(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),zw(t,l)&&(l=$w(i._scopes,i,t,l)),l}function U7(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Ce(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const f=$w(c,i,t,u);e.push(Al(f,s,o&&o[t],a))}}return e}function aO(t,e,n){return Hs(t)?t(e,n):t}const B7=(t,e)=>t===!0?e:typeof t=="string"?Il(e,t):void 0;function z7(t,e,n,r,i){for(const s of e){const o=B7(n,s);if(o){t.add(o);const a=aO(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function $w(t,e,n,r){const i=e._rootScopes,s=aO(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=yk(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=yk(a,o,s,l,r),l===null)?!1:Bw(Array.from(a),[""],i,s,()=>$7(e,n,r))}function yk(t,e,n,r,i){for(;n;)n=z7(t,e,n,r,i);return n}function $7(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Rt(i)&&Ce(n)?n:i||{}}function W7(t,e,n,r){let i;for(const s of e)if(i=lO(L7(s,t),n),typeof i<"u")return zw(t,i)?$w(n,r,t,i):i}function lO(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function vk(t){let e=t._keys;return e||(e=t._keys=H7(t._scopes)),e}function H7(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const q7=Number.EPSILON||1e-14,Pl=(t,e)=>e<t.length&&!t[e].skip&&t[e],cO=t=>t==="x"?"y":"x";function K7(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=y_(s,i),l=y_(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=r*c,p=r*u;return{previous:{x:s.x-f*(o.x-i.x),y:s.y-f*(o.y-i.y)},next:{x:s.x+p*(o.x-i.x),y:s.y+p*(o.y-i.y)}}}function G7(t,e,n){const r=t.length;let i,s,o,a,l,c=Pl(t,0);for(let u=0;u<r-1;++u)if(l=c,c=Pl(t,u+1),!(!l||!c)){if(hu(e[u],0,q7)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function Y7(t,e,n="x"){const r=cO(n),i=t.length;let s,o,a,l=Pl(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Pl(t,c+1),!a)continue;const u=a[n],f=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=f-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=f+s*e[c])}}function Q7(t,e="x"){const n=cO(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Pl(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Pl(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?ii(i[o-1])!==ii(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}G7(t,i,s),Y7(t,s,e)}function Vd(t,e,n){return Math.max(Math.min(t,n),e)}function X7(t,e){let n,r,i,s,o,a=ih(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&ih(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=Vd(i.cp1x,e.left,e.right),i.cp1y=Vd(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Vd(i.cp2x,e.left,e.right),i.cp2y=Vd(i.cp2y,e.top,e.bottom)))}function J7(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")Q7(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=K7(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&X7(t,n)}function Ww(){return typeof window<"u"&&typeof document<"u"}function Hw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Op(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Bm=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Z7(t,e){return Bm(t).getPropertyValue(e)}const eK=["top","right","bottom","left"];function Fo(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=eK[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const tK=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function nK(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(tK(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function To(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Bm(n),s=i.boxSizing==="border-box",o=Fo(i,"padding"),a=Fo(i,"border","width"),{x:l,y:c,box:u}=nK(t,n),f=o.left+(u&&a.left),p=o.top+(u&&a.top);let{width:m,height:y}=e;return s&&(m-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-f)/m*n.width/r),y:Math.round((c-p)/y*n.height/r)}}function rK(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&Hw(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Bm(s),l=Fo(a,"border","width"),c=Fo(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Op(a.maxWidth,s,"clientWidth"),i=Op(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Np,maxHeight:i||Np}}const Fd=t=>Math.round(t*10)/10;function iK(t,e,n,r){const i=Bm(t),s=Fo(i,"margin"),o=Op(i.maxWidth,t,"clientWidth")||Np,a=Op(i.maxHeight,t,"clientHeight")||Np,l=rK(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const p=Fo(i,"border","width"),m=Fo(i,"padding");c-=m.width+p.width,u-=m.height+p.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=Fd(Math.min(c,o,l.maxWidth)),u=Fd(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Fd(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Fd(Math.floor(u*r))),{width:c,height:u}}function _k(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const sK=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Ww()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function xk(t,e){const n=Z7(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Eo(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function oK(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function aK(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Eo(t,i,n),a=Eo(i,s,n),l=Eo(s,e,n),c=Eo(o,a,n),u=Eo(a,l,n);return Eo(c,u,n)}const lK=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},cK=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ol(t,e,n){return t?lK(e,n):cK()}function uO(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function hO(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function dO(t){return t==="angle"?{between:Y2,compare:l7,normalize:Hr}:{between:vs,compare:(e,n)=>e-n,normalize:e=>e}}function wk({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function uK(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=dO(r),l=e.length;let{start:c,end:u,loop:f}=t,p,m;if(f){for(c+=l,u+=l,p=0,m=l;p<m&&o(a(e[c%l][r]),i,s);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:t.style}}function fO(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=dO(r),{start:u,end:f,loop:p,style:m}=uK(t,e,n),y=[];let _=!1,x=null,v,w,E;const P=()=>l(i,E,v)&&a(i,E)!==0,C=()=>a(s,v)===0||l(s,E,v),M=()=>_||P(),S=()=>!_||C();for(let b=u,k=u;b<=f;++b)w=e[b%o],!w.skip&&(v=c(w[r]),v!==E&&(_=l(v,i,s),x===null&&M()&&(x=a(v,i)===0?b:k),x!==null&&S()&&(y.push(wk({start:x,end:b,loop:p,count:o,style:m})),x=null),k=b,E=v));return x!==null&&y.push(wk({start:x,end:f,loop:p,count:o,style:m})),y}function pO(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=fO(r[i],t.points,e);s.length&&n.push(...s)}return n}function hK(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function dK(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function fK(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=hK(n,i,s,r);if(r===!0)return bk(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return bk(t,dK(n,o,l,c),n,e)}function bk(t,e,n,r){return!r||!r.setContext||!n?e:pK(t,e,n,r)}function pK(t,e,n,r){const i=t._chart.getContext(),s=Tk(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,f=e[0].start,p=f;function m(y,_,x,v){const w=a?-1:1;if(y!==_){for(y+=l;n[y%l].skip;)y-=w;for(;n[_%l].skip;)_+=w;y%l!==_%l&&(c.push({start:y%l,end:_%l,loop:x,style:v}),u=v,f=_%l)}}for(const y of e){f=a?f:y.start;let _=n[f%l],x;for(p=f+1;p<=y.end;p++){const v=n[p%l];x=Tk(r.setContext(ha(i,{type:"segment",p0:_,p1:v,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),mK(x,u)&&m(f,p-1,y.loop,u),_=v,u=x}f<p-1&&m(f,p-1,y.loop,u)}return c}function Tk(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function mK(t,e){if(!e)return!1;const n=[],r=function(i,s){return Uw(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Ud(t,e,n){return t.options.clip?t[n]:e[n]}function gK(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Ud(n,e,"left"),right:Ud(n,e,"right"),top:Ud(r,e,"top"),bottom:Ud(r,e,"bottom")}:e}function mO(t,e){const n=e._clip;if(n.disabled)return!1;const r=gK(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class yK{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=J2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var _i=new yK;const Ek="transparent",vK={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=fk(t||Ek),i=r.valid&&fk(e||Ek);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class _K{constructor(e,n,r,i){const s=n[r];i=Ld([e.to,i,s,e.from]);const o=Ld([e.from,s,i]);this._active=!0,this._fn=e.fn||vK[e.type||typeof o],this._easing=du[e.easing]||du.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Ld([e.to,n,i,e.from]),this._from=Ld([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class gO{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ce(e))return;const n=Object.keys(Et.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Ce(s))return;const o={};for(const a of n)o[a]=s[a];(Rt(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=wK(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&xK(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let f=s[c];const p=r.get(c);if(f)if(p&&f.active()){f.update(p,u,a);continue}else f.cancel();if(!p||!p.duration){e[c]=u;continue}s[c]=f=new _K(p,e,c,u),i.push(f)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return _i.add(this._chart,r),!0}}function xK(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function wK(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Sk(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function bK(t,e,n){if(n===!1)return!1;const r=Sk(t,n),i=Sk(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function TK(t){let e,n,r,i;return Ce(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function yO(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function kk(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Tn(c)&&(s||e===0||ii(e)===ii(c))&&(e+=c)}return!u&&!r.all?0:e}function EK(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function py(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function SK(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function kK(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function CK(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Ck(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function Ik(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=SK(s,o,r),f=e.length;let p;for(let m=0;m<f;++m){const y=e[m],{[l]:_,[c]:x}=y,v=y._stacks||(y._stacks={});p=v[c]=CK(i,u,_),p[a]=x,p._top=Ck(p,o,!0,r.type),p._bottom=Ck(p,o,!1,r.type);const w=p._visualValues||(p._visualValues={});w[a]=x}}function my(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function IK(t,e){return ha(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function AK(t,e,n){return ha(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function _c(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const gy=t=>t==="reset"||t==="none",Ak=(t,e)=>e?t:Object.assign({},t),PK=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:yO(n,!0),values:null};class al{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=py(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&_c(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(f,p,m,y)=>f==="x"?p:f==="r"?y:m,s=n.xAxisID=be(r.xAxisID,my(e,"x")),o=n.yAxisID=be(r.yAxisID,my(e,"y")),a=n.rAxisID=be(r.rAxisID,my(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&uk(this._data,this),e._stacked&&_c(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Ce(n)){const i=this._cachedMeta;this._data=EK(n,i)}else if(r!==n){if(r){uk(r,this);const i=this._cachedMeta;_c(i),i._parsed=[]}n&&Object.isExtensible(n)&&d7(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=py(n.vScale,n),n.stack!==r.stack&&(i=!0,_c(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(Ik(this,n._parsed),n._stacked=py(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,f,p;if(this._parsing===!1)r._parsed=i,r._sorted=!0,p=i;else{Rt(i[e])?p=this.parseArrayData(r,i,e,n):Ce(i[e])?p=this.parseObjectData(r,i,e,n):p=this.parsePrimitiveData(r,i,e,n);const m=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=f=p[u],l&&(m()&&(l=!1),c=f);r._sorted=l}o&&Ik(this,p)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,f=new Array(i);let p,m,y;for(p=0,m=i;p<m;++p)y=p+r,f[p]={[a]:u||s.parse(c[y],y),[l]:o.parse(n[y],y)};return f}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,f;for(l=0,c=i;l<c;++l)u=l+r,f=n[u],a[l]={x:s.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,f,p,m;for(u=0,f=i;u<f;++u)p=u+r,m=n[p],c[u]={x:s.parse(Il(m,a),p),y:o.parse(Il(m,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:yO(i,!0),values:n._stacks[e.axis]._visualValues};return kk(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=kk(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=PK(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=kK(a);let p,m;function y(){m=i[p];const _=m[a.axis];return!Tn(m[e.axis])||u>_||f<_}for(p=0;p<o&&!(!y()&&(this.updateRangeFromParsed(c,e,m,l),s));++p);if(s){for(p=o-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Tn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=TK(be(this.options.clip,bK(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const f=i[u];f.hidden||(f.active&&c?o.push(f):f.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=AK(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=IK(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&nh(r);if(a)return Ak(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),f=i?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),u),m=Object.keys(Et.elements[e]),y=()=>this.getContext(r,i,n),_=c.resolveNamedOptions(p,m,y,f);return _.$shared&&(_.$shared=l,s[o]=Object.freeze(Ak(_,l))),_}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(p,this.getContext(e,r,n))}const c=new gO(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||gy(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){gy(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!gy(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&_c(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}de(al,"defaults",{}),de(al,"datasetElementType",null),de(al,"dataElementType",null);function RK(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=X2(r.sort((i,s)=>i-s))}return t._cache.$bar}function NK(t){const e=t.iScale,n=RK(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(nh(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function DK(t,e,n,r){const i=n.barThickness;let s,o;return Me(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function OK(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function MK(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function vO(t,e,n,r){return Rt(t)?MK(t,e,n,r):e[n.axis]=n.parse(t,r),e}function Pk(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,f,p;for(c=n,u=n+r;c<u;++c)p=e[c],f={},f[i.axis]=a||i.parse(o[c],c),l.push(vO(p,f,s,c));return l}function yy(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function jK(t,e,n){return t!==0?ii(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function LK(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function VK(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=LK(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[Rk(u,o,a,l)]=!0,i=c)),s[Rk(i,o,a,l)]=!0,t.borderSkipped=s}function Rk(t,e,n,r){return r?(t=FK(t,e,n),t=Nk(t,n,e)):t=Nk(t,e,n),t}function FK(t,e,n){return t===e?n:t===n?e:t}function Nk(t,e,n){return t==="start"?e:t==="end"?n:t}function UK(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Ef extends al{parsePrimitiveData(e,n,r,i){return Pk(e,n,r,i)}parseArrayData(e,n,r,i){return Pk(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,f=[];let p,m,y,_;for(p=r,m=r+i;p<m;++p)_=n[p],y={},y[s.axis]=s.parse(Il(_,c),p),f.push(vO(Il(_,u),y,o,p));return f}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=yy(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(n,i);for(let m=n;m<n+r;m++){const y=this.getParsed(m),_=s||Me(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),x=this._calculateBarIndexPixels(m,u),v=(y._stacks||{})[a.axis],w={horizontal:c,base:_.base,enableBorderRadius:!v||yy(y._custom)||o===v._top||o===v._bottom,x:c?_.head:x.center,y:c?x.center:_.head,height:c?x.size:Math.abs(_.size),width:c?Math.abs(_.size):x.size};p&&(w.options=f||this.resolveDataElementOptions(m,e[m].active?"active":i));const E=w.options||e[m].options;VK(w,E,v,o),UK(w,E,u.ratio),this.updateElement(e[m],m,w,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const f=u._parsed.find(m=>m[r.axis]===l),p=f&&f[u.vScale.axis];if(Me(p)||isNaN(p))return!0};for(const u of i)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[be(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||NK(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=yy(c);let f=l[n.axis],p=0,m=r?this.applyStack(n,l,r):f,y,_;m!==f&&(p=m-f,m=f),u&&(f=c.barStart,m=c.barEnd-c.barStart,f!==0&&ii(f)!==ii(c.barEnd)&&(p=0),p+=f);const x=!Me(s)&&!u?s:p;let v=n.getPixelForValue(x);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(p+m):y=v,_=y-v,Math.abs(_)<o){_=jK(_,n,a)*o,f===a&&(v-=_/2);const w=n.getPixelForDecimal(0),E=n.getPixelForDecimal(1),P=Math.min(w,E),C=Math.max(w,E);v=Math.max(Math.min(v,C),P),y=v+_,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(y)-n.getValueForPixel(v))}if(v===n.getPixelForValue(a)){const w=ii(_)*n.getLineWidthForValue(a)/2;v+=w,_-=w}return{size:_,base:v,head:y,center:y+_/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=be(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const u=s?this._getStackCount(e):n.stackCount,f=i.barThickness==="flex"?OK(e,n,i,u*c):DK(e,n,i,u*c),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(be(p,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+m;a=f.start+f.chunk*y+f.chunk/2,l=Math.min(o,f.chunk*f.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}de(Ef,"id","bar"),de(Ef,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),de(Ef,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Sf extends al{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=m7(n,i,o);this._drawStart=a,this._drawCount=l,g7(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(n,i),p=o.axis,m=a.axis,{spanGaps:y,segment:_}=this.options,x=rh(y)?y:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||i==="none",w=n+r,E=e.length;let P=n>0&&this.getParsed(n-1);for(let C=0;C<E;++C){const M=e[C],S=v?M:{};if(C<n||C>=w){S.skip=!0;continue}const b=this.getParsed(C),k=Me(b[m]),I=S[p]=o.getPixelForValue(b[p],C),D=S[m]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,b,l):b[m],C);S.skip=isNaN(I)||isNaN(D)||k,S.stop=C>0&&Math.abs(b[p]-P[p])>x,_&&(S.parsed=b,S.raw=c.data[C]),f&&(S.options=u||this.resolveDataElementOptions(C,M.active?"active":i)),v||this.updateElement(M,C,S,i),P=b}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}de(Sf,"id","line"),de(Sf,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),de(Sf,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function yo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class qw{constructor(e){de(this,"options");this.options=e||{}}static override(e){Object.assign(qw.prototype,e)}init(){}formats(){return yo()}parse(){return yo()}format(){return yo()}add(){return yo()}diff(){return yo()}startOf(){return yo()}endOf(){return yo()}}var BK={_date:qw};function zK(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?u7:No;if(r){if(i._sharedOptions){const u=s[0],f=typeof u.getRange=="function"&&u.getRange(e);if(f){const p=c(s,e,n-f),m=c(s,e,n+f);return{lo:p.lo,hi:m.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:f}=i._cachedMeta,{_parsed:p}=t,m=p.slice(0,u.lo+1).reverse().findIndex(_=>!Me(_[f.axis]));u.lo-=Math.max(0,m);const y=p.slice(u.hi).findIndex(_=>!Me(_[f.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:s.length-1}}function zm(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:f,hi:p}=zK(s[a],e,o,i);for(let m=f;m<=p;++m){const y=u[m];y.skip||r(y,c,m)}}}function $K(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function vy(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||zm(t,n,e,function(a,l,c){!i&&!ih(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function WK(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:f}=a7(o,{x:e.x,y:e.y});Y2(f,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return zm(t,n,e,s),i}function HK(t,e,n,r,i,s){let o=[];const a=$K(n);let l=Number.POSITIVE_INFINITY;function c(u,f,p){const m=u.inRange(e.x,e.y,i);if(r&&!m)return;const y=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!m)return;const x=a(e,y);x<l?(o=[{element:u,datasetIndex:f,index:p}],l=x):x===l&&o.push({element:u,datasetIndex:f,index:p})}return zm(t,n,e,c),o}function _y(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?WK(t,e,n,i):HK(t,e,n,r,i,s)}function Dk(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return zm(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var qK={modes:{index(t,e,n,r){const i=To(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?vy(t,i,s,r,o):_y(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=To(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?vy(t,i,s,r,o):_y(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=To(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return vy(t,i,s,r,o)},nearest(t,e,n,r){const i=To(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return _y(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=To(e,t);return Dk(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=To(e,t);return Dk(t,i,"y",n.intersect,r)}}};const _O=["left","top","right","bottom"];function xc(t,e){return t.filter(n=>n.pos===e)}function Ok(t,e){return t.filter(n=>_O.indexOf(n.pos)===-1&&n.box.axis===e)}function wc(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function KK(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function GK(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!_O.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function YK(t,e){const n=GK(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function QK(t){const e=KK(t),n=wc(e.filter(c=>c.box.fullSize),!0),r=wc(xc(e,"left"),!0),i=wc(xc(e,"right")),s=wc(xc(e,"top"),!0),o=wc(xc(e,"bottom")),a=Ok(e,"x"),l=Ok(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:xc(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function Mk(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function xO(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function XK(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Ce(i)){n.size&&(t[i]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?s.height:s.width),n.size=f.size/f.count,t[i]+=n.size}s.getPadding&&xO(o,s.getPadding());const a=Math.max(0,e.outerWidth-Mk(o,t,"left","right")),l=Math.max(0,e.outerHeight-Mk(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function JK(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function ZK(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Uc(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,ZK(a.horizontal,e));const{same:f,other:p}=XK(e,n,a,r);c|=f&&i.length,u=u||p,l.fullSize||i.push(a)}return c&&Uc(i,e,n,r)||u}function Bd(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function jk(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*u,p=c.size||l.height;nh(c.start)&&(o=c.start),l.fullSize?Bd(l,i.left,o,n.outerWidth-i.right-i.left,p):Bd(l,e.left+c.placed,o,f,p),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*u,p=c.size||l.width;nh(c.start)&&(s=c.start),l.fullSize?Bd(l,s,i.top,p,n.outerHeight-i.bottom-i.top):Bd(l,s,e.top+c.placed,p,f),c.start=s,c.placed+=f,s=l.right}}e.x=s,e.y=o}var dr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=gr(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=QK(t.boxes),l=a.vertical,c=a.horizontal;je(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=l.reduce((_,x)=>x.box.options&&x.box.options.display===!1?_:_+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},i);xO(p,gr(r));const m=Object.assign({maxPadding:p,w:s,h:o,x:i.left,y:i.top},i),y=YK(l.concat(c),f);Uc(a.fullSize,m,f,y),Uc(l,m,f,y),Uc(c,m,f,y)&&Uc(l,m,f,y),JK(m),jk(a.leftAndTop,m,f,y),m.x+=m.w,m.y+=m.h,jk(a.rightAndBottom,m,f,y),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},je(a.chartArea,_=>{const x=_.box;Object.assign(x,t.chartArea),x.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class wO{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class eG extends wO{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const kf="$chartjs",tG={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Lk=t=>t===null||t==="";function nG(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[kf]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Lk(i)){const s=xk(t,"width");s!==void 0&&(t.width=s)}if(Lk(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=xk(t,"height");s!==void 0&&(t.height=s)}return t}const bO=sK?{passive:!0}:!1;function rG(t,e,n){t&&t.addEventListener(e,n,bO)}function iG(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,bO)}function sG(t,e){const n=tG[t.type]||t.type,{x:r,y:i}=To(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Mp(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function oG(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Mp(a.addedNodes,r),o=o&&!Mp(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function aG(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Mp(a.removedNodes,r),o=o&&!Mp(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const oh=new Map;let Vk=0;function TO(){const t=window.devicePixelRatio;t!==Vk&&(Vk=t,oh.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function lG(t,e){oh.size||window.addEventListener("resize",TO),oh.set(t,e)}function cG(t){oh.delete(t),oh.size||window.removeEventListener("resize",TO)}function uG(t,e,n){const r=t.canvas,i=r&&Hw(r);if(!i)return;const s=Z2((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),lG(t,s),o}function xy(t,e,n){n&&n.disconnect(),e==="resize"&&cG(t)}function hG(t,e,n){const r=t.canvas,i=Z2(s=>{t.ctx!==null&&n(sG(s,t))},t);return rG(r,e,i),i}class dG extends wO{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(nG(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[kf])return!1;const r=n[kf].initial;["height","width"].forEach(s=>{const o=r[s];Me(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[kf],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:oG,detach:aG,resize:uG}[n]||hG;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:xy,detach:xy,resize:xy}[n]||iG)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return iK(e,n,r,i)}isAttached(e){const n=e&&Hw(e);return!!(n&&n.isConnected)}}function fG(t){return!Ww()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?eG:dG}var Xd;let eo=(Xd=class{constructor(){de(this,"x");de(this,"y");de(this,"active",!1);de(this,"options");de(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return rh(this.x)&&rh(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},de(Xd,"defaults",{}),de(Xd,"defaultRoutes"),Xd);function pG(t,e){const n=t.options.ticks,r=mG(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?yG(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return vG(e,c,s,o/i),c;const u=gG(s,e,i);if(o>0){let f,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(zd(e,c,u,Me(m)?0:a-m,a),f=0,p=o-1;f<p;f++)zd(e,c,u,s[f],s[f+1]);return zd(e,c,u,l,Me(m)?e.length:l+m),c}return zd(e,c,u),c}function mG(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function gG(t,e,n){const r=_G(t),i=e.length/n;if(!r)return Math.max(i,1);const s=n7(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function yG(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function vG(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function zd(t,e,n,r,i){const s=be(r,0),o=Math.min(be(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function _G(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const xG=t=>t==="left"?"right":t==="right"?"left":t,Fk=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,Uk=(t,e)=>Math.min(e||t,t);function Bk(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function wG(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function bG(t,e){je(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function bc(t){return t.drawTicks?t.tickLength:0}function zk(t,e){if(!t.display)return 0;const n=vn(t.font,e),r=gr(t.padding);return(Rt(t.text)?t.text.length:1)*n.lineHeight+r.height}function TG(t,e){return ha(t,{scale:e,type:"scale"})}function EG(t,e,n){return ha(t,{tick:n,index:e,type:"tick"})}function SG(t,e,n){let r=Fw(t);return(n&&e!=="right"||!n&&e==="right")&&(r=xG(r)),r}function kG(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let f=0,p,m,y;const _=o-i,x=a-s;if(t.isHorizontal()){if(m=hn(r,s,a),Ce(n)){const v=Object.keys(n)[0],w=n[v];y=u[v].getPixelForValue(w)+_-e}else n==="center"?y=(c.bottom+c.top)/2+_-e:y=Fk(t,n,e);p=a-s}else{if(Ce(n)){const v=Object.keys(n)[0],w=n[v];m=u[v].getPixelForValue(w)-x+e}else n==="center"?m=(c.left+c.right)/2-x+e:m=Fk(t,n,e);y=hn(r,o,i),f=n==="left"?-Cr:Cr}return{titleX:m,titleY:y,maxWidth:p,rotation:f}}class $l extends eo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Ur(e,Number.POSITIVE_INFINITY),n=Ur(n,Number.NEGATIVE_INFINITY),r=Ur(r,Number.POSITIVE_INFINITY),i=Ur(i,Number.NEGATIVE_INFINITY),{min:Ur(e,r),max:Ur(n,i),minDefined:Tn(e),maxDefined:Tn(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Ur(n,Ur(r,n)),max:Ur(r,Ur(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Xe(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=j7(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Bk(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=pG(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Xe(this.options.afterUpdate,[this])}beforeSetDimensions(){Xe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Xe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Xe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Xe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Xe(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Xe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Xe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=Uk(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,m=Zn(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),f+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-bc(e.grid)-n.padding-zk(e.title,this.chart.options.font),c=Math.sqrt(f*f+p*p),o=o7(Math.min(Math.asin(Zn((u.highest.height+6)/a,-1,1)),Math.asin(Zn(l/c,-1,1))-Math.asin(Zn(p/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Xe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Xe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=zk(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=bc(s)+l):(e.height=this.maxHeight,e.width=bc(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:p}=this._getLabelSizes(),m=r.padding*2,y=Ro(this.labelRotation),_=Math.cos(y),x=Math.sin(y);if(a){const v=r.mirror?0:x*f.width+_*p.height;e.height=Math.min(this.maxHeight,e.height+v+m)}else{const v=r.mirror?0:_*f.width+x*p.height;e.width=Math.min(this.maxWidth,e.width+v+m)}this._calculatePadding(c,u,x,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=i*e.width,m=r*n.height):(p=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,m=n.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=e.height/2;s==="start"?(u=0,f=e.height):s==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Xe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Me(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Bk(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/Uk(n,r));let c=0,u=0,f,p,m,y,_,x,v,w,E,P,C;for(f=0;f<n;f+=l){if(y=e[f].label,_=this._resolveTickFontOptions(f),i.font=x=_.string,v=s[x]=s[x]||{data:{},gc:[]},w=_.lineHeight,E=P=0,!Me(y)&&!Rt(y))E=mk(i,v.data,v.gc,E,y),P=w;else if(Rt(y))for(p=0,m=y.length;p<m;++p)C=y[p],!Me(C)&&!Rt(C)&&(E=mk(i,v.data,v.gc,E,C),P+=w);o.push(E),a.push(P),c=Math.max(E,c),u=Math.max(P,u)}bG(s,n);const M=o.indexOf(c),S=a.indexOf(u),b=k=>({width:o[k]||0,height:a[k]||0});return{first:b(0),last:b(n-1),widest:b(M),highest:b(S),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return c7(this._alignToPixels?go(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=EG(this.getContext(),e,r))}return this.$context||(this.$context=TG(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ro(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),p=bc(s),m=[],y=a.setContext(this.getContext()),_=y.display?y.width:0,x=_/2,v=function(q){return go(r,q,_)};let w,E,P,C,M,S,b,k,I,D,A,R;if(o==="top")w=v(this.bottom),S=this.bottom-p,k=w-x,D=v(e.top)+x,R=e.bottom;else if(o==="bottom")w=v(this.top),D=e.top,R=v(e.bottom)-x,S=w+x,k=this.top+p;else if(o==="left")w=v(this.right),M=this.right-p,b=w-x,I=v(e.left)+x,A=e.right;else if(o==="right")w=v(this.left),I=e.left,A=v(e.right)-x,M=w+x,b=this.left+p;else if(n==="x"){if(o==="center")w=v((e.top+e.bottom)/2+.5);else if(Ce(o)){const q=Object.keys(o)[0],ee=o[q];w=v(this.chart.scales[q].getPixelForValue(ee))}D=e.top,R=e.bottom,S=w+x,k=S+p}else if(n==="y"){if(o==="center")w=v((e.left+e.right)/2);else if(Ce(o)){const q=Object.keys(o)[0],ee=o[q];w=v(this.chart.scales[q].getPixelForValue(ee))}M=w-x,b=M-p,I=e.left,A=e.right}const $=be(i.ticks.maxTicksLimit,f),H=Math.max(1,Math.ceil(f/$));for(E=0;E<f;E+=H){const q=this.getContext(E),ee=s.setContext(q),z=a.setContext(q),X=ee.lineWidth,J=ee.color,ye=z.dash||[],pe=z.dashOffset,we=ee.tickWidth,He=ee.tickColor,tt=ee.tickBorderDash||[],qe=ee.tickBorderDashOffset;P=wG(this,E,l),P!==void 0&&(C=go(r,P,X),c?M=b=I=A=C:S=k=D=R=C,m.push({tx1:M,ty1:S,tx2:b,ty2:k,x1:I,y1:D,x2:A,y2:R,width:X,color:J,borderDash:ye,borderDashOffset:pe,tickWidth:we,tickColor:He,tickBorderDash:tt,tickBorderDashOffset:qe}))}return this._ticksLength=f,this._borderValue=w,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=s,p=bc(r.grid),m=p+u,y=f?-u:m,_=-Ro(this.labelRotation),x=[];let v,w,E,P,C,M,S,b,k,I,D,A,R="middle";if(i==="top")M=this.bottom-y,S=this._getXAxisLabelAlignment();else if(i==="bottom")M=this.top+y,S=this._getXAxisLabelAlignment();else if(i==="left"){const H=this._getYAxisLabelAlignment(p);S=H.textAlign,C=H.x}else if(i==="right"){const H=this._getYAxisLabelAlignment(p);S=H.textAlign,C=H.x}else if(n==="x"){if(i==="center")M=(e.top+e.bottom)/2+m;else if(Ce(i)){const H=Object.keys(i)[0],q=i[H];M=this.chart.scales[H].getPixelForValue(q)+m}S=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")C=(e.left+e.right)/2-m;else if(Ce(i)){const H=Object.keys(i)[0],q=i[H];C=this.chart.scales[H].getPixelForValue(q)}S=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const $=this._getLabelSizes();for(v=0,w=a.length;v<w;++v){E=a[v],P=E.label;const H=s.setContext(this.getContext(v));b=this.getPixelForTick(v)+s.labelOffset,k=this._resolveTickFontOptions(v),I=k.lineHeight,D=Rt(P)?P.length:1;const q=D/2,ee=H.color,z=H.textStrokeColor,X=H.textStrokeWidth;let J=S;o?(C=b,S==="inner"&&(v===w-1?J=this.options.reverse?"left":"right":v===0?J=this.options.reverse?"right":"left":J="center"),i==="top"?c==="near"||_!==0?A=-D*I+I/2:c==="center"?A=-$.highest.height/2-q*I+I:A=-$.highest.height+I/2:c==="near"||_!==0?A=I/2:c==="center"?A=$.highest.height/2-q*I:A=$.highest.height-D*I,f&&(A*=-1),_!==0&&!H.showLabelBackdrop&&(C+=I/2*Math.sin(_))):(M=b,A=(1-D)*I/2);let ye;if(H.showLabelBackdrop){const pe=gr(H.backdropPadding),we=$.heights[v],He=$.widths[v];let tt=A-pe.top,qe=0-pe.left;switch(R){case"middle":tt-=we/2;break;case"bottom":tt-=we;break}switch(S){case"center":qe-=He/2;break;case"right":qe-=He;break;case"inner":v===w-1?qe-=He:v>0&&(qe-=He/2);break}ye={left:qe,top:tt,width:He+pe.width,height:we+pe.height,color:H.backdropColor}}x.push({label:P,font:k,textOffset:A,options:{rotation:_,color:ee,strokeColor:z,strokeWidth:X,textAlign:J,textBaseline:R,translation:[C,M],backdrop:ye}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ro(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,p;this.isHorizontal()?(c=go(e,this.left,o)-o/2,u=go(e,this.right,a)+a/2,f=p=l):(f=go(e,this.top,o)-o/2,p=go(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Fm(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;sh(r,c,0,u,l,a)}i&&Um(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=vn(r.font),o=gr(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Ce(n)?(l+=o.bottom,Rt(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:p}=kG(this,l,n,a);sh(e,r.text,0,0,s,{color:r.color,maxWidth:f,rotation:p,textAlign:SG(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=be(e.grid&&e.grid.z,-1),i=be(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==$l.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return vn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class $d{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;AG(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,CG(e,o,r),this.override&&Et.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Et[i]&&(delete Et[i][r],this.override&&delete Jo[r])}}function CG(t,e,n){const r=th(Object.create(null),[n?Et.get(n):{},Et.get(e),t.defaults]);Et.set(e,r),t.defaultRoutes&&IG(e,t.defaultRoutes),t.descriptors&&Et.describe(e,t.descriptors)}function IG(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Et.route(s,i,l,a)})}function AG(t){return"id"in t&&"defaults"in t}class PG{constructor(){this.controllers=new $d(al,"datasets",!0),this.elements=new $d(eo,"elements"),this.plugins=new $d(Object,"plugins"),this.scales=new $d($l,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):je(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=Lw(e);Xe(r["before"+i],[],r),n[e](r),Xe(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Wr=new PG;class RG{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Xe(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Me(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=be(r.options&&r.options.plugins,{}),s=NG(r);return i===!1&&!n?[]:OG(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function NG(t){const e={},n=[],r=Object.keys(Wr.plugins.items);for(let s=0;s<r.length;s++)n.push(Wr.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function DG(t,e){return!e&&t===!1?null:t===!0?{}:t}function OG(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=DG(r[l],i);c!==null&&s.push({plugin:a,options:MG(t.config,{plugin:a,local:n[l]},c,o)})}return s}function MG(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function x_(t,e){const n=Et.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function jG(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function LG(t,e){return t===e?"_index_":"_value_"}function $k(t){if(t==="x"||t==="y"||t==="r")return t}function VG(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function w_(t,...e){if($k(t))return t;for(const n of e){const r=n.axis||VG(n.position)||t.length>1&&$k(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Wk(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function FG(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Wk(t,"x",n[0])||Wk(t,"y",n[0])}return{}}function UG(t,e){const n=Jo[t.type]||{scales:{}},r=e.scales||{},i=x_(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Ce(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=w_(o,a,FG(o,t),Et.scales[a.type]),c=LG(l,i),u=n.scales||{};s[o]=uu(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||x_(a,e),u=(Jo[a]||{}).scales||{};Object.keys(u).forEach(f=>{const p=jG(f,l),m=o[p+"AxisID"]||p;s[m]=s[m]||Object.create(null),uu(s[m],[{axis:p},r[m],u[f]])})}),Object.keys(s).forEach(o=>{const a=s[o];uu(a,[Et.scales[a.type],Et.scale])}),s}function EO(t){const e=t.options||(t.options={});e.plugins=be(e.plugins,{}),e.scales=UG(t,e)}function SO(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function BG(t){return t=t||{},t.data=SO(t.data),EO(t),t}const Hk=new Map,kO=new Set;function Wd(t,e){let n=Hk.get(t);return n||(n=e(),Hk.set(t,n),kO.add(n)),n}const Tc=(t,e,n)=>{const r=Il(e,n);r!==void 0&&t.add(r)};class zG{constructor(e){this._config=BG(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=SO(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),EO(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Wd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Wd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Wd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Wd(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(f=>Tc(l,e,f))),u.forEach(f=>Tc(l,i,f)),u.forEach(f=>Tc(l,Jo[s]||{},f)),u.forEach(f=>Tc(l,Et,f)),u.forEach(f=>Tc(l,v_,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),kO.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Jo[n]||{},Et.datasets[n]||{},{type:n},Et,v_]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=qk(this._resolverCache,e,i);let l=o;if(WG(o,n)){s.$shared=!1,r=Hs(r)?r():r;const c=this.createResolver(e,r,a);l=Al(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=qk(this._resolverCache,e,r);return Ce(n)?Al(s,n,void 0,i):s}}function qk(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:Bw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const $G=t=>Ce(t)&&Object.getOwnPropertyNames(t).some(e=>Hs(t[e]));function WG(t,e){const{isScriptable:n,isIndexable:r}=sO(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Hs(a)||$G(a))||o&&Rt(a))return!0}return!1}var HG="4.5.0";const qG=["top","bottom","left","right","chartArea"];function Kk(t,e){return t==="top"||t==="bottom"||qG.indexOf(t)===-1&&e==="x"}function Gk(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Yk(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Xe(n&&n.onComplete,[t],e)}function KG(t){const e=t.chart,n=e.options.animation;Xe(n&&n.onProgress,[t],e)}function CO(t){return Ww()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Cf={},Qk=t=>{const e=CO(t);return Object.values(Cf).filter(n=>n.canvas===e).pop()};function GG(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function YG(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var ts;let $m=(ts=class{static register(...e){Wr.add(...e),Xk()}static unregister(...e){Wr.remove(...e),Xk()}constructor(e,n){const r=this.config=new zG(n),i=CO(e),s=Qk(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||fG(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Kq(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new RG,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=f7(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Cf[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}_i.listen(this,"complete",Yk),_i.listen(this,"progress",KG),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Me(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Wr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_k(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return gk(this.canvas,this.ctx),this}stop(){return _i.stop(this),this}resize(e,n){_i.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,_k(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Xe(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};je(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=w_(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),je(s,o=>{const a=o.options,l=a.id,c=w_(l,a),u=be(a.type,o.dtype);(a.position===void 0||Kk(a.position,c)!==Kk(o.dposition))&&(a.position=o.dposition),i[l]=!0;let f=null;if(l in r&&r[l].type===u)f=r[l];else{const p=Wr.getScale(u);f=new p({id:l,type:u,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),je(i,(o,a)=>{o||delete r[a]}),je(r,o=>{dr.configure(this,o,o.options),dr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Gk("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||x_(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Wr.getController(a),{datasetElementType:c,dataElementType:u}=Et.datasets[a];Object.assign(l,{dataElementType:Wr.getElement(u),datasetElementType:c&&Wr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){je(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),p=!i&&s.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||je(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Gk("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){je(this.scales,e=>{dr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!ok(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;GG(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!ok(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;dr.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],je(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Hs(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(_i.has(this)?this.attached&&!_i.running(this)&&_i.start(this):(this.draw(),Yk({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=mO(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Fm(n,i),e.controller.draw(),i&&Um(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return ih(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=qK.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=ha(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);nh(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),_i.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),gk(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Cf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};je(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){je(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},je(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Pp(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=Zq(e),c=YG(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Xe(s.onHover,[e,a,this],this),l&&Xe(s.onClick,[e,a,this],this));const u=!Pp(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},de(ts,"defaults",Et),de(ts,"instances",Cf),de(ts,"overrides",Jo),de(ts,"registry",Wr),de(ts,"version",HG),de(ts,"getChart",Qk),ts);function Xk(){return je($m.instances,t=>t._plugins.invalidate())}function IO(t,e,n=e){t.lineCap=be(n.borderCapStyle,e.borderCapStyle),t.setLineDash(be(n.borderDash,e.borderDash)),t.lineDashOffset=be(n.borderDashOffset,e.borderDashOffset),t.lineJoin=be(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=be(n.borderWidth,e.borderWidth),t.strokeStyle=be(n.borderColor,e.borderColor)}function QG(t,e,n){t.lineTo(n.x,n.y)}function XG(t){return t.stepped?C7:t.tension||t.cubicInterpolationMode==="monotone"?I7:QG}function AO(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function JG(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=AO(i,n,r),u=XG(s);let{move:f=!0,reverse:p}=r||{},m,y,_;for(m=0;m<=c;++m)y=i[(a+(p?c-m:m))%o],!y.skip&&(f?(t.moveTo(y.x,y.y),f=!1):u(t,_,y,p,s.stepped),_=y);return l&&(y=i[(a+(p?c:0))%o],u(t,_,y,p,s.stepped)),!!l}function ZG(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=AO(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,f=0,p,m,y,_,x,v;const w=P=>(o+(c?a-P:P))%s,E=()=>{_!==x&&(t.lineTo(u,x),t.lineTo(u,_),t.lineTo(u,v))};for(l&&(m=i[w(0)],t.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=i[w(p)],m.skip)continue;const P=m.x,C=m.y,M=P|0;M===y?(C<_?_=C:C>x&&(x=C),u=(f*u+P)/++f):(E(),t.lineTo(P,C),y=M,f=0,_=x=C),v=C}E()}function b_(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?ZG:JG}function eY(t){return t.stepped?oK:t.tension||t.cubicInterpolationMode==="monotone"?aK:Eo}function tY(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),IO(t,e.options),t.stroke(i)}function nY(t,e,n,r){const{segments:i,options:s}=e,o=b_(e);for(const a of i)IO(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const rY=typeof Path2D=="function";function iY(t,e,n,r){rY&&!e.options.segment?tY(t,e,n,r):nY(t,e,n,r)}class _s extends eo{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;J7(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=fK(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=pO(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=eY(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:f,end:p}=o[c],m=s[f],y=s[p];if(m===y){a.push(m);continue}const _=Math.abs((i-m[n])/(y[n]-m[n])),x=l(m,y,_,r.stepped);x[n]=e[n],a.push(x)}return a.length===1?a[0]:a}pathSegment(e,n,r){return b_(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=b_(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),iY(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}de(_s,"id","line"),de(_s,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),de(_s,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),de(_s,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Jk(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class If extends eo{constructor(n){super();de(this,"parsed");de(this,"skip");de(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return Jk(this,n,"x",r)}inYRange(n,r){return Jk(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!ih(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,__(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}de(If,"id","point"),de(If,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),de(If,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function PO(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,f;return t.horizontal?(f=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-f,u=r+f):(f=s/2,a=n-f,l=n+f,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function xs(t,e,n,r){return t?0:Zn(e,n,r)}function sY(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=iO(r);return{t:xs(i.top,s.top,0,n),r:xs(i.right,s.right,0,e),b:xs(i.bottom,s.bottom,0,n),l:xs(i.left,s.left,0,e)}}function oY(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=sl(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Ce(i);return{topLeft:xs(!l||a.top||a.left,s.topLeft,0,o),topRight:xs(!l||a.top||a.right,s.topRight,0,o),bottomLeft:xs(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:xs(!l||a.bottom||a.right,s.bottomRight,0,o)}}function aY(t){const e=PO(t),n=e.right-e.left,r=e.bottom-e.top,i=sY(t,n/2,r/2),s=oY(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function wy(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&PO(t,r);return a&&(i||vs(e,a.left,a.right))&&(s||vs(n,a.top,a.bottom))}function lY(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function cY(t,e){t.rect(e.x,e.y,e.w,e.h)}function by(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Af extends eo{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=aY(this),a=lY(o.radius)?Dp:cY;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,by(o,n,s)),e.clip(),a(e,by(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,by(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return wy(this,e,n,r)}inXRange(e,n){return wy(this,e,null,n)}inYRange(e,n){return wy(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}de(Af,"id","bar"),de(Af,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),de(Af,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function uY(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=Wm(l,c,i);const u=T_(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const f=pO(e,u);for(const p of f){const m=T_(n,s[p.start],s[p.end],p.loop),y=fO(a,i,m);for(const _ of y)o.push({source:_,target:p,start:{[n]:Zk(u,m,"start",Math.max)},end:{[n]:Zk(u,m,"end",Math.min)}})}}return o}function T_(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=Hr(i),s=Hr(s)),{property:t,start:i,end:s}}function hY(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=Wm(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function Wm(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function Zk(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function RO(t,e){let n=[],r=!1;return Rt(t)?(r=!0,n=t):n=hY(t,e),n.length?new _s({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function eC(t){return t&&t.fill!==!1}function dY(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Tn(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function fY(t,e,n){const r=yY(t);if(Ce(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Tn(i)&&Math.floor(i)===i?pY(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function pY(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function mY(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Ce(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function gY(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Ce(t)?r=t.value:r=e.getBaseValue(),r}function yY(t){const e=t.options,n=e.fill;let r=be(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function vY(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=_Y(e,n);a.push(RO({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)xY(i,o[u],a)}return new _s({points:i,options:{}})}function _Y(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function xY(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=wY(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function wY(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],f=o[u.start][n],p=o[u.end][n];if(vs(i,f,p)){a=i===f,l=i===p;break}}return{first:a,last:l,point:r}}class NO{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Rr},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function bY(t){const{chart:e,fill:n,line:r}=t;if(Tn(n))return TY(e,n);if(n==="stack")return vY(t);if(n==="shape")return!0;const i=EY(t);return i instanceof NO?i:RO(i,r)}function TY(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function EY(t){return(t.scale||{}).getPointPositionForValue?kY(t):SY(t)}function SY(t){const{scale:e={},fill:n}=t,r=mY(n,e);if(Tn(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function kY(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=gY(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new NO({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function Ty(t,e,n){const r=bY(e),{chart:i,index:s,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,f=c.backgroundColor,{above:p=f,below:m=f}=u||{},y=i.getDatasetMeta(s),_=mO(i,y);r&&o.points.length&&(Fm(t,n),CY(t,{line:o,target:r,above:p,below:m,area:n,scale:a,axis:l,clip:_}),Um(t))}function CY(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=s;s!==i&&(c==="x"?(tC(t,r,o.top),Ey(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),tC(t,r,o.bottom)):c==="y"&&(nC(t,r,o.left),Ey(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),nC(t,r,o.right),u=i)),Ey(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function tC(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],f=i[Wm(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function nC(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],f=i[Wm(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,f.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Ey(t,e){const{line:n,target:r,property:i,color:s,scale:o,clip:a}=e,l=uY(n,r,i);for(const{source:c,target:u,start:f,end:p}of l){const{style:{backgroundColor:m=s}={}}=c,y=r!==!0;t.save(),t.fillStyle=m,IY(t,o,a,y&&T_(i,f,p)),t.beginPath();const _=!!n.pathSegment(t,c);let x;if(y){_?t.closePath():rC(t,r,p,i);const v=!!r.pathSegment(t,u,{move:_,reverse:!0});x=_&&v,x||rC(t,r,f,i)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function IY(t,e,n,r){const i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let l,c,u,f;s==="x"?(l=o,c=i.top,u=a,f=i.bottom):(l=i.left,c=o,u=i.right,f=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),f=Math.min(f,n.bottom)),t.rect(l,c,u-l,f-c),t.clip()}}function rC(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var AY={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof _s&&(l={visible:t.isDatasetVisible(o),index:o,fill:fY(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=dY(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&Ty(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;eC(s)&&Ty(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!eC(r)||n.drawTime!=="beforeDatasetDraw"||Ty(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const iC=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},PY=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class sC extends eo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Xe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=vn(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=iC(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let f=e;s.textAlign="left",s.textBaseline="middle";let p=-1,m=-u;return this.legendItems.forEach((y,_)=>{const x=r+n/2+s.measureText(y.text).width;(_===0||c[c.length-1]+x+2*a>o)&&(f+=u,c[c.length-(_>0?0:1)]=0,m+=u,p++),l[_]={left:0,top:m,row:p,width:x,height:i},c[c.length-1]+=x+a}),f}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let f=a,p=0,m=0,y=0,_=0;return this.legendItems.forEach((x,v)=>{const{itemWidth:w,itemHeight:E}=RY(r,n,s,x,i);v>0&&m+E+2*a>u&&(f+=p+a,c.push({width:p,height:m}),y+=p+a,_++,p=m=0),l[v]={left:y,top:m,col:_,width:w,height:E},p=Math.max(p,w),m+=E+a}),f+=p,c.push({width:p,height:m}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=ol(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=hn(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=hn(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=hn(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=hn(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Fm(e,this),this._draw(),Um(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Et.color,l=ol(e.rtl,this.left,this.width),c=vn(o.font),{padding:u}=o,f=c.size,p=f/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:y,boxHeight:_,itemHeight:x}=iC(o,f),v=function(M,S,b){if(isNaN(y)||y<=0||isNaN(_)||_<0)return;i.save();const k=be(b.lineWidth,1);if(i.fillStyle=be(b.fillStyle,a),i.lineCap=be(b.lineCap,"butt"),i.lineDashOffset=be(b.lineDashOffset,0),i.lineJoin=be(b.lineJoin,"miter"),i.lineWidth=k,i.strokeStyle=be(b.strokeStyle,a),i.setLineDash(be(b.lineDash,[])),o.usePointStyle){const I={radius:_*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:k},D=l.xPlus(M,y/2),A=S+p;nO(i,I,D,A,o.pointStyleWidth&&y)}else{const I=S+Math.max((f-_)/2,0),D=l.leftForLtr(M,y),A=sl(b.borderRadius);i.beginPath(),Object.values(A).some(R=>R!==0)?Dp(i,{x:D,y:I,w:y,h:_,radius:A}):i.rect(D,I,y,_),i.fill(),k!==0&&i.stroke()}i.restore()},w=function(M,S,b){sh(i,b.text,M,S+x/2,c,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},E=this.isHorizontal(),P=this._computeTitleHeight();E?m={x:hn(s,this.left+u,this.right-r[0]),y:this.top+u+P,line:0}:m={x:this.left+u,y:hn(s,this.top+P+u,this.bottom-n[0].height),line:0},uO(this.ctx,e.textDirection);const C=x+u;this.legendItems.forEach((M,S)=>{i.strokeStyle=M.fontColor,i.fillStyle=M.fontColor;const b=i.measureText(M.text).width,k=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),I=y+p+b;let D=m.x,A=m.y;l.setWidth(this.width),E?S>0&&D+I+u>this.right&&(A=m.y+=C,m.line++,D=m.x=hn(s,this.left+u,this.right-r[m.line])):S>0&&A+C>this.bottom&&(D=m.x=D+n[m.line].width+u,m.line++,A=m.y=hn(s,this.top+P+u,this.bottom-n[m.line].height));const R=l.x(D);if(v(R,A,M),D=p7(k,D+y+p,E?D+I:this.right,e.rtl),w(l.x(D),A,M),E)m.x+=I+u;else if(typeof M.text!="string"){const $=c.lineHeight;m.y+=DO(M,$)+u}else m.y+=C}),hO(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=vn(n.font),i=gr(n.padding);if(!n.display)return;const s=ol(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,f=hn(e.align,f,this.right-p);else{const y=this.columnSizes.reduce((_,x)=>Math.max(_,x.height),0);u=c+hn(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const m=hn(a,f,f+p);o.textAlign=s.textAlign(Fw(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,sh(o,n.text,m,u,r)}_computeTitleHeight(){const e=this.options.title,n=vn(e.font),r=gr(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(vs(e,this.left,this.right)&&vs(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],vs(e,i.left,i.left+i.width)&&vs(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!OY(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=PY(i,r);i&&!s&&Xe(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Xe(n.onHover,[e,r,this],this)}else r&&Xe(n.onClick,[e,r,this],this)}}function RY(t,e,n,r,i){const s=NY(r,t,e,n),o=DY(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function NY(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function DY(t,e,n){let r=t;return typeof e.text!="string"&&(r=DO(e,n)),r}function DO(t,e){const n=t.text?t.text.length:0;return e*n}function OY(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var MY={id:"legend",_element:sC,start(t,e,n){const r=t.legend=new sC({ctx:t.ctx,options:n,chart:t});dr.configure(t,r,n),dr.addBox(t,r)},stop(t){dr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;dr.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=gr(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class OO extends eo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Rt(r.text)?r.text.length:1;this._padding=gr(r.padding);const s=i*vn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=hn(a,r,s),f=n+e,c=s-r):(o.position==="left"?(u=r+e,f=hn(a,i,n),l=$t*-.5):(u=s-e,f=hn(a,n,i),l=$t*.5),c=i-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=vn(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);sh(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:Fw(n.align),textBaseline:"middle",translation:[o,a]})}}function jY(t,e){const n=new OO({ctx:t.ctx,options:e,chart:t});dr.configure(t,n,e),dr.addBox(t,n),t.titleBlock=n}var LY={id:"title",_element:OO,start(t,e,n){jY(t,n)},stop(t){const e=t.titleBlock;dr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;dr.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Bc={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=y_(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function zr(t,e){return e&&(Rt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function VY(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function oC(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=vn(e.bodyFont),c=vn(e.titleFont),u=vn(e.footerFont),f=s.length,p=i.length,m=r.length,y=gr(e.padding);let _=y.height,x=0,v=r.reduce((P,C)=>P+C.before.length+C.lines.length+C.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,f&&(_+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),v){const P=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=m*P+(v-m)*l.lineHeight+(v-1)*e.bodySpacing}p&&(_+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let w=0;const E=function(P){x=Math.max(x,n.measureText(P).width+w)};return n.save(),n.font=c.string,je(t.title,E),n.font=l.string,je(t.beforeBody.concat(t.afterBody),E),w=e.displayColors?o+2+e.boxPadding:0,je(r,P=>{je(P.before,E),je(P.lines,E),je(P.after,E)}),w=0,n.font=u.string,je(t.footer,E),n.restore(),x+=y.width,{width:x,height:_}}function FY(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function UY(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function BY(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),UY(c,t,e,n)&&(c="center"),c}function aC(t,e,n){const r=n.yAlign||e.yAlign||FY(t,n);return{xAlign:n.xAlign||e.xAlign||BY(t,e,n,r),yAlign:r}}function zY(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function $Y(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function lC(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:m}=sl(o);let y=zY(e,a);const _=$Y(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,p)+i:a==="right"&&(y+=Math.max(f,m)+i),{x:Zn(y,0,r.width-e.width),y:Zn(_,0,r.height-e.height)}}function Hd(t,e,n){const r=gr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function cC(t){return zr([],xi(t))}function WY(t,e,n){return ha(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function uC(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const MO={beforeTitle:yi,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:yi,beforeBody:yi,beforeLabel:yi,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Me(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:yi,afterBody:yi,beforeFooter:yi,footer:yi,afterFooter:yi};function On(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?MO[e].call(n,r):i}class E_ extends eo{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new gO(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=WY(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=On(r,"beforeTitle",this,e),s=On(r,"title",this,e),o=On(r,"afterTitle",this,e);let a=[];return a=zr(a,xi(i)),a=zr(a,xi(s)),a=zr(a,xi(o)),a}getBeforeBody(e,n){return cC(On(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return je(e,s=>{const o={before:[],lines:[],after:[]},a=uC(r,s);zr(o.before,xi(On(a,"beforeLabel",this,s))),zr(o.lines,On(a,"label",this,s)),zr(o.after,xi(On(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return cC(On(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=On(r,"beforeFooter",this,e),s=On(r,"footer",this,e),o=On(r,"afterFooter",this,e);let a=[];return a=zr(a,xi(i)),a=zr(a,xi(s)),a=zr(a,xi(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(VY(this.chart,n[l]));return e.filter&&(a=a.filter((u,f,p)=>e.filter(u,f,p,r))),e.itemSort&&(a=a.sort((u,f)=>e.itemSort(u,f,r))),je(a,u=>{const f=uC(e.callbacks,u);i.push(On(f,"labelColor",this,u)),s.push(On(f,"labelPointStyle",this,u)),o.push(On(f,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Bc[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=oC(this,r),c=Object.assign({},a,l),u=aC(this.chart,r,c),f=lC(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=sl(a),{x:p,y:m}=e,{width:y,height:_}=n;let x,v,w,E,P,C;return s==="center"?(P=m+_/2,i==="left"?(x=p,v=x-o,E=P+o,C=P-o):(x=p+y,v=x+o,E=P-o,C=P+o),w=x):(i==="left"?v=p+Math.max(l,u)+o:i==="right"?v=p+y-Math.max(c,f)-o:v=this.caretX,s==="top"?(E=m,P=E-o,x=v-o,w=v+o):(E=m+_,P=E+o,x=v+o,w=v-o),C=E),{x1:x,x2:v,x3:w,y1:E,y2:P,y3:C}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=ol(r.rtl,this.x,this.width);for(e.x=Hd(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=vn(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=vn(s.bodyFont),f=Hd(this,"left",s),p=i.x(f),m=l<u.lineHeight?(u.lineHeight-l)/2:0,y=n.y+m;if(s.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=i.leftForLtr(p,c)+c/2,v=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,__(e,_,x,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,__(e,_,x,v)}else{e.lineWidth=Ce(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const _=i.leftForLtr(p,c),x=i.leftForLtr(i.xPlus(p,1),c-2),v=sl(o.borderRadius);Object.values(v).some(w=>w!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Dp(e,{x:_,y,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Dp(e,{x,y:y+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(_,y,c,l),e.strokeRect(_,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,f=vn(r.bodyFont);let p=f.lineHeight,m=0;const y=ol(r.rtl,this.x,this.width),_=function(b){n.fillText(b,y.x(e.x+m),e.y+p/2),e.y+=p+s},x=y.textAlign(o);let v,w,E,P,C,M,S;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=Hd(this,x,r),n.fillStyle=r.bodyColor,je(this.beforeBody,_),m=a&&x!=="right"?o==="center"?c/2+u:c+2+u:0,P=0,M=i.length;P<M;++P){for(v=i[P],w=this.labelTextColors[P],n.fillStyle=w,je(v.before,_),E=v.lines,a&&E.length&&(this._drawColorBox(n,e,P,y,r),p=Math.max(f.lineHeight,l)),C=0,S=E.length;C<S;++C)_(E[C]),p=f.lineHeight;je(v.after,_)}m=0,p=f.lineHeight,je(this.afterBody,_),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=ol(r.rtl,this.x,this.width);for(e.x=Hd(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=vn(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:f,topRight:p,bottomLeft:m,bottomRight:y}=sl(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-y),n.quadraticCurveTo(a+c,l+u,a+c-y,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+u),n.quadraticCurveTo(a,l+u,a,l+u-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Bc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=oC(this,e),l=Object.assign({},o,this._size),c=aC(n,e,l),u=lC(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=gr(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),uO(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),hO(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Pp(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!Pp(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Bc[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}de(E_,"positioners",Bc);var HY={id:"tooltip",_element:E_,positioners:Bc,afterInit(t,e,n){n&&(t.tooltip=new E_({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:MO},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const qY=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function KY(t,e,n,r){const i=t.indexOf(e);if(i===-1)return qY(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const GY=(t,e)=>t===null?null:Zn(Math.round(t),0,e);function hC(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class S_ extends $l{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Me(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:KY(r,e,be(n,e),this._addedLabels),GY(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return hC.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}de(S_,"id","category"),de(S_,"defaults",{ticks:{callback:hC}});function YY(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:p}=t,m=s||1,y=u-1,{min:_,max:x}=e,v=!Me(o),w=!Me(a),E=!Me(c),P=(x-_)/(f+1);let C=lk((x-_)/y/m)*m,M,S,b,k;if(C<1e-14&&!v&&!w)return[{value:_},{value:x}];k=Math.ceil(x/C)-Math.floor(_/C),k>y&&(C=lk(k*C/y/m)*m),Me(l)||(M=Math.pow(10,l),C=Math.ceil(C*M)/M),i==="ticks"?(S=Math.floor(_/C)*C,b=Math.ceil(x/C)*C):(S=_,b=x),v&&w&&s&&i7((a-o)/s,C/1e3)?(k=Math.round(Math.min((a-o)/C,u)),C=(a-o)/k,S=o,b=a):E?(S=v?o:S,b=w?a:b,k=c-1,C=(b-S)/k):(k=(b-S)/C,hu(k,Math.round(k),C/1e3)?k=Math.round(k):k=Math.ceil(k));const I=Math.max(ck(C),ck(S));M=Math.pow(10,Me(l)?I:l),S=Math.round(S*M)/M,b=Math.round(b*M)/M;let D=0;for(v&&(p&&S!==o?(n.push({value:o}),S<o&&D++,hu(Math.round((S+D*C)*M)/M,o,dC(o,P,t))&&D++):S<o&&D++);D<k;++D){const A=Math.round((S+D*C)*M)/M;if(w&&A>a)break;n.push({value:A})}return w&&p&&b!==a?n.length&&hu(n[n.length-1].value,a,dC(a,P,t))?n[n.length-1].value=a:n.push({value:a}):(!w||b===a)&&n.push({value:b}),n}function dC(t,e,{horizontal:n,minRotation:r}){const i=Ro(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class QY extends $l{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Me(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=ii(i),c=ii(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=YY(i,s);return e.bounds==="ticks"&&s7(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return eO(e,this.chart.options.locale,this.options.ticks.format)}}class k_ extends QY{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Tn(e)?e:0,this.max=Tn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Ro(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}de(k_,"id","linear"),de(k_,"defaults",{ticks:{callback:tO.formatters.numeric}});const Hm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fn=Object.keys(Hm);function fC(t,e){return t-e}function pC(t,e){if(Me(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Tn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(rh(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function mC(t,e,n,r){const i=Fn.length;for(let s=Fn.indexOf(t);s<i-1;++s){const o=Hm[Fn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Fn[s]}return Fn[i-1]}function XY(t,e,n,r,i){for(let s=Fn.length-1;s>=Fn.indexOf(n);s--){const o=Fn[s];if(Hm[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Fn[n?Fn.indexOf(n):0]}function JY(t){for(let e=Fn.indexOf(t)+1,n=Fn.length;e<n;++e)if(Hm[Fn[e]].common)return Fn[e]}function gC(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=Vw(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function ZY(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function yC(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:ZY(t,r,i,n)}class jp extends $l{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new BK._date(e.adapters.date);i.init(n),uu(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:pC(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Tn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Tn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=h7(i,s,o);return this._unit=n.unit||(r.autoSkip?mC(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):XY(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:JY(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),yC(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Zn(n,0,o),r=Zn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||mC(s.minUnit,n,r,this._getLabelCapacity(n)),a=be(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=rh(l)||l===!0,u={};let f=n,p,m;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(p=f,m=0;p<r;p=+e.add(p,a,o),m++)gC(u,p,y);return(p===r||i.bounds==="ticks"||m===1)&&gC(u,p,y),Object.keys(u).sort(fC).map(_=>+_)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Xe(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],p=r[n],m=c&&f&&p&&p.major;return this._adapter.format(e,i||(m?f:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Ro(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,yC(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(pC(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return X2(e.sort(fC))}}de(jp,"id","time"),de(jp,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function qd(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=No(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=No(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class vC extends jp{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=qd(n,this.min),this._tableRange=qd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(qd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return qd(this._table,r*this._tableRange+this._minPos,!0)}}de(vC,"id","timeseries"),de(vC,"defaults",jp.defaults);const jO="label";function _C(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function eQ(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function LO(t,e){t.labels=e}function VO(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:jO;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function tQ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:jO;const n={labels:[],datasets:[]};return LO(n,t.labels),VO(n,t.datasets,e),n}function nQ(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:f,...p}=t,m=O.useRef(null),y=O.useRef(null),_=()=>{m.current&&(y.current=new $m(m.current,{type:o,data:tQ(a,s),options:l&&{...l},plugins:c}),_C(e,y.current))},x=()=>{_C(e,null),y.current&&(y.current.destroy(),y.current=null)};return O.useEffect(()=>{!i&&y.current&&l&&eQ(y.current,l)},[i,l]),O.useEffect(()=>{!i&&y.current&&LO(y.current.config.data,a.labels)},[i,a.labels]),O.useEffect(()=>{!i&&y.current&&a.datasets&&VO(y.current.config.data,a.datasets,s)},[i,a.datasets]),O.useEffect(()=>{y.current&&(i?(x(),setTimeout(_)):y.current.update(f))},[i,l,a.labels,a.datasets,f]),O.useEffect(()=>{y.current&&(x(),setTimeout(_))},[o]),O.useEffect(()=>(_(),()=>x()),[]),rt.createElement("canvas",{ref:m,role:"img",height:n,width:r,...p},u)}const rQ=O.forwardRef(nQ);function FO(t,e){return $m.register(e),O.forwardRef((n,r)=>rt.createElement(rQ,{...n,ref:r,type:t}))}const iQ=FO("line",Sf),sQ=FO("bar",Ef);$m.register(S_,k_,Af,If,_s,LY,HY,MY,AY);const oQ=["QwWST9OVOlTOi5oheyCqfpXLOLg2","3j0AXIRa4XdHq1ywCl4UBxJNsku2","AeZKjJYu5zMZ4mvffaGiqCBb0cF2"];function un(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const aQ=t=>{if(!t)return"";const e=Math.floor((new Date-un(t))/1e3);let n=e/31536e3;return n>1?Math.floor(n)+" anni fa":(n=e/2592e3,n>1?Math.floor(n)+" mesi fa":(n=e/86400,n>1?Math.floor(n)+" gg fa":(n=e/3600,n>1?Math.floor(n)+" ore fa":(n=e/60,n>1?Math.floor(n)+" min fa":"ora"))))},Sy=({title:t,value:e,icon:n,isCurrency:r=!1,isPercentage:i=!1})=>d.jsxs("div",{className:"bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md h-full",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-muted",children:n}),d.jsx("p",{className:"text-muted text-sm",children:t})]}),d.jsx("p",{className:"text-2xl font-bold text-foreground mt-2",children:r?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):i?`${e}%`:e})]}),lQ=({item:t,navigate:e})=>{const n={expiring:d.jsx(L$,{className:"text-yellow-400"}),new_check:d.jsx(Xx,{className:"text-green-400"}),new_anamnesi:d.jsx(Jx,{className:"text-blue-400"})},r={expiring:"payments",new_check:"checks",new_anamnesi:"anamnesi"};return d.jsxs(We.button,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e(`/client/${t.clientId}?tab=${r[t.type]}`),className:"w-full flex items-start gap-3 p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors text-left",children:[d.jsx("div",{className:"mt-1 flex-shrink-0",children:n[t.type]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-sm font-semibold",children:t.clientName}),d.jsx("p",{className:"text-xs text-muted",children:t.description})]}),d.jsx("div",{className:"text-xs text-muted flex-shrink-0",children:aQ(t.date)})]})},cQ=({dataType:t,setDataType:e,timeRange:n,setTimeRange:r})=>d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mt-4",children:[d.jsxs("div",{className:"flex bg-card/50 p-1 rounded-lg border border-white/10 backdrop-blur-sm",children:[d.jsx("button",{onClick:()=>e("revenue"),className:`px-3 py-1 text-sm rounded-md transition ${t==="revenue"?"bg-primary text-white":"text-muted"}`,children:"Fatturato"}),d.jsx("button",{onClick:()=>e("clients"),className:`px-3 py-1 text-sm rounded-md transition ${t==="clients"?"bg-primary text-white":"text-muted"}`,children:"Nuovi Clienti"})]}),d.jsxs("div",{className:"flex bg-card/50 p-1 rounded-lg border border-white/10 backdrop-blur-sm",children:[d.jsx("button",{onClick:()=>r("monthly"),className:`px-3 py-1 text-sm rounded-md transition ${n==="monthly"?"bg-white/10 text-white":"text-muted"}`,children:"Mese"}),d.jsx("button",{onClick:()=>r("yearly"),className:`px-3 py-1 text-sm rounded-md transition ${n==="yearly"?"bg-white/10 text-white":"text-muted"}`,children:"Anno"})]})]}),uQ=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(!1),i=Oe(ae,"app-data","quickNotes");return O.useEffect(()=>{(async()=>{const o=await Wi(i);o.exists()&&e(o.data().content)})()},[]),O.useEffect(()=>{const s=setTimeout(async()=>{if(t!==void 0){r(!0);try{await Os(i,{content:t,lastUpdated:gn()})}catch(o){console.error("Error saving notes:",o)}finally{setTimeout(()=>r(!1),1e3)}}},2e3);return()=>clearTimeout(s)},[t]),d.jsxs("div",{className:"bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md h-full flex flex-col",children:[d.jsxs("h2",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[d.jsx(cD,{})," Appunti Rapidi"]}),d.jsx("textarea",{value:t,onChange:s=>e(s.target.value),className:"w-full h-full bg-transparent text-sm text-muted outline-none resize-none",placeholder:"Scrivi qui le tue idee o cose da fare..."}),d.jsx("p",{className:"text-xs text-right text-muted mt-2 h-4",children:n&&"Salvataggio..."})]})};function hQ(){const t=Wt(),[e,n]=O.useState([]),[r,i]=O.useState([]),[s,o]=O.useState([]),[a,l]=O.useState([]),[c,u]=O.useState([]),[f,p]=O.useState("revenue"),[m,y]=O.useState("yearly"),_=O.useMemo(()=>e.reduce((I,D)=>({...I,[D.id]:D.name}),{}),[e]);O.useEffect(()=>{const I=Tt(bt(ae,"clients"),H=>n(H.docs.map(q=>({id:q.id,...q.data()})))),D=Tt(iu(ae,"payments"),H=>i(H.docs.map(q=>({...q.data(),clientId:q.ref.path.split("/")[1]})))),A=Tt(iu(ae,"checks"),H=>o(H.docs.map(q=>({...q.data(),clientId:q.ref.path.split("/")[1]})))),R=Tt(iu(ae,"anamnesi"),H=>l(H.docs.map(q=>({...q.data(),clientId:q.ref.path.split("/")[1]})))),$=Tt(bt(ae,"chats"),H=>u(H.docs.map(q=>({id:q.id,...q.data()}))));return()=>{I(),D(),A(),R(),$()}},[]);const{clientStats:x,monthlyIncome:v,activityFeed:w,chartData:E,focusClient:P,retentionRate:C,unreadChatsCount:M}=O.useMemo(()=>{var Wn;const I=new Date,D=new Set(e.map(re=>re.id)),A=r.filter(re=>D.has(re.clientId));let R=0;e.forEach(re=>{const Fe=un(re.scadenza);(!Fe||Fe>=I)&&R++});let $,H,q;if(m==="yearly"){$=Array.from({length:12},(ve,Ue)=>new Date(I.getFullYear(),I.getMonth()-11+Ue,1).toLocaleString("it-IT",{month:"short"}));const re=Array(12).fill(0),Fe=Array(12).fill(0);A.forEach(ve=>{const Ue=un(ve.paymentDate);if(Ue){const Te=(I.getFullYear()-Ue.getFullYear())*12+(I.getMonth()-Ue.getMonth());Te>=0&&Te<12&&(re[11-Te]+=parseFloat(ve.amount))}}),e.forEach(ve=>{const Ue=un(ve.createdAt);if(Ue){const Te=(I.getFullYear()-Ue.getFullYear())*12+(I.getMonth()-Ue.getMonth());Te>=0&&Te<12&&Fe[11-Te]++}}),H=f==="revenue"?re:Fe}else{const re=new Date(I.getFullYear(),I.getMonth()+1,0).getDate();$=Array.from({length:re},(Ue,Te)=>Te+1);const Fe=Array(re).fill(0),ve=Array(re).fill(0);A.forEach(Ue=>{const Te=un(Ue.paymentDate);Te&&Te.getFullYear()===I.getFullYear()&&Te.getMonth()===I.getMonth()&&(Fe[Te.getDate()-1]+=parseFloat(Ue.amount))}),e.forEach(Ue=>{const Te=un(Ue.createdAt);Te&&Te.getFullYear()===I.getFullYear()&&Te.getMonth()===I.getMonth()&&ve[Te.getDate()-1]++}),H=f==="revenue"?Fe:ve}f==="revenue"?q={type:"line",label:"Fatturato",data:H,borderColor:"#22c55e",backgroundColor:"rgba(34, 197, 94, 0.2)",fill:!0,tension:.4}:q={type:"bar",label:"Nuovi Clienti",data:H,backgroundColor:"rgba(37, 99, 235, 0.6)"};const ee=e.filter(re=>{const Fe=un(re.scadenza);if(!Fe)return!1;const ve=Math.ceil((Fe-I)/(1e3*60*60*24));return ve>=0&&ve<=15}).map(re=>({type:"expiring",date:re.scadenza,clientId:re.id,description:`Scade tra ${Math.ceil((un(re.scadenza)-I)/(1e3*60*60*24))} giorni`})),z=s.map(re=>({type:"new_check",date:re.createdAt,clientId:re.clientId,description:"Ha inviato un nuovo check"})),X=a.map(re=>({type:"new_anamnesi",date:re.createdAt,clientId:re.clientId,description:"Ha compilato l'anamnesi"})),J=[...ee,...z,...X].sort((re,Fe)=>(un(Fe.date)||0)-(un(re.date)||0)).map(re=>({...re,clientName:_[re.clientId]})).filter(re=>re.clientName),ye=new Date(I.getFullYear(),I.getMonth()-1,1),pe=new Date(I.getFullYear(),I.getMonth(),1),we=new Set(e.filter(re=>un(re.scadenza)>ye).map(re=>re.id)),He=new Set(e.filter(re=>un(re.scadenza)>pe).map(re=>re.id)),tt=[...we].filter(re=>He.has(re)).length,qe=we.size>0?Math.round(tt/we.size*100):100,ot=e.filter(re=>!un(re.scadenza)||un(re.scadenza)>=I),nn=ot.length>0?ot[new Date().getDate()%ot.length]:null,rn=(Wn=a.find(re=>re.clientId===(nn==null?void 0:nn.id)))==null?void 0:Wn.mainGoal,Nn=c.filter(re=>re.lastMessageSenderId&&!oQ.includes(re.lastMessageSenderId)).length;return{clientStats:{total:e.length,active:R},monthlyIncome:A.filter(re=>{var Fe,ve;return((Fe=un(re.paymentDate))==null?void 0:Fe.getMonth())===I.getMonth()&&((ve=un(re.paymentDate))==null?void 0:ve.getFullYear())===I.getFullYear()}).reduce((re,Fe)=>re+parseFloat(Fe.amount),0),activityFeed:J,chartData:{labels:$,datasets:[q]},focusClient:nn?{...nn,goal:rn}:null,retentionRate:qe,unreadChatsCount:Nn}},[e,r,s,a,_,f,m,c]),S={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"#71717a"},grid:{color:"rgba(255,255,255,0.05)"}},y:{ticks:{color:f==="revenue"?"#22c55e":"#2563eb",callback:I=>f==="revenue"?`€${I}`:Number.isInteger(I)?I:null},grid:{color:"rgba(255,255,255,0.05)"}}}},b={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.07}}},k={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return d.jsxs(We.div,{className:"w-full relative",variants:b,initial:"hidden",animate:"visible",children:[d.jsxs(We.div,{className:"flex justify-between items-center mb-6",variants:k,children:[d.jsx("h1",{className:"text-3xl font-bold",children:"Command Center"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:()=>t("/admin/chat"),className:"relative px-3 py-1.5 bg-card/50 text-sm rounded-lg border border-white/10 backdrop-blur-sm hover:bg-white/10 transition",children:[d.jsx(Gu,{className:"inline -mt-1 mr-1"})," Gestisci Chat",M>0&&d.jsx("span",{className:"absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center p-1",children:M})]}),d.jsx("button",{onClick:()=>t("/clients"),className:"px-3 py-1.5 bg-card/50 text-sm rounded-lg border border-white/10 backdrop-blur-sm hover:bg-white/10",children:"Gestisci Clienti"}),d.jsxs("button",{onClick:()=>t("/new"),className:"px-3 py-1.5 bg-primary text-sm font-semibold rounded-lg hover:bg-primary/80",children:[d.jsx(Am,{className:"inline -mt-1 mr-1"})," Nuovo Cliente"]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[d.jsx(We.div,{variants:k,children:d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:[d.jsx(Sy,{title:"Incasso Mensile",value:v,icon:d.jsx(la,{className:"text-green-400"}),isCurrency:!0}),d.jsx(Sy,{title:"Clienti Attivi",value:x.active,icon:d.jsx(Xx,{className:"text-primary"})}),d.jsx(Sy,{title:"Retention Rate",value:C,icon:d.jsx(hD,{className:"text-purple-400"}),isPercentage:!0})]})}),d.jsxs(We.div,{className:"bg-card/50 p-4 sm:p-6 rounded-xl border border-white/10 backdrop-blur-md",variants:k,children:[d.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[d.jsx(iD,{})," Business Overview"]}),d.jsx("div",{className:"h-80",children:f==="revenue"?d.jsx(iQ,{data:E,options:S}):d.jsx(sQ,{data:E,options:S})}),d.jsx(cQ,{dataType:f,setDataType:p,timeRange:m,setTimeRange:y})]}),d.jsxs(We.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",variants:k,children:[P&&d.jsxs("div",{className:"bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md",children:[d.jsxs("h2",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[d.jsx(W$,{})," Focus Cliente del Giorno"]}),d.jsx("p",{className:"font-bold text-lg text-primary",children:P.name}),d.jsxs("p",{className:"text-sm text-muted mt-1",children:['Obiettivo: "',P.goal||"Non specificato",'"']})]}),d.jsx(uQ,{})]})]}),d.jsxs(We.div,{className:"bg-card/50 p-4 sm:p-6 rounded-xl border border-white/10 backdrop-blur-md",variants:k,children:[d.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[d.jsx(M$,{})," Feed Attività"]}),d.jsx("div",{className:"space-y-3 max-h-[44rem] overflow-y-auto pr-2",children:d.jsx(ca,{children:w.length>0?w.map(I=>{var D;return d.jsx(lQ,{item:I,navigate:t},`${I.type}-${I.clientId}-${(D=I.date)==null?void 0:D.seconds}`)}):d.jsx("p",{className:"text-sm text-muted p-2",children:"Nessuna attività recente da mostrare."})})})]})]})]})}function zc(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const Ec=t=>{const e=zc(t);if(!e)return"na";const r=Math.ceil((e-new Date)/(1e3*60*60*24));return r<0?"expired":r<=15?"expiring":"paid"},dQ=({status:t})=>{switch(t){case"paid":return d.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-900/50 text-green-400",children:"Pagato"});case"expiring":return d.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-yellow-900/50 text-yellow-400",children:"In Scadenza"});case"expired":return d.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-900/50 text-red-400",children:"Scaduto"});default:return d.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-700 text-gray-300",children:"N/D"})}};function fQ(){const t=Wt(),e=Ki(),[n,r]=O.useState([]),[i,s]=O.useState(!0),[o,a]=O.useState(""),[l,c]=O.useState("all"),[u,f]=O.useState("createdAt"),[p,m]=O.useState("desc"),[y,_]=O.useState(1),x=10;O.useEffect(()=>{const k=new URLSearchParams(e.search).get("filter");k&&["paid","expiring","expired"].includes(k)&&c(k)},[e.search]),O.useEffect(()=>{const b=Tt(bt(ae,"clients"),k=>{r(k.docs.map(I=>({id:I.id,...I.data()}))),s(!1)});return()=>b()},[]);const v=async b=>{if(window.confirm("Sei sicuro di voler eliminare questo cliente? L'operazione è irreversibile."))try{await Sm(Oe(ae,"clients",b))}catch(k){console.error("Errore delete:",k)}},w=O.useMemo(()=>{let b=[...n];l!=="all"&&(b=b.filter(D=>Ec(D.scadenza)===l));const k=o.trim().toLowerCase();k&&(b=b.filter(D=>(D.name||"").toLowerCase().includes(k)||(D.email||"").toLowerCase().includes(k)));const I=(D,A)=>{var R,$;switch(A){case"name":return(D.name||"").toLowerCase();case"scadenza":return((R=zc(D.scadenza))==null?void 0:R.getTime())||0;case"createdAt":default:return(($=zc(D.createdAt))==null?void 0:$.getTime())||0}};return b.sort((D,A)=>{const R=I(D,u),$=I(A,u);return R===$?0:p==="asc"?R>$?1:-1:R<$?1:-1}),b},[n,o,l,u,p]);Math.ceil(w.length/x);const E=w.slice((y-1)*x,y*x),P=b=>{u===b?m(k=>k==="asc"?"desc":"asc"):(f(b),m(b==="scadenza"||b==="createdAt"?"desc":"asc"))},C=({col:b})=>u===b?p==="asc"?d.jsx(j$,{className:"inline ml-1"}):d.jsx(aD,{className:"inline ml-1"}):null,M=({status:b,label:k,count:I})=>d.jsxs("button",{onClick:()=>{c(b),_(1)},className:`px-3 py-1 text-sm font-semibold rounded-full transition-colors whitespace-nowrap 
        ${l===b?"bg-primary text-white":"bg-white/10 text-muted hover:bg-white/20"}`,children:[k," (",I,")"]}),S=O.useMemo(()=>({all:n.length,paid:n.filter(b=>Ec(b.scadenza)==="paid").length,expiring:n.filter(b=>Ec(b.scadenza)==="expiring").length,expired:n.filter(b=>Ec(b.scadenza)==="expired").length}),[n]);return d.jsxs("div",{className:"w-full",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[d.jsx("h1",{className:"text-3xl font-bold",children:"Clienti"}),d.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[d.jsxs("div",{className:"flex items-center gap-2 bg-card border border-white/10 rounded-lg px-3 py-2 flex-1 min-w-[150px]",children:[d.jsx(dD,{className:"text-muted"}),d.jsx("input",{value:o,onChange:b=>{a(b.target.value),_(1)},className:"bg-transparent outline-none placeholder-muted w-full",placeholder:"Cerca per nome o email…"})]}),d.jsxs("button",{onClick:()=>t("/new"),className:"flex items-center justify-center gap-2 px-4 py-2 bg-primary hover:bg-primary/80 text-white rounded-lg whitespace-nowrap",children:[d.jsx(Am,{})," Nuovo"]})]})]}),d.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-background rounded-lg overflow-x-auto whitespace-nowrap",children:[d.jsx(U$,{className:"text-muted ml-1 flex-shrink-0"}),d.jsx(M,{status:"all",label:"Tutti",count:S.all}),d.jsx(M,{status:"paid",label:"Pagato",count:S.paid}),d.jsx(M,{status:"expiring",label:"In Scadenza",count:S.expiring}),d.jsx(M,{status:"expired",label:"Scaduto",count:S.expired})]}),d.jsx(We.div,{className:"bg-card rounded-xl shadow border border-white/10 overflow-hidden",initial:{opacity:0},animate:{opacity:1},children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-white/5 text-left",children:[d.jsxs("th",{className:"p-3 cursor-pointer select-none",onClick:()=>P("name"),children:["Nome ",d.jsx(C,{col:"name"})]}),d.jsx("th",{className:"p-3",children:"Email"}),d.jsx("th",{className:"p-3",children:"Stato Pagamento"}),d.jsxs("th",{className:"p-3 cursor-pointer select-none",onClick:()=>P("scadenza"),children:["Scadenza ",d.jsx(C,{col:"scadenza"})]}),d.jsx("th",{className:"p-3 text-right",children:"Azioni"})]})}),d.jsx("tbody",{children:E.map((b,k)=>d.jsxs(We.tr,{className:"border-b border-white/10 hover:bg-white/5",initial:{opacity:0},animate:{opacity:1},transition:{delay:k*.05},children:[d.jsx("td",{className:"p-3 font-medium",children:d.jsx("button",{className:"hover:underline",onClick:()=>t(`/client/${b.id}`),children:b.name||"-"})}),d.jsx("td",{className:"p-3 text-muted",children:b.email||"-"}),d.jsx("td",{className:"p-3",children:d.jsx(dQ,{status:Ec(b.scadenza)})}),d.jsx("td",{className:"p-3 text-muted",children:zc(b.scadenza)?zc(b.scadenza).toLocaleDateString("it-IT"):"-"}),d.jsx("td",{className:"p-3",children:d.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[d.jsx("button",{onClick:()=>t(`/edit/${b.id}`),className:"p-1.5 text-yellow-400 hover:bg-white/10 rounded-md",title:"Modifica",children:d.jsx(F$,{size:14})}),d.jsx("button",{onClick:()=>v(b.id),className:"p-1.5 text-red-400 hover:bg-white/10 rounded-md",title:"Elimina",children:d.jsx(Rm,{size:14})})]})})]},b.id))})]})})})]})}var Vh=t=>t.type==="checkbox",Do=t=>t instanceof Date,Cn=t=>t==null;const UO=t=>typeof t=="object";var Nt=t=>!Cn(t)&&!Array.isArray(t)&&UO(t)&&!Do(t),pQ=t=>Nt(t)&&t.target?Vh(t.target)?t.target.checked:t.target.value:t,mQ=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,gQ=(t,e)=>t.has(mQ(e)),yQ=t=>{const e=t.constructor&&t.constructor.prototype;return Nt(e)&&e.hasOwnProperty("isPrototypeOf")},Kw=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ft(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(Kw&&(t instanceof Blob||r))&&(n||Nt(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!yQ(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Ft(t[i]));else return t;return e}var qm=t=>/^\w*$/.test(t),It=t=>t===void 0,Gw=t=>Array.isArray(t)?t.filter(Boolean):[],Yw=t=>Gw(t.replace(/["|']|\]/g,"").split(/\.|\[/)),oe=(t,e,n)=>{if(!e||!Nt(t))return n;const r=(qm(e)?[e]:Yw(e)).reduce((i,s)=>Cn(i)?i:i[s],t);return It(r)||r===t?It(t[e])?n:t[e]:r},qr=t=>typeof t=="boolean",nt=(t,e,n)=>{let r=-1;const i=qm(e)?[e]:Yw(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=n;if(r!==o){const c=t[a];l=Nt(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const xC={BLUR:"blur",FOCUS_OUT:"focusout"},Sr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},vi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},vQ=rt.createContext(null);vQ.displayName="HookFormContext";var _Q=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==Sr.all&&(e._proxyFormState[o]=!r||Sr.all),t[o]}});return i};const xQ=typeof window<"u"?rt.useLayoutEffect:rt.useEffect;var Yn=t=>typeof t=="string",wQ=(t,e,n,r,i)=>Yn(t)?(r&&e.watch.add(t),oe(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),oe(n,s))):(r&&(e.watchAll=!0),n),C_=t=>Cn(t)||!UO(t);function ds(t,e,n=new WeakSet){if(C_(t)||C_(e))return t===e;if(Do(t)&&Do(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const s of r){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(Do(o)&&Do(a)||Nt(o)&&Nt(a)||Array.isArray(o)&&Array.isArray(a)?!ds(o,a,n):o!==a)return!1}}return!0}var bQ=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},pu=t=>Array.isArray(t)?t:[t],wC=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function BO(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],s=e[r];if(i&&Nt(i)&&s){const o=BO(i,s);Nt(o)&&(n[r]=o)}else t[r]&&(n[r]=s)}return n}var Mn=t=>Nt(t)&&!Object.keys(t).length,Qw=t=>t.type==="file",kr=t=>typeof t=="function",Lp=t=>{if(!Kw)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},zO=t=>t.type==="select-multiple",Xw=t=>t.type==="radio",TQ=t=>Xw(t)||Vh(t),ky=t=>Lp(t)&&t.isConnected;function EQ(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=It(t)?r++:t[e[r++]];return t}function SQ(t){for(const e in t)if(t.hasOwnProperty(e)&&!It(t[e]))return!1;return!0}function kt(t,e){const n=Array.isArray(e)?e:qm(e)?[e]:Yw(e),r=n.length===1?t:EQ(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Nt(r)&&Mn(r)||Array.isArray(r)&&SQ(r))&&kt(t,n.slice(0,-1)),t}var kQ=t=>{for(const e in t)if(kr(t[e]))return!0;return!1};function $O(t){return Array.isArray(t)||Nt(t)&&!kQ(t)}function I_(t,e={}){for(const n in t)$O(t[n])?(e[n]=Array.isArray(t[n])?[]:{},I_(t[n],e[n])):Cn(t[n])||(e[n]=!0);return e}function Ca(t,e,n){n||(n=I_(e));for(const r in t)$O(t[r])?It(e)||C_(n[r])?n[r]=I_(t[r],Array.isArray(t[r])?[]:{}):Ca(t[r],Cn(e)?{}:e[r],n[r]):n[r]=!ds(t[r],e[r]);return n}const bC={value:!1,isValid:!1},TC={value:!0,isValid:!0};var WO=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!It(t[0].attributes.value)?It(t[0].value)||t[0].value===""?TC:{value:t[0].value,isValid:!0}:TC:bC}return bC},HO=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>It(t)?t:e?t===""?NaN:t&&+t:n&&Yn(t)?new Date(t):r?r(t):t;const EC={isValid:!1,value:null};var qO=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,EC):EC;function SC(t){const e=t.ref;return Qw(e)?e.files:Xw(e)?qO(t.refs).value:zO(e)?[...e.selectedOptions].map(({value:n})=>n):Vh(e)?WO(t.refs).value:HO(It(e.value)?t.ref.value:e.value,t)}var CQ=(t,e,n,r)=>{const i={};for(const s of t){const o=oe(e,s);o&&nt(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Vp=t=>t instanceof RegExp,Sc=t=>It(t)?t:Vp(t)?t.source:Nt(t)?Vp(t.value)?t.value.source:t.value:t,kC=t=>({isOnSubmit:!t||t===Sr.onSubmit,isOnBlur:t===Sr.onBlur,isOnChange:t===Sr.onChange,isOnAll:t===Sr.all,isOnTouch:t===Sr.onTouched});const CC="AsyncFunction";var IQ=t=>!!t&&!!t.validate&&!!(kr(t.validate)&&t.validate.constructor.name===CC||Nt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===CC)),AQ=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),IC=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const mu=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=oe(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(mu(a,e))break}else if(Nt(a)&&mu(a,e))break}}};function AC(t,e,n){const r=oe(t,n);if(r||qm(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=oe(e,s),a=oe(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:n}}var PQ=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Mn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||Sr.all))},RQ=(t,e,n)=>!t||!e||t===e||pu(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),NQ=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,DQ=(t,e)=>!Gw(oe(t,e)).length&&kt(t,e),OQ=(t,e,n)=>{const r=pu(oe(t,n));return nt(r,"root",e[n]),nt(t,n,r),t};function PC(t,e,n="validate"){if(Yn(t)||Array.isArray(t)&&t.every(Yn)||qr(t)&&!t)return{type:n,message:Yn(t)?t:"",ref:e}}var Ta=t=>Nt(t)&&!Vp(t)?t:{value:t,message:""},RC=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:f,max:p,pattern:m,validate:y,name:_,valueAsNumber:x,mount:v}=t._f,w=oe(n,_);if(!v||e.has(_))return{};const E=a?a[0]:o,P=A=>{i&&E.reportValidity&&(E.setCustomValidity(qr(A)?"":A||""),E.reportValidity())},C={},M=Xw(o),S=Vh(o),b=M||S,k=(x||Qw(o))&&It(o.value)&&It(w)||Lp(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,I=bQ.bind(null,_,r,C),D=(A,R,$,H=vi.maxLength,q=vi.minLength)=>{const ee=A?R:$;C[_]={type:A?H:q,message:ee,ref:o,...I(A?H:q,ee)}};if(s?!Array.isArray(w)||!w.length:l&&(!b&&(k||Cn(w))||qr(w)&&!w||S&&!WO(a).isValid||M&&!qO(a).isValid)){const{value:A,message:R}=Yn(l)?{value:!!l,message:l}:Ta(l);if(A&&(C[_]={type:vi.required,message:R,ref:E,...I(vi.required,R)},!r))return P(R),C}if(!k&&(!Cn(f)||!Cn(p))){let A,R;const $=Ta(p),H=Ta(f);if(!Cn(w)&&!isNaN(w)){const q=o.valueAsNumber||w&&+w;Cn($.value)||(A=q>$.value),Cn(H.value)||(R=q<H.value)}else{const q=o.valueAsDate||new Date(w),ee=J=>new Date(new Date().toDateString()+" "+J),z=o.type=="time",X=o.type=="week";Yn($.value)&&w&&(A=z?ee(w)>ee($.value):X?w>$.value:q>new Date($.value)),Yn(H.value)&&w&&(R=z?ee(w)<ee(H.value):X?w<H.value:q<new Date(H.value))}if((A||R)&&(D(!!A,$.message,H.message,vi.max,vi.min),!r))return P(C[_].message),C}if((c||u)&&!k&&(Yn(w)||s&&Array.isArray(w))){const A=Ta(c),R=Ta(u),$=!Cn(A.value)&&w.length>+A.value,H=!Cn(R.value)&&w.length<+R.value;if(($||H)&&(D($,A.message,R.message),!r))return P(C[_].message),C}if(m&&!k&&Yn(w)){const{value:A,message:R}=Ta(m);if(Vp(A)&&!w.match(A)&&(C[_]={type:vi.pattern,message:R,ref:o,...I(vi.pattern,R)},!r))return P(R),C}if(y){if(kr(y)){const A=await y(w,n),R=PC(A,E);if(R&&(C[_]={...R,...I(vi.validate,R.message)},!r))return P(R.message),C}else if(Nt(y)){let A={};for(const R in y){if(!Mn(A)&&!r)break;const $=PC(await y[R](w,n),E,R);$&&(A={...$,...I(R,$.message)},P($.message),r&&(C[_]=A))}if(!Mn(A)&&(C[_]={ref:E,...A},!r))return C}}return P(!0),C};const MQ={mode:Sr.onSubmit,reValidateMode:Sr.onChange,shouldFocusError:!0};function jQ(t={}){let e={...MQ,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:kr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Nt(e.defaultValues)||Nt(e.values)?Ft(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Ft(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const p={array:wC(),state:wC()},m=e.criteriaMode===Sr.all,y=j=>V=>{clearTimeout(c),c=setTimeout(j,V)},_=async j=>{if(!e.disabled&&(u.isValid||f.isValid||j)){const V=e.resolver?Mn((await S()).errors):await k(r,!0);V!==n.isValid&&p.state.next({isValid:V})}},x=(j,V)=>{!e.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((j||Array.from(a.mount)).forEach(U=>{U&&(V?nt(n.validatingFields,U,V):kt(n.validatingFields,U))}),p.state.next({validatingFields:n.validatingFields,isValidating:!Mn(n.validatingFields)}))},v=(j,V=[],U,Z,Y=!0,G=!0)=>{if(Z&&U&&!e.disabled){if(o.action=!0,G&&Array.isArray(oe(r,j))){const te=U(oe(r,j),Z.argA,Z.argB);Y&&nt(r,j,te)}if(G&&Array.isArray(oe(n.errors,j))){const te=U(oe(n.errors,j),Z.argA,Z.argB);Y&&nt(n.errors,j,te),DQ(n.errors,j)}if((u.touchedFields||f.touchedFields)&&G&&Array.isArray(oe(n.touchedFields,j))){const te=U(oe(n.touchedFields,j),Z.argA,Z.argB);Y&&nt(n.touchedFields,j,te)}(u.dirtyFields||f.dirtyFields)&&(n.dirtyFields=Ca(i,s)),p.state.next({name:j,isDirty:D(j,V),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else nt(s,j,V)},w=(j,V)=>{nt(n.errors,j,V),p.state.next({errors:n.errors})},E=j=>{n.errors=j,p.state.next({errors:n.errors,isValid:!1})},P=(j,V,U,Z)=>{const Y=oe(r,j);if(Y){const G=oe(s,j,It(U)?oe(i,j):U);It(G)||Z&&Z.defaultChecked||V?nt(s,j,V?G:SC(Y._f)):$(j,G),o.mount&&_()}},C=(j,V,U,Z,Y)=>{let G=!1,te=!1;const he={name:j};if(!e.disabled){if(!U||Z){(u.isDirty||f.isDirty)&&(te=n.isDirty,n.isDirty=he.isDirty=D(),G=te!==he.isDirty);const Ae=ds(oe(i,j),V);te=!!oe(n.dirtyFields,j),Ae?kt(n.dirtyFields,j):nt(n.dirtyFields,j,!0),he.dirtyFields=n.dirtyFields,G=G||(u.dirtyFields||f.dirtyFields)&&te!==!Ae}if(U){const Ae=oe(n.touchedFields,j);Ae||(nt(n.touchedFields,j,U),he.touchedFields=n.touchedFields,G=G||(u.touchedFields||f.touchedFields)&&Ae!==U)}G&&Y&&p.state.next(he)}return G?he:{}},M=(j,V,U,Z)=>{const Y=oe(n.errors,j),G=(u.isValid||f.isValid)&&qr(V)&&n.isValid!==V;if(e.delayError&&U?(l=y(()=>w(j,U)),l(e.delayError)):(clearTimeout(c),l=null,U?nt(n.errors,j,U):kt(n.errors,j)),(U?!ds(Y,U):Y)||!Mn(Z)||G){const te={...Z,...G&&qr(V)?{isValid:V}:{},errors:n.errors,name:j};n={...n,...te},p.state.next(te)}},S=async j=>{x(j,!0);const V=await e.resolver(s,e.context,CQ(j||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return x(j),V},b=async j=>{const{errors:V}=await S(j);if(j)for(const U of j){const Z=oe(V,U);Z?nt(n.errors,U,Z):kt(n.errors,U)}else n.errors=V;return V},k=async(j,V,U={valid:!0})=>{for(const Z in j){const Y=j[Z];if(Y){const{_f:G,...te}=Y;if(G){const he=a.array.has(G.name),Ae=Y._f&&IQ(Y._f);Ae&&u.validatingFields&&x([G.name],!0);const Dt=await RC(Y,a.disabled,s,m,e.shouldUseNativeValidation&&!V,he);if(Ae&&u.validatingFields&&x([G.name]),Dt[G.name]&&(U.valid=!1,V))break;!V&&(oe(Dt,G.name)?he?OQ(n.errors,Dt,G.name):nt(n.errors,G.name,Dt[G.name]):kt(n.errors,G.name))}!Mn(te)&&await k(te,V,U)}}return U.valid},I=()=>{for(const j of a.unMount){const V=oe(r,j);V&&(V._f.refs?V._f.refs.every(U=>!ky(U)):!ky(V._f.ref))&&ot(j)}a.unMount=new Set},D=(j,V)=>!e.disabled&&(j&&V&&nt(s,j,V),!ds(J(),i)),A=(j,V,U)=>wQ(j,a,{...o.mount?s:It(V)?i:Yn(j)?{[j]:V}:V},U,V),R=j=>Gw(oe(o.mount?s:i,j,e.shouldUnregister?oe(i,j,[]):[])),$=(j,V,U={})=>{const Z=oe(r,j);let Y=V;if(Z){const G=Z._f;G&&(!G.disabled&&nt(s,j,HO(V,G)),Y=Lp(G.ref)&&Cn(V)?"":V,zO(G.ref)?[...G.ref.options].forEach(te=>te.selected=Y.includes(te.value)):G.refs?Vh(G.ref)?G.refs.forEach(te=>{(!te.defaultChecked||!te.disabled)&&(Array.isArray(Y)?te.checked=!!Y.find(he=>he===te.value):te.checked=Y===te.value||!!Y)}):G.refs.forEach(te=>te.checked=te.value===Y):Qw(G.ref)?G.ref.value="":(G.ref.value=Y,G.ref.type||p.state.next({name:j,values:Ft(s)})))}(U.shouldDirty||U.shouldTouch)&&C(j,Y,U.shouldTouch,U.shouldDirty,!0),U.shouldValidate&&X(j)},H=(j,V,U)=>{for(const Z in V){if(!V.hasOwnProperty(Z))return;const Y=V[Z],G=j+"."+Z,te=oe(r,G);(a.array.has(j)||Nt(Y)||te&&!te._f)&&!Do(Y)?H(G,Y,U):$(G,Y,U)}},q=(j,V,U={})=>{const Z=oe(r,j),Y=a.array.has(j),G=Ft(V);nt(s,j,G),Y?(p.array.next({name:j,values:Ft(s)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&U.shouldDirty&&p.state.next({name:j,dirtyFields:Ca(i,s),isDirty:D(j,G)})):Z&&!Z._f&&!Cn(G)?H(j,G,U):$(j,G,U),IC(j,a)&&p.state.next({...n,name:j}),p.state.next({name:o.mount?j:void 0,values:Ft(s)})},ee=async j=>{o.mount=!0;const V=j.target;let U=V.name,Z=!0;const Y=oe(r,U),G=Ae=>{Z=Number.isNaN(Ae)||Do(Ae)&&isNaN(Ae.getTime())||ds(Ae,oe(s,U,Ae))},te=kC(e.mode),he=kC(e.reValidateMode);if(Y){let Ae,Dt;const Mr=V.type?SC(Y._f):pQ(j),Hn=j.type===xC.BLUR||j.type===xC.FOCUS_OUT,di=!AQ(Y._f)&&!e.resolver&&!oe(n.errors,U)&&!Y._f.deps||NQ(Hn,oe(n.touchedFields,U),n.isSubmitted,he,te),yr=IC(U,a,Hn);nt(s,U,Mr),Hn?(!V||!V.readOnly)&&(Y._f.onBlur&&Y._f.onBlur(j),l&&l(0)):Y._f.onChange&&Y._f.onChange(j);const fi=C(U,Mr,Hn),ro=!Mn(fi)||yr;if(!Hn&&p.state.next({name:U,type:j.type,values:Ft(s)}),di)return(u.isValid||f.isValid)&&(e.mode==="onBlur"?Hn&&_():Hn||_()),ro&&p.state.next({name:U,...yr?{}:fi});if(!Hn&&yr&&p.state.next({...n}),e.resolver){const{errors:io}=await S([U]);if(G(Mr),Z){const pa=AC(n.errors,r,U),jr=AC(io,r,pa.name||U);Ae=jr.error,U=jr.name,Dt=Mn(io)}}else x([U],!0),Ae=(await RC(Y,a.disabled,s,m,e.shouldUseNativeValidation))[U],x([U]),G(Mr),Z&&(Ae?Dt=!1:(u.isValid||f.isValid)&&(Dt=await k(r,!0)));Z&&(Y._f.deps&&(!Array.isArray(Y._f.deps)||Y._f.deps.length>0)&&X(Y._f.deps),M(U,Dt,Ae,fi))}},z=(j,V)=>{if(oe(n.errors,V)&&j.focus)return j.focus(),1},X=async(j,V={})=>{let U,Z;const Y=pu(j);if(e.resolver){const G=await b(It(j)?j:Y);U=Mn(G),Z=j?!Y.some(te=>oe(G,te)):U}else j?(Z=(await Promise.all(Y.map(async G=>{const te=oe(r,G);return await k(te&&te._f?{[G]:te}:te)}))).every(Boolean),!(!Z&&!n.isValid)&&_()):Z=U=await k(r);return p.state.next({...!Yn(j)||(u.isValid||f.isValid)&&U!==n.isValid?{}:{name:j},...e.resolver||!j?{isValid:U}:{},errors:n.errors}),V.shouldFocus&&!Z&&mu(r,z,j?Y:a.mount),Z},J=(j,V)=>{let U={...o.mount?s:i};return V&&(U=BO(V.dirtyFields?n.dirtyFields:n.touchedFields,U)),It(j)?U:Yn(j)?oe(U,j):j.map(Z=>oe(U,Z))},ye=(j,V)=>({invalid:!!oe((V||n).errors,j),isDirty:!!oe((V||n).dirtyFields,j),error:oe((V||n).errors,j),isValidating:!!oe(n.validatingFields,j),isTouched:!!oe((V||n).touchedFields,j)}),pe=j=>{j&&pu(j).forEach(V=>kt(n.errors,V)),p.state.next({errors:j?n.errors:{}})},we=(j,V,U)=>{const Z=(oe(r,j,{_f:{}})._f||{}).ref,Y=oe(n.errors,j)||{},{ref:G,message:te,type:he,...Ae}=Y;nt(n.errors,j,{...Ae,...V,ref:Z}),p.state.next({name:j,errors:n.errors,isValid:!1}),U&&U.shouldFocus&&Z&&Z.focus&&Z.focus()},He=(j,V)=>kr(j)?p.state.subscribe({next:U=>"values"in U&&j(A(void 0,V),U)}):A(j,V,!0),tt=j=>p.state.subscribe({next:V=>{RQ(j.name,V.name,j.exact)&&PQ(V,j.formState||u,Yi,j.reRenderRoot)&&j.callback({values:{...s},...n,...V,defaultValues:i})}}).unsubscribe,qe=j=>(o.mount=!0,f={...f,...j.formState},tt({...j,formState:f})),ot=(j,V={})=>{for(const U of j?pu(j):a.mount)a.mount.delete(U),a.array.delete(U),V.keepValue||(kt(r,U),kt(s,U)),!V.keepError&&kt(n.errors,U),!V.keepDirty&&kt(n.dirtyFields,U),!V.keepTouched&&kt(n.touchedFields,U),!V.keepIsValidating&&kt(n.validatingFields,U),!e.shouldUnregister&&!V.keepDefaultValue&&kt(i,U);p.state.next({values:Ft(s)}),p.state.next({...n,...V.keepDirty?{isDirty:D()}:{}}),!V.keepIsValid&&_()},nn=({disabled:j,name:V})=>{(qr(j)&&o.mount||j||a.disabled.has(V))&&(j?a.disabled.add(V):a.disabled.delete(V))},rn=(j,V={})=>{let U=oe(r,j);const Z=qr(V.disabled)||qr(e.disabled);return nt(r,j,{...U||{},_f:{...U&&U._f?U._f:{ref:{name:j}},name:j,mount:!0,...V}}),a.mount.add(j),U?nn({disabled:qr(V.disabled)?V.disabled:e.disabled,name:j}):P(j,!0,V.value),{...Z?{disabled:V.disabled||e.disabled}:{},...e.progressive?{required:!!V.required,min:Sc(V.min),max:Sc(V.max),minLength:Sc(V.minLength),maxLength:Sc(V.maxLength),pattern:Sc(V.pattern)}:{},name:j,onChange:ee,onBlur:ee,ref:Y=>{if(Y){rn(j,V),U=oe(r,j);const G=It(Y.value)&&Y.querySelectorAll&&Y.querySelectorAll("input,select,textarea")[0]||Y,te=TQ(G),he=U._f.refs||[];if(te?he.find(Ae=>Ae===G):G===U._f.ref)return;nt(r,j,{_f:{...U._f,...te?{refs:[...he.filter(ky),G,...Array.isArray(oe(i,j))?[{}]:[]],ref:{type:G.type,name:j}}:{ref:G}}}),P(j,!1,void 0,G)}else U=oe(r,j,{}),U._f&&(U._f.mount=!1),(e.shouldUnregister||V.shouldUnregister)&&!(gQ(a.array,j)&&o.action)&&a.unMount.add(j)}}},Nn=()=>e.shouldFocusError&&mu(r,z,a.mount),Wn=j=>{qr(j)&&(p.state.next({disabled:j}),mu(r,(V,U)=>{const Z=oe(r,U);Z&&(V.disabled=Z._f.disabled||j,Array.isArray(Z._f.refs)&&Z._f.refs.forEach(Y=>{Y.disabled=Z._f.disabled||j}))},0,!1))},re=(j,V)=>async U=>{let Z;U&&(U.preventDefault&&U.preventDefault(),U.persist&&U.persist());let Y=Ft(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:G,values:te}=await S();n.errors=G,Y=Ft(te)}else await k(r);if(a.disabled.size)for(const G of a.disabled)kt(Y,G);if(kt(n.errors,"root"),Mn(n.errors)){p.state.next({errors:{}});try{await j(Y,U)}catch(G){Z=G}}else V&&await V({...n.errors},U),Nn(),setTimeout(Nn);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Mn(n.errors)&&!Z,submitCount:n.submitCount+1,errors:n.errors}),Z)throw Z},Fe=(j,V={})=>{oe(r,j)&&(It(V.defaultValue)?q(j,Ft(oe(i,j))):(q(j,V.defaultValue),nt(i,j,Ft(V.defaultValue))),V.keepTouched||kt(n.touchedFields,j),V.keepDirty||(kt(n.dirtyFields,j),n.isDirty=V.defaultValue?D(j,Ft(oe(i,j))):D()),V.keepError||(kt(n.errors,j),u.isValid&&_()),p.state.next({...n}))},ve=(j,V={})=>{const U=j?Ft(j):i,Z=Ft(U),Y=Mn(j),G=Y?i:Z;if(V.keepDefaultValues||(i=U),!V.keepValues){if(V.keepDirtyValues){const te=new Set([...a.mount,...Object.keys(Ca(i,s))]);for(const he of Array.from(te))oe(n.dirtyFields,he)?nt(G,he,oe(s,he)):q(he,oe(G,he))}else{if(Kw&&It(j))for(const te of a.mount){const he=oe(r,te);if(he&&he._f){const Ae=Array.isArray(he._f.refs)?he._f.refs[0]:he._f.ref;if(Lp(Ae)){const Dt=Ae.closest("form");if(Dt){Dt.reset();break}}}}if(V.keepFieldsRef)for(const te of a.mount)q(te,oe(G,te));else r={}}s=e.shouldUnregister?V.keepDefaultValues?Ft(i):{}:Ft(G),p.array.next({values:{...G}}),p.state.next({values:{...G}})}a={mount:V.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!V.keepIsValid||!!V.keepDirtyValues,o.watch=!!e.shouldUnregister,p.state.next({submitCount:V.keepSubmitCount?n.submitCount:0,isDirty:Y?!1:V.keepDirty?n.isDirty:!!(V.keepDefaultValues&&!ds(j,i)),isSubmitted:V.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Y?{}:V.keepDirtyValues?V.keepDefaultValues&&s?Ca(i,s):n.dirtyFields:V.keepDefaultValues&&j?Ca(i,j):V.keepDirty?n.dirtyFields:{},touchedFields:V.keepTouched?n.touchedFields:{},errors:V.keepErrors?n.errors:{},isSubmitSuccessful:V.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Ue=(j,V)=>ve(kr(j)?j(s):j,V),Te=(j,V={})=>{const U=oe(r,j),Z=U&&U._f;if(Z){const Y=Z.refs?Z.refs[0]:Z.ref;Y.focus&&(Y.focus(),V.shouldSelect&&kr(Y.select)&&Y.select())}},Yi=j=>{n={...n,...j}},Qi={control:{register:rn,unregister:ot,getFieldState:ye,handleSubmit:re,setError:we,_subscribe:tt,_runSchema:S,_focusError:Nn,_getWatch:A,_getDirty:D,_setValid:_,_setFieldArray:v,_setDisabledField:nn,_setErrors:E,_getFieldArray:R,_reset:ve,_resetDefaultValues:()=>kr(e.defaultValues)&&e.defaultValues().then(j=>{Ue(j,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:I,_disableForm:Wn,_subjects:p,_proxyFormState:u,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(j){o=j},get _defaultValues(){return i},get _names(){return a},set _names(j){a=j},get _formState(){return n},get _options(){return e},set _options(j){e={...e,...j}}},subscribe:qe,trigger:X,register:rn,handleSubmit:re,watch:He,setValue:q,getValues:J,reset:Ue,resetField:Fe,clearErrors:pe,unregister:ot,setError:we,setFocus:Te,getFieldState:ye};return{...Qi,formControl:Qi}}function Wl(t={}){const e=rt.useRef(void 0),n=rt.useRef(void 0),[r,i]=rt.useState({isDirty:!1,isValidating:!1,isLoading:kr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:kr(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!kr(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=jQ(t);e.current={...a,formState:r}}const s=e.current.control;return s._options=t,xQ(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),rt.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),rt.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),rt.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),rt.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),rt.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),rt.useEffect(()=>{t.values&&!ds(t.values,n.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),rt.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=_Q(r,s),e.current}const LQ=()=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let r=0,i=e.length;r<8;++r)n+=e.charAt(Math.floor(Math.random()*i));return n},NC=(t,e,n)=>`Ciao ${t},

Ecco le tue credenziali per accedere alla tua area riservata:

Email (Username): ${e}
Password Temporanea: ${n}
Link di accesso: https://mentalfitmanager.github.io/#/client-login

Ti consiglio di cambiare la password al primo accesso.
A presto!`;function VQ(){const t=Wt(),{register:e,handleSubmit:n,reset:r,formState:{isSubmitting:i}}=Wl(),[s,o]=O.useState(!1),[a,l]=O.useState(null),[c,u]=O.useState(!1),[f,p]=O.useState(null),m=async C=>{const M=LQ();try{const S=Bx(ae),b=Oe(bt(ae,"clients")),k=b.id,I=parseInt(C.duration,10),D=new Date;D.setMonth(D.getMonth()+I);const A={name:C.name,name_lowercase:C.name.toLowerCase(),email:C.email,phone:C.phone||null,status:"attivo",planType:C.planType,createdAt:gn(),scadenza:D,isClient:!0,firstLogin:!0,tempPassword:M};if(S.set(b,A),C.paymentAmount){const R=Oe(bt(ae,"clients",k,"payments")),$={amount:parseFloat(C.paymentAmount),duration:`${I} mes${I>1?"i":"e"}`,paymentMethod:C.paymentMethod||null,paymentDate:gn()};S.set(R,$)}await S.commit(),l({name:C.name,email:C.email,password:M}),p(k),o(!0)}catch(S){console.error("Errore nella creazione del cliente:",S),alert(`Errore: ${S.message}`)}},y=()=>{const C=NC(a.name,a.email,a.password);navigator.clipboard.writeText(C),u(!0),setTimeout(()=>u(!1),2500)},_=()=>{o(!1),r(),t(f?`/clients/${f}`:"/clients")},x="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",v="block mb-1 text-sm font-medium text-muted",w="bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md",E="font-semibold mb-3 text-lg text-primary",P=a?NC(a.name,a.email,a.password):"";return d.jsxs(d.Fragment,{children:[d.jsxs(We.div,{className:"w-full max-w-2xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Onboarding Nuovo Cliente"}),d.jsxs("button",{onClick:()=>t("/clients"),className:"flex items-center gap-2 px-3 py-1.5 bg-card/50 text-sm rounded-lg border border-white/10 backdrop-blur-sm hover:bg-white/10",children:[d.jsx(Js,{})," Torna"]})]}),d.jsxs("form",{onSubmit:n(m),className:"space-y-6",children:[d.jsxs("div",{className:w,children:[d.jsx("h4",{className:E,children:"1. Anagrafica"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:v,children:"Nome e Cognome*"}),d.jsx("input",{...e("name",{required:!0}),className:x})]}),d.jsxs("div",{children:[d.jsx("label",{className:v,children:"Email (sarà il suo username)*"}),d.jsx("input",{type:"email",...e("email",{required:!0}),className:x})]}),d.jsxs("div",{children:[d.jsx("label",{className:v,children:"Telefono (Opzionale)"}),d.jsx("input",{...e("phone"),className:x})]})]})]}),d.jsxs("div",{className:w,children:[d.jsx("h4",{className:E,children:"2. Dettagli Percorso"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:v,children:"Tipo di Percorso*"}),d.jsxs("select",{...e("planType",{required:!0}),className:x,children:[d.jsx("option",{value:"allenamento",children:"Solo Allenamento"}),d.jsx("option",{value:"alimentazione",children:"Solo Alimentazione"}),d.jsx("option",{value:"completo",children:"Completo (Allenamento + Alimentazione)"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:v,children:"Durata del Percorso*"}),d.jsxs("select",{...e("duration",{required:!0}),className:x,children:[d.jsx("option",{value:"",children:"Seleziona durata"}),[...Array(24).keys()].map(C=>{const M=C+1;return d.jsxs("option",{value:M,children:[M," mes",M>1?"i":"e"]},M)})]})]})]})]}),d.jsxs("div",{className:w,children:[d.jsxs("h4",{className:E+" flex items-center gap-2",children:[d.jsx(la,{})," 3. Primo Pagamento (Opzionale)"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:v,children:"Importo Pagato (€)"}),d.jsx("input",{type:"number",step:"0.01",...e("paymentAmount"),className:x})]}),d.jsxs("div",{children:[d.jsx("label",{className:v,children:"Metodo di Pagamento"}),d.jsx("input",{...e("paymentMethod"),className:x,placeholder:"Es. Bonifico, Contanti"})]})]})]}),d.jsx("div",{className:"flex justify-end pt-4",children:d.jsxs("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-5 py-2.5 bg-primary hover:bg-primary/80 text-white rounded-lg transition disabled:opacity-50 font-semibold",children:[d.jsx(Pm,{})," ",i?"Creazione in corso...":"Crea Cliente e Genera Password"]})})]})]}),d.jsx(ca,{children:s&&d.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:d.jsxs(We.div,{className:"bg-card p-6 rounded-2xl border border-white/10 w-full max-w-md shadow-2xl",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[d.jsx("h2",{className:"text-xl font-bold text-center text-foreground",children:"Cliente Creato con Successo!"}),d.jsx("p",{className:"text-center text-muted text-sm mt-2",children:"Copia il messaggio e invialo al cliente per il suo primo accesso."}),d.jsxs("div",{className:"my-6",children:[d.jsx("label",{className:"block mb-2 text-sm font-medium text-muted",children:"Messaggio pronto da copiare:"}),d.jsx("textarea",{readOnly:!0,value:P,className:"w-full p-3 bg-background border border-white/10 rounded-lg text-white font-mono text-sm resize-none h-48"})]}),d.jsx(We.button,{onClick:y,className:"w-full py-3 bg-green-500 text-white font-semibold rounded-lg flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:c?d.jsxs(d.Fragment,{children:[d.jsx(oD,{})," Messaggio Copiato!"]}):d.jsxs(d.Fragment,{children:[d.jsx(B$,{})," Copia Messaggio Completo"]})}),d.jsx("button",{onClick:_,className:"w-full mt-2 py-2 text-muted text-sm text-center hover:text-white",children:"Chiudi e vai alla scheda cliente"})]})})})]})}function KO(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=KO(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Km(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=KO(t))&&(r&&(r+=" "),r+=e);return r}const FQ=(t,e,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const i=Object.getOwnPropertyDescriptor(t,n),s=Object.getOwnPropertyDescriptor(e,n);!UQ(i,s)&&r||Object.defineProperty(t,n,s)},UQ=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},BQ=(t,e)=>{const n=Object.getPrototypeOf(e);n!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,n)},zQ=(t,e)=>`/* Wrapped ${t}*/
${e}`,$Q=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),WQ=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),HQ=(t,e,n)=>{const r=n===""?"":`with ${n.trim()}() `,i=zQ.bind(null,r,e.toString());Object.defineProperty(i,"name",WQ);const{writable:s,enumerable:o,configurable:a}=$Q;Object.defineProperty(t,"toString",{value:i,writable:s,enumerable:o,configurable:a})};function qQ(t,e,{ignoreNonConfigurable:n=!1}={}){const{name:r}=t;for(const i of Reflect.ownKeys(e))FQ(t,e,i,n);return BQ(t,e),HQ(t,e,r),t}const KQ=new WeakMap,DC=new WeakMap;function GO(t,{cacheKey:e,cache:n=new Map,maxAge:r}={}){if(r===0)return t;if(typeof r=="number"){if(r>2147483647)throw new TypeError("The `maxAge` option cannot exceed 2147483647.");if(r<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const i=function(...s){var u;const o=e?e(s):s[0],a=n.get(o);if(a)return a.data;const l=t.apply(this,s),c=typeof r=="function"?r(...s):r;if(n.set(o,{data:l,maxAge:c?Date.now()+c:Number.POSITIVE_INFINITY}),c&&c>0&&c!==Number.POSITIVE_INFINITY){const f=setTimeout(()=>{n.delete(o)},c);(u=f.unref)==null||u.call(f);const p=DC.get(t)??new Set;p.add(f),DC.set(t,p)}return l};return qQ(i,t,{ignoreNonConfigurable:!0}),KQ.set(i,n),i}function GQ(t){return typeof t=="string"}function YQ(t,e,n){return n.indexOf(t)===e}function QQ(t){return t.toLowerCase()===t}function OC(t){return t.indexOf(",")===-1?t:t.split(",")}function A_(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var e=t.split(".")[0],n=e===void 0?"":e;return A_(n)}if(t.indexOf("@")!==-1){var r=t.split("@")[0],n=r===void 0?"":r;return A_(n)}if(t.indexOf("-")===-1||!QQ(t))return t;var i=t.split("-"),s=i[0],o=i[1],a=o===void 0?"":o;return"".concat(s,"-").concat(a.toUpperCase())}function XQ(t){var e=t===void 0?{}:t,n=e.useFallbackLocale,r=n===void 0?!0:n,i=e.fallbackLocale,s=i===void 0?"en-US":i,o=[];if(typeof navigator<"u"){for(var a=navigator.languages||[],l=[],c=0,u=a;c<u.length;c++){var f=u[c];l=l.concat(OC(f))}var p=navigator.language,m=p&&OC(p);o=o.concat(l,m)}return r&&o.push(s),o.filter(GQ).map(A_).filter(YQ)}var JQ=GO(XQ,{cacheKey:JSON.stringify});function ZQ(t){return JQ(t)[0]||null}var YO=GO(ZQ,{cacheKey:JSON.stringify});function Gi(t,e,n){return function(i,s=n){const o=t(i)+s;return e(o)}}function Fh(t){return function(n){return new Date(t(n).getTime()-1)}}function Uh(t,e){return function(r){return[t(r),e(r)]}}function st(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;const e=Number.parseInt(t,10);if(typeof t=="string"&&!Number.isNaN(e))return e;throw new Error(`Failed to get year from date: ${t}.`)}function to(t){if(t instanceof Date)return t.getMonth();throw new Error(`Failed to get month from date: ${t}.`)}function Gm(t){if(t instanceof Date)return t.getDate();throw new Error(`Failed to get year from date: ${t}.`)}function Hl(t){const e=st(t),n=e+(-e+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}const eX=Gi(st,Hl,-100),QO=Gi(st,Hl,100),Jw=Fh(QO),tX=Gi(st,Jw,-100),XO=Uh(Hl,Jw);function no(t){const e=st(t),n=e+(-e+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}const JO=Gi(st,no,-10),Zw=Gi(st,no,10),Ym=Fh(Zw),ZO=Gi(st,Ym,-10),eM=Uh(no,Ym);function ql(t){const e=st(t),n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}const tM=Gi(st,ql,-1),eb=Gi(st,ql,1),Qm=Fh(eb),nM=Gi(st,Qm,-1),nX=Uh(ql,Qm);function tb(t,e){return function(r,i=e){const s=st(r),o=to(r)+i,a=new Date;return a.setFullYear(s,o,1),a.setHours(0,0,0,0),t(a)}}function da(t){const e=st(t),n=to(t),r=new Date;return r.setFullYear(e,n,1),r.setHours(0,0,0,0),r}const rM=tb(da,-1),nb=tb(da,1),Bh=Fh(nb),iM=tb(Bh,-1),rX=Uh(da,Bh);function iX(t,e){return function(r,i=e){const s=st(r),o=to(r),a=Gm(r)+i,l=new Date;return l.setFullYear(s,o,a),l.setHours(0,0,0,0),t(l)}}function zh(t){const e=st(t),n=to(t),r=Gm(t),i=new Date;return i.setFullYear(e,n,r),i.setHours(0,0,0,0),i}const sX=iX(zh,1),rb=Fh(sX),oX=Uh(zh,rb);function sM(t){return Gm(Bh(t))}var Xt={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},aX={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},ib=[0,1,2,3,4,5,6],Cy=new Map;function lX(t){return function(n,r){var i=n||YO();Cy.has(i)||Cy.set(i,new Map);var s=Cy.get(i);return s.has(t)||s.set(t,new Intl.DateTimeFormat(i||void 0,t).format),s.get(t)(r)}}function cX(t){var e=new Date(t);return new Date(e.setHours(12))}function fa(t){return function(e,n){return lX(t)(e,cX(n))}}var uX={day:"numeric"},hX={day:"numeric",month:"long",year:"numeric"},dX={month:"long"},fX={month:"long",year:"numeric"},pX={weekday:"short"},mX={weekday:"long"},gX={year:"numeric"},yX=fa(uX),vX=fa(hX),_X=fa(dX),oM=fa(fX),xX=fa(pX),wX=fa(mX),Xm=fa(gX),bX=ib[0],TX=ib[5],MC=ib[6];function ah(t,e){e===void 0&&(e=Xt.ISO_8601);var n=t.getDay();switch(e){case Xt.ISO_8601:return(n+6)%7;case Xt.ISLAMIC:return(n+1)%7;case Xt.HEBREW:case Xt.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function EX(t){var e=Hl(t);return st(e)}function SX(t){var e=no(t);return st(e)}function P_(t,e){e===void 0&&(e=Xt.ISO_8601);var n=st(t),r=to(t),i=t.getDate()-ah(t,e);return new Date(n,r,i)}function kX(t,e){e===void 0&&(e=Xt.ISO_8601);var n=e===Xt.GREGORY?Xt.GREGORY:Xt.ISO_8601,r=P_(t,e),i=st(t)+1,s,o;do s=new Date(i,0,n===Xt.ISO_8601?4:1),o=P_(s,e),i-=1;while(t<o);return Math.round((r.getTime()-o.getTime())/(864e5*7))+1}function Uo(t,e){switch(t){case"century":return Hl(e);case"decade":return no(e);case"year":return ql(e);case"month":return da(e);case"day":return zh(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function CX(t,e){switch(t){case"century":return eX(e);case"decade":return JO(e);case"year":return tM(e);case"month":return rM(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function aM(t,e){switch(t){case"century":return QO(e);case"decade":return Zw(e);case"year":return eb(e);case"month":return nb(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function IX(t,e){switch(t){case"decade":return JO(e,-100);case"year":return tM(e,-10);case"month":return rM(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function AX(t,e){switch(t){case"decade":return Zw(e,100);case"year":return eb(e,10);case"month":return nb(e,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function lM(t,e){switch(t){case"century":return Jw(e);case"decade":return Ym(e);case"year":return Qm(e);case"month":return Bh(e);case"day":return rb(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function PX(t,e){switch(t){case"century":return tX(e);case"decade":return ZO(e);case"year":return nM(e);case"month":return iM(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function RX(t,e){switch(t){case"decade":return ZO(e,-100);case"year":return nM(e,-10);case"month":return iM(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function jC(t,e){switch(t){case"century":return XO(e);case"decade":return eM(e);case"year":return nX(e);case"month":return rX(e);case"day":return oX(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function NX(t,e,n){var r=[e,n].sort(function(i,s){return i.getTime()-s.getTime()});return[Uo(t,r[0]),lM(t,r[1])]}function cM(t,e,n){return n.map(function(r){return(e||Xm)(t,r)}).join(" – ")}function DX(t,e,n){return cM(t,e,XO(n))}function uM(t,e,n){return cM(t,e,eM(n))}function OX(t){return t.getDay()===new Date().getDay()}function hM(t,e){e===void 0&&(e=Xt.ISO_8601);var n=t.getDay();switch(e){case Xt.ISLAMIC:case Xt.HEBREW:return n===TX||n===MC;case Xt.ISO_8601:case Xt.GREGORY:return n===MC||n===bX;default:throw new Error("Unsupported calendar type.")}}var Br="react-calendar__navigation";function MX(t){var e=t.activeStartDate,n=t.drillUp,r=t.formatMonthYear,i=r===void 0?oM:r,s=t.formatYear,o=s===void 0?Xm:s,a=t.locale,l=t.maxDate,c=t.minDate,u=t.navigationAriaLabel,f=u===void 0?"":u,p=t.navigationAriaLive,m=t.navigationLabel,y=t.next2AriaLabel,_=y===void 0?"":y,x=t.next2Label,v=x===void 0?"»":x,w=t.nextAriaLabel,E=w===void 0?"":w,P=t.nextLabel,C=P===void 0?"›":P,M=t.prev2AriaLabel,S=M===void 0?"":M,b=t.prev2Label,k=b===void 0?"«":b,I=t.prevAriaLabel,D=I===void 0?"":I,A=t.prevLabel,R=A===void 0?"‹":A,$=t.setActiveStartDate,H=t.showDoubleView,q=t.view,ee=t.views,z=ee.indexOf(q)>0,X=q!=="century",J=CX(q,e),ye=X?IX(q,e):void 0,pe=aM(q,e),we=X?AX(q,e):void 0,He=function(){if(J.getFullYear()<0)return!0;var ve=PX(q,e);return c&&c>=ve}(),tt=X&&function(){if(ye.getFullYear()<0)return!0;var ve=RX(q,e);return c&&c>=ve}(),qe=l&&l<pe,ot=X&&l&&l<we;function nn(){$(J,"prev")}function rn(){$(ye,"prev2")}function Nn(){$(pe,"next")}function Wn(){$(we,"next2")}function re(ve){var Ue=function(){switch(q){case"century":return DX(a,o,ve);case"decade":return uM(a,o,ve);case"year":return o(a,ve);case"month":return i(a,ve);default:throw new Error("Invalid view: ".concat(q,"."))}}();return m?m({date:ve,label:Ue,locale:a||YO()||void 0,view:q}):Ue}function Fe(){var ve="".concat(Br,"__label");return d.jsxs("button",{"aria-label":f,"aria-live":p,className:ve,disabled:!z,onClick:n,style:{flexGrow:1},type:"button",children:[d.jsx("span",{className:"".concat(ve,"__labelText ").concat(ve,"__labelText--from"),children:re(e)}),H?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"".concat(ve,"__divider"),children:" – "}),d.jsx("span",{className:"".concat(ve,"__labelText ").concat(ve,"__labelText--to"),children:re(pe)})]}):null]})}return d.jsxs("div",{className:Br,children:[k!==null&&X?d.jsx("button",{"aria-label":S,className:"".concat(Br,"__arrow ").concat(Br,"__prev2-button"),disabled:tt,onClick:rn,type:"button",children:k}):null,R!==null&&d.jsx("button",{"aria-label":D,className:"".concat(Br,"__arrow ").concat(Br,"__prev-button"),disabled:He,onClick:nn,type:"button",children:R}),Fe(),C!==null&&d.jsx("button",{"aria-label":E,className:"".concat(Br,"__arrow ").concat(Br,"__next-button"),disabled:qe,onClick:Nn,type:"button",children:C}),v!==null&&X?d.jsx("button",{"aria-label":_,className:"".concat(Br,"__arrow ").concat(Br,"__next2-button"),disabled:ot,onClick:Wn,type:"button",children:v}):null]})}var Ka=function(){return Ka=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ka.apply(this,arguments)},jX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function LC(t){return"".concat(t,"%")}function sb(t){var e=t.children,n=t.className,r=t.count,i=t.direction,s=t.offset,o=t.style,a=t.wrap,l=jX(t,["children","className","count","direction","offset","style","wrap"]);return d.jsx("div",Ka({className:n,style:Ka({display:"flex",flexDirection:i,flexWrap:a?"wrap":"nowrap"},o)},l,{children:O.Children.map(e,function(c,u){var f=s&&u===0?LC(100*s/r):null;return O.cloneElement(c,Ka(Ka({},c.props),{style:{flexBasis:LC(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:f,marginInlineStart:f,marginInlineEnd:0}}))})}))}function LX(t,e,n){return e&&e>t?e:n&&n<t?n:t}function lh(t,e){return e[0]<=t&&e[1]>=t}function VX(t,e){return t[0]<=e[0]&&t[1]>=e[1]}function dM(t,e){return lh(t[0],e)||lh(t[1],e)}function VC(t,e,n){var r=dM(e,t),i=[];if(r){i.push(n);var s=lh(t[0],e),o=lh(t[1],e);s&&i.push("".concat(n,"Start")),o&&i.push("".concat(n,"End")),s&&o&&i.push("".concat(n,"BothEnds"))}return i}function FX(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function UX(t){if(!t)throw new Error("args is required");var e=t.value,n=t.date,r=t.hover,i="react-calendar__tile",s=[i];if(!n)return s;var o=new Date,a=function(){if(Array.isArray(n))return n;var m=t.dateType;if(!m)throw new Error("dateType is required when date is not an array of two dates");return jC(m,n)}();if(lh(o,a)&&s.push("".concat(i,"--now")),!e||!FX(e))return s;var l=function(){if(Array.isArray(e))return e;var m=t.valueType;if(!m)throw new Error("valueType is required when value is not an array of two dates");return jC(m,e)}();VX(l,a)?s.push("".concat(i,"--active")):dM(l,a)&&s.push("".concat(i,"--hasActive"));var c=VC(l,a,"".concat(i,"--range"));s.push.apply(s,c);var u=Array.isArray(e)?e:[e];if(r&&u.length===1){var f=r>l[0]?[l[0],r]:[r,l[0]],p=VC(f,a,"".concat(i,"--hover"));s.push.apply(s,p)}return s}function Jm(t){for(var e=t.className,n=t.count,r=n===void 0?3:n,i=t.dateTransform,s=t.dateType,o=t.end,a=t.hover,l=t.offset,c=t.renderTile,u=t.start,f=t.step,p=f===void 0?1:f,m=t.value,y=t.valueType,_=[],x=u;x<=o;x+=p){var v=i(x);_.push(c({classes:UX({date:v,dateType:s,hover:a,value:m,valueType:y}),date:v}))}return d.jsx(sb,{className:e,count:r,offset:l,wrap:!0,children:_})}function Zm(t){var e=t.activeStartDate,n=t.children,r=t.classes,i=t.date,s=t.formatAbbr,o=t.locale,a=t.maxDate,l=t.maxDateTransform,c=t.minDate,u=t.minDateTransform,f=t.onClick,p=t.onMouseOver,m=t.style,y=t.tileClassName,_=t.tileContent,x=t.tileDisabled,v=t.view,w=O.useMemo(function(){var P={activeStartDate:e,date:i,view:v};return typeof y=="function"?y(P):y},[e,i,y,v]),E=O.useMemo(function(){var P={activeStartDate:e,date:i,view:v};return typeof _=="function"?_(P):_},[e,i,_,v]);return d.jsxs("button",{className:Km(r,w),disabled:c&&u(c)>i||a&&l(a)<i||(x==null?void 0:x({activeStartDate:e,date:i,view:v})),onClick:f?function(P){return f(i,P)}:void 0,onFocus:p?function(){return p(i)}:void 0,onMouseOver:p?function(){return p(i)}:void 0,style:m,type:"button",children:[s?d.jsx("abbr",{"aria-label":s(o,i),children:n}):n,E]})}var R_=function(){return R_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},R_.apply(this,arguments)},BX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},FC="react-calendar__century-view__decades__decade";function zX(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentCentury,i=t.formatYear,s=i===void 0?Xm:i,o=BX(t,["classes","currentCentury","formatYear"]),a=o.date,l=o.locale,c=[];return n&&c.push.apply(c,n),c.push(FC),Hl(a).getFullYear()!==r&&c.push("".concat(FC,"--neighboringCentury")),d.jsx(Zm,R_({},o,{classes:c,maxDateTransform:Ym,minDateTransform:no,view:"century",children:uM(l,s,a)}))}var N_=function(){return N_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},N_.apply(this,arguments)},UC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function $X(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringCentury,i=t.value,s=t.valueType,o=UC(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),a=EX(e),l=a+(r?119:99);return d.jsx(Jm,{className:"react-calendar__century-view__decades",dateTransform:no,dateType:"decade",end:l,hover:n,renderTile:function(c){var u=c.date,f=UC(c,["date"]);return d.jsx(zX,N_({},o,f,{activeStartDate:e,currentCentury:a,date:u}),u.getTime())},start:a,step:10,value:i,valueType:s})}var D_=function(){return D_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},D_.apply(this,arguments)};function WX(t){function e(){return d.jsx($X,D_({},t))}return d.jsx("div",{className:"react-calendar__century-view",children:e()})}var O_=function(){return O_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},O_.apply(this,arguments)},HX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},BC="react-calendar__decade-view__years__year";function qX(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentDecade,i=t.formatYear,s=i===void 0?Xm:i,o=HX(t,["classes","currentDecade","formatYear"]),a=o.date,l=o.locale,c=[];return n&&c.push.apply(c,n),c.push(BC),no(a).getFullYear()!==r&&c.push("".concat(BC,"--neighboringDecade")),d.jsx(Zm,O_({},o,{classes:c,maxDateTransform:Qm,minDateTransform:ql,view:"decade",children:s(l,a)}))}var M_=function(){return M_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},M_.apply(this,arguments)},zC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function KX(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringDecade,i=t.value,s=t.valueType,o=zC(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),a=SX(e),l=a+(r?11:9);return d.jsx(Jm,{className:"react-calendar__decade-view__years",dateTransform:ql,dateType:"year",end:l,hover:n,renderTile:function(c){var u=c.date,f=zC(c,["date"]);return d.jsx(qX,M_({},o,f,{activeStartDate:e,currentDecade:a,date:u}),u.getTime())},start:a,value:i,valueType:s})}var j_=function(){return j_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},j_.apply(this,arguments)};function GX(t){function e(){return d.jsx(KX,j_({},t))}return d.jsx("div",{className:"react-calendar__decade-view",children:e()})}var L_=function(){return L_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},L_.apply(this,arguments)},YX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},$C=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},QX="react-calendar__year-view__months__month";function XX(t){var e=t.classes,n=e===void 0?[]:e,r=t.formatMonth,i=r===void 0?_X:r,s=t.formatMonthYear,o=s===void 0?oM:s,a=YX(t,["classes","formatMonth","formatMonthYear"]),l=a.date,c=a.locale;return d.jsx(Zm,L_({},a,{classes:$C($C([],n,!0),[QX],!1),formatAbbr:o,maxDateTransform:Bh,minDateTransform:da,view:"year",children:i(c,l)}))}var V_=function(){return V_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},V_.apply(this,arguments)},WC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function JX(t){var e=t.activeStartDate,n=t.hover,r=t.value,i=t.valueType,s=WC(t,["activeStartDate","hover","value","valueType"]),o=0,a=11,l=st(e);return d.jsx(Jm,{className:"react-calendar__year-view__months",dateTransform:function(c){var u=new Date;return u.setFullYear(l,c,1),da(u)},dateType:"month",end:a,hover:n,renderTile:function(c){var u=c.date,f=WC(c,["date"]);return d.jsx(XX,V_({},s,f,{activeStartDate:e,date:u}),u.getTime())},start:o,value:r,valueType:i})}var F_=function(){return F_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},F_.apply(this,arguments)};function ZX(t){function e(){return d.jsx(JX,F_({},t))}return d.jsx("div",{className:"react-calendar__year-view",children:e()})}var U_=function(){return U_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},U_.apply(this,arguments)},eJ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Iy="react-calendar__month-view__days__day";function tJ(t){var e=t.calendarType,n=t.classes,r=n===void 0?[]:n,i=t.currentMonthIndex,s=t.formatDay,o=s===void 0?yX:s,a=t.formatLongDate,l=a===void 0?vX:a,c=eJ(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),u=c.date,f=c.locale,p=[];return r&&p.push.apply(p,r),p.push(Iy),hM(u,e)&&p.push("".concat(Iy,"--weekend")),u.getMonth()!==i&&p.push("".concat(Iy,"--neighboringMonth")),d.jsx(Zm,U_({},c,{classes:p,formatAbbr:l,maxDateTransform:rb,minDateTransform:zh,view:"month",children:o(f,u)}))}var B_=function(){return B_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},B_.apply(this,arguments)},HC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function nJ(t){var e=t.activeStartDate,n=t.calendarType,r=t.hover,i=t.showFixedNumberOfWeeks,s=t.showNeighboringMonth,o=t.value,a=t.valueType,l=HC(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),c=st(e),u=to(e),f=i||s,p=ah(e,n),m=f?0:p,y=(f?-p:0)+1,_=function(){if(i)return y+6*7-1;var x=sM(e);if(s){var v=new Date;v.setFullYear(c,u,x),v.setHours(0,0,0,0);var w=7-ah(v,n)-1;return x+w}return x}();return d.jsx(Jm,{className:"react-calendar__month-view__days",count:7,dateTransform:function(x){var v=new Date;return v.setFullYear(c,u,x),zh(v)},dateType:"day",hover:r,end:_,renderTile:function(x){var v=x.date,w=HC(x,["date"]);return d.jsx(tJ,B_({},l,w,{activeStartDate:e,calendarType:n,currentMonthIndex:u,date:v}),v.getTime())},offset:m,start:y,value:o,valueType:a})}var fM="react-calendar__month-view__weekdays",Ay="".concat(fM,"__weekday");function rJ(t){for(var e=t.calendarType,n=t.formatShortWeekday,r=n===void 0?xX:n,i=t.formatWeekday,s=i===void 0?wX:i,o=t.locale,a=t.onMouseLeave,l=new Date,c=da(l),u=st(c),f=to(c),p=[],m=1;m<=7;m+=1){var y=new Date(u,f,m-ah(c,e)),_=s(o,y);p.push(d.jsx("div",{className:Km(Ay,OX(y)&&"".concat(Ay,"--current"),hM(y,e)&&"".concat(Ay,"--weekend")),children:d.jsx("abbr",{"aria-label":_,title:_,children:r(o,y).replace(".","")})},m))}return d.jsx(sb,{className:fM,count:7,onFocus:a,onMouseOver:a,children:p})}var Fp=function(){return Fp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Fp.apply(this,arguments)},qC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},KC="react-calendar__tile";function iJ(t){var e=t.onClickWeekNumber,n=t.weekNumber,r=d.jsx("span",{children:n});if(e){var i=t.date,s=t.onClickWeekNumber,o=t.weekNumber,a=qC(t,["date","onClickWeekNumber","weekNumber"]);return d.jsx("button",Fp({},a,{className:KC,onClick:function(l){return s(o,i,l)},type:"button",children:r}))}else{t.date,t.onClickWeekNumber,t.weekNumber;var a=qC(t,["date","onClickWeekNumber","weekNumber"]);return d.jsx("div",Fp({},a,{className:KC,children:r}))}}function sJ(t){var e=t.activeStartDate,n=t.calendarType,r=t.onClickWeekNumber,i=t.onMouseLeave,s=t.showFixedNumberOfWeeks,o=function(){if(s)return 6;var c=sM(e),u=ah(e,n),f=c-(7-u);return 1+Math.ceil(f/7)}(),a=function(){for(var c=st(e),u=to(e),f=Gm(e),p=[],m=0;m<o;m+=1)p.push(P_(new Date(c,u,f+m*7),n));return p}(),l=a.map(function(c){return kX(c,n)});return d.jsx(sb,{className:"react-calendar__month-view__weekNumbers",count:o,direction:"column",onFocus:i,onMouseOver:i,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:l.map(function(c,u){var f=a[u];if(!f)throw new Error("date is not defined");return d.jsx(iJ,{date:f,onClickWeekNumber:r,weekNumber:c},c)})})}var z_=function(){return z_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},z_.apply(this,arguments)},oJ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function aJ(t){if(t)for(var e=0,n=Object.entries(aX);e<n.length;e++){var r=n[e],i=r[0],s=r[1];if(s.includes(t))return i}return Xt.ISO_8601}function lJ(t){var e=t.activeStartDate,n=t.locale,r=t.onMouseLeave,i=t.showFixedNumberOfWeeks,s=t.calendarType,o=s===void 0?aJ(n):s,a=t.formatShortWeekday,l=t.formatWeekday,c=t.onClickWeekNumber,u=t.showWeekNumbers,f=oJ(t,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function p(){return d.jsx(rJ,{calendarType:o,formatShortWeekday:a,formatWeekday:l,locale:n,onMouseLeave:r})}function m(){return u?d.jsx(sJ,{activeStartDate:e,calendarType:o,onClickWeekNumber:c,onMouseLeave:r,showFixedNumberOfWeeks:i}):null}function y(){return d.jsx(nJ,z_({calendarType:o},f))}var _="react-calendar__month-view";return d.jsx("div",{className:Km(_,u?"".concat(_,"--weekNumbers"):""),children:d.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[m(),d.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[p(),y()]})]})})}var Ga=function(){return Ga=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ga.apply(this,arguments)},Kd="react-calendar",Pf=["century","decade","year","month"],cJ=["decade","year","month","day"],ob=new Date;ob.setFullYear(1,0,1);ob.setHours(0,0,0,0);var uJ=new Date(864e13);function $c(t){return t instanceof Date?t:new Date(t)}function pM(t,e){return Pf.slice(Pf.indexOf(t),Pf.indexOf(e)+1)}function hJ(t,e,n){var r=pM(e,n);return r.indexOf(t)!==-1}function ab(t,e,n){return t&&hJ(t,e,n)?t:n}function mM(t){var e=Pf.indexOf(t);return cJ[e]}function dJ(t,e){var n=Array.isArray(t)?t[e]:t;if(!n)return null;var r=$c(n);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(t));return r}function gM(t,e){var n=t.value,r=t.minDate,i=t.maxDate,s=t.maxDetail,o=dJ(n,e);if(!o)return null;var a=mM(s),l=function(){switch(e){case 0:return Uo(a,o);case 1:return lM(a,o);default:throw new Error("Invalid index value: ".concat(e))}}();return LX(l,r,i)}var lb=function(t){return gM(t,0)},yM=function(t){return gM(t,1)},fJ=function(t){return[lb,yM].map(function(e){return e(t)})};function vM(t){var e=t.maxDate,n=t.maxDetail,r=t.minDate,i=t.minDetail,s=t.value,o=t.view,a=ab(o,i,n),l=lb({value:s,minDate:r,maxDate:e,maxDetail:n})||new Date;return Uo(a,l)}function pJ(t){var e=t.activeStartDate,n=t.defaultActiveStartDate,r=t.defaultValue,i=t.defaultView,s=t.maxDate,o=t.maxDetail,a=t.minDate,l=t.minDetail,c=t.value,u=t.view,f=ab(u,l,o),p=e||n;return p?Uo(f,p):vM({maxDate:s,maxDetail:o,minDate:a,minDetail:l,value:c||r,view:u||i})}function Py(t){return t&&(!Array.isArray(t)||t.length===1)}function Gd(t,e){return t instanceof Date&&e instanceof Date&&t.getTime()===e.getTime()}var _M=O.forwardRef(function(e,n){var r=e.activeStartDate,i=e.allowPartialRange,s=e.calendarType,o=e.className,a=e.defaultActiveStartDate,l=e.defaultValue,c=e.defaultView,u=e.formatDay,f=e.formatLongDate,p=e.formatMonth,m=e.formatMonthYear,y=e.formatShortWeekday,_=e.formatWeekday,x=e.formatYear,v=e.goToRangeStartOnSelect,w=v===void 0?!0:v,E=e.inputRef,P=e.locale,C=e.maxDate,M=C===void 0?uJ:C,S=e.maxDetail,b=S===void 0?"month":S,k=e.minDate,I=k===void 0?ob:k,D=e.minDetail,A=D===void 0?"century":D,R=e.navigationAriaLabel,$=e.navigationAriaLive,H=e.navigationLabel,q=e.next2AriaLabel,ee=e.next2Label,z=e.nextAriaLabel,X=e.nextLabel,J=e.onActiveStartDateChange,ye=e.onChange,pe=e.onClickDay,we=e.onClickDecade,He=e.onClickMonth,tt=e.onClickWeekNumber,qe=e.onClickYear,ot=e.onDrillDown,nn=e.onDrillUp,rn=e.onViewChange,Nn=e.prev2AriaLabel,Wn=e.prev2Label,re=e.prevAriaLabel,Fe=e.prevLabel,ve=e.returnValue,Ue=ve===void 0?"start":ve,Te=e.selectRange,Yi=e.showDoubleView,Kl=e.showFixedNumberOfWeeks,Qi=e.showNavigation,j=Qi===void 0?!0:Qi,V=e.showNeighboringCentury,U=e.showNeighboringDecade,Z=e.showNeighboringMonth,Y=Z===void 0?!0:Z,G=e.showWeekNumbers,te=e.tileClassName,he=e.tileContent,Ae=e.tileDisabled,Dt=e.value,Mr=e.view,Hn=O.useState(a),di=Hn[0],yr=Hn[1],fi=O.useState(null),ro=fi[0],io=fi[1],pa=O.useState(Array.isArray(l)?l.map(function(_e){return _e!==null?$c(_e):null}):l!=null?$c(l):null),jr=pa[0],$h=pa[1],Gl=O.useState(c),so=Gl[0],ma=Gl[1],Lt=r||di||pJ({activeStartDate:r,defaultActiveStartDate:a,defaultValue:l,defaultView:c,maxDate:M,maxDetail:b,minDate:I,minDetail:A,value:Dt,view:Mr}),pt=function(){var _e=function(){return Te&&Py(jr)?jr:Dt!==void 0?Dt:jr}();return _e?Array.isArray(_e)?_e.map(function(De){return De!==null?$c(De):null}):_e!==null?$c(_e):null:null}(),oo=mM(b),Be=ab(Mr||so,A,b),qn=pM(A,b),ao=Te?ro:null,ga=qn.indexOf(Be)<qn.length-1,Vt=qn.indexOf(Be)>0,Yl=O.useCallback(function(_e){var De=function(){switch(Ue){case"start":return lb;case"end":return yM;case"range":return fJ;default:throw new Error("Invalid returnValue.")}}();return De({maxDate:M,maxDetail:b,minDate:I,value:_e})},[M,b,I,Ue]),pi=O.useCallback(function(_e,De){yr(_e);var at={action:De,activeStartDate:_e,value:pt,view:Be};J&&!Gd(Lt,_e)&&J(at)},[Lt,J,pt,Be]),Lr=O.useCallback(function(_e,De){var at=function(){switch(Be){case"century":return we;case"decade":return qe;case"year":return He;case"month":return pe;default:throw new Error("Invalid view: ".concat(Be,"."))}}();at&&at(_e,De)},[pe,we,He,qe,Be]),Ql=O.useCallback(function(_e,De){if(ga){Lr(_e,De);var at=qn[qn.indexOf(Be)+1];if(!at)throw new Error("Attempted to drill down from the lowest view.");yr(_e),ma(at);var Dn={action:"drillDown",activeStartDate:_e,value:pt,view:at};J&&!Gd(Lt,_e)&&J(Dn),rn&&Be!==at&&rn(Dn),ot&&ot(Dn)}},[Lt,ga,J,Lr,ot,rn,pt,Be,qn]),Xl=O.useCallback(function(){if(Vt){var _e=qn[qn.indexOf(Be)-1];if(!_e)throw new Error("Attempted to drill up from the highest view.");var De=Uo(_e,Lt);yr(De),ma(_e);var at={action:"drillUp",activeStartDate:De,value:pt,view:_e};J&&!Gd(Lt,De)&&J(at),rn&&Be!==_e&&rn(at),nn&&nn(at)}},[Lt,Vt,J,nn,rn,pt,Be,qn]),Vr=O.useCallback(function(_e,De){var at=pt;Lr(_e,De);var Dn=Te&&!Py(at),En;if(Te)if(Dn)En=Uo(oo,_e);else{if(!at)throw new Error("previousValue is required");if(Array.isArray(at))throw new Error("previousValue must not be an array");En=NX(oo,at,_e)}else En=Yl(_e);var co=!Te||Dn||w?vM({maxDate:M,maxDetail:b,minDate:I,minDetail:A,value:En,view:Be}):null;De.persist(),yr(co),$h(En);var Hh={action:"onChange",activeStartDate:co,value:En,view:Be};if(J&&!Gd(Lt,co)&&J(Hh),ye)if(Te){var qh=Py(En);if(!qh)ye(En||null,De);else if(i){if(Array.isArray(En))throw new Error("value must not be an array");ye([En||null,null],De)}}else ye(En||null,De)},[Lt,i,Yl,w,M,b,I,A,J,ye,Lr,Te,pt,oo,Be]);function eg(_e){io(_e)}function Jl(){io(null)}O.useImperativeHandle(n,function(){return{activeStartDate:Lt,drillDown:Ql,drillUp:Xl,onChange:Vr,setActiveStartDate:pi,value:pt,view:Be}},[Lt,Ql,Xl,Vr,pi,pt,Be]);function lo(_e){var De=_e?aM(Be,Lt):Uo(Be,Lt),at=ga?Ql:Vr,Dn={activeStartDate:De,hover:ao,locale:P,maxDate:M,minDate:I,onClick:at,onMouseOver:Te?eg:void 0,tileClassName:te,tileContent:he,tileDisabled:Ae,value:pt,valueType:oo};switch(Be){case"century":return d.jsx(WX,Ga({formatYear:x,showNeighboringCentury:V},Dn));case"decade":return d.jsx(GX,Ga({formatYear:x,showNeighboringDecade:U},Dn));case"year":return d.jsx(ZX,Ga({formatMonth:p,formatMonthYear:m},Dn));case"month":return d.jsx(lJ,Ga({calendarType:s,formatDay:u,formatLongDate:f,formatShortWeekday:y,formatWeekday:_,onClickWeekNumber:tt,onMouseLeave:Te?Jl:void 0,showFixedNumberOfWeeks:typeof Kl<"u"?Kl:Yi,showNeighboringMonth:Y,showWeekNumbers:G},Dn));default:throw new Error("Invalid view: ".concat(Be,"."))}}function Wh(){return j?d.jsx(MX,{activeStartDate:Lt,drillUp:Xl,formatMonthYear:m,formatYear:x,locale:P,maxDate:M,minDate:I,navigationAriaLabel:R,navigationAriaLive:$,navigationLabel:H,next2AriaLabel:q,next2Label:ee,nextAriaLabel:z,nextLabel:X,prev2AriaLabel:Nn,prev2Label:Wn,prevAriaLabel:re,prevLabel:Fe,setActiveStartDate:pi,showDoubleView:Yi,view:Be,views:qn}):null}var Zl=Array.isArray(pt)?pt:[pt];return d.jsxs("div",{className:Km(Kd,Te&&Zl.length===1&&"".concat(Kd,"--selectRange"),Yi&&"".concat(Kd,"--doubleView"),o),ref:E,children:[Wh(),d.jsxs("div",{className:"".concat(Kd,"__viewContainer"),onBlur:Te?Jl:void 0,onMouseLeave:Te?Jl:void 0,children:[lo(),Yi?lo(!0):null]})]})});let Yd;const mJ=new Uint8Array(16);function gJ(){if(!Yd&&(Yd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Yd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yd(mJ)}const qt=[];for(let t=0;t<256;++t)qt.push((t+256).toString(16).slice(1));function yJ(t,e=0){return qt[t[e+0]]+qt[t[e+1]]+qt[t[e+2]]+qt[t[e+3]]+"-"+qt[t[e+4]]+qt[t[e+5]]+"-"+qt[t[e+6]]+qt[t[e+7]]+"-"+qt[t[e+8]]+qt[t[e+9]]+"-"+qt[t[e+10]]+qt[t[e+11]]+qt[t[e+12]]+qt[t[e+13]]+qt[t[e+14]]+qt[t[e+15]]}const vJ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),GC={randomUUID:vJ};function cb(t,e,n){if(GC.randomUUID&&!t)return GC.randomUUID();t=t||{};const r=t.random||(t.rng||gJ)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,yJ(r)}function _J({clientId:t}){const{register:e,handleSubmit:n,reset:r,formState:{errors:i}}=Wl(),[s,o]=O.useState(!1),[a,l]=O.useState(0),c=async p=>{o(!0),l(0);const m=Array.from(p.photos);if(m.length===0){alert("Per favore, seleziona almeno una foto."),o(!1);return}try{const y=await Promise.all(m.map(_=>new Promise((x,v)=>{const w=`${cb()}-${_.name}`,E=El(k$,`clients/${t}/checks/${w}`),P=x$(E,_);P.on("state_changed",C=>{const M=C.bytesTransferred/C.totalBytes*100;l(M)},C=>v(C),async()=>{const C=await Im(P.snapshot.ref);x(C)})})));await km(bt(ae,"clients",t,"checks"),{notes:p.notes,photoURLs:y,createdAt:gn()}),r()}catch(y){console.error("Errore nel processo di salvataggio del check:",y),alert("Si è verificato un errore durante il salvataggio.")}finally{o(!1),l(0)}},u="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary transition-all",f="block mb-1 text-sm font-medium text-muted";return d.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[d.jsxs("h3",{className:"text-xl font-semibold mb-4 text-primary flex items-center gap-2",children:[d.jsx(H$,{})," Nuovo Check"]}),d.jsxs("form",{onSubmit:n(c),className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"notes",className:f,children:"Note sui progressi"}),d.jsx("textarea",{id:"notes",...e("notes"),rows:"4",className:u,placeholder:"Es. Aumento carichi, sensazioni, misure..."})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"photos",className:f,children:"Foto Progressi"}),d.jsx("input",{id:"photos",type:"file",multiple:!0,accept:"image/png, image/jpeg, image/webp",...e("photos",{required:"Le foto sono obbligatorie."}),className:"w-full text-sm text-muted file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary/20 file:text-primary hover:file:bg-primary/30"}),i.photos&&d.jsx("p",{className:"text-red-400 text-xs mt-1",children:i.photos.message})]}),s&&d.jsx("div",{className:"w-full bg-background rounded-full h-2.5",children:d.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${a}%`}})}),d.jsx("div",{className:"flex justify-end",children:d.jsx("button",{type:"submit",disabled:s,className:"px-5 py-2.5 bg-primary hover:bg-primary/80 text-white rounded-lg transition disabled:opacity-50 font-semibold",children:s?`Caricamento... ${Math.round(a)}%`:"Salva Check"})})]})]})}function xJ({clientId:t,onSave:e}){const{register:n,handleSubmit:r,formState:{isSubmitting:i,errors:s}}=Wl(),[o,a]=O.useState(""),[l,c]=O.useState(!1),u=async _=>{a(""),c(!1);try{const x=Oe(ae,"clients",t,"anamnesi","initial");await Os(x,{..._,createdAt:gn()}),a("Anamnesi salvata con successo!"),setTimeout(e,1500)}catch(x){console.error("Errore nel salvataggio dell'anamnesi:",x),a("Si è verificato un errore. Riprova."),c(!0)}},f="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",p="block mb-1 text-sm font-medium text-muted",m="bg-card p-4 rounded-lg border border-white/10",y="font-semibold mb-3 text-lg text-primary";return d.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},children:[d.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Compila Anamnesi Iniziale"}),d.jsxs("form",{onSubmit:r(u),className:"space-y-6",children:[d.jsxs("div",{className:m,children:[d.jsx("h4",{className:y,children:"Dati Anagrafici e Misure"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Nome*"}),d.jsx("input",{...n("firstName",{required:!0}),className:f})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Cognome*"}),d.jsx("input",{...n("lastName",{required:!0}),className:f})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Data di Nascita*"}),d.jsx("input",{type:"date",...n("birthDate",{required:!0}),className:f+" text-muted"})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Che lavoro fai?*"}),d.jsx("input",{...n("job",{required:!0}),className:f,placeholder:"Es. Impiegato, operaio..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Peso (kg)*"}),d.jsx("input",{type:"number",step:"0.1",...n("weight",{required:!0}),className:f,placeholder:"Es. 75.5"})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Altezza (cm)*"}),d.jsx("input",{type:"number",...n("height",{required:!0}),className:f,placeholder:"Es. 180"})]})]})]}),d.jsxs("div",{className:m,children:[d.jsx("h4",{className:y,children:"Abitudini Alimentari"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Quanti pasti riesci a fare al giorno?*"}),d.jsxs("select",{...n("mealsPerDay",{required:!0}),className:f,children:[d.jsx("option",{value:"3",children:"3"}),d.jsx("option",{value:"4",children:"4"}),d.jsx("option",{value:"5",children:"5"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Colazione: Dolce o Salata?*"}),d.jsxs("select",{...n("breakfastType",{required:!0}),className:f,children:[d.jsx("option",{value:"dolce",children:"Dolce"}),d.jsx("option",{value:"salato",children:"Salato"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Scrivimi una lista di alimenti da inserire nella settimana*"}),d.jsx("textarea",{...n("desiredFoods",{required:!0}),rows:"3",className:f,placeholder:"Elenca qui gli alimenti che preferisci..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Cosa non mangi?*"}),d.jsx("textarea",{...n("dislikedFoods",{required:!0}),rows:"2",className:f,placeholder:"Elenca qui gli alimenti da evitare..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Hai intolleranze?*"}),d.jsx("input",{...n("intolerances",{required:!0}),className:f,placeholder:"Es. Lattosio, glutine, nessuna..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Hai problemi di digestione o gonfiore?*"}),d.jsx("input",{...n("digestionIssues",{required:!0}),className:f,placeholder:"Sì/No, e se sì quali..."})]})]})]}),d.jsxs("div",{className:m,children:[d.jsx("h4",{className:y,children:"Allenamento"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Quanti allenamenti a settimana?*"}),d.jsx("input",{type:"number",...n("workoutsPerWeek",{required:!0}),className:f,placeholder:"Es. 3"})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Specialità, dove ti alleni e con quali attrezzi?*"}),d.jsx("textarea",{...n("trainingDetails",{required:!0}),rows:"3",className:f,placeholder:"Es. Bodybuilding in palestra, a casa con manubri e panca..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"A che ora e per quanto tempo ti alleni?*"}),d.jsx("input",{...n("trainingTime",{required:!0}),className:f,placeholder:"Es. La sera dalle 18 alle 19:30"})]})]})]}),d.jsxs("div",{className:m,children:[d.jsx("h4",{className:y,children:"Salute e Obiettivi"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Infortuni o problematiche posturali/articolari?*"}),d.jsx("textarea",{...n("injuries",{required:!0}),rows:"3",className:f,placeholder:"Es. Mal di schiena, ernie, sciatalgie..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Prendi farmaci?*"}),d.jsx("input",{...n("medications",{required:!0}),className:f,placeholder:"Sì/No, e se sì quali..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Usi integratori? (se sì, quali)*"}),d.jsx("input",{...n("supplements",{required:!0}),className:f,placeholder:"Sì/No, e se sì quali..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Scrivimi il tuo obiettivo*"}),d.jsx("textarea",{...n("mainGoal",{required:!0}),rows:"3",className:f,placeholder:"Descrivi in dettaglio l'obiettivo che vuoi raggiungere..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Durata percorso scelto?*"}),d.jsx("input",{...n("programDuration",{required:!0}),className:f,placeholder:"Es. 3 mesi, 6 mesi..."})]})]})]}),d.jsx("div",{className:"bg-primary/10 p-4 rounded-lg border border-primary/30 text-center",children:d.jsx("p",{className:"text-sm text-primary",children:"Ricorda di richiedere al cliente le 4 foto per il check iniziale (frontale, laterali, posteriore)."})}),o&&d.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 text-sm ${l?"bg-red-900/50 text-red-300":"bg-green-900/50 text-green-300"}`,children:[l?d.jsx(O$,{}):d.jsx(Xx,{}),o]}),d.jsx("div",{className:"flex justify-end pt-2",children:d.jsxs("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-5 py-2.5 bg-primary hover:bg-primary/80 text-white rounded-lg transition disabled:opacity-50 font-semibold",children:[d.jsx(Pm,{})," ",i?"Salvataggio...":"Salva Anamnesi"]})})]})]})}const YC=t=>{if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e};function wJ({clientId:t}){const{register:e,handleSubmit:n,reset:r,formState:{isSubmitting:i}}=Wl(),[s,o]=O.useState([]),[a,l]=O.useState(!1);O.useEffect(()=>{const m=Pr(bt(ae,"clients",t,"payments"),zs("paymentDate","desc")),y=Tt(m,_=>{o(_.docs.map(x=>({id:x.id,...x.data()})))});return()=>y()},[t]);const c=async m=>{const y=parseInt(m.duration,10),_=Bx(ae),x=Oe(bt(ae,"clients",t,"payments"));_.set(x,{amount:parseFloat(m.amount),duration:`${y} mes${y>1?"i":"e"}`,paymentMethod:m.paymentMethod,paymentDate:gn()});const v=Oe(ae,"clients",t),E=(await Wi(v)).data();let P=YC(E.scadenza);(!P||P<new Date)&&(P=new Date);const C=new Date(P);C.setMonth(C.getMonth()+y),_.update(v,{scadenza:C}),await _.commit(),r(),l(!1)},u=async m=>{if(window.confirm("Sei sicuro di voler eliminare questo pagamento? L'operazione non è reversibile."))try{const y=Oe(ae,"clients",t,"payments",m);await Sm(y)}catch(y){console.error("Errore nell'eliminazione del pagamento:",y),alert("Si è verificato un errore.")}},f="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",p="block mb-1 text-sm font-medium text-muted";return d.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsxs("h3",{className:"text-xl font-semibold text-primary flex items-center gap-2",children:[d.jsx(la,{})," Gestione Pagamenti"]}),d.jsxs("button",{onClick:()=>l(!a),className:"flex items-center gap-2 px-3 py-1.5 bg-primary/20 hover:bg-primary/30 text-primary rounded-lg text-sm",children:[a?d.jsx(Nm,{}):d.jsx(Am,{})," ",a?"Annulla":"Aggiungi Rinnovo"]})]}),d.jsx(ca,{children:a&&d.jsxs(We.form,{onSubmit:n(c),className:"space-y-4 mb-6 pt-4 border-t border-white/10",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Importo Pagato (€)*"}),d.jsx("input",{type:"number",step:"0.01",...e("amount",{required:!0}),className:f})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Durata Rinnovo (mesi)*"}),d.jsx("select",{...e("duration",{required:!0}),className:f,children:[...Array(24).keys()].map(m=>d.jsxs("option",{value:m+1,children:[m+1," mes",m>0?"i":"e"]},m+1))})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:p,children:"Metodo di Pagamento"}),d.jsx("input",{...e("paymentMethod"),className:f,placeholder:"Es. Bonifico, Contanti"})]})]}),d.jsx("div",{className:"flex justify-end",children:d.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-primary text-white rounded-lg font-semibold transition disabled:opacity-50",children:i?"Salvataggio...":"Salva Pagamento"})})]})}),d.jsx("h4",{className:"font-semibold mb-3 mt-4",children:"Cronologia Rinnovi"}),d.jsx("div",{className:"space-y-2",children:s.length>0?s.map(m=>{var y;return d.jsxs("div",{className:"flex justify-between items-center p-3 bg-background rounded-md border border-white/10",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Qx,{className:"text-muted"}),d.jsxs("div",{children:[d.jsxs("p",{className:"font-semibold",children:[m.duration," - €",m.amount.toFixed(2)]}),d.jsxs("p",{className:"text-xs text-muted",children:["Pagato il ",(y=YC(m.paymentDate))==null?void 0:y.toLocaleDateString("it-IT"),m.paymentMethod&&` via ${m.paymentMethod}`]})]})]}),d.jsx("button",{onClick:()=>u(m.id),className:"p-1.5 text-red-500/50 hover:text-red-500 rounded-md transition-colors",children:d.jsx(Rm,{size:16})})]},m.id)}):d.jsx("p",{className:"text-sm text-muted",children:"Nessun pagamento registrato."})})]})}const bJ=`
.react-calendar { width: 100%; background: #1f2937; border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 1rem; }
.react-calendar__tile, .react-calendar__month-view__weekdays__weekday { color: white; }
.react-calendar__navigation button { color: #22d3ee; font-weight: bold; }
.react-calendar__tile--now { background: #374151; border-radius: 0.5rem; }
.react-calendar__tile--active { background: #0891b2; border-radius: 0.5rem; }
.react-calendar__tile:enabled:hover, .react-calendar__tile:enabled:focus { background: #4b5563; border-radius: 0.5rem; }
.check-day-highlight { background-color: rgba(34, 197, 94, 0.5); border-radius: 50%; }
`;function Rl(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const TJ=({urls:t})=>!t||Object.keys(t).length===0?d.jsx("p",{className:"text-muted italic",children:"Nessuna foto caricata."}):d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-white/10",children:["front","right","left","back"].map(e=>{const n=t[e],r=e==="front"?"Frontale":e==="back"?"Posteriore":`Laterale ${e==="left"?"Sinistro":"Destro"}`;return d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-muted mb-1",children:r}),n?d.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:d.jsx("img",{src:n,alt:r,className:"rounded-lg w-full h-auto object-cover border border-white/20"})}):d.jsx("div",{className:"flex justify-center items-center w-full h-24 bg-background/50 rounded-lg text-gray-500 text-xs",children:"N/D"})]},e)})}),EJ=({clientId:t})=>{var l;const[e,n]=O.useState(null),[r,i]=O.useState(!0),[s,o]=O.useState({}),a=Nh();if(O.useEffect(()=>{const c=Tt(Oe(ae,"clients",t,"anamnesi","initial"),async u=>{if(i(!0),u.exists()){const f=u.data();if(n(f),f.photoPaths){const p={};await Promise.all(Object.entries(f.photoPaths).map(async([m,y])=>{try{const _=await Im(El(a,y));p[m]=_}catch(_){console.error(`Errore nel caricamento URL per ${m}:`,_)}})),o(p)}else o({})}else n(null),o({});i(!1)});return()=>c()},[t,a]),r)return d.jsx("p",{className:"text-muted text-center p-4",children:"Caricamento..."});if(e){const{photoPaths:c,submittedAt:u,...f}=e;return d.jsxs(We.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[d.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[d.jsx("h3",{className:"text-xl font-semibold text-primary mb-4",children:"Dati Anamnesi"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(f).map(([p,m])=>{var v;const _=m&&typeof m.toDate=="function"?(v=Rl(m))==null?void 0:v.toLocaleDateString("it-IT"):String(m),x=p.replace(/([A-Z])/g," $1").replace(/_/g," ").trim();return d.jsxs("div",{className:"pb-2",children:[d.jsx("h4",{className:"font-semibold text-muted capitalize text-sm",children:x}),d.jsx("p",{className:"text-foreground whitespace-pre-wrap mt-1",children:_||"N/D"})]},p)})}),u&&d.jsxs("p",{className:"text-xs text-muted mt-4 pt-4 border-t border-white/10",children:["Compilato il: ",(l=Rl(u))==null?void 0:l.toLocaleString("it-IT")]})]}),d.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[d.jsx("h3",{className:"text-xl font-semibold text-primary mb-4",children:"Foto Iniziali"}),d.jsx(TJ,{urls:s})]})]})}return d.jsx(xJ,{clientId:t,onSave:()=>{}})},SJ=({check:t,clientId:e})=>{var m,y;const[n,r]=O.useState(!1),[i,s]=O.useState(t.coachNotes||""),[o,a]=O.useState(!1),[l,c]=O.useState(!1),u=Nh(),f=async()=>{a(!0);try{await qu(Oe(ae,"clients",e,"checks",t.id),{coachNotes:i})}finally{a(!1)}},p=async()=>{var _;if(window.confirm("Sei sicuro di voler eliminare questo check?")){c(!0);try{((_=t.photoURLs)==null?void 0:_.length)>0&&await Promise.all(t.photoURLs.map(x=>{try{const v=x.split("?")[0].split("o/")[1],w=El(u,decodeURIComponent(v));return w$(w)}catch(v){return console.warn("Impossibile eliminare l'immagine dallo Storage. Proseguo con l'eliminazione del documento:",v),Promise.resolve()}})),await Sm(Oe(ae,"clients",e,"checks",t.id))}catch(x){console.error("Errore eliminazione:",x),alert("Errore durante l'eliminazione."),c(!1)}}};return d.jsxs("div",{className:"bg-card rounded-lg border border-white/10 overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-center p-4",children:[d.jsxs("button",{onClick:()=>r(!n),className:"flex-1 flex justify-between items-center text-left",children:[d.jsxs("span",{className:"font-semibold",children:["Check del ",((m=Rl(t.createdAt))==null?void 0:m.toLocaleDateString("it-IT"))||"Data Sconosciuta"]}),d.jsx(We.div,{animate:{rotate:n?180:0},children:d.jsx(aD,{})})]}),d.jsx("button",{onClick:p,disabled:l,className:"ml-4 p-1.5 text-red-500/60 hover:text-red-500 rounded-md",title:"Elimina Check",children:d.jsx(Rm,{size:14})})]}),d.jsx(ca,{children:n&&d.jsx(We.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-4 pb-4",children:d.jsxs("div",{className:"pt-4 border-t border-white/20 space-y-4",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-muted mb-2",children:"Note del cliente:"}),d.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:t.notes||"-"})]}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:(y=t.photoURLs)==null?void 0:y.map((_,x)=>d.jsx("a",{href:_,target:"_blank",rel:"noopener noreferrer",children:d.jsx("img",{src:_,alt:`Foto ${x+1}`,className:"rounded-md aspect-square object-cover"})},x))}),d.jsxs("div",{className:"pt-4 border-t border-white/20",children:[d.jsxs("h4",{className:"text-sm font-semibold text-muted mb-2 flex items-center gap-2",children:[d.jsx(lD,{})," Feedback:"]}),d.jsx("textarea",{value:i,onChange:_=>s(_.target.value),rows:"3",className:"w-full p-2 bg-background rounded-lg border border-white/10",placeholder:"Scrivi qui il tuo feedback..."}),d.jsx("div",{className:"flex justify-end mt-2",children:d.jsx("button",{onClick:f,disabled:o,className:"px-3 py-1.5 bg-primary text-white text-xs font-semibold rounded-lg",children:o?"Salvo...":"Salva"})})]})]})})})]})},kJ=({clientId:t})=>{const[e,n]=O.useState([]),[r,i]=O.useState(!0),[s,o]=O.useState(null),[a,l]=O.useState(null),[c,u]=O.useState(!1);O.useEffect(()=>{const m=Pr(bt(ae,"clients",t,"checks"),zs("createdAt","desc")),y=Tt(m,_=>{const x=_.docs.map(v=>({id:v.id,...v.data()})).filter(v=>v.createdAt);n(x),i(!1),o(null)},_=>{console.error("Errore nel caricamento dei checks:",_),o("Impossibile caricare i check. Controlla i permessi di Firestore."),i(!1)});return()=>y()},[t]);const f=({date:m,view:y})=>{if(y==="month"&&e.some(x=>{var v;return((v=Rl(x.createdAt))==null?void 0:v.toDateString())===m.toDateString()}))return"check-day-highlight"},p=a?e.filter(m=>{var y;return((y=Rl(m.createdAt))==null?void 0:y.toDateString())===a.toDateString()}):e;return d.jsxs(d.Fragment,{children:[d.jsx(ca,{children:c&&d.jsx(We.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-center z-50 p-4",onClick:()=>u(!1),children:d.jsxs(We.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-2xl relative",onClick:m=>m.stopPropagation(),children:[d.jsx("button",{onClick:()=>u(!1),className:"absolute -top-2 -right-2 bg-card rounded-full p-1.5 text-muted hover:text-white z-10",children:d.jsx(Nm,{})}),d.jsx(_J,{clientId:t})]})})}),d.jsxs("div",{className:"pt-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-xl font-semibold",children:"Cronologia Check"}),d.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-primary hover:bg-primary/80 text-white text-sm font-semibold rounded-lg transition",children:[d.jsx(Am,{})," Crea Check"]})]}),r?d.jsx("p",{className:"text-muted",children:"Caricamento..."}):s?d.jsxs("div",{className:"text-center text-red-400 p-4 bg-red-900/50 rounded-lg border border-red-500/50",children:[d.jsxs("p",{children:["ERRORE: ",s]}),d.jsx("p",{className:"text-xs mt-2",children:"Controlla la console del browser per i dettagli tecnici."})]}):d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"lg:col-span-1",children:[e.length>0?d.jsx(_M,{onChange:l,value:a,tileClassName:f}):d.jsx("div",{className:"h-64 flex justify-center items-center bg-card rounded-xl border border-white/10",children:d.jsx("p",{className:"text-muted",children:"Aggiungi il primo check!"})}),a&&d.jsx("button",{onClick:()=>l(null),className:"w-full text-center text-primary text-sm mt-2 p-2 bg-card rounded-lg border border-white/10 hover:bg-white/10",children:"Mostra tutti i check"})]}),d.jsxs("div",{className:"lg:col-span-2",children:[d.jsx("h4",{className:"font-semibold text-muted mb-2",children:a?`Check del ${a.toLocaleDateString("it-IT")}`:"Tutti i check"}),p.length>0?d.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:p.map(m=>d.jsx(SJ,{check:m,clientId:t},m.id))}):d.jsx("div",{className:"text-center text-muted p-4 bg-card rounded-lg border border-white/10",children:d.jsx("p",{children:a?"Nessun check trovato per questa data.":"Nessun check trovato."})})]})]})]})]})};function CJ(){var _;const{clientId:t}=vP(),e=Wt(),n=Ki(),[r,i]=O.useState(null),[s,o]=O.useState(!0),[a,l]=O.useState("anamnesi"),[c,u]=O.useState(!1),f=O.useCallback((x,v,w)=>`Ciao ${x},

Ecco le tue credenziali per accedere alla tua area riservata:

Email (Username): ${v}
Password Temporanea: ${w}
Link di accesso: https://mentalfitmanager.github.io/#/client-login

Ti consiglio di cambiare la password al primo accesso.
A presto!`,[]);O.useEffect(()=>{const x=new URLSearchParams(n.search).get("tab");x&&l(x)},[n.search]),O.useEffect(()=>{const x=Tt(Oe(ae,"clients",t),v=>{v.exists()?i({id:v.id,...v.data()}):e("/clients"),o(!1)});return()=>x()},[t,e]);const p=x=>{navigator.clipboard.writeText(x),u(!0),setTimeout(()=>u(!1),2e3)},m=()=>{if(r!=null&&r.tempPassword){const x=f(r.name,r.email,r.tempPassword);p(x)}};if(s)return d.jsx("div",{className:"text-center text-muted p-8",children:"Caricamento..."});if(!r)return null;const y=((_=Rl(r.createdAt))==null?void 0:_.toLocaleDateString("it-IT"))||"N/A";return d.jsxs(d.Fragment,{children:[d.jsx("style",{children:bJ}),d.jsxs("div",{className:"w-full",children:[d.jsxs(We.div,{className:"flex items-center justify-between mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold",children:r.name}),d.jsxs("p",{className:"text-muted",children:["Cliente dal: ",y]})]}),d.jsxs("button",{onClick:()=>e("/clients"),className:"flex items-center gap-2 px-3 py-1.5 bg-card hover:bg-white/10 rounded-lg text-sm text-muted border border-white/10",children:[d.jsx(Js,{})," Torna"]})]}),d.jsxs(We.div,{className:"bg-card p-6 rounded-xl border border-white/10 mb-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[d.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[d.jsx("div",{className:"bg-primary/20 text-primary p-3 rounded-full",children:d.jsx(fD,{size:24})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Profilo"}),d.jsx("p",{className:"text-muted",children:r.email}),r.phone&&d.jsx("p",{className:"text-muted",children:r.phone})]})]}),r.tempPassword&&d.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[d.jsxs("div",{className:"bg-background p-3 rounded-lg",children:[d.jsxs("p",{className:"text-xs text-muted flex items-center gap-1 mb-2",children:[d.jsx(jS,{size:12})," Messaggio di Benvenuto Pronto"]}),d.jsx("textarea",{readOnly:!0,value:f(r.name,r.email,r.tempPassword),className:"w-full p-2 bg-background border border-white/10 rounded-lg text-white font-mono text-xs resize-none h-40"}),d.jsxs("div",{className:"flex gap-2 mt-3",children:[d.jsx("button",{onClick:m,className:"flex-1 py-2 bg-primary/20 rounded-lg text-primary flex items-center justify-center gap-2 hover:bg-primary/30",children:c?d.jsxs(d.Fragment,{children:[d.jsx(oD,{})," Messaggio Copiato!"]}):d.jsxs(d.Fragment,{children:[d.jsx(V$,{})," Copia Messaggio"]})}),d.jsxs("a",{href:"https://mentalfitmanager.github.io/#/client-login",target:"_blank",rel:"noopener noreferrer",className:"py-2 px-4 bg-primary rounded-lg text-white flex items-center justify-center gap-2 hover:bg-primary/80 transition",children:[d.jsx(jS,{})," Accedi Cliente"]})]})]}),d.jsx("p",{className:"text-xs text-muted mt-2 text-center",children:"Questo messaggio non è più necessario una volta che il cliente ha cambiato password."})]})]}),d.jsxs("div",{className:"flex border-b border-white/10 mb-6",children:[d.jsxs("button",{onClick:()=>l("anamnesi"),className:`px-4 py-2 text-sm ${a==="anamnesi"?"border-b-2 border-primary text-white":"text-muted"}`,children:[d.jsx(Jx,{className:"inline mr-2"}),"Anamnesi"]}),d.jsxs("button",{onClick:()=>l("checks"),className:`px-4 py-2 text-sm ${a==="checks"?"border-b-2 border-primary text-white":"text-muted"}`,children:[d.jsx(bp,{className:"inline mr-2"}),"Checks"]}),d.jsxs("button",{onClick:()=>l("payments"),className:`px-4 py-2 text-sm ${a==="payments"?"border-b-2 border-primary text-white":"text-muted"}`,children:[d.jsx(la,{className:"inline mr-2"}),"Pagamenti"]})]}),d.jsxs("div",{children:[a==="anamnesi"&&d.jsx(EJ,{clientId:t}),a==="checks"&&d.jsx(kJ,{clientId:t}),a==="payments"&&d.jsx(wJ,{clientId:t})]})]})]})}const IJ=t=>{if(!t)return"";const e=typeof t.toDate=="function"?t.toDate():new Date(t);if(isNaN(e))return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${i}`};function AJ(){const t=Wt(),{clientId:e}=vP(),{register:n,handleSubmit:r,reset:i,formState:{isSubmitting:s}}=Wl(),[o,a]=O.useState(!0);O.useEffect(()=>{(async()=>{try{const p=Oe(ae,"clients",e),m=await Wi(p);if(m.exists()){const y=m.data();i({...y,endDate:IJ(y.endDate)})}else t("/clients")}catch(p){console.error("Errore nel caricamento del cliente:",p)}finally{a(!1)}})()},[e,i,t]);const l=async f=>{try{const p=Oe(ae,"clients",e);await qu(p,{...f,endDate:f.endDate?new Date(f.endDate):null}),t("/clients")}catch(p){console.error("Errore nell'aggiornamento del cliente: ",p),alert("Si è verificato un errore durante l'aggiornamento.")}},c="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",u="block mb-1 text-sm font-medium text-muted";return o?d.jsx("div",{className:"text-center p-8 text-muted",children:"Caricamento..."}):d.jsxs(We.div,{className:"w-full max-w-2xl mx-auto bg-card rounded-xl shadow border border-white/10 p-6",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Modifica Cliente"}),d.jsxs("button",{onClick:()=>t("/clients"),className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-lg text-sm text-muted",children:[d.jsx(Js,{})," Annulla"]})]}),d.jsxs("form",{onSubmit:r(l),className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:u,children:"Nome e Cognome"}),d.jsx("input",{...n("name",{required:!0}),className:c})]}),d.jsxs("div",{children:[d.jsx("label",{className:u,children:"Email"}),d.jsx("input",{type:"email",...n("email",{required:!0}),className:c})]}),d.jsxs("div",{children:[d.jsx("label",{className:u,children:"Telefono (Opzionale)"}),d.jsx("input",{...n("phone"),className:c})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-white/10",children:[d.jsxs("div",{children:[d.jsx("label",{className:u,children:"Stato Cliente"}),d.jsxs("select",{...n("status"),className:c,children:[d.jsx("option",{value:"attivo",children:"Attivo"}),d.jsx("option",{value:"in prova",children:"In Prova"}),d.jsx("option",{value:"sospeso",children:"Sospeso"}),d.jsx("option",{value:"scaduto",children:"Scaduto"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:u,children:"Data Scadenza Attuale"}),d.jsx("input",{type:"date",...n("endDate"),className:c+" text-muted"})]})]}),d.jsx("div",{className:"flex justify-end pt-4",children:d.jsxs("button",{type:"submit",disabled:s,className:"flex items-center gap-2 px-5 py-2.5 bg-primary hover:bg-primary/80 text-white rounded-lg",children:[d.jsx(Pm,{})," ",s?"Salvataggio...":"Salva Modifiche"]})})]})]})}function br(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const QC=t=>{const e=br(t);if(!e)return"na";const r=Math.ceil((e-new Date)/(1e3*60*60*24));return r<0?"expired":r<=15?"expiring":"paid"},Qd=({title:t,icon:e,items:n,navigate:r,tab:i,onDismiss:s})=>d.jsxs("div",{className:"bg-card p-4 rounded-lg border border-white/10 flex-1 min-w-[280px]",children:[d.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e," ",t]}),d.jsx("div",{className:"space-y-2",children:d.jsx(ca,{children:n.length>0?n.map((o,a)=>{var l;return d.jsxs(We.div,{layout:!0,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10,transition:{duration:.2}},className:"group flex items-center justify-between p-2 rounded-md hover:bg-white/5",children:[d.jsxs("button",{className:"flex-1 text-left",onClick:()=>r(`/client/${o.clientId}?tab=${i}`),children:[d.jsx("p",{className:"font-medium text-sm",children:o.clientName}),d.jsxs("p",{className:"text-xs text-muted",children:[(l=br(o.date))==null?void 0:l.toLocaleDateString("it-IT",{day:"numeric",month:"long"}),o.scadenza&&d.jsx("span",{className:"text-red-400 ml-2 font-bold",children:`(Scad. ${br(o.scadenza).toLocaleDateString("it-IT")})`})]})]}),d.jsx("button",{onClick:()=>s(o.id),className:"p-1 rounded-full opacity-0 group-hover:opacity-60 hover:!opacity-100 hover:bg-white/10 transition-opacity",title:"Archivia notifica",children:d.jsx(Nm,{size:14})})]},o.id)}):d.jsx("p",{className:"text-sm text-muted px-2",children:"Nessun aggiornamento recente."})})})]});function PJ(){const t=Wt(),[e,n]=O.useState([]),[r,i]=O.useState([]),[s,o]=O.useState([]),[a,l]=O.useState([]);O.useEffect(()=>{const v=Tt(bt(ae,"clients"),w=>{n(w.docs.map(E=>({id:E.id,...E.data()})))});return()=>v()},[]);const c=O.useMemo(()=>e.reduce((v,w)=>(v[w.id]=w.name,v),{}),[e]);O.useEffect(()=>{if(Object.keys(c).length===0)return;const v=Pr(iu(ae,"checks"),Jv(30)),w=Tt(v,C=>{const M=C.docs.map(S=>{const b=S.ref.path.split("/")[1];return{id:S.id,clientId:b,clientName:c[b],date:S.data().createdAt}}).filter(S=>S.clientName);M.sort((S,b)=>(br(b.date)||0)-(br(S.date)||0)),i(M.slice(0,10))}),E=Pr(iu(ae,"anamnesi"),Jv(30)),P=Tt(E,C=>{const M=C.docs.map(S=>{const b=S.ref.path.split("/")[1];return{id:S.id,clientId:b,clientName:c[b],date:S.data().submittedAt||S.data().createdAt}}).filter(S=>S.clientName);M.sort((S,b)=>(br(b.date)||0)-(br(S.date)||0)),o(M.slice(0,10))});return()=>{w(),P()}},[c]);const u=O.useMemo(()=>[...e].sort((v,w)=>(br(w.createdAt)||0)-(br(v.createdAt)||0)).slice(0,5).map(v=>({id:v.id,clientId:v.id,clientName:v.name,date:v.createdAt})),[e]),f=O.useMemo(()=>e.filter(v=>QC(v.scadenza)==="expiring"||QC(v.scadenza)==="expired").sort((v,w)=>(br(v.scadenza)||0)-(br(w.scadenza)||0)).map(v=>({id:v.id,clientId:v.id,clientName:v.name,date:v.scadenza,scadenza:v.scadenza})),[e]),p=v=>{l(w=>[...w,v])},m=u.filter(v=>!a.includes(v.id)),y=f.filter(v=>!a.includes(v.id)),_=r.filter(v=>!a.includes(v.id)),x=s.filter(v=>!a.includes(v.id));return d.jsxs("div",{className:"w-full",children:[d.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Ultimi Aggiornamenti"}),d.jsxs("div",{className:"flex flex-col md:flex-row gap-6 overflow-x-auto pb-4",children:[" ",d.jsx(Qd,{title:"In Scadenza",icon:d.jsx(la,{className:"text-red-400"}),items:y,navigate:t,tab:"payments",onDismiss:p}),d.jsx(Qd,{title:"Clienti Nuovi",icon:d.jsx(q$,{className:"text-primary"}),items:m,navigate:t,tab:"anamnesi",onDismiss:p}),d.jsx(Qd,{title:"Check Nuovi",icon:d.jsx(bp,{className:"text-green-400"}),items:_,navigate:t,tab:"checks",onDismiss:p}),d.jsx(Qd,{title:"Anamnesi Nuove",icon:d.jsx(Jx,{className:"text-yellow-400"}),items:x,navigate:t,tab:"anamnesi",onDismiss:p})]})]})}const Ia=["QwWST9OVOlTOi5oheyCqfpXLOLg2","3j0AXIRa4XdHq1ywCl4UBxJNsku2","AeZKjJYu5zMZ4mvffaGiqCBb0cF2"],RJ=Ia.reduce((t,e)=>({...t,[e]:"Coach"}),{}),XC=()=>d.jsx("div",{className:"flex justify-center items-center h-full p-4",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}),NJ=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(null),[i,s]=O.useState([]),[o,a]=O.useState(""),[l,c]=O.useState(!0),[u,f]=O.useState(!1),[p,m]=O.useState(""),[y,_]=O.useState([]),[x,v]=O.useState(!1),w=O.useRef(null),P=ui().currentUser,C=P==null?void 0:P.uid;O.useEffect(()=>{const A=bt(ae,"chats"),R=Pr(A,zs("lastUpdate","desc")),$=Tt(R,H=>{const q=H.docs.map(ee=>({id:ee.id,...ee.data()}));e(q),c(!1)},H=>{console.error("Errore nel caricare le chat:",H),c(!1)});return()=>$()},[]),O.useEffect(()=>{if(!n){s([]);return}f(!0);const A=bt(ae,"chats",n,"messages"),R=Pr(A,zs("createdAt")),$=Tt(R,H=>{s(H.docs.map(q=>({id:q.id,...q.data()}))),f(!1)},H=>{console.error("Errore nel caricare i messaggi:",H),f(!1)});return()=>$()},[n]),O.useEffect(()=>{if(!n||!C)return;const A=t.find(R=>R.id===n);if(A&&A.lastMessageSenderId&&!Ia.includes(A.lastMessageSenderId)){const R=Oe(ae,"chats",n);Os(R,{lastMessageSenderId:C},{merge:!0}).catch($=>{console.error("Errore nell'azzeramento contatore chat:",$)})}},[n,C,t]),O.useEffect(()=>{var A;(A=w.current)==null||A.scrollIntoView({behavior:"smooth"})},[i]),O.useEffect(()=>{const A=async()=>{if(p.trim().length<2){_([]),v(!1);return}v(!0);const $=bt(ae,"clients"),H=p.toLowerCase(),q=Pr($,bS("name_lowercase",">=",H),bS("name_lowercase","<=",H+""),Jv(10));try{const ee=await SS(q);_(ee.docs.map(z=>({id:z.id,...z.data()})))}catch(ee){console.error("Errore nella ricerca (potrebbe mancare un indice in Firestore):",ee)}v(!1)},R=setTimeout(()=>{A()},300);return()=>clearTimeout(R)},[p]);const M=async A=>{if(!C)return;const R=Ia[0],H=[A.id,R].sort().join("_");if(!t.find(ee=>ee.id===H)){const ee=Oe(ae,"chats",H),z=[A.id,...Ia],X={...RJ,[A.id]:A.name};await Os(ee,{participants:z,participantNames:X,lastMessage:"Conversazione avviata",lastUpdate:gn(),createdAt:gn()})}r(H),m(""),_([])},S=async A=>{if(A.preventDefault(),o.trim()===""||!n||!C){console.error("Invio messaggio fallito: Campi mancanti o Admin non autenticato.");return}const R=bt(ae,"chats",n,"messages");try{await km(R,{text:o,createdAt:gn(),senderId:C});const $=Oe(ae,"chats",n);await Os($,{lastMessage:o,lastUpdate:gn(),lastMessageSenderId:C},{merge:!0}),a("")}catch($){console.error("ERRORE FIREBASE DURANTE L'INVIO DEL MESSAGGIO:",$)}},b=async()=>{if(n&&window.confirm("SEI SICURO? Questa azione eliminerà la chat e tutti i messaggi definitivamente."))try{const A=bt(ae,"chats",n,"messages"),R=await SS(A),$=Bx(ae);R.docs.forEach(q=>{$.delete(q.ref)}),await $.commit();const H=Oe(ae,"chats",n);await Sm(H),r(null),s([]),console.log(`Chat ${n} eliminata con successo.`)}catch(A){console.error("ERRORE NELL'ELIMINAZIONE DELLA CHAT:",A),alert("Errore durante l'eliminazione della chat. Controlla i permessi di scrittura in Firestore.")}},k=t.find(A=>A.id===n),I=k==null?void 0:k.participants.find(A=>!Ia.includes(A)),D=k?k.participantNames[I]||"Cliente":"Chat";return d.jsxs("div",{className:"flex h-[calc(100vh-120px)] bg-card/60 backdrop-blur-lg rounded-xl border border-white/10 overflow-hidden",children:[d.jsxs("div",{className:"w-full md:w-1/3 border-r border-white/10 flex flex-col",children:[d.jsx("div",{className:"p-4 border-b border-white/10 flex-shrink-0",children:d.jsxs("div",{className:"relative",children:[d.jsx(dD,{className:"absolute top-1/2 left-3 -translate-y-1/2 text-muted"}),d.jsx("input",{type:"text",placeholder:"Cerca o avvia una chat...",value:p,onChange:A=>m(A.target.value),className:"w-full bg-background p-2 pl-9 rounded-lg border border-white/10 outline-none focus:ring-2 focus:ring-primary"})]})}),p.length>1?d.jsxs("div",{className:"flex-1 overflow-y-auto",children:[x&&d.jsx("p",{className:"p-4 text-muted text-sm",children:"Ricerca..."}),!x&&y.length===0&&d.jsx("p",{className:"p-4 text-muted text-sm",children:"Nessun cliente trovato."}),!x&&y.map(A=>d.jsxs("div",{onClick:()=>M(A),className:"p-4 cursor-pointer hover:bg-white/5",children:[d.jsx("p",{className:"font-semibold text-white",children:A.name}),d.jsx("p",{className:"text-sm text-muted",children:A.email})]},A.id))]}):d.jsx(d.Fragment,{children:l?d.jsx(XC,{}):d.jsx("div",{className:"flex-1 overflow-y-auto",children:t.map(A=>{const R=A.participants.find(q=>!Ia.includes(q)),$=A.participantNames?A.participantNames[R]:"Cliente",H=A.lastMessageSenderId===R;return d.jsxs("div",{onClick:()=>r(A.id),className:`p-4 cursor-pointer border-l-4 ${n===A.id?"bg-primary/20 border-primary":"border-transparent hover:bg-white/5"}`,children:[d.jsx("p",{className:`font-semibold ${H?"text-white":"text-muted"}`,children:$||"Cliente"}),d.jsx("p",{className:"text-sm text-muted truncate",children:A.lastMessage})]},A.id)})})})]}),d.jsx("div",{className:"w-full md:w-2/3 flex flex-col",children:n?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex-shrink-0 flex justify-between items-center",children:[d.jsx("h3",{className:"font-bold text-lg text-white",children:D}),d.jsx("button",{onClick:b,className:"text-red-500/80 hover:text-red-500 p-2 rounded-full transition-colors",title:"Elimina la conversazione",disabled:!n,children:d.jsx(Rm,{size:20})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[u?d.jsx(XC,{}):i.map(A=>d.jsx("div",{className:`flex ${A.senderId===C?"justify-end":"justify-start"}`,children:d.jsx("div",{className:`max-w-md p-3 rounded-2xl ${A.senderId===C?"bg-primary rounded-br-none":"bg-background rounded-bl-none"}`,children:d.jsx("p",{className:"text-white break-words",children:A.text})})},A.id)),d.jsx("div",{ref:w})]}),d.jsx("div",{className:"p-4 border-t border-white/10 flex-shrink-0",children:d.jsxs("form",{onSubmit:S,className:"flex items-center gap-4",children:[d.jsx("input",{type:"text",value:o,onChange:A=>a(A.target.value),placeholder:"Scrivi una risposta...",className:"flex-1 p-3 bg-background border border-white/10 rounded-full outline-none focus:ring-2 focus:ring-primary text-white"}),d.jsx("button",{type:"submit",className:"p-3 bg-primary hover:bg-primary/80 text-white rounded-full disabled:opacity-50",disabled:!o.trim()||!n,children:d.jsx(Zx,{size:20})})]})})]}):d.jsxs("div",{className:"flex flex-col justify-center items-center h-full text-muted",children:[d.jsx(Gu,{size:48}),d.jsx("p",{className:"mt-4",children:"Seleziona una conversazione o cercala per nome."})]})})]})},DJ=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(""),[i,s]=O.useState(""),o=Wt(),a=async l=>{l.preventDefault(),s("");try{const u=(await oR(Ku,t,n)).user,f=Oe(ae,"clients",u.uid),p=await Wi(f);if(p.exists()&&p.data().isClient===!0){sessionStorage.setItem("app_role","client");const m=p.data().firstLogin===!0;o(m?"/client/first-access":"/client/dashboard")}else s("Accesso non autorizzato. Area riservata ai clienti."),await Lu(Ku)}catch(c){s("Credenziali non valide. Riprova."),console.error("Errore di login:",c.message)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:d.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg backdrop-filter backdrop-blur-lg bg-opacity-50",children:[d.jsx("h2",{className:"text-3xl font-bold text-center text-cyan-400",children:"Accesso Area Clienti"}),d.jsx("p",{className:"text-center text-gray-300",children:"Usa le credenziali fornite dal tuo coach."}),d.jsxs("form",{onSubmit:a,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400",children:"Email"}),d.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:l=>e(l.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-400",children:"Password"}),d.jsx(Io,{to:"/client/forgot-password",className:"text-xs text-gray-400 hover:text-cyan-400 sm:hidden",children:"Password dimenticata?"})]}),d.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:l=>r(l.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),i&&d.jsx("p",{className:"text-red-500 text-sm text-center",children:i}),d.jsx("div",{children:d.jsx("button",{type:"submit",className:"w-full px-4 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500",children:"Accedi"})})]}),d.jsx("div",{className:"text-center hidden sm:block",children:d.jsx(Io,{to:"/client/forgot-password",className:"text-sm text-gray-400 hover:text-cyan-400 hover:underline",children:"Password dimenticata?"})})]})})},OJ=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(""),[i,s]=O.useState(""),[o,a]=O.useState(""),l=Wt(),u=ui().currentUser,f=async p=>{if(p.preventDefault(),s(""),a(""),!u){s("Utente non autenticato. Per favore, effettua nuovamente il login."),setTimeout(()=>l("/client-login"),3e3);return}if(t.length<6){s("La nuova password deve contenere almeno 6 caratteri.");return}if(t!==n){s("Le password non coincidono. Riprova.");return}try{await YU(u,t);const m=Oe(ae,"clients",u.uid);await qu(m,{firstLogin:!1}),a("Password aggiornata con successo! Sarai reindirizzato alla tua dashboard tra poco."),setTimeout(()=>{l("/client/dashboard")},3e3)}catch(m){s("Si è verificato un errore. Potrebbe essere necessario effettuare nuovamente il login prima di riprovare."),console.error("Errore durante l'aggiornamento della password:",m)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:d.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg",children:[d.jsx("h2",{className:"text-3xl font-bold text-center text-cyan-400",children:"Imposta la tua Password"}),d.jsx("p",{className:"text-center text-gray-300",children:"Per la tua sicurezza, scegli una password personale per i futuri accessi."}),d.jsxs("form",{onSubmit:f,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-400",children:"Nuova Password"}),d.jsx("input",{id:"new-password",type:"password",required:!0,value:t,onChange:p=>e(p.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-400",children:"Conferma Nuova Password"}),d.jsx("input",{id:"confirm-password",type:"password",required:!0,value:n,onChange:p=>r(p.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),i&&d.jsx("p",{className:"text-red-500 text-sm text-center",children:i}),o&&d.jsx("p",{className:"text-green-500 text-sm text-center",children:o}),d.jsx("div",{children:d.jsx("button",{type:"submit",className:"w-full px-4 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-700 disabled:opacity-50",disabled:!!o,children:o?"Reindirizzamento...":"Imposta Nuova Password"})})]})]})})},MJ=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"#22d3ee",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-8 h-8",children:[d.jsx("path",{d:"M12 2a10 10 0 0 0-7 3c-1.5 1.5-2 4.5-2 7a10 10 0 0 0 14 0c0-2.5.5-5.5 2-7a10 10 0 0 0-7-3z",fill:"rgba(34, 211, 238, 0.1)"}),d.jsx("circle",{cx:"9",cy:"11",r:"1.5",fill:"#22d3ee"}),d.jsx("circle",{cx:"15",cy:"13",r:"1.5",fill:"#22d3ee"}),d.jsx("path",{d:"M10.5 11.5 L13.5 12.5",stroke:"#22d3ee",strokeWidth:"2"})]}),jJ=()=>d.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),Ry=({title:t,value:e,subtext:n,icon:r})=>d.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:t}),d.jsx("div",{className:"text-cyan-400",children:r})]}),d.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:e}),d.jsx("p",{className:"text-sm text-gray-400 mt-1",children:n})]});function LJ(){const[t,e]=O.useState(null),[n,r]=O.useState(!0),[i,s]=O.useState("Da pianificare"),o=Wt(),a=ui(),l=a.currentUser;O.useEffect(()=>{if(!l){o("/client-login");return}const p=Oe(ae,"clients",l.uid),m=Tt(p,v=>{if(v.exists()){const w=v.data();if(w.firstLogin){o("/client/first-access",{replace:!0});return}e(w)}else console.error("Dati del cliente non trovati!"),Lu(a).then(()=>o("/client-login"));r(!1)}),y=bt(ae,`clients/${l.uid}/checks`),_=Pr(y,zs("createdAt","desc")),x=Tt(_,v=>{const w=v.docs.map(E=>E.data());if(w.length>0){const E=w[0].createdAt.toDate();let P=new Date(E.getTime());P.setDate(P.getDate()+7),s(P.toLocaleDateString("it-IT"))}else s("Invia il 1° check")});return()=>{m(),x()}},[l,o]);const c=()=>{Lu(a).then(()=>o("/client-login"))};if(n||t&&t.firstLogin)return d.jsx(jJ,{});if(!t)return d.jsx("p",{children:"Errore nel caricamento dei dati."});let u="N/D",f="Non impostata";if(t.scadenza&&t.scadenza.toDate){const p=t.scadenza.toDate(),m=new Date;p.setHours(0,0,0,0),m.setHours(0,0,0,0);const y=p-m;u=Math.ceil(y/(1e3*60*60*24)),f=p.toLocaleDateString("it-IT")}return d.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[d.jsxs("header",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx(MJ,{}),d.jsxs("div",{children:[d.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:["Ciao, ",t.name,"!"]}),d.jsx("p",{className:"text-gray-300",children:"Benvenuto nella tua area personale."})]})]}),d.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-3 py-2 bg-red-600/80 hover:bg-red-600 text-white text-sm font-semibold rounded-lg transition-colors",children:[d.jsx(uD,{}),d.jsx("span",{children:"Logout"})]})]}),d.jsxs("main",{children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[d.jsx(Ry,{title:"Scadenza Percorso",value:`${u} giorni`,subtext:`Scade il: ${f}`,icon:d.jsx(Qx,{size:24})}),d.jsx(Ry,{title:"Tipo Percorso",value:t.planType||"Non specificato",subtext:"Il tuo piano attuale",icon:d.jsx(iD,{size:24})}),d.jsx(Ry,{title:"Prossimo Check Consigliato",value:i,subtext:"Rimani costante!",icon:d.jsx(bp,{size:24})})]}),d.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",children:[d.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",children:"Cosa vuoi fare?"}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs(Io,{to:"/client/anamnesi",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[d.jsx(fD,{size:22})," La mia Anamnesi"]}),d.jsxs(Io,{to:"/client/checks",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[d.jsx(bp,{size:22})," I miei Check"]}),d.jsxs(Io,{to:"/client/payments",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[d.jsx(la,{size:22})," I miei Pagamenti"]}),d.jsxs(Io,{to:"/client/chat",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[d.jsx(Gu,{size:22})," Chatta con il Coach"]})]})]})]})]})}const VJ=()=>d.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),FJ=()=>{const[t,e]=O.useState(null),[n,r]=O.useState(!0),[i,s]=O.useState(!1),[o,a]=O.useState({front:null,right:null,left:null,back:null}),[l,c]=O.useState({front:null,right:null,left:null,back:null}),u=Wt(),p=ui().currentUser,m=Nh(),{register:y,handleSubmit:_,setValue:x,formState:{isSubmitting:v}}=Wl();O.useEffect(()=>{if(!p){u("/client-login");return}(async()=>{const A=Oe(ae,`clients/${p.uid}/anamnesi`,"initial"),R=await Wi(A);if(R.exists()){const $=R.data();if(e($),$.photoPaths){const H={};await Promise.all(Object.entries($.photoPaths).map(async([q,ee])=>{try{const z=await Im(El(m,ee));H[q]=z}catch(z){console.error(`Errore nel caricamento URL per ${q}:`,z)}})),c(H)}Object.keys($).forEach(H=>x(H,$[H])),s(!1)}else s(!0);r(!1)})()},[p,u,x]);const w=(D,A)=>{const R=D.target.files[0];R&&(a($=>({...$,[A]:R})),c($=>({...$,[A]:URL.createObjectURL(R)})))},E=async D=>{if(p){if(!t&&Object.values(o).some(A=>A===null)){alert("Per favore, carica tutte e 4 le foto iniziali.");return}r(!0);try{let A=(t==null?void 0:t.photoPaths)||{};const R=Object.entries(o).filter(([,q])=>q!==null);R.length>0&&(await Promise.all(R.map(async([ee,z])=>{const X=`clients/${p.uid}/anamnesi_photos/${ee}-${cb()}`,J=El(m,X);return await tD(J,z),{type:ee,path:X}}))).forEach(({type:ee,path:z})=>{A[ee]=z});const $=Oe(ae,`clients/${p.uid}/anamnesi`,"initial"),H={...D,photoPaths:A,submittedAt:gn()};await Os($,H,{merge:!0}),e(H),s(!1),alert("Anamnesi salvata con successo!"),a({front:null,right:null,left:null,back:null})}catch(A){console.error("Errore nel salvataggio:",A),alert("Si è verificato un errore.")}finally{r(!1)}}};if(n)return d.jsx(VJ,{});const P="w-full p-2 mt-1 bg-gray-700 border border-gray-600 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500",C="block text-sm font-medium text-gray-300",M="bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",S="font-semibold mb-4 text-lg text-cyan-400 border-b border-cyan-400/20 pb-2",b=({type:D,label:A})=>d.jsxs("div",{className:"text-center",children:[d.jsx("label",{className:C,children:A}),d.jsxs("div",{className:"mt-2 flex justify-center items-center w-full h-48 bg-gray-700/50 rounded-lg border-2 border-dashed border-gray-600 relative",children:[l[D]?d.jsx("img",{src:l[D],alt:"preview",className:"h-full w-full object-contain rounded-lg"}):d.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[d.jsx(sD,{size:40}),d.jsx("p",{className:"mt-2 text-sm",children:"Carica foto"})]}),d.jsx("input",{type:"file",accept:"image/*",onChange:R=>w(R,D),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})]}),k=({label:D,value:A})=>d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-gray-400",children:D}),d.jsx("p",{className:"mt-1 p-2 bg-gray-800 rounded-lg min-h-[40px] text-white break-words",children:A||"Non specificato"})]}),I=({urls:D})=>d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["front","right","left","back"].map(A=>d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-gray-400 capitalize",children:A==="front"?"Frontale":A==="back"?"Posteriore":`Laterale ${A==="left"?"Sinistro":"Destro"}`}),D!=null&&D[A]?d.jsx("img",{src:D[A],alt:A,className:"mt-2 rounded-lg w-full h-auto object-cover"}):d.jsx("div",{className:"mt-2 flex justify-center items-center w-full h-48 bg-gray-800 rounded-lg text-gray-500",children:d.jsx("span",{children:"Non caricata"})})]},A))});return d.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[d.jsxs("header",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:"La mia Anamnesi"}),d.jsxs("button",{onClick:()=>u("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg transition-colors",children:[d.jsx(Js,{}),d.jsx("span",{children:"Dashboard"})]})]}),i?d.jsxs("form",{onSubmit:_(E),className:"space-y-8",children:[d.jsxs("div",{className:M,children:[d.jsx("h4",{className:S,children:"Dati Anagrafici e Misure"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Nome*"}),d.jsx("input",{...y("firstName",{required:!0}),className:P})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Cognome*"}),d.jsx("input",{...y("lastName",{required:!0}),className:P})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Data di Nascita*"}),d.jsx("input",{type:"date",...y("birthDate",{required:!0}),className:P})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Che lavoro fai?*"}),d.jsx("input",{...y("job",{required:!0}),className:P,placeholder:"Es. Impiegato..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Peso (kg)*"}),d.jsx("input",{type:"number",step:"0.1",...y("weight",{required:!0}),className:P,placeholder:"Es. 75.5"})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Altezza (cm)*"}),d.jsx("input",{type:"number",...y("height",{required:!0}),className:P,placeholder:"Es. 180"})]})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:S,children:"Abitudini Alimentari"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Quanti pasti riesci a fare al giorno?*"}),d.jsxs("select",{...y("mealsPerDay",{required:!0}),className:P,children:[d.jsx("option",{value:"3",children:"3"}),d.jsx("option",{value:"4",children:"4"}),d.jsx("option",{value:"5",children:"5"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Colazione: Dolce o Salata?*"}),d.jsxs("select",{...y("breakfastType",{required:!0}),className:P,children:[d.jsx("option",{value:"dolce",children:"Dolce"}),d.jsx("option",{value:"salato",children:"Salato"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Alimenti da inserire nella settimana*"}),d.jsx("textarea",{...y("desiredFoods",{required:!0}),rows:"3",className:P,placeholder:"Elenca qui..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Cosa non mangi?*"}),d.jsx("textarea",{...y("dislikedFoods",{required:!0}),rows:"2",className:P,placeholder:"Elenca qui..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Intolleranze?*"}),d.jsx("input",{...y("intolerances",{required:!0}),className:P,placeholder:"Es. Lattosio, nessuna..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Problemi di digestione o gonfiore?*"}),d.jsx("input",{...y("digestionIssues",{required:!0}),className:P,placeholder:"Sì/No, e se sì quali..."})]})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:S,children:"Allenamento"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Quanti allenamenti a settimana?*"}),d.jsx("input",{type:"number",...y("workoutsPerWeek",{required:!0}),className:P,placeholder:"Es. 3"})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Specialità, dove ti alleni e con quali attrezzi?*"}),d.jsx("textarea",{...y("trainingDetails",{required:!0}),rows:"3",className:P,placeholder:"Es. Bodybuilding in palestra..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"A che ora e per quanto tempo ti alleni?*"}),d.jsx("input",{...y("trainingTime",{required:!0}),className:P,placeholder:"Es. La sera dalle 18 alle 19:30"})]})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:S,children:"Salute e Obiettivi"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Infortuni o problematiche?*"}),d.jsx("textarea",{...y("injuries",{required:!0}),rows:"3",className:P,placeholder:"Es. Mal di schiena, ernie..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Prendi farmaci?*"}),d.jsx("input",{...y("medications",{required:!0}),className:P,placeholder:"Sì/No, e se sì quali..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Usi integratori?*"}),d.jsx("input",{...y("supplements",{required:!0}),className:P,placeholder:"Sì/No, e se sì quali..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Scrivimi il tuo obiettivo*"}),d.jsx("textarea",{...y("mainGoal",{required:!0}),rows:"3",className:P,placeholder:"Descrivi in dettaglio..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Durata percorso scelto?*"}),d.jsx("input",{...y("programDuration",{required:!0}),className:P,placeholder:"Es. 3 mesi, 6 mesi..."})]})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:S,children:"Foto Iniziali"}),d.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Carica 4 foto per il check iniziale: frontale, laterale destro, laterale sinistro e posteriore."}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsx(b,{type:"front",label:"Frontale"}),d.jsx(b,{type:"right",label:"Laterale Destro"}),d.jsx(b,{type:"left",label:"Laterale Sinistro"}),d.jsx(b,{type:"back",label:"Posteriore"})]})]}),d.jsx("div",{className:"flex justify-end pt-4",children:d.jsxs("button",{type:"submit",disabled:v,className:"flex items-center gap-2 px-5 py-2.5 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition font-semibold disabled:opacity-50",children:[d.jsx(Pm,{})," ",v?"Salvataggio...":"Salva Anamnesi e Foto"]})})]}):t&&d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:M,children:[d.jsx("h4",{className:S,children:"Dati Anagrafici"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(k,{label:"Nome",value:t.firstName}),d.jsx(k,{label:"Cognome",value:t.lastName}),d.jsx(k,{label:"Data di Nascita",value:t.birthDate}),d.jsx(k,{label:"Lavoro",value:t.job}),d.jsx(k,{label:"Peso (kg)",value:t.weight}),d.jsx(k,{label:"Altezza (cm)",value:t.height})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:S,children:"Abitudini Alimentari"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(k,{label:"Pasti al giorno",value:t.mealsPerDay}),d.jsx(k,{label:"Tipo Colazione",value:t.breakfastType}),d.jsx(k,{label:"Alimenti da inserire",value:t.desiredFoods}),d.jsx(k,{label:"Alimenti da evitare",value:t.dislikedFoods}),d.jsx(k,{label:"Intolleranze",value:t.intolerances}),d.jsx(k,{label:"Problemi di digestione",value:t.digestionIssues})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:S,children:"Allenamento"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(k,{label:"Allenamenti a settimana",value:t.workoutsPerWeek}),d.jsx(k,{label:"Dettagli Allenamento",value:t.trainingDetails}),d.jsx(k,{label:"Orario e Durata",value:t.trainingTime})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:S,children:"Salute e Obiettivi"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(k,{label:"Infortuni o problematiche",value:t.injuries}),d.jsx(k,{label:"Farmaci",value:t.medications}),d.jsx(k,{label:"Integratori",value:t.supplements}),d.jsx(k,{label:"Obiettivo Principale",value:t.mainGoal}),d.jsx(k,{label:"Durata Percorso",value:t.programDuration})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:S,children:"Foto Iniziali"}),d.jsx(I,{urls:l})]}),d.jsx("div",{className:"flex justify-end pt-4",children:d.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition font-semibold",children:[d.jsx(lD,{})," Modifica"]})})]})]})},UJ=`
.react-calendar { width: 100%; background: rgba(31, 41, 55, 0.5); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 1rem; backdrop-filter: blur(10px); font-family: sans-serif; }
.react-calendar__tile, .react-calendar__month-view__weekdays__weekday { color: white; padding: 0.75em 0.5em; }
.react-calendar__navigation button { color: #22d3ee; font-weight: bold; font-size: 1.1em; }
.react-calendar__tile--now { background: rgba(55, 65, 81, 0.7); border-radius: 0.5rem; }
.react-calendar__tile--active { background: #0891b2; border-radius: 0.5rem; }
.react-calendar__tile:enabled:hover, .react-calendar__tile:enabled:focus { background: rgba(55, 65, 81, 1); border-radius: 0.5rem; }
.check-submitted { background-color: rgba(34, 197, 94, 0.5); border-radius: 50%; }
.suggested-day { box-shadow: 0 0 0 2px rgba(34, 211, 238, 0.6); border-radius: 50%; }
`,BJ=()=>d.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),JC=({formState:t,setFormState:e,handleSubmit:n,isUploading:r,handleFileChange:i})=>{const s=()=>e({id:null,notes:"",weight:"",photos:{},photoPreviews:{}}),o=({type:a,label:l,preview:c})=>d.jsxs("div",{className:"text-center",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300",children:l}),d.jsxs("div",{className:"mt-2 flex justify-center items-center w-full h-48 bg-gray-700/50 rounded-lg border-2 border-dashed border-gray-600 relative",children:[c?d.jsx("img",{src:c,alt:"preview",className:"h-full w-full object-contain rounded-lg"}):d.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[d.jsx(sD,{size:40}),d.jsx("p",{className:"mt-2 text-sm",children:"Carica foto"})]}),d.jsx("input",{type:"file",accept:"image/*",onChange:u=>i(u,a),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})]});return d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h3",{className:"font-bold text-lg mb-4 text-cyan-400",children:t.id?"Modifica Check":"Carica Nuovo Check"}),d.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",children:d.jsx(K$,{size:20})})]}),d.jsxs("form",{onSubmit:n,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Peso Attuale (kg)*"}),d.jsx("input",{type:"number",step:"0.1",value:t.weight,onChange:a=>e(l=>({...l,weight:a.target.value})),required:!0,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Es. 75.5"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Note sul check"}),d.jsx("textarea",{value:t.notes,onChange:a=>e(l=>({...l,notes:a.target.value})),rows:"4",className:"w-full p-2 bg-gray-700 border border-gray-600 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsx(o,{type:"front",label:"Frontale",preview:t.photoPreviews.front}),d.jsx(o,{type:"right",label:"Laterale Destro",preview:t.photoPreviews.right}),d.jsx(o,{type:"left",label:"Laterale Sinistro",preview:t.photoPreviews.left}),d.jsx(o,{type:"back",label:"Posteriore",preview:t.photoPreviews.back})]}),d.jsx("div",{className:"flex justify-end",children:d.jsxs("button",{type:"submit",disabled:r,className:"flex items-center gap-2 px-5 py-2.5 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition font-semibold disabled:opacity-50",children:[d.jsx(Zx,{})," ",r?"Salvataggio...":t.id?"Salva Modifiche":"Invia Check"]})})]})]})},zJ=({check:t,handleEditClick:e})=>{const n=(new Date-t.createdAt.toDate())/36e5<2;return d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("h3",{className:"font-bold text-lg text-cyan-400",children:["Riepilogo del ",t.createdAt.toDate().toLocaleDateString("it-IT")]}),n&&d.jsxs("button",{onClick:()=>e(t),className:"flex items-center gap-2 px-3 py-1.5 bg-gray-600 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg",children:[d.jsx(cD,{})," Modifica"]})]}),d.jsxs("div",{className:"mt-4 space-y-6",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-300",children:"Peso Registrato:"}),d.jsxs("p",{className:"text-white text-xl font-bold",children:[t.weight," kg"]})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-300",children:"Le tue note:"}),d.jsx("p",{className:"text-gray-400 p-3 bg-gray-900/50 rounded-lg min-h-[50px] whitespace-pre-wrap",children:t.notes||"Nessuna nota fornita."})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-300",children:"Feedback del Coach:"}),d.jsx("p",{className:"text-cyan-300 p-3 bg-cyan-900/30 rounded-lg min-h-[50px] whitespace-pre-wrap",children:t.coachNotes||"Il tuo coach non ha ancora lasciato un feedback."})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-300",children:"Le tue foto:"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-2",children:t.photoURLs&&Object.values(t.photoURLs).map((r,i)=>d.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:d.jsx("img",{src:r,alt:`foto check ${i}`,className:"rounded-lg w-full h-auto aspect-square object-cover"})},i))})]})]})]})};function $J(){const[t,e]=O.useState([]),[n,r]=O.useState(!0),[i,s]=O.useState(new Date),[o,a]=O.useState({id:null,notes:"",weight:"",photos:{},photoPreviews:{}}),[l,c]=O.useState(!1),[u,f]=O.useState(null),p=Wt(),y=ui().currentUser,_=Nh();O.useEffect(()=>{if(!y){p("/client-login");return}const C=bt(ae,`clients/${y.uid}/checks`),M=Pr(C,zs("createdAt","desc")),S=Tt(M,I=>{e(I.docs.map(D=>({id:D.id,...D.data()}))),r(!1)}),b=Oe(ae,`clients/${y.uid}`),k=Tt(b,I=>{I.exists()&&I.data().prossimoCheck&&f(I.data().prossimoCheck.toDate())});return()=>{S(),k()}},[y,p]);const x=({date:C,view:M})=>{if(M==="month"){if(t.some(b=>b.createdAt&&b.createdAt.toDate().toDateString()===C.toDateString()))return"check-submitted";if(u&&C.toDateString()===u.toDateString())return"suggested-day"}},v=(C,M)=>{const S=C.target.files[0];S&&a(b=>({...b,photos:{...b.photos,[M]:S},photoPreviews:{...b.photoPreviews,[M]:URL.createObjectURL(S)}}))},w=C=>{s(C.createdAt.toDate()),a({id:C.id,notes:C.notes,weight:C.weight,photos:{},photoPreviews:C.photoURLs})},E=async C=>{C.preventDefault();const{id:M,notes:S,weight:b,photos:k}=o;if(!y||!b){alert("Per favore, compila almeno il peso.");return}c(!0);try{const I=M?t.find(R=>R.id===M):null;let D=I?{...I.photoURLs}:{};await Promise.all(Object.entries(k).map(async([R,$])=>{if($){const H=`clients/${y.uid}/checks/${cb()}-${$.name}`,q=El(_,H);await tD(q,$),D[R]=await Im(q)}}));const A={notes:S,weight:parseFloat(b),photoURLs:D};if(M)await qu(Oe(ae,`clients/${y.uid}/checks`,M),{...A,lastUpdatedAt:gn()}),alert("Check modificato con successo!");else{await km(bt(ae,`clients/${y.uid}/checks`),{...A,createdAt:i});const R=Oe(ae,"clients",y.uid),$=await Wi(R);if($.exists()&&$.data().prossimoCheck){const H=$.data().prossimoCheck.toDate(),q=new Date(H);q.setDate(H.getDate()+7),await qu(R,{prossimoCheck:q})}alert("Check caricato con successo! La prossima scadenza è stata aggiornata.")}a({id:null,notes:"",weight:"",photos:{},photoPreviews:{}})}catch(I){console.error("Errore:",I),alert("Si è verificato un errore.")}finally{c(!1)}},P=()=>{const C=t.find(M=>M.createdAt&&M.createdAt.toDate().toDateString()===i.toDateString());return o.id?d.jsx(JC,{formState:o,setFormState:a,handleSubmit:E,isUploading:l,handleFileChange:v}):C?d.jsx(zJ,{check:C,handleEditClick:w}):d.jsx(JC,{formState:o,setFormState:a,handleSubmit:E,isUploading:l,handleFileChange:v})};return n?d.jsx(BJ,{}):d.jsxs(d.Fragment,{children:[d.jsx("style",{children:UJ}),d.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[d.jsxs("header",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:"I miei Check"}),d.jsxs("button",{onClick:()=>p("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg transition-colors",children:[d.jsx(Js,{}),d.jsx("span",{children:"Dashboard"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"lg:col-span-1",children:[d.jsxs("div",{className:"mb-4 text-xs text-gray-400 flex flex-col gap-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500/50"})," Check inviato"]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 rounded-full shadow-[0_0_0_2px_rgba(34,211,238,0.6)]"})," Giorno di check"]})]}),d.jsx(_M,{onChange:C=>{a({id:null,notes:"",weight:"",photos:{},photoPreviews:{}}),s(C)},value:i,tileClassName:x})]}),d.jsx("div",{className:"lg:col-span-2 bg-gray-800/50 p-6 rounded-xl border border-white/10 min-h-[400px]",children:P()})]})]})]})}const WJ=()=>d.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),HJ=t=>t&&typeof t.toDate=="function"?t.toDate().toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric"}):"Data non disponibile",qJ=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(!0),i=Wt(),o=ui().currentUser;return O.useEffect(()=>{if(!o){i("/client-login");return}const a=bt(ae,`clients/${o.uid}/payments`),l=Pr(a,zs("paymentDate","desc")),c=Tt(l,u=>{const f=u.docs.map(p=>({id:p.id,...p.data()}));e(f),r(!1)},u=>{console.error("Errore nel caricare i pagamenti:",u),r(!1)});return()=>c()},[o,i]),n?d.jsx(WJ,{}):d.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[d.jsxs("header",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:"Storico Pagamenti"}),d.jsxs("button",{onClick:()=>i("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg transition-colors",children:[d.jsx(Js,{}),d.jsx("span",{children:"Dashboard"})]})]}),d.jsx("main",{className:"bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b border-white/10",children:[d.jsxs("th",{className:"p-4 text-sm font-semibold text-gray-300",children:[d.jsx(Qx,{className:"inline mr-2"}),"Data"]}),d.jsxs("th",{className:"p-4 text-sm font-semibold text-gray-300",children:[d.jsx(la,{className:"inline mr-2"}),"Importo"]}),d.jsxs("th",{className:"p-4 text-sm font-semibold text-gray-300",children:[d.jsx(hD,{className:"inline mr-2"}),"Durata"]}),d.jsx("th",{className:"p-4 text-sm font-semibold text-gray-300 hidden sm:table-cell",children:"Metodo"})]})}),d.jsx("tbody",{children:t.length>0?t.map(a=>{var l;return d.jsxs("tr",{className:"border-b border-white/5 last:border-b-0",children:[d.jsx("td",{className:"p-4",children:HJ(a.paymentDate)}),d.jsxs("td",{className:"p-4 font-semibold text-cyan-400",children:["€ ",(l=a.amount)==null?void 0:l.toFixed(2)]}),d.jsx("td",{className:"p-4",children:a.duration}),d.jsx("td",{className:"p-4 hidden sm:table-cell",children:a.paymentMethod||"Non specificato"})]},a.id)}):d.jsx("tr",{children:d.jsx("td",{colSpan:"4",className:"text-center text-gray-500 p-8",children:"Non è stato registrato ancora nessun pagamento."})})})]})})})]})},ub=["QwWST9OVOlTOi5oheyCqfpXLOLg2","3j0AXIRa4XdHq1ywCl4UBxJNsku2","AeZKjJYu5zMZ4mvffaGiqCBb0cF2"],ZC=ub[0],KJ=ub.reduce((t,e)=>({...t,[e]:"Coach"}),{}),GJ=()=>d.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),YJ=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(""),[i,s]=O.useState(!0),[o,a]=O.useState(null),l=O.useRef(null),c=Wt(),f=ui().currentUser;O.useEffect(()=>{if(!f){c("/client-login");return}const m=[f.uid,ZC].sort().join("_");a(m);let y=()=>{};return(async()=>{const x=Oe(ae,"chats",m);if(!(await Wi(x)).exists()){const P=await Wi(Oe(ae,"clients",f.uid)),C=P.exists()?P.data().name:f.email,M=[f.uid,...ub],S={...KJ,[f.uid]:C};await Os(x,{participants:M,participantNames:S,lastMessage:"Conversazione avviata",lastUpdate:gn(),lastMessageSenderId:ZC,createdAt:gn()})}const w=bt(ae,"chats",m,"messages"),E=Pr(w,zs("createdAt"));y=Tt(E,P=>{const C=P.docs.map(M=>({id:M.id,...M.data()}));e(C),s(!1)},P=>{console.error("Errore nel listener di Firebase (messaggi):",P),s(!1)})})(),()=>{y()}},[f,c]),O.useEffect(()=>{var m;(m=l.current)==null||m.scrollIntoView({behavior:"smooth"})},[t]);const p=async m=>{if(m.preventDefault(),!(n.trim()===""||!o||!f))try{const y=bt(ae,"chats",o,"messages");await km(y,{text:n,createdAt:gn(),senderId:f.uid});const _=Oe(ae,"chats",o);await Os(_,{lastMessage:n,lastUpdate:gn(),lastMessageSenderId:f.uid},{merge:!0}),r("")}catch(y){console.error("Errore durante l'invio del messaggio:",y),alert("Errore: Impossibile inviare il messaggio. Controlla le regole di sicurezza.")}};return i?d.jsx(GJ,{}):d.jsxs("div",{className:"min-h-screen bg-gray-900 text-white font-sans flex flex-col h-screen",children:[d.jsxs("header",{className:"flex justify-between items-center p-4 bg-gray-800/50 backdrop-blur-sm border-b border-white/10 sticky top-0",children:[d.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:"Chat con il Coach"}),d.jsxs("button",{onClick:()=>c("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg",children:[d.jsx(Js,{}),d.jsx("span",{children:"Dashboard"})]})]}),d.jsxs("main",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.map(m=>d.jsx("div",{className:`flex ${m.senderId===(f==null?void 0:f.uid)?"justify-end":"justify-start"}`,children:d.jsxs("div",{className:`max-w-xs md:max-w-md p-3 rounded-2xl ${m.senderId===(f==null?void 0:f.uid)?"bg-cyan-600 rounded-br-none":"bg-gray-700 rounded-bl-none"}`,children:[d.jsx("p",{className:"text-white break-words",children:m.text}),d.jsx("p",{className:"text-xs text-gray-300 mt-1 text-right",children:m.createdAt&&m.createdAt.toDate().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})})]})},m.id)),d.jsx("div",{ref:l})]}),d.jsx("footer",{className:"p-4 bg-gray-800/50 backdrop-blur-sm border-t border-white/10 sticky bottom-0",children:d.jsxs("form",{onSubmit:p,className:"flex items-center gap-4",children:[d.jsx("input",{type:"text",value:n,onChange:m=>r(m.target.value),placeholder:"Scrivi un messaggio...",className:"flex-1 p-3 bg-gray-700 border border-gray-600 rounded-full outline-none focus:ring-2 focus:ring-cyan-500 text-white"}),d.jsx("button",{type:"submit",className:"p-3 bg-cyan-600 hover:bg-cyan-700 text-white rounded-full transition-colors disabled:opacity-50",disabled:!n.trim(),children:d.jsx(Zx,{size:20})})]})})]})},QJ=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(""),[i,s]=O.useState(""),[o,a]=O.useState(!1),l=ui(),c=async u=>{u.preventDefault(),r(""),s(""),a(!0);try{await GU(l,t),r("Email di reset inviata con successo! Controlla la tua casella di posta.")}catch(f){s("Nessun utente trovato con questa email. Controlla che sia corretta."),console.error("Errore nel reset password:",f)}finally{a(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:d.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg",children:[d.jsx("h2",{className:"text-3xl font-bold text-center text-cyan-400",children:"Recupera Password"}),d.jsx("p",{className:"text-center text-gray-300",children:"Inserisci la tua email per ricevere un link di recupero."}),n?d.jsx("div",{className:"text-center p-4 bg-green-500/20 text-green-300 rounded-lg",children:d.jsx("p",{children:n})}):d.jsxs("form",{onSubmit:c,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400",children:"Email"}),d.jsxs("div",{className:"relative mt-1",children:[d.jsx(z$,{className:"absolute top-1/2 left-3 -translate-y-1/2 text-gray-400"}),d.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:u=>e(u.target.value),className:"w-full pl-10 pr-3 py-2 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]})]}),i&&d.jsx("p",{className:"text-red-500 text-sm text-center",children:i}),d.jsx("div",{children:d.jsx("button",{type:"submit",disabled:o,className:"w-full px-4 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500 disabled:bg-gray-500",children:o?"Invio in corso...":"Invia Link di Recupero"})})]}),d.jsx("div",{className:"text-center",children:d.jsxs(Io,{to:"/client-login",className:"text-sm text-cyan-400 hover:underline flex items-center justify-center gap-2",children:[d.jsx(Js,{})," Torna al Login"]})})]})})},XJ=()=>d.jsx("div",{className:"flex justify-center items-center min-h-screen bg-background text-foreground",children:"Caricamento..."}),eI=({isAllowed:t,redirectPath:e,children:n})=>t?n||d.jsx(TP,{}):d.jsx(hf,{to:e,replace:!0}),JJ=()=>{const[t,e]=O.useState({isLoading:!0,user:null,isClient:!1}),n=Wt();return O.useEffect(()=>{const r=sessionStorage.getItem("app_role"),i=ZU(Ku,async s=>{if(s){const o=Oe(ae,"clients",s.uid),a=await Wi(o),l=a.exists()&&a.data().isClient;if(r==="admin"&&l){await Lu(Ku),e({isLoading:!1,user:null,isClient:!1});return}const c={isLoading:!1,user:s,isClient:l};e(c);const u=window.location.hash;(u.includes("#/login")||u.includes("#/client-login")||u==="#/")&&(c.isClient?n("/client/dashboard",{replace:!0}):n("/",{replace:!0}))}else sessionStorage.removeItem("app_role"),e({isLoading:!1,user:null,isClient:!1})});return()=>i()},[n]),t.isLoading?d.jsx(XJ,{}):d.jsxs(lF,{children:[d.jsx(vt,{path:"/login",element:d.jsx(Eq,{})}),d.jsx(vt,{path:"/client-login",element:d.jsx(DJ,{})}),d.jsx(vt,{path:"/client/forgot-password",element:d.jsx(QJ,{})}),d.jsx(vt,{element:d.jsx(eI,{isAllowed:t.user&&!t.isClient,redirectPath:"/login"}),children:d.jsxs(vt,{element:d.jsx(bq,{}),children:[d.jsx(vt,{index:!0,element:d.jsx(hQ,{})})," ",d.jsx(vt,{path:"/clients",element:d.jsx(fQ,{})}),d.jsx(vt,{path:"/new",element:d.jsx(VQ,{})}),d.jsx(vt,{path:"/client/:clientId",element:d.jsx(CJ,{})}),d.jsx(vt,{path:"/edit/:clientId",element:d.jsx(AJ,{})}),d.jsx(vt,{path:"/updates",element:d.jsx(PJ,{})}),d.jsx(vt,{path:"/admin/chat",element:d.jsx(NJ,{})})]})}),d.jsxs(vt,{element:d.jsx(eI,{isAllowed:t.user&&t.isClient,redirectPath:"/client-login"}),children:[d.jsx(vt,{path:"/client/first-access",element:d.jsx(OJ,{})}),d.jsx(vt,{path:"/client/dashboard",element:d.jsx(LJ,{})}),d.jsx(vt,{path:"/client/anamnesi",element:d.jsx(FJ,{})}),d.jsx(vt,{path:"/client/checks",element:d.jsx($J,{})}),d.jsx(vt,{path:"/client/payments",element:d.jsx(qJ,{})}),d.jsx(vt,{path:"/client/chat",element:d.jsx(YJ,{})})]}),d.jsx(vt,{path:"*",element:t.user?t.isClient?d.jsx(hf,{to:"/client/dashboard"}):d.jsx(hf,{to:"/"}):d.jsx(hf,{to:"/login"})})]})};function ZJ(){return d.jsx(mF,{children:d.jsx(JJ,{})})}Ny.createRoot(document.getElementById("root")).render(d.jsx(rt.StrictMode,{children:d.jsx(ZJ,{})}));
