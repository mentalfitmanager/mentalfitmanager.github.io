var DM=Object.defineProperty;var OM=(t,e,n)=>e in t?DM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var de=(t,e,n)=>OM(t,typeof e!="symbol"?e+"":e,n);function MM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function jM(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ZI={exports:{}},qp={},eC={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lh=Symbol.for("react.element"),LM=Symbol.for("react.portal"),VM=Symbol.for("react.fragment"),FM=Symbol.for("react.strict_mode"),UM=Symbol.for("react.profiler"),BM=Symbol.for("react.provider"),zM=Symbol.for("react.context"),$M=Symbol.for("react.forward_ref"),WM=Symbol.for("react.suspense"),HM=Symbol.for("react.memo"),qM=Symbol.for("react.lazy"),Yb=Symbol.iterator;function KM(t){return t===null||typeof t!="object"?null:(t=Yb&&t[Yb]||t["@@iterator"],typeof t=="function"?t:null)}var tC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nC=Object.assign,rC={};function Nl(t,e,n){this.props=t,this.context=e,this.refs=rC,this.updater=n||tC}Nl.prototype.isReactComponent={};Nl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Nl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iC(){}iC.prototype=Nl.prototype;function K_(t,e,n){this.props=t,this.context=e,this.refs=rC,this.updater=n||tC}var G_=K_.prototype=new iC;G_.constructor=K_;nC(G_,Nl.prototype);G_.isPureReactComponent=!0;var Qb=Array.isArray,sC=Object.prototype.hasOwnProperty,Y_={current:null},oC={key:!0,ref:!0,__self:!0,__source:!0};function aC(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)sC.call(e,r)&&!oC.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:lh,type:t,key:s,ref:o,props:i,_owner:Y_.current}}function GM(t,e){return{$$typeof:lh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Q_(t){return typeof t=="object"&&t!==null&&t.$$typeof===lh}function YM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Xb=/\/+/g;function mg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YM(""+t.key):e.toString(36)}function ef(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case lh:case LM:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+mg(o,0):r,Qb(i)?(n="",t!=null&&(n=t.replace(Xb,"$&/")+"/"),ef(i,e,n,"",function(c){return c})):i!=null&&(Q_(i)&&(i=GM(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Xb,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Qb(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+mg(s,a);o+=ef(s,e,n,l,i)}else if(l=KM(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+mg(s,a++),o+=ef(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ad(t,e,n){if(t==null)return t;var r=[],i=0;return ef(t,r,"","",function(s){return e.call(n,s,i++)}),r}function QM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Pn={current:null},tf={transition:null},XM={ReactCurrentDispatcher:Pn,ReactCurrentBatchConfig:tf,ReactCurrentOwner:Y_};function lC(){throw Error("act(...) is not supported in production builds of React.")}Se.Children={map:ad,forEach:function(t,e,n){ad(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ad(t,function(){e++}),e},toArray:function(t){return ad(t,function(e){return e})||[]},only:function(t){if(!Q_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=Nl;Se.Fragment=VM;Se.Profiler=UM;Se.PureComponent=K_;Se.StrictMode=FM;Se.Suspense=WM;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XM;Se.act=lC;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nC({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Y_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)sC.call(e,l)&&!oC.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:lh,type:t.type,key:i,ref:s,props:r,_owner:o}};Se.createContext=function(t){return t={$$typeof:zM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BM,_context:t},t.Consumer=t};Se.createElement=aC;Se.createFactory=function(t){var e=aC.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:$M,render:t}};Se.isValidElement=Q_;Se.lazy=function(t){return{$$typeof:qM,_payload:{_status:-1,_result:t},_init:QM}};Se.memo=function(t,e){return{$$typeof:HM,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=tf.transition;tf.transition={};try{t()}finally{tf.transition=e}};Se.unstable_act=lC;Se.useCallback=function(t,e){return Pn.current.useCallback(t,e)};Se.useContext=function(t){return Pn.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return Pn.current.useDeferredValue(t)};Se.useEffect=function(t,e){return Pn.current.useEffect(t,e)};Se.useId=function(){return Pn.current.useId()};Se.useImperativeHandle=function(t,e,n){return Pn.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return Pn.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return Pn.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return Pn.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return Pn.current.useReducer(t,e,n)};Se.useRef=function(t){return Pn.current.useRef(t)};Se.useState=function(t){return Pn.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return Pn.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return Pn.current.useTransition()};Se.version="18.3.1";eC.exports=Se;var D=eC.exports;const rt=jM(D),JM=MM({__proto__:null,default:rt},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZM=D,ej=Symbol.for("react.element"),tj=Symbol.for("react.fragment"),nj=Object.prototype.hasOwnProperty,rj=ZM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ij={key:!0,ref:!0,__self:!0,__source:!0};function cC(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)nj.call(e,r)&&!ij.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:ej,type:t,key:s,ref:o,props:i,_owner:rj.current}}qp.Fragment=tj;qp.jsx=cC;qp.jsxs=cC;ZI.exports=qp;var d=ZI.exports,Ly={},uC={exports:{}},sr={},hC={exports:{}},dC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,J){var Z=$.length;$.push(J);e:for(;0<Z;){var ye=Z-1>>>1,pe=$[ye];if(0<i(pe,J))$[ye]=J,$[Z]=pe,Z=ye;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var J=$[0],Z=$.pop();if(Z!==J){$[0]=Z;e:for(var ye=0,pe=$.length,xe=pe>>>1;ye<xe;){var We=2*(ye+1)-1,tt=$[We],He=We+1,ot=$[He];if(0>i(tt,Z))He<pe&&0>i(ot,tt)?($[ye]=ot,$[He]=Z,ye=He):($[ye]=tt,$[We]=Z,ye=We);else if(He<pe&&0>i(ot,Z))$[ye]=ot,$[He]=Z,ye=He;else break e}}return J}function i($,J){var Z=$.sortIndex-J.sortIndex;return Z!==0?Z:$.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,y=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E($){for(var J=n(c);J!==null;){if(J.callback===null)r(c);else if(J.startTime<=$)r(c),J.sortIndex=J.expirationTime,e(l,J);else break;J=n(c)}}function R($){if(_=!1,E($),!y)if(n(l)!==null)y=!0,H(C);else{var J=n(c);J!==null&&Y(R,J.startTime-$)}}function C($,J){y=!1,_&&(_=!1,v(b),b=-1),m=!0;var Z=p;try{for(E(J),f=n(l);f!==null&&(!(f.expirationTime>J)||$&&!O());){var ye=f.callback;if(typeof ye=="function"){f.callback=null,p=f.priorityLevel;var pe=ye(f.expirationTime<=J);J=t.unstable_now(),typeof pe=="function"?f.callback=pe:f===n(l)&&r(l),E(J)}else r(l);f=n(l)}if(f!==null)var xe=!0;else{var We=n(c);We!==null&&Y(R,We.startTime-J),xe=!1}return xe}finally{f=null,p=Z,m=!1}}var M=!1,T=null,b=-1,k=5,A=-1;function O(){return!(t.unstable_now()-A<k)}function I(){if(T!==null){var $=t.unstable_now();A=$;var J=!0;try{J=T(!0,$)}finally{J?P():(M=!1,T=null)}}else M=!1}var P;if(typeof w=="function")P=function(){w(I)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,z=B.port2;B.port1.onmessage=I,P=function(){z.postMessage(null)}}else P=function(){x(I,0)};function H($){T=$,M||(M=!0,P())}function Y($,J){b=x(function(){$(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,H(C))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var J=3;break;default:J=p}var Z=p;p=J;try{return $()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,J){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Z=p;p=$;try{return J()}finally{p=Z}},t.unstable_scheduleCallback=function($,J,Z){var ye=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ye+Z:ye):Z=ye,$){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Z+pe,$={id:u++,callback:J,priorityLevel:$,startTime:Z,expirationTime:pe,sortIndex:-1},Z>ye?($.sortIndex=Z,e(c,$),n(l)===null&&$===n(c)&&(_?(v(b),b=-1):_=!0,Y(R,Z-ye))):($.sortIndex=pe,e(l,$),y||m||(y=!0,H(C))),$},t.unstable_shouldYield=O,t.unstable_wrapCallback=function($){var J=p;return function(){var Z=p;p=J;try{return $.apply(this,arguments)}finally{p=Z}}}})(dC);hC.exports=dC;var sj=hC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oj=D,rr=sj;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fC=new Set,yu={};function Jo(t,e){ll(t,e),ll(t+"Capture",e)}function ll(t,e){for(yu[t]=e,t=0;t<e.length;t++)fC.add(e[t])}var Vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vy=Object.prototype.hasOwnProperty,aj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jb={},Zb={};function lj(t){return Vy.call(Zb,t)?!0:Vy.call(Jb,t)?!1:aj.test(t)?Zb[t]=!0:(Jb[t]=!0,!1)}function cj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uj(t,e,n,r){if(e===null||typeof e>"u"||cj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){en[t]=new Rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];en[e]=new Rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){en[t]=new Rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){en[t]=new Rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){en[t]=new Rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){en[t]=new Rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){en[t]=new Rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){en[t]=new Rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){en[t]=new Rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var X_=/[\-:]([a-z])/g;function J_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(X_,J_);en[e]=new Rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(X_,J_);en[e]=new Rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(X_,J_);en[e]=new Rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){en[t]=new Rn(t,1,!1,t.toLowerCase(),null,!1,!1)});en.xlinkHref=new Rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){en[t]=new Rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Z_(t,e,n,r){var i=en.hasOwnProperty(e)?en[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uj(e,n,i,r)&&(n=null),r||i===null?lj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gi=oj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ld=Symbol.for("react.element"),Aa=Symbol.for("react.portal"),Pa=Symbol.for("react.fragment"),e0=Symbol.for("react.strict_mode"),Fy=Symbol.for("react.profiler"),pC=Symbol.for("react.provider"),mC=Symbol.for("react.context"),t0=Symbol.for("react.forward_ref"),Uy=Symbol.for("react.suspense"),By=Symbol.for("react.suspense_list"),n0=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),gC=Symbol.for("react.offscreen"),eS=Symbol.iterator;function cc(t){return t===null||typeof t!="object"?null:(t=eS&&t[eS]||t["@@iterator"],typeof t=="function"?t:null)}var ft=Object.assign,gg;function Ic(t){if(gg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gg=e&&e[1]||""}return`
`+gg+t}var yg=!1;function vg(t,e){if(!t||yg)return"";yg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{yg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ic(t):""}function hj(t){switch(t.tag){case 5:return Ic(t.type);case 16:return Ic("Lazy");case 13:return Ic("Suspense");case 19:return Ic("SuspenseList");case 0:case 2:case 15:return t=vg(t.type,!1),t;case 11:return t=vg(t.type.render,!1),t;case 1:return t=vg(t.type,!0),t;default:return""}}function zy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pa:return"Fragment";case Aa:return"Portal";case Fy:return"Profiler";case e0:return"StrictMode";case Uy:return"Suspense";case By:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mC:return(t.displayName||"Context")+".Consumer";case pC:return(t._context.displayName||"Context")+".Provider";case t0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case n0:return e=t.displayName||null,e!==null?e:zy(t.type)||"Memo";case is:e=t._payload,t=t._init;try{return zy(t(e))}catch{}}return null}function dj(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zy(e);case 8:return e===e0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function js(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fj(t){var e=yC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cd(t){t._valueTracker||(t._valueTracker=fj(t))}function vC(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yC(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Df(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $y(t,e){var n=e.checked;return ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tS(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=js(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _C(t,e){e=e.checked,e!=null&&Z_(t,"checked",e,!1)}function Wy(t,e){_C(t,e);var n=js(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hy(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hy(t,e.type,js(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hy(t,e,n){(e!=="number"||Df(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Cc=Array.isArray;function Ya(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+js(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function qy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return ft({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Cc(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:js(n)}}function xC(t,e){var n=js(e.value),r=js(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function iS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ky(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ud,bC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ud=ud||document.createElement("div"),ud.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ud.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Hc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pj=["Webkit","ms","Moz","O"];Object.keys(Hc).forEach(function(t){pj.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hc[e]=Hc[t]})});function SC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Hc.hasOwnProperty(t)&&Hc[t]?(""+e).trim():e+"px"}function EC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=SC(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var mj=ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gy(t,e){if(e){if(mj[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function Yy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qy=null;function r0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xy=null,Qa=null,Xa=null;function sS(t){if(t=hh(t)){if(typeof Xy!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Xp(e),Xy(t.stateNode,t.type,e))}}function TC(t){Qa?Xa?Xa.push(t):Xa=[t]:Qa=t}function kC(){if(Qa){var t=Qa,e=Xa;if(Xa=Qa=null,sS(t),e)for(t=0;t<e.length;t++)sS(e[t])}}function IC(t,e){return t(e)}function CC(){}var _g=!1;function AC(t,e,n){if(_g)return t(e,n);_g=!0;try{return IC(t,e,n)}finally{_g=!1,(Qa!==null||Xa!==null)&&(CC(),kC())}}function _u(t,e){var n=t.stateNode;if(n===null)return null;var r=Xp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var Jy=!1;if(Vi)try{var uc={};Object.defineProperty(uc,"passive",{get:function(){Jy=!0}}),window.addEventListener("test",uc,uc),window.removeEventListener("test",uc,uc)}catch{Jy=!1}function gj(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var qc=!1,Of=null,Mf=!1,Zy=null,yj={onError:function(t){qc=!0,Of=t}};function vj(t,e,n,r,i,s,o,a,l){qc=!1,Of=null,gj.apply(yj,arguments)}function _j(t,e,n,r,i,s,o,a,l){if(vj.apply(this,arguments),qc){if(qc){var c=Of;qc=!1,Of=null}else throw Error(K(198));Mf||(Mf=!0,Zy=c)}}function Zo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function PC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function oS(t){if(Zo(t)!==t)throw Error(K(188))}function xj(t){var e=t.alternate;if(!e){if(e=Zo(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return oS(i),t;if(s===r)return oS(i),e;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function RC(t){return t=xj(t),t!==null?NC(t):null}function NC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=NC(t);if(e!==null)return e;t=t.sibling}return null}var DC=rr.unstable_scheduleCallback,aS=rr.unstable_cancelCallback,wj=rr.unstable_shouldYield,bj=rr.unstable_requestPaint,St=rr.unstable_now,Sj=rr.unstable_getCurrentPriorityLevel,i0=rr.unstable_ImmediatePriority,OC=rr.unstable_UserBlockingPriority,jf=rr.unstable_NormalPriority,Ej=rr.unstable_LowPriority,MC=rr.unstable_IdlePriority,Kp=null,Qr=null;function Tj(t){if(Qr&&typeof Qr.onCommitFiberRoot=="function")try{Qr.onCommitFiberRoot(Kp,t,void 0,(t.current.flags&128)===128)}catch{}}var Ar=Math.clz32?Math.clz32:Cj,kj=Math.log,Ij=Math.LN2;function Cj(t){return t>>>=0,t===0?32:31-(kj(t)/Ij|0)|0}var hd=64,dd=4194304;function Ac(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Lf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ac(a):(s&=o,s!==0&&(r=Ac(s)))}else o=n&~i,o!==0?r=Ac(o):s!==0&&(r=Ac(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ar(e),i=1<<n,r|=t[n],e&=~i;return r}function Aj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ar(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=Aj(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function ev(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jC(){var t=hd;return hd<<=1,!(hd&4194240)&&(hd=64),t}function xg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ch(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ar(e),t[e]=n}function Rj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ar(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function s0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ar(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Le=0;function LC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var VC,o0,FC,UC,BC,tv=!1,fd=[],bs=null,Ss=null,Es=null,xu=new Map,wu=new Map,os=[],Nj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lS(t,e){switch(t){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":xu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wu.delete(e.pointerId)}}function hc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=hh(e),e!==null&&o0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Dj(t,e,n,r,i){switch(e){case"focusin":return bs=hc(bs,t,e,n,r,i),!0;case"dragenter":return Ss=hc(Ss,t,e,n,r,i),!0;case"mouseover":return Es=hc(Es,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xu.set(s,hc(xu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wu.set(s,hc(wu.get(s)||null,t,e,n,r,i)),!0}return!1}function zC(t){var e=Eo(t.target);if(e!==null){var n=Zo(e);if(n!==null){if(e=n.tag,e===13){if(e=PC(n),e!==null){t.blockedOn=e,BC(t.priority,function(){FC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Qy=r,n.target.dispatchEvent(r),Qy=null}else return e=hh(n),e!==null&&o0(e),t.blockedOn=n,!1;e.shift()}return!0}function cS(t,e,n){nf(t)&&n.delete(e)}function Oj(){tv=!1,bs!==null&&nf(bs)&&(bs=null),Ss!==null&&nf(Ss)&&(Ss=null),Es!==null&&nf(Es)&&(Es=null),xu.forEach(cS),wu.forEach(cS)}function dc(t,e){t.blockedOn===e&&(t.blockedOn=null,tv||(tv=!0,rr.unstable_scheduleCallback(rr.unstable_NormalPriority,Oj)))}function bu(t){function e(i){return dc(i,t)}if(0<fd.length){dc(fd[0],t);for(var n=1;n<fd.length;n++){var r=fd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(bs!==null&&dc(bs,t),Ss!==null&&dc(Ss,t),Es!==null&&dc(Es,t),xu.forEach(e),wu.forEach(e),n=0;n<os.length;n++)r=os[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<os.length&&(n=os[0],n.blockedOn===null);)zC(n),n.blockedOn===null&&os.shift()}var Ja=Gi.ReactCurrentBatchConfig,Vf=!0;function Mj(t,e,n,r){var i=Le,s=Ja.transition;Ja.transition=null;try{Le=1,a0(t,e,n,r)}finally{Le=i,Ja.transition=s}}function jj(t,e,n,r){var i=Le,s=Ja.transition;Ja.transition=null;try{Le=4,a0(t,e,n,r)}finally{Le=i,Ja.transition=s}}function a0(t,e,n,r){if(Vf){var i=nv(t,e,n,r);if(i===null)Pg(t,e,r,Ff,n),lS(t,r);else if(Dj(i,t,e,n,r))r.stopPropagation();else if(lS(t,r),e&4&&-1<Nj.indexOf(t)){for(;i!==null;){var s=hh(i);if(s!==null&&VC(s),s=nv(t,e,n,r),s===null&&Pg(t,e,r,Ff,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Pg(t,e,r,null,n)}}var Ff=null;function nv(t,e,n,r){if(Ff=null,t=r0(r),t=Eo(t),t!==null)if(e=Zo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=PC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ff=t,null}function $C(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sj()){case i0:return 1;case OC:return 4;case jf:case Ej:return 16;case MC:return 536870912;default:return 16}default:return 16}}var ps=null,l0=null,rf=null;function WC(){if(rf)return rf;var t,e=l0,n=e.length,r,i="value"in ps?ps.value:ps.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return rf=i.slice(t,1<r?1-r:void 0)}function sf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function pd(){return!0}function uS(){return!1}function or(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?pd:uS,this.isPropagationStopped=uS,this}return ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var Dl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},c0=or(Dl),uh=ft({},Dl,{view:0,detail:0}),Lj=or(uh),wg,bg,fc,Gp=ft({},uh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:u0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fc&&(fc&&t.type==="mousemove"?(wg=t.screenX-fc.screenX,bg=t.screenY-fc.screenY):bg=wg=0,fc=t),wg)},movementY:function(t){return"movementY"in t?t.movementY:bg}}),hS=or(Gp),Vj=ft({},Gp,{dataTransfer:0}),Fj=or(Vj),Uj=ft({},uh,{relatedTarget:0}),Sg=or(Uj),Bj=ft({},Dl,{animationName:0,elapsedTime:0,pseudoElement:0}),zj=or(Bj),$j=ft({},Dl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wj=or($j),Hj=ft({},Dl,{data:0}),dS=or(Hj),qj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Gj[t])?!!e[t]:!1}function u0(){return Yj}var Qj=ft({},uh,{key:function(t){if(t.key){var e=qj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:u0,charCode:function(t){return t.type==="keypress"?sf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xj=or(Qj),Jj=ft({},Gp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fS=or(Jj),Zj=ft({},uh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:u0}),eL=or(Zj),tL=ft({},Dl,{propertyName:0,elapsedTime:0,pseudoElement:0}),nL=or(tL),rL=ft({},Gp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iL=or(rL),sL=[9,13,27,32],h0=Vi&&"CompositionEvent"in window,Kc=null;Vi&&"documentMode"in document&&(Kc=document.documentMode);var oL=Vi&&"TextEvent"in window&&!Kc,HC=Vi&&(!h0||Kc&&8<Kc&&11>=Kc),pS=" ",mS=!1;function qC(t,e){switch(t){case"keyup":return sL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KC(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ra=!1;function aL(t,e){switch(t){case"compositionend":return KC(e);case"keypress":return e.which!==32?null:(mS=!0,pS);case"textInput":return t=e.data,t===pS&&mS?null:t;default:return null}}function lL(t,e){if(Ra)return t==="compositionend"||!h0&&qC(t,e)?(t=WC(),rf=l0=ps=null,Ra=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return HC&&e.locale!=="ko"?null:e.data;default:return null}}var cL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cL[t.type]:e==="textarea"}function GC(t,e,n,r){TC(r),e=Uf(e,"onChange"),0<e.length&&(n=new c0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gc=null,Su=null;function uL(t){sA(t,0)}function Yp(t){var e=Oa(t);if(vC(e))return t}function hL(t,e){if(t==="change")return e}var YC=!1;if(Vi){var Eg;if(Vi){var Tg="oninput"in document;if(!Tg){var yS=document.createElement("div");yS.setAttribute("oninput","return;"),Tg=typeof yS.oninput=="function"}Eg=Tg}else Eg=!1;YC=Eg&&(!document.documentMode||9<document.documentMode)}function vS(){Gc&&(Gc.detachEvent("onpropertychange",QC),Su=Gc=null)}function QC(t){if(t.propertyName==="value"&&Yp(Su)){var e=[];GC(e,Su,t,r0(t)),AC(uL,e)}}function dL(t,e,n){t==="focusin"?(vS(),Gc=e,Su=n,Gc.attachEvent("onpropertychange",QC)):t==="focusout"&&vS()}function fL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yp(Su)}function pL(t,e){if(t==="click")return Yp(e)}function mL(t,e){if(t==="input"||t==="change")return Yp(e)}function gL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dr=typeof Object.is=="function"?Object.is:gL;function Eu(t,e){if(Dr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Vy.call(e,i)||!Dr(t[i],e[i]))return!1}return!0}function _S(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xS(t,e){var n=_S(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_S(n)}}function XC(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?XC(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function JC(){for(var t=window,e=Df();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Df(t.document)}return e}function d0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function yL(t){var e=JC(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&XC(n.ownerDocument.documentElement,n)){if(r!==null&&d0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=xS(n,s);var o=xS(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vL=Vi&&"documentMode"in document&&11>=document.documentMode,Na=null,rv=null,Yc=null,iv=!1;function wS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;iv||Na==null||Na!==Df(r)||(r=Na,"selectionStart"in r&&d0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yc&&Eu(Yc,r)||(Yc=r,r=Uf(rv,"onSelect"),0<r.length&&(e=new c0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Na)))}function md(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Da={animationend:md("Animation","AnimationEnd"),animationiteration:md("Animation","AnimationIteration"),animationstart:md("Animation","AnimationStart"),transitionend:md("Transition","TransitionEnd")},kg={},ZC={};Vi&&(ZC=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function Qp(t){if(kg[t])return kg[t];if(!Da[t])return t;var e=Da[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ZC)return kg[t]=e[n];return t}var eA=Qp("animationend"),tA=Qp("animationiteration"),nA=Qp("animationstart"),rA=Qp("transitionend"),iA=new Map,bS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hs(t,e){iA.set(t,e),Jo(e,[t])}for(var Ig=0;Ig<bS.length;Ig++){var Cg=bS[Ig],_L=Cg.toLowerCase(),xL=Cg[0].toUpperCase()+Cg.slice(1);Hs(_L,"on"+xL)}Hs(eA,"onAnimationEnd");Hs(tA,"onAnimationIteration");Hs(nA,"onAnimationStart");Hs("dblclick","onDoubleClick");Hs("focusin","onFocus");Hs("focusout","onBlur");Hs(rA,"onTransitionEnd");ll("onMouseEnter",["mouseout","mouseover"]);ll("onMouseLeave",["mouseout","mouseover"]);ll("onPointerEnter",["pointerout","pointerover"]);ll("onPointerLeave",["pointerout","pointerover"]);Jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pc));function SS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_j(r,e,void 0,t),t.currentTarget=null}function sA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;SS(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;SS(i,a,c),s=l}}}if(Mf)throw t=Zy,Mf=!1,Zy=null,t}function Qe(t,e){var n=e[cv];n===void 0&&(n=e[cv]=new Set);var r=t+"__bubble";n.has(r)||(oA(e,t,2,!1),n.add(r))}function Ag(t,e,n){var r=0;e&&(r|=4),oA(n,t,r,e)}var gd="_reactListening"+Math.random().toString(36).slice(2);function Tu(t){if(!t[gd]){t[gd]=!0,fC.forEach(function(n){n!=="selectionchange"&&(wL.has(n)||Ag(n,!1,t),Ag(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gd]||(e[gd]=!0,Ag("selectionchange",!1,e))}}function oA(t,e,n,r){switch($C(e)){case 1:var i=Mj;break;case 4:i=jj;break;default:i=a0}n=i.bind(null,e,n,t),i=void 0,!Jy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Pg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Eo(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}AC(function(){var c=s,u=r0(n),f=[];e:{var p=iA.get(t);if(p!==void 0){var m=c0,y=t;switch(t){case"keypress":if(sf(n)===0)break e;case"keydown":case"keyup":m=Xj;break;case"focusin":y="focus",m=Sg;break;case"focusout":y="blur",m=Sg;break;case"beforeblur":case"afterblur":m=Sg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=hS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Fj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=eL;break;case eA:case tA:case nA:m=zj;break;case rA:m=nL;break;case"scroll":m=Lj;break;case"wheel":m=iL;break;case"copy":case"cut":case"paste":m=Wj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=fS}var _=(e&4)!==0,x=!_&&t==="scroll",v=_?p!==null?p+"Capture":null:p;_=[];for(var w=c,E;w!==null;){E=w;var R=E.stateNode;if(E.tag===5&&R!==null&&(E=R,v!==null&&(R=_u(w,v),R!=null&&_.push(ku(w,R,E)))),x)break;w=w.return}0<_.length&&(p=new m(p,y,null,n,u),f.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Qy&&(y=n.relatedTarget||n.fromElement)&&(Eo(y)||y[Fi]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?Eo(y):null,y!==null&&(x=Zo(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(_=hS,R="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(_=fS,R="onPointerLeave",v="onPointerEnter",w="pointer"),x=m==null?p:Oa(m),E=y==null?p:Oa(y),p=new _(R,w+"leave",m,n,u),p.target=x,p.relatedTarget=E,R=null,Eo(u)===c&&(_=new _(v,w+"enter",y,n,u),_.target=E,_.relatedTarget=x,R=_),x=R,m&&y)t:{for(_=m,v=y,w=0,E=_;E;E=_a(E))w++;for(E=0,R=v;R;R=_a(R))E++;for(;0<w-E;)_=_a(_),w--;for(;0<E-w;)v=_a(v),E--;for(;w--;){if(_===v||v!==null&&_===v.alternate)break t;_=_a(_),v=_a(v)}_=null}else _=null;m!==null&&ES(f,p,m,_,!1),y!==null&&x!==null&&ES(f,x,y,_,!0)}}e:{if(p=c?Oa(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var C=hL;else if(gS(p))if(YC)C=mL;else{C=fL;var M=dL}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=pL);if(C&&(C=C(t,c))){GC(f,C,n,u);break e}M&&M(t,p,c),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&Hy(p,"number",p.value)}switch(M=c?Oa(c):window,t){case"focusin":(gS(M)||M.contentEditable==="true")&&(Na=M,rv=c,Yc=null);break;case"focusout":Yc=rv=Na=null;break;case"mousedown":iv=!0;break;case"contextmenu":case"mouseup":case"dragend":iv=!1,wS(f,n,u);break;case"selectionchange":if(vL)break;case"keydown":case"keyup":wS(f,n,u)}var T;if(h0)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ra?qC(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(HC&&n.locale!=="ko"&&(Ra||b!=="onCompositionStart"?b==="onCompositionEnd"&&Ra&&(T=WC()):(ps=u,l0="value"in ps?ps.value:ps.textContent,Ra=!0)),M=Uf(c,b),0<M.length&&(b=new dS(b,t,null,n,u),f.push({event:b,listeners:M}),T?b.data=T:(T=KC(n),T!==null&&(b.data=T)))),(T=oL?aL(t,n):lL(t,n))&&(c=Uf(c,"onBeforeInput"),0<c.length&&(u=new dS("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=T))}sA(f,e)})}function ku(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Uf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=_u(t,n),s!=null&&r.unshift(ku(t,s,i)),s=_u(t,e),s!=null&&r.push(ku(t,s,i))),t=t.return}return r}function _a(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ES(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=_u(n,s),l!=null&&o.unshift(ku(n,l,a))):i||(l=_u(n,s),l!=null&&o.push(ku(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bL=/\r\n?/g,SL=/\u0000|\uFFFD/g;function TS(t){return(typeof t=="string"?t:""+t).replace(bL,`
`).replace(SL,"")}function yd(t,e,n){if(e=TS(e),TS(t)!==e&&n)throw Error(K(425))}function Bf(){}var sv=null,ov=null;function av(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lv=typeof setTimeout=="function"?setTimeout:void 0,EL=typeof clearTimeout=="function"?clearTimeout:void 0,kS=typeof Promise=="function"?Promise:void 0,TL=typeof queueMicrotask=="function"?queueMicrotask:typeof kS<"u"?function(t){return kS.resolve(null).then(t).catch(kL)}:lv;function kL(t){setTimeout(function(){throw t})}function Rg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),bu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);bu(e)}function Ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function IS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ol=Math.random().toString(36).slice(2),Gr="__reactFiber$"+Ol,Iu="__reactProps$"+Ol,Fi="__reactContainer$"+Ol,cv="__reactEvents$"+Ol,IL="__reactListeners$"+Ol,CL="__reactHandles$"+Ol;function Eo(t){var e=t[Gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fi]||n[Gr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=IS(t);t!==null;){if(n=t[Gr])return n;t=IS(t)}return e}t=n,n=t.parentNode}return null}function hh(t){return t=t[Gr]||t[Fi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Oa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Xp(t){return t[Iu]||null}var uv=[],Ma=-1;function qs(t){return{current:t}}function Je(t){0>Ma||(t.current=uv[Ma],uv[Ma]=null,Ma--)}function Ke(t,e){Ma++,uv[Ma]=t.current,t.current=e}var Ls={},wn=qs(Ls),Bn=qs(!1),Uo=Ls;function cl(t,e){var n=t.type.contextTypes;if(!n)return Ls;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zn(t){return t=t.childContextTypes,t!=null}function zf(){Je(Bn),Je(wn)}function CS(t,e,n){if(wn.current!==Ls)throw Error(K(168));Ke(wn,e),Ke(Bn,n)}function aA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(K(108,dj(t)||"Unknown",i));return ft({},n,r)}function $f(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ls,Uo=wn.current,Ke(wn,t),Ke(Bn,Bn.current),!0}function AS(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=aA(t,e,Uo),r.__reactInternalMemoizedMergedChildContext=t,Je(Bn),Je(wn),Ke(wn,t)):Je(Bn),Ke(Bn,n)}var Ei=null,Jp=!1,Ng=!1;function lA(t){Ei===null?Ei=[t]:Ei.push(t)}function AL(t){Jp=!0,lA(t)}function Ks(){if(!Ng&&Ei!==null){Ng=!0;var t=0,e=Le;try{var n=Ei;for(Le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ei=null,Jp=!1}catch(i){throw Ei!==null&&(Ei=Ei.slice(t+1)),DC(i0,Ks),i}finally{Le=e,Ng=!1}}return null}var ja=[],La=0,Wf=null,Hf=0,ur=[],hr=0,Bo=null,Ii=1,Ci="";function yo(t,e){ja[La++]=Hf,ja[La++]=Wf,Wf=t,Hf=e}function cA(t,e,n){ur[hr++]=Ii,ur[hr++]=Ci,ur[hr++]=Bo,Bo=t;var r=Ii;t=Ci;var i=32-Ar(r)-1;r&=~(1<<i),n+=1;var s=32-Ar(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ii=1<<32-Ar(e)+i|n<<i|r,Ci=s+t}else Ii=1<<s|n<<i|r,Ci=t}function f0(t){t.return!==null&&(yo(t,1),cA(t,1,0))}function p0(t){for(;t===Wf;)Wf=ja[--La],ja[La]=null,Hf=ja[--La],ja[La]=null;for(;t===Bo;)Bo=ur[--hr],ur[hr]=null,Ci=ur[--hr],ur[hr]=null,Ii=ur[--hr],ur[hr]=null}var tr=null,Xn=null,it=!1,Tr=null;function uA(t,e){var n=dr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function PS(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tr=t,Xn=Ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tr=t,Xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bo!==null?{id:Ii,overflow:Ci}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=dr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tr=t,Xn=null,!0):!1;default:return!1}}function hv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function dv(t){if(it){var e=Xn;if(e){var n=e;if(!PS(t,e)){if(hv(t))throw Error(K(418));e=Ts(n.nextSibling);var r=tr;e&&PS(t,e)?uA(r,n):(t.flags=t.flags&-4097|2,it=!1,tr=t)}}else{if(hv(t))throw Error(K(418));t.flags=t.flags&-4097|2,it=!1,tr=t}}}function RS(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tr=t}function vd(t){if(t!==tr)return!1;if(!it)return RS(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!av(t.type,t.memoizedProps)),e&&(e=Xn)){if(hv(t))throw hA(),Error(K(418));for(;e;)uA(t,e),e=Ts(e.nextSibling)}if(RS(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xn=Ts(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xn=null}}else Xn=tr?Ts(t.stateNode.nextSibling):null;return!0}function hA(){for(var t=Xn;t;)t=Ts(t.nextSibling)}function ul(){Xn=tr=null,it=!1}function m0(t){Tr===null?Tr=[t]:Tr.push(t)}var PL=Gi.ReactCurrentBatchConfig;function pc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function _d(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function NS(t){var e=t._init;return e(t._payload)}function dA(t){function e(v,w){if(t){var E=v.deletions;E===null?(v.deletions=[w],v.flags|=16):E.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function i(v,w){return v=As(v,w),v.index=0,v.sibling=null,v}function s(v,w,E){return v.index=E,t?(E=v.alternate,E!==null?(E=E.index,E<w?(v.flags|=2,w):E):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,E,R){return w===null||w.tag!==6?(w=Fg(E,v.mode,R),w.return=v,w):(w=i(w,E),w.return=v,w)}function l(v,w,E,R){var C=E.type;return C===Pa?u(v,w,E.props.children,R,E.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===is&&NS(C)===w.type)?(R=i(w,E.props),R.ref=pc(v,w,E),R.return=v,R):(R=df(E.type,E.key,E.props,null,v.mode,R),R.ref=pc(v,w,E),R.return=v,R)}function c(v,w,E,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=Ug(E,v.mode,R),w.return=v,w):(w=i(w,E.children||[]),w.return=v,w)}function u(v,w,E,R,C){return w===null||w.tag!==7?(w=Oo(E,v.mode,R,C),w.return=v,w):(w=i(w,E),w.return=v,w)}function f(v,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Fg(""+w,v.mode,E),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ld:return E=df(w.type,w.key,w.props,null,v.mode,E),E.ref=pc(v,null,w),E.return=v,E;case Aa:return w=Ug(w,v.mode,E),w.return=v,w;case is:var R=w._init;return f(v,R(w._payload),E)}if(Cc(w)||cc(w))return w=Oo(w,v.mode,E,null),w.return=v,w;_d(v,w)}return null}function p(v,w,E,R){var C=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return C!==null?null:a(v,w,""+E,R);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ld:return E.key===C?l(v,w,E,R):null;case Aa:return E.key===C?c(v,w,E,R):null;case is:return C=E._init,p(v,w,C(E._payload),R)}if(Cc(E)||cc(E))return C!==null?null:u(v,w,E,R,null);_d(v,E)}return null}function m(v,w,E,R,C){if(typeof R=="string"&&R!==""||typeof R=="number")return v=v.get(E)||null,a(w,v,""+R,C);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ld:return v=v.get(R.key===null?E:R.key)||null,l(w,v,R,C);case Aa:return v=v.get(R.key===null?E:R.key)||null,c(w,v,R,C);case is:var M=R._init;return m(v,w,E,M(R._payload),C)}if(Cc(R)||cc(R))return v=v.get(E)||null,u(w,v,R,C,null);_d(w,R)}return null}function y(v,w,E,R){for(var C=null,M=null,T=w,b=w=0,k=null;T!==null&&b<E.length;b++){T.index>b?(k=T,T=null):k=T.sibling;var A=p(v,T,E[b],R);if(A===null){T===null&&(T=k);break}t&&T&&A.alternate===null&&e(v,T),w=s(A,w,b),M===null?C=A:M.sibling=A,M=A,T=k}if(b===E.length)return n(v,T),it&&yo(v,b),C;if(T===null){for(;b<E.length;b++)T=f(v,E[b],R),T!==null&&(w=s(T,w,b),M===null?C=T:M.sibling=T,M=T);return it&&yo(v,b),C}for(T=r(v,T);b<E.length;b++)k=m(T,v,b,E[b],R),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?b:k.key),w=s(k,w,b),M===null?C=k:M.sibling=k,M=k);return t&&T.forEach(function(O){return e(v,O)}),it&&yo(v,b),C}function _(v,w,E,R){var C=cc(E);if(typeof C!="function")throw Error(K(150));if(E=C.call(E),E==null)throw Error(K(151));for(var M=C=null,T=w,b=w=0,k=null,A=E.next();T!==null&&!A.done;b++,A=E.next()){T.index>b?(k=T,T=null):k=T.sibling;var O=p(v,T,A.value,R);if(O===null){T===null&&(T=k);break}t&&T&&O.alternate===null&&e(v,T),w=s(O,w,b),M===null?C=O:M.sibling=O,M=O,T=k}if(A.done)return n(v,T),it&&yo(v,b),C;if(T===null){for(;!A.done;b++,A=E.next())A=f(v,A.value,R),A!==null&&(w=s(A,w,b),M===null?C=A:M.sibling=A,M=A);return it&&yo(v,b),C}for(T=r(v,T);!A.done;b++,A=E.next())A=m(T,v,b,A.value,R),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?b:A.key),w=s(A,w,b),M===null?C=A:M.sibling=A,M=A);return t&&T.forEach(function(I){return e(v,I)}),it&&yo(v,b),C}function x(v,w,E,R){if(typeof E=="object"&&E!==null&&E.type===Pa&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case ld:e:{for(var C=E.key,M=w;M!==null;){if(M.key===C){if(C=E.type,C===Pa){if(M.tag===7){n(v,M.sibling),w=i(M,E.props.children),w.return=v,v=w;break e}}else if(M.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===is&&NS(C)===M.type){n(v,M.sibling),w=i(M,E.props),w.ref=pc(v,M,E),w.return=v,v=w;break e}n(v,M);break}else e(v,M);M=M.sibling}E.type===Pa?(w=Oo(E.props.children,v.mode,R,E.key),w.return=v,v=w):(R=df(E.type,E.key,E.props,null,v.mode,R),R.ref=pc(v,w,E),R.return=v,v=R)}return o(v);case Aa:e:{for(M=E.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(v,w.sibling),w=i(w,E.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=Ug(E,v.mode,R),w.return=v,v=w}return o(v);case is:return M=E._init,x(v,w,M(E._payload),R)}if(Cc(E))return y(v,w,E,R);if(cc(E))return _(v,w,E,R);_d(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(v,w.sibling),w=i(w,E),w.return=v,v=w):(n(v,w),w=Fg(E,v.mode,R),w.return=v,v=w),o(v)):n(v,w)}return x}var hl=dA(!0),fA=dA(!1),qf=qs(null),Kf=null,Va=null,g0=null;function y0(){g0=Va=Kf=null}function v0(t){var e=qf.current;Je(qf),t._currentValue=e}function fv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Za(t,e){Kf=t,g0=Va=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Un=!0),t.firstContext=null)}function mr(t){var e=t._currentValue;if(g0!==t)if(t={context:t,memoizedValue:e,next:null},Va===null){if(Kf===null)throw Error(K(308));Va=t,Kf.dependencies={lanes:0,firstContext:t}}else Va=Va.next=t;return e}var To=null;function _0(t){To===null?To=[t]:To.push(t)}function pA(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,_0(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ui(t,r)}function Ui(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ss=!1;function x0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Di(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ks(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ui(t,n)}return i=r.interleaved,i===null?(e.next=e,_0(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ui(t,n)}function of(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,s0(t,n)}}function DS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gf(t,e,n,r){var i=t.updateQueue;ss=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,_=a;switch(p=e,m=n,_.tag){case 1:if(y=_.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=ft({},f,p);break e;case 2:ss=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);$o|=o,t.lanes=o,t.memoizedState=f}}function OS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(K(191,i));i.call(r)}}}var dh={},Xr=qs(dh),Cu=qs(dh),Au=qs(dh);function ko(t){if(t===dh)throw Error(K(174));return t}function w0(t,e){switch(Ke(Au,e),Ke(Cu,t),Ke(Xr,dh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ky(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ky(e,t)}Je(Xr),Ke(Xr,e)}function dl(){Je(Xr),Je(Cu),Je(Au)}function gA(t){ko(Au.current);var e=ko(Xr.current),n=Ky(e,t.type);e!==n&&(Ke(Cu,t),Ke(Xr,n))}function b0(t){Cu.current===t&&(Je(Xr),Je(Cu))}var lt=qs(0);function Yf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dg=[];function S0(){for(var t=0;t<Dg.length;t++)Dg[t]._workInProgressVersionPrimary=null;Dg.length=0}var af=Gi.ReactCurrentDispatcher,Og=Gi.ReactCurrentBatchConfig,zo=0,dt=null,Mt=null,zt=null,Qf=!1,Qc=!1,Pu=0,RL=0;function ln(){throw Error(K(321))}function E0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dr(t[n],e[n]))return!1;return!0}function T0(t,e,n,r,i,s){if(zo=s,dt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,af.current=t===null||t.memoizedState===null?ML:jL,t=n(r,i),Qc){s=0;do{if(Qc=!1,Pu=0,25<=s)throw Error(K(301));s+=1,zt=Mt=null,e.updateQueue=null,af.current=LL,t=n(r,i)}while(Qc)}if(af.current=Xf,e=Mt!==null&&Mt.next!==null,zo=0,zt=Mt=dt=null,Qf=!1,e)throw Error(K(300));return t}function k0(){var t=Pu!==0;return Pu=0,t}function Wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?dt.memoizedState=zt=t:zt=zt.next=t,zt}function gr(){if(Mt===null){var t=dt.alternate;t=t!==null?t.memoizedState:null}else t=Mt.next;var e=zt===null?dt.memoizedState:zt.next;if(e!==null)zt=e,Mt=t;else{if(t===null)throw Error(K(310));Mt=t,t={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},zt===null?dt.memoizedState=zt=t:zt=zt.next=t}return zt}function Ru(t,e){return typeof e=="function"?e(t):e}function Mg(t){var e=gr(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=Mt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((zo&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,dt.lanes|=u,$o|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Dr(r,e.memoizedState)||(Un=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,dt.lanes|=s,$o|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jg(t){var e=gr(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Dr(s,e.memoizedState)||(Un=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function yA(){}function vA(t,e){var n=dt,r=gr(),i=e(),s=!Dr(r.memoizedState,i);if(s&&(r.memoizedState=i,Un=!0),r=r.queue,I0(wA.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||zt!==null&&zt.memoizedState.tag&1){if(n.flags|=2048,Nu(9,xA.bind(null,n,r,i,e),void 0,null),$t===null)throw Error(K(349));zo&30||_A(n,e,i)}return i}function _A(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xA(t,e,n,r){e.value=n,e.getSnapshot=r,bA(e)&&SA(t)}function wA(t,e,n){return n(function(){bA(e)&&SA(t)})}function bA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dr(t,n)}catch{return!0}}function SA(t){var e=Ui(t,1);e!==null&&Pr(e,t,1,-1)}function MS(t){var e=Wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ru,lastRenderedState:t},e.queue=t,t=t.dispatch=OL.bind(null,dt,t),[e.memoizedState,t]}function Nu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=dt.updateQueue,e===null?(e={lastEffect:null,stores:null},dt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function EA(){return gr().memoizedState}function lf(t,e,n,r){var i=Wr();dt.flags|=t,i.memoizedState=Nu(1|e,n,void 0,r===void 0?null:r)}function Zp(t,e,n,r){var i=gr();r=r===void 0?null:r;var s=void 0;if(Mt!==null){var o=Mt.memoizedState;if(s=o.destroy,r!==null&&E0(r,o.deps)){i.memoizedState=Nu(e,n,s,r);return}}dt.flags|=t,i.memoizedState=Nu(1|e,n,s,r)}function jS(t,e){return lf(8390656,8,t,e)}function I0(t,e){return Zp(2048,8,t,e)}function TA(t,e){return Zp(4,2,t,e)}function kA(t,e){return Zp(4,4,t,e)}function IA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function CA(t,e,n){return n=n!=null?n.concat([t]):null,Zp(4,4,IA.bind(null,e,t),n)}function C0(){}function AA(t,e){var n=gr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&E0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function PA(t,e){var n=gr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&E0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function RA(t,e,n){return zo&21?(Dr(n,e)||(n=jC(),dt.lanes|=n,$o|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Un=!0),t.memoizedState=n)}function NL(t,e){var n=Le;Le=n!==0&&4>n?n:4,t(!0);var r=Og.transition;Og.transition={};try{t(!1),e()}finally{Le=n,Og.transition=r}}function NA(){return gr().memoizedState}function DL(t,e,n){var r=Cs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},DA(t))OA(e,n);else if(n=pA(t,e,n,r),n!==null){var i=Cn();Pr(n,t,r,i),MA(n,e,r)}}function OL(t,e,n){var r=Cs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(DA(t))OA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Dr(a,o)){var l=e.interleaved;l===null?(i.next=i,_0(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=pA(t,e,i,r),n!==null&&(i=Cn(),Pr(n,t,r,i),MA(n,e,r))}}function DA(t){var e=t.alternate;return t===dt||e!==null&&e===dt}function OA(t,e){Qc=Qf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function MA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,s0(t,n)}}var Xf={readContext:mr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},ML={readContext:mr,useCallback:function(t,e){return Wr().memoizedState=[t,e===void 0?null:e],t},useContext:mr,useEffect:jS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,lf(4194308,4,IA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lf(4194308,4,t,e)},useInsertionEffect:function(t,e){return lf(4,2,t,e)},useMemo:function(t,e){var n=Wr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=DL.bind(null,dt,t),[r.memoizedState,t]},useRef:function(t){var e=Wr();return t={current:t},e.memoizedState=t},useState:MS,useDebugValue:C0,useDeferredValue:function(t){return Wr().memoizedState=t},useTransition:function(){var t=MS(!1),e=t[0];return t=NL.bind(null,t[1]),Wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=dt,i=Wr();if(it){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),$t===null)throw Error(K(349));zo&30||_A(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,jS(wA.bind(null,r,s,t),[t]),r.flags|=2048,Nu(9,xA.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Wr(),e=$t.identifierPrefix;if(it){var n=Ci,r=Ii;n=(r&~(1<<32-Ar(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=RL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},jL={readContext:mr,useCallback:AA,useContext:mr,useEffect:I0,useImperativeHandle:CA,useInsertionEffect:TA,useLayoutEffect:kA,useMemo:PA,useReducer:Mg,useRef:EA,useState:function(){return Mg(Ru)},useDebugValue:C0,useDeferredValue:function(t){var e=gr();return RA(e,Mt.memoizedState,t)},useTransition:function(){var t=Mg(Ru)[0],e=gr().memoizedState;return[t,e]},useMutableSource:yA,useSyncExternalStore:vA,useId:NA,unstable_isNewReconciler:!1},LL={readContext:mr,useCallback:AA,useContext:mr,useEffect:I0,useImperativeHandle:CA,useInsertionEffect:TA,useLayoutEffect:kA,useMemo:PA,useReducer:jg,useRef:EA,useState:function(){return jg(Ru)},useDebugValue:C0,useDeferredValue:function(t){var e=gr();return Mt===null?e.memoizedState=t:RA(e,Mt.memoizedState,t)},useTransition:function(){var t=jg(Ru)[0],e=gr().memoizedState;return[t,e]},useMutableSource:yA,useSyncExternalStore:vA,useId:NA,unstable_isNewReconciler:!1};function br(t,e){if(t&&t.defaultProps){e=ft({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ft({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var em={isMounted:function(t){return(t=t._reactInternals)?Zo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Cn(),i=Cs(t),s=Di(r,i);s.payload=e,n!=null&&(s.callback=n),e=ks(t,s,i),e!==null&&(Pr(e,t,i,r),of(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Cn(),i=Cs(t),s=Di(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ks(t,s,i),e!==null&&(Pr(e,t,i,r),of(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Cn(),r=Cs(t),i=Di(n,r);i.tag=2,e!=null&&(i.callback=e),e=ks(t,i,r),e!==null&&(Pr(e,t,r,n),of(e,t,r))}};function LS(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Eu(n,r)||!Eu(i,s):!0}function jA(t,e,n){var r=!1,i=Ls,s=e.contextType;return typeof s=="object"&&s!==null?s=mr(s):(i=zn(e)?Uo:wn.current,r=e.contextTypes,s=(r=r!=null)?cl(t,i):Ls),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=em,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function VS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&em.enqueueReplaceState(e,e.state,null)}function mv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},x0(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=mr(s):(s=zn(e)?Uo:wn.current,i.context=cl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(pv(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&em.enqueueReplaceState(i,i.state,null),Gf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fl(t,e){try{var n="",r=e;do n+=hj(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Lg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var VL=typeof WeakMap=="function"?WeakMap:Map;function LA(t,e,n){n=Di(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Zf||(Zf=!0,kv=r),gv(t,e)},n}function VA(t,e,n){n=Di(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){gv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){gv(t,e),typeof r!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function FS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new VL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=JL.bind(null,t,e,n),e.then(t,t))}function US(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function BS(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Di(-1,1),e.tag=2,ks(n,e,1))),n.lanes|=1),t)}var FL=Gi.ReactCurrentOwner,Un=!1;function kn(t,e,n,r){e.child=t===null?fA(e,null,n,r):hl(e,t.child,n,r)}function zS(t,e,n,r,i){n=n.render;var s=e.ref;return Za(e,i),r=T0(t,e,n,r,s,i),n=k0(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bi(t,e,i)):(it&&n&&f0(e),e.flags|=1,kn(t,e,r,i),e.child)}function $S(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!j0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,FA(t,e,s,r,i)):(t=df(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Eu,n(o,r)&&t.ref===e.ref)return Bi(t,e,i)}return e.flags|=1,t=As(s,r),t.ref=e.ref,t.return=e,e.child=t}function FA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Eu(s,r)&&t.ref===e.ref)if(Un=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Un=!0);else return e.lanes=t.lanes,Bi(t,e,i)}return yv(t,e,n,r,i)}function UA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Ua,Yn),Yn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(Ua,Yn),Yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ke(Ua,Yn),Yn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ke(Ua,Yn),Yn|=r;return kn(t,e,i,n),e.child}function BA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yv(t,e,n,r,i){var s=zn(n)?Uo:wn.current;return s=cl(e,s),Za(e,i),n=T0(t,e,n,r,s,i),r=k0(),t!==null&&!Un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Bi(t,e,i)):(it&&r&&f0(e),e.flags|=1,kn(t,e,n,i),e.child)}function WS(t,e,n,r,i){if(zn(n)){var s=!0;$f(e)}else s=!1;if(Za(e,i),e.stateNode===null)cf(t,e),jA(e,n,r),mv(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=mr(c):(c=zn(n)?Uo:wn.current,c=cl(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&VS(e,o,r,c),ss=!1;var p=e.memoizedState;o.state=p,Gf(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Bn.current||ss?(typeof u=="function"&&(pv(e,n,u,r),l=e.memoizedState),(a=ss||LS(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,mA(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:br(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=mr(l):(l=zn(n)?Uo:wn.current,l=cl(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&VS(e,o,r,l),ss=!1,p=e.memoizedState,o.state=p,Gf(e,r,o,i);var y=e.memoizedState;a!==f||p!==y||Bn.current||ss?(typeof m=="function"&&(pv(e,n,m,r),y=e.memoizedState),(c=ss||LS(e,n,c,r,p,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return vv(t,e,n,r,s,i)}function vv(t,e,n,r,i,s){BA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&AS(e,n,!1),Bi(t,e,s);r=e.stateNode,FL.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=hl(e,t.child,null,s),e.child=hl(e,null,a,s)):kn(t,e,a,s),e.memoizedState=r.state,i&&AS(e,n,!0),e.child}function zA(t){var e=t.stateNode;e.pendingContext?CS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&CS(t,e.context,!1),w0(t,e.containerInfo)}function HS(t,e,n,r,i){return ul(),m0(i),e.flags|=256,kn(t,e,n,r),e.child}var _v={dehydrated:null,treeContext:null,retryLane:0};function xv(t){return{baseLanes:t,cachePool:null,transitions:null}}function $A(t,e,n){var r=e.pendingProps,i=lt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ke(lt,i&1),t===null)return dv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=rm(o,r,0,null),t=Oo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=xv(n),e.memoizedState=_v,t):A0(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return UL(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=As(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=As(a,s):(s=Oo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?xv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=_v,r}return s=t.child,t=s.sibling,r=As(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function A0(t,e){return e=rm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xd(t,e,n,r){return r!==null&&m0(r),hl(e,t.child,null,n),t=A0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function UL(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Lg(Error(K(422))),xd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=rm({mode:"visible",children:r.children},i,0,null),s=Oo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&hl(e,t.child,null,o),e.child.memoizedState=xv(o),e.memoizedState=_v,s);if(!(e.mode&1))return xd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(K(419)),r=Lg(s,r,void 0),xd(t,e,o,r)}if(a=(o&t.childLanes)!==0,Un||a){if(r=$t,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ui(t,i),Pr(r,t,i,-1))}return M0(),r=Lg(Error(K(421))),xd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=ZL.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Xn=Ts(i.nextSibling),tr=e,it=!0,Tr=null,t!==null&&(ur[hr++]=Ii,ur[hr++]=Ci,ur[hr++]=Bo,Ii=t.id,Ci=t.overflow,Bo=e),e=A0(e,r.children),e.flags|=4096,e)}function qS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fv(t.return,e,n)}function Vg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function WA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(kn(t,e,r.children,n),r=lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qS(t,n,e);else if(t.tag===19)qS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ke(lt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Yf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Vg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Yf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Vg(e,!0,n,null,s);break;case"together":Vg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$o|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=As(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=As(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function BL(t,e,n){switch(e.tag){case 3:zA(e),ul();break;case 5:gA(e);break;case 1:zn(e.type)&&$f(e);break;case 4:w0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ke(qf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ke(lt,lt.current&1),e.flags|=128,null):n&e.child.childLanes?$A(t,e,n):(Ke(lt,lt.current&1),t=Bi(t,e,n),t!==null?t.sibling:null);Ke(lt,lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return WA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ke(lt,lt.current),r)break;return null;case 22:case 23:return e.lanes=0,UA(t,e,n)}return Bi(t,e,n)}var HA,wv,qA,KA;HA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wv=function(){};qA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ko(Xr.current);var s=null;switch(n){case"input":i=$y(t,i),r=$y(t,r),s=[];break;case"select":i=ft({},i,{value:void 0}),r=ft({},r,{value:void 0}),s=[];break;case"textarea":i=qy(t,i),r=qy(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Bf)}Gy(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(yu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(yu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Qe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};KA=function(t,e,n,r){n!==r&&(e.flags|=4)};function mc(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function cn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function zL(t,e,n){var r=e.pendingProps;switch(p0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(e),null;case 1:return zn(e.type)&&zf(),cn(e),null;case 3:return r=e.stateNode,dl(),Je(Bn),Je(wn),S0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tr!==null&&(Av(Tr),Tr=null))),wv(t,e),cn(e),null;case 5:b0(e);var i=ko(Au.current);if(n=e.type,t!==null&&e.stateNode!=null)qA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return cn(e),null}if(t=ko(Xr.current),vd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Gr]=e,r[Iu]=s,t=(e.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(i=0;i<Pc.length;i++)Qe(Pc[i],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":tS(r,s),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Qe("invalid",r);break;case"textarea":rS(r,s),Qe("invalid",r)}Gy(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&yd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&yd(r.textContent,a,t),i=["children",""+a]):yu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Qe("scroll",r)}switch(n){case"input":cd(r),nS(r,s,!0);break;case"textarea":cd(r),iS(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Bf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Gr]=e,t[Iu]=r,HA(t,e,!1,!1),e.stateNode=t;e:{switch(o=Yy(n,r),n){case"dialog":Qe("cancel",t),Qe("close",t),i=r;break;case"iframe":case"object":case"embed":Qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Pc.length;i++)Qe(Pc[i],t);i=r;break;case"source":Qe("error",t),i=r;break;case"img":case"image":case"link":Qe("error",t),Qe("load",t),i=r;break;case"details":Qe("toggle",t),i=r;break;case"input":tS(t,r),i=$y(t,r),Qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ft({},r,{value:void 0}),Qe("invalid",t);break;case"textarea":rS(t,r),i=qy(t,r),Qe("invalid",t);break;default:i=r}Gy(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?EC(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&bC(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&vu(t,l):typeof l=="number"&&vu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(yu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Qe("scroll",t):l!=null&&Z_(t,s,l,o))}switch(n){case"input":cd(t),nS(t,r,!1);break;case"textarea":cd(t),iS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+js(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ya(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ya(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Bf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return cn(e),null;case 6:if(t&&e.stateNode!=null)KA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=ko(Au.current),ko(Xr.current),vd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Gr]=e,(s=r.nodeValue!==n)&&(t=tr,t!==null))switch(t.tag){case 3:yd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Gr]=e,e.stateNode=r}return cn(e),null;case 13:if(Je(lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&Xn!==null&&e.mode&1&&!(e.flags&128))hA(),ul(),e.flags|=98560,s=!1;else if(s=vd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[Gr]=e}else ul(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;cn(e),s=!1}else Tr!==null&&(Av(Tr),Tr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||lt.current&1?jt===0&&(jt=3):M0())),e.updateQueue!==null&&(e.flags|=4),cn(e),null);case 4:return dl(),wv(t,e),t===null&&Tu(e.stateNode.containerInfo),cn(e),null;case 10:return v0(e.type._context),cn(e),null;case 17:return zn(e.type)&&zf(),cn(e),null;case 19:if(Je(lt),s=e.memoizedState,s===null)return cn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)mc(s,!1);else{if(jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Yf(t),o!==null){for(e.flags|=128,mc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(lt,lt.current&1|2),e.child}t=t.sibling}s.tail!==null&&St()>pl&&(e.flags|=128,r=!0,mc(s,!1),e.lanes=4194304)}else{if(!r)if(t=Yf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),mc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!it)return cn(e),null}else 2*St()-s.renderingStartTime>pl&&n!==1073741824&&(e.flags|=128,r=!0,mc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=St(),e.sibling=null,n=lt.current,Ke(lt,r?n&1|2:n&1),e):(cn(e),null);case 22:case 23:return O0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yn&1073741824&&(cn(e),e.subtreeFlags&6&&(e.flags|=8192)):cn(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function $L(t,e){switch(p0(e),e.tag){case 1:return zn(e.type)&&zf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return dl(),Je(Bn),Je(wn),S0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return b0(e),null;case 13:if(Je(lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));ul()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(lt),null;case 4:return dl(),null;case 10:return v0(e.type._context),null;case 22:case 23:return O0(),null;case 24:return null;default:return null}}var wd=!1,mn=!1,WL=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Fa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_t(t,e,r)}else n.current=null}function bv(t,e,n){try{n()}catch(r){_t(t,e,r)}}var KS=!1;function HL(t,e){if(sv=Vf,t=JC(),d0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,p=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ov={focusedElem:t,selectionRange:n},Vf=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,x=y.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?_:br(e.type,_),x);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(R){_t(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return y=KS,KS=!1,y}function Xc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&bv(e,n,s)}i=i.next}while(i!==r)}}function tm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Sv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function GA(t){var e=t.alternate;e!==null&&(t.alternate=null,GA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gr],delete e[Iu],delete e[cv],delete e[IL],delete e[CL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function YA(t){return t.tag===5||t.tag===3||t.tag===4}function GS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||YA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ev(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bf));else if(r!==4&&(t=t.child,t!==null))for(Ev(t,e,n),t=t.sibling;t!==null;)Ev(t,e,n),t=t.sibling}function Tv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Tv(t,e,n),t=t.sibling;t!==null;)Tv(t,e,n),t=t.sibling}var Kt=null,Er=!1;function es(t,e,n){for(n=n.child;n!==null;)QA(t,e,n),n=n.sibling}function QA(t,e,n){if(Qr&&typeof Qr.onCommitFiberUnmount=="function")try{Qr.onCommitFiberUnmount(Kp,n)}catch{}switch(n.tag){case 5:mn||Fa(n,e);case 6:var r=Kt,i=Er;Kt=null,es(t,e,n),Kt=r,Er=i,Kt!==null&&(Er?(t=Kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kt.removeChild(n.stateNode));break;case 18:Kt!==null&&(Er?(t=Kt,n=n.stateNode,t.nodeType===8?Rg(t.parentNode,n):t.nodeType===1&&Rg(t,n),bu(t)):Rg(Kt,n.stateNode));break;case 4:r=Kt,i=Er,Kt=n.stateNode.containerInfo,Er=!0,es(t,e,n),Kt=r,Er=i;break;case 0:case 11:case 14:case 15:if(!mn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&bv(n,e,o),i=i.next}while(i!==r)}es(t,e,n);break;case 1:if(!mn&&(Fa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_t(n,e,a)}es(t,e,n);break;case 21:es(t,e,n);break;case 22:n.mode&1?(mn=(r=mn)||n.memoizedState!==null,es(t,e,n),mn=r):es(t,e,n);break;default:es(t,e,n)}}function YS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new WL),e.forEach(function(r){var i=eV.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Kt=a.stateNode,Er=!1;break e;case 3:Kt=a.stateNode.containerInfo,Er=!0;break e;case 4:Kt=a.stateNode.containerInfo,Er=!0;break e}a=a.return}if(Kt===null)throw Error(K(160));QA(s,o,i),Kt=null,Er=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){_t(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)XA(e,t),e=e.sibling}function XA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xr(e,t),Ur(t),r&4){try{Xc(3,t,t.return),tm(3,t)}catch(_){_t(t,t.return,_)}try{Xc(5,t,t.return)}catch(_){_t(t,t.return,_)}}break;case 1:xr(e,t),Ur(t),r&512&&n!==null&&Fa(n,n.return);break;case 5:if(xr(e,t),Ur(t),r&512&&n!==null&&Fa(n,n.return),t.flags&32){var i=t.stateNode;try{vu(i,"")}catch(_){_t(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&_C(i,s),Yy(a,o);var c=Yy(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?EC(i,f):u==="dangerouslySetInnerHTML"?bC(i,f):u==="children"?vu(i,f):Z_(i,u,f,c)}switch(a){case"input":Wy(i,s);break;case"textarea":xC(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Ya(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ya(i,!!s.multiple,s.defaultValue,!0):Ya(i,!!s.multiple,s.multiple?[]:"",!1))}i[Iu]=s}catch(_){_t(t,t.return,_)}}break;case 6:if(xr(e,t),Ur(t),r&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){_t(t,t.return,_)}}break;case 3:if(xr(e,t),Ur(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{bu(e.containerInfo)}catch(_){_t(t,t.return,_)}break;case 4:xr(e,t),Ur(t);break;case 13:xr(e,t),Ur(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(N0=St())),r&4&&YS(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(mn=(c=mn)||u,xr(e,t),mn=c):xr(e,t),Ur(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ie=t,u=t.child;u!==null;){for(f=ie=u;ie!==null;){switch(p=ie,m=p.child,p.tag){case 0:case 11:case 14:case 15:Xc(4,p,p.return);break;case 1:Fa(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){_t(r,n,_)}}break;case 5:Fa(p,p.return);break;case 22:if(p.memoizedState!==null){XS(f);continue}}m!==null?(m.return=p,ie=m):XS(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=SC("display",o))}catch(_){_t(t,t.return,_)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(_){_t(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:xr(e,t),Ur(t),r&4&&YS(t);break;case 21:break;default:xr(e,t),Ur(t)}}function Ur(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(YA(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(vu(i,""),r.flags&=-33);var s=GS(t);Tv(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=GS(t);Ev(t,a,o);break;default:throw Error(K(161))}}catch(l){_t(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function qL(t,e,n){ie=t,JA(t)}function JA(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||wd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||mn;a=wd;var c=mn;if(wd=o,(mn=l)&&!c)for(ie=i;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?JS(i):l!==null?(l.return=o,ie=l):JS(i);for(;s!==null;)ie=s,JA(s),s=s.sibling;ie=i,wd=a,mn=c}QS(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ie=s):QS(t)}}function QS(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mn||tm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:br(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&OS(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}OS(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&bu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}mn||e.flags&512&&Sv(e)}catch(p){_t(e,e.return,p)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function XS(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function JS(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tm(4,e)}catch(l){_t(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){_t(e,i,l)}}var s=e.return;try{Sv(e)}catch(l){_t(e,s,l)}break;case 5:var o=e.return;try{Sv(e)}catch(l){_t(e,o,l)}}}catch(l){_t(e,e.return,l)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var KL=Math.ceil,Jf=Gi.ReactCurrentDispatcher,P0=Gi.ReactCurrentOwner,pr=Gi.ReactCurrentBatchConfig,Re=0,$t=null,At=null,Jt=0,Yn=0,Ua=qs(0),jt=0,Du=null,$o=0,nm=0,R0=0,Jc=null,Ln=null,N0=0,pl=1/0,Si=null,Zf=!1,kv=null,Is=null,bd=!1,ms=null,ep=0,Zc=0,Iv=null,uf=-1,hf=0;function Cn(){return Re&6?St():uf!==-1?uf:uf=St()}function Cs(t){return t.mode&1?Re&2&&Jt!==0?Jt&-Jt:PL.transition!==null?(hf===0&&(hf=jC()),hf):(t=Le,t!==0||(t=window.event,t=t===void 0?16:$C(t.type)),t):1}function Pr(t,e,n,r){if(50<Zc)throw Zc=0,Iv=null,Error(K(185));ch(t,n,r),(!(Re&2)||t!==$t)&&(t===$t&&(!(Re&2)&&(nm|=n),jt===4&&as(t,Jt)),$n(t,r),n===1&&Re===0&&!(e.mode&1)&&(pl=St()+500,Jp&&Ks()))}function $n(t,e){var n=t.callbackNode;Pj(t,e);var r=Lf(t,t===$t?Jt:0);if(r===0)n!==null&&aS(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&aS(n),e===1)t.tag===0?AL(ZS.bind(null,t)):lA(ZS.bind(null,t)),TL(function(){!(Re&6)&&Ks()}),n=null;else{switch(LC(r)){case 1:n=i0;break;case 4:n=OC;break;case 16:n=jf;break;case 536870912:n=MC;break;default:n=jf}n=oP(n,ZA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ZA(t,e){if(uf=-1,hf=0,Re&6)throw Error(K(327));var n=t.callbackNode;if(el()&&t.callbackNode!==n)return null;var r=Lf(t,t===$t?Jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=tp(t,r);else{e=r;var i=Re;Re|=2;var s=tP();($t!==t||Jt!==e)&&(Si=null,pl=St()+500,Do(t,e));do try{QL();break}catch(a){eP(t,a)}while(!0);y0(),Jf.current=s,Re=i,At!==null?e=0:($t=null,Jt=0,e=jt)}if(e!==0){if(e===2&&(i=ev(t),i!==0&&(r=i,e=Cv(t,i))),e===1)throw n=Du,Do(t,0),as(t,r),$n(t,St()),n;if(e===6)as(t,r);else{if(i=t.current.alternate,!(r&30)&&!GL(i)&&(e=tp(t,r),e===2&&(s=ev(t),s!==0&&(r=s,e=Cv(t,s))),e===1))throw n=Du,Do(t,0),as(t,r),$n(t,St()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:vo(t,Ln,Si);break;case 3:if(as(t,r),(r&130023424)===r&&(e=N0+500-St(),10<e)){if(Lf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Cn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=lv(vo.bind(null,t,Ln,Si),e);break}vo(t,Ln,Si);break;case 4:if(as(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ar(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=St()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*KL(r/1960))-r,10<r){t.timeoutHandle=lv(vo.bind(null,t,Ln,Si),r);break}vo(t,Ln,Si);break;case 5:vo(t,Ln,Si);break;default:throw Error(K(329))}}}return $n(t,St()),t.callbackNode===n?ZA.bind(null,t):null}function Cv(t,e){var n=Jc;return t.current.memoizedState.isDehydrated&&(Do(t,e).flags|=256),t=tp(t,e),t!==2&&(e=Ln,Ln=n,e!==null&&Av(e)),t}function Av(t){Ln===null?Ln=t:Ln.push.apply(Ln,t)}function GL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Dr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function as(t,e){for(e&=~R0,e&=~nm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ar(e),r=1<<n;t[n]=-1,e&=~r}}function ZS(t){if(Re&6)throw Error(K(327));el();var e=Lf(t,0);if(!(e&1))return $n(t,St()),null;var n=tp(t,e);if(t.tag!==0&&n===2){var r=ev(t);r!==0&&(e=r,n=Cv(t,r))}if(n===1)throw n=Du,Do(t,0),as(t,e),$n(t,St()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vo(t,Ln,Si),$n(t,St()),null}function D0(t,e){var n=Re;Re|=1;try{return t(e)}finally{Re=n,Re===0&&(pl=St()+500,Jp&&Ks())}}function Wo(t){ms!==null&&ms.tag===0&&!(Re&6)&&el();var e=Re;Re|=1;var n=pr.transition,r=Le;try{if(pr.transition=null,Le=1,t)return t()}finally{Le=r,pr.transition=n,Re=e,!(Re&6)&&Ks()}}function O0(){Yn=Ua.current,Je(Ua)}function Do(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,EL(n)),At!==null)for(n=At.return;n!==null;){var r=n;switch(p0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&zf();break;case 3:dl(),Je(Bn),Je(wn),S0();break;case 5:b0(r);break;case 4:dl();break;case 13:Je(lt);break;case 19:Je(lt);break;case 10:v0(r.type._context);break;case 22:case 23:O0()}n=n.return}if($t=t,At=t=As(t.current,null),Jt=Yn=e,jt=0,Du=null,R0=nm=$o=0,Ln=Jc=null,To!==null){for(e=0;e<To.length;e++)if(n=To[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}To=null}return t}function eP(t,e){do{var n=At;try{if(y0(),af.current=Xf,Qf){for(var r=dt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Qf=!1}if(zo=0,zt=Mt=dt=null,Qc=!1,Pu=0,P0.current=null,n===null||n.return===null){jt=1,Du=e,At=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Jt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=US(o);if(m!==null){m.flags&=-257,BS(m,o,a,s,e),m.mode&1&&FS(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var _=new Set;_.add(l),e.updateQueue=_}else y.add(l);break e}else{if(!(e&1)){FS(s,c,e),M0();break e}l=Error(K(426))}}else if(it&&a.mode&1){var x=US(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),BS(x,o,a,s,e),m0(fl(l,a));break e}}s=l=fl(l,a),jt!==4&&(jt=2),Jc===null?Jc=[s]:Jc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=LA(s,l,e);DS(s,v);break e;case 1:a=l;var w=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Is===null||!Is.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=VA(s,a,e);DS(s,R);break e}}s=s.return}while(s!==null)}rP(n)}catch(C){e=C,At===n&&n!==null&&(At=n=n.return);continue}break}while(!0)}function tP(){var t=Jf.current;return Jf.current=Xf,t===null?Xf:t}function M0(){(jt===0||jt===3||jt===2)&&(jt=4),$t===null||!($o&268435455)&&!(nm&268435455)||as($t,Jt)}function tp(t,e){var n=Re;Re|=2;var r=tP();($t!==t||Jt!==e)&&(Si=null,Do(t,e));do try{YL();break}catch(i){eP(t,i)}while(!0);if(y0(),Re=n,Jf.current=r,At!==null)throw Error(K(261));return $t=null,Jt=0,jt}function YL(){for(;At!==null;)nP(At)}function QL(){for(;At!==null&&!wj();)nP(At)}function nP(t){var e=sP(t.alternate,t,Yn);t.memoizedProps=t.pendingProps,e===null?rP(t):At=e,P0.current=null}function rP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$L(n,e),n!==null){n.flags&=32767,At=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jt=6,At=null;return}}else if(n=zL(n,e,Yn),n!==null){At=n;return}if(e=e.sibling,e!==null){At=e;return}At=e=t}while(e!==null);jt===0&&(jt=5)}function vo(t,e,n){var r=Le,i=pr.transition;try{pr.transition=null,Le=1,XL(t,e,n,r)}finally{pr.transition=i,Le=r}return null}function XL(t,e,n,r){do el();while(ms!==null);if(Re&6)throw Error(K(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Rj(t,s),t===$t&&(At=$t=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bd||(bd=!0,oP(jf,function(){return el(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=pr.transition,pr.transition=null;var o=Le;Le=1;var a=Re;Re|=4,P0.current=null,HL(t,n),XA(n,t),yL(ov),Vf=!!sv,ov=sv=null,t.current=n,qL(n),bj(),Re=a,Le=o,pr.transition=s}else t.current=n;if(bd&&(bd=!1,ms=t,ep=i),s=t.pendingLanes,s===0&&(Is=null),Tj(n.stateNode),$n(t,St()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Zf)throw Zf=!1,t=kv,kv=null,t;return ep&1&&t.tag!==0&&el(),s=t.pendingLanes,s&1?t===Iv?Zc++:(Zc=0,Iv=t):Zc=0,Ks(),null}function el(){if(ms!==null){var t=LC(ep),e=pr.transition,n=Le;try{if(pr.transition=null,Le=16>t?16:t,ms===null)var r=!1;else{if(t=ms,ms=null,ep=0,Re&6)throw Error(K(331));var i=Re;for(Re|=4,ie=t.current;ie!==null;){var s=ie,o=s.child;if(ie.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ie=c;ie!==null;){var u=ie;switch(u.tag){case 0:case 11:case 15:Xc(8,u,s)}var f=u.child;if(f!==null)f.return=u,ie=f;else for(;ie!==null;){u=ie;var p=u.sibling,m=u.return;if(GA(u),u===c){ie=null;break}if(p!==null){p.return=m,ie=p;break}ie=m}}}var y=s.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var x=_.sibling;_.sibling=null,_=x}while(_!==null)}}ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ie=o;else e:for(;ie!==null;){if(s=ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Xc(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,ie=v;break e}ie=s.return}}var w=t.current;for(ie=w;ie!==null;){o=ie;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ie=E;else e:for(o=w;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:tm(9,a)}}catch(C){_t(a,a.return,C)}if(a===o){ie=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,ie=R;break e}ie=a.return}}if(Re=i,Ks(),Qr&&typeof Qr.onPostCommitFiberRoot=="function")try{Qr.onPostCommitFiberRoot(Kp,t)}catch{}r=!0}return r}finally{Le=n,pr.transition=e}}return!1}function eE(t,e,n){e=fl(n,e),e=LA(t,e,1),t=ks(t,e,1),e=Cn(),t!==null&&(ch(t,1,e),$n(t,e))}function _t(t,e,n){if(t.tag===3)eE(t,t,n);else for(;e!==null;){if(e.tag===3){eE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Is===null||!Is.has(r))){t=fl(n,t),t=VA(e,t,1),e=ks(e,t,1),t=Cn(),e!==null&&(ch(e,1,t),$n(e,t));break}}e=e.return}}function JL(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Cn(),t.pingedLanes|=t.suspendedLanes&n,$t===t&&(Jt&n)===n&&(jt===4||jt===3&&(Jt&130023424)===Jt&&500>St()-N0?Do(t,0):R0|=n),$n(t,e)}function iP(t,e){e===0&&(t.mode&1?(e=dd,dd<<=1,!(dd&130023424)&&(dd=4194304)):e=1);var n=Cn();t=Ui(t,e),t!==null&&(ch(t,e,n),$n(t,n))}function ZL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iP(t,n)}function eV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),iP(t,n)}var sP;sP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bn.current)Un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Un=!1,BL(t,e,n);Un=!!(t.flags&131072)}else Un=!1,it&&e.flags&1048576&&cA(e,Hf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;cf(t,e),t=e.pendingProps;var i=cl(e,wn.current);Za(e,n),i=T0(null,e,r,t,i,n);var s=k0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zn(r)?(s=!0,$f(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,x0(e),i.updater=em,e.stateNode=i,i._reactInternals=e,mv(e,r,t,n),e=vv(null,e,r,!0,s,n)):(e.tag=0,it&&s&&f0(e),kn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(cf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=nV(r),t=br(r,t),i){case 0:e=yv(null,e,r,t,n);break e;case 1:e=WS(null,e,r,t,n);break e;case 11:e=zS(null,e,r,t,n);break e;case 14:e=$S(null,e,r,br(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:br(r,i),yv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:br(r,i),WS(t,e,r,i,n);case 3:e:{if(zA(e),t===null)throw Error(K(387));r=e.pendingProps,s=e.memoizedState,i=s.element,mA(t,e),Gf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=fl(Error(K(423)),e),e=HS(t,e,r,n,i);break e}else if(r!==i){i=fl(Error(K(424)),e),e=HS(t,e,r,n,i);break e}else for(Xn=Ts(e.stateNode.containerInfo.firstChild),tr=e,it=!0,Tr=null,n=fA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ul(),r===i){e=Bi(t,e,n);break e}kn(t,e,r,n)}e=e.child}return e;case 5:return gA(e),t===null&&dv(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,av(r,i)?o=null:s!==null&&av(r,s)&&(e.flags|=32),BA(t,e),kn(t,e,o,n),e.child;case 6:return t===null&&dv(e),null;case 13:return $A(t,e,n);case 4:return w0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=hl(e,null,r,n):kn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:br(r,i),zS(t,e,r,i,n);case 7:return kn(t,e,e.pendingProps,n),e.child;case 8:return kn(t,e,e.pendingProps.children,n),e.child;case 12:return kn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ke(qf,r._currentValue),r._currentValue=o,s!==null)if(Dr(s.value,o)){if(s.children===i.children&&!Bn.current){e=Bi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Di(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),fv(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),fv(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}kn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Za(e,n),i=mr(i),r=r(i),e.flags|=1,kn(t,e,r,n),e.child;case 14:return r=e.type,i=br(r,e.pendingProps),i=br(r.type,i),$S(t,e,r,i,n);case 15:return FA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:br(r,i),cf(t,e),e.tag=1,zn(r)?(t=!0,$f(e)):t=!1,Za(e,n),jA(e,r,i),mv(e,r,i,n),vv(null,e,r,!0,t,n);case 19:return WA(t,e,n);case 22:return UA(t,e,n)}throw Error(K(156,e.tag))};function oP(t,e){return DC(t,e)}function tV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(t,e,n,r){return new tV(t,e,n,r)}function j0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nV(t){if(typeof t=="function")return j0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===t0)return 11;if(t===n0)return 14}return 2}function As(t,e){var n=t.alternate;return n===null?(n=dr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function df(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")j0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Pa:return Oo(n.children,i,s,e);case e0:o=8,i|=8;break;case Fy:return t=dr(12,n,e,i|2),t.elementType=Fy,t.lanes=s,t;case Uy:return t=dr(13,n,e,i),t.elementType=Uy,t.lanes=s,t;case By:return t=dr(19,n,e,i),t.elementType=By,t.lanes=s,t;case gC:return rm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pC:o=10;break e;case mC:o=9;break e;case t0:o=11;break e;case n0:o=14;break e;case is:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=dr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Oo(t,e,n,r){return t=dr(7,t,r,e),t.lanes=n,t}function rm(t,e,n,r){return t=dr(22,t,r,e),t.elementType=gC,t.lanes=n,t.stateNode={isHidden:!1},t}function Fg(t,e,n){return t=dr(6,t,null,e),t.lanes=n,t}function Ug(t,e,n){return e=dr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function rV(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xg(0),this.expirationTimes=xg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function L0(t,e,n,r,i,s,o,a,l){return t=new rV(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=dr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},x0(s),t}function iV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Aa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function aP(t){if(!t)return Ls;t=t._reactInternals;e:{if(Zo(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(zn(n))return aA(t,n,e)}return e}function lP(t,e,n,r,i,s,o,a,l){return t=L0(n,r,!0,t,i,s,o,a,l),t.context=aP(null),n=t.current,r=Cn(),i=Cs(n),s=Di(r,i),s.callback=e??null,ks(n,s,i),t.current.lanes=i,ch(t,i,r),$n(t,r),t}function im(t,e,n,r){var i=e.current,s=Cn(),o=Cs(i);return n=aP(n),e.context===null?e.context=n:e.pendingContext=n,e=Di(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ks(i,e,o),t!==null&&(Pr(t,i,o,s),of(t,i,o)),o}function np(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function V0(t,e){tE(t,e),(t=t.alternate)&&tE(t,e)}function sV(){return null}var cP=typeof reportError=="function"?reportError:function(t){console.error(t)};function F0(t){this._internalRoot=t}sm.prototype.render=F0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));im(t,e,null,null)};sm.prototype.unmount=F0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wo(function(){im(null,t,null,null)}),e[Fi]=null}};function sm(t){this._internalRoot=t}sm.prototype.unstable_scheduleHydration=function(t){if(t){var e=UC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<os.length&&e!==0&&e<os[n].priority;n++);os.splice(n,0,t),n===0&&zC(t)}};function U0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function om(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nE(){}function oV(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=np(o);s.call(c)}}var o=lP(e,r,t,0,null,!1,!1,"",nE);return t._reactRootContainer=o,t[Fi]=o.current,Tu(t.nodeType===8?t.parentNode:t),Wo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=np(l);a.call(c)}}var l=L0(t,0,!1,null,null,!1,!1,"",nE);return t._reactRootContainer=l,t[Fi]=l.current,Tu(t.nodeType===8?t.parentNode:t),Wo(function(){im(e,l,n,r)}),l}function am(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=np(o);a.call(l)}}im(e,o,t,i)}else o=oV(n,e,t,i,r);return np(o)}VC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ac(e.pendingLanes);n!==0&&(s0(e,n|1),$n(e,St()),!(Re&6)&&(pl=St()+500,Ks()))}break;case 13:Wo(function(){var r=Ui(t,1);if(r!==null){var i=Cn();Pr(r,t,1,i)}}),V0(t,1)}};o0=function(t){if(t.tag===13){var e=Ui(t,134217728);if(e!==null){var n=Cn();Pr(e,t,134217728,n)}V0(t,134217728)}};FC=function(t){if(t.tag===13){var e=Cs(t),n=Ui(t,e);if(n!==null){var r=Cn();Pr(n,t,e,r)}V0(t,e)}};UC=function(){return Le};BC=function(t,e){var n=Le;try{return Le=t,e()}finally{Le=n}};Xy=function(t,e,n){switch(e){case"input":if(Wy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Xp(r);if(!i)throw Error(K(90));vC(r),Wy(r,i)}}}break;case"textarea":xC(t,n);break;case"select":e=n.value,e!=null&&Ya(t,!!n.multiple,e,!1)}};IC=D0;CC=Wo;var aV={usingClientEntryPoint:!1,Events:[hh,Oa,Xp,TC,kC,D0]},gc={findFiberByHostInstance:Eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lV={bundleType:gc.bundleType,version:gc.version,rendererPackageName:gc.rendererPackageName,rendererConfig:gc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=RC(t),t===null?null:t.stateNode},findFiberByHostInstance:gc.findFiberByHostInstance||sV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sd.isDisabled&&Sd.supportsFiber)try{Kp=Sd.inject(lV),Qr=Sd}catch{}}sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aV;sr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!U0(e))throw Error(K(200));return iV(t,e,null,n)};sr.createRoot=function(t,e){if(!U0(t))throw Error(K(299));var n=!1,r="",i=cP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=L0(t,1,!1,null,null,n,!1,r,i),t[Fi]=e.current,Tu(t.nodeType===8?t.parentNode:t),new F0(e)};sr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=RC(e),t=t===null?null:t.stateNode,t};sr.flushSync=function(t){return Wo(t)};sr.hydrate=function(t,e,n){if(!om(e))throw Error(K(200));return am(null,t,e,!0,n)};sr.hydrateRoot=function(t,e,n){if(!U0(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=cP;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=lP(e,null,t,1,n??null,i,!1,s,o),t[Fi]=e.current,Tu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new sm(e)};sr.render=function(t,e,n){if(!om(e))throw Error(K(200));return am(null,t,e,!1,n)};sr.unmountComponentAtNode=function(t){if(!om(t))throw Error(K(40));return t._reactRootContainer?(Wo(function(){am(null,null,t,!1,function(){t._reactRootContainer=null,t[Fi]=null})}),!0):!1};sr.unstable_batchedUpdates=D0;sr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!om(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return am(t,e,n,!1,r)};sr.version="18.3.1-next-f1338f8080-20240426";function uP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uP)}catch(t){console.error(t)}}uP(),uC.exports=sr;var cV=uC.exports,rE=cV;Ly.createRoot=rE.createRoot,Ly.hydrateRoot=rE.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ou.apply(this,arguments)}var gs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gs||(gs={}));const iE="popstate";function uV(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=ea(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Pv("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:rp(s))}function r(i,s){B0(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return dV(e,n,r,t)}function Tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function B0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hV(){return Math.random().toString(36).substr(2,8)}function sE(t,e){return{usr:t.state,key:t.key,idx:e}}function Pv(t,e,n,r){return n===void 0&&(n=null),Ou({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ea(e):e,{state:n,key:e&&e.key||r||hV()})}function rp(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ea(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function dV(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=gs.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ou({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=gs.Pop;let x=u(),v=x==null?null:x-c;c=x,l&&l({action:a,location:_.location,delta:v})}function p(x,v){a=gs.Push;let w=Pv(_.location,x,v);n&&n(w,x),c=u()+1;let E=sE(w,c),R=_.createHref(w);try{o.pushState(E,"",R)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(R)}s&&l&&l({action:a,location:_.location,delta:1})}function m(x,v){a=gs.Replace;let w=Pv(_.location,x,v);n&&n(w,x),c=u();let E=sE(w,c),R=_.createHref(w);o.replaceState(E,"",R),s&&l&&l({action:a,location:_.location,delta:0})}function y(x){let v=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof x=="string"?x:rp(x);return w=w.replace(/ $/,"%20"),Tt(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let _={get action(){return a},get location(){return t(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(iE,f),l=x,()=>{i.removeEventListener(iE,f),l=null}},createHref(x){return e(i,x)},createURL:y,encodeLocation(x){let v=y(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(x){return o.go(x)}};return _}var oE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(oE||(oE={}));function fV(t,e,n){return n===void 0&&(n="/"),pV(t,e,n)}function pV(t,e,n,r){let i=typeof e=="string"?ea(e):e,s=z0(i.pathname||"/",n);if(s==null)return null;let o=hP(t);mV(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=IV(s);a=EV(o[l],c)}return a}function hP(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Tt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ps([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Tt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),hP(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:bV(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of dP(s.path))i(s,o,l)}),e}function dP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=dP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function mV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:SV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const gV=/^:[\w-]+$/,yV=3,vV=2,_V=1,xV=10,wV=-2,aE=t=>t==="*";function bV(t,e){let n=t.split("/"),r=n.length;return n.some(aE)&&(r+=wV),e&&(r+=vV),n.filter(i=>!aE(i)).reduce((i,s)=>i+(gV.test(s)?yV:s===""?_V:xV),r)}function SV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function EV(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",f=TV({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Ps([s,f.pathname]),pathnameBase:RV(Ps([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=Ps([s,f.pathnameBase]))}return o}function TV(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=kV(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,f)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let _=a[f]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const y=a[f];return m&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function kV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),B0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function IV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return B0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function z0(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function CV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ea(t):t;return{pathname:n?n.startsWith("/")?n:AV(n,e):e,search:NV(r),hash:DV(i)}}function AV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Bg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $0(t,e){let n=PV(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function W0(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ea(t):(i=Ou({},t),Tt(!i.pathname||!i.pathname.includes("?"),Bg("?","pathname","search",i)),Tt(!i.pathname||!i.pathname.includes("#"),Bg("#","pathname","hash",i)),Tt(!i.search||!i.search.includes("#"),Bg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=CV(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ps=t=>t.join("/").replace(/\/\/+/g,"/"),RV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),NV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,DV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function OV(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const fP=["post","put","patch","delete"];new Set(fP);const MV=["get",...fP];new Set(MV);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mu(){return Mu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mu.apply(this,arguments)}const H0=D.createContext(null),jV=D.createContext(null),Gs=D.createContext(null),lm=D.createContext(null),ci=D.createContext({outlet:null,matches:[],isDataRoute:!1}),pP=D.createContext(null);function LV(t,e){let{relative:n}=e===void 0?{}:e;Ml()||Tt(!1);let{basename:r,navigator:i}=D.useContext(Gs),{hash:s,pathname:o,search:a}=yP(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ps([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ml(){return D.useContext(lm)!=null}function ta(){return Ml()||Tt(!1),D.useContext(lm).location}function mP(t){D.useContext(Gs).static||D.useLayoutEffect(t)}function nn(){let{isDataRoute:t}=D.useContext(ci);return t?JV():VV()}function VV(){Ml()||Tt(!1);let t=D.useContext(H0),{basename:e,future:n,navigator:r}=D.useContext(Gs),{matches:i}=D.useContext(ci),{pathname:s}=ta(),o=JSON.stringify($0(i,n.v7_relativeSplatPath)),a=D.useRef(!1);return mP(()=>{a.current=!0}),D.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=W0(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ps([e,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[e,r,o,s,t])}const FV=D.createContext(null);function UV(t){let e=D.useContext(ci).outlet;return e&&D.createElement(FV.Provider,{value:t},e)}function gP(){let{matches:t}=D.useContext(ci),e=t[t.length-1];return e?e.params:{}}function yP(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Gs),{matches:i}=D.useContext(ci),{pathname:s}=ta(),o=JSON.stringify($0(i,r.v7_relativeSplatPath));return D.useMemo(()=>W0(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function BV(t,e){return zV(t,e)}function zV(t,e,n,r){Ml()||Tt(!1);let{navigator:i}=D.useContext(Gs),{matches:s}=D.useContext(ci),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=ta(),u;if(e){var f;let x=typeof e=="string"?ea(e):e;l==="/"||(f=x.pathname)!=null&&f.startsWith(l)||Tt(!1),u=x}else u=c;let p=u.pathname||"/",m=p;if(l!=="/"){let x=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=fV(t,{pathname:m}),_=KV(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Ps([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Ps([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&_?D.createElement(lm.Provider,{value:{location:Mu({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:gs.Pop}},_):_}function $V(){let t=XV(),e=OV(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const WV=D.createElement($V,null);class HV extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(ci.Provider,{value:this.props.routeContext},D.createElement(pP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qV(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(H0);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(ci.Provider,{value:e},r)}function KV(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);u>=0||Tt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:m}=n,y=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,p)=>{let m,y=!1,_=null,x=null;n&&(m=a&&f.route.id?a[f.route.id]:void 0,_=f.route.errorElement||WV,l&&(c<0&&p===0?(ZV("route-fallback"),y=!0,x=null):c===p&&(y=!0,x=f.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),w=()=>{let E;return m?E=_:y?E=x:f.route.Component?E=D.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=u,D.createElement(qV,{match:f,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?D.createElement(HV,{location:n.location,revalidation:n.revalidation,component:_,error:m,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var vP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vP||{}),_P=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(_P||{});function GV(t){let e=D.useContext(H0);return e||Tt(!1),e}function YV(t){let e=D.useContext(jV);return e||Tt(!1),e}function QV(t){let e=D.useContext(ci);return e||Tt(!1),e}function xP(t){let e=QV(),n=e.matches[e.matches.length-1];return n.route.id||Tt(!1),n.route.id}function XV(){var t;let e=D.useContext(pP),n=YV(),r=xP();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function JV(){let{router:t}=GV(vP.UseNavigateStable),e=xP(_P.UseNavigateStable),n=D.useRef(!1);return mP(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Mu({fromRouteId:e},s)))},[t,e])}const lE={};function ZV(t,e,n){lE[t]||(lE[t]=!0)}function eF(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ff(t){let{to:e,replace:n,state:r,relative:i}=t;Ml()||Tt(!1);let{future:s,static:o}=D.useContext(Gs),{matches:a}=D.useContext(ci),{pathname:l}=ta(),c=nn(),u=W0(e,$0(a,s.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(u);return D.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function tF(t){return UV(t.context)}function xt(t){Tt(!1)}function nF(t){let{basename:e="/",children:n=null,location:r,navigationType:i=gs.Pop,navigator:s,static:o=!1,future:a}=t;Ml()&&Tt(!1);let l=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:l,navigator:s,static:o,future:Mu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ea(r));let{pathname:u="/",search:f="",hash:p="",state:m=null,key:y="default"}=r,_=D.useMemo(()=>{let x=z0(u,l);return x==null?null:{location:{pathname:x,search:f,hash:p,state:m,key:y},navigationType:i}},[l,u,f,p,m,y,i]);return _==null?null:D.createElement(Gs.Provider,{value:c},D.createElement(lm.Provider,{children:n,value:_}))}function rF(t){let{children:e,location:n}=t;return BV(Rv(e),n)}new Promise(()=>{});function Rv(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let s=[...e,i];if(r.type===D.Fragment){n.push.apply(n,Rv(r.props.children,s));return}r.type!==xt&&Tt(!1),!r.props.index||!r.props.children||Tt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Rv(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nv(){return Nv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nv.apply(this,arguments)}function iF(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function sF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function oF(t,e){return t.button===0&&(!e||e==="_self")&&!sF(t)}const aF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],lF="6";try{window.__reactRouterVersion=lF}catch{}const cF="startTransition",cE=JM[cF];function uF(t){let{basename:e,children:n,future:r,window:i}=t,s=D.useRef();s.current==null&&(s.current=uV({window:i,v5Compat:!0}));let o=s.current,[a,l]=D.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=D.useCallback(f=>{c&&cE?cE(()=>l(f)):l(f)},[l,c]);return D.useLayoutEffect(()=>o.listen(u),[o,u]),D.useEffect(()=>eF(r),[r]),D.createElement(nF,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const hF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Io=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:f}=e,p=iF(e,aF),{basename:m}=D.useContext(Gs),y,_=!1;if(typeof c=="string"&&dF.test(c)&&(y=c,hF))try{let E=new URL(window.location.href),R=c.startsWith("//")?new URL(E.protocol+c):new URL(c),C=z0(R.pathname,m);R.origin===E.origin&&C!=null?c=C+R.search+R.hash:_=!0}catch{}let x=LV(c,{relative:i}),v=fF(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:f});function w(E){r&&r(E),E.defaultPrevented||v(E)}return D.createElement("a",Nv({},p,{href:y||x,onClick:_||s?r:w,ref:n,target:l}))});var uE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(uE||(uE={}));var hE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(hE||(hE={}));function fF(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=nn(),c=ta(),u=yP(t,{relative:o});return D.useCallback(f=>{if(oF(f,n)){f.preventDefault();let p=r!==void 0?r:rp(c)===rp(u);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}var dE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},pF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[u],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new mF;const p=s<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const y=c<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class mF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gF=function(t){const e=wP(t);return bP.encodeByteArray(e,!0)},ip=function(t){return gF(t).replace(/\./g,"")},SP=function(t){try{return bP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF=()=>yF().__FIREBASE_DEFAULTS__,_F=()=>{if(typeof process>"u"||typeof dE>"u")return;const t=dE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&SP(t[1]);return e&&JSON.parse(e)},cm=()=>{try{return vF()||_F()||xF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},EP=t=>{var e,n;return(n=(e=cm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},TP=t=>{const e=EP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},kP=()=>{var t;return(t=cm())===null||t===void 0?void 0:t.config},IP=t=>{var e;return(e=cm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ip(JSON.stringify(n)),ip(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function SF(){var t;const e=(t=cm())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function TF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IF(){const t=bn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function CF(){return!SF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AF(){try{return typeof indexedDB=="object"}catch{return!1}}function PF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RF="FirebaseError";class ui extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=RF,Object.setPrototypeOf(this,ui.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fh.prototype.create)}}class fh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?NF(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ui(i,a,r)}}function NF(t,e){return t.replace(DF,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const DF=/\{\$([^}]+)}/g;function OF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sp(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(fE(s)&&fE(o)){if(!sp(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function fE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Rc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Nc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function MF(t,e){const n=new jF(t,e);return n.subscribe.bind(n)}class jF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");LF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=zg),i.error===void 0&&(i.error=zg),i.complete===void 0&&(i.complete=zg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function zg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t){return t&&t._delegate?t._delegate:t}class Vs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new wF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UF(e))try{this.getOrInitializeService({instanceIdentifier:_o})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=_o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_o){return this.instances.has(e)}getOptions(e=_o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_o){return this.component?this.component.multipleInstances?e:_o:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FF(t){return t===_o?void 0:t}function UF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new VF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const zF={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},$F=ke.INFO,WF={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},HF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=WF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class q0{constructor(e){this.name=e,this._logLevel=$F,this._logHandler=HF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const qF=(t,e)=>e.some(n=>t instanceof n);let pE,mE;function KF(){return pE||(pE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GF(){return mE||(mE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AP=new WeakMap,Dv=new WeakMap,PP=new WeakMap,$g=new WeakMap,K0=new WeakMap;function YF(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Rs(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&AP.set(n,t)}).catch(()=>{}),K0.set(e,t),e}function QF(t){if(Dv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Dv.set(t,e)}let Ov={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||PP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XF(t){Ov=t(Ov)}function JF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Wg(this),e,...n);return PP.set(r,e.sort?e.sort():[e]),Rs(r)}:GF().includes(t)?function(...e){return t.apply(Wg(this),e),Rs(AP.get(this))}:function(...e){return Rs(t.apply(Wg(this),e))}}function ZF(t){return typeof t=="function"?JF(t):(t instanceof IDBTransaction&&QF(t),qF(t,KF())?new Proxy(t,Ov):t)}function Rs(t){if(t instanceof IDBRequest)return YF(t);if($g.has(t))return $g.get(t);const e=ZF(t);return e!==t&&($g.set(t,e),K0.set(e,t)),e}const Wg=t=>K0.get(t);function e4(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Rs(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Rs(o.result),l.oldVersion,l.newVersion,Rs(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const t4=["get","getKey","getAll","getAllKeys","count"],n4=["put","add","delete","clear"],Hg=new Map;function gE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hg.get(e))return Hg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=n4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||t4.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Hg.set(e,s),s}XF(t=>({...t,get:(e,n,r)=>gE(e,n)||t.get(e,n,r),has:(e,n)=>!!gE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(i4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function i4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mv="@firebase/app",yE="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new q0("@firebase/app"),s4="@firebase/app-compat",o4="@firebase/analytics-compat",a4="@firebase/analytics",l4="@firebase/app-check-compat",c4="@firebase/app-check",u4="@firebase/auth",h4="@firebase/auth-compat",d4="@firebase/database",f4="@firebase/data-connect",p4="@firebase/database-compat",m4="@firebase/functions",g4="@firebase/functions-compat",y4="@firebase/installations",v4="@firebase/installations-compat",_4="@firebase/messaging",x4="@firebase/messaging-compat",w4="@firebase/performance",b4="@firebase/performance-compat",S4="@firebase/remote-config",E4="@firebase/remote-config-compat",T4="@firebase/storage",k4="@firebase/storage-compat",I4="@firebase/firestore",C4="@firebase/vertexai-preview",A4="@firebase/firestore-compat",P4="firebase",R4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="[DEFAULT]",N4={[Mv]:"fire-core",[s4]:"fire-core-compat",[a4]:"fire-analytics",[o4]:"fire-analytics-compat",[c4]:"fire-app-check",[l4]:"fire-app-check-compat",[u4]:"fire-auth",[h4]:"fire-auth-compat",[d4]:"fire-rtdb",[f4]:"fire-data-connect",[p4]:"fire-rtdb-compat",[m4]:"fire-fn",[g4]:"fire-fn-compat",[y4]:"fire-iid",[v4]:"fire-iid-compat",[_4]:"fire-fcm",[x4]:"fire-fcm-compat",[w4]:"fire-perf",[b4]:"fire-perf-compat",[S4]:"fire-rc",[E4]:"fire-rc-compat",[T4]:"fire-gcs",[k4]:"fire-gcs-compat",[I4]:"fire-fst",[A4]:"fire-fst-compat",[C4]:"fire-vertex","fire-js":"fire-js",[P4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=new Map,D4=new Map,Lv=new Map;function vE(t,e){try{t.container.addComponent(e)}catch(n){zi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ho(t){const e=t.name;if(Lv.has(e))return zi.debug(`There were multiple attempts to register component ${e}.`),!1;Lv.set(e,t);for(const n of op.values())vE(n,t);for(const n of D4.values())vE(n,t);return!0}function um(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ai(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new fh("app","Firebase",O4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na=R4;function RP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ns.create("bad-app-name",{appName:String(i)});if(n||(n=kP()),!n)throw Ns.create("no-options");const s=op.get(i);if(s){if(sp(n,s.options)&&sp(r,s.config))return s;throw Ns.create("duplicate-app",{appName:i})}const o=new BF(i);for(const l of Lv.values())o.addComponent(l);const a=new M4(n,r,o);return op.set(i,a),a}function G0(t=jv){const e=op.get(t);if(!e&&t===jv&&kP())return RP();if(!e)throw Ns.create("no-app",{appName:t});return e}function Jr(t,e,n){var r;let i=(r=N4[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zi.warn(a.join(" "));return}Ho(new Vs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4="firebase-heartbeat-database",L4=1,ju="firebase-heartbeat-store";let qg=null;function NP(){return qg||(qg=e4(j4,L4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ju)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ns.create("idb-open",{originalErrorMessage:t.message})})),qg}async function V4(t){try{const n=(await NP()).transaction(ju),r=await n.objectStore(ju).get(DP(t));return await n.done,r}catch(e){if(e instanceof ui)zi.warn(e.message);else{const n=Ns.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zi.warn(n.message)}}}async function _E(t,e){try{const r=(await NP()).transaction(ju,"readwrite");await r.objectStore(ju).put(e,DP(t)),await r.done}catch(n){if(n instanceof ui)zi.warn(n.message);else{const r=Ns.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zi.warn(r.message)}}}function DP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=1024,U4=30*24*60*60*1e3;class B4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=xE();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=U4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){zi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xE(),{heartbeatsToSend:r,unsentEntries:i}=z4(this._heartbeatsCache.heartbeats),s=ip(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return zi.warn(n),""}}}function xE(){return new Date().toISOString().substring(0,10)}function z4(t,e=F4){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),wE(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),wE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AF()?PF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await V4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _E(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return _E(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function wE(t){return ip(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(t){Ho(new Vs("platform-logger",e=>new r4(e),"PRIVATE")),Ho(new Vs("heartbeat",e=>new B4(e),"PRIVATE")),Jr(Mv,yE,t),Jr(Mv,yE,"esm2017"),Jr("fire-js","")}W4("");function Y0(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function OP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const H4=OP,MP=new fh("auth","Firebase",OP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap=new q0("@firebase/auth");function q4(t,...e){ap.logLevel<=ke.WARN&&ap.warn(`Auth (${na}): ${t}`,...e)}function pf(t,...e){ap.logLevel<=ke.ERROR&&ap.error(`Auth (${na}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(t,...e){throw Q0(t,...e)}function Zr(t,...e){return Q0(t,...e)}function jP(t,e,n){const r=Object.assign(Object.assign({},H4()),{[e]:n});return new fh("auth","Firebase",r).create(e,{appName:t.name})}function Ds(t){return jP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Q0(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return MP.create(t,...e)}function ue(t,e,...n){if(!t)throw Q0(e,...n)}function Pi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw pf(e),new Error(e)}function $i(t,e){t||Pi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function K4(){return bE()==="http:"||bE()==="https:"}function bE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(K4()||TF()||"connection"in navigator)?navigator.onLine:!0}function Y4(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n){this.shortDelay=e,this.longDelay=n,$i(n>e,"Short delay should be less than long delay!"),this.isMobile=bF()||kF()}get(){return G4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(t,e){$i(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4=new mh(3e4,6e4);function Ys(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function hi(t,e,n,r,i={}){return VP(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=ph(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return EF()||(c.referrerPolicy="no-referrer"),LP.fetch()(FP(t,t.config.apiHost,n,a),c)})}async function VP(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Q4),e);try{const i=new Z4(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ed(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ed(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ed(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ed(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw jP(t,u,c);Or(t,u)}}catch(i){if(i instanceof ui)throw i;Or(t,"network-request-failed",{message:String(i)})}}async function hm(t,e,n,r,i={}){const s=await hi(t,e,n,r,i);return"mfaPendingCredential"in s&&Or(t,"multi-factor-auth-required",{_serverResponse:s}),s}function FP(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?X0(t.config,i):`${t.config.apiScheme}://${i}`}function J4(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Z4{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zr(this.auth,"network-request-failed")),X4.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ed(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Zr(t,e,r);return i.customData._tokenResponse=n,i}function SE(t){return t!==void 0&&t.enterprise!==void 0}class eU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return J4(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function tU(t,e){return hi(t,"GET","/v2/recaptchaConfig",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nU(t,e){return hi(t,"POST","/v1/accounts:delete",e)}async function UP(t,e){return hi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rU(t,e=!1){const n=ze(t),r=await n.getIdToken(e),i=J0(r);ue(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:eu(Kg(i.auth_time)),issuedAtTime:eu(Kg(i.iat)),expirationTime:eu(Kg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Kg(t){return Number(t)*1e3}function J0(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return pf("JWT malformed, contained fewer than 3 sections"),null;try{const i=SP(n);return i?JSON.parse(i):(pf("Failed to decode base64 JWT payload"),null)}catch(i){return pf("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function EE(t){const e=J0(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ui&&iU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function iU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=eu(this.lastLoginAt),this.creationTime=eu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lp(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ml(t,UP(n,{idToken:r}));ue(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?BP(s.providerUserInfo):[],a=aU(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Fv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function oU(t){const e=ze(t);await lp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function BP(t){return t.map(e=>{var{providerId:n}=e,r=Y0(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lU(t,e){const n=await VP(t,{},async()=>{const r=ph({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=FP(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",LP.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cU(t,e){return hi(t,"POST","/v2/accounts:revokeToken",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):EE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=EE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await lU(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new tl;return r&&(ue(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ue(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ue(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new tl,this.toJSON())}_performRefresh(){return Pi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ri{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Y0(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Fv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ml(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rU(this,e)}reload(){return oU(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ri(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await lp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ai(this.auth.app))return Promise.reject(Ds(this.auth));const e=await this.getIdToken();return await ml(this,nU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:R,isAnonymous:C,providerData:M,stsTokenManager:T}=n;ue(E&&T,e,"internal-error");const b=tl.fromJSON(this.name,T);ue(typeof E=="string",e,"internal-error"),ts(f,e.name),ts(p,e.name),ue(typeof R=="boolean",e,"internal-error"),ue(typeof C=="boolean",e,"internal-error"),ts(m,e.name),ts(y,e.name),ts(_,e.name),ts(x,e.name),ts(v,e.name),ts(w,e.name);const k=new Ri({uid:E,auth:e,email:p,emailVerified:R,displayName:f,isAnonymous:C,photoURL:y,phoneNumber:m,tenantId:_,stsTokenManager:b,createdAt:v,lastLoginAt:w});return M&&Array.isArray(M)&&(k.providerData=M.map(A=>Object.assign({},A))),x&&(k._redirectEventId=x),k}static async _fromIdTokenResponse(e,n,r=!1){const i=new tl;i.updateFromServerResponse(n);const s=new Ri({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await lp(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ue(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?BP(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new tl;a.updateFromIdToken(r);const l=new Ri({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Fv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=new Map;function Ni(t){$i(t instanceof Function,"Expected a class definition");let e=TE.get(t);return e?($i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,TE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}zP.type="NONE";const kE=zP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(t,e,n){return`firebase:${t}:${e}:${n}`}class nl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=mf(this.userKey,i.apiKey,s),this.fullPersistenceKey=mf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ri._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new nl(Ni(kE),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ni(kE);const o=mf(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const f=Ri._fromJSON(e,u);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new nl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new nl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($P(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GP(e))return"Blackberry";if(YP(e))return"Webos";if(WP(e))return"Safari";if((e.includes("chrome/")||HP(e))&&!e.includes("edge/"))return"Chrome";if(KP(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $P(t=bn()){return/firefox\//i.test(t)}function WP(t=bn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HP(t=bn()){return/crios\//i.test(t)}function qP(t=bn()){return/iemobile/i.test(t)}function KP(t=bn()){return/android/i.test(t)}function GP(t=bn()){return/blackberry/i.test(t)}function YP(t=bn()){return/webos/i.test(t)}function Z0(t=bn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uU(t=bn()){var e;return Z0(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hU(){return IF()&&document.documentMode===10}function QP(t=bn()){return Z0(t)||KP(t)||YP(t)||GP(t)||/windows phone/i.test(t)||qP(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t,e=[]){let n;switch(t){case"Browser":n=IE(bn());break;case"Worker":n=`${IE(bn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${na}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fU(t,e={}){return hi(t,"GET","/v2/passwordPolicy",Ys(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU=6;class mU{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:pU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gU{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new CE(this),this.idTokenSubscription=new CE(this),this.beforeStateQueue=new dU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=MP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ni(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await nl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await UP(this,{idToken:e}),r=await Ri._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ai(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await lp(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Y4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ai(this.app))return Promise.reject(Ds(this));const n=e?ze(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ai(this.app)?Promise.reject(Ds(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ai(this.app)?Promise.reject(Ds(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ni(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await fU(this),n=new mU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await cU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ni(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await nl.create(this,[Ni(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&q4(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ra(t){return ze(t)}class CE{constructor(e){this.auth=e,this.observer=null,this.addObserver=MF(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yU(t){dm=t}function JP(t){return dm.loadJS(t)}function vU(){return dm.recaptchaEnterpriseScript}function _U(){return dm.gapiScript}function xU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const wU="recaptcha-enterprise",bU="NO_RECAPTCHA";class SU{constructor(e){this.type=wU,this.auth=ra(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{tU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new eU(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;SE(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(bU)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&SE(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=vU();l.length!==0&&(l+=a),JP(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function AE(t,e,n,r=!1){const i=new SU(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Uv(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await AE(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await AE(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(t,e){const n=um(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(sp(s,e??{}))return i;Or(i,"already-initialized")}return n.initialize({options:e})}function TU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ni);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kU(t,e,n){const r=ra(t);ue(r._canInitEmulator,r,"emulator-config-failed"),ue(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=ZP(e),{host:o,port:a}=IU(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),CU()}function ZP(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IU(t){const e=ZP(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:PE(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:PE(o)}}}function PE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Pi("not implemented")}_getIdTokenResponse(e){return Pi("not implemented")}_linkToIdToken(e,n){return Pi("not implemented")}_getReauthenticationResolver(e){return Pi("not implemented")}}async function AU(t,e){return hi(t,"POST","/v1/accounts:update",e)}async function PU(t,e){return hi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RU(t,e){return hm(t,"POST","/v1/accounts:signInWithPassword",Ys(t,e))}async function NU(t,e){return hi(t,"POST","/v1/accounts:sendOobCode",Ys(t,e))}async function DU(t,e){return NU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OU(t,e){return hm(t,"POST","/v1/accounts:signInWithEmailLink",Ys(t,e))}async function MU(t,e){return hm(t,"POST","/v1/accounts:signInWithEmailLink",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends ex{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Lu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Lu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uv(e,n,"signInWithPassword",RU);case"emailLink":return OU(e,{email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uv(e,r,"signUpPassword",PU);case"emailLink":return MU(e,{idToken:n,email:this._email,oobCode:this._password});default:Or(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(t,e){return hm(t,"POST","/v1/accounts:signInWithIdp",Ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jU="http://localhost";class qo extends ex{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Or("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Y0(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new qo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return rl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,rl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,rl(e,n)}buildRequest(){const e={requestUri:jU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ph(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VU(t){const e=Rc(Nc(t)).link,n=e?Rc(Nc(e)).deep_link_id:null,r=Rc(Nc(t)).deep_link_id;return(r?Rc(Nc(r)).link:null)||r||n||e||t}class tx{constructor(e){var n,r,i,s,o,a;const l=Rc(Nc(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,f=LU((i=l.mode)!==null&&i!==void 0?i:null);ue(c&&u&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=VU(e);try{return new tx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(){this.providerId=jl.PROVIDER_ID}static credential(e,n){return Lu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=tx.parseLink(n);return ue(r,"argument-error"),Lu._fromEmailAndCode(e,r.code,r.tenantId)}}jl.PROVIDER_ID="password";jl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends eR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends gh{constructor(){super("facebook.com")}static credential(e){return qo._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends gh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qo._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return cs.credential(n,r)}catch{return null}}}cs.GOOGLE_SIGN_IN_METHOD="google.com";cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends gh{constructor(){super("github.com")}static credential(e){return qo._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return us.credential(e.oauthAccessToken)}catch{return null}}}us.GITHUB_SIGN_IN_METHOD="github.com";us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends gh{constructor(){super("twitter.com")}static credential(e,n){return qo._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return hs.credential(n,r)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ri._fromIdTokenResponse(e,r,i),o=RE(r);return new gl({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=RE(r);return new gl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function RE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp extends ui{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,cp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new cp(e,n,r,i)}}function tR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?cp._fromErrorAndOperation(t,s,e,r):s})}async function FU(t,e,n=!1){const r=await ml(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UU(t,e,n=!1){const{auth:r}=t;if(Ai(r.app))return Promise.reject(Ds(r));const i="reauthenticate";try{const s=await ml(t,tR(r,i,e,t),n);ue(s.idToken,r,"internal-error");const o=J0(s.idToken);ue(o,r,"internal-error");const{sub:a}=o;return ue(t.uid===a,r,"user-mismatch"),gl._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Or(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(t,e,n=!1){if(Ai(t.app))return Promise.reject(Ds(t));const r="signIn",i=await tR(t,r,e),s=await gl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function BU(t,e){return nR(ra(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zU(t){const e=ra(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $U(t,e,n){const r=ra(t);await Uv(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",DU)}function rR(t,e,n){return Ai(t.app)?Promise.reject(Ds(t)):BU(ze(t),jl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&zU(t),r})}function WU(t,e){return HU(ze(t),null,e)}async function HU(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await ml(t,AU(r,s));await t._updateTokensIfNecessary(o,!0)}function qU(t,e,n,r){return ze(t).onIdTokenChanged(e,n,r)}function KU(t,e,n){return ze(t).beforeAuthStateChanged(e,n)}function GU(t,e,n,r){return ze(t).onAuthStateChanged(e,n,r)}function up(t){return ze(t).signOut()}const hp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hp,"1"),this.storage.removeItem(hp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU=1e3,QU=10;class sR extends iR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QP(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);hU()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,QU):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},YU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}sR.type="LOCAL";const XU=sR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR extends iR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}oR.type="SESSION";const aR=oR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new fm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await JU(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=nx("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(){return window}function eB(t){ei().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(){return typeof ei().WorkerGlobalScope<"u"&&typeof ei().importScripts=="function"}async function tB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function rB(){return lR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="firebaseLocalStorageDb",iB=1,dp="firebaseLocalStorage",uR="fbase_key";class yh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pm(t,e){return t.transaction([dp],e?"readwrite":"readonly").objectStore(dp)}function sB(){const t=indexedDB.deleteDatabase(cR);return new yh(t).toPromise()}function Bv(){const t=indexedDB.open(cR,iB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(dp,{keyPath:uR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(dp)?e(r):(r.close(),await sB(),e(await Bv()))})})}async function NE(t,e,n){const r=pm(t,!0).put({[uR]:e,value:n});return new yh(r).toPromise()}async function oB(t,e){const n=pm(t,!1).get(e),r=await new yh(n).toPromise();return r===void 0?null:r.value}function DE(t,e){const n=pm(t,!0).delete(e);return new yh(n).toPromise()}const aB=800,lB=3;class hR{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>lB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fm._getInstance(rB()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await tB(),!this.activeServiceWorker)return;this.sender=new ZU(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bv();return await NE(e,hp,"1"),await DE(e,hp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>NE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>oB(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>DE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=pm(i,!1).getAll();return new yh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),aB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}hR.type="LOCAL";const cB=hR;new mh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(t,e){return e?Ni(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx extends ex{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return rl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return rl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return rl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hB(t){return nR(t.auth,new rx(t),t.bypassAuthState)}function dB(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),UU(n,new rx(t),t.bypassAuthState)}async function fB(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),FU(n,new rx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hB;case"linkViaPopup":case"linkViaRedirect":return fB;case"reauthViaPopup":case"reauthViaRedirect":return dB;default:Or(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pB=new mh(2e3,1e4);class Ba extends dR{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ba.currentPopupAction&&Ba.currentPopupAction.cancel(),Ba.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=nx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ba.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pB.get())};e()}}Ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB="pendingRedirect",gf=new Map;class gB extends dR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=gf.get(this.auth._key());if(!e){try{const r=await yB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}gf.set(this.auth._key(),e)}return this.bypassAuthState||gf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yB(t,e){const n=xB(e),r=_B(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function vB(t,e){gf.set(t._key(),e)}function _B(t){return Ni(t._redirectPersistence)}function xB(t){return mf(mB,t.config.apiKey,t.name)}async function wB(t,e,n=!1){if(Ai(t.app))return Promise.reject(Ds(t));const r=ra(t),i=uB(r,e),o=await new gB(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bB=10*60*1e3;class SB{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EB(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bB&&this.cachedEventUids.clear(),this.cachedEventUids.has(OE(e))}saveEventToCache(e){this.cachedEventUids.add(OE(e)),this.lastProcessedEventTime=Date.now()}}function OE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EB(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TB(t,e={}){return hi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IB=/^https?/;async function CB(t){if(t.config.emulator)return;const{authorizedDomains:e}=await TB(t);for(const n of e)try{if(AB(n))return}catch{}Or(t,"unauthorized-domain")}function AB(t){const e=Vv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!IB.test(n))return!1;if(kB.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PB=new mh(3e4,6e4);function ME(){const t=ei().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function RB(t){return new Promise((e,n)=>{var r,i,s;function o(){ME(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ME(),n(Zr(t,"network-request-failed"))},timeout:PB.get()})}if(!((i=(r=ei().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ei().gapi)===null||s===void 0)&&s.load)o();else{const a=xU("iframefcb");return ei()[a]=()=>{gapi.load?o():n(Zr(t,"network-request-failed"))},JP(`${_U()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw yf=null,e})}let yf=null;function NB(t){return yf=yf||RB(t),yf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB=new mh(5e3,15e3),OB="__/auth/iframe",MB="emulator/auth/iframe",jB={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LB=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VB(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?X0(e,MB):`https://${t.config.authDomain}/${OB}`,r={apiKey:e.apiKey,appName:t.name,v:na},i=LB.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ph(r).slice(1)}`}async function FB(t){const e=await NB(t),n=ei().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:VB(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jB,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Zr(t,"network-request-failed"),a=ei().setTimeout(()=>{s(o)},DB.get());function l(){ei().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UB={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BB=500,zB=600,$B="_blank",WB="http://localhost";class jE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function HB(t,e,n,r=BB,i=zB){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},UB),{width:r.toString(),height:i.toString(),top:s,left:o}),c=bn().toLowerCase();n&&(a=HP(c)?$B:n),$P(c)&&(e=e||WB,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(uU(c)&&a!=="_self")return qB(e||"",a),new jE(null);const f=window.open(e||"",a,u);ue(f,t,"popup-blocked");try{f.focus()}catch{}return new jE(f)}function qB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KB="__/auth/handler",GB="emulator/auth/handler",YB=encodeURIComponent("fac");async function LE(t,e,n,r,i,s){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:na,eventId:i};if(e instanceof eR){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",OF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))o[u]=f}if(e instanceof gh){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${YB}=${encodeURIComponent(l)}`:"";return`${QB(t)}?${ph(a).slice(1)}${c}`}function QB({config:t}){return t.emulator?X0(t,GB):`https://${t.authDomain}/${KB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="webStorageSupport";class XB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aR,this._completeRedirectFn=wB,this._overrideRedirectResult=vB}async _openPopup(e,n,r,i){var s;$i((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await LE(e,n,r,Vv(),i);return HB(e,o,nx())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await LE(e,n,r,Vv(),i);return eB(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):($i(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await FB(e),r=new SB(e);return n.register("authEvent",i=>(ue(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Gg,{type:Gg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Gg];o!==void 0&&n(!!o),Or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CB(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return QP()||WP()||Z0()}}const JB=XB;var VE="@firebase/auth",FE="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e5(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function t5(t){Ho(new Vs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ue(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XP(t)},c=new gU(r,i,s,l);return TU(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ho(new Vs("auth-internal",e=>{const n=ra(e.getProvider("auth").getImmediate());return(r=>new ZB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jr(VE,FE,e5(t)),Jr(VE,FE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5=5*60,r5=IP("authIdTokenMaxAge")||n5;let UE=null;const i5=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>r5)return;const i=n==null?void 0:n.token;UE!==i&&(UE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function di(t=G0()){const e=um(t,"auth");if(e.isInitialized())return e.getImmediate();const n=EU(t,{popupRedirectResolver:JB,persistence:[cB,XU,aR]}),r=IP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=i5(s.toString());KU(n,o,()=>o(n.currentUser)),qU(n,a=>o(a))}}const i=EP("auth");return i&&kU(n,`http://${i}`),n}function s5(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}yU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Zr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",s5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});t5("Browser");var BE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mo,pR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,b){function k(){}k.prototype=b.prototype,T.D=b.prototype,T.prototype=new k,T.prototype.constructor=T,T.C=function(A,O,I){for(var P=Array(arguments.length-2),B=2;B<arguments.length;B++)P[B-2]=arguments[B];return b.prototype[O].apply(A,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,b,k){k||(k=0);var A=Array(16);if(typeof b=="string")for(var O=0;16>O;++O)A[O]=b.charCodeAt(k++)|b.charCodeAt(k++)<<8|b.charCodeAt(k++)<<16|b.charCodeAt(k++)<<24;else for(O=0;16>O;++O)A[O]=b[k++]|b[k++]<<8|b[k++]<<16|b[k++]<<24;b=T.g[0],k=T.g[1],O=T.g[2];var I=T.g[3],P=b+(I^k&(O^I))+A[0]+3614090360&4294967295;b=k+(P<<7&4294967295|P>>>25),P=I+(O^b&(k^O))+A[1]+3905402710&4294967295,I=b+(P<<12&4294967295|P>>>20),P=O+(k^I&(b^k))+A[2]+606105819&4294967295,O=I+(P<<17&4294967295|P>>>15),P=k+(b^O&(I^b))+A[3]+3250441966&4294967295,k=O+(P<<22&4294967295|P>>>10),P=b+(I^k&(O^I))+A[4]+4118548399&4294967295,b=k+(P<<7&4294967295|P>>>25),P=I+(O^b&(k^O))+A[5]+1200080426&4294967295,I=b+(P<<12&4294967295|P>>>20),P=O+(k^I&(b^k))+A[6]+2821735955&4294967295,O=I+(P<<17&4294967295|P>>>15),P=k+(b^O&(I^b))+A[7]+4249261313&4294967295,k=O+(P<<22&4294967295|P>>>10),P=b+(I^k&(O^I))+A[8]+1770035416&4294967295,b=k+(P<<7&4294967295|P>>>25),P=I+(O^b&(k^O))+A[9]+2336552879&4294967295,I=b+(P<<12&4294967295|P>>>20),P=O+(k^I&(b^k))+A[10]+4294925233&4294967295,O=I+(P<<17&4294967295|P>>>15),P=k+(b^O&(I^b))+A[11]+2304563134&4294967295,k=O+(P<<22&4294967295|P>>>10),P=b+(I^k&(O^I))+A[12]+1804603682&4294967295,b=k+(P<<7&4294967295|P>>>25),P=I+(O^b&(k^O))+A[13]+4254626195&4294967295,I=b+(P<<12&4294967295|P>>>20),P=O+(k^I&(b^k))+A[14]+2792965006&4294967295,O=I+(P<<17&4294967295|P>>>15),P=k+(b^O&(I^b))+A[15]+1236535329&4294967295,k=O+(P<<22&4294967295|P>>>10),P=b+(O^I&(k^O))+A[1]+4129170786&4294967295,b=k+(P<<5&4294967295|P>>>27),P=I+(k^O&(b^k))+A[6]+3225465664&4294967295,I=b+(P<<9&4294967295|P>>>23),P=O+(b^k&(I^b))+A[11]+643717713&4294967295,O=I+(P<<14&4294967295|P>>>18),P=k+(I^b&(O^I))+A[0]+3921069994&4294967295,k=O+(P<<20&4294967295|P>>>12),P=b+(O^I&(k^O))+A[5]+3593408605&4294967295,b=k+(P<<5&4294967295|P>>>27),P=I+(k^O&(b^k))+A[10]+38016083&4294967295,I=b+(P<<9&4294967295|P>>>23),P=O+(b^k&(I^b))+A[15]+3634488961&4294967295,O=I+(P<<14&4294967295|P>>>18),P=k+(I^b&(O^I))+A[4]+3889429448&4294967295,k=O+(P<<20&4294967295|P>>>12),P=b+(O^I&(k^O))+A[9]+568446438&4294967295,b=k+(P<<5&4294967295|P>>>27),P=I+(k^O&(b^k))+A[14]+3275163606&4294967295,I=b+(P<<9&4294967295|P>>>23),P=O+(b^k&(I^b))+A[3]+4107603335&4294967295,O=I+(P<<14&4294967295|P>>>18),P=k+(I^b&(O^I))+A[8]+1163531501&4294967295,k=O+(P<<20&4294967295|P>>>12),P=b+(O^I&(k^O))+A[13]+2850285829&4294967295,b=k+(P<<5&4294967295|P>>>27),P=I+(k^O&(b^k))+A[2]+4243563512&4294967295,I=b+(P<<9&4294967295|P>>>23),P=O+(b^k&(I^b))+A[7]+1735328473&4294967295,O=I+(P<<14&4294967295|P>>>18),P=k+(I^b&(O^I))+A[12]+2368359562&4294967295,k=O+(P<<20&4294967295|P>>>12),P=b+(k^O^I)+A[5]+4294588738&4294967295,b=k+(P<<4&4294967295|P>>>28),P=I+(b^k^O)+A[8]+2272392833&4294967295,I=b+(P<<11&4294967295|P>>>21),P=O+(I^b^k)+A[11]+1839030562&4294967295,O=I+(P<<16&4294967295|P>>>16),P=k+(O^I^b)+A[14]+4259657740&4294967295,k=O+(P<<23&4294967295|P>>>9),P=b+(k^O^I)+A[1]+2763975236&4294967295,b=k+(P<<4&4294967295|P>>>28),P=I+(b^k^O)+A[4]+1272893353&4294967295,I=b+(P<<11&4294967295|P>>>21),P=O+(I^b^k)+A[7]+4139469664&4294967295,O=I+(P<<16&4294967295|P>>>16),P=k+(O^I^b)+A[10]+3200236656&4294967295,k=O+(P<<23&4294967295|P>>>9),P=b+(k^O^I)+A[13]+681279174&4294967295,b=k+(P<<4&4294967295|P>>>28),P=I+(b^k^O)+A[0]+3936430074&4294967295,I=b+(P<<11&4294967295|P>>>21),P=O+(I^b^k)+A[3]+3572445317&4294967295,O=I+(P<<16&4294967295|P>>>16),P=k+(O^I^b)+A[6]+76029189&4294967295,k=O+(P<<23&4294967295|P>>>9),P=b+(k^O^I)+A[9]+3654602809&4294967295,b=k+(P<<4&4294967295|P>>>28),P=I+(b^k^O)+A[12]+3873151461&4294967295,I=b+(P<<11&4294967295|P>>>21),P=O+(I^b^k)+A[15]+530742520&4294967295,O=I+(P<<16&4294967295|P>>>16),P=k+(O^I^b)+A[2]+3299628645&4294967295,k=O+(P<<23&4294967295|P>>>9),P=b+(O^(k|~I))+A[0]+4096336452&4294967295,b=k+(P<<6&4294967295|P>>>26),P=I+(k^(b|~O))+A[7]+1126891415&4294967295,I=b+(P<<10&4294967295|P>>>22),P=O+(b^(I|~k))+A[14]+2878612391&4294967295,O=I+(P<<15&4294967295|P>>>17),P=k+(I^(O|~b))+A[5]+4237533241&4294967295,k=O+(P<<21&4294967295|P>>>11),P=b+(O^(k|~I))+A[12]+1700485571&4294967295,b=k+(P<<6&4294967295|P>>>26),P=I+(k^(b|~O))+A[3]+2399980690&4294967295,I=b+(P<<10&4294967295|P>>>22),P=O+(b^(I|~k))+A[10]+4293915773&4294967295,O=I+(P<<15&4294967295|P>>>17),P=k+(I^(O|~b))+A[1]+2240044497&4294967295,k=O+(P<<21&4294967295|P>>>11),P=b+(O^(k|~I))+A[8]+1873313359&4294967295,b=k+(P<<6&4294967295|P>>>26),P=I+(k^(b|~O))+A[15]+4264355552&4294967295,I=b+(P<<10&4294967295|P>>>22),P=O+(b^(I|~k))+A[6]+2734768916&4294967295,O=I+(P<<15&4294967295|P>>>17),P=k+(I^(O|~b))+A[13]+1309151649&4294967295,k=O+(P<<21&4294967295|P>>>11),P=b+(O^(k|~I))+A[4]+4149444226&4294967295,b=k+(P<<6&4294967295|P>>>26),P=I+(k^(b|~O))+A[11]+3174756917&4294967295,I=b+(P<<10&4294967295|P>>>22),P=O+(b^(I|~k))+A[2]+718787259&4294967295,O=I+(P<<15&4294967295|P>>>17),P=k+(I^(O|~b))+A[9]+3951481745&4294967295,T.g[0]=T.g[0]+b&4294967295,T.g[1]=T.g[1]+(O+(P<<21&4294967295|P>>>11))&4294967295,T.g[2]=T.g[2]+O&4294967295,T.g[3]=T.g[3]+I&4294967295}r.prototype.u=function(T,b){b===void 0&&(b=T.length);for(var k=b-this.blockSize,A=this.B,O=this.h,I=0;I<b;){if(O==0)for(;I<=k;)i(this,T,I),I+=this.blockSize;if(typeof T=="string"){for(;I<b;)if(A[O++]=T.charCodeAt(I++),O==this.blockSize){i(this,A),O=0;break}}else for(;I<b;)if(A[O++]=T[I++],O==this.blockSize){i(this,A),O=0;break}}this.h=O,this.o+=b},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var b=1;b<T.length-8;++b)T[b]=0;var k=8*this.o;for(b=T.length-8;b<T.length;++b)T[b]=k&255,k/=256;for(this.u(T),T=Array(16),b=k=0;4>b;++b)for(var A=0;32>A;A+=8)T[k++]=this.g[b]>>>A&255;return T};function s(T,b){var k=a;return Object.prototype.hasOwnProperty.call(k,T)?k[T]:k[T]=b(T)}function o(T,b){this.h=b;for(var k=[],A=!0,O=T.length-1;0<=O;O--){var I=T[O]|0;A&&I==b||(k[O]=I,A=!1)}this.g=k}var a={};function l(T){return-128<=T&&128>T?s(T,function(b){return new o([b|0],0>b?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return x(c(-T));for(var b=[],k=1,A=0;T>=k;A++)b[A]=T/k|0,k*=4294967296;return new o(b,0)}function u(T,b){if(T.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T.charAt(0)=="-")return x(u(T.substring(1),b));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=c(Math.pow(b,8)),A=f,O=0;O<T.length;O+=8){var I=Math.min(8,T.length-O),P=parseInt(T.substring(O,O+I),b);8>I?(I=c(Math.pow(b,I)),A=A.j(I).add(c(P))):(A=A.j(k),A=A.add(c(P)))}return A}var f=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-x(this).m();for(var T=0,b=1,k=0;k<this.g.length;k++){var A=this.i(k);T+=(0<=A?A:4294967296+A)*b,b*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(y(this))return"0";if(_(this))return"-"+x(this).toString(T);for(var b=c(Math.pow(T,6)),k=this,A="";;){var O=R(k,b).g;k=v(k,O.j(b));var I=((0<k.g.length?k.g[0]:k.h)>>>0).toString(T);if(k=O,y(k))return I+A;for(;6>I.length;)I="0"+I;A=I+A}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function y(T){if(T.h!=0)return!1;for(var b=0;b<T.g.length;b++)if(T.g[b]!=0)return!1;return!0}function _(T){return T.h==-1}t.l=function(T){return T=v(this,T),_(T)?-1:y(T)?0:1};function x(T){for(var b=T.g.length,k=[],A=0;A<b;A++)k[A]=~T.g[A];return new o(k,~T.h).add(p)}t.abs=function(){return _(this)?x(this):this},t.add=function(T){for(var b=Math.max(this.g.length,T.g.length),k=[],A=0,O=0;O<=b;O++){var I=A+(this.i(O)&65535)+(T.i(O)&65535),P=(I>>>16)+(this.i(O)>>>16)+(T.i(O)>>>16);A=P>>>16,I&=65535,P&=65535,k[O]=P<<16|I}return new o(k,k[k.length-1]&-2147483648?-1:0)};function v(T,b){return T.add(x(b))}t.j=function(T){if(y(this)||y(T))return f;if(_(this))return _(T)?x(this).j(x(T)):x(x(this).j(T));if(_(T))return x(this.j(x(T)));if(0>this.l(m)&&0>T.l(m))return c(this.m()*T.m());for(var b=this.g.length+T.g.length,k=[],A=0;A<2*b;A++)k[A]=0;for(A=0;A<this.g.length;A++)for(var O=0;O<T.g.length;O++){var I=this.i(A)>>>16,P=this.i(A)&65535,B=T.i(O)>>>16,z=T.i(O)&65535;k[2*A+2*O]+=P*z,w(k,2*A+2*O),k[2*A+2*O+1]+=I*z,w(k,2*A+2*O+1),k[2*A+2*O+1]+=P*B,w(k,2*A+2*O+1),k[2*A+2*O+2]+=I*B,w(k,2*A+2*O+2)}for(A=0;A<b;A++)k[A]=k[2*A+1]<<16|k[2*A];for(A=b;A<2*b;A++)k[A]=0;return new o(k,0)};function w(T,b){for(;(T[b]&65535)!=T[b];)T[b+1]+=T[b]>>>16,T[b]&=65535,b++}function E(T,b){this.g=T,this.h=b}function R(T,b){if(y(b))throw Error("division by zero");if(y(T))return new E(f,f);if(_(T))return b=R(x(T),b),new E(x(b.g),x(b.h));if(_(b))return b=R(T,x(b)),new E(x(b.g),b.h);if(30<T.g.length){if(_(T)||_(b))throw Error("slowDivide_ only works with positive integers.");for(var k=p,A=b;0>=A.l(T);)k=C(k),A=C(A);var O=M(k,1),I=M(A,1);for(A=M(A,2),k=M(k,2);!y(A);){var P=I.add(A);0>=P.l(T)&&(O=O.add(k),I=P),A=M(A,1),k=M(k,1)}return b=v(T,O.j(b)),new E(O,b)}for(O=f;0<=T.l(b);){for(k=Math.max(1,Math.floor(T.m()/b.m())),A=Math.ceil(Math.log(k)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),I=c(k),P=I.j(b);_(P)||0<P.l(T);)k-=A,I=c(k),P=I.j(b);y(I)&&(I=p),O=O.add(I),T=v(T,P)}return new E(O,T)}t.A=function(T){return R(this,T).h},t.and=function(T){for(var b=Math.max(this.g.length,T.g.length),k=[],A=0;A<b;A++)k[A]=this.i(A)&T.i(A);return new o(k,this.h&T.h)},t.or=function(T){for(var b=Math.max(this.g.length,T.g.length),k=[],A=0;A<b;A++)k[A]=this.i(A)|T.i(A);return new o(k,this.h|T.h)},t.xor=function(T){for(var b=Math.max(this.g.length,T.g.length),k=[],A=0;A<b;A++)k[A]=this.i(A)^T.i(A);return new o(k,this.h^T.h)};function C(T){for(var b=T.g.length+1,k=[],A=0;A<b;A++)k[A]=T.i(A)<<1|T.i(A-1)>>>31;return new o(k,T.h)}function M(T,b){var k=b>>5;b%=32;for(var A=T.g.length-k,O=[],I=0;I<A;I++)O[I]=0<b?T.i(I+k)>>>b|T.i(I+k+1)<<32-b:T.i(I+k);return new o(O,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Mo=o}).apply(typeof BE<"u"?BE:typeof self<"u"?self:typeof window<"u"?window:{});var Td=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mR,Dc,gR,vf,zv,yR,vR,_R;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,g,S){return h==Array.prototype||h==Object.prototype||(h[g]=S.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Td=="object"&&Td];for(var g=0;g<h.length;++g){var S=h[g];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=n(this);function i(h,g){if(g)e:{var S=r;h=h.split(".");for(var N=0;N<h.length-1;N++){var L=h[N];if(!(L in S))break e;S=S[L]}h=h[h.length-1],N=S[h],g=g(N),g!=N&&g!=null&&e(S,h,{configurable:!0,writable:!0,value:g})}}function s(h,g){h instanceof String&&(h+="");var S=0,N=!1,L={next:function(){if(!N&&S<h.length){var F=S++;return{value:g(F,h[F]),done:!1}}return N=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(h){return h||function(){return s(this,function(g,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(h){var g=typeof h;return g=g!="object"?g:h?Array.isArray(h)?"array":g:"null",g=="array"||g=="object"&&typeof h.length=="number"}function c(h){var g=typeof h;return g=="object"&&h!=null||g=="function"}function u(h,g,S){return h.call.apply(h.bind,arguments)}function f(h,g,S){if(!h)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,N),h.apply(g,L)}}return function(){return h.apply(g,arguments)}}function p(h,g,S){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,p.apply(null,arguments)}function m(h,g){var S=Array.prototype.slice.call(arguments,1);return function(){var N=S.slice();return N.push.apply(N,arguments),h.apply(this,N)}}function y(h,g){function S(){}S.prototype=g.prototype,h.aa=g.prototype,h.prototype=new S,h.prototype.constructor=h,h.Qb=function(N,L,F){for(var X=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)X[$e-2]=arguments[$e];return g.prototype[L].apply(N,X)}}function _(h){const g=h.length;if(0<g){const S=Array(g);for(let N=0;N<g;N++)S[N]=h[N];return S}return[]}function x(h,g){for(let S=1;S<arguments.length;S++){const N=arguments[S];if(l(N)){const L=h.length||0,F=N.length||0;h.length=L+F;for(let X=0;X<F;X++)h[L+X]=N[X]}else h.push(N)}}class v{constructor(g,S){this.i=g,this.j=S,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(h){return/^[\s\xa0]*$/.test(h)}function E(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function R(h){return R[" "](h),h}R[" "]=function(){};var C=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function M(h,g,S){for(const N in h)g.call(S,h[N],N,h)}function T(h,g){for(const S in h)g.call(void 0,h[S],S,h)}function b(h){const g={};for(const S in h)g[S]=h[S];return g}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(h,g){let S,N;for(let L=1;L<arguments.length;L++){N=arguments[L];for(S in N)h[S]=N[S];for(let F=0;F<k.length;F++)S=k[F],Object.prototype.hasOwnProperty.call(N,S)&&(h[S]=N[S])}}function O(h){var g=1;h=h.split(":");const S=[];for(;0<g&&h.length;)S.push(h.shift()),g--;return h.length&&S.push(h.join(":")),S}function I(h){a.setTimeout(()=>{throw h},0)}function P(){var h=J;let g=null;return h.g&&(g=h.g,h.g=h.g.next,h.g||(h.h=null),g.next=null),g}class B{constructor(){this.h=this.g=null}add(g,S){const N=z.get();N.set(g,S),this.h?this.h.next=N:this.g=N,this.h=N}}var z=new v(()=>new H,h=>h.reset());class H{constructor(){this.next=this.g=this.h=null}set(g,S){this.h=g,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,$=!1,J=new B,Z=()=>{const h=a.Promise.resolve(void 0);Y=()=>{h.then(ye)}};var ye=()=>{for(var h;h=P();){try{h.h.call(h.g)}catch(S){I(S)}var g=z;g.j(h),100>g.h&&(g.h++,h.next=g.g,g.g=h)}$=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(h,g){this.type=h,this.g=this.target=g,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var We=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,g=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const S=()=>{};a.addEventListener("test",S,g),a.removeEventListener("test",S,g)}catch{}return h}();function tt(h,g){if(xe.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var S=this.type=h.type,N=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=g,g=h.relatedTarget){if(C){e:{try{R(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else S=="mouseover"?g=h.fromElement:S=="mouseout"&&(g=h.toElement);this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:He[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&tt.aa.h.call(this)}}y(tt,xe);var He={2:"touch",3:"pen",4:"mouse"};tt.prototype.h=function(){tt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ot="closure_listenable_"+(1e6*Math.random()|0),rn=0;function sn(h,g,S,N,L){this.listener=h,this.proxy=null,this.src=g,this.type=S,this.capture=!!N,this.ha=L,this.key=++rn,this.da=this.fa=!1}function Nn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Hn(h){this.src=h,this.g={},this.h=0}Hn.prototype.add=function(h,g,S,N,L){var F=h.toString();h=this.g[F],h||(h=this.g[F]=[],this.h++);var X=Fe(h,g,N,L);return-1<X?(g=h[X],S||(g.fa=!1)):(g=new sn(g,this.src,F,!!N,L),g.fa=S,h.push(g)),g};function re(h,g){var S=g.type;if(S in h.g){var N=h.g[S],L=Array.prototype.indexOf.call(N,g,void 0),F;(F=0<=L)&&Array.prototype.splice.call(N,L,1),F&&(Nn(g),h.g[S].length==0&&(delete h.g[S],h.h--))}}function Fe(h,g,S,N){for(var L=0;L<h.length;++L){var F=h[L];if(!F.da&&F.listener==g&&F.capture==!!S&&F.ha==N)return L}return-1}var ve="closure_lm_"+(1e6*Math.random()|0),Ue={};function be(h,g,S,N,L){if(Array.isArray(g)){for(var F=0;F<g.length;F++)be(h,g[F],S,N,L);return null}return S=G(S),h&&h[ot]?h.K(g,S,c(N)?!!N.capture:!1,L):Qi(h,g,S,!1,N,L)}function Qi(h,g,S,N,L,F){if(!g)throw Error("Invalid event type");var X=c(L)?!!L.capture:!!L,$e=ee(h);if($e||(h[ve]=$e=new Hn(h)),S=$e.add(g,S,N,X,F),S.proxy)return S;if(N=Gl(),S.proxy=N,N.src=h,N.listener=S,h.addEventListener)We||(L=X),L===void 0&&(L=!1),h.addEventListener(g.toString(),N,L);else if(h.attachEvent)h.attachEvent(V(g.toString()),N);else if(h.addListener&&h.removeListener)h.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Gl(){function h(S){return g.call(h.src,h.listener,S)}const g=U;return h}function Xi(h,g,S,N,L){if(Array.isArray(g))for(var F=0;F<g.length;F++)Xi(h,g[F],S,N,L);else N=c(N)?!!N.capture:!!N,S=G(S),h&&h[ot]?(h=h.i,g=String(g).toString(),g in h.g&&(F=h.g[g],S=Fe(F,S,N,L),-1<S&&(Nn(F[S]),Array.prototype.splice.call(F,S,1),F.length==0&&(delete h.g[g],h.h--)))):h&&(h=ee(h))&&(g=h.g[g.toString()],h=-1,g&&(h=Fe(g,S,N,L)),(S=-1<h?g[h]:null)&&j(S))}function j(h){if(typeof h!="number"&&h&&!h.da){var g=h.src;if(g&&g[ot])re(g.i,h);else{var S=h.type,N=h.proxy;g.removeEventListener?g.removeEventListener(S,N,h.capture):g.detachEvent?g.detachEvent(V(S),N):g.addListener&&g.removeListener&&g.removeListener(N),(S=ee(g))?(re(S,h),S.h==0&&(S.src=null,g[ve]=null)):Nn(h)}}}function V(h){return h in Ue?Ue[h]:Ue[h]="on"+h}function U(h,g){if(h.da)h=!0;else{g=new tt(g,this);var S=h.listener,N=h.ha||h.src;h.fa&&j(h),h=S.call(N,g)}return h}function ee(h){return h=h[ve],h instanceof Hn?h:null}var Q="__closure_events_fn_"+(1e9*Math.random()>>>0);function G(h){return typeof h=="function"?h:(h[Q]||(h[Q]=function(g){return h.handleEvent(g)}),h[Q])}function te(){pe.call(this),this.i=new Hn(this),this.M=this,this.F=null}y(te,pe),te.prototype[ot]=!0,te.prototype.removeEventListener=function(h,g,S,N){Xi(this,h,g,S,N)};function he(h,g){var S,N=h.F;if(N)for(S=[];N;N=N.F)S.push(N);if(h=h.M,N=g.type||g,typeof g=="string")g=new xe(g,h);else if(g instanceof xe)g.target=g.target||h;else{var L=g;g=new xe(N,h),A(g,L)}if(L=!0,S)for(var F=S.length-1;0<=F;F--){var X=g.g=S[F];L=Pe(X,N,!0,g)&&L}if(X=g.g=h,L=Pe(X,N,!0,g)&&L,L=Pe(X,N,!1,g)&&L,S)for(F=0;F<S.length;F++)X=g.g=S[F],L=Pe(X,N,!1,g)&&L}te.prototype.N=function(){if(te.aa.N.call(this),this.i){var h=this.i,g;for(g in h.g){for(var S=h.g[g],N=0;N<S.length;N++)Nn(S[N]);delete h.g[g],h.h--}}this.F=null},te.prototype.K=function(h,g,S,N){return this.i.add(String(h),g,!1,S,N)},te.prototype.L=function(h,g,S,N){return this.i.add(String(h),g,!0,S,N)};function Pe(h,g,S,N){if(g=h.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,F=0;F<g.length;++F){var X=g[F];if(X&&!X.da&&X.capture==S){var $e=X.listener,Ht=X.ha||X.src;X.fa&&re(h.i,X),L=$e.call(Ht,N)!==!1&&L}}return L&&!N.defaultPrevented}function Ot(h,g,S){if(typeof h=="function")S&&(h=p(h,S));else if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(h,g||0)}function jr(h){h.g=Ot(()=>{h.g=null,h.i&&(h.i=!1,jr(h))},h.l);const g=h.h;h.h=null,h.m.apply(null,g)}class qn extends pe{constructor(g,S){super(),this.m=g,this.l=S,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:jr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pi(h){pe.call(this),this.h=h,this.g={}}y(pi,pe);var vr=[];function mi(h){M(h.g,function(g,S){this.g.hasOwnProperty(S)&&j(g)},h),h.g={}}pi.prototype.N=function(){pi.aa.N.call(this),mi(this)},pi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var no=a.JSON.stringify,ro=a.JSON.parse,fa=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function Lr(){}Lr.prototype.h=null;function Hh(h){return h.h||(h.h=h.i())}function Yl(){}var io={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pa(){xe.call(this,"d")}y(pa,xe);function Vt(){xe.call(this,"c")}y(Vt,xe);var gt={},so=null;function Be(){return so=so||new te}gt.La="serverreachability";function Kn(h){xe.call(this,gt.La,h)}y(Kn,xe);function oo(h){const g=Be();he(g,new Kn(g))}gt.STAT_EVENT="statevent";function ma(h,g){xe.call(this,gt.STAT_EVENT,h),this.stat=g}y(ma,xe);function Ft(h){const g=Be();he(g,new ma(g,h))}gt.Ma="timingevent";function Ql(h,g){xe.call(this,gt.Ma,h),this.size=g}y(Ql,xe);function gi(h,g){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},g)}function Vr(){this.g=!0}Vr.prototype.xa=function(){this.g=!1};function Xl(h,g,S,N,L,F){h.info(function(){if(h.g)if(F)for(var X="",$e=F.split("&"),Ht=0;Ht<$e.length;Ht++){var Ne=$e[Ht].split("=");if(1<Ne.length){var on=Ne[0];Ne=Ne[1];var an=on.split("_");X=2<=an.length&&an[1]=="type"?X+(on+"="+Ne+"&"):X+(on+"=redacted&")}}else X=null;else X=F;return"XMLHTTP REQ ("+N+") [attempt "+L+"]: "+g+`
`+S+`
`+X})}function Jl(h,g,S,N,L,F,X){h.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+L+"]: "+g+`
`+S+`
`+F+" "+X})}function Fr(h,g,S,N){h.info(function(){return"XMLHTTP TEXT ("+g+"): "+Zl(h,S)+(N?" "+N:"")})}function sg(h,g){h.info(function(){return"TIMEOUT: "+g})}Vr.prototype.info=function(){};function Zl(h,g){if(!h.g)return g;if(!g)return null;try{var S=JSON.parse(g);if(S){for(h=0;h<S.length;h++)if(Array.isArray(S[h])){var N=S[h];if(!(2>N.length)){var L=N[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var X=1;X<L.length;X++)L[X]=""}}}}return no(S)}catch{return g}}var ao={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ec;function _e(){}y(_e,Lr),_e.prototype.g=function(){return new XMLHttpRequest},_e.prototype.i=function(){return{}},ec=new _e;function Oe(h,g,S,N){this.j=h,this.i=g,this.l=S,this.R=N||1,this.U=new pi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new at}function at(){this.i=null,this.g="",this.h=!1}var Dn={},En={};function lo(h,g,S){h.L=1,h.v=Jh(yi(g)),h.m=S,h.P=!0,Kh(h,null)}function Kh(h,g){h.F=Date.now(),Yh(h),h.A=yi(h.v);var S=h.A,N=h.R;Array.isArray(N)||(N=[String(N)]),Ib(S.i,"t",N),h.C=0,S=h.j.J,h.h=new at,h.g=Hb(h.j,S?g:null,!h.m),0<h.O&&(h.M=new qn(p(h.Y,h,h.g),h.O)),g=h.U,S=h.g,N=h.ca;var L="readystatechange";Array.isArray(L)||(L&&(vr[0]=L.toString()),L=vr);for(var F=0;F<L.length;F++){var X=be(S,L[F],N||g.handleEvent,!1,g.h||g);if(!X)break;g.g[X.key]=X}g=h.H?b(h.H):{},h.m?(h.u||(h.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,g)):(h.u="GET",h.g.ea(h.A,h.u,null,g)),oo(),Xl(h.i,h.u,h.A,h.l,h.R,h.m)}Oe.prototype.ca=function(h){h=h.target;const g=this.M;g&&vi(h)==3?g.j():this.Y(h)},Oe.prototype.Y=function(h){try{if(h==this.g)e:{const an=vi(this.g);var g=this.g.Ba();const va=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||Ob(this.g)))){this.J||an!=4||g==7||(g==8||0>=va?oo(3):oo(2)),og(this);var S=this.g.Z();this.X=S;t:if(Gh(this)){var N=Ob(this.g);h="";var L=N.length,F=vi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){co(this),tc(this);var X="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,h+=this.h.i.decode(N[g],{stream:!(F&&g==L-1)});N.length=0,this.h.g+=h,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=S==200,Jl(this.i,this.u,this.A,this.l,this.R,an,S),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,Ht=this.g;if(($e=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w($e)){var Ne=$e;break t}}Ne=null}if(S=Ne)Fr(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ag(this,S);else{this.o=!1,this.s=3,Ft(12),co(this),tc(this);break e}}if(this.P){S=!0;let _r;for(;!this.J&&this.C<X.length;)if(_r=pM(this,X),_r==En){an==4&&(this.s=4,Ft(14),S=!1),Fr(this.i,this.l,null,"[Incomplete Response]");break}else if(_r==Dn){this.s=4,Ft(15),Fr(this.i,this.l,X,"[Invalid Chunk]"),S=!1;break}else Fr(this.i,this.l,_r,null),ag(this,_r);if(Gh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||X.length!=0||this.h.h||(this.s=1,Ft(16),S=!1),this.o=this.o&&S,!S)Fr(this.i,this.l,X,"[Invalid Chunked Response]"),co(this),tc(this);else if(0<X.length&&!this.W){this.W=!0;var on=this.j;on.g==this&&on.ba&&!on.M&&(on.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),fg(on),on.M=!0,Ft(11))}}else Fr(this.i,this.l,X,null),ag(this,X);an==4&&co(this),this.o&&!this.J&&(an==4?Bb(this.j,this):(this.o=!1,Yh(this)))}else RM(this.g),S==400&&0<X.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),co(this),tc(this)}}}catch{}finally{}};function Gh(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function pM(h,g){var S=h.C,N=g.indexOf(`
`,S);return N==-1?En:(S=Number(g.substring(S,N)),isNaN(S)?Dn:(N+=1,N+S>g.length?En:(g=g.slice(N,N+S),h.C=N+S,g)))}Oe.prototype.cancel=function(){this.J=!0,co(this)};function Yh(h){h.S=Date.now()+h.I,mb(h,h.I)}function mb(h,g){if(h.B!=null)throw Error("WatchDog timer not null");h.B=gi(p(h.ba,h),g)}function og(h){h.B&&(a.clearTimeout(h.B),h.B=null)}Oe.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(sg(this.i,this.A),this.L!=2&&(oo(),Ft(17)),co(this),this.s=2,tc(this)):mb(this,this.S-h)};function tc(h){h.j.G==0||h.J||Bb(h.j,h)}function co(h){og(h);var g=h.M;g&&typeof g.ma=="function"&&g.ma(),h.M=null,mi(h.U),h.g&&(g=h.g,h.g=null,g.abort(),g.ma())}function ag(h,g){try{var S=h.j;if(S.G!=0&&(S.g==h||lg(S.h,h))){if(!h.K&&lg(S.h,h)&&S.G==3){try{var N=S.Da.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var L=N;if(L[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<h.F)id(S),nd(S);else break e;dg(S),Ft(18)}}else S.za=L[1],0<S.za-S.T&&37500>L[2]&&S.F&&S.v==0&&!S.C&&(S.C=gi(p(S.Za,S),6e3));if(1>=vb(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else ho(S,11)}else if((h.K||S.g==h)&&id(S),!w(g))for(L=S.Da.g.parse(g),g=0;g<L.length;g++){let Ne=L[g];if(S.T=Ne[0],Ne=Ne[1],S.G==2)if(Ne[0]=="c"){S.K=Ne[1],S.ia=Ne[2];const on=Ne[3];on!=null&&(S.la=on,S.j.info("VER="+S.la));const an=Ne[4];an!=null&&(S.Aa=an,S.j.info("SVER="+S.Aa));const va=Ne[5];va!=null&&typeof va=="number"&&0<va&&(N=1.5*va,S.L=N,S.j.info("backChannelRequestTimeoutMs_="+N)),N=S;const _r=h.g;if(_r){const od=_r.g?_r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(od){var F=N.h;F.g||od.indexOf("spdy")==-1&&od.indexOf("quic")==-1&&od.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(cg(F,F.h),F.h=null))}if(N.D){const pg=_r.g?_r.g.getResponseHeader("X-HTTP-Session-Id"):null;pg&&(N.ya=pg,Ye(N.I,N.D,pg))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-h.F,S.j.info("Handshake RTT: "+S.R+"ms")),N=S;var X=h;if(N.qa=Wb(N,N.J?N.ia:null,N.W),X.K){_b(N.h,X);var $e=X,Ht=N.L;Ht&&($e.I=Ht),$e.B&&(og($e),Yh($e)),N.g=X}else Fb(N);0<S.i.length&&rd(S)}else Ne[0]!="stop"&&Ne[0]!="close"||ho(S,7);else S.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?ho(S,7):hg(S):Ne[0]!="noop"&&S.l&&S.l.ta(Ne),S.v=0)}}oo(4)}catch{}}var mM=class{constructor(h,g){this.g=h,this.map=g}};function gb(h){this.l=h||10,a.PerformanceNavigationTiming?(h=a.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function yb(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function vb(h){return h.h?1:h.g?h.g.size:0}function lg(h,g){return h.h?h.h==g:h.g?h.g.has(g):!1}function cg(h,g){h.g?h.g.add(g):h.h=g}function _b(h,g){h.h&&h.h==g?h.h=null:h.g&&h.g.has(g)&&h.g.delete(g)}gb.prototype.cancel=function(){if(this.i=xb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function xb(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let g=h.i;for(const S of h.g.values())g=g.concat(S.D);return g}return _(h.i)}function gM(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(l(h)){for(var g=[],S=h.length,N=0;N<S;N++)g.push(h[N]);return g}g=[],S=0;for(N in h)g[S++]=h[N];return g}function yM(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(l(h)||typeof h=="string"){var g=[];h=h.length;for(var S=0;S<h;S++)g.push(S);return g}g=[],S=0;for(const N in h)g[S++]=N;return g}}}function wb(h,g){if(h.forEach&&typeof h.forEach=="function")h.forEach(g,void 0);else if(l(h)||typeof h=="string")Array.prototype.forEach.call(h,g,void 0);else for(var S=yM(h),N=gM(h),L=N.length,F=0;F<L;F++)g.call(void 0,N[F],S&&S[F],h)}var bb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vM(h,g){if(h){h=h.split("&");for(var S=0;S<h.length;S++){var N=h[S].indexOf("="),L=null;if(0<=N){var F=h[S].substring(0,N);L=h[S].substring(N+1)}else F=h[S];g(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function uo(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof uo){this.h=h.h,Qh(this,h.j),this.o=h.o,this.g=h.g,Xh(this,h.s),this.l=h.l;var g=h.i,S=new ic;S.i=g.i,g.g&&(S.g=new Map(g.g),S.h=g.h),Sb(this,S),this.m=h.m}else h&&(g=String(h).match(bb))?(this.h=!1,Qh(this,g[1]||"",!0),this.o=nc(g[2]||""),this.g=nc(g[3]||"",!0),Xh(this,g[4]),this.l=nc(g[5]||"",!0),Sb(this,g[6]||"",!0),this.m=nc(g[7]||"")):(this.h=!1,this.i=new ic(null,this.h))}uo.prototype.toString=function(){var h=[],g=this.j;g&&h.push(rc(g,Eb,!0),":");var S=this.g;return(S||g=="file")&&(h.push("//"),(g=this.o)&&h.push(rc(g,Eb,!0),"@"),h.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&h.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&h.push("/"),h.push(rc(S,S.charAt(0)=="/"?wM:xM,!0))),(S=this.i.toString())&&h.push("?",S),(S=this.m)&&h.push("#",rc(S,SM)),h.join("")};function yi(h){return new uo(h)}function Qh(h,g,S){h.j=S?nc(g,!0):g,h.j&&(h.j=h.j.replace(/:$/,""))}function Xh(h,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);h.s=g}else h.s=null}function Sb(h,g,S){g instanceof ic?(h.i=g,EM(h.i,h.h)):(S||(g=rc(g,bM)),h.i=new ic(g,h.h))}function Ye(h,g,S){h.i.set(g,S)}function Jh(h){return Ye(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function nc(h,g){return h?g?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function rc(h,g,S){return typeof h=="string"?(h=encodeURI(h).replace(g,_M),S&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function _M(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Eb=/[#\/\?@]/g,xM=/[#\?:]/g,wM=/[#\?]/g,bM=/[#\?@]/g,SM=/#/g;function ic(h,g){this.h=this.g=null,this.i=h||null,this.j=!!g}function Ji(h){h.g||(h.g=new Map,h.h=0,h.i&&vM(h.i,function(g,S){h.add(decodeURIComponent(g.replace(/\+/g," ")),S)}))}t=ic.prototype,t.add=function(h,g){Ji(this),this.i=null,h=ga(this,h);var S=this.g.get(h);return S||this.g.set(h,S=[]),S.push(g),this.h+=1,this};function Tb(h,g){Ji(h),g=ga(h,g),h.g.has(g)&&(h.i=null,h.h-=h.g.get(g).length,h.g.delete(g))}function kb(h,g){return Ji(h),g=ga(h,g),h.g.has(g)}t.forEach=function(h,g){Ji(this),this.g.forEach(function(S,N){S.forEach(function(L){h.call(g,L,N,this)},this)},this)},t.na=function(){Ji(this);const h=Array.from(this.g.values()),g=Array.from(this.g.keys()),S=[];for(let N=0;N<g.length;N++){const L=h[N];for(let F=0;F<L.length;F++)S.push(g[N])}return S},t.V=function(h){Ji(this);let g=[];if(typeof h=="string")kb(this,h)&&(g=g.concat(this.g.get(ga(this,h))));else{h=Array.from(this.g.values());for(let S=0;S<h.length;S++)g=g.concat(h[S])}return g},t.set=function(h,g){return Ji(this),this.i=null,h=ga(this,h),kb(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[g]),this.h+=1,this},t.get=function(h,g){return h?(h=this.V(h),0<h.length?String(h[0]):g):g};function Ib(h,g,S){Tb(h,g),0<S.length&&(h.i=null,h.g.set(ga(h,g),_(S)),h.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],g=Array.from(this.g.keys());for(var S=0;S<g.length;S++){var N=g[S];const F=encodeURIComponent(String(N)),X=this.V(N);for(N=0;N<X.length;N++){var L=F;X[N]!==""&&(L+="="+encodeURIComponent(String(X[N]))),h.push(L)}}return this.i=h.join("&")};function ga(h,g){return g=String(g),h.j&&(g=g.toLowerCase()),g}function EM(h,g){g&&!h.j&&(Ji(h),h.i=null,h.g.forEach(function(S,N){var L=N.toLowerCase();N!=L&&(Tb(this,N),Ib(this,L,S))},h)),h.j=g}function TM(h,g){const S=new Vr;if(a.Image){const N=new Image;N.onload=m(Zi,S,"TestLoadImage: loaded",!0,g,N),N.onerror=m(Zi,S,"TestLoadImage: error",!1,g,N),N.onabort=m(Zi,S,"TestLoadImage: abort",!1,g,N),N.ontimeout=m(Zi,S,"TestLoadImage: timeout",!1,g,N),a.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=h}else g(!1)}function kM(h,g){const S=new Vr,N=new AbortController,L=setTimeout(()=>{N.abort(),Zi(S,"TestPingServer: timeout",!1,g)},1e4);fetch(h,{signal:N.signal}).then(F=>{clearTimeout(L),F.ok?Zi(S,"TestPingServer: ok",!0,g):Zi(S,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Zi(S,"TestPingServer: error",!1,g)})}function Zi(h,g,S,N,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),N(S)}catch{}}function IM(){this.g=new fa}function CM(h,g,S){const N=S||"";try{wb(h,function(L,F){let X=L;c(L)&&(X=no(L)),g.push(N+F+"="+encodeURIComponent(X))})}catch(L){throw g.push(N+"type="+encodeURIComponent("_badmap")),L}}function Zh(h){this.l=h.Ub||null,this.j=h.eb||!1}y(Zh,Lr),Zh.prototype.g=function(){return new ed(this.l,this.j)},Zh.prototype.i=function(h){return function(){return h}}({});function ed(h,g){te.call(this),this.D=h,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(ed,te),t=ed.prototype,t.open=function(h,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=g,this.readyState=1,oc(this)},t.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(g.body=h),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sc(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,oc(this)),this.g&&(this.readyState=3,oc(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cb(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cb(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var g=h.value?h.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!h.done}))&&(this.response=this.responseText+=g)}h.done?sc(this):oc(this),this.readyState==3&&Cb(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,sc(this))},t.Qa=function(h){this.g&&(this.response=h,sc(this))},t.ga=function(){this.g&&sc(this)};function sc(h){h.readyState=4,h.l=null,h.j=null,h.v=null,oc(h)}t.setRequestHeader=function(h,g){this.u.append(h,g)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],g=this.h.entries();for(var S=g.next();!S.done;)S=S.value,h.push(S[0]+": "+S[1]),S=g.next();return h.join(`\r
`)};function oc(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ed.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ab(h){let g="";return M(h,function(S,N){g+=N,g+=":",g+=S,g+=`\r
`}),g}function ug(h,g,S){e:{for(N in S){var N=!1;break e}N=!0}N||(S=Ab(S),typeof h=="string"?S!=null&&encodeURIComponent(String(S)):Ye(h,g,S))}function yt(h){te.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(yt,te);var AM=/^https?$/i,PM=["POST","PUT"];t=yt.prototype,t.Ha=function(h){this.J=h},t.ea=function(h,g,S,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);g=g?g.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ec.g(),this.v=this.o?Hh(this.o):Hh(ec),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(h),!0),this.B=!1}catch(F){Pb(this,F);return}if(h=S||"",S=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var L in N)S.set(L,N[L]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const F of N.keys())S.set(F,N.get(F));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(S.keys()).find(F=>F.toLowerCase()=="content-type"),L=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(PM,g,void 0))||N||L||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,X]of S)this.g.setRequestHeader(F,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Db(this),this.u=!0,this.g.send(h),this.u=!1}catch(F){Pb(this,F)}};function Pb(h,g){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=g,h.m=5,Rb(h),td(h)}function Rb(h){h.A||(h.A=!0,he(h,"complete"),he(h,"error"))}t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,he(this,"complete"),he(this,"abort"),td(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),td(this,!0)),yt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Nb(this):this.bb())},t.bb=function(){Nb(this)};function Nb(h){if(h.h&&typeof o<"u"&&(!h.v[1]||vi(h)!=4||h.Z()!=2)){if(h.u&&vi(h)==4)Ot(h.Ea,0,h);else if(he(h,"readystatechange"),vi(h)==4){h.h=!1;try{const X=h.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var S;if(!(S=g)){var N;if(N=X===0){var L=String(h.D).match(bb)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),N=!AM.test(L?L.toLowerCase():"")}S=N}if(S)he(h,"complete"),he(h,"success");else{h.m=6;try{var F=2<vi(h)?h.g.statusText:""}catch{F=""}h.l=F+" ["+h.Z()+"]",Rb(h)}}finally{td(h)}}}}function td(h,g){if(h.g){Db(h);const S=h.g,N=h.v[0]?()=>{}:null;h.g=null,h.v=null,g||he(h,"ready");try{S.onreadystatechange=N}catch{}}}function Db(h){h.I&&(a.clearTimeout(h.I),h.I=null)}t.isActive=function(){return!!this.g};function vi(h){return h.g?h.g.readyState:0}t.Z=function(){try{return 2<vi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var g=this.g.responseText;return h&&g.indexOf(h)==0&&(g=g.substring(h.length)),ro(g)}};function Ob(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function RM(h){const g={};h=(h.g&&2<=vi(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<h.length;N++){if(w(h[N]))continue;var S=O(h[N]);const L=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const F=g[L]||[];g[L]=F,F.push(S)}T(g,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ac(h,g,S){return S&&S.internalChannelParams&&S.internalChannelParams[h]||g}function Mb(h){this.Aa=0,this.i=[],this.j=new Vr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ac("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ac("baseRetryDelayMs",5e3,h),this.cb=ac("retryDelaySeedMs",1e4,h),this.Wa=ac("forwardChannelMaxRetries",2,h),this.wa=ac("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new gb(h&&h.concurrentRequestLimit),this.Da=new IM,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Mb.prototype,t.la=8,t.G=1,t.connect=function(h,g,S,N){Ft(0),this.W=h,this.H=g||{},S&&N!==void 0&&(this.H.OSID=S,this.H.OAID=N),this.F=this.X,this.I=Wb(this,null,this.W),rd(this)};function hg(h){if(jb(h),h.G==3){var g=h.U++,S=yi(h.I);if(Ye(S,"SID",h.K),Ye(S,"RID",g),Ye(S,"TYPE","terminate"),lc(h,S),g=new Oe(h,h.j,g),g.L=2,g.v=Jh(yi(S)),S=!1,a.navigator&&a.navigator.sendBeacon)try{S=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!S&&a.Image&&(new Image().src=g.v,S=!0),S||(g.g=Hb(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Yh(g)}$b(h)}function nd(h){h.g&&(fg(h),h.g.cancel(),h.g=null)}function jb(h){nd(h),h.u&&(a.clearTimeout(h.u),h.u=null),id(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&a.clearTimeout(h.s),h.s=null)}function rd(h){if(!yb(h.h)&&!h.s){h.s=!0;var g=h.Ga;Y||Z(),$||(Y(),$=!0),J.add(g,h),h.B=0}}function NM(h,g){return vb(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=g.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=gi(p(h.Ga,h,g),zb(h,h.B)),h.B++,!0)}t.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const L=new Oe(this,this.j,h);let F=this.o;if(this.S&&(F?(F=b(F),A(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var g=0,S=0;S<this.i.length;S++){t:{var N=this.i[S];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,4096<g){g=S;break e}if(g===4096||S===this.i.length-1){g=S+1;break e}}g=1e3}else g=1e3;g=Vb(this,L,g),S=yi(this.I),Ye(S,"RID",h),Ye(S,"CVER",22),this.D&&Ye(S,"X-HTTP-Session-Id",this.D),lc(this,S),F&&(this.O?g="headers="+encodeURIComponent(String(Ab(F)))+"&"+g:this.m&&ug(S,this.m,F)),cg(this.h,L),this.Ua&&Ye(S,"TYPE","init"),this.P?(Ye(S,"$req",g),Ye(S,"SID","null"),L.T=!0,lo(L,S,null)):lo(L,S,g),this.G=2}}else this.G==3&&(h?Lb(this,h):this.i.length==0||yb(this.h)||Lb(this))};function Lb(h,g){var S;g?S=g.l:S=h.U++;const N=yi(h.I);Ye(N,"SID",h.K),Ye(N,"RID",S),Ye(N,"AID",h.T),lc(h,N),h.m&&h.o&&ug(N,h.m,h.o),S=new Oe(h,h.j,S,h.B+1),h.m===null&&(S.H=h.o),g&&(h.i=g.D.concat(h.i)),g=Vb(h,S,1e3),S.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),cg(h.h,S),lo(S,N,g)}function lc(h,g){h.H&&M(h.H,function(S,N){Ye(g,N,S)}),h.l&&wb({},function(S,N){Ye(g,N,S)})}function Vb(h,g,S){S=Math.min(h.i.length,S);var N=h.l?p(h.l.Na,h.l,h):null;e:{var L=h.i;let F=-1;for(;;){const X=["count="+S];F==-1?0<S?(F=L[0].g,X.push("ofs="+F)):F=0:X.push("ofs="+F);let $e=!0;for(let Ht=0;Ht<S;Ht++){let Ne=L[Ht].g;const on=L[Ht].map;if(Ne-=F,0>Ne)F=Math.max(0,L[Ht].g-100),$e=!1;else try{CM(on,X,"req"+Ne+"_")}catch{N&&N(on)}}if($e){N=X.join("&");break e}}}return h=h.i.splice(0,S),g.D=h,N}function Fb(h){if(!h.g&&!h.u){h.Y=1;var g=h.Fa;Y||Z(),$||(Y(),$=!0),J.add(g,h),h.v=0}}function dg(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=gi(p(h.Fa,h),zb(h,h.v)),h.v++,!0)}t.Fa=function(){if(this.u=null,Ub(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=gi(p(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),nd(this),Ub(this))};function fg(h){h.A!=null&&(a.clearTimeout(h.A),h.A=null)}function Ub(h){h.g=new Oe(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var g=yi(h.qa);Ye(g,"RID","rpc"),Ye(g,"SID",h.K),Ye(g,"AID",h.T),Ye(g,"CI",h.F?"0":"1"),!h.F&&h.ja&&Ye(g,"TO",h.ja),Ye(g,"TYPE","xmlhttp"),lc(h,g),h.m&&h.o&&ug(g,h.m,h.o),h.L&&(h.g.I=h.L);var S=h.g;h=h.ia,S.L=1,S.v=Jh(yi(g)),S.m=null,S.P=!0,Kh(S,h)}t.Za=function(){this.C!=null&&(this.C=null,nd(this),dg(this),Ft(19))};function id(h){h.C!=null&&(a.clearTimeout(h.C),h.C=null)}function Bb(h,g){var S=null;if(h.g==g){id(h),fg(h),h.g=null;var N=2}else if(lg(h.h,g))S=g.D,_b(h.h,g),N=1;else return;if(h.G!=0){if(g.o)if(N==1){S=g.m?g.m.length:0,g=Date.now()-g.F;var L=h.B;N=Be(),he(N,new Ql(N,S)),rd(h)}else Fb(h);else if(L=g.s,L==3||L==0&&0<g.X||!(N==1&&NM(h,g)||N==2&&dg(h)))switch(S&&0<S.length&&(g=h.h,g.i=g.i.concat(S)),L){case 1:ho(h,5);break;case 4:ho(h,10);break;case 3:ho(h,6);break;default:ho(h,2)}}}function zb(h,g){let S=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(S*=2),S*g}function ho(h,g){if(h.j.info("Error code "+g),g==2){var S=p(h.fb,h),N=h.Xa;const L=!N;N=new uo(N||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qh(N,"https"),Jh(N),L?TM(N.toString(),S):kM(N.toString(),S)}else Ft(2);h.G=0,h.l&&h.l.sa(g),$b(h),jb(h)}t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function $b(h){if(h.G=0,h.ka=[],h.l){const g=xb(h.h);(g.length!=0||h.i.length!=0)&&(x(h.ka,g),x(h.ka,h.i),h.h.i.length=0,_(h.i),h.i.length=0),h.l.ra()}}function Wb(h,g,S){var N=S instanceof uo?yi(S):new uo(S);if(N.g!="")g&&(N.g=g+"."+N.g),Xh(N,N.s);else{var L=a.location;N=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var F=new uo(null);N&&Qh(F,N),g&&(F.g=g),L&&Xh(F,L),S&&(F.l=S),N=F}return S=h.D,g=h.ya,S&&g&&Ye(N,S,g),Ye(N,"VER",h.la),lc(h,N),N}function Hb(h,g,S){if(g&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=h.Ca&&!h.pa?new yt(new Zh({eb:S})):new yt(h.pa),g.Ha(h.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qb(){}t=qb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sd(){}sd.prototype.g=function(h,g){return new Gn(h,g)};function Gn(h,g){te.call(this),this.g=new Mb(g),this.l=h,this.h=g&&g.messageUrlParams||null,h=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(h?h["X-WebChannel-Content-Type"]=g.messageContentType:h={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(h?h["X-WebChannel-Client-Profile"]=g.va:h={"X-WebChannel-Client-Profile":g.va}),this.g.S=h,(h=g&&g.Sb)&&!w(h)&&(this.g.m=h),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,h=this.h,h!==null&&g in h&&(h=this.h,g in h&&delete h[g])),this.j=new ya(this)}y(Gn,te),Gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){hg(this.g)},Gn.prototype.o=function(h){var g=this.g;if(typeof h=="string"){var S={};S.__data__=h,h=S}else this.u&&(S={},S.__data__=no(h),h=S);g.i.push(new mM(g.Ya++,h)),g.G==3&&rd(g)},Gn.prototype.N=function(){this.g.l=null,delete this.j,hg(this.g),delete this.g,Gn.aa.N.call(this)};function Kb(h){pa.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var g=h.__sm__;if(g){e:{for(const S in g){h=S;break e}h=void 0}(this.i=h)&&(h=this.i,g=g!==null&&h in g?g[h]:void 0),this.data=g}else this.data=h}y(Kb,pa);function Gb(){Vt.call(this),this.status=1}y(Gb,Vt);function ya(h){this.g=h}y(ya,qb),ya.prototype.ua=function(){he(this.g,"a")},ya.prototype.ta=function(h){he(this.g,new Kb(h))},ya.prototype.sa=function(h){he(this.g,new Gb)},ya.prototype.ra=function(){he(this.g,"b")},sd.prototype.createWebChannel=sd.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,_R=function(){return new sd},vR=function(){return Be()},yR=gt,zv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ao.NO_ERROR=0,ao.TIMEOUT=8,ao.HTTP_ERROR=6,vf=ao,qh.COMPLETE="complete",gR=qh,Yl.EventType=io,io.OPEN="a",io.CLOSE="b",io.ERROR="c",io.MESSAGE="d",te.prototype.listen=te.prototype.K,Dc=Yl,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,mR=yt}).apply(typeof Td<"u"?Td:typeof self<"u"?self:typeof window<"u"?window:{});const zE="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=new q0("@firebase/firestore");function yc(){return Ko.logLevel}function oe(t,...e){if(Ko.logLevel<=ke.DEBUG){const n=e.map(ix);Ko.debug(`Firestore (${Ll}): ${t}`,...n)}}function Wi(t,...e){if(Ko.logLevel<=ke.ERROR){const n=e.map(ix);Ko.error(`Firestore (${Ll}): ${t}`,...n)}}function yl(t,...e){if(Ko.logLevel<=ke.WARN){const n=e.map(ix);Ko.warn(`Firestore (${Ll}): ${t}`,...n)}}function ix(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t="Unexpected state"){const e=`FIRESTORE (${Ll}) INTERNAL ASSERTION FAILED: `+t;throw Wi(e),new Error(e)}function Ve(t,e){t||fe()}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends ui{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pn.UNAUTHENTICATED))}shutdown(){}}class a5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class l5{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ve(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Oi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Oi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve(typeof r.accessToken=="string"),new xR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string"),new pn(e)}}class c5{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class u5{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new c5(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class h5{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d5{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ve(this.o===void 0);const r=s=>{s.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ve(typeof n.token=="string"),this.R=n.token,new h5(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=f5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function De(t,e){return t<e?-1:t>e?1:0}function vl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Lt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.timestamp=e}static fromTimestamp(e){return new me(e)}static min(){return new me(new Lt(0,0))}static max(){return new me(new Lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(),r===void 0?r=e.length-n:r>e.length-n&&fe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class qe extends Vu{construct(e,n,r){return new qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new qe(n)}static emptyPath(){return new qe([])}}const p5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Vu{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return p5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ne(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.path=e}static fromPath(e){return new le(qe.fromString(e))}static fromName(e){return new le(qe.fromString(e).popFirst(5))}static empty(){return new le(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new le(new qe(e.slice()))}}function m5(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=me.fromTimestamp(r===1e9?new Lt(n+1,0):new Lt(n,r));return new Fs(i,le.empty(),e)}function g5(t){return new Fs(t.readTime,t.key,-1)}class Fs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fs(me.min(),le.empty(),-1)}static max(){return new Fs(me.max(),le.empty(),-1)}}function y5(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:De(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vh(t){if(t.code!==W.FAILED_PRECONDITION||t.message!==v5)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof q?n:q.resolve(n)}catch(n){return q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):q.reject(n)}static resolve(e){return new q((n,r)=>{n(e)})}static reject(e){return new q((n,r)=>{r(e)})}static waitFor(e){return new q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=q.resolve(!1);for(const r of e)n=n.next(i=>i?q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function x5(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _h(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sx.oe=-1;function mm(t){return t==null}function fp(t){return t===0&&1/t==-1/0}function w5(t){return typeof t=="number"&&Number.isInteger(t)&&!fp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ia(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||Yt.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kd(this.root,e,this.comparator,!1)}getReverseIterator(){return new kd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kd(this.root,e,this.comparator,!0)}}class kd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Yt.RED,this.left=i??Yt.EMPTY,this.right=s??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Yt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Yt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fe();const e=this.left.check();if(e!==this.right.check())throw fe();return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe()}get value(){throw fe()}get color(){throw fe()}get left(){throw fe()}get right(){throw fe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Yt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new WE(this.data.getIterator())}getIteratorFrom(e){return new WE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class WE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Jn([])}unionWith(e){let n=new Zt(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new SR("Invalid base64 string: "+s):s}}(e);return new tn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const b5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Us(t){if(Ve(!!t),typeof t=="string"){let e=0;const n=b5.exec(t);if(Ve(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(t.seconds),nanos:bt(t.nanos)}}function bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Go(t){return typeof t=="string"?tn.fromBase64String(t):tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ax(t){const e=t.mapValue.fields.__previous_value__;return ox(e)?ax(e):e}function Fu(t){const e=Us(t.mapValue.fields.__local_write_time__.timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Uu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Uu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Uu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id={mapValue:{}};function Yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ox(t)?4:T5(t)?9007199254740991:E5(t)?10:11:fe()}function oi(t,e){if(t===e)return!0;const n=Yo(t);if(n!==Yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fu(t).isEqual(Fu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Us(i.timestampValue),a=Us(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Go(i.bytesValue).isEqual(Go(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return bt(i.geoPointValue.latitude)===bt(s.geoPointValue.latitude)&&bt(i.geoPointValue.longitude)===bt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return bt(i.integerValue)===bt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=bt(i.doubleValue),a=bt(s.doubleValue);return o===a?fp(o)===fp(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return vl(t.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if($E(o)!==$E(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!oi(o[l],a[l])))return!1;return!0}(t,e);default:return fe()}}function Bu(t,e){return(t.values||[]).find(n=>oi(n,e))!==void 0}function _l(t,e){if(t===e)return 0;const n=Yo(t),r=Yo(e);if(n!==r)return De(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=bt(s.integerValue||s.doubleValue),l=bt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return HE(t.timestampValue,e.timestampValue);case 4:return HE(Fu(t),Fu(e));case 5:return De(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Go(s),l=Go(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=De(a[c],l[c]);if(u!==0)return u}return De(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=De(bt(s.latitude),bt(o.latitude));return a!==0?a:De(bt(s.longitude),bt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return qE(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const f=s.fields||{},p=o.fields||{},m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,_=De(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0);return _!==0?_:qE(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Id.mapValue&&o===Id.mapValue)return 0;if(s===Id.mapValue)return 1;if(o===Id.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=De(l[f],u[f]);if(p!==0)return p;const m=_l(a[l[f]],c[u[f]]);if(m!==0)return m}return De(l.length,u.length)}(t.mapValue,e.mapValue);default:throw fe()}}function HE(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return De(t,e);const n=Us(t),r=Us(e),i=De(n.seconds,r.seconds);return i!==0?i:De(n.nanos,r.nanos)}function qE(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=_l(n[i],r[i]);if(s)return s}return De(n.length,r.length)}function xl(t){return $v(t)}function $v(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Us(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Go(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=$v(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${$v(n.fields[o])}`;return i+"}"}(t.mapValue):fe()}function KE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Wv(t){return!!t&&"integerValue"in t}function lx(t){return!!t&&"arrayValue"in t}function GE(t){return!!t&&"nullValue"in t}function YE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _f(t){return!!t&&"mapValue"in t}function E5(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function tu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ia(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=tu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function T5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_f(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tu(n)}setAll(e){let n=Qt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=tu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());_f(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];_f(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ia(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Vn(tu(this.value))}}function ER(t){const e=[];return ia(t.fields,(n,r)=>{const i=new Qt([n]);if(_f(r)){const s=ER(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new gn(e,0,me.min(),me.min(),me.min(),Vn.empty(),0)}static newFoundDocument(e,n,r,i){return new gn(e,1,n,me.min(),r,i,0)}static newNoDocument(e,n){return new gn(e,2,n,me.min(),me.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new gn(e,3,n,me.min(),me.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n){this.position=e,this.inclusive=n}}function QE(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),n.key):r=_l(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function XE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!oi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n="asc"){this.field=e,this.dir=n}}function k5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{}class Pt extends TR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new C5(e,n,r):n==="array-contains"?new R5(e,r):n==="in"?new N5(e,r):n==="not-in"?new D5(e,r):n==="array-contains-any"?new O5(e,r):new Pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new A5(e,r):new P5(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_l(n,this.value)):n!==null&&Yo(this.value)===Yo(n)&&this.matchesComparison(_l(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mr extends TR{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Mr(e,n)}matches(e){return kR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function kR(t){return t.op==="and"}function IR(t){return I5(t)&&kR(t)}function I5(t){for(const e of t.filters)if(e instanceof Mr)return!1;return!0}function Hv(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+xl(t.value);if(IR(t))return t.filters.map(e=>Hv(e)).join(",");{const e=t.filters.map(n=>Hv(n)).join(",");return`${t.op}(${e})`}}function CR(t,e){return t instanceof Pt?function(r,i){return i instanceof Pt&&r.op===i.op&&r.field.isEqual(i.field)&&oi(r.value,i.value)}(t,e):t instanceof Mr?function(r,i){return i instanceof Mr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&CR(o,i.filters[a]),!0):!1}(t,e):void fe()}function AR(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${xl(n.value)}`}(t):t instanceof Mr?function(n){return n.op.toString()+" {"+n.getFilters().map(AR).join(" ,")+"}"}(t):"Filter"}class C5 extends Pt{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){const n=le.comparator(e.key,this.key);return this.matchesComparison(n)}}class A5 extends Pt{constructor(e,n){super(e,"in",n),this.keys=PR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class P5 extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=PR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function PR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}class R5 extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lx(n)&&Bu(n.arrayValue,this.value)}}class N5 extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bu(this.value.arrayValue,n)}}class D5 extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Bu(this.value.arrayValue,n)}}class O5 extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function JE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new M5(t,e,n,r,i,s,o)}function cx(t){const e=ge(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Hv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),mm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xl(r)).join(",")),e.ue=n}return e.ue}function ux(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!k5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!CR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!XE(t.startAt,e.startAt)&&XE(t.endAt,e.endAt)}function qv(t){return le.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function j5(t,e,n,r,i,s,o,a){return new sa(t,e,n,r,i,s,o,a)}function gm(t){return new sa(t)}function ZE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function RR(t){return t.collectionGroup!==null}function nu(t){const e=ge(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Zt(Qt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new zu(s,r))}),n.has(Qt.keyField().canonicalString())||e.ce.push(new zu(Qt.keyField(),r))}return e.ce}function ti(t){const e=ge(t);return e.le||(e.le=L5(e,nu(t))),e.le}function L5(t,e){if(t.limitType==="F")return JE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new zu(i.field,s)});const n=t.endAt?new pp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pp(t.startAt.position,t.startAt.inclusive):null;return JE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kv(t,e){const n=t.filters.concat([e]);return new sa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function mp(t,e,n){return new sa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ym(t,e){return ux(ti(t),ti(e))&&t.limitType===e.limitType}function NR(t){return`${cx(ti(t))}|lt:${t.limitType}`}function Sa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>AR(i)).join(", ")}]`),mm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>xl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>xl(i)).join(",")),`Target(${r})`}(ti(t))}; limitType=${t.limitType})`}function vm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of nu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=QE(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,nu(r),i)||r.endAt&&!function(o,a,l){const c=QE(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,nu(r),i))}(t,e)}function V5(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function DR(t){return(e,n)=>{let r=!1;for(const i of nu(t)){const s=F5(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function F5(t,e,n){const r=t.field.isKeyField()?le.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?_l(l,c):fe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ia(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return bR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5=new pt(le.comparator);function Hi(){return U5}const OR=new pt(le.comparator);function Oc(...t){let e=OR;for(const n of t)e=e.insert(n.key,n);return e}function MR(t){let e=OR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Co(){return ru()}function jR(){return ru()}function ru(){return new Vl(t=>t.toString(),(t,e)=>t.isEqual(e))}const B5=new pt(le.comparator),z5=new Zt(le.comparator);function Ee(...t){let e=z5;for(const n of t)e=e.add(n);return e}const $5=new Zt(De);function W5(){return $5}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fp(e)?"-0":e}}function LR(t){return{integerValue:""+t}}function H5(t,e){return w5(e)?LR(e):hx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(){this._=void 0}}function q5(t,e,n){return t instanceof $u?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ox(s)&&(s=ax(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Wu?FR(t,e):t instanceof Hu?UR(t,e):function(i,s){const o=VR(i,s),a=eT(o)+eT(i.Pe);return Wv(o)&&Wv(i.Pe)?LR(a):hx(i.serializer,a)}(t,e)}function K5(t,e,n){return t instanceof Wu?FR(t,e):t instanceof Hu?UR(t,e):n}function VR(t,e){return t instanceof gp?function(r){return Wv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class $u extends _m{}class Wu extends _m{constructor(e){super(),this.elements=e}}function FR(t,e){const n=BR(e);for(const r of t.elements)n.some(i=>oi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Hu extends _m{constructor(e){super(),this.elements=e}}function UR(t,e){let n=BR(e);for(const r of t.elements)n=n.filter(i=>!oi(i,r));return{arrayValue:{values:n}}}class gp extends _m{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function eT(t){return bt(t.integerValue||t.doubleValue)}function BR(t){return lx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e,n){this.field=e,this.transform=n}}function Y5(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Wu&&i instanceof Wu||r instanceof Hu&&i instanceof Hu?vl(r.elements,i.elements,oi):r instanceof gp&&i instanceof gp?oi(r.Pe,i.Pe):r instanceof $u&&i instanceof $u}(t.transform,e.transform)}class Q5{constructor(e,n){this.version=e,this.transformResults=n}}class An{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xm{}function zR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new wm(t.key,An.none()):new xh(t.key,t.data,An.none());{const n=t.data,r=Vn.empty();let i=new Zt(Qt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Qs(t.key,r,new Jn(i.toArray()),An.none())}}function X5(t,e,n){t instanceof xh?function(i,s,o){const a=i.value.clone(),l=nT(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Qs?function(i,s,o){if(!xf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=nT(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll($R(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function iu(t,e,n,r){return t instanceof xh?function(s,o,a,l){if(!xf(s.precondition,o))return a;const c=s.value.clone(),u=rT(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Qs?function(s,o,a,l){if(!xf(s.precondition,o))return a;const c=rT(s.fieldTransforms,l,o),u=o.data;return u.setAll($R(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return xf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function J5(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=VR(r.transform,i||null);s!=null&&(n===null&&(n=Vn.empty()),n.set(r.field,s))}return n||null}function tT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&vl(r,i,(s,o)=>Y5(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xh extends xm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Qs extends xm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $R(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function nT(t,e,n){const r=new Map;Ve(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,K5(o,a,n[i]))}return r}function rT(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,q5(s,o,e))}return r}class wm extends xm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z5 extends xm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&X5(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=iu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=iu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=jR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=zR(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&vl(this.mutations,e.mutations,(n,r)=>tT(n,r))&&vl(this.baseMutations,e.baseMutations,(n,r)=>tT(n,r))}}class dx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ve(e.mutations.length===r.length);let i=function(){return B5}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new dx(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tz{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Ae;function rz(t){switch(t){default:return fe();case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0}}function WR(t){if(t===void 0)return Wi("GRPC error has no .code"),W.UNKNOWN;switch(t){case It.OK:return W.OK;case It.CANCELLED:return W.CANCELLED;case It.UNKNOWN:return W.UNKNOWN;case It.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case It.INTERNAL:return W.INTERNAL;case It.UNAVAILABLE:return W.UNAVAILABLE;case It.UNAUTHENTICATED:return W.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case It.NOT_FOUND:return W.NOT_FOUND;case It.ALREADY_EXISTS:return W.ALREADY_EXISTS;case It.PERMISSION_DENIED:return W.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case It.ABORTED:return W.ABORTED;case It.OUT_OF_RANGE:return W.OUT_OF_RANGE;case It.UNIMPLEMENTED:return W.UNIMPLEMENTED;case It.DATA_LOSS:return W.DATA_LOSS;default:return fe()}}(Ae=It||(It={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sz=new Mo([4294967295,4294967295],0);function iT(t){const e=iz().encode(t),n=new pR;return n.update(e),new Uint8Array(n.digest())}function sT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Mo([n,r],0),new Mo([i,s],0)]}class fx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mc(`Invalid padding: ${n}`);if(r<0)throw new Mc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Mc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Mo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Mo.fromNumber(r)));return i.compare(sz)===1&&(i=new Mo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=iT(e),[r,i]=sT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new fx(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=iT(e),[r,i]=sT(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,wh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bm(me.min(),i,new pt(De),Hi(),Ee())}}class wh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new wh(r,n,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class HR{constructor(e,n){this.targetId=e,this.me=n}}class qR{constructor(e,n,r=tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class oT{constructor(){this.fe=0,this.ge=lT(),this.pe=tn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ee(),n=Ee(),r=Ee();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fe()}}),new wh(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=lT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oz{constructor(e){this.Le=e,this.Be=new Map,this.ke=Hi(),this.qe=aT(),this.Qe=new pt(De)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:fe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(qv(s))if(r===0){const o=new le(s.path);this.Ue(n,o,gn.newNoDocument(o,me.min()))}else Ve(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Go(r).toUint8Array()}catch(l){if(l instanceof SR)return yl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new fx(o,i,s)}catch(l){return yl(l instanceof Mc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&qv(a.target)){const l=new le(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,gn.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Ee();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new bm(e,n,this.Qe,this.ke,r);return this.ke=Hi(),this.qe=aT(),this.Qe=new pt(De),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new oT,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Zt(De),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new oT),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function aT(){return new pt(le.comparator)}function lT(){return new pt(le.comparator)}const az={asc:"ASCENDING",desc:"DESCENDING"},lz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cz={and:"AND",or:"OR"};class uz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gv(t,e){return t.useProto3Json||mm(e)?e:{value:e}}function yp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function KR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hz(t,e){return yp(t,e.toTimestamp())}function ni(t){return Ve(!!t),me.fromTimestamp(function(n){const r=Us(n);return new Lt(r.seconds,r.nanos)}(t))}function px(t,e){return Yv(t,e).canonicalString()}function Yv(t,e){const n=function(i){return new qe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function GR(t){const e=qe.fromString(t);return Ve(ZR(e)),e}function Qv(t,e){return px(t.databaseId,e.path)}function Yg(t,e){const n=GR(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new le(QR(n))}function YR(t,e){return px(t.databaseId,e)}function dz(t){const e=GR(t);return e.length===4?qe.emptyPath():QR(e)}function Xv(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function QR(t){return Ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function cT(t,e,n){return{name:Qv(t,e),fields:n.value.mapValue.fields}}function fz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:fe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Ve(u===void 0||typeof u=="string"),tn.fromBase64String(u||"")):(Ve(u===void 0||u instanceof Buffer||u instanceof Uint8Array),tn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?W.UNKNOWN:WR(c.code);return new ne(u,c.message||"")}(o);n=new qR(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Yg(t,r.document.name),s=ni(r.document.updateTime),o=r.document.createTime?ni(r.document.createTime):me.min(),a=new Vn({mapValue:{fields:r.document.fields}}),l=gn.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new wf(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Yg(t,r.document),s=r.readTime?ni(r.readTime):me.min(),o=gn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new wf([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Yg(t,r.document),s=r.removedTargetIds||[];n=new wf([],s,i,null)}else{if(!("filter"in e))return fe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new nz(i,s),a=r.targetId;n=new HR(a,o)}}return n}function pz(t,e){let n;if(e instanceof xh)n={update:cT(t,e.key,e.value)};else if(e instanceof wm)n={delete:Qv(t,e.key)};else if(e instanceof Qs)n={update:cT(t,e.key,e.data),updateMask:Sz(e.fieldMask)};else{if(!(e instanceof Z5))return fe();n={verify:Qv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof $u)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gp)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw fe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:hz(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe()}(t,e.precondition)),n}function mz(t,e){return t&&t.length>0?(Ve(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ni(i.updateTime):ni(s);return o.isEqual(me.min())&&(o=ni(s)),new Q5(o,i.transformResults||[])}(n,e))):[]}function gz(t,e){return{documents:[YR(t,e.path)]}}function yz(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=YR(t,i);const s=function(c){if(c.length!==0)return JR(Mr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:Ea(p.field),direction:xz(p.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Gv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function vz(t){let e=dz(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ve(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(f){const p=XR(f);return p instanceof Mr&&IR(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(y){return new zu(Ta(y.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,mm(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new pp(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new pp(m,p)}(n.endAt)),j5(e,i,o,s,a,"F",l,c)}function _z(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ta(n.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ta(n.unaryFilter.field);return Pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ta(n.unaryFilter.field);return Pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ta(n.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return fe()}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(Ta(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Mr.create(n.compositeFilter.filters.map(r=>XR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe()}}(n.compositeFilter.op))}(t):fe()}function xz(t){return az[t]}function wz(t){return lz[t]}function bz(t){return cz[t]}function Ea(t){return{fieldPath:t.canonicalString()}}function Ta(t){return Qt.fromServerFormat(t.fieldPath)}function JR(t){return t instanceof Pt?function(n){if(n.op==="=="){if(YE(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NAN"}};if(GE(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(YE(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NOT_NAN"}};if(GE(n.value))return{unaryFilter:{field:Ea(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ea(n.field),op:wz(n.op),value:n.value}}}(t):t instanceof Mr?function(n){const r=n.getFilters().map(i=>JR(i));return r.length===1?r[0]:{compositeFilter:{op:bz(n.op),filters:r}}}(t):fe()}function Sz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n,r,i,s=me.min(),o=me.min(),a=tn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ys(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ys(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(e){this.ct=e}}function Tz(t){const e=vz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?mp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(){this.un=new Iz}addToCollectionParentIndex(e,n){return this.un.add(n),q.resolve()}getCollectionParents(e,n){return q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return q.resolve()}deleteFieldIndex(e,n){return q.resolve()}deleteAllFieldIndexes(e){return q.resolve()}createTargetIndexes(e,n){return q.resolve()}getDocumentsMatchingTarget(e,n){return q.resolve(null)}getIndexType(e,n){return q.resolve(0)}getFieldIndexes(e,n){return q.resolve([])}getNextCollectionGroupToUpdate(e){return q.resolve(null)}getMinOffset(e,n){return q.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,n){return q.resolve(Fs.min())}updateCollectionGroup(e,n,r){return q.resolve()}updateIndexEntries(e,n){return q.resolve()}}class Iz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Zt(qe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zt(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new wl(0)}static kn(){return new wl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(){this.changes=new Vl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&iu(r.mutation,i,Jn.empty(),Lt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const i=Co();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Oc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Co();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Hi();const o=ru(),a=function(){return ru()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Qs)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),iu(u.mutation,c,u.mutation.getFieldMask(),Lt.now())):o.set(c.key,Jn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new Az(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ru();let i=new pt((o,a)=>o-a),s=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Jn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(i.get(a.batchId)||Ee()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=jR();u.forEach(p=>{if(!s.has(p)){const m=zR(n.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):q.resolve(Co());let a=-1,l=s;return o.next(c=>q.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?q.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ee())).next(u=>({batchId:a,changes:MR(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=Oc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Oc();return this.indexManager.getCollectionParents(e,s).next(a=>q.forEach(a,l=>{const c=function(f,p){return new sa(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,gn.newInvalidDocument(u)))});let a=Oc();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&iu(u.mutation,c,Jn.empty(),Lt.now()),vm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ni(i.createTime)}}(n)),q.resolve()}getNamedQuery(e,n){return q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Tz(i.bundledQuery),readTime:ni(i.readTime)}}(n)),q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(){this.overlays=new pt(le.comparator),this.Ir=new Map}getOverlay(e,n){return q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Co();return q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),q.resolve()}getOverlaysForCollection(e,n,r){const i=Co(),s=n.length+1,o=new le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new pt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Co(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Co(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return q.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tz(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ee(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(){this.Tr=new Zt(Bt.Er),this.dr=new Zt(Bt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Bt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Bt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new le(new qe([])),r=new Bt(n,e),i=new Bt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new le(new qe([])),r=new Bt(n,e),i=new Bt(n,e+1);let s=Ee();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Bt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return le.comparator(e.key,n.key)||De(e.wr,n.wr)}static Ar(e,n){return De(e.wr,n.wr)||le.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Zt(Bt.Er)}checkEmpty(e){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ez(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Bt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(e,n){return q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Bt(n,0),i=new Bt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Zt(De);return n.forEach(i=>{const s=new Bt(i,0),o=new Bt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;le.isDocumentKey(s)||(s=s.child(""));const o=new Bt(new le(s),0);let a=new Zt(De);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),q.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ve(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return q.forEach(n.mutations,i=>{const s=new Bt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Bt(n,0),i=this.br.firstAfterOrEqual(r);return q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e){this.Mr=e,this.docs=function(){return new pt(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return q.resolve(r?r.document.mutableCopy():gn.newInvalidDocument(n))}getEntries(e,n){let r=Hi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():gn.newInvalidDocument(i))}),q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Hi();const o=n.path,a=new le(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||y5(g5(u),r)<=0||(i.has(u.key)||vm(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){fe()}Or(e,n){return q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new jz(this)}getSize(e){return q.resolve(this.size)}}class jz extends Cz{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e){this.persistence=e,this.Nr=new Vl(n=>cx(n),ux),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Lr=0,this.Br=new mx,this.targetCount=0,this.kr=wl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),q.resolve()}getLastRemoteSnapshotVersion(e){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new wl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,q.resolve()}updateTargetData(e,n){return this.Kn(n),q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),q.waitFor(s).next(()=>i)}getTargetCount(e){return q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return q.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),q.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return q.resolve(r)}containsKey(e,n){return q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(e,n){this.qr={},this.overlays={},this.Qr=new sx(0),this.Kr=!1,this.Kr=!0,this.$r=new Dz,this.referenceDelegate=e(this),this.Ur=new Lz(this),this.indexManager=new kz,this.remoteDocumentCache=function(i){return new Mz(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Ez(n),this.Gr=new Rz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Nz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Oz(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const i=new Fz(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Fz extends _5{constructor(e){super(),this.currentSequenceNumber=e}}class gx{constructor(e){this.persistence=e,this.Jr=new mx,this.Yr=null}static Zr(e){return new gx(e)}get Xr(){if(this.Yr)return this.Yr;throw fe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),q.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Xr,r=>{const i=le.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,me.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return q.or([()=>q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ee(),i=Ee();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new yx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return CF()?8:x5(bn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Uz;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(yc()<=ke.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Sa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),q.resolve()):(yc()<=ke.DEBUG&&oe("QueryEngine","Query:",Sa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(yc()<=ke.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Sa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(n))):q.resolve())}Yi(e,n){if(ZE(n))return q.resolve(null);let r=ti(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=mp(n,null,"F"),r=ti(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ee(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,mp(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return ZE(n)||i.isEqual(me.min())?q.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?q.resolve(null):(yc()<=ke.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sa(n)),this.rs(e,o,n,m5(i,-1)).next(a=>a))})}ts(e,n){let r=new Zt(DR(e));return n.forEach((i,s)=>{vm(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return yc()<=ke.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Sa(n)),this.Ji.getDocumentsMatchingQuery(e,n,Fs.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new pt(De),this._s=new Vl(s=>cx(s),ux),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pz(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function $z(t,e,n,r){return new zz(t,e,n,r)}async function eN(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ee();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Wz(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,p=f.keys();let m=q.resolve();return p.forEach(y=>{m=m.next(()=>u.getEntry(l,y)).next(_=>{const x=c.docVersions.get(y);Ve(x!==null),_.version.compareTo(x)<0&&(f.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ee();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function tN(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Hz(t,e){const n=ge(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((u,f)=>{const p=i.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,u.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,u.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(tn.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(f,m),function(_,x,v){return _.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,m,u)&&a.push(n.Ur.updateTargetData(s,m))});let l=Hi(),c=Ee();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(qz(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(me.min())){const u=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function qz(t,e,n){let r=Ee(),i=Ee();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Hi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(me.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):oe("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function Kz(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Gz(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,q.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ys(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Jv(t,e,n){const r=ge(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!_h(o))throw o;oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function uT(t,e,n){const r=ge(t);let i=me.min(),s=Ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=ge(l),p=f._s.get(u);return p!==void 0?q.resolve(f.os.get(p)):f.Ur.getTargetData(c,u)}(r,o,ti(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:me.min(),n?s:Ee())).next(a=>(Yz(r,V5(e),a),{documents:a,Ts:s})))}function Yz(t,e,n){let r=t.us.get(e)||me.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class hT{constructor(){this.activeTargetIds=W5()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qz{constructor(){this.so=new hT,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new hT,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xz{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cd=null;function Qg(){return Cd===null?Cd=function(){return 268435456+Math.round(2147483648*Math.random())}():Cd++,"0x"+Cd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class e3 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Qg(),l=this.xo(n,r.toUriEncodedString());oe("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(u=>(oe("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw yl("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ll}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=Jz[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Qg();return new Promise((o,a)=>{const l=new mR;l.setWithCredentials(!0),l.listenOnce(gR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case vf.NO_ERROR:const u=l.getResponseJson();oe(un,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case vf.TIMEOUT:oe(un,`RPC '${e}' ${s} timed out`),a(new ne(W.DEADLINE_EXCEEDED,"Request time out"));break;case vf.HTTP_ERROR:const f=l.getStatus();if(oe(un,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(v)>=0?v:W.UNKNOWN}(m.status);a(new ne(y,m.message))}else a(new ne(W.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ne(W.UNAVAILABLE,"Connection failed."));break;default:fe()}}finally{oe(un,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);oe(un,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Qg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_R(),a=vR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");oe(un,`Creating RPC '${e}' stream ${i}: ${u}`,l);const f=o.createWebChannel(u,l);let p=!1,m=!1;const y=new Zz({Io:x=>{m?oe(un,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(p||(oe(un,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),oe(un,`RPC '${e}' stream ${i} sending:`,x),f.send(x))},To:()=>f.close()}),_=(x,v,w)=>{x.listen(v,E=>{try{w(E)}catch(R){setTimeout(()=>{throw R},0)}})};return _(f,Dc.EventType.OPEN,()=>{m||(oe(un,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),_(f,Dc.EventType.CLOSE,()=>{m||(m=!0,oe(un,`RPC '${e}' stream ${i} transport closed`),y.So())}),_(f,Dc.EventType.ERROR,x=>{m||(m=!0,yl(un,`RPC '${e}' stream ${i} transport errored:`,x),y.So(new ne(W.UNAVAILABLE,"The operation could not be completed")))}),_(f,Dc.EventType.MESSAGE,x=>{var v;if(!m){const w=x.data[0];Ve(!!w);const E=w,R=E.error||((v=E[0])===null||v===void 0?void 0:v.error);if(R){oe(un,`RPC '${e}' stream ${i} received error:`,R);const C=R.status;let M=function(k){const A=It[k];if(A!==void 0)return WR(A)}(C),T=R.message;M===void 0&&(M=W.INTERNAL,T="Unknown error status: "+C+" with message "+R.message),m=!0,y.So(new ne(M,T)),f.close()}else oe(un,`RPC '${e}' stream ${i} received:`,w),y.bo(w)}}),_(a,yR.STAT_EVENT,x=>{x.stat===zv.PROXY?oe(un,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===zv.NOPROXY&&oe(un,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Xg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t){return new uz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new nN(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===W.RESOURCE_EXHAUSTED?(Wi(n.toString()),Wi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ne(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class t3 extends rN{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=fz(this.serializer,e),r=function(s){if(!("targetChange"in s))return me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?ni(o.readTime):me.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Xv(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=qv(l)?{documents:gz(s,l)}:{query:yz(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=KR(s,o.resumeToken);const c=Gv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(me.min())>0){a.readTime=yp(s,o.snapshotVersion.toTimestamp());const c=Gv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=_z(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Xv(this.serializer),n.removeTarget=e,this.a_(n)}}class n3 extends rN{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=mz(e.writeResults,e.commitTime),r=ni(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Xv(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>pz(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ne(W.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Yv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(W.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Yv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(W.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class i3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Wi(n),this.D_=!1):oe("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{oa(this)&&(oe("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ge(l);c.L_.add(4),await bh(c),c.q_.set("Unknown"),c.L_.delete(4),await Em(c)}(this))})}),this.q_=new i3(r,i)}}async function Em(t){if(oa(t))for(const e of t.B_)await e(!0)}async function bh(t){for(const e of t.B_)await e(!1)}function iN(t,e){const n=ge(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),wx(n)?xx(n):Fl(n).r_()&&_x(n,e))}function vx(t,e){const n=ge(t),r=Fl(n);n.N_.delete(e),r.r_()&&sN(n,e),n.N_.size===0&&(r.r_()?r.o_():oa(n)&&n.q_.set("Unknown"))}function _x(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Fl(t).A_(e)}function sN(t,e){t.Q_.xe(e),Fl(t).R_(e)}function xx(t){t.Q_=new oz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Fl(t).start(),t.q_.v_()}function wx(t){return oa(t)&&!Fl(t).n_()&&t.N_.size>0}function oa(t){return ge(t).L_.size===0}function oN(t){t.Q_=void 0}async function o3(t){t.q_.set("Online")}async function a3(t){t.N_.forEach((e,n)=>{_x(t,e)})}async function l3(t,e){oN(t),wx(t)?(t.q_.M_(e),xx(t)):t.q_.set("Unknown")}async function c3(t,e,n){if(t.q_.set("Online"),e instanceof qR&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await vp(t,r)}else if(e instanceof wf?t.Q_.Ke(e):e instanceof HR?t.Q_.He(e):t.Q_.We(e),!n.isEqual(me.min()))try{const r=await tN(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(tn.EMPTY_BYTE_STRING,u.snapshotVersion)),sN(s,l);const f=new ys(u.target,l,c,u.sequenceNumber);_x(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){oe("RemoteStore","Failed to raise snapshot:",r),await vp(t,r)}}async function vp(t,e,n){if(!_h(e))throw e;t.L_.add(1),await bh(t),t.q_.set("Offline"),n||(n=()=>tN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Em(t)})}function aN(t,e){return e().catch(n=>vp(t,n,e))}async function Tm(t){const e=ge(t),n=Bs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;u3(e);)try{const i=await Kz(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,h3(e,i)}catch(i){await vp(e,i)}lN(e)&&cN(e)}function u3(t){return oa(t)&&t.O_.length<10}function h3(t,e){t.O_.push(e);const n=Bs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function lN(t){return oa(t)&&!Bs(t).n_()&&t.O_.length>0}function cN(t){Bs(t).start()}async function d3(t){Bs(t).p_()}async function f3(t){const e=Bs(t);for(const n of t.O_)e.m_(n.mutations)}async function p3(t,e,n){const r=t.O_.shift(),i=dx.from(r,e,n);await aN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Tm(t)}async function m3(t,e){e&&Bs(t).V_&&await async function(r,i){if(function(o){return rz(o)&&o!==W.ABORTED}(i.code)){const s=r.O_.shift();Bs(r).s_(),await aN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Tm(r)}}(t,e),lN(t)&&cN(t)}async function fT(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const r=oa(n);n.L_.add(3),await bh(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Em(n)}async function g3(t,e){const n=ge(t);e?(n.L_.delete(2),await Em(n)):e||(n.L_.add(2),await bh(n),n.q_.set("Unknown"))}function Fl(t){return t.K_||(t.K_=function(n,r,i){const s=ge(n);return s.w_(),new t3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:o3.bind(null,t),Ro:a3.bind(null,t),mo:l3.bind(null,t),d_:c3.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),wx(t)?xx(t):t.q_.set("Unknown")):(await t.K_.stop(),oN(t))})),t.K_}function Bs(t){return t.U_||(t.U_=function(n,r,i){const s=ge(n);return s.w_(),new n3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:d3.bind(null,t),mo:m3.bind(null,t),f_:f3.bind(null,t),g_:p3.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Tm(t)):(await t.U_.stop(),t.O_.length>0&&(oe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new bx(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sx(t,e){if(Wi("AsyncQueue",`${e}: ${t}`),_h(t))return new ne(W.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.comparator=e?(n,r)=>e(n,r)||le.comparator(n.key,r.key):(n,r)=>le.comparator(n.key,r.key),this.keyedMap=Oc(),this.sortedSet=new pt(this.comparator)}static emptySet(e){return new il(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof il)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new il;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(){this.W_=new pt(le.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):fe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class bl{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new bl(e,n,il.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ym(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class v3{constructor(){this.queries=mT(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ge(n),s=i.queries;i.queries=mT(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ne(W.ABORTED,"Firestore shutting down"))}}function mT(){return new Vl(t=>NR(t),ym)}async function Ex(t,e){const n=ge(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new y3,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Sx(o,`Initialization of query '${Sa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&kx(n)}async function Tx(t,e){const n=ge(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _3(t,e){const n=ge(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&kx(n)}function x3(t,e,n){const r=ge(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function kx(t){t.Y_.forEach(e=>{e.next()})}var Zv,gT;(gT=Zv||(Zv={})).ea="default",gT.Cache="cache";class Ix{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new bl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Zv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.key=e}}class hN{constructor(e){this.key=e}}class w3{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ee(),this.mutatedKeys=Ee(),this.Aa=DR(e),this.Ra=new il(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new pT,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const p=i.get(u),m=vm(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;p&&m?p.data.isEqual(m.data)?y!==_&&(r.track({type:3,doc:m}),x=!0):this.ga(p,m)||(r.track({type:2,doc:m}),x=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),x=!0):p&&!m&&(r.track({type:1,doc:p}),x=!0,(l||c)&&(a=!0)),x&&(m?(o=o.add(m),s=_?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,f)=>function(m,y){const _=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe()}};return _(m)-_(y)}(u.type,f.type)||this.Aa(u.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new bl(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new pT,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new hN(r))}),this.da.forEach(r=>{e.has(r)||n.push(new uN(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ee();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return bl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class b3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class S3{constructor(e){this.key=e,this.va=!1}}class E3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Vl(a=>NR(a),ym),this.Ma=new Map,this.xa=new Set,this.Oa=new pt(le.comparator),this.Na=new Map,this.La=new mx,this.Ba={},this.ka=new Map,this.qa=wl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function T3(t,e,n=!0){const r=yN(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await dN(r,e,n,!0),i}async function k3(t,e){const n=yN(t);await dN(n,e,!0,!1)}async function dN(t,e,n,r){const i=await Gz(t.localStore,ti(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await I3(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&iN(t.remoteStore,i),a}async function I3(t,e,n,r,i){t.Ka=(f,p,m)=>async function(_,x,v,w){let E=x.view.ma(v);E.ns&&(E=await uT(_.localStore,x.query,!1).then(({documents:T})=>x.view.ma(T,E)));const R=w&&w.targetChanges.get(x.targetId),C=w&&w.targetMismatches.get(x.targetId)!=null,M=x.view.applyChanges(E,_.isPrimaryClient,R,C);return vT(_,x.targetId,M.wa),M.snapshot}(t,f,p,m);const s=await uT(t.localStore,e,!0),o=new w3(e,s.Ts),a=o.ma(s.documents),l=wh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);vT(t,n,c.wa);const u=new b3(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function C3(t,e,n){const r=ge(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!ym(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Jv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&vx(r.remoteStore,i.targetId),e_(r,i.targetId)}).catch(vh)):(e_(r,i.targetId),await Jv(r.localStore,i.targetId,!0))}async function A3(t,e){const n=ge(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vx(n.remoteStore,r.targetId))}async function P3(t,e,n){const r=L3(t);try{const i=await function(o,a){const l=ge(o),c=Lt.now(),u=a.reduce((m,y)=>m.add(y.key),Ee());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=Hi(),_=Ee();return l.cs.getEntries(m,u).next(x=>{y=x,y.forEach((v,w)=>{w.isValidDocument()||(_=_.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(x=>{f=x;const v=[];for(const w of a){const E=J5(w,f.get(w.key).overlayedDocument);E!=null&&v.push(new Qs(w.key,E,ER(E.value.mapValue),An.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,v,a)}).next(x=>{p=x;const v=x.applyToLocalDocumentSet(f,_);return l.documentOverlayCache.saveOverlays(m,x.batchId,v)})}).then(()=>({batchId:p.batchId,changes:MR(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new pt(De)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Sh(r,i.changes),await Tm(r.remoteStore)}catch(i){const s=Sx(i,"Failed to persist write");n.reject(s)}}async function fN(t,e){const n=ge(t);try{const r=await Hz(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ve(o.va):i.removedDocuments.size>0&&(Ve(o.va),o.va=!1))}),await Sh(n,r,e)}catch(r){await vh(r)}}function yT(t,e,n){const r=ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ge(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.j_)p.Z_(a)&&(c=!0)}),c&&kx(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function R3(t,e,n){const r=ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new pt(le.comparator);o=o.insert(s,gn.newNoDocument(s,me.min()));const a=Ee().add(s),l=new bm(me.min(),new Map,new pt(De),o,a);await fN(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Cx(r)}else await Jv(r.localStore,e,!1).then(()=>e_(r,e,n)).catch(vh)}async function N3(t,e){const n=ge(t),r=e.batch.batchId;try{const i=await Wz(n.localStore,e);mN(n,r,null),pN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sh(n,i)}catch(i){await vh(i)}}async function D3(t,e,n){const r=ge(t);try{const i=await function(o,a){const l=ge(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Ve(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);mN(r,e,n),pN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Sh(r,i)}catch(i){await vh(i)}}function pN(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function mN(t,e,n){const r=ge(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function e_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||gN(t,r)})}function gN(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(vx(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Cx(t))}function vT(t,e,n){for(const r of n)r instanceof uN?(t.La.addReference(r.key,e),O3(t,r)):r instanceof hN?(oe("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||gN(t,r.key)):fe()}function O3(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(oe("SyncEngine","New document in limbo: "+n),t.xa.add(r),Cx(t))}function Cx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new le(qe.fromString(e)),r=t.qa.next();t.Na.set(r,new S3(n)),t.Oa=t.Oa.insert(n,r),iN(t.remoteStore,new ys(ti(gm(n.path)),r,"TargetPurposeLimboResolution",sx.oe))}}async function Sh(t,e,n){const r=ge(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=yx.Wi(l.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const u=ge(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>q.forEach(c,p=>q.forEach(p.$i,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>q.forEach(p.Ui,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!_h(f))throw f;oe("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=u.os.get(p),y=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(y);u.os=u.os.insert(p,_)}}}(r.localStore,s))}async function M3(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const r=await eN(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ne(W.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sh(n,r.hs)}}function j3(t,e){const n=ge(t),r=n.Na.get(e);if(r&&r.va)return Ee().add(r.key);{let i=Ee();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function yN(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=j3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R3.bind(null,e),e.Ca.d_=_3.bind(null,e.eventManager),e.Ca.$a=x3.bind(null,e.eventManager),e}function L3(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D3.bind(null,e),e}class _p{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return $z(this.persistence,new Bz,e.initialUser,this.serializer)}Ga(e){return new Vz(gx.Zr,this.serializer)}Wa(e){return new Qz}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_p.provider={build:()=>new _p};class t_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yT(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=M3.bind(null,this.syncEngine),await g3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new v3}()}createDatastore(e){const n=Sm(e.databaseInfo.databaseId),r=function(s){return new e3(s)}(e.databaseInfo);return function(s,o,a,l){return new r3(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new s3(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>yT(this.syncEngine,n,0),function(){return dT.D()?new dT:new Xz}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const f=new E3(i,s,o,a,l,c);return u&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ge(i);oe("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await bh(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}t_.provider={build:()=>new t_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Wi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=pn.UNAUTHENTICATED,this.clientId=wR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{oe("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(oe("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Sx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Jg(t,e){t.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await eN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function _T(t,e){t.asyncQueue.verifyOperationInProgress();const n=await F3(t);oe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>fT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>fT(e.remoteStore,i)),t._onlineComponents=e}async function F3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Jg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===W.FAILED_PRECONDITION||i.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;yl("Error using user provided cache. Falling back to memory cache: "+n),await Jg(t,new _p)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),await Jg(t,new _p);return t._offlineComponents}async function vN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),await _T(t,t._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),await _T(t,new t_))),t._onlineComponents}function U3(t){return vN(t).then(e=>e.syncEngine)}async function xp(t){const e=await vN(t),n=e.eventManager;return n.onListen=T3.bind(null,e.syncEngine),n.onUnlisten=C3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=k3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=A3.bind(null,e.syncEngine),n}function B3(t,e,n={}){const r=new Oi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new Ax({next:p=>{u.Za(),o.enqueueAndForget(()=>Tx(s,f));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new ne(W.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new ne(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new Ix(gm(a.path),u,{includeMetadataChanges:!0,_a:!0});return Ex(s,f)}(await xp(t),t.asyncQueue,e,n,r)),r.promise}function z3(t,e,n={}){const r=new Oi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new Ax({next:p=>{u.Za(),o.enqueueAndForget(()=>Tx(s,f)),p.fromCache&&l.source==="server"?c.reject(new ne(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new Ix(a,u,{includeMetadataChanges:!0,_a:!0});return Ex(s,f)}(await xp(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t,e,n){if(!n)throw new ne(W.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $3(t,e,n,r){if(e===!0&&r===!0)throw new ne(W.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wT(t){if(!le.isDocumentKey(t))throw new ne(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function bT(t){if(le.isDocumentKey(t))throw new ne(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function km(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe()}function _n(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=km(t);throw new ne(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function W3(t,e){if(e<=0)throw new ne(W.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_N((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ne(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ne(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ne(W.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ST({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ST(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new o5;switch(r.type){case"firstParty":return new u5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=xT.get(n);r&&(oe("ComponentProvider","Removing Datastore"),xT.delete(n),r.terminate())}(this),Promise.resolve()}}function H3(t,e,n,r={}){var i;const s=(t=_n(t,Eh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&yl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=pn.MOCK_USER;else{a=CP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ne(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new pn(c)}t._authCredentials=new a5(new xR(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fi(this.firestore,e,this._query)}}class xn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class Os extends fi{constructor(e,n,r){super(e,n,gm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new le(e))}withConverter(e){return new Os(this.firestore,e,this._path)}}function Ge(t,e,...n){if(t=ze(t),Px("collection","path",e),t instanceof Eh){const r=qe.fromString(e,...n);return bT(r),new Os(t,null,r)}{if(!(t instanceof xn||t instanceof Os))throw new ne(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return bT(r),new Os(t.firestore,null,r)}}function su(t,e){if(t=_n(t,Eh),Px("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ne(W.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new fi(t,null,function(r){return new sa(qe.emptyPath(),r)}(e))}function Ce(t,e,...n){if(t=ze(t),arguments.length===1&&(e=wR.newId()),Px("doc","path",e),t instanceof Eh){const r=qe.fromString(e,...n);return wT(r),new xn(t,null,new le(r))}{if(!(t instanceof xn||t instanceof Os))throw new ne(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return wT(r),new xn(t.firestore,t instanceof Os?t.converter:null,new le(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new nN(this,"async_queue_retry"),this.Vu=()=>{const r=Xg();r&&oe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Xg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Xg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Oi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_h(e))throw e;oe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Wi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=bx.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&fe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function TT(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class ai extends Eh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ET,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ET(e),this._firestoreClient=void 0,await e}}}function q3(t,e){const n=typeof t=="object"?t:G0(),r=typeof t=="string"?t:"(default)",i=um(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=TP("firestore");s&&H3(i,...s)}return i}function Th(t){if(t._terminated)throw new ne(W.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||K3(t),t._firestoreClient}function K3(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new S5(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,_N(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new V3(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sl(tn.fromBase64String(e))}catch(n){throw new ne(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Sl(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3=/^__.*__$/;class Y3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Qs(e,this.data,this.fieldMask,n,this.fieldTransforms):new xh(e,this.data,n,this.fieldTransforms)}}class xN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Qs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function wN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe()}}class Dx{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Dx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return wp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(wN(this.Cu)&&G3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Q3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Sm(e)}Qu(e,n,r,i=!1){return new Dx({Cu:e,methodName:n,qu:r,path:Qt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ih(t){const e=t._freezeSettings(),n=Sm(t._databaseId);return new Q3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ox(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);jx("Data must be an object, but it was:",o,r);const a=EN(r,o);let l,c;if(s.merge)l=new Jn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const f of s.mergeFields){const p=n_(e,f,n);if(!o.contains(p))throw new ne(W.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);kN(u,p)||u.push(p)}l=new Jn(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new Y3(new Vn(a),l,c)}class Cm extends Im{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Cm}}class Mx extends Im{_toFieldTransform(e){return new G5(e.path,new $u)}isEqual(e){return e instanceof Mx}}function bN(t,e,n,r){const i=t.Qu(1,e,n);jx("Data must be an object, but it was:",i,r);const s=[],o=Vn.empty();ia(r,(l,c)=>{const u=Lx(e,l,n);c=ze(c);const f=i.Nu(u);if(c instanceof Cm)s.push(u);else{const p=Ch(c,f);p!=null&&(s.push(u),o.set(u,p))}});const a=new Jn(s);return new xN(o,a,i.fieldTransforms)}function SN(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[n_(e,r,n)],l=[i];if(s.length%2!=0)throw new ne(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(n_(e,s[p])),l.push(s[p+1]);const c=[],u=Vn.empty();for(let p=a.length-1;p>=0;--p)if(!kN(c,a[p])){const m=a[p];let y=l[p];y=ze(y);const _=o.Nu(m);if(y instanceof Cm)c.push(m);else{const x=Ch(y,_);x!=null&&(c.push(m),u.set(m,x))}}const f=new Jn(c);return new xN(u,f,o.fieldTransforms)}function X3(t,e,n,r=!1){return Ch(n,t.Qu(r?4:3,e))}function Ch(t,e){if(TN(t=ze(t)))return jx("Unsupported field value:",e,t),EN(t,e);if(t instanceof Im)return function(r,i){if(!wN(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Ch(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return H5(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Lt.fromDate(r);return{timestampValue:yp(i.serializer,s)}}if(r instanceof Lt){const s=new Lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yp(i.serializer,s)}}if(r instanceof Rx)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sl)return{bytesValue:KR(i.serializer,r._byteString)};if(r instanceof xn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:px(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Nx)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return hx(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${km(r)}`)}(t,e)}function EN(t,e){const n={};return bR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ia(t,(r,i)=>{const s=Ch(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function TN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Lt||t instanceof Rx||t instanceof Sl||t instanceof xn||t instanceof Im||t instanceof Nx)}function jx(t,e,n){if(!TN(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=km(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function n_(t,e,n){if((e=ze(e))instanceof kh)return e._internalPath;if(typeof e=="string")return Lx(t,e);throw wp("Field path arguments must be of type string or ",t,!1,void 0,n)}const J3=new RegExp("[~\\*/\\[\\]]");function Lx(t,e,n){if(e.search(J3)>=0)throw wp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new kh(...e.split("."))._internalPath}catch{throw wp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ne(W.INVALID_ARGUMENT,a+t+l)}function kN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Z3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Am("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Z3 extends IN{data(){return super.data()}}function Am(t,e){return typeof e=="string"?Lx(t,e):e instanceof kh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vx{}class Fx extends Vx{}function Wn(t,e,...n){let r=[];e instanceof Vx&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Ux).length,a=s.filter(l=>l instanceof Pm).length;if(o>1||o>0&&a>0)throw new ne(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Pm extends Fx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Pm(e,n,r)}_apply(e){const n=this._parse(e);return AN(e._query,n),new fi(e.firestore,e.converter,Kv(e._query,n))}_parse(e){const n=Ih(e.firestore);return function(s,o,a,l,c,u,f){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ne(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){IT(f,u);const m=[];for(const y of f)m.push(kT(l,s,y));p={arrayValue:{values:m}}}else p=kT(l,s,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||IT(f,u),p=X3(a,o,f,u==="in"||u==="not-in");return Pt.create(c,u,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bp(t,e,n){const r=e,i=Am("where",t);return Pm._create(i,r,n)}class Ux extends Vx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Ux(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Mr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)AN(o,l),o=Kv(o,l)}(e._query,n),new fi(e.firestore,e.converter,Kv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Bx extends Fx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Bx(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ne(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ne(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zu(s,o)}(e._query,this._field,this._direction);return new fi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new sa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function li(t,e="asc"){const n=e,r=Am("orderBy",t);return Bx._create(r,n)}class zx extends Fx{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new zx(e,n,r)}_apply(e){return new fi(e.firestore,e.converter,mp(e._query,this._limit,this._limitType))}}function Sp(t){return W3("limit",t),zx._create("limit",t,"F")}function kT(t,e,n){if(typeof(n=ze(n))=="string"){if(n==="")throw new ne(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RR(e)&&n.indexOf("/")!==-1)throw new ne(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(qe.fromString(n));if(!le.isDocumentKey(r))throw new ne(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return KE(t,new le(r))}if(n instanceof xn)return KE(t,n._key);throw new ne(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${km(n)}.`)}function IT(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function AN(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class e6{convertValue(e,n="none"){switch(Yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ia(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>bt(o.doubleValue));return new Nx(s)}convertGeoPoint(e){return new Rx(bt(e.latitude),bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ax(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const n=Us(e);return new Lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qe.fromString(e);Ve(ZR(r));const i=new Uu(r.get(1),r.get(3)),s=new le(r.popFirst(5));return i.isEqual(n)||Wi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class PN extends IN{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Am("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class bf extends PN{data(e={}){return super.data(e)}}class RN{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new jc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bf(this._firestore,this._userDataWriter,r.key,r,new jc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new bf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new bf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:t6(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function t6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(t){t=_n(t,xn);const e=_n(t.firestore,ai);return B3(Th(e),t._key).then(n=>NN(e,t,n))}class Wx extends e6{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,n)}}function Ep(t){t=_n(t,fi);const e=_n(t.firestore,ai),n=Th(e),r=new Wx(e);return CN(t._query),z3(n,t._query).then(i=>new RN(e,r,t,i))}function Rr(t,e,n){t=_n(t,xn);const r=_n(t.firestore,ai),i=$x(t.converter,e,n);return Rh(r,[Ox(Ih(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,An.none())])}function qu(t,e,n,...r){t=_n(t,xn);const i=_n(t.firestore,ai),s=Ih(i);let o;return o=typeof(e=ze(e))=="string"||e instanceof kh?SN(s,"updateDoc",t._key,e,n,r):bN(s,"updateDoc",t._key,e),Rh(i,[o.toMutation(t._key,An.exists(!0))])}function Ah(t){return Rh(_n(t.firestore,ai),[new wm(t._key,An.none())])}function Ph(t,e){const n=_n(t.firestore,ai),r=Ce(t),i=$x(t.converter,e);return Rh(n,[Ox(Ih(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,An.exists(!1))]).then(()=>r)}function ut(t,...e){var n,r,i;t=ze(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||TT(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(TT(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let l,c,u;if(t instanceof xn)c=_n(t.firestore,ai),u=gm(t._key.path),l={next:f=>{e[o]&&e[o](NN(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=_n(t,fi);c=_n(f.firestore,ai),u=f._query;const p=new Wx(c);l={next:m=>{e[o]&&e[o](new RN(c,p,f,m))},error:e[o+1],complete:e[o+2]},CN(t._query)}return function(p,m,y,_){const x=new Ax(_),v=new Ix(m,x,y);return p.asyncQueue.enqueueAndForget(async()=>Ex(await xp(p),v)),()=>{x.Za(),p.asyncQueue.enqueueAndForget(async()=>Tx(await xp(p),v))}}(Th(c),u,a,l)}function Rh(t,e){return function(r,i){const s=new Oi;return r.asyncQueue.enqueueAndForget(async()=>P3(await U3(r),i,s)),s.promise}(Th(t),e)}function NN(t,e,n){const r=n.docs.get(e._key),i=new Wx(t);return new PN(t,i,e._key,r,new jc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ih(e)}set(e,n,r){this._verifyNotCommitted();const i=Zg(e,this._firestore),s=$x(i.converter,n,r),o=Ox(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,An.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Zg(e,this._firestore);let o;return o=typeof(n=ze(n))=="string"||n instanceof kh?SN(this._dataReader,"WriteBatch.update",s._key,n,r,i):bN(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,An.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Zg(e,this._firestore);return this._mutations=this._mutations.concat(new wm(n._key,An.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ne(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Zg(t,e){if((t=ze(t)).firestore!==e)throw new ne(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Nt(){return new Mx("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t){return Th(t=_n(t,ai)),new n6(t,e=>Rh(t,e))}(function(e,n=!0){(function(i){Ll=i})(na),Ho(new Vs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ai(new l5(r.getProvider("auth-internal")),new d5(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ne(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uu(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Jr(zE,"4.7.3",e),Jr(zE,"4.7.3","esm2017")})();var r6="firebase",i6="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jr(r6,i6,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="firebasestorage.googleapis.com",ON="storageBucket",s6=2*60*1e3,o6=10*60*1e3,a6=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt extends ui{constructor(e,n,r=0){super(ey(e),`Firebase Storage: ${n} (${ey(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ey(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var et;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(et||(et={}));function ey(t){return"storage/"+t}function Hx(){const t="An unknown error occurred, please check the error payload for server response.";return new mt(et.UNKNOWN,t)}function l6(t){return new mt(et.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function c6(t){return new mt(et.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function u6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new mt(et.UNAUTHENTICATED,t)}function h6(){return new mt(et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function d6(t){return new mt(et.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function MN(){return new mt(et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jN(){return new mt(et.CANCELED,"User canceled the upload/download.")}function f6(t){return new mt(et.INVALID_URL,"Invalid URL '"+t+"'.")}function p6(t){return new mt(et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function m6(){return new mt(et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ON+"' property when initializing the app?")}function LN(){return new mt(et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function g6(){return new mt(et.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function y6(){return new mt(et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function v6(t){return new mt(et.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function r_(t){return new mt(et.INVALID_ARGUMENT,t)}function VN(){return new mt(et.APP_DELETED,"The Firebase app was deleted.")}function _6(t){return new mt(et.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ou(t,e){return new mt(et.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function vc(t){throw new mt(et.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Zn.makeFromUrl(e,n)}catch{return new Zn(e,"")}if(r.path==="")return r;throw p6(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const u="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${u}/b/${i}/o${p}`,"i"),y={bucket:1,path:3},_=n===DN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",v=new RegExp(`^https?://${_}/${i}/${x}`,"i"),E=[{regex:a,indices:l,postModify:s},{regex:m,indices:y,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<E.length;R++){const C=E[R],M=C.regex.exec(e);if(M){const T=M[C.indices.bucket];let b=M[C.indices.path];b||(b=""),r=new Zn(T,b),C.postModify(r);break}}if(r==null)throw f6(e);return r}}class x6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w6(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...x){c||(c=!0,e.apply(null,x))}function f(x){i=setTimeout(()=>{i=null,t(m,l())},x)}function p(){s&&clearTimeout(s)}function m(x,...v){if(c){p();return}if(x){p(),u.call(null,x,...v);return}if(l()||o){p(),u.call(null,x,...v);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,f(E)}let y=!1;function _(x){y||(y=!0,p(),!c&&(i!==null?(x||(a=2),clearTimeout(i),f(0)):x||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function b6(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S6(t){return t!==void 0}function E6(t){return typeof t=="function"}function T6(t){return typeof t=="object"&&!Array.isArray(t)}function Nm(t){return typeof t=="string"||t instanceof String}function CT(t){return qx()&&t instanceof Blob}function qx(){return typeof Blob<"u"}function AT(t,e,n,r){if(r<e)throw r_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw r_(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function FN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var jo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(jo||(jo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,n,r,i,s,o,a,l,c,u,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Ad(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===jo.NO_ERROR,l=s.getStatus();if(!a||UN(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===jo.ABORT;r(!1,new Ad(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Ad(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());S6(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Hx();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?VN():jN();o(l)}else{const l=MN();o(l)}};this.canceled_?n(!1,new Ad(!1,null,!0)):this.backoffId_=w6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&b6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ad{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function I6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function C6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function A6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function P6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function R6(t,e,n,r,i,s,o=!0){const a=FN(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return A6(c,e),I6(c,n),C6(c,s),P6(c,r),new k6(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function D6(...t){const e=N6();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(qx())return new Blob(t);throw new mt(et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function O6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M6(t){if(typeof atob>"u")throw v6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ty{constructor(e,n){this.data=e,this.contentType=n||null}}function j6(t,e){switch(t){case Yr.RAW:return new ty(BN(e));case Yr.BASE64:case Yr.BASE64URL:return new ty(zN(t,e));case Yr.DATA_URL:return new ty(V6(e),F6(e))}throw Hx()}function BN(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function L6(t){let e;try{e=decodeURIComponent(t)}catch{throw ou(Yr.DATA_URL,"Malformed data URL.")}return BN(e)}function zN(t,e){switch(t){case Yr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw ou(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Yr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw ou(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=M6(e)}catch(i){throw i.message.includes("polyfill")?i:ou(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class $N{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ou(Yr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=U6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function V6(t){const e=new $N(t);return e.base64?zN(Yr.BASE64,e.rest):L6(e.rest)}function F6(t){return new $N(t).contentType}function U6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n){let r=0,i="";CT(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(CT(this.data_)){const r=this.data_,i=O6(r,e,n);return i===null?null:new ki(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ki(r,!0)}}static getBlob(...e){if(qx()){const n=e.map(r=>r instanceof ki?r.data_:r);return new ki(D6.apply(null,n))}else{const n=e.map(o=>Nm(o)?j6(Yr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new ki(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(t){let e;try{e=JSON.parse(t)}catch{return null}return T6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function z6(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function HN(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(t,e){return e}class Tn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||$6}}let Pd=null;function W6(t){return!Nm(t)||t.length<2?t:HN(t)}function Kx(){if(Pd)return Pd;const t=[];t.push(new Tn("bucket")),t.push(new Tn("generation")),t.push(new Tn("metageneration")),t.push(new Tn("name","fullPath",!0));function e(s,o){return W6(o)}const n=new Tn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Tn("size");return i.xform=r,t.push(i),t.push(new Tn("timeCreated")),t.push(new Tn("updated")),t.push(new Tn("md5Hash",null,!0)),t.push(new Tn("cacheControl",null,!0)),t.push(new Tn("contentDisposition",null,!0)),t.push(new Tn("contentEncoding",null,!0)),t.push(new Tn("contentLanguage",null,!0)),t.push(new Tn("contentType",null,!0)),t.push(new Tn("metadata","customMetadata",!0)),Pd=t,Pd}function H6(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Zn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function q6(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return H6(r,t),r}function qN(t,e,n){const r=WN(e);return r===null?null:q6(t,r,n)}function K6(t,e,n,r){const i=WN(e);if(i===null||!Nm(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,f=t.fullPath,p="/b/"+o(u)+"/o/"+o(f),m=Ul(p,n,r),y=FN({alt:"media",token:c});return m+y})[0]}function KN(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class aa{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t){if(!t)throw Hx()}function Gx(t,e){function n(r,i){const s=qN(t,i,e);return Mi(s!==null),s}return n}function G6(t,e){function n(r,i){const s=qN(t,i,e);return Mi(s!==null),K6(s,i,t.host,t._protocol)}return n}function Nh(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=h6():i=u6():n.getStatus()===402?i=c6(t.bucket):n.getStatus()===403?i=d6(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Yx(t){const e=Nh(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=l6(t.path)),s.serverResponse=i.serverResponse,s}return n}function Y6(t,e,n){const r=e.fullServerUrl(),i=Ul(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new aa(i,s,Gx(t,n),o);return a.errorHandler=Yx(e),a}function Q6(t,e,n){const r=e.fullServerUrl(),i=Ul(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new aa(i,s,G6(t,n),o);return a.errorHandler=Yx(e),a}function X6(t,e){const n=e.fullServerUrl(),r=Ul(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new aa(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Yx(e),a}function J6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function GN(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=J6(null,e)),r}function YN(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let R=0;R<2;R++)E=E+Math.random().toString().slice(2);return E}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=GN(e,r,i),u=KN(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=ki.getBlob(f,r,p);if(m===null)throw LN();const y={name:c.fullPath},_=Ul(s,t.host,t._protocol),x="POST",v=t.maxUploadRetryTime,w=new aa(_,x,Gx(t,n),v);return w.urlParams=y,w.headers=o,w.body=m.uploadData(),w.errorHandler=Nh(e),w}class Tp{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Qx(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Mi(!1)}return Mi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Z6(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=GN(e,r,i),a={name:o.fullPath},l=Ul(s,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=KN(o,n),p=t.maxUploadRetryTime;function m(_){Qx(_);let x;try{x=_.getResponseHeader("X-Goog-Upload-URL")}catch{Mi(!1)}return Mi(Nm(x)),x}const y=new aa(l,c,m,p);return y.urlParams=a,y.headers=u,y.body=f,y.errorHandler=Nh(e),y}function e$(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const u=Qx(c,["active","final"]);let f=null;try{f=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Mi(!1)}f||Mi(!1);const p=Number(f);return Mi(!isNaN(p)),new Tp(p,r.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,l=new aa(n,o,s,a);return l.headers=i,l.errorHandler=Nh(e),l}const PT=256*1024;function t$(t,e,n,r,i,s,o,a){const l=new Tp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw g6();const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const f=l.current,p=f+u;let m="";u===0?m="finalize":c===u?m="upload, finalize":m="upload";const y={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},_=r.slice(f,p);if(_===null)throw LN();function x(R,C){const M=Qx(R,["active","final"]),T=l.current+u,b=r.size();let k;return M==="final"?k=Gx(e,s)(R,C):k=null,new Tp(T,b,M==="final",k)}const v="POST",w=e.maxUploadRetryTime,E=new aa(n,v,x,w);return E.headers=y,E.body=_.uploadData(),E.progressCallback=a||null,E.errorHandler=Nh(t),E}const jn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ny(t){switch(t){case"running":case"pausing":case"canceling":return jn.RUNNING;case"paused":return jn.PAUSED;case"success":return jn.SUCCESS;case"canceled":return jn.CANCELED;case"error":return jn.ERROR;default:return jn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(e,n,r){if(E6(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class r${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw vc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw vc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class i$ extends r${initXhr(){this.xhr_.responseType="text"}}function ds(){return new i$}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Kx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(et.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(UN(i.status,[]))if(s)i=MN();else{this.sleepTime=Math.max(this.sleepTime*2,a6),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(et.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Z6(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ds,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=e$(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,ds,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=PT*this._chunkMultiplier,n=new Tp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=t$(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,ds,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){PT*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Y6(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ds,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=YN(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ds,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=jN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=ny(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new n$(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(ny(this._state)){case jn.SUCCESS:xa(this._resolve.bind(null,this.snapshot))();break;case jn.CANCELED:case jn.ERROR:const n=this._reject;xa(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ny(this._state)){case jn.RUNNING:case jn.PAUSED:e.next&&xa(e.next.bind(e,this.snapshot))();break;case jn.SUCCESS:e.complete&&xa(e.complete.bind(e))();break;case jn.CANCELED:case jn.ERROR:e.error&&xa(e.error.bind(e,this._error))();break;default:e.error&&xa(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n){this._service=e,n instanceof Zn?this._location=n:this._location=Zn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qo(e,n)}get root(){const e=new Zn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return HN(this._location.path)}get storage(){return this._service}get parent(){const e=B6(this._location.path);if(e===null)return null;const n=new Zn(this._location.bucket,e);return new Qo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw _6(e)}}function o$(t,e,n){t._throwIfRoot("uploadBytes");const r=YN(t.storage,t._location,Kx(),new ki(e,!0),n);return t.storage.makeRequestWithTokens(r,ds).then(i=>({metadata:i,ref:t}))}function a$(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new s$(t,new ki(e),n)}function l$(t){t._throwIfRoot("getDownloadURL");const e=Q6(t.storage,t._location,Kx());return t.storage.makeRequestWithTokens(e,ds).then(n=>{if(n===null)throw y6();return n})}function c$(t){t._throwIfRoot("deleteObject");const e=X6(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ds)}function u$(t,e){const n=z6(t._location.path,e),r=new Zn(t._location.bucket,n);return new Qo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$(t){return/^[A-Za-z]+:\/\//.test(t)}function d$(t,e){return new Qo(t,e)}function QN(t,e){if(t instanceof Xx){const n=t;if(n._bucket==null)throw m6();const r=new Qo(n,n._bucket);return e!=null?QN(r,e):r}else return e!==void 0?u$(t,e):t}function f$(t,e){if(e&&h$(e)){if(t instanceof Xx)return d$(t,e);throw r_("To use ref(service, url), the first argument must be a Storage instance.")}else return QN(t,e)}function RT(t,e){const n=e==null?void 0:e[ON];return n==null?null:Zn.makeFromBucketSpec(n,t)}function p$(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:CP(i,t.app.options.projectId))}class Xx{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=DN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=s6,this._maxUploadRetryTime=o6,this._requests=new Set,i!=null?this._bucket=Zn.makeFromBucketSpec(i,this._host):this._bucket=RT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zn.makeFromBucketSpec(this._url,e):this._bucket=RT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){AT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){AT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new x6(VN());{const o=R6(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const NT="@firebase/storage",DT="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="storage";function JN(t,e,n){return t=ze(t),o$(t,e,n)}function m$(t,e,n){return t=ze(t),a$(t,e,n)}function Dm(t){return t=ze(t),l$(t)}function g$(t){return t=ze(t),c$(t)}function El(t,e){return t=ze(t),f$(t,e)}function Dh(t=G0(),e){t=ze(t);const r=um(t,XN).getImmediate({identifier:e}),i=TP("storage");return i&&y$(r,...i),r}function y$(t,e,n,r={}){p$(t,e,n,r)}function v$(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Xx(n,r,i,e,na)}function _$(){Ho(new Vs(XN,v$,"PUBLIC").setMultipleInstances(!0)),Jr(NT,DT,""),Jr(NT,DT,"esm2017")}_$();const x$={apiKey:"AIzaSyDU4GmH6xLhrEd2jSkyATXJOasIyEfisXY",authDomain:"biondo-fitness-coach.firebaseapp.com",projectId:"biondo-fitness-coach",storageBucket:"biondo-fitness-coach.firebasestorage.app",messagingSenderId:"1086406111438",appId:"1:1086406111438:web:1c8c3d9e49f1ffdb77609f",measurementId:"G-869HQ5KGVX"},Jx=RP(x$),se=q3(Jx),Ku=di(Jx),w$=Dh(Jx);var ZN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},OT=rt.createContext&&rt.createContext(ZN),b$=["attr","size","title"];function S$(t,e){if(t==null)return{};var n=E$(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function E$(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function kp(){return kp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kp.apply(this,arguments)}function MT(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ip(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MT(Object(n),!0).forEach(function(r){T$(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MT(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function T$(t,e,n){return e=k$(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k$(t){var e=I$(t,"string");return typeof e=="symbol"?e:e+""}function I$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function eD(t){return t&&t.map((e,n)=>rt.createElement(e.tag,Ip({key:n},e.attr),eD(e.child)))}function Te(t){return e=>rt.createElement(C$,kp({attr:Ip({},t.attr)},e),eD(t.child))}function C$(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=S$(t,b$),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),rt.createElement("svg",kp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Ip(Ip({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&rt.createElement("title",null,s),t.children)};return OT!==void 0?rt.createElement(OT.Consumer,null,n=>e(n)):e(ZN)}function A$(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function Xs(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function tD(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function P$(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(t)}function Zx(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function nD(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(t)}function ew(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(t)}function Cp(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(t)}function rD(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function iD(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function R$(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function N$(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function D$(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(t)}function la(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(t)}function O$(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function sD(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(t)}function oD(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(t)}function tw(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function M$(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function jT(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"},child:[]}]})(t)}function j$(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(t)}function L$(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function V$(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function Om(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(t)}function Mm(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function aD(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function jm(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function nw(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function Lm(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(t)}function F$(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(t)}function Oh(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function U$(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]},{tag:"line",attr:{x1:"12",y1:"12",x2:"12",y2:"21"},child:[]},{tag:"path",attr:{d:"M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"},child:[]},{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]}]})(t)}function B$(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(t)}function lD(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function z$(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(t)}function rw(t){return Te({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}const ka=["QwWST9OVOlTOi5oheyCqfpXLOLg2","3j0AXIRa4XdHq1ywCl4UBxJNsku2","AeZKjJYu5zMZ4mvffaGiqCBb0cF2"],$$=ka.reduce((t,e)=>({...t,[e]:"Coach"}),{}),LT=()=>d.jsx("div",{className:"flex justify-center items-center h-full p-4",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}),W$=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(null),[i,s]=D.useState([]),[o,a]=D.useState(""),[l,c]=D.useState(!0),[u,f]=D.useState(!1),[p,m]=D.useState(""),[y,_]=D.useState([]),[x,v]=D.useState(!1),w=D.useRef(null),R=di().currentUser,C=R==null?void 0:R.uid;D.useEffect(()=>{const I=Ge(se,"chats"),P=Wn(I,li("lastUpdate","desc")),B=ut(P,z=>{const H=z.docs.map(Y=>({id:Y.id,...Y.data()}));e(H),c(!1)},z=>{console.error("Errore nel caricare le chat:",z),c(!1)});return()=>B()},[]),D.useEffect(()=>{if(!n){s([]);return}f(!0);const I=Ge(se,"chats",n,"messages"),P=Wn(I,li("createdAt")),B=ut(P,z=>{s(z.docs.map(H=>({id:H.id,...H.data()}))),f(!1)},z=>{console.error("Errore nel caricare i messaggi:",z),f(!1)});return()=>B()},[n]),D.useEffect(()=>{if(!n||!C)return;const I=t.find(P=>P.id===n);if(I&&I.lastMessageSenderId&&!ka.includes(I.lastMessageSenderId)){const P=Ce(se,"chats",n);Rr(P,{lastMessageSenderId:C},{merge:!0}).catch(B=>{console.error("Errore nell'azzeramento contatore chat:",B)})}},[n,C,t]),D.useEffect(()=>{var I;(I=w.current)==null||I.scrollIntoView({behavior:"smooth"})},[i]),D.useEffect(()=>{const I=async()=>{if(p.trim().length<2){_([]),v(!1);return}v(!0);const B=Ge(se,"clients"),z=p.toLowerCase(),H=Wn(B,bp("name_lowercase",">=",z),bp("name_lowercase","<=",z+""),Sp(10));try{const Y=await Ep(H);_(Y.docs.map($=>({id:$.id,...$.data()})))}catch(Y){console.error("Errore nella ricerca (potrebbe mancare un indice in Firestore):",Y)}v(!1)},P=setTimeout(()=>{I()},300);return()=>clearTimeout(P)},[p]);const M=async I=>{if(!C)return;const P=ka[0],z=[I.id,P].sort().join("_");if(!t.find(Y=>Y.id===z)){const Y=Ce(se,"chats",z),$=[I.id,...ka],J={...$$,[I.id]:I.name};await Rr(Y,{participants:$,participantNames:J,lastMessage:"Conversazione avviata",lastUpdate:Nt(),createdAt:Nt()})}r(z),m(""),_([])},T=async I=>{if(I.preventDefault(),o.trim()===""||!n||!C){console.error("Invio messaggio fallito: Campi mancanti o Admin non autenticato.");return}const P=Ge(se,"chats",n,"messages");try{await Ph(P,{text:o,createdAt:Nt(),senderId:C});const B=Ce(se,"chats",n);await Rr(B,{lastMessage:o,lastUpdate:Nt(),lastMessageSenderId:C},{merge:!0}),a("")}catch(B){console.error("ERRORE FIREBASE DURANTE L'INVIO DEL MESSAGGIO:",B)}},b=async()=>{if(n&&window.confirm("SEI SICURO? Questa azione eliminer la chat e tutti i messaggi definitivamente."))try{const I=Ge(se,"chats",n,"messages"),P=await Ep(I),B=Rm(se);P.docs.forEach(H=>{B.delete(H.ref)}),await B.commit();const z=Ce(se,"chats",n);await Ah(z),r(null),s([]),console.log(`Chat ${n} eliminata con successo.`)}catch(I){console.error("ERRORE NELL'ELIMINAZIONE DELLA CHAT:",I),alert("Errore durante l'eliminazione della chat. Controlla i permessi di scrittura in Firestore.")}},k=t.find(I=>I.id===n),A=k==null?void 0:k.participants.find(I=>!ka.includes(I)),O=k?k.participantNames[A]||"Cliente":"Chat";return d.jsxs("div",{className:"flex h-[calc(100vh-120px)] bg-card/60 backdrop-blur-lg rounded-xl border border-white/10 overflow-hidden",children:[d.jsxs("div",{className:"w-full md:w-1/3 border-r border-white/10 flex flex-col",children:[d.jsx("div",{className:"p-4 border-b border-white/10 flex-shrink-0",children:d.jsxs("div",{className:"relative",children:[d.jsx(nw,{className:"absolute top-1/2 left-3 -translate-y-1/2 text-muted"}),d.jsx("input",{type:"text",placeholder:"Cerca o avvia una chat...",value:p,onChange:I=>m(I.target.value),className:"w-full bg-background p-2 pl-9 rounded-lg border border-white/10 outline-none focus:ring-2 focus:ring-primary"})]})}),p.length>1?d.jsxs("div",{className:"flex-1 overflow-y-auto",children:[x&&d.jsx("p",{className:"p-4 text-muted text-sm",children:"Ricerca..."}),!x&&y.length===0&&d.jsx("p",{className:"p-4 text-muted text-sm",children:"Nessun cliente trovato."}),!x&&y.map(I=>d.jsxs("div",{onClick:()=>M(I),className:"p-4 cursor-pointer hover:bg-white/5",children:[d.jsx("p",{className:"font-semibold text-white",children:I.name}),d.jsx("p",{className:"text-sm text-muted",children:I.email})]},I.id))]}):d.jsx(d.Fragment,{children:l?d.jsx(LT,{}):d.jsx("div",{className:"flex-1 overflow-y-auto",children:t.map(I=>{const P=I.participants.find(H=>!ka.includes(H)),B=I.participantNames?I.participantNames[P]:"Cliente",z=I.lastMessageSenderId===P;return d.jsxs("div",{onClick:()=>r(I.id),className:`p-4 cursor-pointer border-l-4 ${n===I.id?"bg-primary/20 border-primary":"border-transparent hover:bg-white/5"}`,children:[d.jsx("p",{className:`font-semibold ${z?"text-white":"text-muted"}`,children:B||"Cliente"}),d.jsx("p",{className:"text-sm text-muted truncate",children:I.lastMessage})]},I.id)})})})]}),d.jsx("div",{className:"w-full md:w-2/3 flex flex-col",children:n?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex-shrink-0 flex justify-between items-center",children:[d.jsx("h3",{className:"font-bold text-lg text-white",children:O}),d.jsx("button",{onClick:b,className:"text-red-500/80 hover:text-red-500 p-2 rounded-full transition-colors",title:"Elimina la conversazione",disabled:!n,children:d.jsx(Oh,{size:20})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[u?d.jsx(LT,{}):i.map(I=>d.jsx("div",{className:`flex ${I.senderId===C?"justify-end":"justify-start"}`,children:d.jsx("div",{className:`max-w-md p-3 rounded-2xl ${I.senderId===C?"bg-primary rounded-br-none":"bg-background rounded-bl-none"}`,children:d.jsx("p",{className:"text-white break-words",children:I.text})})},I.id)),d.jsx("div",{ref:w})]}),d.jsx("div",{className:"p-4 border-t border-white/10 flex-shrink-0",children:d.jsxs("form",{onSubmit:T,className:"flex items-center gap-4",children:[d.jsx("input",{type:"text",value:o,onChange:I=>a(I.target.value),placeholder:"Scrivi una risposta...",className:"flex-1 p-3 bg-background border border-white/10 rounded-full outline-none focus:ring-2 focus:ring-primary text-white"}),d.jsx("button",{type:"submit",className:"p-3 bg-primary hover:bg-primary/80 text-white rounded-full disabled:opacity-50",disabled:!o.trim()||!n,children:d.jsx(Lm,{size:20})})]})})]}):d.jsxs("div",{className:"flex flex-col justify-center items-center h-full text-muted",children:[d.jsx(Om,{size:48}),d.jsx("p",{className:"mt-4",children:"Seleziona una conversazione o cercala per nome."})]})})]})};function H$(){nn();const[t,e]=D.useState(""),[n,r]=D.useState(""),[i,s]=D.useState(""),o=async a=>{a.preventDefault(),s("");try{await rR(Ku,t,n),sessionStorage.setItem("app_role","admin")}catch(l){s("Credenziali non valide. Riprova."),console.error("Errore di login admin:",l)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background text-foreground",children:d.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-card rounded-2xl border border-white/10 shadow-2xl",children:[d.jsx("h2",{className:"text-3xl font-bold text-center text-white",children:"Accesso Admin"}),d.jsxs("form",{onSubmit:o,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block mb-1 text-sm font-medium text-muted",children:"Email"}),d.jsx("input",{type:"email",value:t,onChange:a=>e(a.target.value),required:!0,className:"w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",autoComplete:"email"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block mb-1 text-sm font-medium text-muted",children:"Password"}),d.jsx("input",{type:"password",value:n,onChange:a=>r(a.target.value),required:!0,className:"w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",autoComplete:"current-password"})]}),i&&d.jsx("p",{className:"text-red-400 text-sm text-center",children:i}),d.jsx("div",{children:d.jsx("button",{type:"submit",className:"w-full px-4 py-2.5 font-bold text-white bg-primary rounded-lg hover:bg-primary/80",children:"Accedi"})})]})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Mh(t){return t+.5|0}const vs=(t,e,n)=>Math.max(Math.min(t,n),e);function Lc(t){return vs(Mh(t*2.55),0,255)}function Ms(t){return vs(Mh(t*255),0,255)}function Ti(t){return vs(Mh(t/2.55)/100,0,1)}function VT(t){return vs(Mh(t*100),0,100)}const ar={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},i_=[..."0123456789ABCDEF"],q$=t=>i_[t&15],K$=t=>i_[(t&240)>>4]+i_[t&15],Rd=t=>(t&240)>>4===(t&15),G$=t=>Rd(t.r)&&Rd(t.g)&&Rd(t.b)&&Rd(t.a);function Y$(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ar[t[1]]*17,g:255&ar[t[2]]*17,b:255&ar[t[3]]*17,a:e===5?ar[t[4]]*17:255}:(e===7||e===9)&&(n={r:ar[t[1]]<<4|ar[t[2]],g:ar[t[3]]<<4|ar[t[4]],b:ar[t[5]]<<4|ar[t[6]],a:e===9?ar[t[7]]<<4|ar[t[8]]:255})),n}const Q$=(t,e)=>t<255?e(t):"";function X$(t){var e=G$(t)?q$:K$;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Q$(t.a,e):void 0}const J$=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function cD(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function Z$(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function e9(t,e,n){const r=cD(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function t9(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function iw(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=t9(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function sw(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Ms)}function ow(t,e,n){return sw(cD,t,e,n)}function n9(t,e,n){return sw(e9,t,e,n)}function r9(t,e,n){return sw(Z$,t,e,n)}function uD(t){return(t%360+360)%360}function i9(t){const e=J$.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Lc(+e[5]):Ms(+e[5]));const i=uD(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=n9(i,s,o):e[1]==="hsv"?r=r9(i,s,o):r=ow(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function s9(t,e){var n=iw(t);n[0]=uD(n[0]+e),n=ow(n),t.r=n[0],t.g=n[1],t.b=n[2]}function o9(t){if(!t)return;const e=iw(t),n=e[0],r=VT(e[1]),i=VT(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Ti(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const FT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},UT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function a9(){const t={},e=Object.keys(UT),n=Object.keys(FT);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,FT[s]);s=parseInt(UT[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let Nd;function l9(t){Nd||(Nd=a9(),Nd.transparent=[0,0,0,0]);const e=Nd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const c9=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function u9(t){const e=c9.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Lc(o):vs(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Lc(r):vs(r,0,255)),i=255&(e[4]?Lc(i):vs(i,0,255)),s=255&(e[6]?Lc(s):vs(s,0,255)),{r,g:i,b:s,a:n}}}function h9(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ti(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const ry=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,wa=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function d9(t,e,n){const r=wa(Ti(t.r)),i=wa(Ti(t.g)),s=wa(Ti(t.b));return{r:Ms(ry(r+n*(wa(Ti(e.r))-r))),g:Ms(ry(i+n*(wa(Ti(e.g))-i))),b:Ms(ry(s+n*(wa(Ti(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Dd(t,e,n){if(t){let r=iw(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=ow(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function hD(t,e){return t&&Object.assign(e||{},t)}function BT(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ms(t[3]))):(e=hD(t,{r:0,g:0,b:0,a:1}),e.a=Ms(e.a)),e}function f9(t){return t.charAt(0)==="r"?u9(t):i9(t)}class Gu{constructor(e){if(e instanceof Gu)return e;const n=typeof e;let r;n==="object"?r=BT(e):n==="string"&&(r=Y$(e)||l9(e)||f9(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=hD(this._rgb);return e&&(e.a=Ti(e.a)),e}set rgb(e){this._rgb=BT(e)}rgbString(){return this._valid?h9(this._rgb):void 0}hexString(){return this._valid?X$(this._rgb):void 0}hslString(){return this._valid?o9(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=d9(this._rgb,e._rgb,n)),this}clone(){return new Gu(this.rgb)}alpha(e){return this._rgb.a=Ms(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Mh(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Dd(this._rgb,2,e),this}darken(e){return Dd(this._rgb,2,-e),this}saturate(e){return Dd(this._rgb,1,e),this}desaturate(e){return Dd(this._rgb,1,-e),this}rotate(e){return s9(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function _i(){}const p9=(()=>{let t=0;return()=>t++})();function Me(t){return t==null}function Rt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ie(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Sn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Br(t,e){return Sn(t)?t:e}function we(t,e){return typeof t>"u"?e:t}const m9=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Xe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function je(t,e,n,r){let i,s,o;if(Rt(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Ie(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function Ap(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Pp(t){if(Rt(t))return t.map(Pp);if(Ie(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Pp(t[n[i]]);return e}return t}function dD(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function g9(t,e,n,r){if(!dD(t))return;const i=e[t],s=n[t];Ie(i)&&Ie(s)?Yu(i,s,r):e[t]=Pp(s)}function Yu(t,e,n){const r=Rt(e)?e:[e],i=r.length;if(!Ie(t))return t;n=n||{};const s=n.merger||g9;let o;for(let a=0;a<i;++a){if(o=r[a],!Ie(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function au(t,e){return Yu(t,e,{merger:y9})}function y9(t,e,n){if(!dD(t))return;const r=e[t],i=n[t];Ie(r)&&Ie(i)?au(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Pp(i))}const zT={"":t=>t,x:t=>t.x,y:t=>t.y};function v9(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function _9(t){const e=v9(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Tl(t,e){return(zT[e]||(zT[e]=_9(e)))(t)}function aw(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Qu=t=>typeof t<"u",zs=t=>typeof t=="function",$T=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function x9(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Wt=Math.PI,Nr=2*Wt,w9=Nr+Wt,Rp=Number.POSITIVE_INFINITY,b9=Wt/180,Cr=Wt/2,fo=Wt/4,WT=Wt*2/3,fD=Math.log10,ri=Math.sign;function lu(t,e,n){return Math.abs(t-e)<n}function HT(t){const e=Math.round(t);t=lu(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(fD(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function S9(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function E9(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Xu(t){return!E9(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function T9(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function k9(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ao(t){return t*(Wt/180)}function I9(t){return t*(180/Wt)}function qT(t){if(!Sn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function C9(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Wt&&(s+=Nr),{angle:s,distance:i}}function s_(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function A9(t,e){return(t-e+w9)%Nr-Wt}function qr(t){return(t%Nr+Nr)%Nr}function pD(t,e,n,r){const i=qr(t),s=qr(e),o=qr(n),a=qr(s-i),l=qr(o-i),c=qr(i-s),u=qr(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function er(t,e,n){return Math.max(e,Math.min(n,t))}function P9(t){return er(t,-32768,32767)}function _s(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function lw(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Po=(t,e,n,r)=>lw(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),R9=(t,e,n)=>lw(t,n,r=>t[r][e]>=n);function N9(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const mD=["push","pop","shift","splice","unshift"];function D9(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),mD.forEach(n=>{const r="_onData"+aw(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function KT(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(mD.forEach(s=>{delete t[s]}),delete t._chartjs)}function gD(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const yD=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function vD(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,yD.call(window,()=>{r=!1,t.apply(e,n)}))}}function O9(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const cw=t=>t==="start"?"left":t==="end"?"right":"center",dn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,M9=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function j9(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:f,max:p,minDefined:m,maxDefined:y}=o.getUserBounds();if(m){if(i=Math.min(Po(l,u,f).lo,n?r:Po(e,u,o.getPixelForValue(f)).lo),c){const _=l.slice(0,i+1).reverse().findIndex(x=>!Me(x[a.axis]));i-=Math.max(0,_)}i=er(i,0,r-1)}if(y){let _=Math.max(Po(l,o.axis,p,!0).hi+1,n?0:Po(e,u,o.getPixelForValue(p),!0).hi+1);if(c){const x=l.slice(_-1).findIndex(v=>!Me(v[a.axis]));_+=Math.max(0,x)}s=er(_,i,r)-i}else s=r-i}return{start:i,count:s}}function L9(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Od=t=>t===0||t===1,GT=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Nr/n)),YT=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Nr/n)+1,cu={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Cr)+1,easeOutSine:t=>Math.sin(t*Cr),easeInOutSine:t=>-.5*(Math.cos(Wt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Od(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Od(t)?t:GT(t,.075,.3),easeOutElastic:t=>Od(t)?t:YT(t,.075,.3),easeInOutElastic(t){return Od(t)?t:t<.5?.5*GT(t*2,.1125,.45):.5+.5*YT(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-cu.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?cu.easeInBounce(t*2)*.5:cu.easeOutBounce(t*2-1)*.5+.5};function uw(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function QT(t){return uw(t)?t:new Gu(t)}function iy(t){return uw(t)?t:new Gu(t).saturate(.5).darken(.1).hexString()}const V9=["x","y","borderWidth","radius","tension"],F9=["color","borderColor","backgroundColor"];function U9(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:F9},numbers:{type:"number",properties:V9}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function B9(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const XT=new Map;function z9(t,e){e=e||{};const n=t+JSON.stringify(e);let r=XT.get(n);return r||(r=new Intl.NumberFormat(t,e),XT.set(n,r)),r}function _D(t,e,n){return z9(e,n).format(t)}const $9={values(t){return Rt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=W9(t,n)}const o=fD(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),_D(t,r,l)}};function W9(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var xD={formatters:$9};function H9(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:xD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Xo=Object.create(null),o_=Object.create(null);function uu(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function sy(t,e,n){return typeof e=="string"?Yu(uu(t,e),n):Yu(uu(t,""),e)}class q9{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>iy(i.backgroundColor),this.hoverBorderColor=(r,i)=>iy(i.borderColor),this.hoverColor=(r,i)=>iy(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return sy(this,e,n)}get(e){return uu(this,e)}describe(e,n){return sy(o_,e,n)}override(e,n){return sy(Xo,e,n)}route(e,n,r,i){const s=uu(this,e),o=uu(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Ie(l)?Object.assign({},c,l):we(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Et=new q9({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[U9,B9,H9]);function K9(t){return!t||Me(t.size)||Me(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function JT(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function po(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function ZT(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function a_(t,e,n,r){wD(t,e,n,r,null)}function wD(t,e,n,r,i){let s,o,a,l,c,u,f,p;const m=e.pointStyle,y=e.rotation,_=e.radius;let x=(y||0)*b9;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(x),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,_,0,0,Nr):t.arc(n,r,_,0,Nr),t.closePath();break;case"triangle":u=i?i/2:_,t.moveTo(n+Math.sin(x)*u,r-Math.cos(x)*_),x+=WT,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*_),x+=WT,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*_),t.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(x+fo)*l,f=Math.cos(x+fo)*(i?i/2-c:l),a=Math.sin(x+fo)*l,p=Math.sin(x+fo)*(i?i/2-c:l),t.arc(n-f,r-a,c,x-Wt,x-Cr),t.arc(n+p,r-o,c,x-Cr,x),t.arc(n+f,r+a,c,x,x+Cr),t.arc(n-p,r+o,c,x+Cr,x+Wt),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*_,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}x+=fo;case"rectRot":f=Math.cos(x)*(i?i/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(i?i/2:_),t.moveTo(n-f,r-a),t.lineTo(n+p,r-o),t.lineTo(n+f,r+a),t.lineTo(n-p,r+o),t.closePath();break;case"crossRot":x+=fo;case"cross":f=Math.cos(x)*(i?i/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(i?i/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"star":f=Math.cos(x)*(i?i/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(i?i/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o),x+=fo,f=Math.cos(x)*(i?i/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(i?i/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"line":o=i?i/2:Math.cos(x)*_,a=Math.sin(x)*_,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(x)*(i?i/2:_),r+Math.sin(x)*_);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Ju(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Vm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Fm(t){t.restore()}function G9(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Y9(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Q9(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Me(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function X9(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function J9(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Zu(t,e,n,r,i,s={}){const o=Rt(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,Q9(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&J9(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Me(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),X9(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Np(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Wt,Wt,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Wt,Cr,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Cr,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Cr,!0),t.lineTo(n+o.topLeft,r)}const Z9=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,eW=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function tW(t,e){const n=(""+t).match(Z9);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const nW=t=>+t||0;function bD(t,e){const n={},r=Ie(e),i=r?Object.keys(e):e,s=Ie(t)?r?o=>we(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=nW(s(o));return n}function SD(t){return bD(t,{top:"y",right:"x",bottom:"y",left:"x"})}function sl(t){return bD(t,["topLeft","topRight","bottomLeft","bottomRight"])}function yr(t){const e=SD(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function yn(t,e){t=t||{},e=e||Et.font;let n=we(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=we(t.style,e.style);r&&!(""+r).match(eW)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:we(t.family,e.family),lineHeight:tW(we(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:we(t.weight,e.weight),string:""};return i.string=K9(i),i}function Md(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function rW(t,e,n){const{min:r,max:i}=t,s=m9(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function ca(t,e){return Object.assign(Object.create(t),e)}function hw(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=ID("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>hw([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return TD(a,l,()=>hW(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return t1(a).includes(l)},ownKeys(a){return t1(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function kl(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:ED(t,r),setContext:s=>kl(t,s,n,r),override:s=>kl(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return TD(s,o,()=>sW(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function ED(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:zs(n)?n:()=>n,isIndexable:zs(r)?r:()=>r}}const iW=(t,e)=>t?t+aw(e):e,dw=(t,e)=>Ie(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function TD(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function sW(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return zs(a)&&o.isScriptable(e)&&(a=oW(e,a,t,n)),Rt(a)&&a.length&&(a=aW(e,a,t,o.isIndexable)),dw(e,a)&&(a=kl(a,i,s&&s[e],o)),a}function oW(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),dw(t,l)&&(l=fw(i._scopes,i,t,l)),l}function aW(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Ie(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const f=fw(c,i,t,u);e.push(kl(f,s,o&&o[t],a))}}return e}function kD(t,e,n){return zs(t)?t(e,n):t}const lW=(t,e)=>t===!0?e:typeof t=="string"?Tl(e,t):void 0;function cW(t,e,n,r,i){for(const s of e){const o=lW(n,s);if(o){t.add(o);const a=kD(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function fw(t,e,n,r){const i=e._rootScopes,s=kD(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=e1(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=e1(a,o,s,l,r),l===null)?!1:hw(Array.from(a),[""],i,s,()=>uW(e,n,r))}function e1(t,e,n,r,i){for(;n;)n=cW(t,e,n,r,i);return n}function uW(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Rt(i)&&Ie(n)?n:i||{}}function hW(t,e,n,r){let i;for(const s of e)if(i=ID(iW(s,t),n),typeof i<"u")return dw(t,i)?fw(n,r,t,i):i}function ID(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function t1(t){let e=t._keys;return e||(e=t._keys=dW(t._scopes)),e}function dW(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const fW=Number.EPSILON||1e-14,Il=(t,e)=>e<t.length&&!t[e].skip&&t[e],CD=t=>t==="x"?"y":"x";function pW(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=s_(s,i),l=s_(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=r*c,p=r*u;return{previous:{x:s.x-f*(o.x-i.x),y:s.y-f*(o.y-i.y)},next:{x:s.x+p*(o.x-i.x),y:s.y+p*(o.y-i.y)}}}function mW(t,e,n){const r=t.length;let i,s,o,a,l,c=Il(t,0);for(let u=0;u<r-1;++u)if(l=c,c=Il(t,u+1),!(!l||!c)){if(lu(e[u],0,fW)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function gW(t,e,n="x"){const r=CD(n),i=t.length;let s,o,a,l=Il(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Il(t,c+1),!a)continue;const u=a[n],f=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=f-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=f+s*e[c])}}function yW(t,e="x"){const n=CD(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Il(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Il(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?ri(i[o-1])!==ri(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}mW(t,i,s),gW(t,s,e)}function jd(t,e,n){return Math.max(Math.min(t,n),e)}function vW(t,e){let n,r,i,s,o,a=Ju(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Ju(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=jd(i.cp1x,e.left,e.right),i.cp1y=jd(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=jd(i.cp2x,e.left,e.right),i.cp2y=jd(i.cp2y,e.top,e.bottom)))}function _W(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")yW(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=pW(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&vW(t,n)}function pw(){return typeof window<"u"&&typeof document<"u"}function mw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Dp(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Um=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function xW(t,e){return Um(t).getPropertyValue(e)}const wW=["top","right","bottom","left"];function Lo(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=wW[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const bW=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function SW(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(bW(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function xo(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Um(n),s=i.boxSizing==="border-box",o=Lo(i,"padding"),a=Lo(i,"border","width"),{x:l,y:c,box:u}=SW(t,n),f=o.left+(u&&a.left),p=o.top+(u&&a.top);let{width:m,height:y}=e;return s&&(m-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-f)/m*n.width/r),y:Math.round((c-p)/y*n.height/r)}}function EW(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&mw(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Um(s),l=Lo(a,"border","width"),c=Lo(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Dp(a.maxWidth,s,"clientWidth"),i=Dp(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Rp,maxHeight:i||Rp}}const Ld=t=>Math.round(t*10)/10;function TW(t,e,n,r){const i=Um(t),s=Lo(i,"margin"),o=Dp(i.maxWidth,t,"clientWidth")||Rp,a=Dp(i.maxHeight,t,"clientHeight")||Rp,l=EW(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const p=Lo(i,"border","width"),m=Lo(i,"padding");c-=m.width+p.width,u-=m.height+p.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=Ld(Math.min(c,o,l.maxWidth)),u=Ld(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Ld(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Ld(Math.floor(u*r))),{width:c,height:u}}function n1(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const kW=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};pw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function r1(t,e){const n=xW(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function wo(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function IW(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function CW(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=wo(t,i,n),a=wo(i,s,n),l=wo(s,e,n),c=wo(o,a,n),u=wo(a,l,n);return wo(c,u,n)}const AW=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},PW=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ol(t,e,n){return t?AW(e,n):PW()}function AD(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function PD(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function RD(t){return t==="angle"?{between:pD,compare:A9,normalize:qr}:{between:_s,compare:(e,n)=>e-n,normalize:e=>e}}function i1({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function RW(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=RD(r),l=e.length;let{start:c,end:u,loop:f}=t,p,m;if(f){for(c+=l,u+=l,p=0,m=l;p<m&&o(a(e[c%l][r]),i,s);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:t.style}}function ND(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=RD(r),{start:u,end:f,loop:p,style:m}=RW(t,e,n),y=[];let _=!1,x=null,v,w,E;const R=()=>l(i,E,v)&&a(i,E)!==0,C=()=>a(s,v)===0||l(s,E,v),M=()=>_||R(),T=()=>!_||C();for(let b=u,k=u;b<=f;++b)w=e[b%o],!w.skip&&(v=c(w[r]),v!==E&&(_=l(v,i,s),x===null&&M()&&(x=a(v,i)===0?b:k),x!==null&&T()&&(y.push(i1({start:x,end:b,loop:p,count:o,style:m})),x=null),k=b,E=v));return x!==null&&y.push(i1({start:x,end:f,loop:p,count:o,style:m})),y}function DD(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=ND(r[i],t.points,e);s.length&&n.push(...s)}return n}function NW(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function DW(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function OW(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=NW(n,i,s,r);if(r===!0)return s1(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return s1(t,DW(n,o,l,c),n,e)}function s1(t,e,n,r){return!r||!r.setContext||!n?e:MW(t,e,n,r)}function MW(t,e,n,r){const i=t._chart.getContext(),s=o1(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,f=e[0].start,p=f;function m(y,_,x,v){const w=a?-1:1;if(y!==_){for(y+=l;n[y%l].skip;)y-=w;for(;n[_%l].skip;)_+=w;y%l!==_%l&&(c.push({start:y%l,end:_%l,loop:x,style:v}),u=v,f=_%l)}}for(const y of e){f=a?f:y.start;let _=n[f%l],x;for(p=f+1;p<=y.end;p++){const v=n[p%l];x=o1(r.setContext(ca(i,{type:"segment",p0:_,p1:v,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),jW(x,u)&&m(f,p-1,y.loop,u),_=v,u=x}f<p-1&&m(f,p-1,y.loop,u)}return c}function o1(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function jW(t,e){if(!e)return!1;const n=[],r=function(i,s){return uw(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Vd(t,e,n){return t.options.clip?t[n]:e[n]}function LW(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Vd(n,e,"left"),right:Vd(n,e,"right"),top:Vd(r,e,"top"),bottom:Vd(r,e,"bottom")}:e}function OD(t,e){const n=e._clip;if(n.disabled)return!1;const r=LW(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class VW{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=yD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var wi=new VW;const a1="transparent",FW={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=QT(t||a1),i=r.valid&&QT(e||a1);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class UW{constructor(e,n,r,i){const s=n[r];i=Md([e.to,i,s,e.from]);const o=Md([e.from,s,i]);this._active=!0,this._fn=e.fn||FW[e.type||typeof o],this._easing=cu[e.easing]||cu.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Md([e.to,n,i,e.from]),this._from=Md([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class MD{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ie(e))return;const n=Object.keys(Et.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Ie(s))return;const o={};for(const a of n)o[a]=s[a];(Rt(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=zW(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&BW(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let f=s[c];const p=r.get(c);if(f)if(p&&f.active()){f.update(p,u,a);continue}else f.cancel();if(!p||!p.duration){e[c]=u;continue}s[c]=f=new UW(p,e,c,u),i.push(f)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return wi.add(this._chart,r),!0}}function BW(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function zW(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function l1(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function $W(t,e,n){if(n===!1)return!1;const r=l1(t,n),i=l1(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function WW(t){let e,n,r,i;return Ie(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function jD(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function c1(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],Sn(c)&&(s||e===0||ri(e)===ri(c))&&(e+=c)}return!u&&!r.all?0:e}function HW(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function oy(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function qW(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function KW(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function GW(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function u1(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function h1(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=qW(s,o,r),f=e.length;let p;for(let m=0;m<f;++m){const y=e[m],{[l]:_,[c]:x}=y,v=y._stacks||(y._stacks={});p=v[c]=GW(i,u,_),p[a]=x,p._top=u1(p,o,!0,r.type),p._bottom=u1(p,o,!1,r.type);const w=p._visualValues||(p._visualValues={});w[a]=x}}function ay(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function YW(t,e){return ca(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function QW(t,e,n){return ca(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function _c(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const ly=t=>t==="reset"||t==="none",d1=(t,e)=>e?t:Object.assign({},t),XW=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:jD(n,!0),values:null};class al{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=oy(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&_c(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(f,p,m,y)=>f==="x"?p:f==="r"?y:m,s=n.xAxisID=we(r.xAxisID,ay(e,"x")),o=n.yAxisID=we(r.yAxisID,ay(e,"y")),a=n.rAxisID=we(r.rAxisID,ay(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&KT(this._data,this),e._stacked&&_c(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Ie(n)){const i=this._cachedMeta;this._data=HW(n,i)}else if(r!==n){if(r){KT(r,this);const i=this._cachedMeta;_c(i),i._parsed=[]}n&&Object.isExtensible(n)&&D9(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=oy(n.vScale,n),n.stack!==r.stack&&(i=!0,_c(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(h1(this,n._parsed),n._stacked=oy(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,f,p;if(this._parsing===!1)r._parsed=i,r._sorted=!0,p=i;else{Rt(i[e])?p=this.parseArrayData(r,i,e,n):Ie(i[e])?p=this.parseObjectData(r,i,e,n):p=this.parsePrimitiveData(r,i,e,n);const m=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=f=p[u],l&&(m()&&(l=!1),c=f);r._sorted=l}o&&h1(this,p)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,f=new Array(i);let p,m,y;for(p=0,m=i;p<m;++p)y=p+r,f[p]={[a]:u||s.parse(c[y],y),[l]:o.parse(n[y],y)};return f}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,f;for(l=0,c=i;l<c;++l)u=l+r,f=n[u],a[l]={x:s.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,f,p,m;for(u=0,f=i;u<f;++u)p=u+r,m=n[p],c[u]={x:s.parse(Tl(m,a),p),y:o.parse(Tl(m,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:jD(i,!0),values:n._stacks[e.axis]._visualValues};return c1(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=c1(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=XW(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=KW(a);let p,m;function y(){m=i[p];const _=m[a.axis];return!Sn(m[e.axis])||u>_||f<_}for(p=0;p<o&&!(!y()&&(this.updateRangeFromParsed(c,e,m,l),s));++p);if(s){for(p=o-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Sn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=WW(we(this.options.clip,$W(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const f=i[u];f.hidden||(f.active&&c?o.push(f):f.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=QW(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=YW(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Qu(r);if(a)return d1(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),f=i?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),u),m=Object.keys(Et.elements[e]),y=()=>this.getContext(r,i,n),_=c.resolveNamedOptions(p,m,y,f);return _.$shared&&(_.$shared=l,s[o]=Object.freeze(d1(_,l))),_}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(p,this.getContext(e,r,n))}const c=new MD(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||ly(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){ly(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!ly(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&_c(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}de(al,"defaults",{}),de(al,"datasetElementType",null),de(al,"dataElementType",null);function JW(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=gD(r.sort((i,s)=>i-s))}return t._cache.$bar}function ZW(t){const e=t.iScale,n=JW(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(Qu(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function eH(t,e,n,r){const i=n.barThickness;let s,o;return Me(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function tH(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function nH(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function LD(t,e,n,r){return Rt(t)?nH(t,e,n,r):e[n.axis]=n.parse(t,r),e}function f1(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,f,p;for(c=n,u=n+r;c<u;++c)p=e[c],f={},f[i.axis]=a||i.parse(o[c],c),l.push(LD(p,f,s,c));return l}function cy(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function rH(t,e,n){return t!==0?ri(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function iH(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function sH(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=iH(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[p1(u,o,a,l)]=!0,i=c)),s[p1(i,o,a,l)]=!0,t.borderSkipped=s}function p1(t,e,n,r){return r?(t=oH(t,e,n),t=m1(t,n,e)):t=m1(t,e,n),t}function oH(t,e,n){return t===e?n:t===n?e:t}function m1(t,e,n){return t==="start"?e:t==="end"?n:t}function aH(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Sf extends al{parsePrimitiveData(e,n,r,i){return f1(e,n,r,i)}parseArrayData(e,n,r,i){return f1(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,f=[];let p,m,y,_;for(p=r,m=r+i;p<m;++p)_=n[p],y={},y[s.axis]=s.parse(Tl(_,c),p),f.push(LD(Tl(_,u),y,o,p));return f}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=cy(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(n,i);for(let m=n;m<n+r;m++){const y=this.getParsed(m),_=s||Me(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),x=this._calculateBarIndexPixels(m,u),v=(y._stacks||{})[a.axis],w={horizontal:c,base:_.base,enableBorderRadius:!v||cy(y._custom)||o===v._top||o===v._bottom,x:c?_.head:x.center,y:c?x.center:_.head,height:c?x.size:Math.abs(_.size),width:c?Math.abs(_.size):x.size};p&&(w.options=f||this.resolveDataElementOptions(m,e[m].active?"active":i));const E=w.options||e[m].options;sH(w,E,v,o),aH(w,E,u.ratio),this.updateElement(e[m],m,w,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const f=u._parsed.find(m=>m[r.axis]===l),p=f&&f[u.vScale.axis];if(Me(p)||isNaN(p))return!0};for(const u of i)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[we(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||ZW(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=cy(c);let f=l[n.axis],p=0,m=r?this.applyStack(n,l,r):f,y,_;m!==f&&(p=m-f,m=f),u&&(f=c.barStart,m=c.barEnd-c.barStart,f!==0&&ri(f)!==ri(c.barEnd)&&(p=0),p+=f);const x=!Me(s)&&!u?s:p;let v=n.getPixelForValue(x);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(p+m):y=v,_=y-v,Math.abs(_)<o){_=rH(_,n,a)*o,f===a&&(v-=_/2);const w=n.getPixelForDecimal(0),E=n.getPixelForDecimal(1),R=Math.min(w,E),C=Math.max(w,E);v=Math.max(Math.min(v,C),R),y=v+_,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(y)-n.getValueForPixel(v))}if(v===n.getPixelForValue(a)){const w=ri(_)*n.getLineWidthForValue(a)/2;v+=w,_-=w}return{size:_,base:v,head:y,center:y+_/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=we(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const u=s?this._getStackCount(e):n.stackCount,f=i.barThickness==="flex"?tH(e,n,i,u*c):eH(e,n,i,u*c),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(we(p,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+m;a=f.start+f.chunk*y+f.chunk/2,l=Math.min(o,f.chunk*f.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}de(Sf,"id","bar"),de(Sf,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),de(Sf,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Ef extends al{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=j9(n,i,o);this._drawStart=a,this._drawCount=l,L9(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(n,i),p=o.axis,m=a.axis,{spanGaps:y,segment:_}=this.options,x=Xu(y)?y:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||i==="none",w=n+r,E=e.length;let R=n>0&&this.getParsed(n-1);for(let C=0;C<E;++C){const M=e[C],T=v?M:{};if(C<n||C>=w){T.skip=!0;continue}const b=this.getParsed(C),k=Me(b[m]),A=T[p]=o.getPixelForValue(b[p],C),O=T[m]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,b,l):b[m],C);T.skip=isNaN(A)||isNaN(O)||k,T.stop=C>0&&Math.abs(b[p]-R[p])>x,_&&(T.parsed=b,T.raw=c.data[C]),f&&(T.options=u||this.resolveDataElementOptions(C,M.active?"active":i)),v||this.updateElement(M,C,T,i),R=b}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}de(Ef,"id","line"),de(Ef,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),de(Ef,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function mo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class gw{constructor(e){de(this,"options");this.options=e||{}}static override(e){Object.assign(gw.prototype,e)}init(){}formats(){return mo()}parse(){return mo()}format(){return mo()}add(){return mo()}diff(){return mo()}startOf(){return mo()}endOf(){return mo()}}var lH={_date:gw};function cH(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?R9:Po;if(r){if(i._sharedOptions){const u=s[0],f=typeof u.getRange=="function"&&u.getRange(e);if(f){const p=c(s,e,n-f),m=c(s,e,n+f);return{lo:p.lo,hi:m.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:f}=i._cachedMeta,{_parsed:p}=t,m=p.slice(0,u.lo+1).reverse().findIndex(_=>!Me(_[f.axis]));u.lo-=Math.max(0,m);const y=p.slice(u.hi).findIndex(_=>!Me(_[f.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:s.length-1}}function Bm(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:f,hi:p}=cH(s[a],e,o,i);for(let m=f;m<=p;++m){const y=u[m];y.skip||r(y,c,m)}}}function uH(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function uy(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Bm(t,n,e,function(a,l,c){!i&&!Ju(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function hH(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:f}=C9(o,{x:e.x,y:e.y});pD(f,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return Bm(t,n,e,s),i}function dH(t,e,n,r,i,s){let o=[];const a=uH(n);let l=Number.POSITIVE_INFINITY;function c(u,f,p){const m=u.inRange(e.x,e.y,i);if(r&&!m)return;const y=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!m)return;const x=a(e,y);x<l?(o=[{element:u,datasetIndex:f,index:p}],l=x):x===l&&o.push({element:u,datasetIndex:f,index:p})}return Bm(t,n,e,c),o}function hy(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?hH(t,e,n,i):dH(t,e,n,r,i,s)}function g1(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Bm(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var fH={modes:{index(t,e,n,r){const i=xo(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?uy(t,i,s,r,o):hy(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=xo(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?uy(t,i,s,r,o):hy(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=xo(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return uy(t,i,s,r,o)},nearest(t,e,n,r){const i=xo(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return hy(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=xo(e,t);return g1(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=xo(e,t);return g1(t,i,"y",n.intersect,r)}}};const VD=["left","top","right","bottom"];function xc(t,e){return t.filter(n=>n.pos===e)}function y1(t,e){return t.filter(n=>VD.indexOf(n.pos)===-1&&n.box.axis===e)}function wc(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function pH(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function mH(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!VD.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function gH(t,e){const n=mH(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function yH(t){const e=pH(t),n=wc(e.filter(c=>c.box.fullSize),!0),r=wc(xc(e,"left"),!0),i=wc(xc(e,"right")),s=wc(xc(e,"top"),!0),o=wc(xc(e,"bottom")),a=y1(e,"x"),l=y1(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:xc(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function v1(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function FD(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function vH(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Ie(i)){n.size&&(t[i]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?s.height:s.width),n.size=f.size/f.count,t[i]+=n.size}s.getPadding&&FD(o,s.getPadding());const a=Math.max(0,e.outerWidth-v1(o,t,"left","right")),l=Math.max(0,e.outerHeight-v1(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function _H(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function xH(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Vc(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,xH(a.horizontal,e));const{same:f,other:p}=vH(e,n,a,r);c|=f&&i.length,u=u||p,l.fullSize||i.push(a)}return c&&Vc(i,e,n,r)||u}function Fd(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function _1(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*u,p=c.size||l.height;Qu(c.start)&&(o=c.start),l.fullSize?Fd(l,i.left,o,n.outerWidth-i.right-i.left,p):Fd(l,e.left+c.placed,o,f,p),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*u,p=c.size||l.width;Qu(c.start)&&(s=c.start),l.fullSize?Fd(l,s,i.top,p,n.outerHeight-i.bottom-i.top):Fd(l,s,e.top+c.placed,p,f),c.start=s,c.placed+=f,s=l.right}}e.x=s,e.y=o}var fr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=yr(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=yH(t.boxes),l=a.vertical,c=a.horizontal;je(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=l.reduce((_,x)=>x.box.options&&x.box.options.display===!1?_:_+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},i);FD(p,yr(r));const m=Object.assign({maxPadding:p,w:s,h:o,x:i.left,y:i.top},i),y=gH(l.concat(c),f);Vc(a.fullSize,m,f,y),Vc(l,m,f,y),Vc(c,m,f,y)&&Vc(l,m,f,y),_H(m),_1(a.leftAndTop,m,f,y),m.x+=m.w,m.y+=m.h,_1(a.rightAndBottom,m,f,y),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},je(a.chartArea,_=>{const x=_.box;Object.assign(x,t.chartArea),x.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class UD{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class wH extends UD{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Tf="$chartjs",bH={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},x1=t=>t===null||t==="";function SH(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Tf]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",x1(i)){const s=r1(t,"width");s!==void 0&&(t.width=s)}if(x1(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=r1(t,"height");s!==void 0&&(t.height=s)}return t}const BD=kW?{passive:!0}:!1;function EH(t,e,n){t&&t.addEventListener(e,n,BD)}function TH(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,BD)}function kH(t,e){const n=bH[t.type]||t.type,{x:r,y:i}=xo(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Op(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function IH(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Op(a.addedNodes,r),o=o&&!Op(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function CH(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Op(a.removedNodes,r),o=o&&!Op(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const eh=new Map;let w1=0;function zD(){const t=window.devicePixelRatio;t!==w1&&(w1=t,eh.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function AH(t,e){eh.size||window.addEventListener("resize",zD),eh.set(t,e)}function PH(t){eh.delete(t),eh.size||window.removeEventListener("resize",zD)}function RH(t,e,n){const r=t.canvas,i=r&&mw(r);if(!i)return;const s=vD((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),AH(t,s),o}function dy(t,e,n){n&&n.disconnect(),e==="resize"&&PH(t)}function NH(t,e,n){const r=t.canvas,i=vD(s=>{t.ctx!==null&&n(kH(s,t))},t);return EH(r,e,i),i}class DH extends UD{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(SH(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[Tf])return!1;const r=n[Tf].initial;["height","width"].forEach(s=>{const o=r[s];Me(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[Tf],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:IH,detach:CH,resize:RH}[n]||NH;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:dy,detach:dy,resize:dy}[n]||TH)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return TW(e,n,r,i)}isAttached(e){const n=e&&mw(e);return!!(n&&n.isConnected)}}function OH(t){return!pw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?wH:DH}var Zd;let Js=(Zd=class{constructor(){de(this,"x");de(this,"y");de(this,"active",!1);de(this,"options");de(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Xu(this.x)&&Xu(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},de(Zd,"defaults",{}),de(Zd,"defaultRoutes"),Zd);function MH(t,e){const n=t.options.ticks,r=jH(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?VH(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return FH(e,c,s,o/i),c;const u=LH(s,e,i);if(o>0){let f,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(Ud(e,c,u,Me(m)?0:a-m,a),f=0,p=o-1;f<p;f++)Ud(e,c,u,s[f],s[f+1]);return Ud(e,c,u,l,Me(m)?e.length:l+m),c}return Ud(e,c,u),c}function jH(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function LH(t,e,n){const r=UH(t),i=e.length/n;if(!r)return Math.max(i,1);const s=S9(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function VH(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function FH(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function Ud(t,e,n,r,i){const s=we(r,0),o=Math.min(we(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function UH(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const BH=t=>t==="left"?"right":t==="right"?"left":t,b1=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,S1=(t,e)=>Math.min(e||t,t);function E1(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function zH(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function $H(t,e){je(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function bc(t){return t.drawTicks?t.tickLength:0}function T1(t,e){if(!t.display)return 0;const n=yn(t.font,e),r=yr(t.padding);return(Rt(t.text)?t.text.length:1)*n.lineHeight+r.height}function WH(t,e){return ca(t,{scale:e,type:"scale"})}function HH(t,e,n){return ca(t,{tick:n,index:e,type:"tick"})}function qH(t,e,n){let r=cw(t);return(n&&e!=="right"||!n&&e==="right")&&(r=BH(r)),r}function KH(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let f=0,p,m,y;const _=o-i,x=a-s;if(t.isHorizontal()){if(m=dn(r,s,a),Ie(n)){const v=Object.keys(n)[0],w=n[v];y=u[v].getPixelForValue(w)+_-e}else n==="center"?y=(c.bottom+c.top)/2+_-e:y=b1(t,n,e);p=a-s}else{if(Ie(n)){const v=Object.keys(n)[0],w=n[v];m=u[v].getPixelForValue(w)-x+e}else n==="center"?m=(c.left+c.right)/2-x+e:m=b1(t,n,e);y=dn(r,o,i),f=n==="left"?-Cr:Cr}return{titleX:m,titleY:y,maxWidth:p,rotation:f}}class Bl extends Js{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Br(e,Number.POSITIVE_INFINITY),n=Br(n,Number.NEGATIVE_INFINITY),r=Br(r,Number.POSITIVE_INFINITY),i=Br(i,Number.NEGATIVE_INFINITY),{min:Br(e,r),max:Br(n,i),minDefined:Sn(e),maxDefined:Sn(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Br(n,Br(r,n)),max:Br(r,Br(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Xe(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=rW(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?E1(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=MH(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Xe(this.options.afterUpdate,[this])}beforeSetDimensions(){Xe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Xe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Xe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Xe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Xe(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Xe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Xe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=S1(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,m=er(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),f+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-bc(e.grid)-n.padding-T1(e.title,this.chart.options.font),c=Math.sqrt(f*f+p*p),o=I9(Math.min(Math.asin(er((u.highest.height+6)/a,-1,1)),Math.asin(er(l/c,-1,1))-Math.asin(er(p/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Xe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Xe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=T1(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=bc(s)+l):(e.height=this.maxHeight,e.width=bc(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:p}=this._getLabelSizes(),m=r.padding*2,y=Ao(this.labelRotation),_=Math.cos(y),x=Math.sin(y);if(a){const v=r.mirror?0:x*f.width+_*p.height;e.height=Math.min(this.maxHeight,e.height+v+m)}else{const v=r.mirror?0:_*f.width+x*p.height;e.width=Math.min(this.maxWidth,e.width+v+m)}this._calculatePadding(c,u,x,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=i*e.width,m=r*n.height):(p=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,m=n.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=e.height/2;s==="start"?(u=0,f=e.height):s==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Xe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Me(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=E1(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/S1(n,r));let c=0,u=0,f,p,m,y,_,x,v,w,E,R,C;for(f=0;f<n;f+=l){if(y=e[f].label,_=this._resolveTickFontOptions(f),i.font=x=_.string,v=s[x]=s[x]||{data:{},gc:[]},w=_.lineHeight,E=R=0,!Me(y)&&!Rt(y))E=JT(i,v.data,v.gc,E,y),R=w;else if(Rt(y))for(p=0,m=y.length;p<m;++p)C=y[p],!Me(C)&&!Rt(C)&&(E=JT(i,v.data,v.gc,E,C),R+=w);o.push(E),a.push(R),c=Math.max(E,c),u=Math.max(R,u)}$H(s,n);const M=o.indexOf(c),T=a.indexOf(u),b=k=>({width:o[k]||0,height:a[k]||0});return{first:b(0),last:b(n-1),widest:b(M),highest:b(T),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return P9(this._alignToPixels?po(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=HH(this.getContext(),e,r))}return this.$context||(this.$context=WH(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ao(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),p=bc(s),m=[],y=a.setContext(this.getContext()),_=y.display?y.width:0,x=_/2,v=function(H){return po(r,H,_)};let w,E,R,C,M,T,b,k,A,O,I,P;if(o==="top")w=v(this.bottom),T=this.bottom-p,k=w-x,O=v(e.top)+x,P=e.bottom;else if(o==="bottom")w=v(this.top),O=e.top,P=v(e.bottom)-x,T=w+x,k=this.top+p;else if(o==="left")w=v(this.right),M=this.right-p,b=w-x,A=v(e.left)+x,I=e.right;else if(o==="right")w=v(this.left),A=e.left,I=v(e.right)-x,M=w+x,b=this.left+p;else if(n==="x"){if(o==="center")w=v((e.top+e.bottom)/2+.5);else if(Ie(o)){const H=Object.keys(o)[0],Y=o[H];w=v(this.chart.scales[H].getPixelForValue(Y))}O=e.top,P=e.bottom,T=w+x,k=T+p}else if(n==="y"){if(o==="center")w=v((e.left+e.right)/2);else if(Ie(o)){const H=Object.keys(o)[0],Y=o[H];w=v(this.chart.scales[H].getPixelForValue(Y))}M=w-x,b=M-p,A=e.left,I=e.right}const B=we(i.ticks.maxTicksLimit,f),z=Math.max(1,Math.ceil(f/B));for(E=0;E<f;E+=z){const H=this.getContext(E),Y=s.setContext(H),$=a.setContext(H),J=Y.lineWidth,Z=Y.color,ye=$.dash||[],pe=$.dashOffset,xe=Y.tickWidth,We=Y.tickColor,tt=Y.tickBorderDash||[],He=Y.tickBorderDashOffset;R=zH(this,E,l),R!==void 0&&(C=po(r,R,J),c?M=b=A=I=C:T=k=O=P=C,m.push({tx1:M,ty1:T,tx2:b,ty2:k,x1:A,y1:O,x2:I,y2:P,width:J,color:Z,borderDash:ye,borderDashOffset:pe,tickWidth:xe,tickColor:We,tickBorderDash:tt,tickBorderDashOffset:He}))}return this._ticksLength=f,this._borderValue=w,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=s,p=bc(r.grid),m=p+u,y=f?-u:m,_=-Ao(this.labelRotation),x=[];let v,w,E,R,C,M,T,b,k,A,O,I,P="middle";if(i==="top")M=this.bottom-y,T=this._getXAxisLabelAlignment();else if(i==="bottom")M=this.top+y,T=this._getXAxisLabelAlignment();else if(i==="left"){const z=this._getYAxisLabelAlignment(p);T=z.textAlign,C=z.x}else if(i==="right"){const z=this._getYAxisLabelAlignment(p);T=z.textAlign,C=z.x}else if(n==="x"){if(i==="center")M=(e.top+e.bottom)/2+m;else if(Ie(i)){const z=Object.keys(i)[0],H=i[z];M=this.chart.scales[z].getPixelForValue(H)+m}T=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")C=(e.left+e.right)/2-m;else if(Ie(i)){const z=Object.keys(i)[0],H=i[z];C=this.chart.scales[z].getPixelForValue(H)}T=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?P="top":l==="end"&&(P="bottom"));const B=this._getLabelSizes();for(v=0,w=a.length;v<w;++v){E=a[v],R=E.label;const z=s.setContext(this.getContext(v));b=this.getPixelForTick(v)+s.labelOffset,k=this._resolveTickFontOptions(v),A=k.lineHeight,O=Rt(R)?R.length:1;const H=O/2,Y=z.color,$=z.textStrokeColor,J=z.textStrokeWidth;let Z=T;o?(C=b,T==="inner"&&(v===w-1?Z=this.options.reverse?"left":"right":v===0?Z=this.options.reverse?"right":"left":Z="center"),i==="top"?c==="near"||_!==0?I=-O*A+A/2:c==="center"?I=-B.highest.height/2-H*A+A:I=-B.highest.height+A/2:c==="near"||_!==0?I=A/2:c==="center"?I=B.highest.height/2-H*A:I=B.highest.height-O*A,f&&(I*=-1),_!==0&&!z.showLabelBackdrop&&(C+=A/2*Math.sin(_))):(M=b,I=(1-O)*A/2);let ye;if(z.showLabelBackdrop){const pe=yr(z.backdropPadding),xe=B.heights[v],We=B.widths[v];let tt=I-pe.top,He=0-pe.left;switch(P){case"middle":tt-=xe/2;break;case"bottom":tt-=xe;break}switch(T){case"center":He-=We/2;break;case"right":He-=We;break;case"inner":v===w-1?He-=We:v>0&&(He-=We/2);break}ye={left:He,top:tt,width:We+pe.width,height:xe+pe.height,color:z.backdropColor}}x.push({label:R,font:k,textOffset:I,options:{rotation:_,color:Y,strokeColor:$,strokeWidth:J,textAlign:Z,textBaseline:P,translation:[C,M],backdrop:ye}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ao(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,p;this.isHorizontal()?(c=po(e,this.left,o)-o/2,u=po(e,this.right,a)+a/2,f=p=l):(f=po(e,this.top,o)-o/2,p=po(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Vm(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;Zu(r,c,0,u,l,a)}i&&Fm(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=yn(r.font),o=yr(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Ie(n)?(l+=o.bottom,Rt(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:p}=KH(this,l,n,a);Zu(e,r.text,0,0,s,{color:r.color,maxWidth:f,rotation:p,textAlign:qH(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=we(e.grid&&e.grid.z,-1),i=we(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Bl.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return yn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Bd{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;QH(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,GH(e,o,r),this.override&&Et.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Et[i]&&(delete Et[i][r],this.override&&delete Xo[r])}}function GH(t,e,n){const r=Yu(Object.create(null),[n?Et.get(n):{},Et.get(e),t.defaults]);Et.set(e,r),t.defaultRoutes&&YH(e,t.defaultRoutes),t.descriptors&&Et.describe(e,t.descriptors)}function YH(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Et.route(s,i,l,a)})}function QH(t){return"id"in t&&"defaults"in t}class XH{constructor(){this.controllers=new Bd(al,"datasets",!0),this.elements=new Bd(Js,"elements"),this.plugins=new Bd(Object,"plugins"),this.scales=new Bd(Bl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):je(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=aw(e);Xe(r["before"+i],[],r),n[e](r),Xe(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Hr=new XH;class JH{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Xe(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Me(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=we(r.options&&r.options.plugins,{}),s=ZH(r);return i===!1&&!n?[]:t8(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function ZH(t){const e={},n=[],r=Object.keys(Hr.plugins.items);for(let s=0;s<r.length;s++)n.push(Hr.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function e8(t,e){return!e&&t===!1?null:t===!0?{}:t}function t8(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=e8(r[l],i);c!==null&&s.push({plugin:a,options:n8(t.config,{plugin:a,local:n[l]},c,o)})}return s}function n8(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function l_(t,e){const n=Et.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function r8(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function i8(t,e){return t===e?"_index_":"_value_"}function k1(t){if(t==="x"||t==="y"||t==="r")return t}function s8(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function c_(t,...e){if(k1(t))return t;for(const n of e){const r=n.axis||s8(n.position)||t.length>1&&k1(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function I1(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function o8(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return I1(t,"x",n[0])||I1(t,"y",n[0])}return{}}function a8(t,e){const n=Xo[t.type]||{scales:{}},r=e.scales||{},i=l_(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Ie(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=c_(o,a,o8(o,t),Et.scales[a.type]),c=i8(l,i),u=n.scales||{};s[o]=au(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||l_(a,e),u=(Xo[a]||{}).scales||{};Object.keys(u).forEach(f=>{const p=r8(f,l),m=o[p+"AxisID"]||p;s[m]=s[m]||Object.create(null),au(s[m],[{axis:p},r[m],u[f]])})}),Object.keys(s).forEach(o=>{const a=s[o];au(a,[Et.scales[a.type],Et.scale])}),s}function $D(t){const e=t.options||(t.options={});e.plugins=we(e.plugins,{}),e.scales=a8(t,e)}function WD(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function l8(t){return t=t||{},t.data=WD(t.data),$D(t),t}const C1=new Map,HD=new Set;function zd(t,e){let n=C1.get(t);return n||(n=e(),C1.set(t,n),HD.add(n)),n}const Sc=(t,e,n)=>{const r=Tl(e,n);r!==void 0&&t.add(r)};class c8{constructor(e){this._config=l8(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=WD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),$D(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return zd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return zd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return zd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return zd(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(f=>Sc(l,e,f))),u.forEach(f=>Sc(l,i,f)),u.forEach(f=>Sc(l,Xo[s]||{},f)),u.forEach(f=>Sc(l,Et,f)),u.forEach(f=>Sc(l,o_,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),HD.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,Xo[n]||{},Et.datasets[n]||{},{type:n},Et,o_]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=A1(this._resolverCache,e,i);let l=o;if(h8(o,n)){s.$shared=!1,r=zs(r)?r():r;const c=this.createResolver(e,r,a);l=kl(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=A1(this._resolverCache,e,r);return Ie(n)?kl(s,n,void 0,i):s}}function A1(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:hw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const u8=t=>Ie(t)&&Object.getOwnPropertyNames(t).some(e=>zs(t[e]));function h8(t,e){const{isScriptable:n,isIndexable:r}=ED(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(zs(a)||u8(a))||o&&Rt(a))return!0}return!1}var d8="4.5.0";const f8=["top","bottom","left","right","chartArea"];function P1(t,e){return t==="top"||t==="bottom"||f8.indexOf(t)===-1&&e==="x"}function R1(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function N1(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Xe(n&&n.onComplete,[t],e)}function p8(t){const e=t.chart,n=e.options.animation;Xe(n&&n.onProgress,[t],e)}function qD(t){return pw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const kf={},D1=t=>{const e=qD(t);return Object.values(kf).filter(n=>n.canvas===e).pop()};function m8(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function g8(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var ns;let zm=(ns=class{static register(...e){Hr.add(...e),O1()}static unregister(...e){Hr.remove(...e),O1()}constructor(e,n){const r=this.config=new c8(n),i=qD(e),s=D1(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||OH(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=p9(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new JH,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=O9(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],kf[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}wi.listen(this,"complete",N1),wi.listen(this,"progress",p8),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Me(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Hr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():n1(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ZT(this.canvas,this.ctx),this}stop(){return wi.stop(this),this}resize(e,n){wi.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,n1(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Xe(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};je(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=c_(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),je(s,o=>{const a=o.options,l=a.id,c=c_(l,a),u=we(a.type,o.dtype);(a.position===void 0||P1(a.position,c)!==P1(o.dposition))&&(a.position=o.dposition),i[l]=!0;let f=null;if(l in r&&r[l].type===u)f=r[l];else{const p=Hr.getScale(u);f=new p({id:l,type:u,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),je(i,(o,a)=>{o||delete r[a]}),je(r,o=>{fr.configure(this,o,o.options),fr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(R1("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||l_(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Hr.getController(a),{datasetElementType:c,dataElementType:u}=Et.datasets[a];Object.assign(l,{dataElementType:Hr.getElement(u),datasetElementType:c&&Hr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){je(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),p=!i&&s.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||je(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(R1("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){je(this.scales,e=>{fr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!$T(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;m8(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!$T(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;fr.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],je(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,zs(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wi.has(this)?this.attached&&!wi.running(this)&&wi.start(this):(this.draw(),N1({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=OD(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Vm(n,i),e.controller.draw(),i&&Fm(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Ju(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=fH.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=ca(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);Qu(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),wi.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ZT(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete kf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};je(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){je(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},je(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Ap(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=x9(e),c=g8(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Xe(s.onHover,[e,a,this],this),l&&Xe(s.onClick,[e,a,this],this));const u=!Ap(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},de(ns,"defaults",Et),de(ns,"instances",kf),de(ns,"overrides",Xo),de(ns,"registry",Hr),de(ns,"version",d8),de(ns,"getChart",D1),ns);function O1(){return je(zm.instances,t=>t._plugins.invalidate())}function KD(t,e,n=e){t.lineCap=we(n.borderCapStyle,e.borderCapStyle),t.setLineDash(we(n.borderDash,e.borderDash)),t.lineDashOffset=we(n.borderDashOffset,e.borderDashOffset),t.lineJoin=we(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=we(n.borderWidth,e.borderWidth),t.strokeStyle=we(n.borderColor,e.borderColor)}function y8(t,e,n){t.lineTo(n.x,n.y)}function v8(t){return t.stepped?G9:t.tension||t.cubicInterpolationMode==="monotone"?Y9:y8}function GD(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function _8(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=GD(i,n,r),u=v8(s);let{move:f=!0,reverse:p}=r||{},m,y,_;for(m=0;m<=c;++m)y=i[(a+(p?c-m:m))%o],!y.skip&&(f?(t.moveTo(y.x,y.y),f=!1):u(t,_,y,p,s.stepped),_=y);return l&&(y=i[(a+(p?c:0))%o],u(t,_,y,p,s.stepped)),!!l}function x8(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=GD(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,f=0,p,m,y,_,x,v;const w=R=>(o+(c?a-R:R))%s,E=()=>{_!==x&&(t.lineTo(u,x),t.lineTo(u,_),t.lineTo(u,v))};for(l&&(m=i[w(0)],t.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=i[w(p)],m.skip)continue;const R=m.x,C=m.y,M=R|0;M===y?(C<_?_=C:C>x&&(x=C),u=(f*u+R)/++f):(E(),t.lineTo(R,C),y=M,f=0,_=x=C),v=C}E()}function u_(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?x8:_8}function w8(t){return t.stepped?IW:t.tension||t.cubicInterpolationMode==="monotone"?CW:wo}function b8(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),KD(t,e.options),t.stroke(i)}function S8(t,e,n,r){const{segments:i,options:s}=e,o=u_(e);for(const a of i)KD(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const E8=typeof Path2D=="function";function T8(t,e,n,r){E8&&!e.options.segment?b8(t,e,n,r):S8(t,e,n,r)}class xs extends Js{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;_W(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=OW(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=DD(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=w8(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:f,end:p}=o[c],m=s[f],y=s[p];if(m===y){a.push(m);continue}const _=Math.abs((i-m[n])/(y[n]-m[n])),x=l(m,y,_,r.stepped);x[n]=e[n],a.push(x)}return a.length===1?a[0]:a}pathSegment(e,n,r){return u_(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=u_(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),T8(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}de(xs,"id","line"),de(xs,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),de(xs,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),de(xs,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function M1(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class If extends Js{constructor(n){super();de(this,"parsed");de(this,"skip");de(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return M1(this,n,"x",r)}inYRange(n,r){return M1(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Ju(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,a_(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}de(If,"id","point"),de(If,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),de(If,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function YD(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,f;return t.horizontal?(f=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-f,u=r+f):(f=s/2,a=n-f,l=n+f,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function ws(t,e,n,r){return t?0:er(e,n,r)}function k8(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=SD(r);return{t:ws(i.top,s.top,0,n),r:ws(i.right,s.right,0,e),b:ws(i.bottom,s.bottom,0,n),l:ws(i.left,s.left,0,e)}}function I8(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=sl(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Ie(i);return{topLeft:ws(!l||a.top||a.left,s.topLeft,0,o),topRight:ws(!l||a.top||a.right,s.topRight,0,o),bottomLeft:ws(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:ws(!l||a.bottom||a.right,s.bottomRight,0,o)}}function C8(t){const e=YD(t),n=e.right-e.left,r=e.bottom-e.top,i=k8(t,n/2,r/2),s=I8(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function fy(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&YD(t,r);return a&&(i||_s(e,a.left,a.right))&&(s||_s(n,a.top,a.bottom))}function A8(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function P8(t,e){t.rect(e.x,e.y,e.w,e.h)}function py(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Cf extends Js{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=C8(this),a=A8(o.radius)?Np:P8;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,py(o,n,s)),e.clip(),a(e,py(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,py(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return fy(this,e,n,r)}inXRange(e,n){return fy(this,e,null,n)}inYRange(e,n){return fy(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}de(Cf,"id","bar"),de(Cf,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),de(Cf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function R8(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=$m(l,c,i);const u=h_(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const f=DD(e,u);for(const p of f){const m=h_(n,s[p.start],s[p.end],p.loop),y=ND(a,i,m);for(const _ of y)o.push({source:_,target:p,start:{[n]:j1(u,m,"start",Math.max)},end:{[n]:j1(u,m,"end",Math.min)}})}}return o}function h_(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=qr(i),s=qr(s)),{property:t,start:i,end:s}}function N8(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=$m(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function $m(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function j1(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function QD(t,e){let n=[],r=!1;return Rt(t)?(r=!0,n=t):n=N8(t,e),n.length?new xs({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function L1(t){return t&&t.fill!==!1}function D8(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Sn(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function O8(t,e,n){const r=V8(t);if(Ie(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Sn(i)&&Math.floor(i)===i?M8(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function M8(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function j8(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Ie(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function L8(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Ie(t)?r=t.value:r=e.getBaseValue(),r}function V8(t){const e=t.options,n=e.fill;let r=we(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function F8(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=U8(e,n);a.push(QD({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)B8(i,o[u],a)}return new xs({points:i,options:{}})}function U8(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function B8(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=z8(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function z8(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],f=o[u.start][n],p=o[u.end][n];if(_s(i,f,p)){a=i===f,l=i===p;break}}return{first:a,last:l,point:r}}class XD{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Nr},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function $8(t){const{chart:e,fill:n,line:r}=t;if(Sn(n))return W8(e,n);if(n==="stack")return F8(t);if(n==="shape")return!0;const i=H8(t);return i instanceof XD?i:QD(i,r)}function W8(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function H8(t){return(t.scale||{}).getPointPositionForValue?K8(t):q8(t)}function q8(t){const{scale:e={},fill:n}=t,r=j8(n,e);if(Sn(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function K8(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=L8(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new XD({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function my(t,e,n){const r=$8(e),{chart:i,index:s,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,f=c.backgroundColor,{above:p=f,below:m=f}=u||{},y=i.getDatasetMeta(s),_=OD(i,y);r&&o.points.length&&(Vm(t,n),G8(t,{line:o,target:r,above:p,below:m,area:n,scale:a,axis:l,clip:_}),Fm(t))}function G8(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=s;s!==i&&(c==="x"?(V1(t,r,o.top),gy(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),V1(t,r,o.bottom)):c==="y"&&(F1(t,r,o.left),gy(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),F1(t,r,o.right),u=i)),gy(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function V1(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],f=i[$m(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function F1(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],f=i[$m(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,f.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function gy(t,e){const{line:n,target:r,property:i,color:s,scale:o,clip:a}=e,l=R8(n,r,i);for(const{source:c,target:u,start:f,end:p}of l){const{style:{backgroundColor:m=s}={}}=c,y=r!==!0;t.save(),t.fillStyle=m,Y8(t,o,a,y&&h_(i,f,p)),t.beginPath();const _=!!n.pathSegment(t,c);let x;if(y){_?t.closePath():U1(t,r,p,i);const v=!!r.pathSegment(t,u,{move:_,reverse:!0});x=_&&v,x||U1(t,r,f,i)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function Y8(t,e,n,r){const i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let l,c,u,f;s==="x"?(l=o,c=i.top,u=a,f=i.bottom):(l=i.left,c=o,u=i.right,f=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),f=Math.min(f,n.bottom)),t.rect(l,c,u-l,f-c),t.clip()}}function U1(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var Q8={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof xs&&(l={visible:t.isDatasetVisible(o),index:o,fill:O8(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=D8(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&my(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;L1(s)&&my(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!L1(r)||n.drawTime!=="beforeDatasetDraw"||my(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const B1=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},X8=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class z1 extends Js{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Xe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=yn(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=B1(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let f=e;s.textAlign="left",s.textBaseline="middle";let p=-1,m=-u;return this.legendItems.forEach((y,_)=>{const x=r+n/2+s.measureText(y.text).width;(_===0||c[c.length-1]+x+2*a>o)&&(f+=u,c[c.length-(_>0?0:1)]=0,m+=u,p++),l[_]={left:0,top:m,row:p,width:x,height:i},c[c.length-1]+=x+a}),f}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let f=a,p=0,m=0,y=0,_=0;return this.legendItems.forEach((x,v)=>{const{itemWidth:w,itemHeight:E}=J8(r,n,s,x,i);v>0&&m+E+2*a>u&&(f+=p+a,c.push({width:p,height:m}),y+=p+a,_++,p=m=0),l[v]={left:y,top:m,col:_,width:w,height:E},p=Math.max(p,w),m+=E+a}),f+=p,c.push({width:p,height:m}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=ol(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=dn(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=dn(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=dn(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=dn(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Vm(e,this),this._draw(),Fm(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Et.color,l=ol(e.rtl,this.left,this.width),c=yn(o.font),{padding:u}=o,f=c.size,p=f/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:y,boxHeight:_,itemHeight:x}=B1(o,f),v=function(M,T,b){if(isNaN(y)||y<=0||isNaN(_)||_<0)return;i.save();const k=we(b.lineWidth,1);if(i.fillStyle=we(b.fillStyle,a),i.lineCap=we(b.lineCap,"butt"),i.lineDashOffset=we(b.lineDashOffset,0),i.lineJoin=we(b.lineJoin,"miter"),i.lineWidth=k,i.strokeStyle=we(b.strokeStyle,a),i.setLineDash(we(b.lineDash,[])),o.usePointStyle){const A={radius:_*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:k},O=l.xPlus(M,y/2),I=T+p;wD(i,A,O,I,o.pointStyleWidth&&y)}else{const A=T+Math.max((f-_)/2,0),O=l.leftForLtr(M,y),I=sl(b.borderRadius);i.beginPath(),Object.values(I).some(P=>P!==0)?Np(i,{x:O,y:A,w:y,h:_,radius:I}):i.rect(O,A,y,_),i.fill(),k!==0&&i.stroke()}i.restore()},w=function(M,T,b){Zu(i,b.text,M,T+x/2,c,{strikethrough:b.hidden,textAlign:l.textAlign(b.textAlign)})},E=this.isHorizontal(),R=this._computeTitleHeight();E?m={x:dn(s,this.left+u,this.right-r[0]),y:this.top+u+R,line:0}:m={x:this.left+u,y:dn(s,this.top+R+u,this.bottom-n[0].height),line:0},AD(this.ctx,e.textDirection);const C=x+u;this.legendItems.forEach((M,T)=>{i.strokeStyle=M.fontColor,i.fillStyle=M.fontColor;const b=i.measureText(M.text).width,k=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),A=y+p+b;let O=m.x,I=m.y;l.setWidth(this.width),E?T>0&&O+A+u>this.right&&(I=m.y+=C,m.line++,O=m.x=dn(s,this.left+u,this.right-r[m.line])):T>0&&I+C>this.bottom&&(O=m.x=O+n[m.line].width+u,m.line++,I=m.y=dn(s,this.top+R+u,this.bottom-n[m.line].height));const P=l.x(O);if(v(P,I,M),O=M9(k,O+y+p,E?O+A:this.right,e.rtl),w(l.x(O),I,M),E)m.x+=A+u;else if(typeof M.text!="string"){const B=c.lineHeight;m.y+=JD(M,B)+u}else m.y+=C}),PD(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=yn(n.font),i=yr(n.padding);if(!n.display)return;const s=ol(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,f=dn(e.align,f,this.right-p);else{const y=this.columnSizes.reduce((_,x)=>Math.max(_,x.height),0);u=c+dn(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const m=dn(a,f,f+p);o.textAlign=s.textAlign(cw(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Zu(o,n.text,m,u,r)}_computeTitleHeight(){const e=this.options.title,n=yn(e.font),r=yr(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(_s(e,this.left,this.right)&&_s(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],_s(e,i.left,i.left+i.width)&&_s(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!tq(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=X8(i,r);i&&!s&&Xe(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Xe(n.onHover,[e,r,this],this)}else r&&Xe(n.onClick,[e,r,this],this)}}function J8(t,e,n,r,i){const s=Z8(r,t,e,n),o=eq(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Z8(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function eq(t,e,n){let r=t;return typeof e.text!="string"&&(r=JD(e,n)),r}function JD(t,e){const n=t.text?t.text.length:0;return e*n}function tq(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var nq={id:"legend",_element:z1,start(t,e,n){const r=t.legend=new z1({ctx:t.ctx,options:n,chart:t});fr.configure(t,r,n),fr.addBox(t,r)},stop(t){fr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;fr.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=yr(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ZD extends Js{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Rt(r.text)?r.text.length:1;this._padding=yr(r.padding);const s=i*yn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=dn(a,r,s),f=n+e,c=s-r):(o.position==="left"?(u=r+e,f=dn(a,i,n),l=Wt*-.5):(u=s-e,f=dn(a,n,i),l=Wt*.5),c=i-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=yn(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Zu(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:cw(n.align),textBaseline:"middle",translation:[o,a]})}}function rq(t,e){const n=new ZD({ctx:t.ctx,options:e,chart:t});fr.configure(t,n,e),fr.addBox(t,n),t.titleBlock=n}var iq={id:"title",_element:ZD,start(t,e,n){rq(t,n)},stop(t){const e=t.titleBlock;fr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;fr.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Fc={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=s_(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function $r(t,e){return e&&(Rt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function bi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function sq(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function $1(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=yn(e.bodyFont),c=yn(e.titleFont),u=yn(e.footerFont),f=s.length,p=i.length,m=r.length,y=yr(e.padding);let _=y.height,x=0,v=r.reduce((R,C)=>R+C.before.length+C.lines.length+C.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,f&&(_+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),v){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=m*R+(v-m)*l.lineHeight+(v-1)*e.bodySpacing}p&&(_+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let w=0;const E=function(R){x=Math.max(x,n.measureText(R).width+w)};return n.save(),n.font=c.string,je(t.title,E),n.font=l.string,je(t.beforeBody.concat(t.afterBody),E),w=e.displayColors?o+2+e.boxPadding:0,je(r,R=>{je(R.before,E),je(R.lines,E),je(R.after,E)}),w=0,n.font=u.string,je(t.footer,E),n.restore(),x+=y.width,{width:x,height:_}}function oq(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function aq(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function lq(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),aq(c,t,e,n)&&(c="center"),c}function W1(t,e,n){const r=n.yAlign||e.yAlign||oq(t,n);return{xAlign:n.xAlign||e.xAlign||lq(t,e,n,r),yAlign:r}}function cq(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function uq(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function H1(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:m}=sl(o);let y=cq(e,a);const _=uq(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,p)+i:a==="right"&&(y+=Math.max(f,m)+i),{x:er(y,0,r.width-e.width),y:er(_,0,r.height-e.height)}}function $d(t,e,n){const r=yr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function q1(t){return $r([],bi(t))}function hq(t,e,n){return ca(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function K1(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const e2={beforeTitle:_i,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:_i,beforeBody:_i,beforeLabel:_i,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Me(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:_i,afterBody:_i,beforeFooter:_i,footer:_i,afterFooter:_i};function On(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?e2[e].call(n,r):i}class d_ extends Js{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new MD(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=hq(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=On(r,"beforeTitle",this,e),s=On(r,"title",this,e),o=On(r,"afterTitle",this,e);let a=[];return a=$r(a,bi(i)),a=$r(a,bi(s)),a=$r(a,bi(o)),a}getBeforeBody(e,n){return q1(On(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return je(e,s=>{const o={before:[],lines:[],after:[]},a=K1(r,s);$r(o.before,bi(On(a,"beforeLabel",this,s))),$r(o.lines,On(a,"label",this,s)),$r(o.after,bi(On(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return q1(On(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=On(r,"beforeFooter",this,e),s=On(r,"footer",this,e),o=On(r,"afterFooter",this,e);let a=[];return a=$r(a,bi(i)),a=$r(a,bi(s)),a=$r(a,bi(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(sq(this.chart,n[l]));return e.filter&&(a=a.filter((u,f,p)=>e.filter(u,f,p,r))),e.itemSort&&(a=a.sort((u,f)=>e.itemSort(u,f,r))),je(a,u=>{const f=K1(e.callbacks,u);i.push(On(f,"labelColor",this,u)),s.push(On(f,"labelPointStyle",this,u)),o.push(On(f,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Fc[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=$1(this,r),c=Object.assign({},a,l),u=W1(this.chart,r,c),f=H1(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=sl(a),{x:p,y:m}=e,{width:y,height:_}=n;let x,v,w,E,R,C;return s==="center"?(R=m+_/2,i==="left"?(x=p,v=x-o,E=R+o,C=R-o):(x=p+y,v=x+o,E=R-o,C=R+o),w=x):(i==="left"?v=p+Math.max(l,u)+o:i==="right"?v=p+y-Math.max(c,f)-o:v=this.caretX,s==="top"?(E=m,R=E-o,x=v-o,w=v+o):(E=m+_,R=E+o,x=v+o,w=v-o),C=E),{x1:x,x2:v,x3:w,y1:E,y2:R,y3:C}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=ol(r.rtl,this.x,this.width);for(e.x=$d(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=yn(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=yn(s.bodyFont),f=$d(this,"left",s),p=i.x(f),m=l<u.lineHeight?(u.lineHeight-l)/2:0,y=n.y+m;if(s.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=i.leftForLtr(p,c)+c/2,v=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,a_(e,_,x,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,a_(e,_,x,v)}else{e.lineWidth=Ie(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const _=i.leftForLtr(p,c),x=i.leftForLtr(i.xPlus(p,1),c-2),v=sl(o.borderRadius);Object.values(v).some(w=>w!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Np(e,{x:_,y,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Np(e,{x,y:y+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(_,y,c,l),e.strokeRect(_,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,f=yn(r.bodyFont);let p=f.lineHeight,m=0;const y=ol(r.rtl,this.x,this.width),_=function(b){n.fillText(b,y.x(e.x+m),e.y+p/2),e.y+=p+s},x=y.textAlign(o);let v,w,E,R,C,M,T;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=$d(this,x,r),n.fillStyle=r.bodyColor,je(this.beforeBody,_),m=a&&x!=="right"?o==="center"?c/2+u:c+2+u:0,R=0,M=i.length;R<M;++R){for(v=i[R],w=this.labelTextColors[R],n.fillStyle=w,je(v.before,_),E=v.lines,a&&E.length&&(this._drawColorBox(n,e,R,y,r),p=Math.max(f.lineHeight,l)),C=0,T=E.length;C<T;++C)_(E[C]),p=f.lineHeight;je(v.after,_)}m=0,p=f.lineHeight,je(this.afterBody,_),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=ol(r.rtl,this.x,this.width);for(e.x=$d(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=yn(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:f,topRight:p,bottomLeft:m,bottomRight:y}=sl(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-y),n.quadraticCurveTo(a+c,l+u,a+c-y,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+u),n.quadraticCurveTo(a,l+u,a,l+u-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Fc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=$1(this,e),l=Object.assign({},o,this._size),c=W1(n,e,l),u=H1(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=yr(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),AD(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),PD(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Ap(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!Ap(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Fc[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}de(d_,"positioners",Fc);var dq={id:"tooltip",_element:d_,positioners:Fc,afterInit(t,e,n){n&&(t.tooltip=new d_({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:e2},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const fq=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function pq(t,e,n,r){const i=t.indexOf(e);if(i===-1)return fq(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const mq=(t,e)=>t===null?null:er(Math.round(t),0,e);function G1(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class f_ extends Bl{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Me(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:pq(r,e,we(n,e),this._addedLabels),mq(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return G1.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}de(f_,"id","category"),de(f_,"defaults",{ticks:{callback:G1}});function gq(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:p}=t,m=s||1,y=u-1,{min:_,max:x}=e,v=!Me(o),w=!Me(a),E=!Me(c),R=(x-_)/(f+1);let C=HT((x-_)/y/m)*m,M,T,b,k;if(C<1e-14&&!v&&!w)return[{value:_},{value:x}];k=Math.ceil(x/C)-Math.floor(_/C),k>y&&(C=HT(k*C/y/m)*m),Me(l)||(M=Math.pow(10,l),C=Math.ceil(C*M)/M),i==="ticks"?(T=Math.floor(_/C)*C,b=Math.ceil(x/C)*C):(T=_,b=x),v&&w&&s&&T9((a-o)/s,C/1e3)?(k=Math.round(Math.min((a-o)/C,u)),C=(a-o)/k,T=o,b=a):E?(T=v?o:T,b=w?a:b,k=c-1,C=(b-T)/k):(k=(b-T)/C,lu(k,Math.round(k),C/1e3)?k=Math.round(k):k=Math.ceil(k));const A=Math.max(qT(C),qT(T));M=Math.pow(10,Me(l)?A:l),T=Math.round(T*M)/M,b=Math.round(b*M)/M;let O=0;for(v&&(p&&T!==o?(n.push({value:o}),T<o&&O++,lu(Math.round((T+O*C)*M)/M,o,Y1(o,R,t))&&O++):T<o&&O++);O<k;++O){const I=Math.round((T+O*C)*M)/M;if(w&&I>a)break;n.push({value:I})}return w&&p&&b!==a?n.length&&lu(n[n.length-1].value,a,Y1(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!w||b===a)&&n.push({value:b}),n}function Y1(t,e,{horizontal:n,minRotation:r}){const i=Ao(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class yq extends Bl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Me(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=ri(i),c=ri(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=gq(i,s);return e.bounds==="ticks"&&k9(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return _D(e,this.chart.options.locale,this.options.ticks.format)}}class p_ extends yq{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Sn(e)?e:0,this.max=Sn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=Ao(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}de(p_,"id","linear"),de(p_,"defaults",{ticks:{callback:xD.formatters.numeric}});const Wm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fn=Object.keys(Wm);function Q1(t,e){return t-e}function X1(t,e){if(Me(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Sn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Xu(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function J1(t,e,n,r){const i=Fn.length;for(let s=Fn.indexOf(t);s<i-1;++s){const o=Wm[Fn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Fn[s]}return Fn[i-1]}function vq(t,e,n,r,i){for(let s=Fn.length-1;s>=Fn.indexOf(n);s--){const o=Fn[s];if(Wm[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Fn[n?Fn.indexOf(n):0]}function _q(t){for(let e=Fn.indexOf(t)+1,n=Fn.length;e<n;++e)if(Wm[Fn[e]].common)return Fn[e]}function Z1(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=lw(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function xq(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function ek(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:xq(t,r,i,n)}class Mp extends Bl{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new lH._date(e.adapters.date);i.init(n),au(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:X1(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Sn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Sn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=N9(i,s,o);return this._unit=n.unit||(r.autoSkip?J1(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):vq(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:_q(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),ek(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=er(n,0,o),r=er(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||J1(s.minUnit,n,r,this._getLabelCapacity(n)),a=we(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Xu(l)||l===!0,u={};let f=n,p,m;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(p=f,m=0;p<r;p=+e.add(p,a,o),m++)Z1(u,p,y);return(p===r||i.bounds==="ticks"||m===1)&&Z1(u,p,y),Object.keys(u).sort(Q1).map(_=>+_)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Xe(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],p=r[n],m=c&&f&&p&&p.major;return this._adapter.format(e,i||(m?f:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=Ao(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,ek(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(X1(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return gD(e.sort(Q1))}}de(Mp,"id","time"),de(Mp,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Wd(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Po(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Po(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class tk extends Mp{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Wd(n,this.min),this._tableRange=Wd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(Wd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return Wd(this._table,r*this._tableRange+this._minPos,!0)}}de(tk,"id","timeseries"),de(tk,"defaults",Mp.defaults);const t2="label";function nk(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function wq(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function n2(t,e){t.labels=e}function r2(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t2;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function bq(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t2;const n={labels:[],datasets:[]};return n2(n,t.labels),r2(n,t.datasets,e),n}function Sq(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:f,...p}=t,m=D.useRef(null),y=D.useRef(null),_=()=>{m.current&&(y.current=new zm(m.current,{type:o,data:bq(a,s),options:l&&{...l},plugins:c}),nk(e,y.current))},x=()=>{nk(e,null),y.current&&(y.current.destroy(),y.current=null)};return D.useEffect(()=>{!i&&y.current&&l&&wq(y.current,l)},[i,l]),D.useEffect(()=>{!i&&y.current&&n2(y.current.config.data,a.labels)},[i,a.labels]),D.useEffect(()=>{!i&&y.current&&a.datasets&&r2(y.current.config.data,a.datasets,s)},[i,a.datasets]),D.useEffect(()=>{y.current&&(i?(x(),setTimeout(_)):y.current.update(f))},[i,l,a.labels,a.datasets,f]),D.useEffect(()=>{y.current&&(x(),setTimeout(_))},[o]),D.useEffect(()=>(_(),()=>x()),[]),rt.createElement("canvas",{ref:m,role:"img",height:n,width:r,...p},u)}const Eq=D.forwardRef(Sq);function i2(t,e){return zm.register(e),D.forwardRef((n,r)=>rt.createElement(Eq,{...n,ref:r,type:t}))}const Tq=i2("line",Ef),kq=i2("bar",Sf),yw=D.createContext({});function vw(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const Hm=D.createContext(null),_w=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class Iq extends D.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Cq({children:t,isPresent:e}){const n=D.useId(),r=D.useRef(null),i=D.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=D.useContext(_w);return D.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),d.jsx(Iq,{isPresent:e,childRef:r,sizeRef:i,children:D.cloneElement(t,{ref:r})})}const Aq=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=vw(Pq),l=D.useId(),c=D.useCallback(f=>{a.set(f,!0);for(const p of a.values())if(!p)return;r&&r()},[a,r]),u=D.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:f=>(a.set(f,!1),()=>a.delete(f))}),s?[Math.random(),c]:[n,c]);return D.useMemo(()=>{a.forEach((f,p)=>a.set(p,!1))},[n]),D.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=d.jsx(Cq,{isPresent:n,children:t})),d.jsx(Hm.Provider,{value:u,children:t})};function Pq(){return new Map}function s2(t=!0){const e=D.useContext(Hm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=D.useId();D.useEffect(()=>{t&&i(s)},[t]);const o=D.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Hd=t=>t.key||"";function rk(t){const e=[];return D.Children.forEach(t,n=>{D.isValidElement(n)&&e.push(n)}),e}const xw=typeof window<"u",o2=xw?D.useLayoutEffect:D.useEffect,zl=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=s2(o),c=D.useMemo(()=>rk(t),[t]),u=o&&!a?[]:c.map(Hd),f=D.useRef(!0),p=D.useRef(c),m=vw(()=>new Map),[y,_]=D.useState(c),[x,v]=D.useState(c);o2(()=>{f.current=!1,p.current=c;for(let R=0;R<x.length;R++){const C=Hd(x[R]);u.includes(C)?m.delete(C):m.get(C)!==!0&&m.set(C,!1)}},[x,u.length,u.join("-")]);const w=[];if(c!==y){let R=[...c];for(let C=0;C<x.length;C++){const M=x[C],T=Hd(M);u.includes(T)||(R.splice(C,0,M),w.push(M))}s==="wait"&&w.length&&(R=w),v(rk(R)),_(c);return}const{forceRender:E}=D.useContext(yw);return d.jsx(d.Fragment,{children:x.map(R=>{const C=Hd(R),M=o&&!a?!1:c===x||u.includes(C),T=()=>{if(m.has(C))m.set(C,!0);else return;let b=!0;m.forEach(k=>{k||(b=!1)}),b&&(E==null||E(),v(p.current),o&&(l==null||l()),r&&r())};return d.jsx(Aq,{isPresent:M,initial:!f.current||n?void 0:!1,custom:M?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:M?void 0:T,children:R},C)})})},nr=t=>t;let a2=nr;function ww(t){let e;return()=>(e===void 0&&(e=t()),e)}const Cl=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},ji=t=>t*1e3,Li=t=>t/1e3,Rq={useManualTiming:!1};function Nq(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,f=!1)=>{const m=f&&r?e:n;return u&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const qd=["read","resolveKeyframes","update","preRender","render","postRender"],Dq=40;function l2(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=qd.reduce((v,w)=>(v[w]=Nq(s),v),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:f,postRender:p}=o,m=()=>{const v=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,Dq),1),i.timestamp=v,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(m))},y=()=>{n=!0,r=!0,i.isProcessing||t(m)};return{schedule:qd.reduce((v,w)=>{const E=o[w];return v[w]=(R,C=!1,M=!1)=>(n||y(),E.schedule(R,C,M)),v},{}),cancel:v=>{for(let w=0;w<qd.length;w++)o[qd[w]].cancel(v)},state:i,steps:o}}const{schedule:Ze,cancel:$s,state:Gt,steps:yy}=l2(typeof requestAnimationFrame<"u"?requestAnimationFrame:nr,!0),c2=D.createContext({strict:!1}),ik={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Al={};for(const t in ik)Al[t]={isEnabled:e=>ik[t].some(n=>!!e[n])};function Oq(t){for(const e in t)Al[e]={...Al[e],...t[e]}}const Mq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function jp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Mq.has(t)}let u2=t=>!jp(t);function jq(t){t&&(u2=e=>e.startsWith("on")?!jp(e):t(e))}try{jq(require("@emotion/is-prop-valid").default)}catch{}function Lq(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(u2(i)||n===!0&&jp(i)||!e&&!jp(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Vq(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const qm=D.createContext({});function th(t){return typeof t=="string"||Array.isArray(t)}function Km(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const bw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Sw=["initial",...bw];function Gm(t){return Km(t.animate)||Sw.some(e=>th(t[e]))}function h2(t){return!!(Gm(t)||t.variants)}function Fq(t,e){if(Gm(t)){const{initial:n,animate:r}=t;return{initial:n===!1||th(n)?n:void 0,animate:th(r)?r:void 0}}return t.inherit!==!1?e:{}}function Uq(t){const{initial:e,animate:n}=Fq(t,D.useContext(qm));return D.useMemo(()=>({initial:e,animate:n}),[sk(e),sk(n)])}function sk(t){return Array.isArray(t)?t.join(" "):t}const Bq=Symbol.for("motionComponentSymbol");function za(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function zq(t,e,n){return D.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):za(n)&&(n.current=r))},[e])}const Ew=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$q="framerAppearId",d2="data-"+Ew($q),{schedule:Tw}=l2(queueMicrotask,!1),f2=D.createContext({});function Wq(t,e,n,r,i){var s,o;const{visualElement:a}=D.useContext(qm),l=D.useContext(c2),c=D.useContext(Hm),u=D.useContext(_w).reducedMotion,f=D.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const p=f.current,m=D.useContext(f2);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&Hq(f.current,n,i,m);const y=D.useRef(!1);D.useInsertionEffect(()=>{p&&y.current&&p.update(n,c)});const _=n[d2],x=D.useRef(!!_&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,_))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,_)));return o2(()=>{p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),Tw.render(p.render),x.current&&p.animationState&&p.animationState.animateChanges())}),D.useEffect(()=>{p&&(!x.current&&p.animationState&&p.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,_)}),x.current=!1))}),p}function Hq(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:p2(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&za(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function p2(t){if(t)return t.options.allowProjection!==!1?t.projection:p2(t.parent)}function qq({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&Oq(t);function a(c,u){let f;const p={...D.useContext(_w),...c,layoutId:Kq(c)},{isStatic:m}=p,y=Uq(c),_=r(c,m);if(!m&&xw){Gq();const x=Yq(p);f=x.MeasureLayout,y.visualElement=Wq(i,_,p,e,x.ProjectionNode)}return d.jsxs(qm.Provider,{value:y,children:[f&&y.visualElement?d.jsx(f,{visualElement:y.visualElement,...p}):null,n(i,c,zq(_,y.visualElement,u),_,m,y.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=D.forwardRef(a);return l[Bq]=i,l}function Kq({layoutId:t}){const e=D.useContext(yw).id;return e&&t!==void 0?e+"-"+t:t}function Gq(t,e){D.useContext(c2).strict}function Yq(t){const{drag:e,layout:n}=Al;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Qq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function kw(t){return typeof t!="string"||t.includes("-")?!1:!!(Qq.indexOf(t)>-1||/[A-Z]/u.test(t))}function ok(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Iw(t,e,n,r){if(typeof e=="function"){const[i,s]=ok(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=ok(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const m_=t=>Array.isArray(t),Xq=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),Jq=t=>m_(t)?t[t.length-1]||0:t,vn=t=>!!(t&&t.getVelocity);function Af(t){const e=vn(t)?t.get():t;return Xq(e)?e.toValue():e}function Zq({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:e7(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const m2=t=>(e,n)=>{const r=D.useContext(qm),i=D.useContext(Hm),s=()=>Zq(t,e,r,i);return n?s():vw(s)};function e7(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=Af(s[p]);let{initial:o,animate:a}=t;const l=Gm(t),c=h2(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const f=u?a:o;if(f&&typeof f!="boolean"&&!Km(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const y=Iw(t,p[m]);if(y){const{transitionEnd:_,transition:x,...v}=y;for(const w in v){let E=v[w];if(Array.isArray(E)){const R=u?E.length-1:0;E=E[R]}E!==null&&(i[w]=E)}for(const w in _)i[w]=_[w]}}}return i}const $l=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ua=new Set($l),g2=t=>e=>typeof e=="string"&&e.startsWith(t),y2=g2("--"),t7=g2("var(--"),Cw=t=>t7(t)?n7.test(t.split("/*")[0].trim()):!1,n7=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,v2=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Ki=(t,e,n)=>n>e?e:n<t?t:n,Wl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},nh={...Wl,transform:t=>Ki(0,1,t)},Kd={...Wl,default:1},jh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),rs=jh("deg"),ii=jh("%"),ce=jh("px"),r7=jh("vh"),i7=jh("vw"),ak={...ii,parse:t=>ii.parse(t)/100,transform:t=>ii.transform(t*100)},s7={borderWidth:ce,borderTopWidth:ce,borderRightWidth:ce,borderBottomWidth:ce,borderLeftWidth:ce,borderRadius:ce,radius:ce,borderTopLeftRadius:ce,borderTopRightRadius:ce,borderBottomRightRadius:ce,borderBottomLeftRadius:ce,width:ce,maxWidth:ce,height:ce,maxHeight:ce,top:ce,right:ce,bottom:ce,left:ce,padding:ce,paddingTop:ce,paddingRight:ce,paddingBottom:ce,paddingLeft:ce,margin:ce,marginTop:ce,marginRight:ce,marginBottom:ce,marginLeft:ce,backgroundPositionX:ce,backgroundPositionY:ce},o7={rotate:rs,rotateX:rs,rotateY:rs,rotateZ:rs,scale:Kd,scaleX:Kd,scaleY:Kd,scaleZ:Kd,skew:rs,skewX:rs,skewY:rs,distance:ce,translateX:ce,translateY:ce,translateZ:ce,x:ce,y:ce,z:ce,perspective:ce,transformPerspective:ce,opacity:nh,originX:ak,originY:ak,originZ:ce},lk={...Wl,transform:Math.round},Aw={...s7,...o7,zIndex:lk,size:ce,fillOpacity:nh,strokeOpacity:nh,numOctaves:lk},a7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},l7=$l.length;function c7(t,e,n){let r="",i=!0;for(let s=0;s<l7;s++){const o=$l[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=v2(a,Aw[o]);if(!l){i=!1;const u=a7[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Pw(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(ua.has(l)){o=!0;continue}else if(y2(l)){i[l]=c;continue}else{const u=v2(c,Aw[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=c7(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const u7={offset:"stroke-dashoffset",array:"stroke-dasharray"},h7={offset:"strokeDashoffset",array:"strokeDasharray"};function d7(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?u7:h7;t[s.offset]=ce.transform(-r);const o=ce.transform(e),a=ce.transform(n);t[s.array]=`${o} ${a}`}function ck(t,e,n){return typeof t=="string"?t:ce.transform(e+n*t)}function f7(t,e,n){const r=ck(e,t.x,t.width),i=ck(n,t.y,t.height);return`${r} ${i}`}function Rw(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,f){if(Pw(t,c,f),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:y}=t;p.transform&&(y&&(m.transform=p.transform),delete p.transform),y&&(i!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=f7(y,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&d7(p,o,a,l,!1)}const Nw=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),_2=()=>({...Nw(),attrs:{}}),Dw=t=>typeof t=="string"&&t.toLowerCase()==="svg";function x2(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const w2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function b2(t,e,n,r){x2(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(w2.has(i)?i:Ew(i),e.attrs[i])}const Lp={};function p7(t){Object.assign(Lp,t)}function S2(t,{layout:e,layoutId:n}){return ua.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Lp[t]||t==="opacity")}function Ow(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(vn(i[o])||e.style&&vn(e.style[o])||S2(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function E2(t,e,n){const r=Ow(t,e,n);for(const i in t)if(vn(t[i])||vn(e[i])){const s=$l.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function m7(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const uk=["x","y","width","height","cx","cy","r"],g7={useVisualState:m2({scrapeMotionValuesFromProps:E2,createRenderState:_2,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(ua.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<uk.length;a++){const l=uk[a];t[l]!==e[l]&&(o=!0)}o&&Ze.read(()=>{m7(n,r),Ze.render(()=>{Rw(r,i,Dw(n.tagName),t.transformTemplate),b2(n,r)})})}})},y7={useVisualState:m2({scrapeMotionValuesFromProps:Ow,createRenderState:Nw})};function T2(t,e,n){for(const r in e)!vn(e[r])&&!S2(r,n)&&(t[r]=e[r])}function v7({transformTemplate:t},e){return D.useMemo(()=>{const n=Nw();return Pw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function _7(t,e){const n=t.style||{},r={};return T2(r,n,t),Object.assign(r,v7(t,e)),r}function x7(t,e){const n={},r=_7(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function w7(t,e,n,r){const i=D.useMemo(()=>{const s=_2();return Rw(s,e,Dw(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};T2(s,t.style,t),i.style={...s,...i.style}}return i}function b7(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(kw(n)?w7:x7)(r,s,o,n),c=Lq(r,typeof n=="string",t),u=n!==D.Fragment?{...c,...l,ref:i}:{},{children:f}=r,p=D.useMemo(()=>vn(f)?f.get():f,[f]);return D.createElement(n,{...u,children:p})}}function S7(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...kw(r)?g7:y7,preloadedFeatures:t,useRender:b7(i),createVisualElement:e,Component:r};return qq(o)}}function k2(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Ym(t,e,n){const r=t.getProps();return Iw(r,e,n!==void 0?n:r.custom,t)}const E7=ww(()=>window.ScrollTimeline!==void 0);class T7{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(E7()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class k7 extends T7{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Mw(t,e){return t?t[e]||t.default||t:void 0}const g_=2e4;function I2(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<g_;)e+=n,r=t.next(e);return e>=g_?1/0:e}function jw(t){return typeof t=="function"}function hk(t,e){t.timeline=e,t.onfinish=null}const Lw=t=>Array.isArray(t)&&typeof t[0]=="number",I7={linearEasing:void 0};function C7(t,e){const n=ww(t);return()=>{var r;return(r=I7[e])!==null&&r!==void 0?r:n()}}const Vp=C7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),C2=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Cl(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function A2(t){return!!(typeof t=="function"&&Vp()||!t||typeof t=="string"&&(t in y_||Vp())||Lw(t)||Array.isArray(t)&&t.every(A2))}const Uc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,y_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Uc([0,.65,.55,1]),circOut:Uc([.55,0,1,.45]),backIn:Uc([.31,.01,.66,-.59]),backOut:Uc([.33,1.53,.69,.99])};function P2(t,e){if(t)return typeof t=="function"&&Vp()?C2(t,e):Lw(t)?Uc(t):Array.isArray(t)?t.map(n=>P2(n,e)||y_.easeOut):y_[t]}const wr={x:!1,y:!1};function R2(){return wr.x||wr.y}function A7(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function N2(t,e){const n=A7(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function dk(t){return e=>{e.pointerType==="touch"||R2()||t(e)}}function P7(t,e,n={}){const[r,i,s]=N2(t,n),o=dk(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=dk(f=>{c(f),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const D2=(t,e)=>e?t===e?!0:D2(t,e.parentElement):!1,Vw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,R7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function N7(t){return R7.has(t.tagName)||t.tabIndex!==-1}const Bc=new WeakSet;function fk(t){return e=>{e.key==="Enter"&&t(e)}}function vy(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const D7=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=fk(()=>{if(Bc.has(n))return;vy(n,"down");const i=fk(()=>{vy(n,"up")}),s=()=>vy(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function pk(t){return Vw(t)&&!R2()}function O7(t,e,n={}){const[r,i,s]=N2(t,n),o=a=>{const l=a.currentTarget;if(!pk(a)||Bc.has(l))return;Bc.add(l);const c=e(a),u=(m,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),!(!pk(m)||!Bc.has(l))&&(Bc.delete(l),typeof c=="function"&&c(m,{success:y}))},f=m=>{u(m,n.useGlobalTarget||D2(l,m.target))},p=m=>{u(m,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{!N7(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>D7(c,i),i)}),s}function M7(t){return t==="x"||t==="y"?wr[t]?null:(wr[t]=!0,()=>{wr[t]=!1}):wr.x||wr.y?null:(wr.x=wr.y=!0,()=>{wr.x=wr.y=!1})}const O2=new Set(["width","height","top","left","right","bottom",...$l]);let Pf;function j7(){Pf=void 0}const si={now:()=>(Pf===void 0&&si.set(Gt.isProcessing||Rq.useManualTiming?Gt.timestamp:performance.now()),Pf),set:t=>{Pf=t,queueMicrotask(j7)}};function Fw(t,e){t.indexOf(e)===-1&&t.push(e)}function Uw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Bw{constructor(){this.subscriptions=[]}add(e){return Fw(this.subscriptions,e),()=>Uw(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function M2(t,e){return e?t*(1e3/e):0}const mk=30,L7=t=>!isNaN(parseFloat(t));class V7{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=si.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=si.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=L7(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Bw);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ze.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=si.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>mk)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,mk);return M2(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rh(t,e){return new V7(t,e)}function F7(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,rh(n))}function U7(t,e){const n=Ym(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=Jq(s[o]);F7(t,o,a)}}function B7(t){return!!(vn(t)&&t.add)}function v_(t,e){const n=t.getValue("willChange");if(B7(n))return n.add(e)}function j2(t){return t.props[d2]}const L2=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,z7=1e-7,$7=12;function W7(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=L2(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>z7&&++a<$7);return o}function Lh(t,e,n,r){if(t===e&&n===r)return nr;const i=s=>W7(s,0,1,t,n);return s=>s===0||s===1?s:L2(i(s),e,r)}const V2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,F2=t=>e=>1-t(1-e),U2=Lh(.33,1.53,.69,.99),zw=F2(U2),B2=V2(zw),z2=t=>(t*=2)<1?.5*zw(t):.5*(2-Math.pow(2,-10*(t-1))),$w=t=>1-Math.sin(Math.acos(t)),$2=F2($w),W2=V2($w),H2=t=>/^0[^.\s]+$/u.test(t);function H7(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||H2(t):!0}const hu=t=>Math.round(t*1e5)/1e5,Ww=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function q7(t){return t==null}const K7=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Hw=(t,e)=>n=>!!(typeof n=="string"&&K7.test(n)&&n.startsWith(t)||e&&!q7(n)&&Object.prototype.hasOwnProperty.call(n,e)),q2=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Ww);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},G7=t=>Ki(0,255,t),_y={...Wl,transform:t=>Math.round(G7(t))},Ro={test:Hw("rgb","red"),parse:q2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+_y.transform(t)+", "+_y.transform(e)+", "+_y.transform(n)+", "+hu(nh.transform(r))+")"};function Y7(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const __={test:Hw("#"),parse:Y7,transform:Ro.transform},$a={test:Hw("hsl","hue"),parse:q2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ii.transform(hu(e))+", "+ii.transform(hu(n))+", "+hu(nh.transform(r))+")"},fn={test:t=>Ro.test(t)||__.test(t)||$a.test(t),parse:t=>Ro.test(t)?Ro.parse(t):$a.test(t)?$a.parse(t):__.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ro.transform(t):$a.transform(t)},Q7=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function X7(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ww))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Q7))===null||n===void 0?void 0:n.length)||0)>0}const K2="number",G2="color",J7="var",Z7="var(",gk="${}",eK=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ih(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(eK,l=>(fn.test(l)?(r.color.push(s),i.push(G2),n.push(fn.parse(l))):l.startsWith(Z7)?(r.var.push(s),i.push(J7),n.push(l)):(r.number.push(s),i.push(K2),n.push(parseFloat(l))),++s,gk)).split(gk);return{values:n,split:a,indexes:r,types:i}}function Y2(t){return ih(t).values}function Q2(t){const{split:e,types:n}=ih(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===K2?s+=hu(i[o]):a===G2?s+=fn.transform(i[o]):s+=i[o]}return s}}const tK=t=>typeof t=="number"?0:t;function nK(t){const e=Y2(t);return Q2(t)(e.map(tK))}const Ws={test:X7,parse:Y2,createTransformer:Q2,getAnimatableNone:nK},rK=new Set(["brightness","contrast","saturate","opacity"]);function iK(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ww)||[];if(!r)return t;const i=n.replace(r,"");let s=rK.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const sK=/\b([a-z-]*)\(.*?\)/gu,x_={...Ws,getAnimatableNone:t=>{const e=t.match(sK);return e?e.map(iK).join(" "):t}},oK={...Aw,color:fn,backgroundColor:fn,outlineColor:fn,fill:fn,stroke:fn,borderColor:fn,borderTopColor:fn,borderRightColor:fn,borderBottomColor:fn,borderLeftColor:fn,filter:x_,WebkitFilter:x_},qw=t=>oK[t];function X2(t,e){let n=qw(t);return n!==x_&&(n=Ws),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const aK=new Set(["auto","none","0"]);function lK(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!aK.has(s)&&ih(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=X2(n,i)}const yk=t=>t===Wl||t===ce,vk=(t,e)=>parseFloat(t.split(", ")[e]),_k=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return vk(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?vk(s[1],t):0}},cK=new Set(["x","y","z"]),uK=$l.filter(t=>!cK.has(t));function hK(t){const e=[];return uK.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Pl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:_k(4,13),y:_k(5,14)};Pl.translateX=Pl.x;Pl.translateY=Pl.y;const Vo=new Set;let w_=!1,b_=!1;function J2(){if(b_){const t=Array.from(Vo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=hK(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}b_=!1,w_=!1,Vo.forEach(t=>t.complete()),Vo.clear()}function Z2(){Vo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(b_=!0)})}function dK(){Z2(),J2()}class Kw{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Vo.add(this),w_||(w_=!0,Ze.read(Z2),Ze.resolveKeyframes(J2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Vo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Vo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const eO=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),fK=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function pK(t){const e=fK.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function tO(t,e,n=1){const[r,i]=pK(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return eO(o)?parseFloat(o):o}return Cw(i)?tO(i,e,n+1):i}const nO=t=>e=>e.test(t),mK={test:t=>t==="auto",parse:t=>t},rO=[Wl,ce,ii,rs,i7,r7,mK],xk=t=>rO.find(nO(t));class iO extends Kw{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Cw(c))){const u=tO(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!O2.has(r)||e.length!==2)return;const[i,s]=e,o=xk(i),a=xk(s);if(o!==a)if(yk(o)&&yk(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)H7(e[i])&&r.push(i);r.length&&lK(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Pl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Pl[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const wk=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ws.test(t)||t==="0")&&!t.startsWith("url("));function gK(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function yK(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=wk(i,e),a=wk(s,e);return!o||!a?!1:gK(t)||(n==="spring"||jw(n))&&r}const vK=t=>t!==null;function Qm(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(vK),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const _K=40;class sO{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=si.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>_K?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&dK(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=si.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!yK(e,r,i,s))if(o)this.options.duration=0;else{l&&l(Qm(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ht=(t,e,n)=>t+(e-t)*n;function xy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function xK({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=xy(l,a,t+1/3),s=xy(l,a,t),o=xy(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Fp(t,e){return n=>n>0?e:t}const wy=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},wK=[__,Ro,$a],bK=t=>wK.find(e=>e.test(t));function bk(t){const e=bK(t);if(!e)return!1;let n=e.parse(t);return e===$a&&(n=xK(n)),n}const Sk=(t,e)=>{const n=bk(t),r=bk(e);if(!n||!r)return Fp(t,e);const i={...n};return s=>(i.red=wy(n.red,r.red,s),i.green=wy(n.green,r.green,s),i.blue=wy(n.blue,r.blue,s),i.alpha=ht(n.alpha,r.alpha,s),Ro.transform(i))},SK=(t,e)=>n=>e(t(n)),Vh=(...t)=>t.reduce(SK),S_=new Set(["none","hidden"]);function EK(t,e){return S_.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function TK(t,e){return n=>ht(t,e,n)}function Gw(t){return typeof t=="number"?TK:typeof t=="string"?Cw(t)?Fp:fn.test(t)?Sk:CK:Array.isArray(t)?oO:typeof t=="object"?fn.test(t)?Sk:kK:Fp}function oO(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Gw(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function kK(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Gw(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function IK(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const CK=(t,e)=>{const n=Ws.createTransformer(e),r=ih(t),i=ih(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?S_.has(t)&&!i.values.length||S_.has(e)&&!r.values.length?EK(t,e):Vh(oO(IK(r,i),i.values),n):Fp(t,e)};function aO(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ht(t,e,n):Gw(t)(t,e)}const AK=5;function lO(t,e,n){const r=Math.max(e-AK,0);return M2(n-t(r),e-r)}const vt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},by=.001;function PK({duration:t=vt.duration,bounce:e=vt.bounce,velocity:n=vt.velocity,mass:r=vt.mass}){let i,s,o=1-e;o=Ki(vt.minDamping,vt.maxDamping,o),t=Ki(vt.minDuration,vt.maxDuration,Li(t)),o<1?(i=c=>{const u=c*o,f=u*t,p=u-n,m=E_(c,o),y=Math.exp(-f);return by-p/m*y},s=c=>{const f=c*o*t,p=f*n+n,m=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-f),_=E_(Math.pow(c,2),o);return(-i(c)+by>0?-1:1)*((p-m)*y)/_}):(i=c=>{const u=Math.exp(-c*t),f=(c-n)*t+1;return-by+u*f},s=c=>{const u=Math.exp(-c*t),f=(n-c)*(t*t);return u*f});const a=5/t,l=NK(i,s,a);if(t=ji(t),isNaN(l))return{stiffness:vt.stiffness,damping:vt.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const RK=12;function NK(t,e,n){let r=n;for(let i=1;i<RK;i++)r=r-t(r)/e(r);return r}function E_(t,e){return t*Math.sqrt(1-e*e)}const DK=["duration","bounce"],OK=["stiffness","damping","mass"];function Ek(t,e){return e.some(n=>t[n]!==void 0)}function MK(t){let e={velocity:vt.velocity,stiffness:vt.stiffness,damping:vt.damping,mass:vt.mass,isResolvedFromDuration:!1,...t};if(!Ek(t,OK)&&Ek(t,DK))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Ki(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:vt.mass,stiffness:i,damping:s}}else{const n=PK(t);e={...e,...n,mass:vt.mass},e.isResolvedFromDuration=!0}return e}function cO(t=vt.visualDuration,e=vt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:p,isResolvedFromDuration:m}=MK({...n,velocity:-Li(n.velocity||0)}),y=p||0,_=c/(2*Math.sqrt(l*u)),x=o-s,v=Li(Math.sqrt(l/u)),w=Math.abs(x)<5;r||(r=w?vt.restSpeed.granular:vt.restSpeed.default),i||(i=w?vt.restDelta.granular:vt.restDelta.default);let E;if(_<1){const C=E_(v,_);E=M=>{const T=Math.exp(-_*v*M);return o-T*((y+_*v*x)/C*Math.sin(C*M)+x*Math.cos(C*M))}}else if(_===1)E=C=>o-Math.exp(-v*C)*(x+(y+v*x)*C);else{const C=v*Math.sqrt(_*_-1);E=M=>{const T=Math.exp(-_*v*M),b=Math.min(C*M,300);return o-T*((y+_*v*x)*Math.sinh(b)+C*x*Math.cosh(b))/C}}const R={calculatedDuration:m&&f||null,next:C=>{const M=E(C);if(m)a.done=C>=f;else{let T=0;_<1&&(T=C===0?ji(y):lO(E,C,M));const b=Math.abs(T)<=r,k=Math.abs(o-M)<=i;a.done=b&&k}return a.value=a.done?o:M,a},toString:()=>{const C=Math.min(I2(R),g_),M=C2(T=>R.next(C*T).value,C,30);return C+"ms "+M}};return R}function Tk({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=t[0],p={done:!1,value:f},m=b=>a!==void 0&&b<a||l!==void 0&&b>l,y=b=>a===void 0?l:l===void 0||Math.abs(a-b)<Math.abs(l-b)?a:l;let _=n*e;const x=f+_,v=o===void 0?x:o(x);v!==x&&(_=v-f);const w=b=>-_*Math.exp(-b/r),E=b=>v+w(b),R=b=>{const k=w(b),A=E(b);p.done=Math.abs(k)<=c,p.value=p.done?v:A};let C,M;const T=b=>{m(p.value)&&(C=b,M=cO({keyframes:[p.value,y(p.value)],velocity:lO(E,b,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return T(0),{calculatedDuration:null,next:b=>{let k=!1;return!M&&C===void 0&&(k=!0,R(b),T(b)),C!==void 0&&b>=C?M.next(b-C):(!k&&R(b),p)}}}const jK=Lh(.42,0,1,1),LK=Lh(0,0,.58,1),uO=Lh(.42,0,.58,1),VK=t=>Array.isArray(t)&&typeof t[0]!="number",FK={linear:nr,easeIn:jK,easeInOut:uO,easeOut:LK,circIn:$w,circInOut:W2,circOut:$2,backIn:zw,backInOut:B2,backOut:U2,anticipate:z2},kk=t=>{if(Lw(t)){a2(t.length===4);const[e,n,r,i]=t;return Lh(e,n,r,i)}else if(typeof t=="string")return FK[t];return t};function UK(t,e,n){const r=[],i=n||aO,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||nr:e;a=Vh(l,a)}r.push(a)}return r}function BK(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(a2(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=UK(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(u<t[f+1]);f++);const p=Cl(t[f],t[f+1],u);return a[f](p)};return n?u=>c(Ki(t[0],t[s-1],u)):c}function zK(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Cl(0,e,r);t.push(ht(n,1,i))}}function $K(t){const e=[0];return zK(e,t.length-1),e}function WK(t,e){return t.map(n=>n*e)}function HK(t,e){return t.map(()=>e||uO).splice(0,t.length-1)}function Up({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=VK(r)?r.map(kk):kk(r),s={done:!1,value:e[0]},o=WK(n&&n.length===e.length?n:$K(e),t),a=BK(o,e,{ease:Array.isArray(i)?i:HK(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const qK=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ze.update(e,!0),stop:()=>$s(e),now:()=>Gt.isProcessing?Gt.timestamp:si.now()}},KK={decay:Tk,inertia:Tk,tween:Up,keyframes:Up,spring:cO},GK=t=>t/100;class Yw extends sO{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Kw,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=jw(n)?n:KK[n]||Up;let l,c;a!==Up&&typeof e[0]!="number"&&(l=Vh(GK,aO(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=I2(u));const{calculatedDuration:f}=u,p=f+i,m=p*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:b}=this.options;return{done:!0,value:b[b.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:y,repeatDelay:_,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-p*(this.speed>=0?1:-1),w=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let E=this.currentTime,R=s;if(m){const b=Math.min(this.currentTime,u)/f;let k=Math.floor(b),A=b%1;!A&&b>=1&&(A=1),A===1&&k--,k=Math.min(k,m+1),!!(k%2)&&(y==="reverse"?(A=1-A,_&&(A-=_/f)):y==="mirror"&&(R=o)),E=Ki(0,1,A)*f}const C=w?{done:!1,value:l[0]}:R.next(E);a&&(C.value=a(C.value));let{done:M}=C;!w&&c!==null&&(M=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return T&&i!==void 0&&(C.value=Qm(l,this.options,i)),x&&x(C.value),T&&this.finish(),C}get duration(){const{resolved:e}=this;return e?Li(e.calculatedDuration):0}get time(){return Li(this.currentTime)}set time(e){e=ji(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Li(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=qK,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const YK=new Set(["opacity","clipPath","filter","transform"]);function QK(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=P2(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const XK=ww(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Bp=10,JK=2e4;function ZK(t){return jw(t.type)||t.type==="spring"||!A2(t.ease)}function eG(t,e){const n=new Yw({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<JK;)r=n.sample(s),i.push(r.value),s+=Bp;return{times:void 0,keyframes:i,duration:s-Bp,ease:"linear"}}const hO={anticipate:z2,backInOut:B2,circInOut:W2};function tG(t){return t in hO}class Ik extends sO{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new iO(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Vp()&&tG(s)&&(s=hO[s]),ZK(this.options)){const{onComplete:f,onUpdate:p,motionValue:m,element:y,..._}=this.options,x=eG(e,_);e=x.keyframes,e.length===1&&(e[1]=e[0]),r=x.duration,i=x.times,s=x.ease,o="keyframes"}const u=QK(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(hk(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:f}=this.options;a.set(Qm(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Li(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Li(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=ji(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return nr;const{animation:r}=n;hk(r,e)}return nr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:f,element:p,...m}=this.options,y=new Yw({...m,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),_=ji(this.time);c.setWithVelocity(y.sample(_-Bp).value,y.sample(_).value,Bp)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return XK()&&r&&YK.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const nG={type:"spring",stiffness:500,damping:25,restSpeed:10},rG=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),iG={type:"keyframes",duration:.8},sG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},oG=(t,{keyframes:e})=>e.length>2?iG:ua.has(t)?t.startsWith("scale")?rG(e[1]):nG:sG;function aG({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const Qw=(t,e,n,r={},i,s)=>o=>{const a=Mw(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-ji(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};aG(a)||(u={...u,...oG(t,u)}),u.duration&&(u.duration=ji(u.duration)),u.repeatDelay&&(u.repeatDelay=ji(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const p=Qm(u.keyframes,a);if(p!==void 0)return Ze.update(()=>{u.onUpdate(p),u.onComplete()}),new k7([])}return!s&&Ik.supports(u)?new Ik(u):new Yw(u)};function lG({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function dO(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const p=t.getValue(f,(s=t.latestValues[f])!==null&&s!==void 0?s:null),m=l[f];if(m===void 0||u&&lG(u,f))continue;const y={delay:n,...Mw(o||{},f)};let _=!1;if(window.MotionHandoffAnimation){const v=j2(t);if(v){const w=window.MotionHandoffAnimation(v,f,Ze);w!==null&&(y.startTime=w,_=!0)}}v_(t,f),p.start(Qw(f,p,m,t.shouldReduceMotion&&O2.has(f)?{type:!1}:y,t,_));const x=p.animation;x&&c.push(x)}return a&&Promise.all(c).then(()=>{Ze.update(()=>{a&&U7(t,a)})}),c}function T_(t,e,n={}){var r;const i=Ym(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(dO(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:p}=s;return cG(t,e,u+c,f,p,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function cG(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(uG).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(T_(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function uG(t,e){return t.sortNodePosition(e)}function hG(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>T_(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=T_(t,e,n);else{const i=typeof e=="function"?Ym(t,e,n.custom):e;r=Promise.all(dO(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const dG=Sw.length;function fO(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?fO(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<dG;n++){const r=Sw[n],i=t.props[r];(th(i)||i===!1)&&(e[r]=i)}return e}const fG=[...bw].reverse(),pG=bw.length;function mG(t){return e=>Promise.all(e.map(({animation:n,options:r})=>hG(t,n,r)))}function gG(t){let e=mG(t),n=Ck(),r=!0;const i=l=>(c,u)=>{var f;const p=Ym(t,u,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:m,transitionEnd:y,..._}=p;c={...c,..._,...y}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=fO(t.parent)||{},f=[],p=new Set;let m={},y=1/0;for(let x=0;x<pG;x++){const v=fG[x],w=n[v],E=c[v]!==void 0?c[v]:u[v],R=th(E),C=v===l?w.isActive:null;C===!1&&(y=x);let M=E===u[v]&&E!==c[v]&&R;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),w.protectedKeys={...m},!w.isActive&&C===null||!E&&!w.prevProp||Km(E)||typeof E=="boolean")continue;const T=yG(w.prevProp,E);let b=T||v===l&&w.isActive&&!M&&R||x>y&&R,k=!1;const A=Array.isArray(E)?E:[E];let O=A.reduce(i(v),{});C===!1&&(O={});const{prevResolvedValues:I={}}=w,P={...I,...O},B=Y=>{b=!0,p.has(Y)&&(k=!0,p.delete(Y)),w.needsAnimating[Y]=!0;const $=t.getValue(Y);$&&($.liveStyle=!1)};for(const Y in P){const $=O[Y],J=I[Y];if(m.hasOwnProperty(Y))continue;let Z=!1;m_($)&&m_(J)?Z=!k2($,J):Z=$!==J,Z?$!=null?B(Y):p.add(Y):$!==void 0&&p.has(Y)?B(Y):w.protectedKeys[Y]=!0}w.prevProp=E,w.prevResolvedValues=O,w.isActive&&(m={...m,...O}),r&&t.blockInitialAnimation&&(b=!1),b&&(!(M&&T)||k)&&f.push(...A.map(Y=>({animation:Y,options:{type:v}})))}if(p.size){const x={};p.forEach(v=>{const w=t.getBaseTarget(v),E=t.getValue(v);E&&(E.liveStyle=!0),x[v]=w??null}),f.push({animation:x})}let _=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(f):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),n[l].isActive=c;const f=o(l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Ck(),r=!0}}}function yG(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!k2(e,t):!1}function go(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ck(){return{animate:go(!0),whileInView:go(),whileHover:go(),whileTap:go(),whileDrag:go(),whileFocus:go(),exit:go()}}class Zs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class vG extends Zs{constructor(e){super(e),e.animationState||(e.animationState=gG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Km(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let _G=0;class xG extends Zs{constructor(){super(...arguments),this.id=_G++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const wG={animation:{Feature:vG},exit:{Feature:xG}};function sh(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Fh(t){return{point:{x:t.pageX,y:t.pageY}}}const bG=t=>e=>Vw(e)&&t(e,Fh(e));function du(t,e,n,r){return sh(t,e,bG(n),r)}const Ak=(t,e)=>Math.abs(t-e);function SG(t,e){const n=Ak(t.x,e.x),r=Ak(t.y,e.y);return Math.sqrt(n**2+r**2)}class pO{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Ey(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=SG(f.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:y}=f,{timestamp:_}=Gt;this.history.push({...y,timestamp:_});const{onStart:x,onMove:v}=this.handlers;p||(x&&x(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Sy(p,this.transformPagePoint),Ze.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Ey(f.type==="pointercancel"?this.lastMoveEventInfo:Sy(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,x),y&&y(f,x)},!Vw(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Fh(e),a=Sy(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Gt;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,Ey(a,this.history)),this.removeListeners=Vh(du(this.contextWindow,"pointermove",this.handlePointerMove),du(this.contextWindow,"pointerup",this.handlePointerUp),du(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),$s(this.updatePoint)}}function Sy(t,e){return e?{point:e(t.point)}:t}function Pk(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ey({point:t},e){return{point:t,delta:Pk(t,mO(e)),offset:Pk(t,EG(e)),velocity:TG(e,.1)}}function EG(t){return t[0]}function mO(t){return t[t.length-1]}function TG(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=mO(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ji(e)));)n--;if(!r)return{x:0,y:0};const s=Li(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const gO=1e-4,kG=1-gO,IG=1+gO,yO=.01,CG=0-yO,AG=0+yO;function ir(t){return t.max-t.min}function PG(t,e,n){return Math.abs(t-e)<=n}function Rk(t,e,n,r=.5){t.origin=r,t.originPoint=ht(e.min,e.max,t.origin),t.scale=ir(n)/ir(e),t.translate=ht(n.min,n.max,t.origin)-t.originPoint,(t.scale>=kG&&t.scale<=IG||isNaN(t.scale))&&(t.scale=1),(t.translate>=CG&&t.translate<=AG||isNaN(t.translate))&&(t.translate=0)}function fu(t,e,n,r){Rk(t.x,e.x,n.x,r?r.originX:void 0),Rk(t.y,e.y,n.y,r?r.originY:void 0)}function Nk(t,e,n){t.min=n.min+e.min,t.max=t.min+ir(e)}function RG(t,e,n){Nk(t.x,e.x,n.x),Nk(t.y,e.y,n.y)}function Dk(t,e,n){t.min=e.min-n.min,t.max=t.min+ir(e)}function pu(t,e,n){Dk(t.x,e.x,n.x),Dk(t.y,e.y,n.y)}function NG(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ht(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ht(n,t,r.max):Math.min(t,n)),t}function Ok(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function DG(t,{top:e,left:n,bottom:r,right:i}){return{x:Ok(t.x,n,i),y:Ok(t.y,e,r)}}function Mk(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function OG(t,e){return{x:Mk(t.x,e.x),y:Mk(t.y,e.y)}}function MG(t,e){let n=.5;const r=ir(t),i=ir(e);return i>r?n=Cl(e.min,e.max-r,t.min):r>i&&(n=Cl(t.min,t.max-i,e.min)),Ki(0,1,n)}function jG(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const k_=.35;function LG(t=k_){return t===!1?t=0:t===!0&&(t=k_),{x:jk(t,"left","right"),y:jk(t,"top","bottom")}}function jk(t,e,n){return{min:Lk(t,e),max:Lk(t,n)}}function Lk(t,e){return typeof t=="number"?t:t[e]||0}const Vk=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wa=()=>({x:Vk(),y:Vk()}),Fk=()=>({min:0,max:0}),wt=()=>({x:Fk(),y:Fk()});function cr(t){return[t("x"),t("y")]}function vO({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function VG({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function FG(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ty(t){return t===void 0||t===1}function I_({scale:t,scaleX:e,scaleY:n}){return!Ty(t)||!Ty(e)||!Ty(n)}function bo(t){return I_(t)||_O(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function _O(t){return Uk(t.x)||Uk(t.y)}function Uk(t){return t&&t!=="0%"}function zp(t,e,n){const r=t-n,i=e*r;return n+i}function Bk(t,e,n,r,i){return i!==void 0&&(t=zp(t,i,r)),zp(t,n,r)+e}function C_(t,e=0,n=1,r,i){t.min=Bk(t.min,e,n,r,i),t.max=Bk(t.max,e,n,r,i)}function xO(t,{x:e,y:n}){C_(t.x,e.translate,e.scale,e.originPoint),C_(t.y,n.translate,n.scale,n.originPoint)}const zk=.999999999999,$k=1.0000000000001;function UG(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&qa(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,xO(t,o)),r&&bo(s.latestValues)&&qa(t,s.latestValues))}e.x<$k&&e.x>zk&&(e.x=1),e.y<$k&&e.y>zk&&(e.y=1)}function Ha(t,e){t.min=t.min+e,t.max=t.max+e}function Wk(t,e,n,r,i=.5){const s=ht(t.min,t.max,i);C_(t,e,n,s,r)}function qa(t,e){Wk(t.x,e.x,e.scaleX,e.scale,e.originX),Wk(t.y,e.y,e.scaleY,e.scale,e.originY)}function wO(t,e){return vO(FG(t.getBoundingClientRect(),e))}function BG(t,e,n){const r=wO(t,n),{scroll:i}=e;return i&&(Ha(r.x,i.offset.x),Ha(r.y,i.offset.y)),r}const bO=({current:t})=>t?t.ownerDocument.defaultView:null,zG=new WeakMap;class $G{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Fh(u).point)},s=(u,f)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=M7(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cr(x=>{let v=this.getAxisMotionValue(x).get()||0;if(ii.test(v)){const{projection:w}=this.visualElement;if(w&&w.layout){const E=w.layout.layoutBox[x];E&&(v=ir(E)*(parseFloat(v)/100))}}this.originPoint[x]=v}),y&&Ze.postRender(()=>y(u,f)),v_(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(u,f)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:_}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=f;if(m&&this.currentDirection===null){this.currentDirection=WG(x),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,x),this.updateAxis("y",f.point,x),this.visualElement.render(),_&&_(u,f)},a=(u,f)=>this.stop(u,f),l=()=>cr(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new pO(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:bO(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Ze.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Gd(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=NG(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&za(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=DG(i.layoutBox,n):this.constraints=!1,this.elastic=LG(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&cr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=jG(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!za(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=BG(r,i.root,this.visualElement.getTransformPagePoint());let o=OG(i.layout.layoutBox,s);if(n){const a=n(VG(o));this.hasMutatedConstraints=!!a,a&&(o=vO(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=cr(u=>{if(!Gd(u,n,this.currentDirection))return;let f=l&&l[u]||{};o&&(f={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return v_(this.visualElement,e),r.start(Qw(e,r,0,n,this.visualElement,!1))}stopAnimation(){cr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){cr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){cr(n=>{const{drag:r}=this.getProps();if(!Gd(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-ht(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!za(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};cr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=MG({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),cr(o=>{if(!Gd(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ht(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;zG.set(this.visualElement,this);const e=this.visualElement.current,n=du(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();za(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ze.read(r);const o=sh(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(cr(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=k_,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Gd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function WG(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class HG extends Zs{constructor(e){super(e),this.removeGroupControls=nr,this.removeListeners=nr,this.controls=new $G(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||nr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Hk=t=>(e,n)=>{t&&Ze.postRender(()=>t(e,n))};class qG extends Zs{constructor(){super(...arguments),this.removePointerDownListener=nr}onPointerDown(e){this.session=new pO(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bO(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Hk(e),onStart:Hk(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ze.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=du(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Rf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qk(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ec={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ce.test(t))t=parseFloat(t);else return t;const n=qk(t,e.target.x),r=qk(t,e.target.y);return`${n}% ${r}%`}},KG={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Ws.parse(t);if(i.length>5)return r;const s=Ws.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=ht(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class GG extends D.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;p7(YG),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Rf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Ze.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Tw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function SO(t){const[e,n]=s2(),r=D.useContext(yw);return d.jsx(GG,{...t,layoutGroup:r,switchLayoutGroup:D.useContext(f2),isPresent:e,safeToRemove:n})}const YG={borderRadius:{...Ec,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ec,borderTopRightRadius:Ec,borderBottomLeftRadius:Ec,borderBottomRightRadius:Ec,boxShadow:KG};function QG(t,e,n){const r=vn(t)?t:rh(t);return r.start(Qw("",r,e,n)),r.animation}function XG(t){return t instanceof SVGElement&&t.tagName!=="svg"}const JG=(t,e)=>t.depth-e.depth;class ZG{constructor(){this.children=[],this.isDirty=!1}add(e){Fw(this.children,e),this.isDirty=!0}remove(e){Uw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(JG),this.isDirty=!1,this.children.forEach(e)}}function eY(t,e){const n=si.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&($s(r),t(s-e))};return Ze.read(r,!0),()=>$s(r)}const EO=["TopLeft","TopRight","BottomLeft","BottomRight"],tY=EO.length,Kk=t=>typeof t=="string"?parseFloat(t):t,Gk=t=>typeof t=="number"||ce.test(t);function nY(t,e,n,r,i,s){i?(t.opacity=ht(0,n.opacity!==void 0?n.opacity:1,rY(r)),t.opacityExit=ht(e.opacity!==void 0?e.opacity:1,0,iY(r))):s&&(t.opacity=ht(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<tY;o++){const a=`border${EO[o]}Radius`;let l=Yk(e,a),c=Yk(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Gk(l)===Gk(c)?(t[a]=Math.max(ht(Kk(l),Kk(c),r),0),(ii.test(c)||ii.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=ht(e.rotate||0,n.rotate||0,r))}function Yk(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const rY=TO(0,.5,$2),iY=TO(.5,.95,nr);function TO(t,e,n){return r=>r<t?0:r>e?1:n(Cl(t,e,r))}function Qk(t,e){t.min=e.min,t.max=e.max}function lr(t,e){Qk(t.x,e.x),Qk(t.y,e.y)}function Xk(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Jk(t,e,n,r,i){return t-=e,t=zp(t,1/n,r),i!==void 0&&(t=zp(t,1/i,r)),t}function sY(t,e=0,n=1,r=.5,i,s=t,o=t){if(ii.test(e)&&(e=parseFloat(e),e=ht(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ht(s.min,s.max,r);t===s&&(a-=e),t.min=Jk(t.min,e,n,a,i),t.max=Jk(t.max,e,n,a,i)}function Zk(t,e,[n,r,i],s,o){sY(t,e[n],e[r],e[i],e.scale,s,o)}const oY=["x","scaleX","originX"],aY=["y","scaleY","originY"];function eI(t,e,n,r){Zk(t.x,e,oY,n?n.x:void 0,r?r.x:void 0),Zk(t.y,e,aY,n?n.y:void 0,r?r.y:void 0)}function tI(t){return t.translate===0&&t.scale===1}function kO(t){return tI(t.x)&&tI(t.y)}function nI(t,e){return t.min===e.min&&t.max===e.max}function lY(t,e){return nI(t.x,e.x)&&nI(t.y,e.y)}function rI(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function IO(t,e){return rI(t.x,e.x)&&rI(t.y,e.y)}function iI(t){return ir(t.x)/ir(t.y)}function sI(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class cY{constructor(){this.members=[]}add(e){Fw(this.members,e),e.scheduleRender()}remove(e){if(Uw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function uY(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:p,skewX:m,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const So={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},zc=typeof window<"u"&&window.MotionDebug!==void 0,ky=["","X","Y","Z"],hY={visibility:"hidden"},oI=1e3;let dY=0;function Iy(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function CO(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=j2(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ze,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&CO(r)}function AO({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=dY++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,zc&&(So.totalNodes=So.resolvedTargetDeltas=So.recalculatedProjection=0),this.nodes.forEach(mY),this.nodes.forEach(xY),this.nodes.forEach(wY),this.nodes.forEach(gY),zc&&window.MotionDebug.record(So)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new ZG)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Bw),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=XG(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=eY(p,250),Rf.hasAnimatedSinceResize&&(Rf.hasAnimatedSinceResize=!1,this.nodes.forEach(lI))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||kY,{onLayoutAnimationStart:x,onLayoutAnimationComplete:v}=u.getProps(),w=!this.targetLayout||!IO(this.targetLayout,y)||m,E=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||p&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,E);const R={...Mw(_,"layout"),onPlay:x,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else p||lI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,$s(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bY),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&CO(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aI);return}this.isUpdating||this.nodes.forEach(vY),this.isUpdating=!1,this.nodes.forEach(_Y),this.nodes.forEach(fY),this.nodes.forEach(pY),this.clearAllSnapshots();const a=si.now();Gt.delta=Ki(0,1e3/60,a-Gt.timestamp),Gt.timestamp=a,Gt.isProcessing=!0,yy.update.process(Gt),yy.preRender.process(Gt),yy.render.process(Gt),Gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Tw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yY),this.sharedNodes.forEach(SY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ze.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ze.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!kO(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||bo(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),IY(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return wt();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(CY))){const{scroll:u}=this.root;u&&(Ha(l.x,u.offset.x),Ha(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=wt();if(lr(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:p}=u;u!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&lr(l,o),Ha(l.x,f.offset.x),Ha(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=wt();lr(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&qa(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),bo(u.latestValues)&&qa(l,u.latestValues)}return bo(this.latestValues)&&qa(l,this.latestValues),l}removeTransform(o){const a=wt();lr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!bo(c.latestValues))continue;I_(c.latestValues)&&c.updateSnapshot();const u=wt(),f=c.measurePageBox();lr(u,f),eI(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return bo(this.latestValues)&&eI(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=Gt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wt(),this.relativeTargetOrigin=wt(),pu(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=wt(),this.targetWithTransforms=wt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),RG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):lr(this.target,this.layout.layoutBox),xO(this.target,this.targetDelta)):lr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wt(),this.relativeTargetOrigin=wt(),pu(this.relativeTargetOrigin,this.target,m.target),lr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}zc&&So.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||I_(this.parent.latestValues)||_O(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Gt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;lr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;UG(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=wt());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Xk(this.prevProjectionDelta.x,this.projectionDelta.x),Xk(this.prevProjectionDelta.y,this.projectionDelta.y)),fu(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!sI(this.projectionDelta.x,this.prevProjectionDelta.x)||!sI(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),zc&&So.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wa(),this.projectionDelta=Wa(),this.projectionDeltaWithTransform=Wa()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=Wa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=wt(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,_=m!==y,x=this.getStack(),v=!x||x.members.length<=1,w=!!(_&&!v&&this.options.crossfade===!0&&!this.path.some(TY));this.animationProgress=0;let E;this.mixTargetDelta=R=>{const C=R/1e3;cI(f.x,o.x,C),cI(f.y,o.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pu(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),EY(this.relativeTarget,this.relativeTargetOrigin,p,C),E&&lY(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=wt()),lr(E,this.relativeTarget)),_&&(this.animationValues=u,nY(u,c,this.latestValues,C,w,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&($s(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ze.update(()=>{Rf.hasAnimatedSinceResize=!0,this.currentAnimation=QG(0,oI,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(oI),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&PO(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||wt();const f=ir(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=ir(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}lr(a,l),qa(a,u),fu(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new cY),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Iy("z",o,c,this.animationValues);for(let u=0;u<ky.length;u++)Iy(`rotate${ky[u]}`,o,c,this.animationValues),Iy(`skew${ky[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hY;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Af(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=Af(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!bo(this.latestValues)&&(_.transform=u?u({},""):"none",this.hasProjected=!1),_}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=uY(this.projectionDeltaWithTransform,this.treeScale,p),u&&(c.transform=u(p,c.transform));const{x:m,y}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const _ in Lp){if(p[_]===void 0)continue;const{correct:x,applyTo:v}=Lp[_],w=c.transform==="none"?p[_]:x(p[_],f);if(v){const E=v.length;for(let R=0;R<E;R++)c[v[R]]=w}else c[_]=w}return this.options.layoutId&&(c.pointerEvents=f===this?Af(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(aI),this.root.sharedNodes.clear()}}}function fY(t){t.updateLayout()}function pY(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?cr(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],m=ir(p);p.min=r[f].min,p.max=p.min+m}):PO(s,n.layoutBox,r)&&cr(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],m=ir(r[f]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+m)});const a=Wa();fu(a,r,n.layoutBox);const l=Wa();o?fu(l,t.applyTransform(i,!0),n.measuredBox):fu(l,r,n.layoutBox);const c=!kO(a);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const y=wt();pu(y,n.layoutBox,p.layoutBox);const _=wt();pu(_,r,m.layoutBox),IO(y,_)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=y,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function mY(t){zc&&So.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function gY(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function yY(t){t.clearSnapshot()}function aI(t){t.clearMeasurements()}function vY(t){t.isLayoutDirty=!1}function _Y(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function lI(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function xY(t){t.resolveTargetDelta()}function wY(t){t.calcProjection()}function bY(t){t.resetSkewAndRotation()}function SY(t){t.removeLeadSnapshot()}function cI(t,e,n){t.translate=ht(e.translate,0,n),t.scale=ht(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function uI(t,e,n,r){t.min=ht(e.min,n.min,r),t.max=ht(e.max,n.max,r)}function EY(t,e,n,r){uI(t.x,e.x,n.x,r),uI(t.y,e.y,n.y,r)}function TY(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const kY={duration:.45,ease:[.4,0,.1,1]},hI=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),dI=hI("applewebkit/")&&!hI("chrome/")?Math.round:nr;function fI(t){t.min=dI(t.min),t.max=dI(t.max)}function IY(t){fI(t.x),fI(t.y)}function PO(t,e,n){return t==="position"||t==="preserve-aspect"&&!PG(iI(e),iI(n),.2)}function CY(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const AY=AO({attachResizeListener:(t,e)=>sh(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Cy={current:void 0},RO=AO({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Cy.current){const t=new AY({});t.mount(window),t.setOptions({layoutScroll:!0}),Cy.current=t}return Cy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),PY={pan:{Feature:qG},drag:{Feature:HG,ProjectionNode:RO,MeasureLayout:SO}};function pI(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ze.postRender(()=>s(e,Fh(e)))}class RY extends Zs{mount(){const{current:e}=this.node;e&&(this.unmount=P7(e,n=>(pI(this.node,n,"Start"),r=>pI(this.node,r,"End"))))}unmount(){}}class NY extends Zs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vh(sh(this.node.current,"focus",()=>this.onFocus()),sh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function mI(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ze.postRender(()=>s(e,Fh(e)))}class DY extends Zs{mount(){const{current:e}=this.node;e&&(this.unmount=O7(e,n=>(mI(this.node,n,"Start"),(r,{success:i})=>mI(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const A_=new WeakMap,Ay=new WeakMap,OY=t=>{const e=A_.get(t.target);e&&e(t)},MY=t=>{t.forEach(OY)};function jY({root:t,...e}){const n=t||document;Ay.has(n)||Ay.set(n,{});const r=Ay.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(MY,{root:t,...e})),r[i]}function LY(t,e,n){const r=jY(e);return A_.set(t,n),r.observe(t),()=>{A_.delete(t),r.unobserve(t)}}const VY={some:0,all:1};class FY extends Zs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:VY[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),p=c?u:f;p&&p(l)};return LY(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(UY(e,n))&&this.startObserver()}unmount(){}}function UY({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const BY={inView:{Feature:FY},tap:{Feature:DY},focus:{Feature:NY},hover:{Feature:RY}},zY={layout:{ProjectionNode:RO,MeasureLayout:SO}},P_={current:null},NO={current:!1};function $Y(){if(NO.current=!0,!!xw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>P_.current=t.matches;t.addListener(e),e()}else P_.current=!1}const WY=[...rO,fn,Ws],HY=t=>WY.find(nO(t)),gI=new WeakMap;function qY(t,e,n){for(const r in e){const i=e[r],s=n[r];if(vn(i))t.addValue(r,i);else if(vn(s))t.addValue(r,rh(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,rh(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const yI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class KY{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Kw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=si.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Ze.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Gm(n),this.isVariantNode=h2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const y=p[m];l[m]!==void 0&&vn(y)&&y.set(l[m],!1)}}mount(e){this.current=e,gI.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),NO.current||$Y(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:P_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){gI.delete(this.current),this.projection&&this.projection.unmount(),$s(this.notifyUpdate),$s(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ua.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ze.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Al){const n=Al[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<yI.length;r++){const i=yI[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=qY(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=rh(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(eO(i)||H2(i))?i=parseFloat(i):!HY(i)&&Ws.test(n)&&(i=X2(e,n)),this.setBaseTarget(e,vn(i)?i.get():i)),vn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=Iw(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!vn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Bw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class DO extends KY{constructor(){super(...arguments),this.KeyframeResolver=iO}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;vn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function GY(t){return window.getComputedStyle(t)}class YY extends DO{constructor(){super(...arguments),this.type="html",this.renderInstance=x2}readValueFromInstance(e,n){if(ua.has(n)){const r=qw(n);return r&&r.default||0}else{const r=GY(e),i=(y2(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return wO(e,n)}build(e,n,r){Pw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Ow(e,n,r)}}class QY extends DO{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ua.has(n)){const r=qw(n);return r&&r.default||0}return n=w2.has(n)?n:Ew(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return E2(e,n,r)}build(e,n,r){Rw(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){b2(e,n,r,i)}mount(e){this.isSVGTag=Dw(e.tagName),super.mount(e)}}const XY=(t,e)=>kw(t)?new QY(e):new YY(e,{allowProjection:t!==D.Fragment}),JY=S7({...wG,...BY,...PY,...zY},XY),ct=Vq(JY);zm.register(f_,p_,Cf,If,xs,iq,dq,nq,Q8);const ZY=["QwWST9OVOlTOi5oheyCqfpXLOLg2","3j0AXIRa4XdHq1ywCl4UBxJNsku2","AeZKjJYu5zMZ4mvffaGiqCBb0cF2"];function hn(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const eQ=t=>{if(!t)return"";const e=Math.floor((new Date-hn(t))/1e3);let n=e/31536e3;return n>1?Math.floor(n)+" anni fa":(n=e/2592e3,n>1?Math.floor(n)+" mesi fa":(n=e/86400,n>1?Math.floor(n)+" gg fa":(n=e/3600,n>1?Math.floor(n)+" ore fa":(n=e/60,n>1?Math.floor(n)+" min fa":"ora"))))},Py=({title:t,value:e,icon:n,isCurrency:r=!1,isPercentage:i=!1})=>d.jsxs("div",{className:"bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md h-full",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-muted",children:n}),d.jsx("p",{className:"text-muted text-sm",children:t})]}),d.jsx("p",{className:"text-2xl font-bold text-foreground mt-2",children:r?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):i?`${e}%`:e})]}),tQ=({item:t,navigate:e})=>{const n={expiring:d.jsx(N$,{className:"text-yellow-400"}),new_check:d.jsx(ew,{className:"text-green-400"}),new_anamnesi:d.jsx(tw,{className:"text-blue-400"})},r={expiring:"payments",new_check:"checks",new_anamnesi:"anamnesi"};return d.jsxs(ct.button,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e(`/client/${t.clientId}?tab=${r[t.type]}`),className:"w-full flex items-start gap-3 p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors text-left",children:[d.jsx("div",{className:"mt-1 flex-shrink-0",children:n[t.type]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-sm font-semibold",children:t.clientName}),d.jsx("p",{className:"text-xs text-muted",children:t.description})]}),d.jsx("div",{className:"text-xs text-muted flex-shrink-0",children:eQ(t.date)})]})},nQ=({dataType:t,setDataType:e,timeRange:n,setTimeRange:r})=>d.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mt-4",children:[d.jsxs("div",{className:"flex bg-card/50 p-1 rounded-lg border border-white/10 backdrop-blur-sm",children:[d.jsx("button",{onClick:()=>e("revenue"),className:`px-3 py-1 text-sm rounded-md transition ${t==="revenue"?"bg-primary text-white":"text-muted"}`,children:"Fatturato"}),d.jsx("button",{onClick:()=>e("clients"),className:`px-3 py-1 text-sm rounded-md transition ${t==="clients"?"bg-primary text-white":"text-muted"}`,children:"Nuovi Clienti"})]}),d.jsxs("div",{className:"flex bg-card/50 p-1 rounded-lg border border-white/10 backdrop-blur-sm",children:[d.jsx("button",{onClick:()=>r("monthly"),className:`px-3 py-1 text-sm rounded-md transition ${n==="monthly"?"bg-white/10 text-white":"text-muted"}`,children:"Mese"}),d.jsx("button",{onClick:()=>r("yearly"),className:`px-3 py-1 text-sm rounded-md transition ${n==="yearly"?"bg-white/10 text-white":"text-muted"}`,children:"Anno"})]})]}),rQ=()=>{const[t,e]=D.useState(""),[n,r]=D.useState(!1),i=Ce(se,"app-data","quickNotes");return D.useEffect(()=>{(async()=>{const o=await qi(i);o.exists()&&e(o.data().content)})()},[]),D.useEffect(()=>{const s=setTimeout(async()=>{if(t!==void 0){r(!0);try{await Rr(i,{content:t,lastUpdated:Nt()})}catch(o){console.error("Error saving notes:",o)}finally{setTimeout(()=>r(!1),1e3)}}},2e3);return()=>clearTimeout(s)},[t]),d.jsxs("div",{className:"bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md h-full flex flex-col",children:[d.jsxs("h2",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[d.jsx(oD,{})," Appunti Rapidi"]}),d.jsx("textarea",{value:t,onChange:s=>e(s.target.value),className:"w-full h-full bg-transparent text-sm text-muted outline-none resize-none",placeholder:"Scrivi qui le tue idee o cose da fare..."}),d.jsx("p",{className:"text-xs text-right text-muted mt-2 h-4",children:n&&"Salvataggio..."})]})};function iQ(){const t=nn(),[e,n]=D.useState([]),[r,i]=D.useState([]),[s,o]=D.useState([]),[a,l]=D.useState([]),[c,u]=D.useState([]),[f,p]=D.useState("revenue"),[m,y]=D.useState("yearly"),_=D.useMemo(()=>e.reduce((A,O)=>({...A,[O.id]:O.name}),{}),[e]);D.useEffect(()=>{const A=ut(Ge(se,"clients"),z=>n(z.docs.map(H=>({id:H.id,...H.data()})))),O=ut(su(se,"payments"),z=>i(z.docs.map(H=>({...H.data(),clientId:H.ref.path.split("/")[1]})))),I=ut(su(se,"checks"),z=>o(z.docs.map(H=>({...H.data(),clientId:H.ref.path.split("/")[1]})))),P=ut(su(se,"anamnesi"),z=>l(z.docs.map(H=>({...H.data(),clientId:H.ref.path.split("/")[1]})))),B=ut(Ge(se,"chats"),z=>u(z.docs.map(H=>({id:H.id,...H.data()}))));return()=>{A(),O(),I(),P(),B()}},[]);const{clientStats:x,monthlyIncome:v,activityFeed:w,chartData:E,focusClient:R,retentionRate:C,unreadChatsCount:M}=D.useMemo(()=>{var Hn;const A=new Date,O=new Set(e.map(re=>re.id)),I=r.filter(re=>O.has(re.clientId));let P=0;e.forEach(re=>{const Fe=hn(re.scadenza);(!Fe||Fe>=A)&&P++});let B,z,H;if(m==="yearly"){B=Array.from({length:12},(ve,Ue)=>new Date(A.getFullYear(),A.getMonth()-11+Ue,1).toLocaleString("it-IT",{month:"short"}));const re=Array(12).fill(0),Fe=Array(12).fill(0);I.forEach(ve=>{const Ue=hn(ve.paymentDate);if(Ue){const be=(A.getFullYear()-Ue.getFullYear())*12+(A.getMonth()-Ue.getMonth());be>=0&&be<12&&(re[11-be]+=parseFloat(ve.amount))}}),e.forEach(ve=>{const Ue=hn(ve.createdAt);if(Ue){const be=(A.getFullYear()-Ue.getFullYear())*12+(A.getMonth()-Ue.getMonth());be>=0&&be<12&&Fe[11-be]++}}),z=f==="revenue"?re:Fe}else{const re=new Date(A.getFullYear(),A.getMonth()+1,0).getDate();B=Array.from({length:re},(Ue,be)=>be+1);const Fe=Array(re).fill(0),ve=Array(re).fill(0);I.forEach(Ue=>{const be=hn(Ue.paymentDate);be&&be.getFullYear()===A.getFullYear()&&be.getMonth()===A.getMonth()&&(Fe[be.getDate()-1]+=parseFloat(Ue.amount))}),e.forEach(Ue=>{const be=hn(Ue.createdAt);be&&be.getFullYear()===A.getFullYear()&&be.getMonth()===A.getMonth()&&ve[be.getDate()-1]++}),z=f==="revenue"?Fe:ve}f==="revenue"?H={type:"line",label:"Fatturato",data:z,borderColor:"#22c55e",backgroundColor:"rgba(34, 197, 94, 0.2)",fill:!0,tension:.4}:H={type:"bar",label:"Nuovi Clienti",data:z,backgroundColor:"rgba(37, 99, 235, 0.6)"};const Y=e.filter(re=>{const Fe=hn(re.scadenza);if(!Fe)return!1;const ve=Math.ceil((Fe-A)/(1e3*60*60*24));return ve>=0&&ve<=15}).map(re=>({type:"expiring",date:re.scadenza,clientId:re.id,description:`Scade tra ${Math.ceil((hn(re.scadenza)-A)/(1e3*60*60*24))} giorni`})),$=s.map(re=>({type:"new_check",date:re.createdAt,clientId:re.clientId,description:"Ha inviato un nuovo check"})),J=a.map(re=>({type:"new_anamnesi",date:re.createdAt,clientId:re.clientId,description:"Ha compilato l'anamnesi"})),Z=[...Y,...$,...J].sort((re,Fe)=>(hn(Fe.date)||0)-(hn(re.date)||0)).map(re=>({...re,clientName:_[re.clientId]})).filter(re=>re.clientName),ye=new Date(A.getFullYear(),A.getMonth()-1,1),pe=new Date(A.getFullYear(),A.getMonth(),1),xe=new Set(e.filter(re=>hn(re.scadenza)>ye).map(re=>re.id)),We=new Set(e.filter(re=>hn(re.scadenza)>pe).map(re=>re.id)),tt=[...xe].filter(re=>We.has(re)).length,He=xe.size>0?Math.round(tt/xe.size*100):100,ot=e.filter(re=>!hn(re.scadenza)||hn(re.scadenza)>=A),rn=ot.length>0?ot[new Date().getDate()%ot.length]:null,sn=(Hn=a.find(re=>re.clientId===(rn==null?void 0:rn.id)))==null?void 0:Hn.mainGoal,Nn=c.filter(re=>re.lastMessageSenderId&&!ZY.includes(re.lastMessageSenderId)).length;return{clientStats:{total:e.length,active:P},monthlyIncome:I.filter(re=>{var Fe,ve;return((Fe=hn(re.paymentDate))==null?void 0:Fe.getMonth())===A.getMonth()&&((ve=hn(re.paymentDate))==null?void 0:ve.getFullYear())===A.getFullYear()}).reduce((re,Fe)=>re+parseFloat(Fe.amount),0),activityFeed:Z,chartData:{labels:B,datasets:[H]},focusClient:rn?{...rn,goal:sn}:null,retentionRate:He,unreadChatsCount:Nn}},[e,r,s,a,_,f,m,c]),T={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"#71717a"},grid:{color:"rgba(255,255,255,0.05)"}},y:{ticks:{color:f==="revenue"?"#22c55e":"#2563eb",callback:A=>f==="revenue"?`${A}`:Number.isInteger(A)?A:null},grid:{color:"rgba(255,255,255,0.05)"}}}},b={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.07}}},k={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return d.jsxs(ct.div,{className:"w-full relative",variants:b,initial:"hidden",animate:"visible",children:[d.jsxs(ct.div,{className:"flex justify-between items-center mb-6",variants:k,children:[d.jsx("h1",{className:"text-3xl font-bold",children:"Command Center"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:()=>t("/admin/chat"),className:"relative px-3 py-1.5 bg-card/50 text-sm rounded-lg border border-white/10 backdrop-blur-sm hover:bg-white/10 transition",children:[d.jsx(Om,{className:"inline -mt-1 mr-1"})," Gestisci Chat",M>0&&d.jsx("span",{className:"absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center p-1",children:M})]}),d.jsx("button",{onClick:()=>t("/clients"),className:"px-3 py-1.5 bg-card/50 text-sm rounded-lg border border-white/10 backdrop-blur-sm hover:bg-white/10",children:"Gestisci Clienti"}),d.jsxs("button",{onClick:()=>t("/new"),className:"px-3 py-1.5 bg-primary text-sm font-semibold rounded-lg hover:bg-primary/80",children:[d.jsx(Mm,{className:"inline -mt-1 mr-1"})," Nuovo Cliente"]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[d.jsx(ct.div,{variants:k,children:d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:[d.jsx(Py,{title:"Incasso Mensile",value:v,icon:d.jsx(la,{className:"text-green-400"}),isCurrency:!0}),d.jsx(Py,{title:"Clienti Attivi",value:x.active,icon:d.jsx(ew,{className:"text-primary"})}),d.jsx(Py,{title:"Retention Rate",value:C,icon:d.jsx(aD,{className:"text-purple-400"}),isPercentage:!0})]})}),d.jsxs(ct.div,{className:"bg-card/50 p-4 sm:p-6 rounded-xl border border-white/10 backdrop-blur-md",variants:k,children:[d.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[d.jsx(tD,{})," Business Overview"]}),d.jsx("div",{className:"h-80",children:f==="revenue"?d.jsx(Tq,{data:E,options:T}):d.jsx(kq,{data:E,options:T})}),d.jsx(nQ,{dataType:f,setDataType:p,timeRange:m,setTimeRange:y})]}),d.jsxs(ct.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",variants:k,children:[R&&d.jsxs("div",{className:"bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md",children:[d.jsxs("h2",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[d.jsx(F$,{})," Focus Cliente del Giorno"]}),d.jsx("p",{className:"font-bold text-lg text-primary",children:R.name}),d.jsxs("p",{className:"text-sm text-muted mt-1",children:['Obiettivo: "',R.goal||"Non specificato",'"']})]}),d.jsx(rQ,{})]})]}),d.jsxs(ct.div,{className:"bg-card/50 p-4 sm:p-6 rounded-xl border border-white/10 backdrop-blur-md",variants:k,children:[d.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[d.jsx(P$,{})," Feed Attivit"]}),d.jsx("div",{className:"space-y-3 max-h-[44rem] overflow-y-auto pr-2",children:d.jsx(zl,{children:w.length>0?w.map(A=>{var O;return d.jsx(tQ,{item:A,navigate:t},`${A.type}-${A.clientId}-${(O=A.date)==null?void 0:O.seconds}`)}):d.jsx("p",{className:"text-sm text-muted p-2",children:"Nessuna attivit recente da mostrare."})})})]})]})]})}function $c(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const Tc=t=>{const e=$c(t);if(!e)return"na";const r=Math.ceil((e-new Date)/(1e3*60*60*24));return r<0?"expired":r<=15?"expiring":"paid"},sQ=({status:t})=>{switch(t){case"paid":return d.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-900/50 text-green-400",children:"Pagato"});case"expiring":return d.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-yellow-900/50 text-yellow-400",children:"In Scadenza"});case"expired":return d.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-900/50 text-red-400",children:"Scaduto"});default:return d.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-700 text-gray-300",children:"N/D"})}};function oQ(){const t=nn(),e=ta(),[n,r]=D.useState([]),[i,s]=D.useState(!0),[o,a]=D.useState(""),[l,c]=D.useState("all"),[u,f]=D.useState("createdAt"),[p,m]=D.useState("desc"),[y,_]=D.useState(1),x=10;D.useEffect(()=>{const k=new URLSearchParams(e.search).get("filter");k&&["paid","expiring","expired"].includes(k)&&c(k)},[e.search]),D.useEffect(()=>{const b=ut(Ge(se,"clients"),k=>{r(k.docs.map(A=>({id:A.id,...A.data()}))),s(!1)});return()=>b()},[]);const v=async b=>{if(window.confirm("Sei sicuro di voler eliminare questo cliente? L'operazione  irreversibile."))try{await Ah(Ce(se,"clients",b))}catch(k){console.error("Errore delete:",k)}},w=D.useMemo(()=>{let b=[...n];l!=="all"&&(b=b.filter(O=>Tc(O.scadenza)===l));const k=o.trim().toLowerCase();k&&(b=b.filter(O=>(O.name||"").toLowerCase().includes(k)||(O.email||"").toLowerCase().includes(k)));const A=(O,I)=>{var P,B;switch(I){case"name":return(O.name||"").toLowerCase();case"scadenza":return((P=$c(O.scadenza))==null?void 0:P.getTime())||0;case"createdAt":default:return((B=$c(O.createdAt))==null?void 0:B.getTime())||0}};return b.sort((O,I)=>{const P=A(O,u),B=A(I,u);return P===B?0:p==="asc"?P>B?1:-1:P<B?1:-1}),b},[n,o,l,u,p]);Math.ceil(w.length/x);const E=w.slice((y-1)*x,y*x),R=b=>{u===b?m(k=>k==="asc"?"desc":"asc"):(f(b),m(b==="scadenza"||b==="createdAt"?"desc":"asc"))},C=({col:b})=>u===b?p==="asc"?d.jsx(R$,{className:"inline ml-1"}):d.jsx(iD,{className:"inline ml-1"}):null,M=({status:b,label:k,count:A})=>d.jsxs("button",{onClick:()=>{c(b),_(1)},className:`px-3 py-1 text-sm font-semibold rounded-full transition-colors whitespace-nowrap 
        ${l===b?"bg-primary text-white":"bg-white/10 text-muted hover:bg-white/20"}`,children:[k," (",A,")"]}),T=D.useMemo(()=>({all:n.length,paid:n.filter(b=>Tc(b.scadenza)==="paid").length,expiring:n.filter(b=>Tc(b.scadenza)==="expiring").length,expired:n.filter(b=>Tc(b.scadenza)==="expired").length}),[n]);return d.jsxs("div",{className:"w-full",children:[d.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[d.jsx("h1",{className:"text-3xl font-bold",children:"Clienti"}),d.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[d.jsxs("div",{className:"flex items-center gap-2 bg-card border border-white/10 rounded-lg px-3 py-2 flex-1 min-w-[150px]",children:[d.jsx(nw,{className:"text-muted"}),d.jsx("input",{value:o,onChange:b=>{a(b.target.value),_(1)},className:"bg-transparent outline-none placeholder-muted w-full",placeholder:"Cerca per nome o email"})]}),d.jsxs("button",{onClick:()=>t("/new"),className:"flex items-center justify-center gap-2 px-4 py-2 bg-primary hover:bg-primary/80 text-white rounded-lg whitespace-nowrap",children:[d.jsx(Mm,{})," Nuovo"]})]})]}),d.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-background rounded-lg overflow-x-auto whitespace-nowrap",children:[d.jsx(M$,{className:"text-muted ml-1 flex-shrink-0"}),d.jsx(M,{status:"all",label:"Tutti",count:T.all}),d.jsx(M,{status:"paid",label:"Pagato",count:T.paid}),d.jsx(M,{status:"expiring",label:"In Scadenza",count:T.expiring}),d.jsx(M,{status:"expired",label:"Scaduto",count:T.expired})]}),d.jsx(ct.div,{className:"bg-card rounded-xl shadow border border-white/10 overflow-hidden",initial:{opacity:0},animate:{opacity:1},children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-white/5 text-left",children:[d.jsxs("th",{className:"p-3 cursor-pointer select-none",onClick:()=>R("name"),children:["Nome ",d.jsx(C,{col:"name"})]}),d.jsx("th",{className:"p-3",children:"Email"}),d.jsx("th",{className:"p-3",children:"Stato Pagamento"}),d.jsxs("th",{className:"p-3 cursor-pointer select-none",onClick:()=>R("scadenza"),children:["Scadenza ",d.jsx(C,{col:"scadenza"})]}),d.jsx("th",{className:"p-3 text-right",children:"Azioni"})]})}),d.jsx("tbody",{children:E.map((b,k)=>d.jsxs(ct.tr,{className:"border-b border-white/10 hover:bg-white/5",initial:{opacity:0},animate:{opacity:1},transition:{delay:k*.05},children:[d.jsx("td",{className:"p-3 font-medium",children:d.jsx("button",{className:"hover:underline",onClick:()=>t(`/client/${b.id}`),children:b.name||"-"})}),d.jsx("td",{className:"p-3 text-muted",children:b.email||"-"}),d.jsx("td",{className:"p-3",children:d.jsx(sQ,{status:Tc(b.scadenza)})}),d.jsx("td",{className:"p-3 text-muted",children:$c(b.scadenza)?$c(b.scadenza).toLocaleDateString("it-IT"):"-"}),d.jsx("td",{className:"p-3",children:d.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[d.jsx("button",{onClick:()=>t(`/edit/${b.id}`),className:"p-1.5 text-yellow-400 hover:bg-white/10 rounded-md",title:"Modifica",children:d.jsx(O$,{size:14})}),d.jsx("button",{onClick:()=>v(b.id),className:"p-1.5 text-red-400 hover:bg-white/10 rounded-md",title:"Elimina",children:d.jsx(Oh,{size:14})})]})})]},b.id))})]})})})]})}var Uh=t=>t.type==="checkbox",No=t=>t instanceof Date,In=t=>t==null;const OO=t=>typeof t=="object";var Dt=t=>!In(t)&&!Array.isArray(t)&&OO(t)&&!No(t),aQ=t=>Dt(t)&&t.target?Uh(t.target)?t.target.checked:t.target.value:t,lQ=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,cQ=(t,e)=>t.has(lQ(e)),uQ=t=>{const e=t.constructor&&t.constructor.prototype;return Dt(e)&&e.hasOwnProperty("isPrototypeOf")},Xw=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ut(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(Xw&&(t instanceof Blob||r))&&(n||Dt(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!uQ(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Ut(t[i]));else return t;return e}var Xm=t=>/^\w*$/.test(t),Ct=t=>t===void 0,Jw=t=>Array.isArray(t)?t.filter(Boolean):[],Zw=t=>Jw(t.replace(/["|']|\]/g,"").split(/\.|\[/)),ae=(t,e,n)=>{if(!e||!Dt(t))return n;const r=(Xm(e)?[e]:Zw(e)).reduce((i,s)=>In(i)?i:i[s],t);return Ct(r)||r===t?Ct(t[e])?n:t[e]:r},Kr=t=>typeof t=="boolean",nt=(t,e,n)=>{let r=-1;const i=Xm(e)?[e]:Zw(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=n;if(r!==o){const c=t[a];l=Dt(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const vI={BLUR:"blur",FOCUS_OUT:"focusout"},kr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},xi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},hQ=rt.createContext(null);hQ.displayName="HookFormContext";var dQ=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==kr.all&&(e._proxyFormState[o]=!r||kr.all),t[o]}});return i};const fQ=typeof window<"u"?rt.useLayoutEffect:rt.useEffect;var Qn=t=>typeof t=="string",pQ=(t,e,n,r,i)=>Qn(t)?(r&&e.watch.add(t),ae(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),ae(n,s))):(r&&(e.watchAll=!0),n),R_=t=>In(t)||!OO(t);function fs(t,e,n=new WeakSet){if(R_(t)||R_(e))return t===e;if(No(t)&&No(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const s of r){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(No(o)&&No(a)||Dt(o)&&Dt(a)||Array.isArray(o)&&Array.isArray(a)?!fs(o,a,n):o!==a)return!1}}return!0}var mQ=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},mu=t=>Array.isArray(t)?t:[t],_I=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function MO(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],s=e[r];if(i&&Dt(i)&&s){const o=MO(i,s);Dt(o)&&(n[r]=o)}else t[r]&&(n[r]=s)}return n}var Mn=t=>Dt(t)&&!Object.keys(t).length,eb=t=>t.type==="file",Ir=t=>typeof t=="function",$p=t=>{if(!Xw)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},jO=t=>t.type==="select-multiple",tb=t=>t.type==="radio",gQ=t=>tb(t)||Uh(t),Ry=t=>$p(t)&&t.isConnected;function yQ(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Ct(t)?r++:t[e[r++]];return t}function vQ(t){for(const e in t)if(t.hasOwnProperty(e)&&!Ct(t[e]))return!1;return!0}function kt(t,e){const n=Array.isArray(e)?e:Xm(e)?[e]:Zw(e),r=n.length===1?t:yQ(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Dt(r)&&Mn(r)||Array.isArray(r)&&vQ(r))&&kt(t,n.slice(0,-1)),t}var _Q=t=>{for(const e in t)if(Ir(t[e]))return!0;return!1};function LO(t){return Array.isArray(t)||Dt(t)&&!_Q(t)}function N_(t,e={}){for(const n in t)LO(t[n])?(e[n]=Array.isArray(t[n])?[]:{},N_(t[n],e[n])):In(t[n])||(e[n]=!0);return e}function Ia(t,e,n){n||(n=N_(e));for(const r in t)LO(t[r])?Ct(e)||R_(n[r])?n[r]=N_(t[r],Array.isArray(t[r])?[]:{}):Ia(t[r],In(e)?{}:e[r],n[r]):n[r]=!fs(t[r],e[r]);return n}const xI={value:!1,isValid:!1},wI={value:!0,isValid:!0};var VO=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Ct(t[0].attributes.value)?Ct(t[0].value)||t[0].value===""?wI:{value:t[0].value,isValid:!0}:wI:xI}return xI},FO=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Ct(t)?t:e?t===""?NaN:t&&+t:n&&Qn(t)?new Date(t):r?r(t):t;const bI={isValid:!1,value:null};var UO=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,bI):bI;function SI(t){const e=t.ref;return eb(e)?e.files:tb(e)?UO(t.refs).value:jO(e)?[...e.selectedOptions].map(({value:n})=>n):Uh(e)?VO(t.refs).value:FO(Ct(e.value)?t.ref.value:e.value,t)}var xQ=(t,e,n,r)=>{const i={};for(const s of t){const o=ae(e,s);o&&nt(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},Wp=t=>t instanceof RegExp,kc=t=>Ct(t)?t:Wp(t)?t.source:Dt(t)?Wp(t.value)?t.value.source:t.value:t,EI=t=>({isOnSubmit:!t||t===kr.onSubmit,isOnBlur:t===kr.onBlur,isOnChange:t===kr.onChange,isOnAll:t===kr.all,isOnTouch:t===kr.onTouched});const TI="AsyncFunction";var wQ=t=>!!t&&!!t.validate&&!!(Ir(t.validate)&&t.validate.constructor.name===TI||Dt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===TI)),bQ=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),kI=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const gu=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=ae(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(gu(a,e))break}else if(Dt(a)&&gu(a,e))break}}};function II(t,e,n){const r=ae(t,n);if(r||Xm(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=ae(e,s),a=ae(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:n}}var SQ=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return Mn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||kr.all))},EQ=(t,e,n)=>!t||!e||t===e||mu(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),TQ=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,kQ=(t,e)=>!Jw(ae(t,e)).length&&kt(t,e),IQ=(t,e,n)=>{const r=mu(ae(t,n));return nt(r,"root",e[n]),nt(t,n,r),t};function CI(t,e,n="validate"){if(Qn(t)||Array.isArray(t)&&t.every(Qn)||Kr(t)&&!t)return{type:n,message:Qn(t)?t:"",ref:e}}var ba=t=>Dt(t)&&!Wp(t)?t:{value:t,message:""},AI=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:f,max:p,pattern:m,validate:y,name:_,valueAsNumber:x,mount:v}=t._f,w=ae(n,_);if(!v||e.has(_))return{};const E=a?a[0]:o,R=I=>{i&&E.reportValidity&&(E.setCustomValidity(Kr(I)?"":I||""),E.reportValidity())},C={},M=tb(o),T=Uh(o),b=M||T,k=(x||eb(o))&&Ct(o.value)&&Ct(w)||$p(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,A=mQ.bind(null,_,r,C),O=(I,P,B,z=xi.maxLength,H=xi.minLength)=>{const Y=I?P:B;C[_]={type:I?z:H,message:Y,ref:o,...A(I?z:H,Y)}};if(s?!Array.isArray(w)||!w.length:l&&(!b&&(k||In(w))||Kr(w)&&!w||T&&!VO(a).isValid||M&&!UO(a).isValid)){const{value:I,message:P}=Qn(l)?{value:!!l,message:l}:ba(l);if(I&&(C[_]={type:xi.required,message:P,ref:E,...A(xi.required,P)},!r))return R(P),C}if(!k&&(!In(f)||!In(p))){let I,P;const B=ba(p),z=ba(f);if(!In(w)&&!isNaN(w)){const H=o.valueAsNumber||w&&+w;In(B.value)||(I=H>B.value),In(z.value)||(P=H<z.value)}else{const H=o.valueAsDate||new Date(w),Y=Z=>new Date(new Date().toDateString()+" "+Z),$=o.type=="time",J=o.type=="week";Qn(B.value)&&w&&(I=$?Y(w)>Y(B.value):J?w>B.value:H>new Date(B.value)),Qn(z.value)&&w&&(P=$?Y(w)<Y(z.value):J?w<z.value:H<new Date(z.value))}if((I||P)&&(O(!!I,B.message,z.message,xi.max,xi.min),!r))return R(C[_].message),C}if((c||u)&&!k&&(Qn(w)||s&&Array.isArray(w))){const I=ba(c),P=ba(u),B=!In(I.value)&&w.length>+I.value,z=!In(P.value)&&w.length<+P.value;if((B||z)&&(O(B,I.message,P.message),!r))return R(C[_].message),C}if(m&&!k&&Qn(w)){const{value:I,message:P}=ba(m);if(Wp(I)&&!w.match(I)&&(C[_]={type:xi.pattern,message:P,ref:o,...A(xi.pattern,P)},!r))return R(P),C}if(y){if(Ir(y)){const I=await y(w,n),P=CI(I,E);if(P&&(C[_]={...P,...A(xi.validate,P.message)},!r))return R(P.message),C}else if(Dt(y)){let I={};for(const P in y){if(!Mn(I)&&!r)break;const B=CI(await y[P](w,n),E,P);B&&(I={...B,...A(P,B.message)},R(B.message),r&&(C[_]=I))}if(!Mn(I)&&(C[_]={ref:E,...I},!r))return C}}return R(!0),C};const CQ={mode:kr.onSubmit,reValidateMode:kr.onChange,shouldFocusError:!0};function AQ(t={}){let e={...CQ,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ir(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Dt(e.defaultValues)||Dt(e.values)?Ut(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Ut(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const p={array:_I(),state:_I()},m=e.criteriaMode===kr.all,y=j=>V=>{clearTimeout(c),c=setTimeout(j,V)},_=async j=>{if(!e.disabled&&(u.isValid||f.isValid||j)){const V=e.resolver?Mn((await T()).errors):await k(r,!0);V!==n.isValid&&p.state.next({isValid:V})}},x=(j,V)=>{!e.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((j||Array.from(a.mount)).forEach(U=>{U&&(V?nt(n.validatingFields,U,V):kt(n.validatingFields,U))}),p.state.next({validatingFields:n.validatingFields,isValidating:!Mn(n.validatingFields)}))},v=(j,V=[],U,ee,Q=!0,G=!0)=>{if(ee&&U&&!e.disabled){if(o.action=!0,G&&Array.isArray(ae(r,j))){const te=U(ae(r,j),ee.argA,ee.argB);Q&&nt(r,j,te)}if(G&&Array.isArray(ae(n.errors,j))){const te=U(ae(n.errors,j),ee.argA,ee.argB);Q&&nt(n.errors,j,te),kQ(n.errors,j)}if((u.touchedFields||f.touchedFields)&&G&&Array.isArray(ae(n.touchedFields,j))){const te=U(ae(n.touchedFields,j),ee.argA,ee.argB);Q&&nt(n.touchedFields,j,te)}(u.dirtyFields||f.dirtyFields)&&(n.dirtyFields=Ia(i,s)),p.state.next({name:j,isDirty:O(j,V),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else nt(s,j,V)},w=(j,V)=>{nt(n.errors,j,V),p.state.next({errors:n.errors})},E=j=>{n.errors=j,p.state.next({errors:n.errors,isValid:!1})},R=(j,V,U,ee)=>{const Q=ae(r,j);if(Q){const G=ae(s,j,Ct(U)?ae(i,j):U);Ct(G)||ee&&ee.defaultChecked||V?nt(s,j,V?G:SI(Q._f)):B(j,G),o.mount&&_()}},C=(j,V,U,ee,Q)=>{let G=!1,te=!1;const he={name:j};if(!e.disabled){if(!U||ee){(u.isDirty||f.isDirty)&&(te=n.isDirty,n.isDirty=he.isDirty=O(),G=te!==he.isDirty);const Pe=fs(ae(i,j),V);te=!!ae(n.dirtyFields,j),Pe?kt(n.dirtyFields,j):nt(n.dirtyFields,j,!0),he.dirtyFields=n.dirtyFields,G=G||(u.dirtyFields||f.dirtyFields)&&te!==!Pe}if(U){const Pe=ae(n.touchedFields,j);Pe||(nt(n.touchedFields,j,U),he.touchedFields=n.touchedFields,G=G||(u.touchedFields||f.touchedFields)&&Pe!==U)}G&&Q&&p.state.next(he)}return G?he:{}},M=(j,V,U,ee)=>{const Q=ae(n.errors,j),G=(u.isValid||f.isValid)&&Kr(V)&&n.isValid!==V;if(e.delayError&&U?(l=y(()=>w(j,U)),l(e.delayError)):(clearTimeout(c),l=null,U?nt(n.errors,j,U):kt(n.errors,j)),(U?!fs(Q,U):Q)||!Mn(ee)||G){const te={...ee,...G&&Kr(V)?{isValid:V}:{},errors:n.errors,name:j};n={...n,...te},p.state.next(te)}},T=async j=>{x(j,!0);const V=await e.resolver(s,e.context,xQ(j||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return x(j),V},b=async j=>{const{errors:V}=await T(j);if(j)for(const U of j){const ee=ae(V,U);ee?nt(n.errors,U,ee):kt(n.errors,U)}else n.errors=V;return V},k=async(j,V,U={valid:!0})=>{for(const ee in j){const Q=j[ee];if(Q){const{_f:G,...te}=Q;if(G){const he=a.array.has(G.name),Pe=Q._f&&wQ(Q._f);Pe&&u.validatingFields&&x([G.name],!0);const Ot=await AI(Q,a.disabled,s,m,e.shouldUseNativeValidation&&!V,he);if(Pe&&u.validatingFields&&x([G.name]),Ot[G.name]&&(U.valid=!1,V))break;!V&&(ae(Ot,G.name)?he?IQ(n.errors,Ot,G.name):nt(n.errors,G.name,Ot[G.name]):kt(n.errors,G.name))}!Mn(te)&&await k(te,V,U)}}return U.valid},A=()=>{for(const j of a.unMount){const V=ae(r,j);V&&(V._f.refs?V._f.refs.every(U=>!Ry(U)):!Ry(V._f.ref))&&ot(j)}a.unMount=new Set},O=(j,V)=>!e.disabled&&(j&&V&&nt(s,j,V),!fs(Z(),i)),I=(j,V,U)=>pQ(j,a,{...o.mount?s:Ct(V)?i:Qn(j)?{[j]:V}:V},U,V),P=j=>Jw(ae(o.mount?s:i,j,e.shouldUnregister?ae(i,j,[]):[])),B=(j,V,U={})=>{const ee=ae(r,j);let Q=V;if(ee){const G=ee._f;G&&(!G.disabled&&nt(s,j,FO(V,G)),Q=$p(G.ref)&&In(V)?"":V,jO(G.ref)?[...G.ref.options].forEach(te=>te.selected=Q.includes(te.value)):G.refs?Uh(G.ref)?G.refs.forEach(te=>{(!te.defaultChecked||!te.disabled)&&(Array.isArray(Q)?te.checked=!!Q.find(he=>he===te.value):te.checked=Q===te.value||!!Q)}):G.refs.forEach(te=>te.checked=te.value===Q):eb(G.ref)?G.ref.value="":(G.ref.value=Q,G.ref.type||p.state.next({name:j,values:Ut(s)})))}(U.shouldDirty||U.shouldTouch)&&C(j,Q,U.shouldTouch,U.shouldDirty,!0),U.shouldValidate&&J(j)},z=(j,V,U)=>{for(const ee in V){if(!V.hasOwnProperty(ee))return;const Q=V[ee],G=j+"."+ee,te=ae(r,G);(a.array.has(j)||Dt(Q)||te&&!te._f)&&!No(Q)?z(G,Q,U):B(G,Q,U)}},H=(j,V,U={})=>{const ee=ae(r,j),Q=a.array.has(j),G=Ut(V);nt(s,j,G),Q?(p.array.next({name:j,values:Ut(s)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&U.shouldDirty&&p.state.next({name:j,dirtyFields:Ia(i,s),isDirty:O(j,G)})):ee&&!ee._f&&!In(G)?z(j,G,U):B(j,G,U),kI(j,a)&&p.state.next({...n,name:j}),p.state.next({name:o.mount?j:void 0,values:Ut(s)})},Y=async j=>{o.mount=!0;const V=j.target;let U=V.name,ee=!0;const Q=ae(r,U),G=Pe=>{ee=Number.isNaN(Pe)||No(Pe)&&isNaN(Pe.getTime())||fs(Pe,ae(s,U,Pe))},te=EI(e.mode),he=EI(e.reValidateMode);if(Q){let Pe,Ot;const jr=V.type?SI(Q._f):aQ(j),qn=j.type===vI.BLUR||j.type===vI.FOCUS_OUT,pi=!bQ(Q._f)&&!e.resolver&&!ae(n.errors,U)&&!Q._f.deps||TQ(qn,ae(n.touchedFields,U),n.isSubmitted,he,te),vr=kI(U,a,qn);nt(s,U,jr),qn?(!V||!V.readOnly)&&(Q._f.onBlur&&Q._f.onBlur(j),l&&l(0)):Q._f.onChange&&Q._f.onChange(j);const mi=C(U,jr,qn),no=!Mn(mi)||vr;if(!qn&&p.state.next({name:U,type:j.type,values:Ut(s)}),pi)return(u.isValid||f.isValid)&&(e.mode==="onBlur"?qn&&_():qn||_()),no&&p.state.next({name:U,...vr?{}:mi});if(!qn&&vr&&p.state.next({...n}),e.resolver){const{errors:ro}=await T([U]);if(G(jr),ee){const fa=II(n.errors,r,U),Lr=II(ro,r,fa.name||U);Pe=Lr.error,U=Lr.name,Ot=Mn(ro)}}else x([U],!0),Pe=(await AI(Q,a.disabled,s,m,e.shouldUseNativeValidation))[U],x([U]),G(jr),ee&&(Pe?Ot=!1:(u.isValid||f.isValid)&&(Ot=await k(r,!0)));ee&&(Q._f.deps&&(!Array.isArray(Q._f.deps)||Q._f.deps.length>0)&&J(Q._f.deps),M(U,Ot,Pe,mi))}},$=(j,V)=>{if(ae(n.errors,V)&&j.focus)return j.focus(),1},J=async(j,V={})=>{let U,ee;const Q=mu(j);if(e.resolver){const G=await b(Ct(j)?j:Q);U=Mn(G),ee=j?!Q.some(te=>ae(G,te)):U}else j?(ee=(await Promise.all(Q.map(async G=>{const te=ae(r,G);return await k(te&&te._f?{[G]:te}:te)}))).every(Boolean),!(!ee&&!n.isValid)&&_()):ee=U=await k(r);return p.state.next({...!Qn(j)||(u.isValid||f.isValid)&&U!==n.isValid?{}:{name:j},...e.resolver||!j?{isValid:U}:{},errors:n.errors}),V.shouldFocus&&!ee&&gu(r,$,j?Q:a.mount),ee},Z=(j,V)=>{let U={...o.mount?s:i};return V&&(U=MO(V.dirtyFields?n.dirtyFields:n.touchedFields,U)),Ct(j)?U:Qn(j)?ae(U,j):j.map(ee=>ae(U,ee))},ye=(j,V)=>({invalid:!!ae((V||n).errors,j),isDirty:!!ae((V||n).dirtyFields,j),error:ae((V||n).errors,j),isValidating:!!ae(n.validatingFields,j),isTouched:!!ae((V||n).touchedFields,j)}),pe=j=>{j&&mu(j).forEach(V=>kt(n.errors,V)),p.state.next({errors:j?n.errors:{}})},xe=(j,V,U)=>{const ee=(ae(r,j,{_f:{}})._f||{}).ref,Q=ae(n.errors,j)||{},{ref:G,message:te,type:he,...Pe}=Q;nt(n.errors,j,{...Pe,...V,ref:ee}),p.state.next({name:j,errors:n.errors,isValid:!1}),U&&U.shouldFocus&&ee&&ee.focus&&ee.focus()},We=(j,V)=>Ir(j)?p.state.subscribe({next:U=>"values"in U&&j(I(void 0,V),U)}):I(j,V,!0),tt=j=>p.state.subscribe({next:V=>{EQ(j.name,V.name,j.exact)&&SQ(V,j.formState||u,Qi,j.reRenderRoot)&&j.callback({values:{...s},...n,...V,defaultValues:i})}}).unsubscribe,He=j=>(o.mount=!0,f={...f,...j.formState},tt({...j,formState:f})),ot=(j,V={})=>{for(const U of j?mu(j):a.mount)a.mount.delete(U),a.array.delete(U),V.keepValue||(kt(r,U),kt(s,U)),!V.keepError&&kt(n.errors,U),!V.keepDirty&&kt(n.dirtyFields,U),!V.keepTouched&&kt(n.touchedFields,U),!V.keepIsValidating&&kt(n.validatingFields,U),!e.shouldUnregister&&!V.keepDefaultValue&&kt(i,U);p.state.next({values:Ut(s)}),p.state.next({...n,...V.keepDirty?{isDirty:O()}:{}}),!V.keepIsValid&&_()},rn=({disabled:j,name:V})=>{(Kr(j)&&o.mount||j||a.disabled.has(V))&&(j?a.disabled.add(V):a.disabled.delete(V))},sn=(j,V={})=>{let U=ae(r,j);const ee=Kr(V.disabled)||Kr(e.disabled);return nt(r,j,{...U||{},_f:{...U&&U._f?U._f:{ref:{name:j}},name:j,mount:!0,...V}}),a.mount.add(j),U?rn({disabled:Kr(V.disabled)?V.disabled:e.disabled,name:j}):R(j,!0,V.value),{...ee?{disabled:V.disabled||e.disabled}:{},...e.progressive?{required:!!V.required,min:kc(V.min),max:kc(V.max),minLength:kc(V.minLength),maxLength:kc(V.maxLength),pattern:kc(V.pattern)}:{},name:j,onChange:Y,onBlur:Y,ref:Q=>{if(Q){sn(j,V),U=ae(r,j);const G=Ct(Q.value)&&Q.querySelectorAll&&Q.querySelectorAll("input,select,textarea")[0]||Q,te=gQ(G),he=U._f.refs||[];if(te?he.find(Pe=>Pe===G):G===U._f.ref)return;nt(r,j,{_f:{...U._f,...te?{refs:[...he.filter(Ry),G,...Array.isArray(ae(i,j))?[{}]:[]],ref:{type:G.type,name:j}}:{ref:G}}}),R(j,!1,void 0,G)}else U=ae(r,j,{}),U._f&&(U._f.mount=!1),(e.shouldUnregister||V.shouldUnregister)&&!(cQ(a.array,j)&&o.action)&&a.unMount.add(j)}}},Nn=()=>e.shouldFocusError&&gu(r,$,a.mount),Hn=j=>{Kr(j)&&(p.state.next({disabled:j}),gu(r,(V,U)=>{const ee=ae(r,U);ee&&(V.disabled=ee._f.disabled||j,Array.isArray(ee._f.refs)&&ee._f.refs.forEach(Q=>{Q.disabled=ee._f.disabled||j}))},0,!1))},re=(j,V)=>async U=>{let ee;U&&(U.preventDefault&&U.preventDefault(),U.persist&&U.persist());let Q=Ut(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:G,values:te}=await T();n.errors=G,Q=Ut(te)}else await k(r);if(a.disabled.size)for(const G of a.disabled)kt(Q,G);if(kt(n.errors,"root"),Mn(n.errors)){p.state.next({errors:{}});try{await j(Q,U)}catch(G){ee=G}}else V&&await V({...n.errors},U),Nn(),setTimeout(Nn);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Mn(n.errors)&&!ee,submitCount:n.submitCount+1,errors:n.errors}),ee)throw ee},Fe=(j,V={})=>{ae(r,j)&&(Ct(V.defaultValue)?H(j,Ut(ae(i,j))):(H(j,V.defaultValue),nt(i,j,Ut(V.defaultValue))),V.keepTouched||kt(n.touchedFields,j),V.keepDirty||(kt(n.dirtyFields,j),n.isDirty=V.defaultValue?O(j,Ut(ae(i,j))):O()),V.keepError||(kt(n.errors,j),u.isValid&&_()),p.state.next({...n}))},ve=(j,V={})=>{const U=j?Ut(j):i,ee=Ut(U),Q=Mn(j),G=Q?i:ee;if(V.keepDefaultValues||(i=U),!V.keepValues){if(V.keepDirtyValues){const te=new Set([...a.mount,...Object.keys(Ia(i,s))]);for(const he of Array.from(te))ae(n.dirtyFields,he)?nt(G,he,ae(s,he)):H(he,ae(G,he))}else{if(Xw&&Ct(j))for(const te of a.mount){const he=ae(r,te);if(he&&he._f){const Pe=Array.isArray(he._f.refs)?he._f.refs[0]:he._f.ref;if($p(Pe)){const Ot=Pe.closest("form");if(Ot){Ot.reset();break}}}}if(V.keepFieldsRef)for(const te of a.mount)H(te,ae(G,te));else r={}}s=e.shouldUnregister?V.keepDefaultValues?Ut(i):{}:Ut(G),p.array.next({values:{...G}}),p.state.next({values:{...G}})}a={mount:V.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!V.keepIsValid||!!V.keepDirtyValues,o.watch=!!e.shouldUnregister,p.state.next({submitCount:V.keepSubmitCount?n.submitCount:0,isDirty:Q?!1:V.keepDirty?n.isDirty:!!(V.keepDefaultValues&&!fs(j,i)),isSubmitted:V.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Q?{}:V.keepDirtyValues?V.keepDefaultValues&&s?Ia(i,s):n.dirtyFields:V.keepDefaultValues&&j?Ia(i,j):V.keepDirty?n.dirtyFields:{},touchedFields:V.keepTouched?n.touchedFields:{},errors:V.keepErrors?n.errors:{},isSubmitSuccessful:V.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Ue=(j,V)=>ve(Ir(j)?j(s):j,V),be=(j,V={})=>{const U=ae(r,j),ee=U&&U._f;if(ee){const Q=ee.refs?ee.refs[0]:ee.ref;Q.focus&&(Q.focus(),V.shouldSelect&&Ir(Q.select)&&Q.select())}},Qi=j=>{n={...n,...j}},Xi={control:{register:sn,unregister:ot,getFieldState:ye,handleSubmit:re,setError:xe,_subscribe:tt,_runSchema:T,_focusError:Nn,_getWatch:I,_getDirty:O,_setValid:_,_setFieldArray:v,_setDisabledField:rn,_setErrors:E,_getFieldArray:P,_reset:ve,_resetDefaultValues:()=>Ir(e.defaultValues)&&e.defaultValues().then(j=>{Ue(j,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:A,_disableForm:Hn,_subjects:p,_proxyFormState:u,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(j){o=j},get _defaultValues(){return i},get _names(){return a},set _names(j){a=j},get _formState(){return n},get _options(){return e},set _options(j){e={...e,...j}}},subscribe:He,trigger:J,register:sn,handleSubmit:re,watch:We,setValue:H,getValues:Z,reset:Ue,resetField:Fe,clearErrors:pe,unregister:ot,setError:xe,setFocus:be,getFieldState:ye};return{...Xi,formControl:Xi}}function Hl(t={}){const e=rt.useRef(void 0),n=rt.useRef(void 0),[r,i]=rt.useState({isDirty:!1,isValidating:!1,isLoading:Ir(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ir(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Ir(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=AQ(t);e.current={...a,formState:r}}const s=e.current.control;return s._options=t,fQ(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),rt.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),rt.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),rt.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),rt.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),rt.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),rt.useEffect(()=>{t.values&&!fs(t.values,n.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),rt.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=dQ(r,s),e.current}const PQ=()=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let r=0,i=e.length;r<8;++r)n+=e.charAt(Math.floor(Math.random()*i));return n},PI=(t,e,n)=>`Ciao ${t},

Ecco le tue credenziali per accedere alla tua area riservata:

Email (Username): ${e}
Password Temporanea: ${n}
Link di accesso: https://mentalfitmanager.github.io/#/client-login

Ti consiglio di cambiare la password al primo accesso.
A presto!`;function RQ(){const t=nn(),{register:e,handleSubmit:n,reset:r,formState:{isSubmitting:i}}=Hl(),[s,o]=D.useState(!1),[a,l]=D.useState(null),[c,u]=D.useState(!1),[f,p]=D.useState(null),m=async C=>{const M=PQ();try{const T=Rm(se),b=Ce(Ge(se,"clients")),k=b.id,A=parseInt(C.duration,10),O=new Date;O.setMonth(O.getMonth()+A);const I={name:C.name,name_lowercase:C.name.toLowerCase(),email:C.email,phone:C.phone||null,status:"attivo",planType:C.planType,createdAt:Nt(),scadenza:O,isClient:!0,firstLogin:!0,tempPassword:M};if(T.set(b,I),C.paymentAmount){const P=Ce(Ge(se,"clients",k,"payments")),B={amount:parseFloat(C.paymentAmount),duration:`${A} mes${A>1?"i":"e"}`,paymentMethod:C.paymentMethod||null,paymentDate:Nt()};T.set(P,B)}await T.commit(),l({name:C.name,email:C.email,password:M}),p(k),o(!0)}catch(T){console.error("Errore nella creazione del cliente:",T),alert(`Errore: ${T.message}`)}},y=()=>{const C=PI(a.name,a.email,a.password);navigator.clipboard.writeText(C),u(!0),setTimeout(()=>u(!1),2500)},_=()=>{o(!1),r(),t(f?`/clients/${f}`:"/clients")},x="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",v="block mb-1 text-sm font-medium text-muted",w="bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md",E="font-semibold mb-3 text-lg text-primary",R=a?PI(a.name,a.email,a.password):"";return d.jsxs(d.Fragment,{children:[d.jsxs(ct.div,{className:"w-full max-w-2xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Onboarding Nuovo Cliente"}),d.jsxs("button",{onClick:()=>t("/clients"),className:"flex items-center gap-2 px-3 py-1.5 bg-card/50 text-sm rounded-lg border border-white/10 backdrop-blur-sm hover:bg-white/10",children:[d.jsx(Xs,{})," Torna"]})]}),d.jsxs("form",{onSubmit:n(m),className:"space-y-6",children:[d.jsxs("div",{className:w,children:[d.jsx("h4",{className:E,children:"1. Anagrafica"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:v,children:"Nome e Cognome*"}),d.jsx("input",{...e("name",{required:!0}),className:x})]}),d.jsxs("div",{children:[d.jsx("label",{className:v,children:"Email (sar il suo username)*"}),d.jsx("input",{type:"email",...e("email",{required:!0}),className:x})]}),d.jsxs("div",{children:[d.jsx("label",{className:v,children:"Telefono (Opzionale)"}),d.jsx("input",{...e("phone"),className:x})]})]})]}),d.jsxs("div",{className:w,children:[d.jsx("h4",{className:E,children:"2. Dettagli Percorso"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:v,children:"Tipo di Percorso*"}),d.jsxs("select",{...e("planType",{required:!0}),className:x,children:[d.jsx("option",{value:"allenamento",children:"Solo Allenamento"}),d.jsx("option",{value:"alimentazione",children:"Solo Alimentazione"}),d.jsx("option",{value:"completo",children:"Completo (Allenamento + Alimentazione)"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:v,children:"Durata del Percorso*"}),d.jsxs("select",{...e("duration",{required:!0}),className:x,children:[d.jsx("option",{value:"",children:"Seleziona durata"}),[...Array(24).keys()].map(C=>{const M=C+1;return d.jsxs("option",{value:M,children:[M," mes",M>1?"i":"e"]},M)})]})]})]})]}),d.jsxs("div",{className:w,children:[d.jsxs("h4",{className:E+" flex items-center gap-2",children:[d.jsx(la,{})," 3. Primo Pagamento (Opzionale)"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:v,children:"Importo Pagato ()"}),d.jsx("input",{type:"number",step:"0.01",...e("paymentAmount"),className:x})]}),d.jsxs("div",{children:[d.jsx("label",{className:v,children:"Metodo di Pagamento"}),d.jsx("input",{...e("paymentMethod"),className:x,placeholder:"Es. Bonifico, Contanti"})]})]})]}),d.jsx("div",{className:"flex justify-end pt-4",children:d.jsxs("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-5 py-2.5 bg-primary hover:bg-primary/80 text-white rounded-lg transition disabled:opacity-50 font-semibold",children:[d.jsx(jm,{})," ",i?"Creazione in corso...":"Crea Cliente e Genera Password"]})})]})]}),d.jsx(zl,{children:s&&d.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:d.jsxs(ct.div,{className:"bg-card p-6 rounded-2xl border border-white/10 w-full max-w-md shadow-2xl",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[d.jsx("h2",{className:"text-xl font-bold text-center text-foreground",children:"Cliente Creato con Successo!"}),d.jsx("p",{className:"text-center text-muted text-sm mt-2",children:"Copia il messaggio e invialo al cliente per il suo primo accesso."}),d.jsxs("div",{className:"my-6",children:[d.jsx("label",{className:"block mb-2 text-sm font-medium text-muted",children:"Messaggio pronto da copiare:"}),d.jsx("textarea",{readOnly:!0,value:R,className:"w-full p-3 bg-background border border-white/10 rounded-lg text-white font-mono text-sm resize-none h-48"})]}),d.jsx(ct.button,{onClick:y,className:"w-full py-3 bg-green-500 text-white font-semibold rounded-lg flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:c?d.jsxs(d.Fragment,{children:[d.jsx(rD,{})," Messaggio Copiato!"]}):d.jsxs(d.Fragment,{children:[d.jsx(j$,{})," Copia Messaggio Completo"]})}),d.jsx("button",{onClick:_,className:"w-full mt-2 py-2 text-muted text-sm text-center hover:text-white",children:"Chiudi e vai alla scheda cliente"})]})})})]})}function BO(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=BO(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Jm(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=BO(t))&&(r&&(r+=" "),r+=e);return r}const NQ=(t,e,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const i=Object.getOwnPropertyDescriptor(t,n),s=Object.getOwnPropertyDescriptor(e,n);!DQ(i,s)&&r||Object.defineProperty(t,n,s)},DQ=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},OQ=(t,e)=>{const n=Object.getPrototypeOf(e);n!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,n)},MQ=(t,e)=>`/* Wrapped ${t}*/
${e}`,jQ=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),LQ=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),VQ=(t,e,n)=>{const r=n===""?"":`with ${n.trim()}() `,i=MQ.bind(null,r,e.toString());Object.defineProperty(i,"name",LQ);const{writable:s,enumerable:o,configurable:a}=jQ;Object.defineProperty(t,"toString",{value:i,writable:s,enumerable:o,configurable:a})};function FQ(t,e,{ignoreNonConfigurable:n=!1}={}){const{name:r}=t;for(const i of Reflect.ownKeys(e))NQ(t,e,i,n);return OQ(t,e),VQ(t,e,r),t}const UQ=new WeakMap,RI=new WeakMap;function zO(t,{cacheKey:e,cache:n=new Map,maxAge:r}={}){if(r===0)return t;if(typeof r=="number"){if(r>2147483647)throw new TypeError("The `maxAge` option cannot exceed 2147483647.");if(r<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const i=function(...s){var u;const o=e?e(s):s[0],a=n.get(o);if(a)return a.data;const l=t.apply(this,s),c=typeof r=="function"?r(...s):r;if(n.set(o,{data:l,maxAge:c?Date.now()+c:Number.POSITIVE_INFINITY}),c&&c>0&&c!==Number.POSITIVE_INFINITY){const f=setTimeout(()=>{n.delete(o)},c);(u=f.unref)==null||u.call(f);const p=RI.get(t)??new Set;p.add(f),RI.set(t,p)}return l};return FQ(i,t,{ignoreNonConfigurable:!0}),UQ.set(i,n),i}function BQ(t){return typeof t=="string"}function zQ(t,e,n){return n.indexOf(t)===e}function $Q(t){return t.toLowerCase()===t}function NI(t){return t.indexOf(",")===-1?t:t.split(",")}function D_(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var e=t.split(".")[0],n=e===void 0?"":e;return D_(n)}if(t.indexOf("@")!==-1){var r=t.split("@")[0],n=r===void 0?"":r;return D_(n)}if(t.indexOf("-")===-1||!$Q(t))return t;var i=t.split("-"),s=i[0],o=i[1],a=o===void 0?"":o;return"".concat(s,"-").concat(a.toUpperCase())}function WQ(t){var e=t===void 0?{}:t,n=e.useFallbackLocale,r=n===void 0?!0:n,i=e.fallbackLocale,s=i===void 0?"en-US":i,o=[];if(typeof navigator<"u"){for(var a=navigator.languages||[],l=[],c=0,u=a;c<u.length;c++){var f=u[c];l=l.concat(NI(f))}var p=navigator.language,m=p&&NI(p);o=o.concat(l,m)}return r&&o.push(s),o.filter(BQ).map(D_).filter(zQ)}var HQ=zO(WQ,{cacheKey:JSON.stringify});function qQ(t){return HQ(t)[0]||null}var $O=zO(qQ,{cacheKey:JSON.stringify});function Yi(t,e,n){return function(i,s=n){const o=t(i)+s;return e(o)}}function Bh(t){return function(n){return new Date(t(n).getTime()-1)}}function zh(t,e){return function(r){return[t(r),e(r)]}}function st(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;const e=Number.parseInt(t,10);if(typeof t=="string"&&!Number.isNaN(e))return e;throw new Error(`Failed to get year from date: ${t}.`)}function eo(t){if(t instanceof Date)return t.getMonth();throw new Error(`Failed to get month from date: ${t}.`)}function Zm(t){if(t instanceof Date)return t.getDate();throw new Error(`Failed to get year from date: ${t}.`)}function ql(t){const e=st(t),n=e+(-e+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}const KQ=Yi(st,ql,-100),WO=Yi(st,ql,100),nb=Bh(WO),GQ=Yi(st,nb,-100),HO=zh(ql,nb);function to(t){const e=st(t),n=e+(-e+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}const qO=Yi(st,to,-10),rb=Yi(st,to,10),eg=Bh(rb),KO=Yi(st,eg,-10),GO=zh(to,eg);function Kl(t){const e=st(t),n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}const YO=Yi(st,Kl,-1),ib=Yi(st,Kl,1),tg=Bh(ib),QO=Yi(st,tg,-1),YQ=zh(Kl,tg);function sb(t,e){return function(r,i=e){const s=st(r),o=eo(r)+i,a=new Date;return a.setFullYear(s,o,1),a.setHours(0,0,0,0),t(a)}}function ha(t){const e=st(t),n=eo(t),r=new Date;return r.setFullYear(e,n,1),r.setHours(0,0,0,0),r}const XO=sb(ha,-1),ob=sb(ha,1),$h=Bh(ob),JO=sb($h,-1),QQ=zh(ha,$h);function XQ(t,e){return function(r,i=e){const s=st(r),o=eo(r),a=Zm(r)+i,l=new Date;return l.setFullYear(s,o,a),l.setHours(0,0,0,0),t(l)}}function Wh(t){const e=st(t),n=eo(t),r=Zm(t),i=new Date;return i.setFullYear(e,n,r),i.setHours(0,0,0,0),i}const JQ=XQ(Wh,1),ab=Bh(JQ),ZQ=zh(Wh,ab);function ZO(t){return Zm($h(t))}var Xt={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},eX={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},lb=[0,1,2,3,4,5,6],Ny=new Map;function tX(t){return function(n,r){var i=n||$O();Ny.has(i)||Ny.set(i,new Map);var s=Ny.get(i);return s.has(t)||s.set(t,new Intl.DateTimeFormat(i||void 0,t).format),s.get(t)(r)}}function nX(t){var e=new Date(t);return new Date(e.setHours(12))}function da(t){return function(e,n){return tX(t)(e,nX(n))}}var rX={day:"numeric"},iX={day:"numeric",month:"long",year:"numeric"},sX={month:"long"},oX={month:"long",year:"numeric"},aX={weekday:"short"},lX={weekday:"long"},cX={year:"numeric"},uX=da(rX),hX=da(iX),dX=da(sX),eM=da(oX),fX=da(aX),pX=da(lX),ng=da(cX),mX=lb[0],gX=lb[5],DI=lb[6];function oh(t,e){e===void 0&&(e=Xt.ISO_8601);var n=t.getDay();switch(e){case Xt.ISO_8601:return(n+6)%7;case Xt.ISLAMIC:return(n+1)%7;case Xt.HEBREW:case Xt.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function yX(t){var e=ql(t);return st(e)}function vX(t){var e=to(t);return st(e)}function O_(t,e){e===void 0&&(e=Xt.ISO_8601);var n=st(t),r=eo(t),i=t.getDate()-oh(t,e);return new Date(n,r,i)}function _X(t,e){e===void 0&&(e=Xt.ISO_8601);var n=e===Xt.GREGORY?Xt.GREGORY:Xt.ISO_8601,r=O_(t,e),i=st(t)+1,s,o;do s=new Date(i,0,n===Xt.ISO_8601?4:1),o=O_(s,e),i-=1;while(t<o);return Math.round((r.getTime()-o.getTime())/(864e5*7))+1}function Fo(t,e){switch(t){case"century":return ql(e);case"decade":return to(e);case"year":return Kl(e);case"month":return ha(e);case"day":return Wh(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function xX(t,e){switch(t){case"century":return KQ(e);case"decade":return qO(e);case"year":return YO(e);case"month":return XO(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function tM(t,e){switch(t){case"century":return WO(e);case"decade":return rb(e);case"year":return ib(e);case"month":return ob(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function wX(t,e){switch(t){case"decade":return qO(e,-100);case"year":return YO(e,-10);case"month":return XO(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function bX(t,e){switch(t){case"decade":return rb(e,100);case"year":return ib(e,10);case"month":return ob(e,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function nM(t,e){switch(t){case"century":return nb(e);case"decade":return eg(e);case"year":return tg(e);case"month":return $h(e);case"day":return ab(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function SX(t,e){switch(t){case"century":return GQ(e);case"decade":return KO(e);case"year":return QO(e);case"month":return JO(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function EX(t,e){switch(t){case"decade":return KO(e,-100);case"year":return QO(e,-10);case"month":return JO(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function OI(t,e){switch(t){case"century":return HO(e);case"decade":return GO(e);case"year":return YQ(e);case"month":return QQ(e);case"day":return ZQ(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function TX(t,e,n){var r=[e,n].sort(function(i,s){return i.getTime()-s.getTime()});return[Fo(t,r[0]),nM(t,r[1])]}function rM(t,e,n){return n.map(function(r){return(e||ng)(t,r)}).join("  ")}function kX(t,e,n){return rM(t,e,HO(n))}function iM(t,e,n){return rM(t,e,GO(n))}function IX(t){return t.getDay()===new Date().getDay()}function sM(t,e){e===void 0&&(e=Xt.ISO_8601);var n=t.getDay();switch(e){case Xt.ISLAMIC:case Xt.HEBREW:return n===gX||n===DI;case Xt.ISO_8601:case Xt.GREGORY:return n===DI||n===mX;default:throw new Error("Unsupported calendar type.")}}var zr="react-calendar__navigation";function CX(t){var e=t.activeStartDate,n=t.drillUp,r=t.formatMonthYear,i=r===void 0?eM:r,s=t.formatYear,o=s===void 0?ng:s,a=t.locale,l=t.maxDate,c=t.minDate,u=t.navigationAriaLabel,f=u===void 0?"":u,p=t.navigationAriaLive,m=t.navigationLabel,y=t.next2AriaLabel,_=y===void 0?"":y,x=t.next2Label,v=x===void 0?"":x,w=t.nextAriaLabel,E=w===void 0?"":w,R=t.nextLabel,C=R===void 0?"":R,M=t.prev2AriaLabel,T=M===void 0?"":M,b=t.prev2Label,k=b===void 0?"":b,A=t.prevAriaLabel,O=A===void 0?"":A,I=t.prevLabel,P=I===void 0?"":I,B=t.setActiveStartDate,z=t.showDoubleView,H=t.view,Y=t.views,$=Y.indexOf(H)>0,J=H!=="century",Z=xX(H,e),ye=J?wX(H,e):void 0,pe=tM(H,e),xe=J?bX(H,e):void 0,We=function(){if(Z.getFullYear()<0)return!0;var ve=SX(H,e);return c&&c>=ve}(),tt=J&&function(){if(ye.getFullYear()<0)return!0;var ve=EX(H,e);return c&&c>=ve}(),He=l&&l<pe,ot=J&&l&&l<xe;function rn(){B(Z,"prev")}function sn(){B(ye,"prev2")}function Nn(){B(pe,"next")}function Hn(){B(xe,"next2")}function re(ve){var Ue=function(){switch(H){case"century":return kX(a,o,ve);case"decade":return iM(a,o,ve);case"year":return o(a,ve);case"month":return i(a,ve);default:throw new Error("Invalid view: ".concat(H,"."))}}();return m?m({date:ve,label:Ue,locale:a||$O()||void 0,view:H}):Ue}function Fe(){var ve="".concat(zr,"__label");return d.jsxs("button",{"aria-label":f,"aria-live":p,className:ve,disabled:!$,onClick:n,style:{flexGrow:1},type:"button",children:[d.jsx("span",{className:"".concat(ve,"__labelText ").concat(ve,"__labelText--from"),children:re(e)}),z?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"".concat(ve,"__divider"),children:"  "}),d.jsx("span",{className:"".concat(ve,"__labelText ").concat(ve,"__labelText--to"),children:re(pe)})]}):null]})}return d.jsxs("div",{className:zr,children:[k!==null&&J?d.jsx("button",{"aria-label":T,className:"".concat(zr,"__arrow ").concat(zr,"__prev2-button"),disabled:tt,onClick:sn,type:"button",children:k}):null,P!==null&&d.jsx("button",{"aria-label":O,className:"".concat(zr,"__arrow ").concat(zr,"__prev-button"),disabled:We,onClick:rn,type:"button",children:P}),Fe(),C!==null&&d.jsx("button",{"aria-label":E,className:"".concat(zr,"__arrow ").concat(zr,"__next-button"),disabled:He,onClick:Nn,type:"button",children:C}),v!==null&&J?d.jsx("button",{"aria-label":_,className:"".concat(zr,"__arrow ").concat(zr,"__next2-button"),disabled:ot,onClick:Hn,type:"button",children:v}):null]})}var Ka=function(){return Ka=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ka.apply(this,arguments)},AX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function MI(t){return"".concat(t,"%")}function cb(t){var e=t.children,n=t.className,r=t.count,i=t.direction,s=t.offset,o=t.style,a=t.wrap,l=AX(t,["children","className","count","direction","offset","style","wrap"]);return d.jsx("div",Ka({className:n,style:Ka({display:"flex",flexDirection:i,flexWrap:a?"wrap":"nowrap"},o)},l,{children:D.Children.map(e,function(c,u){var f=s&&u===0?MI(100*s/r):null;return D.cloneElement(c,Ka(Ka({},c.props),{style:{flexBasis:MI(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:f,marginInlineStart:f,marginInlineEnd:0}}))})}))}function PX(t,e,n){return e&&e>t?e:n&&n<t?n:t}function ah(t,e){return e[0]<=t&&e[1]>=t}function RX(t,e){return t[0]<=e[0]&&t[1]>=e[1]}function oM(t,e){return ah(t[0],e)||ah(t[1],e)}function jI(t,e,n){var r=oM(e,t),i=[];if(r){i.push(n);var s=ah(t[0],e),o=ah(t[1],e);s&&i.push("".concat(n,"Start")),o&&i.push("".concat(n,"End")),s&&o&&i.push("".concat(n,"BothEnds"))}return i}function NX(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function DX(t){if(!t)throw new Error("args is required");var e=t.value,n=t.date,r=t.hover,i="react-calendar__tile",s=[i];if(!n)return s;var o=new Date,a=function(){if(Array.isArray(n))return n;var m=t.dateType;if(!m)throw new Error("dateType is required when date is not an array of two dates");return OI(m,n)}();if(ah(o,a)&&s.push("".concat(i,"--now")),!e||!NX(e))return s;var l=function(){if(Array.isArray(e))return e;var m=t.valueType;if(!m)throw new Error("valueType is required when value is not an array of two dates");return OI(m,e)}();RX(l,a)?s.push("".concat(i,"--active")):oM(l,a)&&s.push("".concat(i,"--hasActive"));var c=jI(l,a,"".concat(i,"--range"));s.push.apply(s,c);var u=Array.isArray(e)?e:[e];if(r&&u.length===1){var f=r>l[0]?[l[0],r]:[r,l[0]],p=jI(f,a,"".concat(i,"--hover"));s.push.apply(s,p)}return s}function rg(t){for(var e=t.className,n=t.count,r=n===void 0?3:n,i=t.dateTransform,s=t.dateType,o=t.end,a=t.hover,l=t.offset,c=t.renderTile,u=t.start,f=t.step,p=f===void 0?1:f,m=t.value,y=t.valueType,_=[],x=u;x<=o;x+=p){var v=i(x);_.push(c({classes:DX({date:v,dateType:s,hover:a,value:m,valueType:y}),date:v}))}return d.jsx(cb,{className:e,count:r,offset:l,wrap:!0,children:_})}function ig(t){var e=t.activeStartDate,n=t.children,r=t.classes,i=t.date,s=t.formatAbbr,o=t.locale,a=t.maxDate,l=t.maxDateTransform,c=t.minDate,u=t.minDateTransform,f=t.onClick,p=t.onMouseOver,m=t.style,y=t.tileClassName,_=t.tileContent,x=t.tileDisabled,v=t.view,w=D.useMemo(function(){var R={activeStartDate:e,date:i,view:v};return typeof y=="function"?y(R):y},[e,i,y,v]),E=D.useMemo(function(){var R={activeStartDate:e,date:i,view:v};return typeof _=="function"?_(R):_},[e,i,_,v]);return d.jsxs("button",{className:Jm(r,w),disabled:c&&u(c)>i||a&&l(a)<i||(x==null?void 0:x({activeStartDate:e,date:i,view:v})),onClick:f?function(R){return f(i,R)}:void 0,onFocus:p?function(){return p(i)}:void 0,onMouseOver:p?function(){return p(i)}:void 0,style:m,type:"button",children:[s?d.jsx("abbr",{"aria-label":s(o,i),children:n}):n,E]})}var M_=function(){return M_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},M_.apply(this,arguments)},OX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},LI="react-calendar__century-view__decades__decade";function MX(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentCentury,i=t.formatYear,s=i===void 0?ng:i,o=OX(t,["classes","currentCentury","formatYear"]),a=o.date,l=o.locale,c=[];return n&&c.push.apply(c,n),c.push(LI),ql(a).getFullYear()!==r&&c.push("".concat(LI,"--neighboringCentury")),d.jsx(ig,M_({},o,{classes:c,maxDateTransform:eg,minDateTransform:to,view:"century",children:iM(l,s,a)}))}var j_=function(){return j_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},j_.apply(this,arguments)},VI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function jX(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringCentury,i=t.value,s=t.valueType,o=VI(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),a=yX(e),l=a+(r?119:99);return d.jsx(rg,{className:"react-calendar__century-view__decades",dateTransform:to,dateType:"decade",end:l,hover:n,renderTile:function(c){var u=c.date,f=VI(c,["date"]);return d.jsx(MX,j_({},o,f,{activeStartDate:e,currentCentury:a,date:u}),u.getTime())},start:a,step:10,value:i,valueType:s})}var L_=function(){return L_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},L_.apply(this,arguments)};function LX(t){function e(){return d.jsx(jX,L_({},t))}return d.jsx("div",{className:"react-calendar__century-view",children:e()})}var V_=function(){return V_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},V_.apply(this,arguments)},VX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},FI="react-calendar__decade-view__years__year";function FX(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentDecade,i=t.formatYear,s=i===void 0?ng:i,o=VX(t,["classes","currentDecade","formatYear"]),a=o.date,l=o.locale,c=[];return n&&c.push.apply(c,n),c.push(FI),to(a).getFullYear()!==r&&c.push("".concat(FI,"--neighboringDecade")),d.jsx(ig,V_({},o,{classes:c,maxDateTransform:tg,minDateTransform:Kl,view:"decade",children:s(l,a)}))}var F_=function(){return F_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},F_.apply(this,arguments)},UI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function UX(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringDecade,i=t.value,s=t.valueType,o=UI(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),a=vX(e),l=a+(r?11:9);return d.jsx(rg,{className:"react-calendar__decade-view__years",dateTransform:Kl,dateType:"year",end:l,hover:n,renderTile:function(c){var u=c.date,f=UI(c,["date"]);return d.jsx(FX,F_({},o,f,{activeStartDate:e,currentDecade:a,date:u}),u.getTime())},start:a,value:i,valueType:s})}var U_=function(){return U_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},U_.apply(this,arguments)};function BX(t){function e(){return d.jsx(UX,U_({},t))}return d.jsx("div",{className:"react-calendar__decade-view",children:e()})}var B_=function(){return B_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},B_.apply(this,arguments)},zX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},BI=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},$X="react-calendar__year-view__months__month";function WX(t){var e=t.classes,n=e===void 0?[]:e,r=t.formatMonth,i=r===void 0?dX:r,s=t.formatMonthYear,o=s===void 0?eM:s,a=zX(t,["classes","formatMonth","formatMonthYear"]),l=a.date,c=a.locale;return d.jsx(ig,B_({},a,{classes:BI(BI([],n,!0),[$X],!1),formatAbbr:o,maxDateTransform:$h,minDateTransform:ha,view:"year",children:i(c,l)}))}var z_=function(){return z_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},z_.apply(this,arguments)},zI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function HX(t){var e=t.activeStartDate,n=t.hover,r=t.value,i=t.valueType,s=zI(t,["activeStartDate","hover","value","valueType"]),o=0,a=11,l=st(e);return d.jsx(rg,{className:"react-calendar__year-view__months",dateTransform:function(c){var u=new Date;return u.setFullYear(l,c,1),ha(u)},dateType:"month",end:a,hover:n,renderTile:function(c){var u=c.date,f=zI(c,["date"]);return d.jsx(WX,z_({},s,f,{activeStartDate:e,date:u}),u.getTime())},start:o,value:r,valueType:i})}var $_=function(){return $_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},$_.apply(this,arguments)};function qX(t){function e(){return d.jsx(HX,$_({},t))}return d.jsx("div",{className:"react-calendar__year-view",children:e()})}var W_=function(){return W_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},W_.apply(this,arguments)},KX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Dy="react-calendar__month-view__days__day";function GX(t){var e=t.calendarType,n=t.classes,r=n===void 0?[]:n,i=t.currentMonthIndex,s=t.formatDay,o=s===void 0?uX:s,a=t.formatLongDate,l=a===void 0?hX:a,c=KX(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),u=c.date,f=c.locale,p=[];return r&&p.push.apply(p,r),p.push(Dy),sM(u,e)&&p.push("".concat(Dy,"--weekend")),u.getMonth()!==i&&p.push("".concat(Dy,"--neighboringMonth")),d.jsx(ig,W_({},c,{classes:p,formatAbbr:l,maxDateTransform:ab,minDateTransform:Wh,view:"month",children:o(f,u)}))}var H_=function(){return H_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},H_.apply(this,arguments)},$I=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function YX(t){var e=t.activeStartDate,n=t.calendarType,r=t.hover,i=t.showFixedNumberOfWeeks,s=t.showNeighboringMonth,o=t.value,a=t.valueType,l=$I(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),c=st(e),u=eo(e),f=i||s,p=oh(e,n),m=f?0:p,y=(f?-p:0)+1,_=function(){if(i)return y+6*7-1;var x=ZO(e);if(s){var v=new Date;v.setFullYear(c,u,x),v.setHours(0,0,0,0);var w=7-oh(v,n)-1;return x+w}return x}();return d.jsx(rg,{className:"react-calendar__month-view__days",count:7,dateTransform:function(x){var v=new Date;return v.setFullYear(c,u,x),Wh(v)},dateType:"day",hover:r,end:_,renderTile:function(x){var v=x.date,w=$I(x,["date"]);return d.jsx(GX,H_({},l,w,{activeStartDate:e,calendarType:n,currentMonthIndex:u,date:v}),v.getTime())},offset:m,start:y,value:o,valueType:a})}var aM="react-calendar__month-view__weekdays",Oy="".concat(aM,"__weekday");function QX(t){for(var e=t.calendarType,n=t.formatShortWeekday,r=n===void 0?fX:n,i=t.formatWeekday,s=i===void 0?pX:i,o=t.locale,a=t.onMouseLeave,l=new Date,c=ha(l),u=st(c),f=eo(c),p=[],m=1;m<=7;m+=1){var y=new Date(u,f,m-oh(c,e)),_=s(o,y);p.push(d.jsx("div",{className:Jm(Oy,IX(y)&&"".concat(Oy,"--current"),sM(y,e)&&"".concat(Oy,"--weekend")),children:d.jsx("abbr",{"aria-label":_,title:_,children:r(o,y).replace(".","")})},m))}return d.jsx(cb,{className:aM,count:7,onFocus:a,onMouseOver:a,children:p})}var Hp=function(){return Hp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Hp.apply(this,arguments)},WI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},HI="react-calendar__tile";function XX(t){var e=t.onClickWeekNumber,n=t.weekNumber,r=d.jsx("span",{children:n});if(e){var i=t.date,s=t.onClickWeekNumber,o=t.weekNumber,a=WI(t,["date","onClickWeekNumber","weekNumber"]);return d.jsx("button",Hp({},a,{className:HI,onClick:function(l){return s(o,i,l)},type:"button",children:r}))}else{t.date,t.onClickWeekNumber,t.weekNumber;var a=WI(t,["date","onClickWeekNumber","weekNumber"]);return d.jsx("div",Hp({},a,{className:HI,children:r}))}}function JX(t){var e=t.activeStartDate,n=t.calendarType,r=t.onClickWeekNumber,i=t.onMouseLeave,s=t.showFixedNumberOfWeeks,o=function(){if(s)return 6;var c=ZO(e),u=oh(e,n),f=c-(7-u);return 1+Math.ceil(f/7)}(),a=function(){for(var c=st(e),u=eo(e),f=Zm(e),p=[],m=0;m<o;m+=1)p.push(O_(new Date(c,u,f+m*7),n));return p}(),l=a.map(function(c){return _X(c,n)});return d.jsx(cb,{className:"react-calendar__month-view__weekNumbers",count:o,direction:"column",onFocus:i,onMouseOver:i,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:l.map(function(c,u){var f=a[u];if(!f)throw new Error("date is not defined");return d.jsx(XX,{date:f,onClickWeekNumber:r,weekNumber:c},c)})})}var q_=function(){return q_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},q_.apply(this,arguments)},ZX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function eJ(t){if(t)for(var e=0,n=Object.entries(eX);e<n.length;e++){var r=n[e],i=r[0],s=r[1];if(s.includes(t))return i}return Xt.ISO_8601}function tJ(t){var e=t.activeStartDate,n=t.locale,r=t.onMouseLeave,i=t.showFixedNumberOfWeeks,s=t.calendarType,o=s===void 0?eJ(n):s,a=t.formatShortWeekday,l=t.formatWeekday,c=t.onClickWeekNumber,u=t.showWeekNumbers,f=ZX(t,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function p(){return d.jsx(QX,{calendarType:o,formatShortWeekday:a,formatWeekday:l,locale:n,onMouseLeave:r})}function m(){return u?d.jsx(JX,{activeStartDate:e,calendarType:o,onClickWeekNumber:c,onMouseLeave:r,showFixedNumberOfWeeks:i}):null}function y(){return d.jsx(YX,q_({calendarType:o},f))}var _="react-calendar__month-view";return d.jsx("div",{className:Jm(_,u?"".concat(_,"--weekNumbers"):""),children:d.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[m(),d.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[p(),y()]})]})})}var Ga=function(){return Ga=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ga.apply(this,arguments)},Yd="react-calendar",Nf=["century","decade","year","month"],nJ=["decade","year","month","day"],ub=new Date;ub.setFullYear(1,0,1);ub.setHours(0,0,0,0);var rJ=new Date(864e13);function Wc(t){return t instanceof Date?t:new Date(t)}function lM(t,e){return Nf.slice(Nf.indexOf(t),Nf.indexOf(e)+1)}function iJ(t,e,n){var r=lM(e,n);return r.indexOf(t)!==-1}function hb(t,e,n){return t&&iJ(t,e,n)?t:n}function cM(t){var e=Nf.indexOf(t);return nJ[e]}function sJ(t,e){var n=Array.isArray(t)?t[e]:t;if(!n)return null;var r=Wc(n);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(t));return r}function uM(t,e){var n=t.value,r=t.minDate,i=t.maxDate,s=t.maxDetail,o=sJ(n,e);if(!o)return null;var a=cM(s),l=function(){switch(e){case 0:return Fo(a,o);case 1:return nM(a,o);default:throw new Error("Invalid index value: ".concat(e))}}();return PX(l,r,i)}var db=function(t){return uM(t,0)},hM=function(t){return uM(t,1)},oJ=function(t){return[db,hM].map(function(e){return e(t)})};function dM(t){var e=t.maxDate,n=t.maxDetail,r=t.minDate,i=t.minDetail,s=t.value,o=t.view,a=hb(o,i,n),l=db({value:s,minDate:r,maxDate:e,maxDetail:n})||new Date;return Fo(a,l)}function aJ(t){var e=t.activeStartDate,n=t.defaultActiveStartDate,r=t.defaultValue,i=t.defaultView,s=t.maxDate,o=t.maxDetail,a=t.minDate,l=t.minDetail,c=t.value,u=t.view,f=hb(u,l,o),p=e||n;return p?Fo(f,p):dM({maxDate:s,maxDetail:o,minDate:a,minDetail:l,value:c||r,view:u||i})}function My(t){return t&&(!Array.isArray(t)||t.length===1)}function Qd(t,e){return t instanceof Date&&e instanceof Date&&t.getTime()===e.getTime()}var fM=D.forwardRef(function(e,n){var r=e.activeStartDate,i=e.allowPartialRange,s=e.calendarType,o=e.className,a=e.defaultActiveStartDate,l=e.defaultValue,c=e.defaultView,u=e.formatDay,f=e.formatLongDate,p=e.formatMonth,m=e.formatMonthYear,y=e.formatShortWeekday,_=e.formatWeekday,x=e.formatYear,v=e.goToRangeStartOnSelect,w=v===void 0?!0:v,E=e.inputRef,R=e.locale,C=e.maxDate,M=C===void 0?rJ:C,T=e.maxDetail,b=T===void 0?"month":T,k=e.minDate,A=k===void 0?ub:k,O=e.minDetail,I=O===void 0?"century":O,P=e.navigationAriaLabel,B=e.navigationAriaLive,z=e.navigationLabel,H=e.next2AriaLabel,Y=e.next2Label,$=e.nextAriaLabel,J=e.nextLabel,Z=e.onActiveStartDateChange,ye=e.onChange,pe=e.onClickDay,xe=e.onClickDecade,We=e.onClickMonth,tt=e.onClickWeekNumber,He=e.onClickYear,ot=e.onDrillDown,rn=e.onDrillUp,sn=e.onViewChange,Nn=e.prev2AriaLabel,Hn=e.prev2Label,re=e.prevAriaLabel,Fe=e.prevLabel,ve=e.returnValue,Ue=ve===void 0?"start":ve,be=e.selectRange,Qi=e.showDoubleView,Gl=e.showFixedNumberOfWeeks,Xi=e.showNavigation,j=Xi===void 0?!0:Xi,V=e.showNeighboringCentury,U=e.showNeighboringDecade,ee=e.showNeighboringMonth,Q=ee===void 0?!0:ee,G=e.showWeekNumbers,te=e.tileClassName,he=e.tileContent,Pe=e.tileDisabled,Ot=e.value,jr=e.view,qn=D.useState(a),pi=qn[0],vr=qn[1],mi=D.useState(null),no=mi[0],ro=mi[1],fa=D.useState(Array.isArray(l)?l.map(function(_e){return _e!==null?Wc(_e):null}):l!=null?Wc(l):null),Lr=fa[0],Hh=fa[1],Yl=D.useState(c),io=Yl[0],pa=Yl[1],Vt=r||pi||aJ({activeStartDate:r,defaultActiveStartDate:a,defaultValue:l,defaultView:c,maxDate:M,maxDetail:b,minDate:A,minDetail:I,value:Ot,view:jr}),gt=function(){var _e=function(){return be&&My(Lr)?Lr:Ot!==void 0?Ot:Lr}();return _e?Array.isArray(_e)?_e.map(function(Oe){return Oe!==null?Wc(Oe):null}):_e!==null?Wc(_e):null:null}(),so=cM(b),Be=hb(jr||io,I,b),Kn=lM(I,b),oo=be?no:null,ma=Kn.indexOf(Be)<Kn.length-1,Ft=Kn.indexOf(Be)>0,Ql=D.useCallback(function(_e){var Oe=function(){switch(Ue){case"start":return db;case"end":return hM;case"range":return oJ;default:throw new Error("Invalid returnValue.")}}();return Oe({maxDate:M,maxDetail:b,minDate:A,value:_e})},[M,b,A,Ue]),gi=D.useCallback(function(_e,Oe){vr(_e);var at={action:Oe,activeStartDate:_e,value:gt,view:Be};Z&&!Qd(Vt,_e)&&Z(at)},[Vt,Z,gt,Be]),Vr=D.useCallback(function(_e,Oe){var at=function(){switch(Be){case"century":return xe;case"decade":return He;case"year":return We;case"month":return pe;default:throw new Error("Invalid view: ".concat(Be,"."))}}();at&&at(_e,Oe)},[pe,xe,We,He,Be]),Xl=D.useCallback(function(_e,Oe){if(ma){Vr(_e,Oe);var at=Kn[Kn.indexOf(Be)+1];if(!at)throw new Error("Attempted to drill down from the lowest view.");vr(_e),pa(at);var Dn={action:"drillDown",activeStartDate:_e,value:gt,view:at};Z&&!Qd(Vt,_e)&&Z(Dn),sn&&Be!==at&&sn(Dn),ot&&ot(Dn)}},[Vt,ma,Z,Vr,ot,sn,gt,Be,Kn]),Jl=D.useCallback(function(){if(Ft){var _e=Kn[Kn.indexOf(Be)-1];if(!_e)throw new Error("Attempted to drill up from the highest view.");var Oe=Fo(_e,Vt);vr(Oe),pa(_e);var at={action:"drillUp",activeStartDate:Oe,value:gt,view:_e};Z&&!Qd(Vt,Oe)&&Z(at),sn&&Be!==_e&&sn(at),rn&&rn(at)}},[Vt,Ft,Z,rn,sn,gt,Be,Kn]),Fr=D.useCallback(function(_e,Oe){var at=gt;Vr(_e,Oe);var Dn=be&&!My(at),En;if(be)if(Dn)En=Fo(so,_e);else{if(!at)throw new Error("previousValue is required");if(Array.isArray(at))throw new Error("previousValue must not be an array");En=TX(so,at,_e)}else En=Ql(_e);var lo=!be||Dn||w?dM({maxDate:M,maxDetail:b,minDate:A,minDetail:I,value:En,view:Be}):null;Oe.persist(),vr(lo),Hh(En);var Kh={action:"onChange",activeStartDate:lo,value:En,view:Be};if(Z&&!Qd(Vt,lo)&&Z(Kh),ye)if(be){var Gh=My(En);if(!Gh)ye(En||null,Oe);else if(i){if(Array.isArray(En))throw new Error("value must not be an array");ye([En||null,null],Oe)}}else ye(En||null,Oe)},[Vt,i,Ql,w,M,b,A,I,Z,ye,Vr,be,gt,so,Be]);function sg(_e){ro(_e)}function Zl(){ro(null)}D.useImperativeHandle(n,function(){return{activeStartDate:Vt,drillDown:Xl,drillUp:Jl,onChange:Fr,setActiveStartDate:gi,value:gt,view:Be}},[Vt,Xl,Jl,Fr,gi,gt,Be]);function ao(_e){var Oe=_e?tM(Be,Vt):Fo(Be,Vt),at=ma?Xl:Fr,Dn={activeStartDate:Oe,hover:oo,locale:R,maxDate:M,minDate:A,onClick:at,onMouseOver:be?sg:void 0,tileClassName:te,tileContent:he,tileDisabled:Pe,value:gt,valueType:so};switch(Be){case"century":return d.jsx(LX,Ga({formatYear:x,showNeighboringCentury:V},Dn));case"decade":return d.jsx(BX,Ga({formatYear:x,showNeighboringDecade:U},Dn));case"year":return d.jsx(qX,Ga({formatMonth:p,formatMonthYear:m},Dn));case"month":return d.jsx(tJ,Ga({calendarType:s,formatDay:u,formatLongDate:f,formatShortWeekday:y,formatWeekday:_,onClickWeekNumber:tt,onMouseLeave:be?Zl:void 0,showFixedNumberOfWeeks:typeof Gl<"u"?Gl:Qi,showNeighboringMonth:Q,showWeekNumbers:G},Dn));default:throw new Error("Invalid view: ".concat(Be,"."))}}function qh(){return j?d.jsx(CX,{activeStartDate:Vt,drillUp:Jl,formatMonthYear:m,formatYear:x,locale:R,maxDate:M,minDate:A,navigationAriaLabel:P,navigationAriaLive:B,navigationLabel:z,next2AriaLabel:H,next2Label:Y,nextAriaLabel:$,nextLabel:J,prev2AriaLabel:Nn,prev2Label:Hn,prevAriaLabel:re,prevLabel:Fe,setActiveStartDate:gi,showDoubleView:Qi,view:Be,views:Kn}):null}var ec=Array.isArray(gt)?gt:[gt];return d.jsxs("div",{className:Jm(Yd,be&&ec.length===1&&"".concat(Yd,"--selectRange"),Qi&&"".concat(Yd,"--doubleView"),o),ref:E,children:[qh(),d.jsxs("div",{className:"".concat(Yd,"__viewContainer"),onBlur:be?Zl:void 0,onMouseLeave:be?Zl:void 0,children:[ao(),Qi?ao(!0):null]})]})});let Xd;const lJ=new Uint8Array(16);function cJ(){if(!Xd&&(Xd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Xd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xd(lJ)}const qt=[];for(let t=0;t<256;++t)qt.push((t+256).toString(16).slice(1));function uJ(t,e=0){return qt[t[e+0]]+qt[t[e+1]]+qt[t[e+2]]+qt[t[e+3]]+"-"+qt[t[e+4]]+qt[t[e+5]]+"-"+qt[t[e+6]]+qt[t[e+7]]+"-"+qt[t[e+8]]+qt[t[e+9]]+"-"+qt[t[e+10]]+qt[t[e+11]]+qt[t[e+12]]+qt[t[e+13]]+qt[t[e+14]]+qt[t[e+15]]}const hJ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qI={randomUUID:hJ};function fb(t,e,n){if(qI.randomUUID&&!t)return qI.randomUUID();t=t||{};const r=t.random||(t.rng||cJ)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,uJ(r)}function dJ({clientId:t}){const{register:e,handleSubmit:n,reset:r,formState:{errors:i}}=Hl(),[s,o]=D.useState(!1),[a,l]=D.useState(0),c=async p=>{o(!0),l(0);const m=Array.from(p.photos);if(m.length===0){alert("Per favore, seleziona almeno una foto."),o(!1);return}try{const y=await Promise.all(m.map(_=>new Promise((x,v)=>{const w=`${fb()}-${_.name}`,E=El(w$,`clients/${t}/checks/${w}`),R=m$(E,_);R.on("state_changed",C=>{const M=C.bytesTransferred/C.totalBytes*100;l(M)},C=>v(C),async()=>{const C=await Dm(R.snapshot.ref);x(C)})})));await Ph(Ge(se,"clients",t,"checks"),{notes:p.notes,photoURLs:y,createdAt:Nt()}),r()}catch(y){console.error("Errore nel processo di salvataggio del check:",y),alert("Si  verificato un errore durante il salvataggio.")}finally{o(!1),l(0)}},u="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary transition-all",f="block mb-1 text-sm font-medium text-muted";return d.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[d.jsxs("h3",{className:"text-xl font-semibold mb-4 text-primary flex items-center gap-2",children:[d.jsx(U$,{})," Nuovo Check"]}),d.jsxs("form",{onSubmit:n(c),className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"notes",className:f,children:"Note sui progressi"}),d.jsx("textarea",{id:"notes",...e("notes"),rows:"4",className:u,placeholder:"Es. Aumento carichi, sensazioni, misure..."})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"photos",className:f,children:"Foto Progressi"}),d.jsx("input",{id:"photos",type:"file",multiple:!0,accept:"image/png, image/jpeg, image/webp",...e("photos",{required:"Le foto sono obbligatorie."}),className:"w-full text-sm text-muted file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary/20 file:text-primary hover:file:bg-primary/30"}),i.photos&&d.jsx("p",{className:"text-red-400 text-xs mt-1",children:i.photos.message})]}),s&&d.jsx("div",{className:"w-full bg-background rounded-full h-2.5",children:d.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${a}%`}})}),d.jsx("div",{className:"flex justify-end",children:d.jsx("button",{type:"submit",disabled:s,className:"px-5 py-2.5 bg-primary hover:bg-primary/80 text-white rounded-lg transition disabled:opacity-50 font-semibold",children:s?`Caricamento... ${Math.round(a)}%`:"Salva Check"})})]})]})}function fJ({clientId:t,onSave:e}){const{register:n,handleSubmit:r,formState:{isSubmitting:i,errors:s}}=Hl(),[o,a]=D.useState(""),[l,c]=D.useState(!1),u=async _=>{a(""),c(!1);try{const x=Ce(se,"clients",t,"anamnesi","initial");await Rr(x,{..._,createdAt:Nt()}),a("Anamnesi salvata con successo!"),setTimeout(e,1500)}catch(x){console.error("Errore nel salvataggio dell'anamnesi:",x),a("Si  verificato un errore. Riprova."),c(!0)}},f="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",p="block mb-1 text-sm font-medium text-muted",m="bg-card p-4 rounded-lg border border-white/10",y="font-semibold mb-3 text-lg text-primary";return d.jsxs(ct.div,{initial:{opacity:0},animate:{opacity:1},children:[d.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Compila Anamnesi Iniziale"}),d.jsxs("form",{onSubmit:r(u),className:"space-y-6",children:[d.jsxs("div",{className:m,children:[d.jsx("h4",{className:y,children:"Dati Anagrafici e Misure"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Nome*"}),d.jsx("input",{...n("firstName",{required:!0}),className:f})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Cognome*"}),d.jsx("input",{...n("lastName",{required:!0}),className:f})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Data di Nascita*"}),d.jsx("input",{type:"date",...n("birthDate",{required:!0}),className:f+" text-muted"})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Che lavoro fai?*"}),d.jsx("input",{...n("job",{required:!0}),className:f,placeholder:"Es. Impiegato, operaio..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Peso (kg)*"}),d.jsx("input",{type:"number",step:"0.1",...n("weight",{required:!0}),className:f,placeholder:"Es. 75.5"})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Altezza (cm)*"}),d.jsx("input",{type:"number",...n("height",{required:!0}),className:f,placeholder:"Es. 180"})]})]})]}),d.jsxs("div",{className:m,children:[d.jsx("h4",{className:y,children:"Abitudini Alimentari"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Quanti pasti riesci a fare al giorno?*"}),d.jsxs("select",{...n("mealsPerDay",{required:!0}),className:f,children:[d.jsx("option",{value:"3",children:"3"}),d.jsx("option",{value:"4",children:"4"}),d.jsx("option",{value:"5",children:"5"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Colazione: Dolce o Salata?*"}),d.jsxs("select",{...n("breakfastType",{required:!0}),className:f,children:[d.jsx("option",{value:"dolce",children:"Dolce"}),d.jsx("option",{value:"salato",children:"Salato"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Scrivimi una lista di alimenti da inserire nella settimana*"}),d.jsx("textarea",{...n("desiredFoods",{required:!0}),rows:"3",className:f,placeholder:"Elenca qui gli alimenti che preferisci..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Cosa non mangi?*"}),d.jsx("textarea",{...n("dislikedFoods",{required:!0}),rows:"2",className:f,placeholder:"Elenca qui gli alimenti da evitare..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Hai intolleranze?*"}),d.jsx("input",{...n("intolerances",{required:!0}),className:f,placeholder:"Es. Lattosio, glutine, nessuna..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Hai problemi di digestione o gonfiore?*"}),d.jsx("input",{...n("digestionIssues",{required:!0}),className:f,placeholder:"S/No, e se s quali..."})]})]})]}),d.jsxs("div",{className:m,children:[d.jsx("h4",{className:y,children:"Allenamento"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Quanti allenamenti a settimana?*"}),d.jsx("input",{type:"number",...n("workoutsPerWeek",{required:!0}),className:f,placeholder:"Es. 3"})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Specialit, dove ti alleni e con quali attrezzi?*"}),d.jsx("textarea",{...n("trainingDetails",{required:!0}),rows:"3",className:f,placeholder:"Es. Bodybuilding in palestra, a casa con manubri e panca..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"A che ora e per quanto tempo ti alleni?*"}),d.jsx("input",{...n("trainingTime",{required:!0}),className:f,placeholder:"Es. La sera dalle 18 alle 19:30"})]})]})]}),d.jsxs("div",{className:m,children:[d.jsx("h4",{className:y,children:"Salute e Obiettivi"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Infortuni o problematiche posturali/articolari?*"}),d.jsx("textarea",{...n("injuries",{required:!0}),rows:"3",className:f,placeholder:"Es. Mal di schiena, ernie, sciatalgie..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Prendi farmaci?*"}),d.jsx("input",{...n("medications",{required:!0}),className:f,placeholder:"S/No, e se s quali..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Usi integratori? (se s, quali)*"}),d.jsx("input",{...n("supplements",{required:!0}),className:f,placeholder:"S/No, e se s quali..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Scrivimi il tuo obiettivo*"}),d.jsx("textarea",{...n("mainGoal",{required:!0}),rows:"3",className:f,placeholder:"Descrivi in dettaglio l'obiettivo che vuoi raggiungere..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Durata percorso scelto?*"}),d.jsx("input",{...n("programDuration",{required:!0}),className:f,placeholder:"Es. 3 mesi, 6 mesi..."})]})]})]}),d.jsx("div",{className:"bg-primary/10 p-4 rounded-lg border border-primary/30 text-center",children:d.jsx("p",{className:"text-sm text-primary",children:"Ricorda di richiedere al cliente le 4 foto per il check iniziale (frontale, laterali, posteriore)."})}),o&&d.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 text-sm ${l?"bg-red-900/50 text-red-300":"bg-green-900/50 text-green-300"}`,children:[l?d.jsx(A$,{}):d.jsx(ew,{}),o]}),d.jsx("div",{className:"flex justify-end pt-2",children:d.jsxs("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-5 py-2.5 bg-primary hover:bg-primary/80 text-white rounded-lg transition disabled:opacity-50 font-semibold",children:[d.jsx(jm,{})," ",i?"Salvataggio...":"Salva Anamnesi"]})})]})]})}const KI=t=>{if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e};function pJ({clientId:t}){const{register:e,handleSubmit:n,reset:r,formState:{isSubmitting:i}}=Hl(),[s,o]=D.useState([]),[a,l]=D.useState(!1);D.useEffect(()=>{const m=Wn(Ge(se,"clients",t,"payments"),li("paymentDate","desc")),y=ut(m,_=>{o(_.docs.map(x=>({id:x.id,...x.data()})))});return()=>y()},[t]);const c=async m=>{const y=parseInt(m.duration,10),_=Rm(se),x=Ce(Ge(se,"clients",t,"payments"));_.set(x,{amount:parseFloat(m.amount),duration:`${y} mes${y>1?"i":"e"}`,paymentMethod:m.paymentMethod,paymentDate:Nt()});const v=Ce(se,"clients",t),E=(await qi(v)).data();let R=KI(E.scadenza);(!R||R<new Date)&&(R=new Date);const C=new Date(R);C.setMonth(C.getMonth()+y),_.update(v,{scadenza:C}),await _.commit(),r(),l(!1)},u=async m=>{if(window.confirm("Sei sicuro di voler eliminare questo pagamento? L'operazione non  reversibile."))try{const y=Ce(se,"clients",t,"payments",m);await Ah(y)}catch(y){console.error("Errore nell'eliminazione del pagamento:",y),alert("Si  verificato un errore.")}},f="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",p="block mb-1 text-sm font-medium text-muted";return d.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsxs("h3",{className:"text-xl font-semibold text-primary flex items-center gap-2",children:[d.jsx(la,{})," Gestione Pagamenti"]}),d.jsxs("button",{onClick:()=>l(!a),className:"flex items-center gap-2 px-3 py-1.5 bg-primary/20 hover:bg-primary/30 text-primary rounded-lg text-sm",children:[a?d.jsx(rw,{}):d.jsx(Mm,{})," ",a?"Annulla":"Aggiungi Rinnovo"]})]}),d.jsx(zl,{children:a&&d.jsxs(ct.form,{onSubmit:n(c),className:"space-y-4 mb-6 pt-4 border-t border-white/10",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Importo Pagato ()*"}),d.jsx("input",{type:"number",step:"0.01",...e("amount",{required:!0}),className:f})]}),d.jsxs("div",{children:[d.jsx("label",{className:p,children:"Durata Rinnovo (mesi)*"}),d.jsx("select",{...e("duration",{required:!0}),className:f,children:[...Array(24).keys()].map(m=>d.jsxs("option",{value:m+1,children:[m+1," mes",m>0?"i":"e"]},m+1))})]}),d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:p,children:"Metodo di Pagamento"}),d.jsx("input",{...e("paymentMethod"),className:f,placeholder:"Es. Bonifico, Contanti"})]})]}),d.jsx("div",{className:"flex justify-end",children:d.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-primary text-white rounded-lg font-semibold transition disabled:opacity-50",children:i?"Salvataggio...":"Salva Pagamento"})})]})}),d.jsx("h4",{className:"font-semibold mb-3 mt-4",children:"Cronologia Rinnovi"}),d.jsx("div",{className:"space-y-2",children:s.length>0?s.map(m=>{var y;return d.jsxs("div",{className:"flex justify-between items-center p-3 bg-background rounded-md border border-white/10",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Zx,{className:"text-muted"}),d.jsxs("div",{children:[d.jsxs("p",{className:"font-semibold",children:[m.duration," - ",m.amount.toFixed(2)]}),d.jsxs("p",{className:"text-xs text-muted",children:["Pagato il ",(y=KI(m.paymentDate))==null?void 0:y.toLocaleDateString("it-IT"),m.paymentMethod&&` via ${m.paymentMethod}`]})]})]}),d.jsx("button",{onClick:()=>u(m.id),className:"p-1.5 text-red-500/50 hover:text-red-500 rounded-md transition-colors",children:d.jsx(Oh,{size:16})})]},m.id)}):d.jsx("p",{className:"text-sm text-muted",children:"Nessun pagamento registrato."})})]})}const mJ=`
.react-calendar { width: 100%; background: #1f2937; border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 1rem; }
.react-calendar__tile, .react-calendar__month-view__weekdays__weekday { color: white; }
.react-calendar__navigation button { color: #22d3ee; font-weight: bold; }
.react-calendar__tile--now { background: #374151; border-radius: 0.5rem; }
.react-calendar__tile--active { background: #0891b2; border-radius: 0.5rem; }
.react-calendar__tile:enabled:hover, .react-calendar__tile:enabled:focus { background: #4b5563; border-radius: 0.5rem; }
.check-day-highlight { background-color: rgba(34, 197, 94, 0.5); border-radius: 50%; }
`;function Rl(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const gJ=({urls:t})=>!t||Object.keys(t).length===0?d.jsx("p",{className:"text-muted italic",children:"Nessuna foto caricata."}):d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-white/10",children:["front","right","left","back"].map(e=>{const n=t[e],r=e==="front"?"Frontale":e==="back"?"Posteriore":`Laterale ${e==="left"?"Sinistro":"Destro"}`;return d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-muted mb-1",children:r}),n?d.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:d.jsx("img",{src:n,alt:r,className:"rounded-lg w-full h-auto object-cover border border-white/20"})}):d.jsx("div",{className:"flex justify-center items-center w-full h-24 bg-background/50 rounded-lg text-gray-500 text-xs",children:"N/D"})]},e)})}),yJ=({clientId:t})=>{var l;const[e,n]=D.useState(null),[r,i]=D.useState(!0),[s,o]=D.useState({}),a=Dh();if(D.useEffect(()=>{const c=ut(Ce(se,"clients",t,"anamnesi","initial"),async u=>{if(i(!0),u.exists()){const f=u.data();if(n(f),f.photoPaths){const p={};await Promise.all(Object.entries(f.photoPaths).map(async([m,y])=>{try{const _=await Dm(El(a,y));p[m]=_}catch(_){console.error(`Errore nel caricamento URL per ${m}:`,_)}})),o(p)}else o({})}else n(null),o({});i(!1)});return()=>c()},[t,a]),r)return d.jsx("p",{className:"text-muted text-center p-4",children:"Caricamento..."});if(e){const{photoPaths:c,submittedAt:u,...f}=e;return d.jsxs(ct.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[d.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[d.jsx("h3",{className:"text-xl font-semibold text-primary mb-4",children:"Dati Anamnesi"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(f).map(([p,m])=>{var v;const _=m&&typeof m.toDate=="function"?(v=Rl(m))==null?void 0:v.toLocaleDateString("it-IT"):String(m),x=p.replace(/([A-Z])/g," $1").replace(/_/g," ").trim();return d.jsxs("div",{className:"pb-2",children:[d.jsx("h4",{className:"font-semibold text-muted capitalize text-sm",children:x}),d.jsx("p",{className:"text-foreground whitespace-pre-wrap mt-1",children:_||"N/D"})]},p)})}),u&&d.jsxs("p",{className:"text-xs text-muted mt-4 pt-4 border-t border-white/10",children:["Compilato il: ",(l=Rl(u))==null?void 0:l.toLocaleString("it-IT")]})]}),d.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[d.jsx("h3",{className:"text-xl font-semibold text-primary mb-4",children:"Foto Iniziali"}),d.jsx(gJ,{urls:s})]})]})}return d.jsx(fJ,{clientId:t,onSave:()=>{}})},vJ=({check:t,clientId:e})=>{var m,y;const[n,r]=D.useState(!1),[i,s]=D.useState(t.coachNotes||""),[o,a]=D.useState(!1),[l,c]=D.useState(!1),u=Dh(),f=async()=>{a(!0);try{await qu(Ce(se,"clients",e,"checks",t.id),{coachNotes:i})}finally{a(!1)}},p=async()=>{var _;if(window.confirm("Sei sicuro di voler eliminare questo check?")){c(!0);try{((_=t.photoURLs)==null?void 0:_.length)>0&&await Promise.all(t.photoURLs.map(x=>{try{const v=x.split("?")[0].split("o/")[1],w=El(u,decodeURIComponent(v));return g$(w)}catch(v){return console.warn("Impossibile eliminare l'immagine dallo Storage. Proseguo con l'eliminazione del documento:",v),Promise.resolve()}})),await Ah(Ce(se,"clients",e,"checks",t.id))}catch(x){console.error("Errore eliminazione:",x),alert("Errore durante l'eliminazione."),c(!1)}}};return d.jsxs("div",{className:"bg-card rounded-lg border border-white/10 overflow-hidden",children:[d.jsxs("div",{className:"flex justify-between items-center p-4",children:[d.jsxs("button",{onClick:()=>r(!n),className:"flex-1 flex justify-between items-center text-left",children:[d.jsxs("span",{className:"font-semibold",children:["Check del ",((m=Rl(t.createdAt))==null?void 0:m.toLocaleDateString("it-IT"))||"Data Sconosciuta"]}),d.jsx(ct.div,{animate:{rotate:n?180:0},children:d.jsx(iD,{})})]}),d.jsx("button",{onClick:p,disabled:l,className:"ml-4 p-1.5 text-red-500/60 hover:text-red-500 rounded-md",title:"Elimina Check",children:d.jsx(Oh,{size:14})})]}),d.jsx(zl,{children:n&&d.jsx(ct.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-4 pb-4",children:d.jsxs("div",{className:"pt-4 border-t border-white/20 space-y-4",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-muted mb-2",children:"Note del cliente:"}),d.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:t.notes||"-"})]}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:(y=t.photoURLs)==null?void 0:y.map((_,x)=>d.jsx("a",{href:_,target:"_blank",rel:"noopener noreferrer",children:d.jsx("img",{src:_,alt:`Foto ${x+1}`,className:"rounded-md aspect-square object-cover"})},x))}),d.jsxs("div",{className:"pt-4 border-t border-white/20",children:[d.jsxs("h4",{className:"text-sm font-semibold text-muted mb-2 flex items-center gap-2",children:[d.jsx(sD,{})," Feedback:"]}),d.jsx("textarea",{value:i,onChange:_=>s(_.target.value),rows:"3",className:"w-full p-2 bg-background rounded-lg border border-white/10",placeholder:"Scrivi qui il tuo feedback..."}),d.jsx("div",{className:"flex justify-end mt-2",children:d.jsx("button",{onClick:f,disabled:o,className:"px-3 py-1.5 bg-primary text-white text-xs font-semibold rounded-lg",children:o?"Salvo...":"Salva"})})]})]})})})]})},_J=({clientId:t})=>{const[e,n]=D.useState([]),[r,i]=D.useState(!0),[s,o]=D.useState(null),[a,l]=D.useState(null),[c,u]=D.useState(!1);D.useEffect(()=>{const m=Wn(Ge(se,"clients",t,"checks"),li("createdAt","desc")),y=ut(m,_=>{const x=_.docs.map(v=>({id:v.id,...v.data()})).filter(v=>v.createdAt);n(x),i(!1),o(null)},_=>{console.error("Errore nel caricamento dei checks:",_),o("Impossibile caricare i check. Controlla i permessi di Firestore."),i(!1)});return()=>y()},[t]);const f=({date:m,view:y})=>{if(y==="month"&&e.some(x=>{var v;return((v=Rl(x.createdAt))==null?void 0:v.toDateString())===m.toDateString()}))return"check-day-highlight"},p=a?e.filter(m=>{var y;return((y=Rl(m.createdAt))==null?void 0:y.toDateString())===a.toDateString()}):e;return d.jsxs(d.Fragment,{children:[d.jsx(zl,{children:c&&d.jsx(ct.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-center z-50 p-4",onClick:()=>u(!1),children:d.jsxs(ct.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-2xl relative",onClick:m=>m.stopPropagation(),children:[d.jsx("button",{onClick:()=>u(!1),className:"absolute -top-2 -right-2 bg-card rounded-full p-1.5 text-muted hover:text-white z-10",children:d.jsx(rw,{})}),d.jsx(dJ,{clientId:t})]})})}),d.jsxs("div",{className:"pt-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h3",{className:"text-xl font-semibold",children:"Cronologia Check"}),d.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-primary hover:bg-primary/80 text-white text-sm font-semibold rounded-lg transition",children:[d.jsx(Mm,{})," Crea Check"]})]}),r?d.jsx("p",{className:"text-muted",children:"Caricamento..."}):s?d.jsxs("div",{className:"text-center text-red-400 p-4 bg-red-900/50 rounded-lg border border-red-500/50",children:[d.jsxs("p",{children:["ERRORE: ",s]}),d.jsx("p",{className:"text-xs mt-2",children:"Controlla la console del browser per i dettagli tecnici."})]}):d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"lg:col-span-1",children:[e.length>0?d.jsx(fM,{onChange:l,value:a,tileClassName:f}):d.jsx("div",{className:"h-64 flex justify-center items-center bg-card rounded-xl border border-white/10",children:d.jsx("p",{className:"text-muted",children:"Aggiungi il primo check!"})}),a&&d.jsx("button",{onClick:()=>l(null),className:"w-full text-center text-primary text-sm mt-2 p-2 bg-card rounded-lg border border-white/10 hover:bg-white/10",children:"Mostra tutti i check"})]}),d.jsxs("div",{className:"lg:col-span-2",children:[d.jsx("h4",{className:"font-semibold text-muted mb-2",children:a?`Check del ${a.toLocaleDateString("it-IT")}`:"Tutti i check"}),p.length>0?d.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:p.map(m=>d.jsx(vJ,{check:m,clientId:t},m.id))}):d.jsx("div",{className:"text-center text-muted p-4 bg-card rounded-lg border border-white/10",children:d.jsx("p",{children:a?"Nessun check trovato per questa data.":"Nessun check trovato."})})]})]})]})]})};function xJ(){var _;const{clientId:t}=gP(),e=nn(),n=ta(),[r,i]=D.useState(null),[s,o]=D.useState(!0),[a,l]=D.useState("anamnesi"),[c,u]=D.useState(!1),f=D.useCallback((x,v,w)=>`Ciao ${x},

Ecco le tue credenziali per accedere alla tua area riservata:

Email (Username): ${v}
Password Temporanea: ${w}
Link di accesso: https://mentalfitmanager.github.io/#/client-login

Ti consiglio di cambiare la password al primo accesso.
A presto!`,[]);D.useEffect(()=>{const x=new URLSearchParams(n.search).get("tab");x&&l(x)},[n.search]),D.useEffect(()=>{const x=ut(Ce(se,"clients",t),v=>{v.exists()?i({id:v.id,...v.data()}):e("/clients"),o(!1)});return()=>x()},[t,e]);const p=x=>{navigator.clipboard.writeText(x),u(!0),setTimeout(()=>u(!1),2e3)},m=()=>{if(r!=null&&r.tempPassword){const x=f(r.name,r.email,r.tempPassword);p(x)}};if(s)return d.jsx("div",{className:"text-center text-muted p-8",children:"Caricamento..."});if(!r)return null;const y=((_=Rl(r.createdAt))==null?void 0:_.toLocaleDateString("it-IT"))||"N/A";return d.jsxs(d.Fragment,{children:[d.jsx("style",{children:mJ}),d.jsxs("div",{className:"w-full",children:[d.jsxs(ct.div,{className:"flex items-center justify-between mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold",children:r.name}),d.jsxs("p",{className:"text-muted",children:["Cliente dal: ",y]})]}),d.jsxs("button",{onClick:()=>e("/clients"),className:"flex items-center gap-2 px-3 py-1.5 bg-card hover:bg-white/10 rounded-lg text-sm text-muted border border-white/10",children:[d.jsx(Xs,{})," Torna"]})]}),d.jsxs(ct.div,{className:"bg-card p-6 rounded-xl border border-white/10 mb-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[d.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[d.jsx("div",{className:"bg-primary/20 text-primary p-3 rounded-full",children:d.jsx(lD,{size:24})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Profilo"}),d.jsx("p",{className:"text-muted",children:r.email}),r.phone&&d.jsx("p",{className:"text-muted",children:r.phone})]})]}),r.tempPassword&&d.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[d.jsxs("div",{className:"bg-background p-3 rounded-lg",children:[d.jsxs("p",{className:"text-xs text-muted flex items-center gap-1 mb-2",children:[d.jsx(jT,{size:12})," Messaggio di Benvenuto Pronto"]}),d.jsx("textarea",{readOnly:!0,value:f(r.name,r.email,r.tempPassword),className:"w-full p-2 bg-background border border-white/10 rounded-lg text-white font-mono text-xs resize-none h-40"}),d.jsxs("div",{className:"flex gap-2 mt-3",children:[d.jsx("button",{onClick:m,className:"flex-1 py-2 bg-primary/20 rounded-lg text-primary flex items-center justify-center gap-2 hover:bg-primary/30",children:c?d.jsxs(d.Fragment,{children:[d.jsx(rD,{})," Messaggio Copiato!"]}):d.jsxs(d.Fragment,{children:[d.jsx(D$,{})," Copia Messaggio"]})}),d.jsxs("a",{href:"https://mentalfitmanager.github.io/#/client-login",target:"_blank",rel:"noopener noreferrer",className:"py-2 px-4 bg-primary rounded-lg text-white flex items-center justify-center gap-2 hover:bg-primary/80 transition",children:[d.jsx(jT,{})," Accedi Cliente"]})]})]}),d.jsx("p",{className:"text-xs text-muted mt-2 text-center",children:"Questo messaggio non  pi necessario una volta che il cliente ha cambiato password."})]})]}),d.jsxs("div",{className:"flex border-b border-white/10 mb-6",children:[d.jsxs("button",{onClick:()=>l("anamnesi"),className:`px-4 py-2 text-sm ${a==="anamnesi"?"border-b-2 border-primary text-white":"text-muted"}`,children:[d.jsx(tw,{className:"inline mr-2"}),"Anamnesi"]}),d.jsxs("button",{onClick:()=>l("checks"),className:`px-4 py-2 text-sm ${a==="checks"?"border-b-2 border-primary text-white":"text-muted"}`,children:[d.jsx(Cp,{className:"inline mr-2"}),"Checks"]}),d.jsxs("button",{onClick:()=>l("payments"),className:`px-4 py-2 text-sm ${a==="payments"?"border-b-2 border-primary text-white":"text-muted"}`,children:[d.jsx(la,{className:"inline mr-2"}),"Pagamenti"]})]}),d.jsxs("div",{children:[a==="anamnesi"&&d.jsx(yJ,{clientId:t}),a==="checks"&&d.jsx(_J,{clientId:t}),a==="payments"&&d.jsx(pJ,{clientId:t})]})]})]})}const wJ=t=>{if(!t)return"";const e=typeof t.toDate=="function"?t.toDate():new Date(t);if(isNaN(e))return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${i}`};function bJ(){const t=nn(),{clientId:e}=gP(),{register:n,handleSubmit:r,reset:i,formState:{isSubmitting:s}}=Hl(),[o,a]=D.useState(!0);D.useEffect(()=>{(async()=>{try{const p=Ce(se,"clients",e),m=await qi(p);if(m.exists()){const y=m.data();i({...y,endDate:wJ(y.endDate)})}else t("/clients")}catch(p){console.error("Errore nel caricamento del cliente:",p)}finally{a(!1)}})()},[e,i,t]);const l=async f=>{try{const p=Ce(se,"clients",e);await qu(p,{...f,endDate:f.endDate?new Date(f.endDate):null}),t("/clients")}catch(p){console.error("Errore nell'aggiornamento del cliente: ",p),alert("Si  verificato un errore durante l'aggiornamento.")}},c="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",u="block mb-1 text-sm font-medium text-muted";return o?d.jsx("div",{className:"text-center p-8 text-muted",children:"Caricamento..."}):d.jsxs(ct.div,{className:"w-full max-w-2xl mx-auto bg-card rounded-xl shadow border border-white/10 p-6",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h1",{className:"text-2xl font-bold",children:"Modifica Cliente"}),d.jsxs("button",{onClick:()=>t("/clients"),className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-lg text-sm text-muted",children:[d.jsx(Xs,{})," Annulla"]})]}),d.jsxs("form",{onSubmit:r(l),className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:u,children:"Nome e Cognome"}),d.jsx("input",{...n("name",{required:!0}),className:c})]}),d.jsxs("div",{children:[d.jsx("label",{className:u,children:"Email"}),d.jsx("input",{type:"email",...n("email",{required:!0}),className:c})]}),d.jsxs("div",{children:[d.jsx("label",{className:u,children:"Telefono (Opzionale)"}),d.jsx("input",{...n("phone"),className:c})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-white/10",children:[d.jsxs("div",{children:[d.jsx("label",{className:u,children:"Stato Cliente"}),d.jsxs("select",{...n("status"),className:c,children:[d.jsx("option",{value:"attivo",children:"Attivo"}),d.jsx("option",{value:"in prova",children:"In Prova"}),d.jsx("option",{value:"sospeso",children:"Sospeso"}),d.jsx("option",{value:"scaduto",children:"Scaduto"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:u,children:"Data Scadenza Attuale"}),d.jsx("input",{type:"date",...n("endDate"),className:c+" text-muted"})]})]}),d.jsx("div",{className:"flex justify-end pt-4",children:d.jsxs("button",{type:"submit",disabled:s,className:"flex items-center gap-2 px-5 py-2.5 bg-primary hover:bg-primary/80 text-white rounded-lg",children:[d.jsx(jm,{})," ",s?"Salvataggio...":"Salva Modifiche"]})})]})]})}function Sr(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const GI=t=>{const e=Sr(t);if(!e)return"na";const r=Math.ceil((e-new Date)/(1e3*60*60*24));return r<0?"expired":r<=15?"expiring":"paid"},Jd=({title:t,icon:e,items:n,navigate:r,tab:i,onDismiss:s})=>d.jsxs("div",{className:"bg-card p-4 rounded-lg border border-white/10 flex-1 min-w-[280px]",children:[d.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e," ",t]}),d.jsx("div",{className:"space-y-2",children:d.jsx(zl,{children:n.length>0?n.map((o,a)=>{var l;return d.jsxs(ct.div,{layout:!0,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10,transition:{duration:.2}},className:"group flex items-center justify-between p-2 rounded-md hover:bg-white/5",children:[d.jsxs("button",{className:"flex-1 text-left",onClick:()=>r(`/client/${o.clientId}?tab=${i}`),children:[d.jsx("p",{className:"font-medium text-sm",children:o.clientName}),d.jsxs("p",{className:"text-xs text-muted",children:[(l=Sr(o.date))==null?void 0:l.toLocaleDateString("it-IT",{day:"numeric",month:"long"}),o.scadenza&&d.jsx("span",{className:"text-red-400 ml-2 font-bold",children:`(Scad. ${Sr(o.scadenza).toLocaleDateString("it-IT")})`})]})]}),d.jsx("button",{onClick:()=>s(o.id),className:"p-1 rounded-full opacity-0 group-hover:opacity-60 hover:!opacity-100 hover:bg-white/10 transition-opacity",title:"Archivia notifica",children:d.jsx(rw,{size:14})})]},o.id)}):d.jsx("p",{className:"text-sm text-muted px-2",children:"Nessun aggiornamento recente."})})})]});function SJ(){const t=nn(),[e,n]=D.useState([]),[r,i]=D.useState([]),[s,o]=D.useState([]),[a,l]=D.useState([]);D.useEffect(()=>{const v=ut(Ge(se,"clients"),w=>{n(w.docs.map(E=>({id:E.id,...E.data()})))});return()=>v()},[]);const c=D.useMemo(()=>e.reduce((v,w)=>(v[w.id]=w.name,v),{}),[e]);D.useEffect(()=>{if(Object.keys(c).length===0)return;const v=Wn(su(se,"checks"),Sp(30)),w=ut(v,C=>{const M=C.docs.map(T=>{const b=T.ref.path.split("/")[1];return{id:T.id,clientId:b,clientName:c[b],date:T.data().createdAt}}).filter(T=>T.clientName);M.sort((T,b)=>(Sr(b.date)||0)-(Sr(T.date)||0)),i(M.slice(0,10))}),E=Wn(su(se,"anamnesi"),Sp(30)),R=ut(E,C=>{const M=C.docs.map(T=>{const b=T.ref.path.split("/")[1];return{id:T.id,clientId:b,clientName:c[b],date:T.data().submittedAt||T.data().createdAt}}).filter(T=>T.clientName);M.sort((T,b)=>(Sr(b.date)||0)-(Sr(T.date)||0)),o(M.slice(0,10))});return()=>{w(),R()}},[c]);const u=D.useMemo(()=>[...e].sort((v,w)=>(Sr(w.createdAt)||0)-(Sr(v.createdAt)||0)).slice(0,5).map(v=>({id:v.id,clientId:v.id,clientName:v.name,date:v.createdAt})),[e]),f=D.useMemo(()=>e.filter(v=>GI(v.scadenza)==="expiring"||GI(v.scadenza)==="expired").sort((v,w)=>(Sr(v.scadenza)||0)-(Sr(w.scadenza)||0)).map(v=>({id:v.id,clientId:v.id,clientName:v.name,date:v.scadenza,scadenza:v.scadenza})),[e]),p=v=>{l(w=>[...w,v])},m=u.filter(v=>!a.includes(v.id)),y=f.filter(v=>!a.includes(v.id)),_=r.filter(v=>!a.includes(v.id)),x=s.filter(v=>!a.includes(v.id));return d.jsxs("div",{className:"w-full",children:[d.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Ultimi Aggiornamenti"}),d.jsxs("div",{className:"flex flex-col md:flex-row gap-6 overflow-x-auto pb-4",children:[" ",d.jsx(Jd,{title:"In Scadenza",icon:d.jsx(la,{className:"text-red-400"}),items:y,navigate:t,tab:"payments",onDismiss:p}),d.jsx(Jd,{title:"Clienti Nuovi",icon:d.jsx(B$,{className:"text-primary"}),items:m,navigate:t,tab:"anamnesi",onDismiss:p}),d.jsx(Jd,{title:"Check Nuovi",icon:d.jsx(Cp,{className:"text-green-400"}),items:_,navigate:t,tab:"checks",onDismiss:p}),d.jsx(Jd,{title:"Anamnesi Nuove",icon:d.jsx(tw,{className:"text-yellow-400"}),items:x,navigate:t,tab:"anamnesi",onDismiss:p})]})]})}const Ca=["QwWST9OVOlTOi5oheyCqfpXLOLg2","3j0AXIRa4XdHq1ywCl4UBxJNsku2","AeZKjJYu5zMZ4mvffaGiqCBb0cF2"],EJ=Ca.reduce((t,e)=>({...t,[e]:"Coach"}),{}),YI=()=>d.jsx("div",{className:"flex justify-center items-center h-full p-4",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}),TJ=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(null),[i,s]=D.useState([]),[o,a]=D.useState(""),[l,c]=D.useState(!0),[u,f]=D.useState(!1),[p,m]=D.useState(""),[y,_]=D.useState([]),[x,v]=D.useState(!1),w=D.useRef(null),R=di().currentUser,C=R==null?void 0:R.uid;D.useEffect(()=>{const I=Ge(se,"chats"),P=Wn(I,li("lastUpdate","desc")),B=ut(P,z=>{const H=z.docs.map(Y=>({id:Y.id,...Y.data()}));e(H),c(!1)},z=>{console.error("Errore nel caricare le chat:",z),c(!1)});return()=>B()},[]),D.useEffect(()=>{if(!n){s([]);return}f(!0);const I=Ge(se,"chats",n,"messages"),P=Wn(I,li("createdAt")),B=ut(P,z=>{s(z.docs.map(H=>({id:H.id,...H.data()}))),f(!1)},z=>{console.error("Errore nel caricare i messaggi:",z),f(!1)});return()=>B()},[n]),D.useEffect(()=>{if(!n||!C)return;const I=t.find(P=>P.id===n);if(I&&I.lastMessageSenderId&&!Ca.includes(I.lastMessageSenderId)){const P=Ce(se,"chats",n);Rr(P,{lastMessageSenderId:C},{merge:!0}).catch(B=>{console.error("Errore nell'azzeramento contatore chat:",B)})}},[n,C,t]),D.useEffect(()=>{var I;(I=w.current)==null||I.scrollIntoView({behavior:"smooth"})},[i]),D.useEffect(()=>{const I=async()=>{if(p.trim().length<2){_([]),v(!1);return}v(!0);const B=Ge(se,"clients"),z=p.toLowerCase(),H=Wn(B,bp("name_lowercase",">=",z),bp("name_lowercase","<=",z+""),Sp(10));try{const Y=await Ep(H);_(Y.docs.map($=>({id:$.id,...$.data()})))}catch(Y){console.error("Errore nella ricerca (potrebbe mancare un indice in Firestore):",Y)}v(!1)},P=setTimeout(()=>{I()},300);return()=>clearTimeout(P)},[p]);const M=async I=>{if(!C)return;const P=Ca[0],z=[I.id,P].sort().join("_");if(!t.find(Y=>Y.id===z)){const Y=Ce(se,"chats",z),$=[I.id,...Ca],J={...EJ,[I.id]:I.name};await Rr(Y,{participants:$,participantNames:J,lastMessage:"Conversazione avviata",lastUpdate:Nt(),createdAt:Nt()})}r(z),m(""),_([])},T=async I=>{if(I.preventDefault(),o.trim()===""||!n||!C){console.error("Invio messaggio fallito: Campi mancanti o Admin non autenticato.");return}const P=Ge(se,"chats",n,"messages");try{await Ph(P,{text:o,createdAt:Nt(),senderId:C});const B=Ce(se,"chats",n);await Rr(B,{lastMessage:o,lastUpdate:Nt(),lastMessageSenderId:C},{merge:!0}),a("")}catch(B){console.error("ERRORE FIREBASE DURANTE L'INVIO DEL MESSAGGIO:",B)}},b=async()=>{if(n&&window.confirm("SEI SICURO? Questa azione eliminer la chat e tutti i messaggi definitivamente."))try{const I=Ge(se,"chats",n,"messages"),P=await Ep(I),B=Rm(se);P.docs.forEach(H=>{B.delete(H.ref)}),await B.commit();const z=Ce(se,"chats",n);await Ah(z),r(null),s([]),console.log(`Chat ${n} eliminata con successo.`)}catch(I){console.error("ERRORE NELL'ELIMINAZIONE DELLA CHAT:",I),alert("Errore durante l'eliminazione della chat. Controlla i permessi di scrittura in Firestore.")}},k=t.find(I=>I.id===n),A=k==null?void 0:k.participants.find(I=>!Ca.includes(I)),O=k?k.participantNames[A]||"Cliente":"Chat";return d.jsxs("div",{className:"flex h-[calc(100vh-120px)] bg-card/60 backdrop-blur-lg rounded-xl border border-white/10 overflow-hidden",children:[d.jsxs("div",{className:"w-full md:w-1/3 border-r border-white/10 flex flex-col",children:[d.jsx("div",{className:"p-4 border-b border-white/10 flex-shrink-0",children:d.jsxs("div",{className:"relative",children:[d.jsx(nw,{className:"absolute top-1/2 left-3 -translate-y-1/2 text-muted"}),d.jsx("input",{type:"text",placeholder:"Cerca o avvia una chat...",value:p,onChange:I=>m(I.target.value),className:"w-full bg-background p-2 pl-9 rounded-lg border border-white/10 outline-none focus:ring-2 focus:ring-primary"})]})}),p.length>1?d.jsxs("div",{className:"flex-1 overflow-y-auto",children:[x&&d.jsx("p",{className:"p-4 text-muted text-sm",children:"Ricerca..."}),!x&&y.length===0&&d.jsx("p",{className:"p-4 text-muted text-sm",children:"Nessun cliente trovato."}),!x&&y.map(I=>d.jsxs("div",{onClick:()=>M(I),className:"p-4 cursor-pointer hover:bg-white/5",children:[d.jsx("p",{className:"font-semibold text-white",children:I.name}),d.jsx("p",{className:"text-sm text-muted",children:I.email})]},I.id))]}):d.jsx(d.Fragment,{children:l?d.jsx(YI,{}):d.jsx("div",{className:"flex-1 overflow-y-auto",children:t.map(I=>{const P=I.participants.find(H=>!Ca.includes(H)),B=I.participantNames?I.participantNames[P]:"Cliente",z=I.lastMessageSenderId===P;return d.jsxs("div",{onClick:()=>r(I.id),className:`p-4 cursor-pointer border-l-4 ${n===I.id?"bg-primary/20 border-primary":"border-transparent hover:bg-white/5"}`,children:[d.jsx("p",{className:`font-semibold ${z?"text-white":"text-muted"}`,children:B||"Cliente"}),d.jsx("p",{className:"text-sm text-muted truncate",children:I.lastMessage})]},I.id)})})})]}),d.jsx("div",{className:"w-full md:w-2/3 flex flex-col",children:n?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"p-4 border-b border-white/10 flex-shrink-0 flex justify-between items-center",children:[d.jsx("h3",{className:"font-bold text-lg text-white",children:O}),d.jsx("button",{onClick:b,className:"text-red-500/80 hover:text-red-500 p-2 rounded-full transition-colors",title:"Elimina la conversazione",disabled:!n,children:d.jsx(Oh,{size:20})})]}),d.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[u?d.jsx(YI,{}):i.map(I=>d.jsx("div",{className:`flex ${I.senderId===C?"justify-end":"justify-start"}`,children:d.jsx("div",{className:`max-w-md p-3 rounded-2xl ${I.senderId===C?"bg-primary rounded-br-none":"bg-background rounded-bl-none"}`,children:d.jsx("p",{className:"text-white break-words",children:I.text})})},I.id)),d.jsx("div",{ref:w})]}),d.jsx("div",{className:"p-4 border-t border-white/10 flex-shrink-0",children:d.jsxs("form",{onSubmit:T,className:"flex items-center gap-4",children:[d.jsx("input",{type:"text",value:o,onChange:I=>a(I.target.value),placeholder:"Scrivi una risposta...",className:"flex-1 p-3 bg-background border border-white/10 rounded-full outline-none focus:ring-2 focus:ring-primary text-white"}),d.jsx("button",{type:"submit",className:"p-3 bg-primary hover:bg-primary/80 text-white rounded-full disabled:opacity-50",disabled:!o.trim()||!n,children:d.jsx(Lm,{size:20})})]})})]}):d.jsxs("div",{className:"flex flex-col justify-center items-center h-full text-muted",children:[d.jsx(Om,{size:48}),d.jsx("p",{className:"mt-4",children:"Seleziona una conversazione o cercala per nome."})]})})]})},kJ=()=>{const[t,e]=D.useState(""),[n,r]=D.useState(""),[i,s]=D.useState(""),o=nn(),a=async l=>{l.preventDefault(),s("");try{const u=(await rR(Ku,t,n)).user,f=Ce(se,"clients",u.uid),p=await qi(f);if(p.exists()&&p.data().isClient===!0){sessionStorage.setItem("app_role","client");const m=p.data().firstLogin===!0;o(m?"/client/first-access":"/client/dashboard")}else s("Accesso non autorizzato. Area riservata ai clienti."),await up(Ku)}catch(c){s("Credenziali non valide. Riprova."),console.error("Errore di login:",c.message)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:d.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg backdrop-filter backdrop-blur-lg bg-opacity-50",children:[d.jsx("h2",{className:"text-3xl font-bold text-center text-cyan-400",children:"Accesso Area Clienti"}),d.jsx("p",{className:"text-center text-gray-300",children:"Usa le credenziali fornite dal tuo coach."}),d.jsxs("form",{onSubmit:a,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400",children:"Email"}),d.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:l=>e(l.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-400",children:"Password"}),d.jsx(Io,{to:"/client/forgot-password",className:"text-xs text-gray-400 hover:text-cyan-400 sm:hidden",children:"Password dimenticata?"})]}),d.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:l=>r(l.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),i&&d.jsx("p",{className:"text-red-500 text-sm text-center",children:i}),d.jsx("div",{children:d.jsx("button",{type:"submit",className:"w-full px-4 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500",children:"Accedi"})})]}),d.jsx("div",{className:"text-center hidden sm:block",children:d.jsx(Io,{to:"/client/forgot-password",className:"text-sm text-gray-400 hover:text-cyan-400 hover:underline",children:"Password dimenticata?"})})]})})},IJ=()=>{const[t,e]=D.useState(""),[n,r]=D.useState(""),[i,s]=D.useState(""),[o,a]=D.useState(""),l=nn(),u=di().currentUser,f=async p=>{if(p.preventDefault(),s(""),a(""),!u){s("Utente non autenticato. Per favore, effettua nuovamente il login."),setTimeout(()=>l("/client-login"),3e3);return}if(t.length<6){s("La nuova password deve contenere almeno 6 caratteri.");return}if(t!==n){s("Le password non coincidono. Riprova.");return}try{await WU(u,t);const m=Ce(se,"clients",u.uid);await qu(m,{firstLogin:!1}),a("Password aggiornata con successo! Sarai reindirizzato alla tua dashboard tra poco."),setTimeout(()=>{l("/client/dashboard")},3e3)}catch(m){s("Si  verificato un errore. Potrebbe essere necessario effettuare nuovamente il login prima di riprovare."),console.error("Errore durante l'aggiornamento della password:",m)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:d.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg",children:[d.jsx("h2",{className:"text-3xl font-bold text-center text-cyan-400",children:"Imposta la tua Password"}),d.jsx("p",{className:"text-center text-gray-300",children:"Per la tua sicurezza, scegli una password personale per i futuri accessi."}),d.jsxs("form",{onSubmit:f,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-400",children:"Nuova Password"}),d.jsx("input",{id:"new-password",type:"password",required:!0,value:t,onChange:p=>e(p.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-400",children:"Conferma Nuova Password"}),d.jsx("input",{id:"confirm-password",type:"password",required:!0,value:n,onChange:p=>r(p.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),i&&d.jsx("p",{className:"text-red-500 text-sm text-center",children:i}),o&&d.jsx("p",{className:"text-green-500 text-sm text-center",children:o}),d.jsx("div",{children:d.jsx("button",{type:"submit",className:"w-full px-4 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-700 disabled:opacity-50",disabled:!!o,children:o?"Reindirizzamento...":"Imposta Nuova Password"})})]})]})})},CJ=()=>d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"#22d3ee",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-8 h-8",children:[d.jsx("path",{d:"M12 2a10 10 0 0 0-7 3c-1.5 1.5-2 4.5-2 7a10 10 0 0 0 14 0c0-2.5.5-5.5 2-7a10 10 0 0 0-7-3z",fill:"rgba(34, 211, 238, 0.1)"}),d.jsx("circle",{cx:"9",cy:"11",r:"1.5",fill:"#22d3ee"}),d.jsx("circle",{cx:"15",cy:"13",r:"1.5",fill:"#22d3ee"}),d.jsx("path",{d:"M10.5 11.5 L13.5 12.5",stroke:"#22d3ee",strokeWidth:"2"})]}),AJ=()=>d.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),jy=({title:t,value:e,subtext:n,icon:r})=>d.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:t}),d.jsx("div",{className:"text-cyan-400",children:r})]}),d.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:e}),d.jsx("p",{className:"text-sm text-gray-400 mt-1",children:n})]});function PJ(){const[t,e]=D.useState(null),[n,r]=D.useState(!0),[i,s]=D.useState("Da pianificare"),o=nn(),a=di(),l=a.currentUser;D.useEffect(()=>{if(!l){o("/client-login");return}const p=Ce(se,"clients",l.uid),m=ut(p,v=>{if(v.exists()){const w=v.data();if(w.firstLogin){o("/client/first-access",{replace:!0});return}e(w)}else console.error("Dati del cliente non trovati!"),up(a).then(()=>o("/client-login"));r(!1)}),y=Ge(se,`clients/${l.uid}/checks`),_=Wn(y,li("createdAt","desc")),x=ut(_,v=>{const w=v.docs.map(E=>E.data());if(w.length>0){const E=w[0].createdAt.toDate();let R=new Date(E.getTime());R.setDate(R.getDate()+7),s(R.toLocaleDateString("it-IT"))}else s("Invia il 1 check")});return()=>{m(),x()}},[l,o]);const c=()=>{up(a).then(()=>o("/client-login"))};if(n||t&&t.firstLogin)return d.jsx(AJ,{});if(!t)return d.jsx("p",{children:"Errore nel caricamento dei dati."});let u="N/D",f="Non impostata";if(t.scadenza&&t.scadenza.toDate){const p=t.scadenza.toDate(),m=new Date;p.setHours(0,0,0,0),m.setHours(0,0,0,0);const y=p-m;u=Math.ceil(y/(1e3*60*60*24)),f=p.toLocaleDateString("it-IT")}return d.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[d.jsxs("header",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx(CJ,{}),d.jsxs("div",{children:[d.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:["Ciao, ",t.name,"!"]}),d.jsx("p",{className:"text-gray-300",children:"Benvenuto nella tua area personale."})]})]}),d.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-3 py-2 bg-red-600/80 hover:bg-red-600 text-white text-sm font-semibold rounded-lg transition-colors",children:[d.jsx(L$,{}),d.jsx("span",{children:"Logout"})]})]}),d.jsxs("main",{children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[d.jsx(jy,{title:"Scadenza Percorso",value:`${u} giorni`,subtext:`Scade il: ${f}`,icon:d.jsx(Zx,{size:24})}),d.jsx(jy,{title:"Tipo Percorso",value:t.planType||"Non specificato",subtext:"Il tuo piano attuale",icon:d.jsx(tD,{size:24})}),d.jsx(jy,{title:"Prossimo Check Consigliato",value:i,subtext:"Rimani costante!",icon:d.jsx(Cp,{size:24})})]}),d.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",children:[d.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",children:"Cosa vuoi fare?"}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[d.jsxs(Io,{to:"/client/anamnesi",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[d.jsx(lD,{size:22})," La mia Anamnesi"]}),d.jsxs(Io,{to:"/client/checks",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[d.jsx(Cp,{size:22})," I miei Check"]}),d.jsxs(Io,{to:"/client/payments",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[d.jsx(la,{size:22})," I miei Pagamenti"]}),d.jsxs(Io,{to:"/client/chat",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[d.jsx(Om,{size:22})," Chatta con il Coach"]})]})]})]})]})}const RJ=()=>d.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),NJ=()=>{const[t,e]=D.useState(null),[n,r]=D.useState(!0),[i,s]=D.useState(!1),[o,a]=D.useState({front:null,right:null,left:null,back:null}),[l,c]=D.useState({front:null,right:null,left:null,back:null}),u=nn(),p=di().currentUser,m=Dh(),{register:y,handleSubmit:_,setValue:x,formState:{isSubmitting:v}}=Hl();D.useEffect(()=>{if(!p){u("/client-login");return}(async()=>{const I=Ce(se,`clients/${p.uid}/anamnesi`,"initial"),P=await qi(I);if(P.exists()){const B=P.data();if(e(B),B.photoPaths){const z={};await Promise.all(Object.entries(B.photoPaths).map(async([H,Y])=>{try{const $=await Dm(El(m,Y));z[H]=$}catch($){console.error(`Errore nel caricamento URL per ${H}:`,$)}})),c(z)}Object.keys(B).forEach(z=>x(z,B[z])),s(!1)}else s(!0);r(!1)})()},[p,u,x]);const w=(O,I)=>{const P=O.target.files[0];P&&(a(B=>({...B,[I]:P})),c(B=>({...B,[I]:URL.createObjectURL(P)})))},E=async O=>{if(p){if(!t&&Object.values(o).some(I=>I===null)){alert("Per favore, carica tutte e 4 le foto iniziali.");return}r(!0);try{let I=(t==null?void 0:t.photoPaths)||{};const P=Object.entries(o).filter(([,H])=>H!==null);P.length>0&&(await Promise.all(P.map(async([Y,$])=>{const J=`clients/${p.uid}/anamnesi_photos/${Y}-${fb()}`,Z=El(m,J);return await JN(Z,$),{type:Y,path:J}}))).forEach(({type:Y,path:$})=>{I[Y]=$});const B=Ce(se,`clients/${p.uid}/anamnesi`,"initial"),z={...O,photoPaths:I,submittedAt:Nt()};await Rr(B,z,{merge:!0}),e(z),s(!1),alert("Anamnesi salvata con successo!"),a({front:null,right:null,left:null,back:null})}catch(I){console.error("Errore nel salvataggio:",I),alert("Si  verificato un errore.")}finally{r(!1)}}};if(n)return d.jsx(RJ,{});const R="w-full p-2 mt-1 bg-gray-700 border border-gray-600 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500",C="block text-sm font-medium text-gray-300",M="bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",T="font-semibold mb-4 text-lg text-cyan-400 border-b border-cyan-400/20 pb-2",b=({type:O,label:I})=>d.jsxs("div",{className:"text-center",children:[d.jsx("label",{className:C,children:I}),d.jsxs("div",{className:"mt-2 flex justify-center items-center w-full h-48 bg-gray-700/50 rounded-lg border-2 border-dashed border-gray-600 relative",children:[l[O]?d.jsx("img",{src:l[O],alt:"preview",className:"h-full w-full object-contain rounded-lg"}):d.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[d.jsx(nD,{size:40}),d.jsx("p",{className:"mt-2 text-sm",children:"Carica foto"})]}),d.jsx("input",{type:"file",accept:"image/*",onChange:P=>w(P,O),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})]}),k=({label:O,value:I})=>d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-gray-400",children:O}),d.jsx("p",{className:"mt-1 p-2 bg-gray-800 rounded-lg min-h-[40px] text-white break-words",children:I||"Non specificato"})]}),A=({urls:O})=>d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["front","right","left","back"].map(I=>d.jsxs("div",{children:[d.jsx("h4",{className:"text-sm font-semibold text-gray-400 capitalize",children:I==="front"?"Frontale":I==="back"?"Posteriore":`Laterale ${I==="left"?"Sinistro":"Destro"}`}),O!=null&&O[I]?d.jsx("img",{src:O[I],alt:I,className:"mt-2 rounded-lg w-full h-auto object-cover"}):d.jsx("div",{className:"mt-2 flex justify-center items-center w-full h-48 bg-gray-800 rounded-lg text-gray-500",children:d.jsx("span",{children:"Non caricata"})})]},I))});return d.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[d.jsxs("header",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:"La mia Anamnesi"}),d.jsxs("button",{onClick:()=>u("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg transition-colors",children:[d.jsx(Xs,{}),d.jsx("span",{children:"Dashboard"})]})]}),i?d.jsxs("form",{onSubmit:_(E),className:"space-y-8",children:[d.jsxs("div",{className:M,children:[d.jsx("h4",{className:T,children:"Dati Anagrafici e Misure"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Nome*"}),d.jsx("input",{...y("firstName",{required:!0}),className:R})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Cognome*"}),d.jsx("input",{...y("lastName",{required:!0}),className:R})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Data di Nascita*"}),d.jsx("input",{type:"date",...y("birthDate",{required:!0}),className:R})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Che lavoro fai?*"}),d.jsx("input",{...y("job",{required:!0}),className:R,placeholder:"Es. Impiegato..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Peso (kg)*"}),d.jsx("input",{type:"number",step:"0.1",...y("weight",{required:!0}),className:R,placeholder:"Es. 75.5"})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Altezza (cm)*"}),d.jsx("input",{type:"number",...y("height",{required:!0}),className:R,placeholder:"Es. 180"})]})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:T,children:"Abitudini Alimentari"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Quanti pasti riesci a fare al giorno?*"}),d.jsxs("select",{...y("mealsPerDay",{required:!0}),className:R,children:[d.jsx("option",{value:"3",children:"3"}),d.jsx("option",{value:"4",children:"4"}),d.jsx("option",{value:"5",children:"5"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Colazione: Dolce o Salata?*"}),d.jsxs("select",{...y("breakfastType",{required:!0}),className:R,children:[d.jsx("option",{value:"dolce",children:"Dolce"}),d.jsx("option",{value:"salato",children:"Salato"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Alimenti da inserire nella settimana*"}),d.jsx("textarea",{...y("desiredFoods",{required:!0}),rows:"3",className:R,placeholder:"Elenca qui..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Cosa non mangi?*"}),d.jsx("textarea",{...y("dislikedFoods",{required:!0}),rows:"2",className:R,placeholder:"Elenca qui..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Intolleranze?*"}),d.jsx("input",{...y("intolerances",{required:!0}),className:R,placeholder:"Es. Lattosio, nessuna..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Problemi di digestione o gonfiore?*"}),d.jsx("input",{...y("digestionIssues",{required:!0}),className:R,placeholder:"S/No, e se s quali..."})]})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:T,children:"Allenamento"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Quanti allenamenti a settimana?*"}),d.jsx("input",{type:"number",...y("workoutsPerWeek",{required:!0}),className:R,placeholder:"Es. 3"})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Specialit, dove ti alleni e con quali attrezzi?*"}),d.jsx("textarea",{...y("trainingDetails",{required:!0}),rows:"3",className:R,placeholder:"Es. Bodybuilding in palestra..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"A che ora e per quanto tempo ti alleni?*"}),d.jsx("input",{...y("trainingTime",{required:!0}),className:R,placeholder:"Es. La sera dalle 18 alle 19:30"})]})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:T,children:"Salute e Obiettivi"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Infortuni o problematiche?*"}),d.jsx("textarea",{...y("injuries",{required:!0}),rows:"3",className:R,placeholder:"Es. Mal di schiena, ernie..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Prendi farmaci?*"}),d.jsx("input",{...y("medications",{required:!0}),className:R,placeholder:"S/No, e se s quali..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Usi integratori?*"}),d.jsx("input",{...y("supplements",{required:!0}),className:R,placeholder:"S/No, e se s quali..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Scrivimi il tuo obiettivo*"}),d.jsx("textarea",{...y("mainGoal",{required:!0}),rows:"3",className:R,placeholder:"Descrivi in dettaglio..."})]}),d.jsxs("div",{children:[d.jsx("label",{className:C,children:"Durata percorso scelto?*"}),d.jsx("input",{...y("programDuration",{required:!0}),className:R,placeholder:"Es. 3 mesi, 6 mesi..."})]})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:T,children:"Foto Iniziali"}),d.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Carica 4 foto per il check iniziale: frontale, laterale destro, laterale sinistro e posteriore."}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsx(b,{type:"front",label:"Frontale"}),d.jsx(b,{type:"right",label:"Laterale Destro"}),d.jsx(b,{type:"left",label:"Laterale Sinistro"}),d.jsx(b,{type:"back",label:"Posteriore"})]})]}),d.jsx("div",{className:"flex justify-end pt-4",children:d.jsxs("button",{type:"submit",disabled:v,className:"flex items-center gap-2 px-5 py-2.5 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition font-semibold disabled:opacity-50",children:[d.jsx(jm,{})," ",v?"Salvataggio...":"Salva Anamnesi e Foto"]})})]}):t&&d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:M,children:[d.jsx("h4",{className:T,children:"Dati Anagrafici"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsx(k,{label:"Nome",value:t.firstName}),d.jsx(k,{label:"Cognome",value:t.lastName}),d.jsx(k,{label:"Data di Nascita",value:t.birthDate}),d.jsx(k,{label:"Lavoro",value:t.job}),d.jsx(k,{label:"Peso (kg)",value:t.weight}),d.jsx(k,{label:"Altezza (cm)",value:t.height})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:T,children:"Abitudini Alimentari"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(k,{label:"Pasti al giorno",value:t.mealsPerDay}),d.jsx(k,{label:"Tipo Colazione",value:t.breakfastType}),d.jsx(k,{label:"Alimenti da inserire",value:t.desiredFoods}),d.jsx(k,{label:"Alimenti da evitare",value:t.dislikedFoods}),d.jsx(k,{label:"Intolleranze",value:t.intolerances}),d.jsx(k,{label:"Problemi di digestione",value:t.digestionIssues})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:T,children:"Allenamento"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(k,{label:"Allenamenti a settimana",value:t.workoutsPerWeek}),d.jsx(k,{label:"Dettagli Allenamento",value:t.trainingDetails}),d.jsx(k,{label:"Orario e Durata",value:t.trainingTime})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:T,children:"Salute e Obiettivi"}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(k,{label:"Infortuni o problematiche",value:t.injuries}),d.jsx(k,{label:"Farmaci",value:t.medications}),d.jsx(k,{label:"Integratori",value:t.supplements}),d.jsx(k,{label:"Obiettivo Principale",value:t.mainGoal}),d.jsx(k,{label:"Durata Percorso",value:t.programDuration})]})]}),d.jsxs("div",{className:M,children:[d.jsx("h4",{className:T,children:"Foto Iniziali"}),d.jsx(A,{urls:l})]}),d.jsx("div",{className:"flex justify-end pt-4",children:d.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition font-semibold",children:[d.jsx(sD,{})," Modifica"]})})]})]})},DJ=`
.react-calendar { width: 100%; background: rgba(31, 41, 55, 0.5); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 1rem; backdrop-filter: blur(10px); font-family: sans-serif; }
.react-calendar__tile, .react-calendar__month-view__weekdays__weekday { color: white; padding: 0.75em 0.5em; }
.react-calendar__navigation button { color: #22d3ee; font-weight: bold; font-size: 1.1em; }
.react-calendar__tile--now { background: rgba(55, 65, 81, 0.7); border-radius: 0.5rem; }
.react-calendar__tile--active { background: #0891b2; border-radius: 0.5rem; }
.react-calendar__tile:enabled:hover, .react-calendar__tile:enabled:focus { background: rgba(55, 65, 81, 1); border-radius: 0.5rem; }
.check-submitted { background-color: rgba(34, 197, 94, 0.5); border-radius: 50%; }
.suggested-day { box-shadow: 0 0 0 2px rgba(34, 211, 238, 0.6); border-radius: 50%; }
`,OJ=()=>d.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),QI=({formState:t,setFormState:e,handleSubmit:n,isUploading:r,handleFileChange:i})=>{const s=()=>e({id:null,notes:"",weight:"",photos:{},photoPreviews:{}}),o=({type:a,label:l,preview:c})=>d.jsxs("div",{className:"text-center",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300",children:l}),d.jsxs("div",{className:"mt-2 flex justify-center items-center w-full h-48 bg-gray-700/50 rounded-lg border-2 border-dashed border-gray-600 relative",children:[c?d.jsx("img",{src:c,alt:"preview",className:"h-full w-full object-contain rounded-lg"}):d.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[d.jsx(nD,{size:40}),d.jsx("p",{className:"mt-2 text-sm",children:"Carica foto"})]}),d.jsx("input",{type:"file",accept:"image/*",onChange:u=>i(u,a),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})]});return d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h3",{className:"font-bold text-lg mb-4 text-cyan-400",children:t.id?"Modifica Check":"Carica Nuovo Check"}),d.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",children:d.jsx(z$,{size:20})})]}),d.jsxs("form",{onSubmit:n,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Peso Attuale (kg)*"}),d.jsx("input",{type:"number",step:"0.1",value:t.weight,onChange:a=>e(l=>({...l,weight:a.target.value})),required:!0,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Es. 75.5"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Note sul check"}),d.jsx("textarea",{value:t.notes,onChange:a=>e(l=>({...l,notes:a.target.value})),rows:"4",className:"w-full p-2 bg-gray-700 border border-gray-600 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsx(o,{type:"front",label:"Frontale",preview:t.photoPreviews.front}),d.jsx(o,{type:"right",label:"Laterale Destro",preview:t.photoPreviews.right}),d.jsx(o,{type:"left",label:"Laterale Sinistro",preview:t.photoPreviews.left}),d.jsx(o,{type:"back",label:"Posteriore",preview:t.photoPreviews.back})]}),d.jsx("div",{className:"flex justify-end",children:d.jsxs("button",{type:"submit",disabled:r,className:"flex items-center gap-2 px-5 py-2.5 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition font-semibold disabled:opacity-50",children:[d.jsx(Lm,{})," ",r?"Salvataggio...":t.id?"Salva Modifiche":"Invia Check"]})})]})]})},MJ=({check:t,handleEditClick:e})=>{const n=(new Date-t.createdAt.toDate())/36e5<2;return d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("h3",{className:"font-bold text-lg text-cyan-400",children:["Riepilogo del ",t.createdAt.toDate().toLocaleDateString("it-IT")]}),n&&d.jsxs("button",{onClick:()=>e(t),className:"flex items-center gap-2 px-3 py-1.5 bg-gray-600 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg",children:[d.jsx(oD,{})," Modifica"]})]}),d.jsxs("div",{className:"mt-4 space-y-6",children:[d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-300",children:"Peso Registrato:"}),d.jsxs("p",{className:"text-white text-xl font-bold",children:[t.weight," kg"]})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-300",children:"Le tue note:"}),d.jsx("p",{className:"text-gray-400 p-3 bg-gray-900/50 rounded-lg min-h-[50px] whitespace-pre-wrap",children:t.notes||"Nessuna nota fornita."})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-300",children:"Feedback del Coach:"}),d.jsx("p",{className:"text-cyan-300 p-3 bg-cyan-900/30 rounded-lg min-h-[50px] whitespace-pre-wrap",children:t.coachNotes||"Il tuo coach non ha ancora lasciato un feedback."})]}),d.jsxs("div",{children:[d.jsx("h4",{className:"font-semibold text-gray-300",children:"Le tue foto:"}),d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-2",children:t.photoURLs&&Object.values(t.photoURLs).map((r,i)=>d.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:d.jsx("img",{src:r,alt:`foto check ${i}`,className:"rounded-lg w-full h-auto aspect-square object-cover"})},i))})]})]})]})};function jJ(){const[t,e]=D.useState([]),[n,r]=D.useState(!0),[i,s]=D.useState(new Date),[o,a]=D.useState({id:null,notes:"",weight:"",photos:{},photoPreviews:{}}),[l,c]=D.useState(!1),[u,f]=D.useState(null),p=nn(),y=di().currentUser,_=Dh();D.useEffect(()=>{if(!y){p("/client-login");return}const C=Ge(se,`clients/${y.uid}/checks`),M=Wn(C,li("createdAt","desc")),T=ut(M,A=>{e(A.docs.map(O=>({id:O.id,...O.data()}))),r(!1)}),b=Ce(se,`clients/${y.uid}`),k=ut(b,A=>{A.exists()&&A.data().prossimoCheck&&f(A.data().prossimoCheck.toDate())});return()=>{T(),k()}},[y,p]);const x=({date:C,view:M})=>{if(M==="month"){if(t.some(b=>b.createdAt&&b.createdAt.toDate().toDateString()===C.toDateString()))return"check-submitted";if(u&&C.toDateString()===u.toDateString())return"suggested-day"}},v=(C,M)=>{const T=C.target.files[0];T&&a(b=>({...b,photos:{...b.photos,[M]:T},photoPreviews:{...b.photoPreviews,[M]:URL.createObjectURL(T)}}))},w=C=>{s(C.createdAt.toDate()),a({id:C.id,notes:C.notes,weight:C.weight,photos:{},photoPreviews:C.photoURLs})},E=async C=>{C.preventDefault();const{id:M,notes:T,weight:b,photos:k}=o;if(!y||!b){alert("Per favore, compila almeno il peso.");return}c(!0);try{const A=M?t.find(P=>P.id===M):null;let O=A?{...A.photoURLs}:{};await Promise.all(Object.entries(k).map(async([P,B])=>{if(B){const z=`clients/${y.uid}/checks/${fb()}-${B.name}`,H=El(_,z);await JN(H,B),O[P]=await Dm(H)}}));const I={notes:T,weight:parseFloat(b),photoURLs:O};if(M)await qu(Ce(se,`clients/${y.uid}/checks`,M),{...I,lastUpdatedAt:Nt()}),alert("Check modificato con successo!");else{await Ph(Ge(se,`clients/${y.uid}/checks`),{...I,createdAt:i});const P=Ce(se,"clients",y.uid),B=await qi(P);if(B.exists()&&B.data().prossimoCheck){const z=B.data().prossimoCheck.toDate(),H=new Date(z);H.setDate(z.getDate()+7),await qu(P,{prossimoCheck:H})}alert("Check caricato con successo! La prossima scadenza  stata aggiornata.")}a({id:null,notes:"",weight:"",photos:{},photoPreviews:{}})}catch(A){console.error("Errore:",A),alert("Si  verificato un errore.")}finally{c(!1)}},R=()=>{const C=t.find(M=>M.createdAt&&M.createdAt.toDate().toDateString()===i.toDateString());return o.id?d.jsx(QI,{formState:o,setFormState:a,handleSubmit:E,isUploading:l,handleFileChange:v}):C?d.jsx(MJ,{check:C,handleEditClick:w}):d.jsx(QI,{formState:o,setFormState:a,handleSubmit:E,isUploading:l,handleFileChange:v})};return n?d.jsx(OJ,{}):d.jsxs(d.Fragment,{children:[d.jsx("style",{children:DJ}),d.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[d.jsxs("header",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:"I miei Check"}),d.jsxs("button",{onClick:()=>p("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg transition-colors",children:[d.jsx(Xs,{}),d.jsx("span",{children:"Dashboard"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"lg:col-span-1",children:[d.jsxs("div",{className:"mb-4 text-xs text-gray-400 flex flex-col gap-2",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500/50"})," Check inviato"]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-4 h-4 rounded-full shadow-[0_0_0_2px_rgba(34,211,238,0.6)]"})," Giorno di check"]})]}),d.jsx(fM,{onChange:C=>{a({id:null,notes:"",weight:"",photos:{},photoPreviews:{}}),s(C)},value:i,tileClassName:x})]}),d.jsx("div",{className:"lg:col-span-2 bg-gray-800/50 p-6 rounded-xl border border-white/10 min-h-[400px]",children:R()})]})]})]})}const LJ=()=>d.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),VJ=t=>t&&typeof t.toDate=="function"?t.toDate().toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric"}):"Data non disponibile",FJ=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!0),i=nn(),o=di().currentUser;return D.useEffect(()=>{if(!o){i("/client-login");return}const a=Ge(se,`clients/${o.uid}/payments`),l=Wn(a,li("paymentDate","desc")),c=ut(l,u=>{const f=u.docs.map(p=>({id:p.id,...p.data()}));e(f),r(!1)},u=>{console.error("Errore nel caricare i pagamenti:",u),r(!1)});return()=>c()},[o,i]),n?d.jsx(LJ,{}):d.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[d.jsxs("header",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:"Storico Pagamenti"}),d.jsxs("button",{onClick:()=>i("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg transition-colors",children:[d.jsx(Xs,{}),d.jsx("span",{children:"Dashboard"})]})]}),d.jsx("main",{className:"bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",children:d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"w-full text-left",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"border-b border-white/10",children:[d.jsxs("th",{className:"p-4 text-sm font-semibold text-gray-300",children:[d.jsx(Zx,{className:"inline mr-2"}),"Data"]}),d.jsxs("th",{className:"p-4 text-sm font-semibold text-gray-300",children:[d.jsx(la,{className:"inline mr-2"}),"Importo"]}),d.jsxs("th",{className:"p-4 text-sm font-semibold text-gray-300",children:[d.jsx(aD,{className:"inline mr-2"}),"Durata"]}),d.jsx("th",{className:"p-4 text-sm font-semibold text-gray-300 hidden sm:table-cell",children:"Metodo"})]})}),d.jsx("tbody",{children:t.length>0?t.map(a=>{var l;return d.jsxs("tr",{className:"border-b border-white/5 last:border-b-0",children:[d.jsx("td",{className:"p-4",children:VJ(a.paymentDate)}),d.jsxs("td",{className:"p-4 font-semibold text-cyan-400",children:[" ",(l=a.amount)==null?void 0:l.toFixed(2)]}),d.jsx("td",{className:"p-4",children:a.duration}),d.jsx("td",{className:"p-4 hidden sm:table-cell",children:a.paymentMethod||"Non specificato"})]},a.id)}):d.jsx("tr",{children:d.jsx("td",{colSpan:"4",className:"text-center text-gray-500 p-8",children:"Non  stato registrato ancora nessun pagamento."})})})]})})})]})},pb=["QwWST9OVOlTOi5oheyCqfpXLOLg2","3j0AXIRa4XdHq1ywCl4UBxJNsku2","AeZKjJYu5zMZ4mvffaGiqCBb0cF2"],XI=pb[0],UJ=pb.reduce((t,e)=>({...t,[e]:"Coach"}),{}),BJ=()=>d.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),zJ=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(""),[i,s]=D.useState(!0),[o,a]=D.useState(null),l=D.useRef(null),c=nn(),f=di().currentUser;D.useEffect(()=>{if(!f){c("/client-login");return}const m=[f.uid,XI].sort().join("_");a(m);let y=()=>{};return(async()=>{const x=Ce(se,"chats",m);if(!(await qi(x)).exists()){const R=await qi(Ce(se,"clients",f.uid)),C=R.exists()?R.data().name:f.email,M=[f.uid,...pb],T={...UJ,[f.uid]:C};await Rr(x,{participants:M,participantNames:T,lastMessage:"Conversazione avviata",lastUpdate:Nt(),lastMessageSenderId:XI,createdAt:Nt()})}const w=Ge(se,"chats",m,"messages"),E=Wn(w,li("createdAt"));y=ut(E,R=>{const C=R.docs.map(M=>({id:M.id,...M.data()}));e(C),s(!1)},R=>{console.error("Errore nel listener di Firebase (messaggi):",R),s(!1)})})(),()=>{y()}},[f,c]),D.useEffect(()=>{var m;(m=l.current)==null||m.scrollIntoView({behavior:"smooth"})},[t]);const p=async m=>{if(m.preventDefault(),!(n.trim()===""||!o||!f))try{const y=Ge(se,"chats",o,"messages");await Ph(y,{text:n,createdAt:Nt(),senderId:f.uid});const _=Ce(se,"chats",o);await Rr(_,{lastMessage:n,lastUpdate:Nt(),lastMessageSenderId:f.uid},{merge:!0}),r("")}catch(y){console.error("Errore durante l'invio del messaggio:",y),alert("Errore: Impossibile inviare il messaggio. Controlla le regole di sicurezza.")}};return i?d.jsx(BJ,{}):d.jsxs("div",{className:"min-h-screen bg-gray-900 text-white font-sans flex flex-col h-screen",children:[d.jsxs("header",{className:"flex justify-between items-center p-4 bg-gray-800/50 backdrop-blur-sm border-b border-white/10 sticky top-0",children:[d.jsx("h1",{className:"text-xl font-bold text-cyan-400",children:"Chat con il Coach"}),d.jsxs("button",{onClick:()=>c("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg",children:[d.jsx(Xs,{}),d.jsx("span",{children:"Dashboard"})]})]}),d.jsxs("main",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.map(m=>d.jsx("div",{className:`flex ${m.senderId===(f==null?void 0:f.uid)?"justify-end":"justify-start"}`,children:d.jsxs("div",{className:`max-w-xs md:max-w-md p-3 rounded-2xl ${m.senderId===(f==null?void 0:f.uid)?"bg-cyan-600 rounded-br-none":"bg-gray-700 rounded-bl-none"}`,children:[d.jsx("p",{className:"text-white break-words",children:m.text}),d.jsx("p",{className:"text-xs text-gray-300 mt-1 text-right",children:m.createdAt&&m.createdAt.toDate().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})})]})},m.id)),d.jsx("div",{ref:l})]}),d.jsx("footer",{className:"p-4 bg-gray-800/50 backdrop-blur-sm border-t border-white/10 sticky bottom-0",children:d.jsxs("form",{onSubmit:p,className:"flex items-center gap-4",children:[d.jsx("input",{type:"text",value:n,onChange:m=>r(m.target.value),placeholder:"Scrivi un messaggio...",className:"flex-1 p-3 bg-gray-700 border border-gray-600 rounded-full outline-none focus:ring-2 focus:ring-cyan-500 text-white"}),d.jsx("button",{type:"submit",className:"p-3 bg-cyan-600 hover:bg-cyan-700 text-white rounded-full transition-colors disabled:opacity-50",disabled:!n.trim(),children:d.jsx(Lm,{size:20})})]})})]})},$J=()=>{const[t,e]=D.useState(""),[n,r]=D.useState(""),[i,s]=D.useState(""),[o,a]=D.useState(!1),l=di(),c=async u=>{u.preventDefault(),r(""),s(""),a(!0);try{await $U(l,t),r("Email di reset inviata con successo! Controlla la tua casella di posta.")}catch(f){s("Nessun utente trovato con questa email. Controlla che sia corretta."),console.error("Errore nel reset password:",f)}finally{a(!1)}};return d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:d.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg",children:[d.jsx("h2",{className:"text-3xl font-bold text-center text-cyan-400",children:"Recupera Password"}),d.jsx("p",{className:"text-center text-gray-300",children:"Inserisci la tua email per ricevere un link di recupero."}),n?d.jsx("div",{className:"text-center p-4 bg-green-500/20 text-green-300 rounded-lg",children:d.jsx("p",{children:n})}):d.jsxs("form",{onSubmit:c,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400",children:"Email"}),d.jsxs("div",{className:"relative mt-1",children:[d.jsx(V$,{className:"absolute top-1/2 left-3 -translate-y-1/2 text-gray-400"}),d.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:u=>e(u.target.value),className:"w-full pl-10 pr-3 py-2 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]})]}),i&&d.jsx("p",{className:"text-red-500 text-sm text-center",children:i}),d.jsx("div",{children:d.jsx("button",{type:"submit",disabled:o,className:"w-full px-4 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500 disabled:bg-gray-500",children:o?"Invio in corso...":"Invia Link di Recupero"})})]}),d.jsx("div",{className:"text-center",children:d.jsxs(Io,{to:"/client-login",className:"text-sm text-cyan-400 hover:underline flex items-center justify-center gap-2",children:[d.jsx(Xs,{})," Torna al Login"]})})]})})},WJ=()=>d.jsx("div",{className:"flex justify-center items-center min-h-screen bg-background text-foreground",children:"Caricamento..."}),JI=({isAllowed:t,redirectPath:e,children:n})=>t?n||d.jsx(tF,{}):d.jsx(ff,{to:e,replace:!0}),HJ=()=>{const[t,e]=D.useState({isLoading:!0,user:null,isClient:!1}),n=nn();return D.useEffect(()=>{const r=sessionStorage.getItem("app_role"),i=GU(Ku,async s=>{if(s){const o=Ce(se,"clients",s.uid),a=await qi(o),l=a.exists()&&a.data().isClient;if(r==="admin"&&l){await up(Ku),e({isLoading:!1,user:null,isClient:!1});return}const c={isLoading:!1,user:s,isClient:l};e(c);const u=window.location.hash;(u.includes("#/login")||u.includes("#/client-login"))&&(c.isClient?n("/client/dashboard",{replace:!0}):n("/",{replace:!0}))}else sessionStorage.removeItem("app_role"),e({isLoading:!1,user:null,isClient:!1})});return()=>i()},[n]),t.isLoading?d.jsx(WJ,{}):d.jsxs(rF,{children:[d.jsx(xt,{path:"/login",element:d.jsx(H$,{})}),d.jsx(xt,{path:"/client-login",element:d.jsx(kJ,{})}),d.jsx(xt,{path:"/client/forgot-password",element:d.jsx($J,{})}),d.jsx(xt,{element:d.jsx(JI,{isAllowed:t.user&&!t.isClient,redirectPath:"/login"}),children:d.jsxs(xt,{element:d.jsx(W$,{}),children:[d.jsx(xt,{path:"/",element:d.jsx(iQ,{})}),d.jsx(xt,{path:"/clients",element:d.jsx(oQ,{})}),d.jsx(xt,{path:"/new",element:d.jsx(RQ,{})}),d.jsx(xt,{path:"/client/:clientId",element:d.jsx(xJ,{})}),d.jsx(xt,{path:"/edit/:clientId",element:d.jsx(bJ,{})}),d.jsx(xt,{path:"/updates",element:d.jsx(SJ,{})}),d.jsx(xt,{path:"/chat",element:d.jsx(TJ,{})})]})}),d.jsxs(xt,{element:d.jsx(JI,{isAllowed:t.user&&t.isClient,redirectPath:"/client-login"}),children:[d.jsx(xt,{path:"/client/first-access",element:d.jsx(IJ,{})}),d.jsx(xt,{path:"/client/dashboard",element:d.jsx(PJ,{})}),d.jsx(xt,{path:"/client/anamnesi",element:d.jsx(NJ,{})}),d.jsx(xt,{path:"/client/checks",element:d.jsx(jJ,{})}),d.jsx(xt,{path:"/client/payments",element:d.jsx(FJ,{})}),d.jsx(xt,{path:"/client/chat",element:d.jsx(zJ,{})})]}),d.jsx(xt,{path:"*",element:t.user?t.isClient?d.jsx(ff,{to:"/client/dashboard"}):d.jsx(ff,{to:"/"}):d.jsx(ff,{to:"/login"})})]})};function qJ(){return d.jsx(uF,{children:d.jsx(HJ,{})})}Ly.createRoot(document.getElementById("root")).render(d.jsx(rt.StrictMode,{children:d.jsx(qJ,{})}));
