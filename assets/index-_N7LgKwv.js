var zM=Object.defineProperty;var $M=(t,e,n)=>e in t?zM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var fe=(t,e,n)=>$M(t,typeof e!="symbol"?e+"":e,n);function WM(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function HM(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var aI={exports:{}},Wp={},lI={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ch=Symbol.for("react.element"),qM=Symbol.for("react.portal"),KM=Symbol.for("react.fragment"),GM=Symbol.for("react.strict_mode"),YM=Symbol.for("react.profiler"),QM=Symbol.for("react.provider"),XM=Symbol.for("react.context"),JM=Symbol.for("react.forward_ref"),ZM=Symbol.for("react.suspense"),eO=Symbol.for("react.memo"),tO=Symbol.for("react.lazy"),Jb=Symbol.iterator;function nO(t){return t===null||typeof t!="object"?null:(t=Jb&&t[Jb]||t["@@iterator"],typeof t=="function"?t:null)}var cI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uI=Object.assign,hI={};function jl(t,e,n){this.props=t,this.context=e,this.refs=hI,this.updater=n||cI}jl.prototype.isReactComponent={};jl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function dI(){}dI.prototype=jl.prototype;function H0(t,e,n){this.props=t,this.context=e,this.refs=hI,this.updater=n||cI}var q0=H0.prototype=new dI;q0.constructor=H0;uI(q0,jl.prototype);q0.isPureReactComponent=!0;var Zb=Array.isArray,fI=Object.prototype.hasOwnProperty,K0={current:null},pI={key:!0,ref:!0,__self:!0,__source:!0};function mI(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)fI.call(e,r)&&!pI.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ch,type:t,key:s,ref:o,props:i,_owner:K0.current}}function rO(t,e){return{$$typeof:ch,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function G0(t){return typeof t=="object"&&t!==null&&t.$$typeof===ch}function iO(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var eT=/\/+/g;function dg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iO(""+t.key):e.toString(36)}function Zd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ch:case qM:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+dg(o,0):r,Zb(i)?(n="",t!=null&&(n=t.replace(eT,"$&/")+"/"),Zd(i,e,n,"",function(c){return c})):i!=null&&(G0(i)&&(i=rO(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(eT,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Zb(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+dg(s,a);o+=Zd(s,e,n,l,i)}else if(l=nO(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+dg(s,a++),o+=Zd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sd(t,e,n){if(t==null)return t;var r=[],i=0;return Zd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function sO(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var An={current:null},ef={transition:null},oO={ReactCurrentDispatcher:An,ReactCurrentBatchConfig:ef,ReactCurrentOwner:K0};function gI(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:sd,forEach:function(t,e,n){sd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sd(t,function(){e++}),e},toArray:function(t){return sd(t,function(e){return e})||[]},only:function(t){if(!G0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=jl;Te.Fragment=KM;Te.Profiler=YM;Te.PureComponent=H0;Te.StrictMode=GM;Te.Suspense=ZM;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oO;Te.act=gI;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=uI({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=K0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)fI.call(e,l)&&!pI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:ch,type:t.type,key:i,ref:s,props:r,_owner:o}};Te.createContext=function(t){return t={$$typeof:XM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:QM,_context:t},t.Consumer=t};Te.createElement=mI;Te.createFactory=function(t){var e=mI.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:JM,render:t}};Te.isValidElement=G0;Te.lazy=function(t){return{$$typeof:tO,_payload:{_status:-1,_result:t},_init:sO}};Te.memo=function(t,e){return{$$typeof:eO,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=ef.transition;ef.transition={};try{t()}finally{ef.transition=e}};Te.unstable_act=gI;Te.useCallback=function(t,e){return An.current.useCallback(t,e)};Te.useContext=function(t){return An.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return An.current.useDeferredValue(t)};Te.useEffect=function(t,e){return An.current.useEffect(t,e)};Te.useId=function(){return An.current.useId()};Te.useImperativeHandle=function(t,e,n){return An.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return An.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return An.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return An.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return An.current.useReducer(t,e,n)};Te.useRef=function(t){return An.current.useRef(t)};Te.useState=function(t){return An.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return An.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return An.current.useTransition()};Te.version="18.3.1";lI.exports=Te;var j=lI.exports;const it=HM(j),aO=WM({__proto__:null,default:it},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lO=j,cO=Symbol.for("react.element"),uO=Symbol.for("react.fragment"),hO=Object.prototype.hasOwnProperty,dO=lO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fO={key:!0,ref:!0,__self:!0,__source:!0};function yI(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)hO.call(e,r)&&!fO.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:cO,type:t,key:s,ref:o,props:i,_owner:dO.current}}Wp.Fragment=uO;Wp.jsx=yI;Wp.jsxs=yI;aI.exports=Wp;var h=aI.exports,My={},vI={exports:{}},ir={},_I={exports:{}},xI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Q){var J=B.length;B.push(Q);e:for(;0<J;){var me=J-1>>>1,ue=B[me];if(0<i(ue,Q))B[me]=Q,B[J]=ue,J=me;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],J=B.pop();if(J!==Q){B[0]=J;e:for(var me=0,ue=B.length,xe=ue>>>1;me<xe;){var qe=2*(me+1)-1,nt=B[qe],Ke=qe+1,at=B[Ke];if(0>i(nt,J))Ke<ue&&0>i(at,nt)?(B[me]=at,B[Ke]=J,me=Ke):(B[me]=nt,B[qe]=J,me=qe);else if(Ke<ue&&0>i(at,J))B[me]=at,B[Ke]=J,me=Ke;else break e}}return Q}function i(B,Q){var J=B.sortIndex-Q.sortIndex;return J!==0?J:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,y=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(B){for(var Q=n(c);Q!==null;){if(Q.callback===null)r(c);else if(Q.startTime<=B)r(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=n(c)}}function P(B){if(_=!1,S(B),!y)if(n(l)!==null)y=!0,q(I);else{var Q=n(c);Q!==null&&Z(P,Q.startTime-B)}}function I(B,Q){y=!1,_&&(_=!1,v(T),T=-1),m=!0;var J=p;try{for(S(Q),f=n(l);f!==null&&(!(f.expirationTime>Q)||B&&!D());){var me=f.callback;if(typeof me=="function"){f.callback=null,p=f.priorityLevel;var ue=me(f.expirationTime<=Q);Q=t.unstable_now(),typeof ue=="function"?f.callback=ue:f===n(l)&&r(l),S(Q)}else r(l);f=n(l)}if(f!==null)var xe=!0;else{var qe=n(c);qe!==null&&Z(P,qe.startTime-Q),xe=!1}return xe}finally{f=null,p=J,m=!1}}var M=!1,k=null,T=-1,E=5,C=-1;function D(){return!(t.unstable_now()-C<E)}function A(){if(k!==null){var B=t.unstable_now();C=B;var Q=!0;try{Q=k(!0,B)}finally{Q?R():(M=!1,k=null)}}else M=!1}var R;if(typeof w=="function")R=function(){w(A)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,W=$.port2;$.port1.onmessage=A,R=function(){W.postMessage(null)}}else R=function(){x(A,0)};function q(B){k=B,M||(M=!0,R())}function Z(B,Q){T=x(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,q(I))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var Q=3;break;default:Q=p}var J=p;p=Q;try{return B()}finally{p=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=p;p=B;try{return Q()}finally{p=J}},t.unstable_scheduleCallback=function(B,Q,J){var me=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?me+J:me):J=me,B){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=J+ue,B={id:u++,callback:Q,priorityLevel:B,startTime:J,expirationTime:ue,sortIndex:-1},J>me?(B.sortIndex=J,e(c,B),n(l)===null&&B===n(c)&&(_?(v(T),T=-1):_=!0,Z(P,J-me))):(B.sortIndex=ue,e(l,B),y||m||(y=!0,q(I))),B},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(B){var Q=p;return function(){var J=p;p=Q;try{return B.apply(this,arguments)}finally{p=J}}}})(xI);_I.exports=xI;var pO=_I.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mO=j,nr=pO;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wI=new Set,_u={};function ta(t,e){ul(t,e),ul(t+"Capture",e)}function ul(t,e){for(_u[t]=e,t=0;t<e.length;t++)wI.add(e[t])}var Li=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oy=Object.prototype.hasOwnProperty,gO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tT={},nT={};function yO(t){return Oy.call(nT,t)?!0:Oy.call(tT,t)?!1:gO.test(t)?nT[t]=!0:(tT[t]=!0,!1)}function vO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _O(t,e,n,r){if(e===null||typeof e>"u"||vO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){en[t]=new Pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];en[e]=new Pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){en[t]=new Pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){en[t]=new Pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){en[t]=new Pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){en[t]=new Pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){en[t]=new Pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){en[t]=new Pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){en[t]=new Pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Y0=/[\-:]([a-z])/g;function Q0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Y0,Q0);en[e]=new Pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Y0,Q0);en[e]=new Pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Y0,Q0);en[e]=new Pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){en[t]=new Pn(t,1,!1,t.toLowerCase(),null,!1,!1)});en.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){en[t]=new Pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function X0(t,e,n,r){var i=en.hasOwnProperty(e)?en[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_O(e,n,i,r)&&(n=null),r||i===null?yO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var qi=mO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,od=Symbol.for("react.element"),Ra=Symbol.for("react.portal"),Na=Symbol.for("react.fragment"),J0=Symbol.for("react.strict_mode"),Ly=Symbol.for("react.profiler"),bI=Symbol.for("react.provider"),TI=Symbol.for("react.context"),Z0=Symbol.for("react.forward_ref"),Vy=Symbol.for("react.suspense"),Fy=Symbol.for("react.suspense_list"),e_=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),SI=Symbol.for("react.offscreen"),rT=Symbol.iterator;function uc(t){return t===null||typeof t!="object"?null:(t=rT&&t[rT]||t["@@iterator"],typeof t=="function"?t:null)}var dt=Object.assign,fg;function Ic(t){if(fg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fg=e&&e[1]||""}return`
`+fg+t}var pg=!1;function mg(t,e){if(!t||pg)return"";pg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{pg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ic(t):""}function xO(t){switch(t.tag){case 5:return Ic(t.type);case 16:return Ic("Lazy");case 13:return Ic("Suspense");case 19:return Ic("SuspenseList");case 0:case 2:case 15:return t=mg(t.type,!1),t;case 11:return t=mg(t.type.render,!1),t;case 1:return t=mg(t.type,!0),t;default:return""}}function Uy(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Na:return"Fragment";case Ra:return"Portal";case Ly:return"Profiler";case J0:return"StrictMode";case Vy:return"Suspense";case Fy:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case TI:return(t.displayName||"Context")+".Consumer";case bI:return(t._context.displayName||"Context")+".Provider";case Z0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case e_:return e=t.displayName||null,e!==null?e:Uy(t.type)||"Memo";case is:e=t._payload,t=t._init;try{return Uy(t(e))}catch{}}return null}function wO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uy(e);case 8:return e===J0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function EI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bO(t){var e=EI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ad(t){t._valueTracker||(t._valueTracker=bO(t))}function kI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=EI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function By(t,e){var n=e.checked;return dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function iT(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ls(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function CI(t,e){e=e.checked,e!=null&&X0(t,"checked",e,!1)}function zy(t,e){CI(t,e);var n=Ls(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$y(t,e.type,n):e.hasOwnProperty("defaultValue")&&$y(t,e.type,Ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sT(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $y(t,e,n){(e!=="number"||Nf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ac=Array.isArray;function Xa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ls(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wy(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function oT(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Ac(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ls(n)}}function II(t,e){var n=Ls(e.value),r=Ls(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function aT(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function AI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?AI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ld,PI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ld=ld||document.createElement("div"),ld.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ld.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Kc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TO=["Webkit","ms","Moz","O"];Object.keys(Kc).forEach(function(t){TO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Kc[e]=Kc[t]})});function RI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Kc.hasOwnProperty(t)&&Kc[t]?(""+e).trim():e+"px"}function NI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=RI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var SO=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qy(t,e){if(e){if(SO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function Ky(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gy=null;function t_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yy=null,Ja=null,Za=null;function lT(t){if(t=dh(t)){if(typeof Yy!="function")throw Error(K(280));var e=t.stateNode;e&&(e=Yp(e),Yy(t.stateNode,t.type,e))}}function DI(t){Ja?Za?Za.push(t):Za=[t]:Ja=t}function jI(){if(Ja){var t=Ja,e=Za;if(Za=Ja=null,lT(t),e)for(t=0;t<e.length;t++)lT(e[t])}}function MI(t,e){return t(e)}function OI(){}var gg=!1;function LI(t,e,n){if(gg)return t(e,n);gg=!0;try{return MI(t,e,n)}finally{gg=!1,(Ja!==null||Za!==null)&&(OI(),jI())}}function wu(t,e){var n=t.stateNode;if(n===null)return null;var r=Yp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var Qy=!1;if(Li)try{var hc={};Object.defineProperty(hc,"passive",{get:function(){Qy=!0}}),window.addEventListener("test",hc,hc),window.removeEventListener("test",hc,hc)}catch{Qy=!1}function EO(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Gc=!1,Df=null,jf=!1,Xy=null,kO={onError:function(t){Gc=!0,Df=t}};function CO(t,e,n,r,i,s,o,a,l){Gc=!1,Df=null,EO.apply(kO,arguments)}function IO(t,e,n,r,i,s,o,a,l){if(CO.apply(this,arguments),Gc){if(Gc){var c=Df;Gc=!1,Df=null}else throw Error(K(198));jf||(jf=!0,Xy=c)}}function na(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function VI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cT(t){if(na(t)!==t)throw Error(K(188))}function AO(t){var e=t.alternate;if(!e){if(e=na(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return cT(i),t;if(s===r)return cT(i),e;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function FI(t){return t=AO(t),t!==null?UI(t):null}function UI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=UI(t);if(e!==null)return e;t=t.sibling}return null}var BI=nr.unstable_scheduleCallback,uT=nr.unstable_cancelCallback,PO=nr.unstable_shouldYield,RO=nr.unstable_requestPaint,wt=nr.unstable_now,NO=nr.unstable_getCurrentPriorityLevel,n_=nr.unstable_ImmediatePriority,zI=nr.unstable_UserBlockingPriority,Mf=nr.unstable_NormalPriority,DO=nr.unstable_LowPriority,$I=nr.unstable_IdlePriority,Hp=null,Qr=null;function jO(t){if(Qr&&typeof Qr.onCommitFiberRoot=="function")try{Qr.onCommitFiberRoot(Hp,t,void 0,(t.current.flags&128)===128)}catch{}}var Ar=Math.clz32?Math.clz32:LO,MO=Math.log,OO=Math.LN2;function LO(t){return t>>>=0,t===0?32:31-(MO(t)/OO|0)|0}var cd=64,ud=4194304;function Pc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Of(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Pc(a):(s&=o,s!==0&&(r=Pc(s)))}else o=n&~i,o!==0?r=Pc(o):s!==0&&(r=Pc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ar(e),i=1<<n,r|=t[n],e&=~i;return r}function VO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ar(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=VO(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Jy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function WI(){var t=cd;return cd<<=1,!(cd&4194240)&&(cd=64),t}function yg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function uh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ar(e),t[e]=n}function UO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ar(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function r_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ar(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ve=0;function HI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qI,i_,KI,GI,YI,Zy=!1,hd=[],Ts=null,Ss=null,Es=null,bu=new Map,Tu=new Map,as=[],BO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hT(t,e){switch(t){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":bu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tu.delete(e.pointerId)}}function dc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=dh(e),e!==null&&i_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function zO(t,e,n,r,i){switch(e){case"focusin":return Ts=dc(Ts,t,e,n,r,i),!0;case"dragenter":return Ss=dc(Ss,t,e,n,r,i),!0;case"mouseover":return Es=dc(Es,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return bu.set(s,dc(bu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Tu.set(s,dc(Tu.get(s)||null,t,e,n,r,i)),!0}return!1}function QI(t){var e=ko(t.target);if(e!==null){var n=na(e);if(n!==null){if(e=n.tag,e===13){if(e=VI(n),e!==null){t.blockedOn=e,YI(t.priority,function(){KI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ev(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gy=r,n.target.dispatchEvent(r),Gy=null}else return e=dh(n),e!==null&&i_(e),t.blockedOn=n,!1;e.shift()}return!0}function dT(t,e,n){tf(t)&&n.delete(e)}function $O(){Zy=!1,Ts!==null&&tf(Ts)&&(Ts=null),Ss!==null&&tf(Ss)&&(Ss=null),Es!==null&&tf(Es)&&(Es=null),bu.forEach(dT),Tu.forEach(dT)}function fc(t,e){t.blockedOn===e&&(t.blockedOn=null,Zy||(Zy=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,$O)))}function Su(t){function e(i){return fc(i,t)}if(0<hd.length){fc(hd[0],t);for(var n=1;n<hd.length;n++){var r=hd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ts!==null&&fc(Ts,t),Ss!==null&&fc(Ss,t),Es!==null&&fc(Es,t),bu.forEach(e),Tu.forEach(e),n=0;n<as.length;n++)r=as[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<as.length&&(n=as[0],n.blockedOn===null);)QI(n),n.blockedOn===null&&as.shift()}var el=qi.ReactCurrentBatchConfig,Lf=!0;function WO(t,e,n,r){var i=Ve,s=el.transition;el.transition=null;try{Ve=1,s_(t,e,n,r)}finally{Ve=i,el.transition=s}}function HO(t,e,n,r){var i=Ve,s=el.transition;el.transition=null;try{Ve=4,s_(t,e,n,r)}finally{Ve=i,el.transition=s}}function s_(t,e,n,r){if(Lf){var i=ev(t,e,n,r);if(i===null)Cg(t,e,r,Vf,n),hT(t,r);else if(zO(i,t,e,n,r))r.stopPropagation();else if(hT(t,r),e&4&&-1<BO.indexOf(t)){for(;i!==null;){var s=dh(i);if(s!==null&&qI(s),s=ev(t,e,n,r),s===null&&Cg(t,e,r,Vf,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Cg(t,e,r,null,n)}}var Vf=null;function ev(t,e,n,r){if(Vf=null,t=t_(r),t=ko(t),t!==null)if(e=na(t),e===null)t=null;else if(n=e.tag,n===13){if(t=VI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vf=t,null}function XI(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NO()){case n_:return 1;case zI:return 4;case Mf:case DO:return 16;case $I:return 536870912;default:return 16}default:return 16}}var ms=null,o_=null,nf=null;function JI(){if(nf)return nf;var t,e=o_,n=e.length,r,i="value"in ms?ms.value:ms.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return nf=i.slice(t,1<r?1-r:void 0)}function rf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dd(){return!0}function fT(){return!1}function sr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?dd:fT,this.isPropagationStopped=fT,this}return dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dd)},persist:function(){},isPersistent:dd}),e}var Ml={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},a_=sr(Ml),hh=dt({},Ml,{view:0,detail:0}),qO=sr(hh),vg,_g,pc,qp=dt({},hh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:l_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pc&&(pc&&t.type==="mousemove"?(vg=t.screenX-pc.screenX,_g=t.screenY-pc.screenY):_g=vg=0,pc=t),vg)},movementY:function(t){return"movementY"in t?t.movementY:_g}}),pT=sr(qp),KO=dt({},qp,{dataTransfer:0}),GO=sr(KO),YO=dt({},hh,{relatedTarget:0}),xg=sr(YO),QO=dt({},Ml,{animationName:0,elapsedTime:0,pseudoElement:0}),XO=sr(QO),JO=dt({},Ml,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZO=sr(JO),eL=dt({},Ml,{data:0}),mT=sr(eL),tL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iL(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rL[t])?!!e[t]:!1}function l_(){return iL}var sL=dt({},hh,{key:function(t){if(t.key){var e=tL[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=rf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?nL[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:l_,charCode:function(t){return t.type==="keypress"?rf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?rf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),oL=sr(sL),aL=dt({},qp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gT=sr(aL),lL=dt({},hh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:l_}),cL=sr(lL),uL=dt({},Ml,{propertyName:0,elapsedTime:0,pseudoElement:0}),hL=sr(uL),dL=dt({},qp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),fL=sr(dL),pL=[9,13,27,32],c_=Li&&"CompositionEvent"in window,Yc=null;Li&&"documentMode"in document&&(Yc=document.documentMode);var mL=Li&&"TextEvent"in window&&!Yc,ZI=Li&&(!c_||Yc&&8<Yc&&11>=Yc),yT=" ",vT=!1;function eA(t,e){switch(t){case"keyup":return pL.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Da=!1;function gL(t,e){switch(t){case"compositionend":return tA(e);case"keypress":return e.which!==32?null:(vT=!0,yT);case"textInput":return t=e.data,t===yT&&vT?null:t;default:return null}}function yL(t,e){if(Da)return t==="compositionend"||!c_&&eA(t,e)?(t=JI(),nf=o_=ms=null,Da=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZI&&e.locale!=="ko"?null:e.data;default:return null}}var vL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _T(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!vL[t.type]:e==="textarea"}function nA(t,e,n,r){DI(r),e=Ff(e,"onChange"),0<e.length&&(n=new a_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qc=null,Eu=null;function _L(t){fA(t,0)}function Kp(t){var e=Oa(t);if(kI(e))return t}function xL(t,e){if(t==="change")return e}var rA=!1;if(Li){var wg;if(Li){var bg="oninput"in document;if(!bg){var xT=document.createElement("div");xT.setAttribute("oninput","return;"),bg=typeof xT.oninput=="function"}wg=bg}else wg=!1;rA=wg&&(!document.documentMode||9<document.documentMode)}function wT(){Qc&&(Qc.detachEvent("onpropertychange",iA),Eu=Qc=null)}function iA(t){if(t.propertyName==="value"&&Kp(Eu)){var e=[];nA(e,Eu,t,t_(t)),LI(_L,e)}}function wL(t,e,n){t==="focusin"?(wT(),Qc=e,Eu=n,Qc.attachEvent("onpropertychange",iA)):t==="focusout"&&wT()}function bL(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kp(Eu)}function TL(t,e){if(t==="click")return Kp(e)}function SL(t,e){if(t==="input"||t==="change")return Kp(e)}function EL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nr=typeof Object.is=="function"?Object.is:EL;function ku(t,e){if(Nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Oy.call(e,i)||!Nr(t[i],e[i]))return!1}return!0}function bT(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function TT(t,e){var n=bT(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=bT(n)}}function sA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oA(){for(var t=window,e=Nf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nf(t.document)}return e}function u_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kL(t){var e=oA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sA(n.ownerDocument.documentElement,n)){if(r!==null&&u_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=TT(n,s);var o=TT(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var CL=Li&&"documentMode"in document&&11>=document.documentMode,ja=null,tv=null,Xc=null,nv=!1;function ST(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nv||ja==null||ja!==Nf(r)||(r=ja,"selectionStart"in r&&u_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xc&&ku(Xc,r)||(Xc=r,r=Ff(tv,"onSelect"),0<r.length&&(e=new a_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ja)))}function fd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ma={animationend:fd("Animation","AnimationEnd"),animationiteration:fd("Animation","AnimationIteration"),animationstart:fd("Animation","AnimationStart"),transitionend:fd("Transition","TransitionEnd")},Tg={},aA={};Li&&(aA=document.createElement("div").style,"AnimationEvent"in window||(delete Ma.animationend.animation,delete Ma.animationiteration.animation,delete Ma.animationstart.animation),"TransitionEvent"in window||delete Ma.transitionend.transition);function Gp(t){if(Tg[t])return Tg[t];if(!Ma[t])return t;var e=Ma[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in aA)return Tg[t]=e[n];return t}var lA=Gp("animationend"),cA=Gp("animationiteration"),uA=Gp("animationstart"),hA=Gp("transitionend"),dA=new Map,ET="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qs(t,e){dA.set(t,e),ta(e,[t])}for(var Sg=0;Sg<ET.length;Sg++){var Eg=ET[Sg],IL=Eg.toLowerCase(),AL=Eg[0].toUpperCase()+Eg.slice(1);qs(IL,"on"+AL)}qs(lA,"onAnimationEnd");qs(cA,"onAnimationIteration");qs(uA,"onAnimationStart");qs("dblclick","onDoubleClick");qs("focusin","onFocus");qs("focusout","onBlur");qs(hA,"onTransitionEnd");ul("onMouseEnter",["mouseout","mouseover"]);ul("onMouseLeave",["mouseout","mouseover"]);ul("onPointerEnter",["pointerout","pointerover"]);ul("onPointerLeave",["pointerout","pointerover"]);ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ta("onBeforeInput",["compositionend","keypress","textInput","paste"]);ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PL=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rc));function kT(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,IO(r,e,void 0,t),t.currentTarget=null}function fA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;kT(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;kT(i,a,c),s=l}}}if(jf)throw t=Xy,jf=!1,Xy=null,t}function Xe(t,e){var n=e[av];n===void 0&&(n=e[av]=new Set);var r=t+"__bubble";n.has(r)||(pA(e,t,2,!1),n.add(r))}function kg(t,e,n){var r=0;e&&(r|=4),pA(n,t,r,e)}var pd="_reactListening"+Math.random().toString(36).slice(2);function Cu(t){if(!t[pd]){t[pd]=!0,wI.forEach(function(n){n!=="selectionchange"&&(PL.has(n)||kg(n,!1,t),kg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[pd]||(e[pd]=!0,kg("selectionchange",!1,e))}}function pA(t,e,n,r){switch(XI(e)){case 1:var i=WO;break;case 4:i=HO;break;default:i=s_}n=i.bind(null,e,n,t),i=void 0,!Qy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Cg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ko(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}LI(function(){var c=s,u=t_(n),f=[];e:{var p=dA.get(t);if(p!==void 0){var m=a_,y=t;switch(t){case"keypress":if(rf(n)===0)break e;case"keydown":case"keyup":m=oL;break;case"focusin":y="focus",m=xg;break;case"focusout":y="blur",m=xg;break;case"beforeblur":case"afterblur":m=xg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=pT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=GO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=cL;break;case lA:case cA:case uA:m=XO;break;case hA:m=hL;break;case"scroll":m=qO;break;case"wheel":m=fL;break;case"copy":case"cut":case"paste":m=ZO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=gT}var _=(e&4)!==0,x=!_&&t==="scroll",v=_?p!==null?p+"Capture":null:p;_=[];for(var w=c,S;w!==null;){S=w;var P=S.stateNode;if(S.tag===5&&P!==null&&(S=P,v!==null&&(P=wu(w,v),P!=null&&_.push(Iu(w,P,S)))),x)break;w=w.return}0<_.length&&(p=new m(p,y,null,n,u),f.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Gy&&(y=n.relatedTarget||n.fromElement)&&(ko(y)||y[Vi]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?ko(y):null,y!==null&&(x=na(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(_=pT,P="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(_=gT,P="onPointerLeave",v="onPointerEnter",w="pointer"),x=m==null?p:Oa(m),S=y==null?p:Oa(y),p=new _(P,w+"leave",m,n,u),p.target=x,p.relatedTarget=S,P=null,ko(u)===c&&(_=new _(v,w+"enter",y,n,u),_.target=S,_.relatedTarget=x,P=_),x=P,m&&y)t:{for(_=m,v=y,w=0,S=_;S;S=Ta(S))w++;for(S=0,P=v;P;P=Ta(P))S++;for(;0<w-S;)_=Ta(_),w--;for(;0<S-w;)v=Ta(v),S--;for(;w--;){if(_===v||v!==null&&_===v.alternate)break t;_=Ta(_),v=Ta(v)}_=null}else _=null;m!==null&&CT(f,p,m,_,!1),y!==null&&x!==null&&CT(f,x,y,_,!0)}}e:{if(p=c?Oa(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var I=xL;else if(_T(p))if(rA)I=SL;else{I=bL;var M=wL}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(I=TL);if(I&&(I=I(t,c))){nA(f,I,n,u);break e}M&&M(t,p,c),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&$y(p,"number",p.value)}switch(M=c?Oa(c):window,t){case"focusin":(_T(M)||M.contentEditable==="true")&&(ja=M,tv=c,Xc=null);break;case"focusout":Xc=tv=ja=null;break;case"mousedown":nv=!0;break;case"contextmenu":case"mouseup":case"dragend":nv=!1,ST(f,n,u);break;case"selectionchange":if(CL)break;case"keydown":case"keyup":ST(f,n,u)}var k;if(c_)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Da?eA(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(ZI&&n.locale!=="ko"&&(Da||T!=="onCompositionStart"?T==="onCompositionEnd"&&Da&&(k=JI()):(ms=u,o_="value"in ms?ms.value:ms.textContent,Da=!0)),M=Ff(c,T),0<M.length&&(T=new mT(T,t,null,n,u),f.push({event:T,listeners:M}),k?T.data=k:(k=tA(n),k!==null&&(T.data=k)))),(k=mL?gL(t,n):yL(t,n))&&(c=Ff(c,"onBeforeInput"),0<c.length&&(u=new mT("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=k))}fA(f,e)})}function Iu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ff(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=wu(t,n),s!=null&&r.unshift(Iu(t,s,i)),s=wu(t,e),s!=null&&r.push(Iu(t,s,i))),t=t.return}return r}function Ta(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function CT(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=wu(n,s),l!=null&&o.unshift(Iu(n,l,a))):i||(l=wu(n,s),l!=null&&o.push(Iu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var RL=/\r\n?/g,NL=/\u0000|\uFFFD/g;function IT(t){return(typeof t=="string"?t:""+t).replace(RL,`
`).replace(NL,"")}function md(t,e,n){if(e=IT(e),IT(t)!==e&&n)throw Error(K(425))}function Uf(){}var rv=null,iv=null;function sv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ov=typeof setTimeout=="function"?setTimeout:void 0,DL=typeof clearTimeout=="function"?clearTimeout:void 0,AT=typeof Promise=="function"?Promise:void 0,jL=typeof queueMicrotask=="function"?queueMicrotask:typeof AT<"u"?function(t){return AT.resolve(null).then(t).catch(ML)}:ov;function ML(t){setTimeout(function(){throw t})}function Ig(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Su(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Su(e)}function ks(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function PT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ol=Math.random().toString(36).slice(2),Gr="__reactFiber$"+Ol,Au="__reactProps$"+Ol,Vi="__reactContainer$"+Ol,av="__reactEvents$"+Ol,OL="__reactListeners$"+Ol,LL="__reactHandles$"+Ol;function ko(t){var e=t[Gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vi]||n[Gr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=PT(t);t!==null;){if(n=t[Gr])return n;t=PT(t)}return e}t=n,n=t.parentNode}return null}function dh(t){return t=t[Gr]||t[Vi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Oa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function Yp(t){return t[Au]||null}var lv=[],La=-1;function Ks(t){return{current:t}}function Ze(t){0>La||(t.current=lv[La],lv[La]=null,La--)}function Ye(t,e){La++,lv[La]=t.current,t.current=e}var Vs={},xn=Ks(Vs),Bn=Ks(!1),$o=Vs;function hl(t,e){var n=t.type.contextTypes;if(!n)return Vs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function zn(t){return t=t.childContextTypes,t!=null}function Bf(){Ze(Bn),Ze(xn)}function RT(t,e,n){if(xn.current!==Vs)throw Error(K(168));Ye(xn,e),Ye(Bn,n)}function mA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(K(108,wO(t)||"Unknown",i));return dt({},n,r)}function zf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Vs,$o=xn.current,Ye(xn,t),Ye(Bn,Bn.current),!0}function NT(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=mA(t,e,$o),r.__reactInternalMemoizedMergedChildContext=t,Ze(Bn),Ze(xn),Ye(xn,t)):Ze(Bn),Ye(Bn,n)}var bi=null,Qp=!1,Ag=!1;function gA(t){bi===null?bi=[t]:bi.push(t)}function VL(t){Qp=!0,gA(t)}function Gs(){if(!Ag&&bi!==null){Ag=!0;var t=0,e=Ve;try{var n=bi;for(Ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}bi=null,Qp=!1}catch(i){throw bi!==null&&(bi=bi.slice(t+1)),BI(n_,Gs),i}finally{Ve=e,Ag=!1}}return null}var Va=[],Fa=0,$f=null,Wf=0,cr=[],ur=0,Wo=null,Ei=1,ki="";function vo(t,e){Va[Fa++]=Wf,Va[Fa++]=$f,$f=t,Wf=e}function yA(t,e,n){cr[ur++]=Ei,cr[ur++]=ki,cr[ur++]=Wo,Wo=t;var r=Ei;t=ki;var i=32-Ar(r)-1;r&=~(1<<i),n+=1;var s=32-Ar(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ei=1<<32-Ar(e)+i|n<<i|r,ki=s+t}else Ei=1<<s|n<<i|r,ki=t}function h_(t){t.return!==null&&(vo(t,1),yA(t,1,0))}function d_(t){for(;t===$f;)$f=Va[--Fa],Va[Fa]=null,Wf=Va[--Fa],Va[Fa]=null;for(;t===Wo;)Wo=cr[--ur],cr[ur]=null,ki=cr[--ur],cr[ur]=null,Ei=cr[--ur],cr[ur]=null}var er=null,Qn=null,st=!1,Er=null;function vA(t,e){var n=hr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function DT(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,er=t,Qn=ks(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,er=t,Qn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Wo!==null?{id:Ei,overflow:ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=hr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,er=t,Qn=null,!0):!1;default:return!1}}function cv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function uv(t){if(st){var e=Qn;if(e){var n=e;if(!DT(t,e)){if(cv(t))throw Error(K(418));e=ks(n.nextSibling);var r=er;e&&DT(t,e)?vA(r,n):(t.flags=t.flags&-4097|2,st=!1,er=t)}}else{if(cv(t))throw Error(K(418));t.flags=t.flags&-4097|2,st=!1,er=t}}}function jT(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;er=t}function gd(t){if(t!==er)return!1;if(!st)return jT(t),st=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sv(t.type,t.memoizedProps)),e&&(e=Qn)){if(cv(t))throw _A(),Error(K(418));for(;e;)vA(t,e),e=ks(e.nextSibling)}if(jT(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Qn=ks(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Qn=null}}else Qn=er?ks(t.stateNode.nextSibling):null;return!0}function _A(){for(var t=Qn;t;)t=ks(t.nextSibling)}function dl(){Qn=er=null,st=!1}function f_(t){Er===null?Er=[t]:Er.push(t)}var FL=qi.ReactCurrentBatchConfig;function mc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function yd(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function MT(t){var e=t._init;return e(t._payload)}function xA(t){function e(v,w){if(t){var S=v.deletions;S===null?(v.deletions=[w],v.flags|=16):S.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function i(v,w){return v=Ps(v,w),v.index=0,v.sibling=null,v}function s(v,w,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<w?(v.flags|=2,w):S):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,w,S,P){return w===null||w.tag!==6?(w=Og(S,v.mode,P),w.return=v,w):(w=i(w,S),w.return=v,w)}function l(v,w,S,P){var I=S.type;return I===Na?u(v,w,S.props.children,P,S.key):w!==null&&(w.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===is&&MT(I)===w.type)?(P=i(w,S.props),P.ref=mc(v,w,S),P.return=v,P):(P=hf(S.type,S.key,S.props,null,v.mode,P),P.ref=mc(v,w,S),P.return=v,P)}function c(v,w,S,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=Lg(S,v.mode,P),w.return=v,w):(w=i(w,S.children||[]),w.return=v,w)}function u(v,w,S,P,I){return w===null||w.tag!==7?(w=Oo(S,v.mode,P,I),w.return=v,w):(w=i(w,S),w.return=v,w)}function f(v,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Og(""+w,v.mode,S),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case od:return S=hf(w.type,w.key,w.props,null,v.mode,S),S.ref=mc(v,null,w),S.return=v,S;case Ra:return w=Lg(w,v.mode,S),w.return=v,w;case is:var P=w._init;return f(v,P(w._payload),S)}if(Ac(w)||uc(w))return w=Oo(w,v.mode,S,null),w.return=v,w;yd(v,w)}return null}function p(v,w,S,P){var I=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return I!==null?null:a(v,w,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case od:return S.key===I?l(v,w,S,P):null;case Ra:return S.key===I?c(v,w,S,P):null;case is:return I=S._init,p(v,w,I(S._payload),P)}if(Ac(S)||uc(S))return I!==null?null:u(v,w,S,P,null);yd(v,S)}return null}function m(v,w,S,P,I){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(S)||null,a(w,v,""+P,I);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case od:return v=v.get(P.key===null?S:P.key)||null,l(w,v,P,I);case Ra:return v=v.get(P.key===null?S:P.key)||null,c(w,v,P,I);case is:var M=P._init;return m(v,w,S,M(P._payload),I)}if(Ac(P)||uc(P))return v=v.get(S)||null,u(w,v,P,I,null);yd(w,P)}return null}function y(v,w,S,P){for(var I=null,M=null,k=w,T=w=0,E=null;k!==null&&T<S.length;T++){k.index>T?(E=k,k=null):E=k.sibling;var C=p(v,k,S[T],P);if(C===null){k===null&&(k=E);break}t&&k&&C.alternate===null&&e(v,k),w=s(C,w,T),M===null?I=C:M.sibling=C,M=C,k=E}if(T===S.length)return n(v,k),st&&vo(v,T),I;if(k===null){for(;T<S.length;T++)k=f(v,S[T],P),k!==null&&(w=s(k,w,T),M===null?I=k:M.sibling=k,M=k);return st&&vo(v,T),I}for(k=r(v,k);T<S.length;T++)E=m(k,v,T,S[T],P),E!==null&&(t&&E.alternate!==null&&k.delete(E.key===null?T:E.key),w=s(E,w,T),M===null?I=E:M.sibling=E,M=E);return t&&k.forEach(function(D){return e(v,D)}),st&&vo(v,T),I}function _(v,w,S,P){var I=uc(S);if(typeof I!="function")throw Error(K(150));if(S=I.call(S),S==null)throw Error(K(151));for(var M=I=null,k=w,T=w=0,E=null,C=S.next();k!==null&&!C.done;T++,C=S.next()){k.index>T?(E=k,k=null):E=k.sibling;var D=p(v,k,C.value,P);if(D===null){k===null&&(k=E);break}t&&k&&D.alternate===null&&e(v,k),w=s(D,w,T),M===null?I=D:M.sibling=D,M=D,k=E}if(C.done)return n(v,k),st&&vo(v,T),I;if(k===null){for(;!C.done;T++,C=S.next())C=f(v,C.value,P),C!==null&&(w=s(C,w,T),M===null?I=C:M.sibling=C,M=C);return st&&vo(v,T),I}for(k=r(v,k);!C.done;T++,C=S.next())C=m(k,v,T,C.value,P),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?T:C.key),w=s(C,w,T),M===null?I=C:M.sibling=C,M=C);return t&&k.forEach(function(A){return e(v,A)}),st&&vo(v,T),I}function x(v,w,S,P){if(typeof S=="object"&&S!==null&&S.type===Na&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case od:e:{for(var I=S.key,M=w;M!==null;){if(M.key===I){if(I=S.type,I===Na){if(M.tag===7){n(v,M.sibling),w=i(M,S.props.children),w.return=v,v=w;break e}}else if(M.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===is&&MT(I)===M.type){n(v,M.sibling),w=i(M,S.props),w.ref=mc(v,M,S),w.return=v,v=w;break e}n(v,M);break}else e(v,M);M=M.sibling}S.type===Na?(w=Oo(S.props.children,v.mode,P,S.key),w.return=v,v=w):(P=hf(S.type,S.key,S.props,null,v.mode,P),P.ref=mc(v,w,S),P.return=v,v=P)}return o(v);case Ra:e:{for(M=S.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){n(v,w.sibling),w=i(w,S.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=Lg(S,v.mode,P),w.return=v,v=w}return o(v);case is:return M=S._init,x(v,w,M(S._payload),P)}if(Ac(S))return y(v,w,S,P);if(uc(S))return _(v,w,S,P);yd(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(n(v,w.sibling),w=i(w,S),w.return=v,v=w):(n(v,w),w=Og(S,v.mode,P),w.return=v,v=w),o(v)):n(v,w)}return x}var fl=xA(!0),wA=xA(!1),Hf=Ks(null),qf=null,Ua=null,p_=null;function m_(){p_=Ua=qf=null}function g_(t){var e=Hf.current;Ze(Hf),t._currentValue=e}function hv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function tl(t,e){qf=t,p_=Ua=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fn=!0),t.firstContext=null)}function mr(t){var e=t._currentValue;if(p_!==t)if(t={context:t,memoizedValue:e,next:null},Ua===null){if(qf===null)throw Error(K(308));Ua=t,qf.dependencies={lanes:0,firstContext:t}}else Ua=Ua.next=t;return e}var Co=null;function y_(t){Co===null?Co=[t]:Co.push(t)}function bA(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,y_(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fi(t,r)}function Fi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ss=!1;function v_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function TA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ri(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Pe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fi(t,n)}return i=r.interleaved,i===null?(e.next=e,y_(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fi(t,n)}function sf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,r_(t,n)}}function OT(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Kf(t,e,n,r){var i=t.updateQueue;ss=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,_=a;switch(p=e,m=n,_.tag){case 1:if(y=_.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=dt({},f,p);break e;case 2:ss=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);qo|=o,t.lanes=o,t.memoizedState=f}}function LT(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(K(191,i));i.call(r)}}}var fh={},Xr=Ks(fh),Pu=Ks(fh),Ru=Ks(fh);function Io(t){if(t===fh)throw Error(K(174));return t}function __(t,e){switch(Ye(Ru,e),Ye(Pu,t),Ye(Xr,fh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hy(e,t)}Ze(Xr),Ye(Xr,e)}function pl(){Ze(Xr),Ze(Pu),Ze(Ru)}function SA(t){Io(Ru.current);var e=Io(Xr.current),n=Hy(e,t.type);e!==n&&(Ye(Pu,t),Ye(Xr,n))}function x_(t){Pu.current===t&&(Ze(Xr),Ze(Pu))}var ct=Ks(0);function Gf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pg=[];function w_(){for(var t=0;t<Pg.length;t++)Pg[t]._workInProgressVersionPrimary=null;Pg.length=0}var of=qi.ReactCurrentDispatcher,Rg=qi.ReactCurrentBatchConfig,Ho=0,ht=null,jt=null,Bt=null,Yf=!1,Jc=!1,Nu=0,UL=0;function an(){throw Error(K(321))}function b_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Nr(t[n],e[n]))return!1;return!0}function T_(t,e,n,r,i,s){if(Ho=s,ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,of.current=t===null||t.memoizedState===null?WL:HL,t=n(r,i),Jc){s=0;do{if(Jc=!1,Nu=0,25<=s)throw Error(K(301));s+=1,Bt=jt=null,e.updateQueue=null,of.current=qL,t=n(r,i)}while(Jc)}if(of.current=Qf,e=jt!==null&&jt.next!==null,Ho=0,Bt=jt=ht=null,Yf=!1,e)throw Error(K(300));return t}function S_(){var t=Nu!==0;return Nu=0,t}function Wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?ht.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function gr(){if(jt===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=jt.next;var e=Bt===null?ht.memoizedState:Bt.next;if(e!==null)Bt=e,jt=t;else{if(t===null)throw Error(K(310));jt=t,t={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Bt===null?ht.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function Du(t,e){return typeof e=="function"?e(t):e}function Ng(t){var e=gr(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=jt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Ho&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,ht.lanes|=u,qo|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Nr(r,e.memoizedState)||(Fn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ht.lanes|=s,qo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dg(t){var e=gr(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Nr(s,e.memoizedState)||(Fn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function EA(){}function kA(t,e){var n=ht,r=gr(),i=e(),s=!Nr(r.memoizedState,i);if(s&&(r.memoizedState=i,Fn=!0),r=r.queue,E_(AA.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,ju(9,IA.bind(null,n,r,i,e),void 0,null),zt===null)throw Error(K(349));Ho&30||CA(n,e,i)}return i}function CA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function IA(t,e,n,r){e.value=n,e.getSnapshot=r,PA(e)&&RA(t)}function AA(t,e,n){return n(function(){PA(e)&&RA(t)})}function PA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Nr(t,n)}catch{return!0}}function RA(t){var e=Fi(t,1);e!==null&&Pr(e,t,1,-1)}function VT(t){var e=Wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Du,lastRenderedState:t},e.queue=t,t=t.dispatch=$L.bind(null,ht,t),[e.memoizedState,t]}function ju(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function NA(){return gr().memoizedState}function af(t,e,n,r){var i=Wr();ht.flags|=t,i.memoizedState=ju(1|e,n,void 0,r===void 0?null:r)}function Xp(t,e,n,r){var i=gr();r=r===void 0?null:r;var s=void 0;if(jt!==null){var o=jt.memoizedState;if(s=o.destroy,r!==null&&b_(r,o.deps)){i.memoizedState=ju(e,n,s,r);return}}ht.flags|=t,i.memoizedState=ju(1|e,n,s,r)}function FT(t,e){return af(8390656,8,t,e)}function E_(t,e){return Xp(2048,8,t,e)}function DA(t,e){return Xp(4,2,t,e)}function jA(t,e){return Xp(4,4,t,e)}function MA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function OA(t,e,n){return n=n!=null?n.concat([t]):null,Xp(4,4,MA.bind(null,e,t),n)}function k_(){}function LA(t,e){var n=gr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&b_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function VA(t,e){var n=gr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&b_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function FA(t,e,n){return Ho&21?(Nr(n,e)||(n=WI(),ht.lanes|=n,qo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fn=!0),t.memoizedState=n)}function BL(t,e){var n=Ve;Ve=n!==0&&4>n?n:4,t(!0);var r=Rg.transition;Rg.transition={};try{t(!1),e()}finally{Ve=n,Rg.transition=r}}function UA(){return gr().memoizedState}function zL(t,e,n){var r=As(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},BA(t))zA(e,n);else if(n=bA(t,e,n,r),n!==null){var i=Cn();Pr(n,t,r,i),$A(n,e,r)}}function $L(t,e,n){var r=As(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(BA(t))zA(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Nr(a,o)){var l=e.interleaved;l===null?(i.next=i,y_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=bA(t,e,i,r),n!==null&&(i=Cn(),Pr(n,t,r,i),$A(n,e,r))}}function BA(t){var e=t.alternate;return t===ht||e!==null&&e===ht}function zA(t,e){Jc=Yf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $A(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,r_(t,n)}}var Qf={readContext:mr,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},WL={readContext:mr,useCallback:function(t,e){return Wr().memoizedState=[t,e===void 0?null:e],t},useContext:mr,useEffect:FT,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,af(4194308,4,MA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return af(4194308,4,t,e)},useInsertionEffect:function(t,e){return af(4,2,t,e)},useMemo:function(t,e){var n=Wr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=zL.bind(null,ht,t),[r.memoizedState,t]},useRef:function(t){var e=Wr();return t={current:t},e.memoizedState=t},useState:VT,useDebugValue:k_,useDeferredValue:function(t){return Wr().memoizedState=t},useTransition:function(){var t=VT(!1),e=t[0];return t=BL.bind(null,t[1]),Wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ht,i=Wr();if(st){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),zt===null)throw Error(K(349));Ho&30||CA(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,FT(AA.bind(null,r,s,t),[t]),r.flags|=2048,ju(9,IA.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Wr(),e=zt.identifierPrefix;if(st){var n=ki,r=Ei;n=(r&~(1<<32-Ar(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=UL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},HL={readContext:mr,useCallback:LA,useContext:mr,useEffect:E_,useImperativeHandle:OA,useInsertionEffect:DA,useLayoutEffect:jA,useMemo:VA,useReducer:Ng,useRef:NA,useState:function(){return Ng(Du)},useDebugValue:k_,useDeferredValue:function(t){var e=gr();return FA(e,jt.memoizedState,t)},useTransition:function(){var t=Ng(Du)[0],e=gr().memoizedState;return[t,e]},useMutableSource:EA,useSyncExternalStore:kA,useId:UA,unstable_isNewReconciler:!1},qL={readContext:mr,useCallback:LA,useContext:mr,useEffect:E_,useImperativeHandle:OA,useInsertionEffect:DA,useLayoutEffect:jA,useMemo:VA,useReducer:Dg,useRef:NA,useState:function(){return Dg(Du)},useDebugValue:k_,useDeferredValue:function(t){var e=gr();return jt===null?e.memoizedState=t:FA(e,jt.memoizedState,t)},useTransition:function(){var t=Dg(Du)[0],e=gr().memoizedState;return[t,e]},useMutableSource:EA,useSyncExternalStore:kA,useId:UA,unstable_isNewReconciler:!1};function br(t,e){if(t&&t.defaultProps){e=dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function dv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jp={isMounted:function(t){return(t=t._reactInternals)?na(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Cn(),i=As(t),s=Ri(r,i);s.payload=e,n!=null&&(s.callback=n),e=Cs(t,s,i),e!==null&&(Pr(e,t,i,r),sf(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Cn(),i=As(t),s=Ri(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Cs(t,s,i),e!==null&&(Pr(e,t,i,r),sf(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Cn(),r=As(t),i=Ri(n,r);i.tag=2,e!=null&&(i.callback=e),e=Cs(t,i,r),e!==null&&(Pr(e,t,r,n),sf(e,t,r))}};function UT(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ku(n,r)||!ku(i,s):!0}function WA(t,e,n){var r=!1,i=Vs,s=e.contextType;return typeof s=="object"&&s!==null?s=mr(s):(i=zn(e)?$o:xn.current,r=e.contextTypes,s=(r=r!=null)?hl(t,i):Vs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function BT(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jp.enqueueReplaceState(e,e.state,null)}function fv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},v_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=mr(s):(s=zn(e)?$o:xn.current,i.context=hl(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(dv(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Jp.enqueueReplaceState(i,i.state,null),Kf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ml(t,e){try{var n="",r=e;do n+=xO(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function jg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function pv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var KL=typeof WeakMap=="function"?WeakMap:Map;function HA(t,e,n){n=Ri(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Jf||(Jf=!0,Sv=r),pv(t,e)},n}function qA(t,e,n){n=Ri(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){pv(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){pv(t,e),typeof r!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function zT(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new KL;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=aV.bind(null,t,e,n),e.then(t,t))}function $T(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function WT(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ri(-1,1),e.tag=2,Cs(n,e,1))),n.lanes|=1),t)}var GL=qi.ReactCurrentOwner,Fn=!1;function En(t,e,n,r){e.child=t===null?wA(e,null,n,r):fl(e,t.child,n,r)}function HT(t,e,n,r,i){n=n.render;var s=e.ref;return tl(e,i),r=T_(t,e,n,r,s,i),n=S_(),t!==null&&!Fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ui(t,e,i)):(st&&n&&h_(e),e.flags|=1,En(t,e,r,i),e.child)}function qT(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!j_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,KA(t,e,s,r,i)):(t=hf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ku,n(o,r)&&t.ref===e.ref)return Ui(t,e,i)}return e.flags|=1,t=Ps(s,r),t.ref=e.ref,t.return=e,e.child=t}function KA(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ku(s,r)&&t.ref===e.ref)if(Fn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Fn=!0);else return e.lanes=t.lanes,Ui(t,e,i)}return mv(t,e,n,r,i)}function GA(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(za,Gn),Gn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ye(za,Gn),Gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ye(za,Gn),Gn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ye(za,Gn),Gn|=r;return En(t,e,i,n),e.child}function YA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function mv(t,e,n,r,i){var s=zn(n)?$o:xn.current;return s=hl(e,s),tl(e,i),n=T_(t,e,n,r,s,i),r=S_(),t!==null&&!Fn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ui(t,e,i)):(st&&r&&h_(e),e.flags|=1,En(t,e,n,i),e.child)}function KT(t,e,n,r,i){if(zn(n)){var s=!0;zf(e)}else s=!1;if(tl(e,i),e.stateNode===null)lf(t,e),WA(e,n,r),fv(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=mr(c):(c=zn(n)?$o:xn.current,c=hl(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&BT(e,o,r,c),ss=!1;var p=e.memoizedState;o.state=p,Kf(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Bn.current||ss?(typeof u=="function"&&(dv(e,n,u,r),l=e.memoizedState),(a=ss||UT(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,TA(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:br(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=mr(l):(l=zn(n)?$o:xn.current,l=hl(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&BT(e,o,r,l),ss=!1,p=e.memoizedState,o.state=p,Kf(e,r,o,i);var y=e.memoizedState;a!==f||p!==y||Bn.current||ss?(typeof m=="function"&&(dv(e,n,m,r),y=e.memoizedState),(c=ss||UT(e,n,c,r,p,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return gv(t,e,n,r,s,i)}function gv(t,e,n,r,i,s){YA(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&NT(e,n,!1),Ui(t,e,s);r=e.stateNode,GL.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=fl(e,t.child,null,s),e.child=fl(e,null,a,s)):En(t,e,a,s),e.memoizedState=r.state,i&&NT(e,n,!0),e.child}function QA(t){var e=t.stateNode;e.pendingContext?RT(t,e.pendingContext,e.pendingContext!==e.context):e.context&&RT(t,e.context,!1),__(t,e.containerInfo)}function GT(t,e,n,r,i){return dl(),f_(i),e.flags|=256,En(t,e,n,r),e.child}var yv={dehydrated:null,treeContext:null,retryLane:0};function vv(t){return{baseLanes:t,cachePool:null,transitions:null}}function XA(t,e,n){var r=e.pendingProps,i=ct.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ye(ct,i&1),t===null)return uv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=tm(o,r,0,null),t=Oo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=vv(n),e.memoizedState=yv,t):C_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return YL(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ps(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ps(a,s):(s=Oo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?vv(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=yv,r}return s=t.child,t=s.sibling,r=Ps(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function C_(t,e){return e=tm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vd(t,e,n,r){return r!==null&&f_(r),fl(e,t.child,null,n),t=C_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function YL(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=jg(Error(K(422))),vd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=tm({mode:"visible",children:r.children},i,0,null),s=Oo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&fl(e,t.child,null,o),e.child.memoizedState=vv(o),e.memoizedState=yv,s);if(!(e.mode&1))return vd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(K(419)),r=jg(s,r,void 0),vd(t,e,o,r)}if(a=(o&t.childLanes)!==0,Fn||a){if(r=zt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Fi(t,i),Pr(r,t,i,-1))}return D_(),r=jg(Error(K(421))),vd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=lV.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Qn=ks(i.nextSibling),er=e,st=!0,Er=null,t!==null&&(cr[ur++]=Ei,cr[ur++]=ki,cr[ur++]=Wo,Ei=t.id,ki=t.overflow,Wo=e),e=C_(e,r.children),e.flags|=4096,e)}function YT(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),hv(t.return,e,n)}function Mg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function JA(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(En(t,e,r.children,n),r=ct.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&YT(t,n,e);else if(t.tag===19)YT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ye(ct,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Gf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Mg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Gf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Mg(e,!0,n,null,s);break;case"together":Mg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function lf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ui(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=Ps(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ps(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function QL(t,e,n){switch(e.tag){case 3:QA(e),dl();break;case 5:SA(e);break;case 1:zn(e.type)&&zf(e);break;case 4:__(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ye(Hf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ye(ct,ct.current&1),e.flags|=128,null):n&e.child.childLanes?XA(t,e,n):(Ye(ct,ct.current&1),t=Ui(t,e,n),t!==null?t.sibling:null);Ye(ct,ct.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return JA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ye(ct,ct.current),r)break;return null;case 22:case 23:return e.lanes=0,GA(t,e,n)}return Ui(t,e,n)}var ZA,_v,eP,tP;ZA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_v=function(){};eP=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Io(Xr.current);var s=null;switch(n){case"input":i=By(t,i),r=By(t,r),s=[];break;case"select":i=dt({},i,{value:void 0}),r=dt({},r,{value:void 0}),s=[];break;case"textarea":i=Wy(t,i),r=Wy(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Uf)}qy(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(_u.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(_u.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Xe("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};tP=function(t,e,n,r){n!==r&&(e.flags|=4)};function gc(t,e){if(!st)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function XL(t,e,n){var r=e.pendingProps;switch(d_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return zn(e.type)&&Bf(),ln(e),null;case 3:return r=e.stateNode,pl(),Ze(Bn),Ze(xn),w_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(gd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Er!==null&&(Cv(Er),Er=null))),_v(t,e),ln(e),null;case 5:x_(e);var i=Io(Ru.current);if(n=e.type,t!==null&&e.stateNode!=null)eP(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return ln(e),null}if(t=Io(Xr.current),gd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Gr]=e,r[Au]=s,t=(e.mode&1)!==0,n){case"dialog":Xe("cancel",r),Xe("close",r);break;case"iframe":case"object":case"embed":Xe("load",r);break;case"video":case"audio":for(i=0;i<Rc.length;i++)Xe(Rc[i],r);break;case"source":Xe("error",r);break;case"img":case"image":case"link":Xe("error",r),Xe("load",r);break;case"details":Xe("toggle",r);break;case"input":iT(r,s),Xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Xe("invalid",r);break;case"textarea":oT(r,s),Xe("invalid",r)}qy(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&md(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&md(r.textContent,a,t),i=["children",""+a]):_u.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Xe("scroll",r)}switch(n){case"input":ad(r),sT(r,s,!0);break;case"textarea":ad(r),aT(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Uf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=AI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Gr]=e,t[Au]=r,ZA(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ky(n,r),n){case"dialog":Xe("cancel",t),Xe("close",t),i=r;break;case"iframe":case"object":case"embed":Xe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Rc.length;i++)Xe(Rc[i],t);i=r;break;case"source":Xe("error",t),i=r;break;case"img":case"image":case"link":Xe("error",t),Xe("load",t),i=r;break;case"details":Xe("toggle",t),i=r;break;case"input":iT(t,r),i=By(t,r),Xe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=dt({},r,{value:void 0}),Xe("invalid",t);break;case"textarea":oT(t,r),i=Wy(t,r),Xe("invalid",t);break;default:i=r}qy(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?NI(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&PI(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&xu(t,l):typeof l=="number"&&xu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_u.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Xe("scroll",t):l!=null&&X0(t,s,l,o))}switch(n){case"input":ad(t),sT(t,r,!1);break;case"textarea":ad(t),aT(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ls(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Xa(t,!!r.multiple,s,!1):r.defaultValue!=null&&Xa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Uf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)tP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Io(Ru.current),Io(Xr.current),gd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Gr]=e,(s=r.nodeValue!==n)&&(t=er,t!==null))switch(t.tag){case 3:md(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&md(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Gr]=e,e.stateNode=r}return ln(e),null;case 13:if(Ze(ct),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(st&&Qn!==null&&e.mode&1&&!(e.flags&128))_A(),dl(),e.flags|=98560,s=!1;else if(s=gd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[Gr]=e}else dl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),s=!1}else Er!==null&&(Cv(Er),Er=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ct.current&1?Mt===0&&(Mt=3):D_())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return pl(),_v(t,e),t===null&&Cu(e.stateNode.containerInfo),ln(e),null;case 10:return g_(e.type._context),ln(e),null;case 17:return zn(e.type)&&Bf(),ln(e),null;case 19:if(Ze(ct),s=e.memoizedState,s===null)return ln(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)gc(s,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Gf(t),o!==null){for(e.flags|=128,gc(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ye(ct,ct.current&1|2),e.child}t=t.sibling}s.tail!==null&&wt()>gl&&(e.flags|=128,r=!0,gc(s,!1),e.lanes=4194304)}else{if(!r)if(t=Gf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!st)return ln(e),null}else 2*wt()-s.renderingStartTime>gl&&n!==1073741824&&(e.flags|=128,r=!0,gc(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=wt(),e.sibling=null,n=ct.current,Ye(ct,r?n&1|2:n&1),e):(ln(e),null);case 22:case 23:return N_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gn&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function JL(t,e){switch(d_(e),e.tag){case 1:return zn(e.type)&&Bf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pl(),Ze(Bn),Ze(xn),w_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return x_(e),null;case 13:if(Ze(ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));dl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ze(ct),null;case 4:return pl(),null;case 10:return g_(e.type._context),null;case 22:case 23:return N_(),null;case 24:return null;default:return null}}var _d=!1,pn=!1,ZL=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Ba(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){vt(t,e,r)}else n.current=null}function xv(t,e,n){try{n()}catch(r){vt(t,e,r)}}var QT=!1;function eV(t,e){if(rv=Lf,t=oA(),u_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,p=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(iv={focusedElem:t,selectionRange:n},Lf=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,x=y.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?_:br(e.type,_),x);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(P){vt(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return y=QT,QT=!1,y}function Zc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&xv(e,n,s)}i=i.next}while(i!==r)}}function Zp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function wv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nP(t){var e=t.alternate;e!==null&&(t.alternate=null,nP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Gr],delete e[Au],delete e[av],delete e[OL],delete e[LL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rP(t){return t.tag===5||t.tag===3||t.tag===4}function XT(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Uf));else if(r!==4&&(t=t.child,t!==null))for(bv(t,e,n),t=t.sibling;t!==null;)bv(t,e,n),t=t.sibling}function Tv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Tv(t,e,n),t=t.sibling;t!==null;)Tv(t,e,n),t=t.sibling}var Kt=null,Sr=!1;function Zi(t,e,n){for(n=n.child;n!==null;)iP(t,e,n),n=n.sibling}function iP(t,e,n){if(Qr&&typeof Qr.onCommitFiberUnmount=="function")try{Qr.onCommitFiberUnmount(Hp,n)}catch{}switch(n.tag){case 5:pn||Ba(n,e);case 6:var r=Kt,i=Sr;Kt=null,Zi(t,e,n),Kt=r,Sr=i,Kt!==null&&(Sr?(t=Kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kt.removeChild(n.stateNode));break;case 18:Kt!==null&&(Sr?(t=Kt,n=n.stateNode,t.nodeType===8?Ig(t.parentNode,n):t.nodeType===1&&Ig(t,n),Su(t)):Ig(Kt,n.stateNode));break;case 4:r=Kt,i=Sr,Kt=n.stateNode.containerInfo,Sr=!0,Zi(t,e,n),Kt=r,Sr=i;break;case 0:case 11:case 14:case 15:if(!pn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&xv(n,e,o),i=i.next}while(i!==r)}Zi(t,e,n);break;case 1:if(!pn&&(Ba(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){vt(n,e,a)}Zi(t,e,n);break;case 21:Zi(t,e,n);break;case 22:n.mode&1?(pn=(r=pn)||n.memoizedState!==null,Zi(t,e,n),pn=r):Zi(t,e,n);break;default:Zi(t,e,n)}}function JT(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ZL),e.forEach(function(r){var i=cV.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Kt=a.stateNode,Sr=!1;break e;case 3:Kt=a.stateNode.containerInfo,Sr=!0;break e;case 4:Kt=a.stateNode.containerInfo,Sr=!0;break e}a=a.return}if(Kt===null)throw Error(K(160));iP(s,o,i),Kt=null,Sr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){vt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sP(e,t),e=e.sibling}function sP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xr(e,t),Ur(t),r&4){try{Zc(3,t,t.return),Zp(3,t)}catch(_){vt(t,t.return,_)}try{Zc(5,t,t.return)}catch(_){vt(t,t.return,_)}}break;case 1:xr(e,t),Ur(t),r&512&&n!==null&&Ba(n,n.return);break;case 5:if(xr(e,t),Ur(t),r&512&&n!==null&&Ba(n,n.return),t.flags&32){var i=t.stateNode;try{xu(i,"")}catch(_){vt(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&CI(i,s),Ky(a,o);var c=Ky(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?NI(i,f):u==="dangerouslySetInnerHTML"?PI(i,f):u==="children"?xu(i,f):X0(i,u,f,c)}switch(a){case"input":zy(i,s);break;case"textarea":II(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Xa(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Xa(i,!!s.multiple,s.defaultValue,!0):Xa(i,!!s.multiple,s.multiple?[]:"",!1))}i[Au]=s}catch(_){vt(t,t.return,_)}}break;case 6:if(xr(e,t),Ur(t),r&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){vt(t,t.return,_)}}break;case 3:if(xr(e,t),Ur(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Su(e.containerInfo)}catch(_){vt(t,t.return,_)}break;case 4:xr(e,t),Ur(t);break;case 13:xr(e,t),Ur(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(P_=wt())),r&4&&JT(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(pn=(c=pn)||u,xr(e,t),pn=c):xr(e,t),Ur(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ie=t,u=t.child;u!==null;){for(f=ie=u;ie!==null;){switch(p=ie,m=p.child,p.tag){case 0:case 11:case 14:case 15:Zc(4,p,p.return);break;case 1:Ba(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){vt(r,n,_)}}break;case 5:Ba(p,p.return);break;case 22:if(p.memoizedState!==null){eS(f);continue}}m!==null?(m.return=p,ie=m):eS(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=RI("display",o))}catch(_){vt(t,t.return,_)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(_){vt(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:xr(e,t),Ur(t),r&4&&JT(t);break;case 21:break;default:xr(e,t),Ur(t)}}function Ur(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rP(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(xu(i,""),r.flags&=-33);var s=XT(t);Tv(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=XT(t);bv(t,a,o);break;default:throw Error(K(161))}}catch(l){vt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function tV(t,e,n){ie=t,oP(t)}function oP(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||_d;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||pn;a=_d;var c=pn;if(_d=o,(pn=l)&&!c)for(ie=i;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?tS(i):l!==null?(l.return=o,ie=l):tS(i);for(;s!==null;)ie=s,oP(s),s=s.sibling;ie=i,_d=a,pn=c}ZT(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ie=s):ZT(t)}}function ZT(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pn||Zp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:br(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&LT(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}LT(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Su(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}pn||e.flags&512&&wv(e)}catch(p){vt(e,e.return,p)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function eS(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function tS(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zp(4,e)}catch(l){vt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){vt(e,i,l)}}var s=e.return;try{wv(e)}catch(l){vt(e,s,l)}break;case 5:var o=e.return;try{wv(e)}catch(l){vt(e,o,l)}}}catch(l){vt(e,e.return,l)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var nV=Math.ceil,Xf=qi.ReactCurrentDispatcher,I_=qi.ReactCurrentOwner,pr=qi.ReactCurrentBatchConfig,Pe=0,zt=null,At=null,Jt=0,Gn=0,za=Ks(0),Mt=0,Mu=null,qo=0,em=0,A_=0,eu=null,On=null,P_=0,gl=1/0,wi=null,Jf=!1,Sv=null,Is=null,xd=!1,gs=null,Zf=0,tu=0,Ev=null,cf=-1,uf=0;function Cn(){return Pe&6?wt():cf!==-1?cf:cf=wt()}function As(t){return t.mode&1?Pe&2&&Jt!==0?Jt&-Jt:FL.transition!==null?(uf===0&&(uf=WI()),uf):(t=Ve,t!==0||(t=window.event,t=t===void 0?16:XI(t.type)),t):1}function Pr(t,e,n,r){if(50<tu)throw tu=0,Ev=null,Error(K(185));uh(t,n,r),(!(Pe&2)||t!==zt)&&(t===zt&&(!(Pe&2)&&(em|=n),Mt===4&&ls(t,Jt)),$n(t,r),n===1&&Pe===0&&!(e.mode&1)&&(gl=wt()+500,Qp&&Gs()))}function $n(t,e){var n=t.callbackNode;FO(t,e);var r=Of(t,t===zt?Jt:0);if(r===0)n!==null&&uT(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&uT(n),e===1)t.tag===0?VL(nS.bind(null,t)):gA(nS.bind(null,t)),jL(function(){!(Pe&6)&&Gs()}),n=null;else{switch(HI(r)){case 1:n=n_;break;case 4:n=zI;break;case 16:n=Mf;break;case 536870912:n=$I;break;default:n=Mf}n=pP(n,aP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aP(t,e){if(cf=-1,uf=0,Pe&6)throw Error(K(327));var n=t.callbackNode;if(nl()&&t.callbackNode!==n)return null;var r=Of(t,t===zt?Jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ep(t,r);else{e=r;var i=Pe;Pe|=2;var s=cP();(zt!==t||Jt!==e)&&(wi=null,gl=wt()+500,Mo(t,e));do try{sV();break}catch(a){lP(t,a)}while(!0);m_(),Xf.current=s,Pe=i,At!==null?e=0:(zt=null,Jt=0,e=Mt)}if(e!==0){if(e===2&&(i=Jy(t),i!==0&&(r=i,e=kv(t,i))),e===1)throw n=Mu,Mo(t,0),ls(t,r),$n(t,wt()),n;if(e===6)ls(t,r);else{if(i=t.current.alternate,!(r&30)&&!rV(i)&&(e=ep(t,r),e===2&&(s=Jy(t),s!==0&&(r=s,e=kv(t,s))),e===1))throw n=Mu,Mo(t,0),ls(t,r),$n(t,wt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:_o(t,On,wi);break;case 3:if(ls(t,r),(r&130023424)===r&&(e=P_+500-wt(),10<e)){if(Of(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Cn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ov(_o.bind(null,t,On,wi),e);break}_o(t,On,wi);break;case 4:if(ls(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ar(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*nV(r/1960))-r,10<r){t.timeoutHandle=ov(_o.bind(null,t,On,wi),r);break}_o(t,On,wi);break;case 5:_o(t,On,wi);break;default:throw Error(K(329))}}}return $n(t,wt()),t.callbackNode===n?aP.bind(null,t):null}function kv(t,e){var n=eu;return t.current.memoizedState.isDehydrated&&(Mo(t,e).flags|=256),t=ep(t,e),t!==2&&(e=On,On=n,e!==null&&Cv(e)),t}function Cv(t){On===null?On=t:On.push.apply(On,t)}function rV(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Nr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ls(t,e){for(e&=~A_,e&=~em,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ar(e),r=1<<n;t[n]=-1,e&=~r}}function nS(t){if(Pe&6)throw Error(K(327));nl();var e=Of(t,0);if(!(e&1))return $n(t,wt()),null;var n=ep(t,e);if(t.tag!==0&&n===2){var r=Jy(t);r!==0&&(e=r,n=kv(t,r))}if(n===1)throw n=Mu,Mo(t,0),ls(t,e),$n(t,wt()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_o(t,On,wi),$n(t,wt()),null}function R_(t,e){var n=Pe;Pe|=1;try{return t(e)}finally{Pe=n,Pe===0&&(gl=wt()+500,Qp&&Gs())}}function Ko(t){gs!==null&&gs.tag===0&&!(Pe&6)&&nl();var e=Pe;Pe|=1;var n=pr.transition,r=Ve;try{if(pr.transition=null,Ve=1,t)return t()}finally{Ve=r,pr.transition=n,Pe=e,!(Pe&6)&&Gs()}}function N_(){Gn=za.current,Ze(za)}function Mo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,DL(n)),At!==null)for(n=At.return;n!==null;){var r=n;switch(d_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bf();break;case 3:pl(),Ze(Bn),Ze(xn),w_();break;case 5:x_(r);break;case 4:pl();break;case 13:Ze(ct);break;case 19:Ze(ct);break;case 10:g_(r.type._context);break;case 22:case 23:N_()}n=n.return}if(zt=t,At=t=Ps(t.current,null),Jt=Gn=e,Mt=0,Mu=null,A_=em=qo=0,On=eu=null,Co!==null){for(e=0;e<Co.length;e++)if(n=Co[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Co=null}return t}function lP(t,e){do{var n=At;try{if(m_(),of.current=Qf,Yf){for(var r=ht.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Yf=!1}if(Ho=0,Bt=jt=ht=null,Jc=!1,Nu=0,I_.current=null,n===null||n.return===null){Mt=1,Mu=e,At=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Jt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=$T(o);if(m!==null){m.flags&=-257,WT(m,o,a,s,e),m.mode&1&&zT(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var _=new Set;_.add(l),e.updateQueue=_}else y.add(l);break e}else{if(!(e&1)){zT(s,c,e),D_();break e}l=Error(K(426))}}else if(st&&a.mode&1){var x=$T(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),WT(x,o,a,s,e),f_(ml(l,a));break e}}s=l=ml(l,a),Mt!==4&&(Mt=2),eu===null?eu=[s]:eu.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=HA(s,l,e);OT(s,v);break e;case 1:a=l;var w=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Is===null||!Is.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=qA(s,a,e);OT(s,P);break e}}s=s.return}while(s!==null)}hP(n)}catch(I){e=I,At===n&&n!==null&&(At=n=n.return);continue}break}while(!0)}function cP(){var t=Xf.current;return Xf.current=Qf,t===null?Qf:t}function D_(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),zt===null||!(qo&268435455)&&!(em&268435455)||ls(zt,Jt)}function ep(t,e){var n=Pe;Pe|=2;var r=cP();(zt!==t||Jt!==e)&&(wi=null,Mo(t,e));do try{iV();break}catch(i){lP(t,i)}while(!0);if(m_(),Pe=n,Xf.current=r,At!==null)throw Error(K(261));return zt=null,Jt=0,Mt}function iV(){for(;At!==null;)uP(At)}function sV(){for(;At!==null&&!PO();)uP(At)}function uP(t){var e=fP(t.alternate,t,Gn);t.memoizedProps=t.pendingProps,e===null?hP(t):At=e,I_.current=null}function hP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=JL(n,e),n!==null){n.flags&=32767,At=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,At=null;return}}else if(n=XL(n,e,Gn),n!==null){At=n;return}if(e=e.sibling,e!==null){At=e;return}At=e=t}while(e!==null);Mt===0&&(Mt=5)}function _o(t,e,n){var r=Ve,i=pr.transition;try{pr.transition=null,Ve=1,oV(t,e,n,r)}finally{pr.transition=i,Ve=r}return null}function oV(t,e,n,r){do nl();while(gs!==null);if(Pe&6)throw Error(K(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(UO(t,s),t===zt&&(At=zt=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xd||(xd=!0,pP(Mf,function(){return nl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=pr.transition,pr.transition=null;var o=Ve;Ve=1;var a=Pe;Pe|=4,I_.current=null,eV(t,n),sP(n,t),kL(iv),Lf=!!rv,iv=rv=null,t.current=n,tV(n),RO(),Pe=a,Ve=o,pr.transition=s}else t.current=n;if(xd&&(xd=!1,gs=t,Zf=i),s=t.pendingLanes,s===0&&(Is=null),jO(n.stateNode),$n(t,wt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Jf)throw Jf=!1,t=Sv,Sv=null,t;return Zf&1&&t.tag!==0&&nl(),s=t.pendingLanes,s&1?t===Ev?tu++:(tu=0,Ev=t):tu=0,Gs(),null}function nl(){if(gs!==null){var t=HI(Zf),e=pr.transition,n=Ve;try{if(pr.transition=null,Ve=16>t?16:t,gs===null)var r=!1;else{if(t=gs,gs=null,Zf=0,Pe&6)throw Error(K(331));var i=Pe;for(Pe|=4,ie=t.current;ie!==null;){var s=ie,o=s.child;if(ie.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ie=c;ie!==null;){var u=ie;switch(u.tag){case 0:case 11:case 15:Zc(8,u,s)}var f=u.child;if(f!==null)f.return=u,ie=f;else for(;ie!==null;){u=ie;var p=u.sibling,m=u.return;if(nP(u),u===c){ie=null;break}if(p!==null){p.return=m,ie=p;break}ie=m}}}var y=s.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var x=_.sibling;_.sibling=null,_=x}while(_!==null)}}ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ie=o;else e:for(;ie!==null;){if(s=ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Zc(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,ie=v;break e}ie=s.return}}var w=t.current;for(ie=w;ie!==null;){o=ie;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ie=S;else e:for(o=w;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zp(9,a)}}catch(I){vt(a,a.return,I)}if(a===o){ie=null;break e}var P=a.sibling;if(P!==null){P.return=a.return,ie=P;break e}ie=a.return}}if(Pe=i,Gs(),Qr&&typeof Qr.onPostCommitFiberRoot=="function")try{Qr.onPostCommitFiberRoot(Hp,t)}catch{}r=!0}return r}finally{Ve=n,pr.transition=e}}return!1}function rS(t,e,n){e=ml(n,e),e=HA(t,e,1),t=Cs(t,e,1),e=Cn(),t!==null&&(uh(t,1,e),$n(t,e))}function vt(t,e,n){if(t.tag===3)rS(t,t,n);else for(;e!==null;){if(e.tag===3){rS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Is===null||!Is.has(r))){t=ml(n,t),t=qA(e,t,1),e=Cs(e,t,1),t=Cn(),e!==null&&(uh(e,1,t),$n(e,t));break}}e=e.return}}function aV(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Cn(),t.pingedLanes|=t.suspendedLanes&n,zt===t&&(Jt&n)===n&&(Mt===4||Mt===3&&(Jt&130023424)===Jt&&500>wt()-P_?Mo(t,0):A_|=n),$n(t,e)}function dP(t,e){e===0&&(t.mode&1?(e=ud,ud<<=1,!(ud&130023424)&&(ud=4194304)):e=1);var n=Cn();t=Fi(t,e),t!==null&&(uh(t,e,n),$n(t,n))}function lV(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dP(t,n)}function cV(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),dP(t,n)}var fP;fP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bn.current)Fn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fn=!1,QL(t,e,n);Fn=!!(t.flags&131072)}else Fn=!1,st&&e.flags&1048576&&yA(e,Wf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;lf(t,e),t=e.pendingProps;var i=hl(e,xn.current);tl(e,n),i=T_(null,e,r,t,i,n);var s=S_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zn(r)?(s=!0,zf(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,v_(e),i.updater=Jp,e.stateNode=i,i._reactInternals=e,fv(e,r,t,n),e=gv(null,e,r,!0,s,n)):(e.tag=0,st&&s&&h_(e),En(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(lf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=hV(r),t=br(r,t),i){case 0:e=mv(null,e,r,t,n);break e;case 1:e=KT(null,e,r,t,n);break e;case 11:e=HT(null,e,r,t,n);break e;case 14:e=qT(null,e,r,br(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:br(r,i),mv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:br(r,i),KT(t,e,r,i,n);case 3:e:{if(QA(e),t===null)throw Error(K(387));r=e.pendingProps,s=e.memoizedState,i=s.element,TA(t,e),Kf(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ml(Error(K(423)),e),e=GT(t,e,r,n,i);break e}else if(r!==i){i=ml(Error(K(424)),e),e=GT(t,e,r,n,i);break e}else for(Qn=ks(e.stateNode.containerInfo.firstChild),er=e,st=!0,Er=null,n=wA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(dl(),r===i){e=Ui(t,e,n);break e}En(t,e,r,n)}e=e.child}return e;case 5:return SA(e),t===null&&uv(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,sv(r,i)?o=null:s!==null&&sv(r,s)&&(e.flags|=32),YA(t,e),En(t,e,o,n),e.child;case 6:return t===null&&uv(e),null;case 13:return XA(t,e,n);case 4:return __(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fl(e,null,r,n):En(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:br(r,i),HT(t,e,r,i,n);case 7:return En(t,e,e.pendingProps,n),e.child;case 8:return En(t,e,e.pendingProps.children,n),e.child;case 12:return En(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ye(Hf,r._currentValue),r._currentValue=o,s!==null)if(Nr(s.value,o)){if(s.children===i.children&&!Bn.current){e=Ui(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ri(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),hv(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),hv(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}En(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,tl(e,n),i=mr(i),r=r(i),e.flags|=1,En(t,e,r,n),e.child;case 14:return r=e.type,i=br(r,e.pendingProps),i=br(r.type,i),qT(t,e,r,i,n);case 15:return KA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:br(r,i),lf(t,e),e.tag=1,zn(r)?(t=!0,zf(e)):t=!1,tl(e,n),WA(e,r,i),fv(e,r,i,n),gv(null,e,r,!0,t,n);case 19:return JA(t,e,n);case 22:return GA(t,e,n)}throw Error(K(156,e.tag))};function pP(t,e){return BI(t,e)}function uV(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(t,e,n,r){return new uV(t,e,n,r)}function j_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function hV(t){if(typeof t=="function")return j_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Z0)return 11;if(t===e_)return 14}return 2}function Ps(t,e){var n=t.alternate;return n===null?(n=hr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")j_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Na:return Oo(n.children,i,s,e);case J0:o=8,i|=8;break;case Ly:return t=hr(12,n,e,i|2),t.elementType=Ly,t.lanes=s,t;case Vy:return t=hr(13,n,e,i),t.elementType=Vy,t.lanes=s,t;case Fy:return t=hr(19,n,e,i),t.elementType=Fy,t.lanes=s,t;case SI:return tm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bI:o=10;break e;case TI:o=9;break e;case Z0:o=11;break e;case e_:o=14;break e;case is:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=hr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Oo(t,e,n,r){return t=hr(7,t,r,e),t.lanes=n,t}function tm(t,e,n,r){return t=hr(22,t,r,e),t.elementType=SI,t.lanes=n,t.stateNode={isHidden:!1},t}function Og(t,e,n){return t=hr(6,t,null,e),t.lanes=n,t}function Lg(t,e,n){return e=hr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function dV(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yg(0),this.expirationTimes=yg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function M_(t,e,n,r,i,s,o,a,l){return t=new dV(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=hr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},v_(s),t}function fV(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ra,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mP(t){if(!t)return Vs;t=t._reactInternals;e:{if(na(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(zn(n))return mA(t,n,e)}return e}function gP(t,e,n,r,i,s,o,a,l){return t=M_(n,r,!0,t,i,s,o,a,l),t.context=mP(null),n=t.current,r=Cn(),i=As(n),s=Ri(r,i),s.callback=e??null,Cs(n,s,i),t.current.lanes=i,uh(t,i,r),$n(t,r),t}function nm(t,e,n,r){var i=e.current,s=Cn(),o=As(i);return n=mP(n),e.context===null?e.context=n:e.pendingContext=n,e=Ri(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cs(i,e,o),t!==null&&(Pr(t,i,o,s),sf(t,i,o)),o}function tp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function iS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function O_(t,e){iS(t,e),(t=t.alternate)&&iS(t,e)}function pV(){return null}var yP=typeof reportError=="function"?reportError:function(t){console.error(t)};function L_(t){this._internalRoot=t}rm.prototype.render=L_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));nm(t,e,null,null)};rm.prototype.unmount=L_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ko(function(){nm(null,t,null,null)}),e[Vi]=null}};function rm(t){this._internalRoot=t}rm.prototype.unstable_scheduleHydration=function(t){if(t){var e=GI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<as.length&&e!==0&&e<as[n].priority;n++);as.splice(n,0,t),n===0&&QI(t)}};function V_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function im(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function sS(){}function mV(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=tp(o);s.call(c)}}var o=gP(e,r,t,0,null,!1,!1,"",sS);return t._reactRootContainer=o,t[Vi]=o.current,Cu(t.nodeType===8?t.parentNode:t),Ko(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=tp(l);a.call(c)}}var l=M_(t,0,!1,null,null,!1,!1,"",sS);return t._reactRootContainer=l,t[Vi]=l.current,Cu(t.nodeType===8?t.parentNode:t),Ko(function(){nm(e,l,n,r)}),l}function sm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=tp(o);a.call(l)}}nm(e,o,t,i)}else o=mV(n,e,t,i,r);return tp(o)}qI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pc(e.pendingLanes);n!==0&&(r_(e,n|1),$n(e,wt()),!(Pe&6)&&(gl=wt()+500,Gs()))}break;case 13:Ko(function(){var r=Fi(t,1);if(r!==null){var i=Cn();Pr(r,t,1,i)}}),O_(t,1)}};i_=function(t){if(t.tag===13){var e=Fi(t,134217728);if(e!==null){var n=Cn();Pr(e,t,134217728,n)}O_(t,134217728)}};KI=function(t){if(t.tag===13){var e=As(t),n=Fi(t,e);if(n!==null){var r=Cn();Pr(n,t,e,r)}O_(t,e)}};GI=function(){return Ve};YI=function(t,e){var n=Ve;try{return Ve=t,e()}finally{Ve=n}};Yy=function(t,e,n){switch(e){case"input":if(zy(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Yp(r);if(!i)throw Error(K(90));kI(r),zy(r,i)}}}break;case"textarea":II(t,n);break;case"select":e=n.value,e!=null&&Xa(t,!!n.multiple,e,!1)}};MI=R_;OI=Ko;var gV={usingClientEntryPoint:!1,Events:[dh,Oa,Yp,DI,jI,R_]},yc={findFiberByHostInstance:ko,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yV={bundleType:yc.bundleType,version:yc.version,rendererPackageName:yc.rendererPackageName,rendererConfig:yc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FI(t),t===null?null:t.stateNode},findFiberByHostInstance:yc.findFiberByHostInstance||pV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wd.isDisabled&&wd.supportsFiber)try{Hp=wd.inject(yV),Qr=wd}catch{}}ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gV;ir.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!V_(e))throw Error(K(200));return fV(t,e,null,n)};ir.createRoot=function(t,e){if(!V_(t))throw Error(K(299));var n=!1,r="",i=yP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=M_(t,1,!1,null,null,n,!1,r,i),t[Vi]=e.current,Cu(t.nodeType===8?t.parentNode:t),new L_(e)};ir.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=FI(e),t=t===null?null:t.stateNode,t};ir.flushSync=function(t){return Ko(t)};ir.hydrate=function(t,e,n){if(!im(e))throw Error(K(200));return sm(null,t,e,!0,n)};ir.hydrateRoot=function(t,e,n){if(!V_(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=yP;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=gP(e,null,t,1,n??null,i,!1,s,o),t[Vi]=e.current,Cu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new rm(e)};ir.render=function(t,e,n){if(!im(e))throw Error(K(200));return sm(null,t,e,!1,n)};ir.unmountComponentAtNode=function(t){if(!im(t))throw Error(K(40));return t._reactRootContainer?(Ko(function(){sm(null,null,t,!1,function(){t._reactRootContainer=null,t[Vi]=null})}),!0):!1};ir.unstable_batchedUpdates=R_;ir.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!im(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return sm(t,e,n,!1,r)};ir.version="18.3.1-next-f1338f8080-20240426";function vP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vP)}catch(t){console.error(t)}}vP(),vI.exports=ir;var vV=vI.exports,oS=vV;My.createRoot=oS.createRoot,My.hydrateRoot=oS.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ou.apply(this,arguments)}var ys;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ys||(ys={}));const aS="popstate";function _V(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=ra(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Iv("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:np(s))}function r(i,s){F_(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return wV(e,n,r,t)}function Et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function F_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xV(){return Math.random().toString(36).substr(2,8)}function lS(t,e){return{usr:t.state,key:t.key,idx:e}}function Iv(t,e,n,r){return n===void 0&&(n=null),Ou({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ra(e):e,{state:n,key:e&&e.key||r||xV()})}function np(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ra(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function wV(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=ys.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Ou({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=ys.Pop;let x=u(),v=x==null?null:x-c;c=x,l&&l({action:a,location:_.location,delta:v})}function p(x,v){a=ys.Push;let w=Iv(_.location,x,v);n&&n(w,x),c=u()+1;let S=lS(w,c),P=_.createHref(w);try{o.pushState(S,"",P)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(P)}s&&l&&l({action:a,location:_.location,delta:1})}function m(x,v){a=ys.Replace;let w=Iv(_.location,x,v);n&&n(w,x),c=u();let S=lS(w,c),P=_.createHref(w);o.replaceState(S,"",P),s&&l&&l({action:a,location:_.location,delta:0})}function y(x){let v=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof x=="string"?x:np(x);return w=w.replace(/ $/,"%20"),Et(v,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,v)}let _={get action(){return a},get location(){return t(i,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(aS,f),l=x,()=>{i.removeEventListener(aS,f),l=null}},createHref(x){return e(i,x)},createURL:y,encodeLocation(x){let v=y(x);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:p,replace:m,go(x){return o.go(x)}};return _}var cS;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(cS||(cS={}));function bV(t,e,n){return n===void 0&&(n="/"),TV(t,e,n)}function TV(t,e,n,r){let i=typeof e=="string"?ra(e):e,s=U_(i.pathname||"/",n);if(s==null)return null;let o=_P(t);SV(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=OV(s);a=DV(o[l],c)}return a}function _P(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Et(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Rs([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Et(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),_P(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:RV(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of xP(s.path))i(s,o,l)}),e}function xP(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=xP(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function SV(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:NV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const EV=/^:[\w-]+$/,kV=3,CV=2,IV=1,AV=10,PV=-2,uS=t=>t==="*";function RV(t,e){let n=t.split("/"),r=n.length;return n.some(uS)&&(r+=PV),e&&(r+=CV),n.filter(i=>!uS(i)).reduce((i,s)=>i+(EV.test(s)?kV:s===""?IV:AV),r)}function NV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function DV(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=s==="/"?e:e.slice(s.length)||"/",f=jV({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),p=l.route;if(!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Rs([s,f.pathname]),pathnameBase:UV(Rs([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=Rs([s,f.pathnameBase]))}return o}function jV(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=MV(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,f)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let _=a[f]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const y=a[f];return m&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function MV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),F_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function OV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return F_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function U_(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function LV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ra(t):t;return{pathname:n?n.startsWith("/")?n:VV(n,e):e,search:BV(r),hash:zV(i)}}function VV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Vg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FV(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function B_(t,e){let n=FV(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function z_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ra(t):(i=Ou({},t),Et(!i.pathname||!i.pathname.includes("?"),Vg("?","pathname","search",i)),Et(!i.pathname||!i.pathname.includes("#"),Vg("#","pathname","hash",i)),Et(!i.search||!i.search.includes("#"),Vg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=LV(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Rs=t=>t.join("/").replace(/\/\/+/g,"/"),UV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),BV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,zV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $V(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const wP=["post","put","patch","delete"];new Set(wP);const WV=["get",...wP];new Set(WV);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lu(){return Lu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lu.apply(this,arguments)}const $_=j.createContext(null),HV=j.createContext(null),Ys=j.createContext(null),om=j.createContext(null),li=j.createContext({outlet:null,matches:[],isDataRoute:!1}),bP=j.createContext(null);function qV(t,e){let{relative:n}=e===void 0?{}:e;Ll()||Et(!1);let{basename:r,navigator:i}=j.useContext(Ys),{hash:s,pathname:o,search:a}=EP(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Rs([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ll(){return j.useContext(om)!=null}function Ki(){return Ll()||Et(!1),j.useContext(om).location}function TP(t){j.useContext(Ys).static||j.useLayoutEffect(t)}function Wt(){let{isDataRoute:t}=j.useContext(li);return t?aF():KV()}function KV(){Ll()||Et(!1);let t=j.useContext($_),{basename:e,future:n,navigator:r}=j.useContext(Ys),{matches:i}=j.useContext(li),{pathname:s}=Ki(),o=JSON.stringify(B_(i,n.v7_relativeSplatPath)),a=j.useRef(!1);return TP(()=>{a.current=!0}),j.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=z_(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Rs([e,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[e,r,o,s,t])}const GV=j.createContext(null);function YV(t){let e=j.useContext(li).outlet;return e&&j.createElement(GV.Provider,{value:t},e)}function SP(){let{matches:t}=j.useContext(li),e=t[t.length-1];return e?e.params:{}}function EP(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(Ys),{matches:i}=j.useContext(li),{pathname:s}=Ki(),o=JSON.stringify(B_(i,r.v7_relativeSplatPath));return j.useMemo(()=>z_(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function QV(t,e){return XV(t,e)}function XV(t,e,n,r){Ll()||Et(!1);let{navigator:i}=j.useContext(Ys),{matches:s}=j.useContext(li),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ki(),u;if(e){var f;let x=typeof e=="string"?ra(e):e;l==="/"||(f=x.pathname)!=null&&f.startsWith(l)||Et(!1),u=x}else u=c;let p=u.pathname||"/",m=p;if(l!=="/"){let x=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=bV(t,{pathname:m}),_=nF(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Rs([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Rs([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&_?j.createElement(om.Provider,{value:{location:Lu({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ys.Pop}},_):_}function JV(){let t=oF(),e=$V(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:i},n):null,null)}const ZV=j.createElement(JV,null);class eF extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(li.Provider,{value:this.props.routeContext},j.createElement(bP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function tF(t){let{routeContext:e,match:n,children:r}=t,i=j.useContext($_);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(li.Provider,{value:e},r)}function nF(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);u>=0||Et(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:m}=n,y=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,p)=>{let m,y=!1,_=null,x=null;n&&(m=a&&f.route.id?a[f.route.id]:void 0,_=f.route.errorElement||ZV,l&&(c<0&&p===0?(lF("route-fallback"),y=!0,x=null):c===p&&(y=!0,x=f.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,p+1)),w=()=>{let S;return m?S=_:y?S=x:f.route.Component?S=j.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=u,j.createElement(tF,{match:f,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:S})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?j.createElement(eF,{location:n.location,revalidation:n.revalidation,component:_,error:m,children:w(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):w()},null)}var kP=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kP||{}),CP=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(CP||{});function rF(t){let e=j.useContext($_);return e||Et(!1),e}function iF(t){let e=j.useContext(HV);return e||Et(!1),e}function sF(t){let e=j.useContext(li);return e||Et(!1),e}function IP(t){let e=sF(),n=e.matches[e.matches.length-1];return n.route.id||Et(!1),n.route.id}function oF(){var t;let e=j.useContext(bP),n=iF(),r=IP();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function aF(){let{router:t}=rF(kP.UseNavigateStable),e=IP(CP.UseNavigateStable),n=j.useRef(!1);return TP(()=>{n.current=!0}),j.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Lu({fromRouteId:e},s)))},[t,e])}const hS={};function lF(t,e,n){hS[t]||(hS[t]=!0)}function cF(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Nc(t){let{to:e,replace:n,state:r,relative:i}=t;Ll()||Et(!1);let{future:s,static:o}=j.useContext(Ys),{matches:a}=j.useContext(li),{pathname:l}=Ki(),c=Wt(),u=z_(e,B_(a,s.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(u);return j.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function AP(t){return YV(t.context)}function Oe(t){Et(!1)}function uF(t){let{basename:e="/",children:n=null,location:r,navigationType:i=ys.Pop,navigator:s,static:o=!1,future:a}=t;Ll()&&Et(!1);let l=e.replace(/^\/*/,"/"),c=j.useMemo(()=>({basename:l,navigator:s,static:o,future:Lu({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=ra(r));let{pathname:u="/",search:f="",hash:p="",state:m=null,key:y="default"}=r,_=j.useMemo(()=>{let x=U_(u,l);return x==null?null:{location:{pathname:x,search:f,hash:p,state:m,key:y},navigationType:i}},[l,u,f,p,m,y,i]);return _==null?null:j.createElement(Ys.Provider,{value:c},j.createElement(om.Provider,{children:n,value:_}))}function hF(t){let{children:e,location:n}=t;return QV(Av(e),n)}new Promise(()=>{});function Av(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,i)=>{if(!j.isValidElement(r))return;let s=[...e,i];if(r.type===j.Fragment){n.push.apply(n,Av(r.props.children,s));return}r.type!==Oe&&Et(!1),!r.props.index||!r.props.children||Et(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Av(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pv(){return Pv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pv.apply(this,arguments)}function dF(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function fF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pF(t,e){return t.button===0&&(!e||e==="_self")&&!fF(t)}const mF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gF="6";try{window.__reactRouterVersion=gF}catch{}const yF="startTransition",dS=aO[yF];function vF(t){let{basename:e,children:n,future:r,window:i}=t,s=j.useRef();s.current==null&&(s.current=_V({window:i,v5Compat:!0}));let o=s.current,[a,l]=j.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=j.useCallback(f=>{c&&dS?dS(()=>l(f)):l(f)},[l,c]);return j.useLayoutEffect(()=>o.listen(u),[o,u]),j.useEffect(()=>cF(r),[r]),j.createElement(uF,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const _F=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ao=j.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:f}=e,p=dF(e,mF),{basename:m}=j.useContext(Ys),y,_=!1;if(typeof c=="string"&&xF.test(c)&&(y=c,_F))try{let S=new URL(window.location.href),P=c.startsWith("//")?new URL(S.protocol+c):new URL(c),I=U_(P.pathname,m);P.origin===S.origin&&I!=null?c=I+P.search+P.hash:_=!0}catch{}let x=qV(c,{relative:i}),v=wF(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,viewTransition:f});function w(S){r&&r(S),S.defaultPrevented||v(S)}return j.createElement("a",Pv({},p,{href:y||x,onClick:_||s?r:w,ref:n,target:l}))});var fS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(fS||(fS={}));var pS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(pS||(pS={}));function wF(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Wt(),c=Ki(),u=EP(t,{relative:o});return j.useCallback(f=>{if(pF(f,n)){f.preventDefault();let p=r!==void 0?r:np(c)===np(u);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}var mS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},RP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[u],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new TF;const p=s<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const y=c<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class TF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SF=function(t){const e=PP(t);return RP.encodeByteArray(e,!0)},rp=function(t){return SF(t).replace(/\./g,"")},NP=function(t){try{return RP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=()=>EF().__FIREBASE_DEFAULTS__,CF=()=>{if(typeof process>"u"||typeof mS>"u")return;const t=mS.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},IF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&NP(t[1]);return e&&JSON.parse(e)},am=()=>{try{return kF()||CF()||IF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},DP=t=>{var e,n;return(n=(e=am())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},jP=t=>{const e=DP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},MP=()=>{var t;return(t=am())===null||t===void 0?void 0:t.config},OP=t=>{var e;return(e=am())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rp(JSON.stringify(n)),rp(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function RF(){var t;const e=(t=am())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function NF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function DF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MF(){const t=wn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function OF(){return!RF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LF(){try{return typeof indexedDB=="object"}catch{return!1}}function VF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FF="FirebaseError";class ci extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=FF,Object.setPrototypeOf(this,ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ph.prototype.create)}}class ph{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?UF(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ci(i,a,r)}}function UF(t,e){return t.replace(BF,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const BF=/\{\$([^}]+)}/g;function zF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ip(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(gS(s)&&gS(o)){if(!ip(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function gS(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mh(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Dc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function jc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $F(t,e){const n=new WF(t,e);return n.subscribe.bind(n)}class WF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HF(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Fg),i.error===void 0&&(i.error=Fg),i.complete===void 0&&(i.complete=Fg);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Fg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t){return t&&t._delegate?t._delegate:t}class Fs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new AF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GF(e))try{this.getOrInitializeService({instanceIdentifier:xo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xo){return this.instances.has(e)}getOptions(e=xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xo){return this.component?this.component.multipleInstances?e:xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KF(t){return t===xo?void 0:t}function GF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const QF={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},XF=ke.INFO,JF={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},ZF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=JF[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class W_{constructor(e){this.name=e,this._logLevel=XF,this._logHandler=ZF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const e4=(t,e)=>e.some(n=>t instanceof n);let yS,vS;function t4(){return yS||(yS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function n4(){return vS||(vS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VP=new WeakMap,Rv=new WeakMap,FP=new WeakMap,Ug=new WeakMap,H_=new WeakMap;function r4(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ns(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&VP.set(n,t)}).catch(()=>{}),H_.set(e,t),e}function i4(t){if(Rv.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Rv.set(t,e)}let Nv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||FP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ns(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function s4(t){Nv=t(Nv)}function o4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bg(this),e,...n);return FP.set(r,e.sort?e.sort():[e]),Ns(r)}:n4().includes(t)?function(...e){return t.apply(Bg(this),e),Ns(VP.get(this))}:function(...e){return Ns(t.apply(Bg(this),e))}}function a4(t){return typeof t=="function"?o4(t):(t instanceof IDBTransaction&&i4(t),e4(t,t4())?new Proxy(t,Nv):t)}function Ns(t){if(t instanceof IDBRequest)return r4(t);if(Ug.has(t))return Ug.get(t);const e=a4(t);return e!==t&&(Ug.set(t,e),H_.set(e,t)),e}const Bg=t=>H_.get(t);function l4(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ns(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ns(o.result),l.oldVersion,l.newVersion,Ns(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const c4=["get","getKey","getAll","getAllKeys","count"],u4=["put","add","delete","clear"],zg=new Map;function _S(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zg.get(e))return zg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=u4.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||c4.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return zg.set(e,s),s}s4(t=>({...t,get:(e,n,r)=>_S(e,n)||t.get(e,n,r),has:(e,n)=>!!_S(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(d4(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function d4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dv="@firebase/app",xS="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new W_("@firebase/app"),f4="@firebase/app-compat",p4="@firebase/analytics-compat",m4="@firebase/analytics",g4="@firebase/app-check-compat",y4="@firebase/app-check",v4="@firebase/auth",_4="@firebase/auth-compat",x4="@firebase/database",w4="@firebase/data-connect",b4="@firebase/database-compat",T4="@firebase/functions",S4="@firebase/functions-compat",E4="@firebase/installations",k4="@firebase/installations-compat",C4="@firebase/messaging",I4="@firebase/messaging-compat",A4="@firebase/performance",P4="@firebase/performance-compat",R4="@firebase/remote-config",N4="@firebase/remote-config-compat",D4="@firebase/storage",j4="@firebase/storage-compat",M4="@firebase/firestore",O4="@firebase/vertexai-preview",L4="@firebase/firestore-compat",V4="firebase",F4="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="[DEFAULT]",U4={[Dv]:"fire-core",[f4]:"fire-core-compat",[m4]:"fire-analytics",[p4]:"fire-analytics-compat",[y4]:"fire-app-check",[g4]:"fire-app-check-compat",[v4]:"fire-auth",[_4]:"fire-auth-compat",[x4]:"fire-rtdb",[w4]:"fire-data-connect",[b4]:"fire-rtdb-compat",[T4]:"fire-fn",[S4]:"fire-fn-compat",[E4]:"fire-iid",[k4]:"fire-iid-compat",[C4]:"fire-fcm",[I4]:"fire-fcm-compat",[A4]:"fire-perf",[P4]:"fire-perf-compat",[R4]:"fire-rc",[N4]:"fire-rc-compat",[D4]:"fire-gcs",[j4]:"fire-gcs-compat",[M4]:"fire-fst",[L4]:"fire-fst-compat",[O4]:"fire-vertex","fire-js":"fire-js",[V4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=new Map,B4=new Map,Mv=new Map;function wS(t,e){try{t.container.addComponent(e)}catch(n){Bi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Go(t){const e=t.name;if(Mv.has(e))return Bi.debug(`There were multiple attempts to register component ${e}.`),!1;Mv.set(e,t);for(const n of sp.values())wS(n,t);for(const n of B4.values())wS(n,t);return!0}function lm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ci(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ds=new ph("app","Firebase",z4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia=F4;function q_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jv,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ds.create("bad-app-name",{appName:String(i)});if(n||(n=MP()),!n)throw Ds.create("no-options");const s=sp.get(i);if(s){if(ip(n,s.options)&&ip(r,s.config))return s;throw Ds.create("duplicate-app",{appName:i})}const o=new YF(i);for(const l of Mv.values())o.addComponent(l);const a=new $4(n,r,o);return sp.set(i,a),a}function K_(t=jv){const e=sp.get(t);if(!e&&t===jv&&MP())return q_();if(!e)throw Ds.create("no-app",{appName:t});return e}function Jr(t,e,n){var r;let i=(r=U4[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bi.warn(a.join(" "));return}Go(new Fs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="firebase-heartbeat-database",H4=1,Vu="firebase-heartbeat-store";let $g=null;function UP(){return $g||($g=l4(W4,H4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Vu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ds.create("idb-open",{originalErrorMessage:t.message})})),$g}async function q4(t){try{const n=(await UP()).transaction(Vu),r=await n.objectStore(Vu).get(BP(t));return await n.done,r}catch(e){if(e instanceof ci)Bi.warn(e.message);else{const n=Ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bi.warn(n.message)}}}async function bS(t,e){try{const r=(await UP()).transaction(Vu,"readwrite");await r.objectStore(Vu).put(e,BP(t)),await r.done}catch(n){if(n instanceof ci)Bi.warn(n.message);else{const r=Ds.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bi.warn(r.message)}}}function BP(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=1024,G4=30*24*60*60*1e3;class Y4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new X4(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=TS();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=G4}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Bi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=TS(),{heartbeatsToSend:r,unsentEntries:i}=Q4(this._heartbeatsCache.heartbeats),s=rp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Bi.warn(n),""}}}function TS(){return new Date().toISOString().substring(0,10)}function Q4(t,e=K4){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),SS(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),SS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class X4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LF()?VF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await q4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return bS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return bS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function SS(t){return rp(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J4(t){Go(new Fs("platform-logger",e=>new h4(e),"PRIVATE")),Go(new Fs("heartbeat",e=>new Y4(e),"PRIVATE")),Jr(Dv,xS,t),Jr(Dv,xS,"esm2017"),Jr("fire-js","")}J4("");function G_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function zP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z4=zP,$P=new ph("auth","Firebase",zP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=new W_("@firebase/auth");function eU(t,...e){op.logLevel<=ke.WARN&&op.warn(`Auth (${ia}): ${t}`,...e)}function df(t,...e){op.logLevel<=ke.ERROR&&op.error(`Auth (${ia}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(t,...e){throw Y_(t,...e)}function Zr(t,...e){return Y_(t,...e)}function WP(t,e,n){const r=Object.assign(Object.assign({},Z4()),{[e]:n});return new ph("auth","Firebase",r).create(e,{appName:t.name})}function js(t){return WP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Y_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return $P.create(t,...e)}function he(t,e,...n){if(!t)throw Y_(e,...n)}function Ii(t){const e="INTERNAL ASSERTION FAILED: "+t;throw df(e),new Error(e)}function zi(t,e){t||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function tU(){return ES()==="http:"||ES()==="https:"}function ES(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tU()||DF()||"connection"in navigator)?navigator.onLine:!0}function rU(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){this.shortDelay=e,this.longDelay=n,zi(n>e,"Short delay should be less than long delay!"),this.isMobile=PF()||jF()}get(){return nU()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t,e){zi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU=new gh(3e4,6e4);function Qs(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ui(t,e,n,r,i={}){return qP(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=mh(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return NF()||(c.referrerPolicy="no-referrer"),HP.fetch()(KP(t,t.config.apiHost,n,a),c)})}async function qP(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},iU),e);try{const i=new aU(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw bd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw bd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw bd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw bd(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw WP(t,u,c);Dr(t,u)}}catch(i){if(i instanceof ci)throw i;Dr(t,"network-request-failed",{message:String(i)})}}async function cm(t,e,n,r,i={}){const s=await ui(t,e,n,r,i);return"mfaPendingCredential"in s&&Dr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function KP(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Q_(t.config,i):`${t.config.apiScheme}://${i}`}function oU(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aU{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zr(this.auth,"network-request-failed")),sU.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Zr(t,e,r);return i.customData._tokenResponse=n,i}function kS(t){return t!==void 0&&t.enterprise!==void 0}class lU{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return oU(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function cU(t,e){return ui(t,"GET","/v2/recaptchaConfig",Qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uU(t,e){return ui(t,"POST","/v1/accounts:delete",e)}async function GP(t,e){return ui(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hU(t,e=!1){const n=We(t),r=await n.getIdToken(e),i=X_(r);he(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:nu(Wg(i.auth_time)),issuedAtTime:nu(Wg(i.iat)),expirationTime:nu(Wg(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Wg(t){return Number(t)*1e3}function X_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return df("JWT malformed, contained fewer than 3 sections"),null;try{const i=NP(n);return i?JSON.parse(i):(df("Failed to decode base64 JWT payload"),null)}catch(i){return df("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function CS(t){const e=X_(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ci&&dU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function dU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nu(this.lastLoginAt),this.creationTime=nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ap(t){var e;const n=t.auth,r=await t.getIdToken(),i=await yl(t,GP(n,{idToken:r}));he(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?YP(s.providerUserInfo):[],a=mU(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Lv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function pU(t){const e=We(t);await ap(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mU(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function YP(t){return t.map(e=>{var{providerId:n}=e,r=G_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gU(t,e){const n=await qP(t,{},async()=>{const r=mh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=KP(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",HP.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yU(t,e){return ui(t,"POST","/v2/accounts:revokeToken",Qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):CS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=CS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await gU(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new rl;return r&&(he(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(he(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(he(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rl,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ai{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=G_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new fU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Lv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await yl(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hU(this,e)}reload(){return pU(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ap(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ci(this.auth.app))return Promise.reject(js(this.auth));const e=await this.getIdToken();return await yl(this,uU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,x=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:S,emailVerified:P,isAnonymous:I,providerData:M,stsTokenManager:k}=n;he(S&&k,e,"internal-error");const T=rl.fromJSON(this.name,k);he(typeof S=="string",e,"internal-error"),es(f,e.name),es(p,e.name),he(typeof P=="boolean",e,"internal-error"),he(typeof I=="boolean",e,"internal-error"),es(m,e.name),es(y,e.name),es(_,e.name),es(x,e.name),es(v,e.name),es(w,e.name);const E=new Ai({uid:S,auth:e,email:p,emailVerified:P,displayName:f,isAnonymous:I,photoURL:y,phoneNumber:m,tenantId:_,stsTokenManager:T,createdAt:v,lastLoginAt:w});return M&&Array.isArray(M)&&(E.providerData=M.map(C=>Object.assign({},C))),x&&(E._redirectEventId=x),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new rl;i.updateFromServerResponse(n);const s=new Ai({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ap(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];he(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?YP(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new rl;a.updateFromIdToken(r);const l=new Ai({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Lv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=new Map;function Pi(t){zi(t instanceof Function,"Expected a class definition");let e=IS.get(t);return e?(zi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,IS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}QP.type="NONE";const AS=QP;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(t,e,n){return`firebase:${t}:${e}:${n}`}class il{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ff(this.userKey,i.apiKey,s),this.fullPersistenceKey=ff("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ai._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new il(Pi(AS),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Pi(AS);const o=ff(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const f=Ai._fromJSON(e,u);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new il(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new il(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(eR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(nR(e))return"Blackberry";if(rR(e))return"Webos";if(JP(e))return"Safari";if((e.includes("chrome/")||ZP(e))&&!e.includes("edge/"))return"Chrome";if(tR(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function XP(t=wn()){return/firefox\//i.test(t)}function JP(t=wn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZP(t=wn()){return/crios\//i.test(t)}function eR(t=wn()){return/iemobile/i.test(t)}function tR(t=wn()){return/android/i.test(t)}function nR(t=wn()){return/blackberry/i.test(t)}function rR(t=wn()){return/webos/i.test(t)}function J_(t=wn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vU(t=wn()){var e;return J_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _U(){return MF()&&document.documentMode===10}function iR(t=wn()){return J_(t)||tR(t)||rR(t)||nR(t)||/windows phone/i.test(t)||eR(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t,e=[]){let n;switch(t){case"Browser":n=PS(wn());break;case"Worker":n=`${PS(wn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ia}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wU(t,e={}){return ui(t,"GET","/v2/passwordPolicy",Qs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bU=6;class TU{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:bU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new RS(this),this.idTokenSubscription=new RS(this),this.beforeStateQueue=new xU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$P,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Pi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await il.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await GP(this,{idToken:e}),r=await Ai._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ci(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ap(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rU()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ci(this.app))return Promise.reject(js(this));const n=e?We(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ci(this.app)?Promise.reject(js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ci(this.app)?Promise.reject(js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wU(this),n=new TU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ph("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Pi(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await il.create(this,[Pi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&eU(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function sa(t){return We(t)}class RS{constructor(e){this.auth=e,this.observer=null,this.addObserver=$F(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let um={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EU(t){um=t}function oR(t){return um.loadJS(t)}function kU(){return um.recaptchaEnterpriseScript}function CU(){return um.gapiScript}function IU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const AU="recaptcha-enterprise",PU="NO_RECAPTCHA";class RU{constructor(e){this.type=AU,this.auth=sa(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{cU(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new lU(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;kS(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(PU)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&kS(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=kU();l.length!==0&&(l+=a),oR(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function NS(t,e,n,r=!1){const i=new RU(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Vv(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await NS(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await NS(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NU(t,e){const n=lm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(ip(s,e??{}))return i;Dr(i,"already-initialized")}return n.initialize({options:e})}function DU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Pi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function jU(t,e,n){const r=sa(t);he(r._canInitEmulator,r,"emulator-config-failed"),he(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=aR(e),{host:o,port:a}=MU(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),OU()}function aR(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function MU(t){const e=aR(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:DS(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:DS(o)}}}function DS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function OU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,n){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}async function LU(t,e){return ui(t,"POST","/v1/accounts:update",e)}async function VU(t,e){return ui(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(t,e){return cm(t,"POST","/v1/accounts:signInWithPassword",Qs(t,e))}async function UU(t,e){return ui(t,"POST","/v1/accounts:sendOobCode",Qs(t,e))}async function BU(t,e){return UU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zU(t,e){return cm(t,"POST","/v1/accounts:signInWithEmailLink",Qs(t,e))}async function $U(t,e){return cm(t,"POST","/v1/accounts:signInWithEmailLink",Qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends Z_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Fu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Fu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vv(e,n,"signInWithPassword",FU);case"emailLink":return zU(e,{email:this._email,oobCode:this._password});default:Dr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vv(e,r,"signUpPassword",VU);case"emailLink":return $U(e,{idToken:n,email:this._email,oobCode:this._password});default:Dr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(t,e){return cm(t,"POST","/v1/accounts:signInWithIdp",Qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU="http://localhost";class Yo extends Z_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Dr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=G_(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Yo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return sl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,sl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,sl(e,n)}buildRequest(){const e={requestUri:WU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mh(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qU(t){const e=Dc(jc(t)).link,n=e?Dc(jc(e)).deep_link_id:null,r=Dc(jc(t)).deep_link_id;return(r?Dc(jc(r)).link:null)||r||n||e||t}class ex{constructor(e){var n,r,i,s,o,a;const l=Dc(jc(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,f=HU((i=l.mode)!==null&&i!==void 0?i:null);he(c&&u&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=qU(e);try{return new ex(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(){this.providerId=Vl.PROVIDER_ID}static credential(e,n){return Fu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ex.parseLink(n);return he(r,"argument-error"),Fu._fromEmailAndCode(e,r.code,r.tenantId)}}Vl.PROVIDER_ID="password";Vl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Vl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh extends lR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends yh{constructor(){super("facebook.com")}static credential(e){return Yo._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us extends yh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yo._fromParams({providerId:us.PROVIDER_ID,signInMethod:us.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return us.credentialFromTaggedObject(e)}static credentialFromError(e){return us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return us.credential(n,r)}catch{return null}}}us.GOOGLE_SIGN_IN_METHOD="google.com";us.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends yh{constructor(){super("github.com")}static credential(e){return Yo._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.GITHUB_SIGN_IN_METHOD="github.com";hs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends yh{constructor(){super("twitter.com")}static credential(e,n){return Yo._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ds.credential(n,r)}catch{return null}}}ds.TWITTER_SIGN_IN_METHOD="twitter.com";ds.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ai._fromIdTokenResponse(e,r,i),o=jS(r);return new vl({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=jS(r);return new vl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function jS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp extends ci{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,lp.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new lp(e,n,r,i)}}function cR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?lp._fromErrorAndOperation(t,s,e,r):s})}async function KU(t,e,n=!1){const r=await yl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return vl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GU(t,e,n=!1){const{auth:r}=t;if(Ci(r.app))return Promise.reject(js(r));const i="reauthenticate";try{const s=await yl(t,cR(r,i,e,t),n);he(s.idToken,r,"internal-error");const o=X_(s.idToken);he(o,r,"internal-error");const{sub:a}=o;return he(t.uid===a,r,"user-mismatch"),vl._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Dr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(t,e,n=!1){if(Ci(t.app))return Promise.reject(js(t));const r="signIn",i=await cR(t,r,e),s=await vl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function YU(t,e){return uR(sa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QU(t){const e=sa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XU(t,e,n){const r=sa(t);await Vv(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",BU)}function hR(t,e,n){return Ci(t.app)?Promise.reject(js(t)):YU(We(t),Vl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&QU(t),r})}function JU(t,e){return ZU(We(t),null,e)}async function ZU(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await yl(t,LU(r,s));await t._updateTokensIfNecessary(o,!0)}function e5(t,e,n,r){return We(t).onIdTokenChanged(e,n,r)}function t5(t,e,n){return We(t).beforeAuthStateChanged(e,n)}function n5(t,e,n,r){return We(t).onAuthStateChanged(e,n,r)}function cp(t){return We(t).signOut()}const up="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(up,"1"),this.storage.removeItem(up),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=1e3,i5=10;class fR extends dR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);_U()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,i5):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},r5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fR.type="LOCAL";const s5=fR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR extends dR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pR.type="SESSION";const mR=pR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new hm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await o5(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=tx("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(){return window}function l5(t){ei().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(){return typeof ei().WorkerGlobalScope<"u"&&typeof ei().importScripts=="function"}async function c5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function u5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function h5(){return gR()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="firebaseLocalStorageDb",d5=1,hp="firebaseLocalStorage",vR="fbase_key";class vh{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dm(t,e){return t.transaction([hp],e?"readwrite":"readonly").objectStore(hp)}function f5(){const t=indexedDB.deleteDatabase(yR);return new vh(t).toPromise()}function Fv(){const t=indexedDB.open(yR,d5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hp,{keyPath:vR})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hp)?e(r):(r.close(),await f5(),e(await Fv()))})})}async function MS(t,e,n){const r=dm(t,!0).put({[vR]:e,value:n});return new vh(r).toPromise()}async function p5(t,e){const n=dm(t,!1).get(e),r=await new vh(n).toPromise();return r===void 0?null:r.value}function OS(t,e){const n=dm(t,!0).delete(e);return new vh(n).toPromise()}const m5=800,g5=3;class _R{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Fv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>g5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hm._getInstance(h5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await c5(),!this.activeServiceWorker)return;this.sender=new a5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||u5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Fv();return await MS(e,up,"1"),await OS(e,up),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>MS(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>p5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>OS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=dm(i,!1).getAll();return new vh(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),m5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_R.type="LOCAL";const y5=_R;new gh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v5(t,e){return e?Pi(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx extends Z_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return sl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return sl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _5(t){return uR(t.auth,new nx(t),t.bypassAuthState)}function x5(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),GU(n,new nx(t),t.bypassAuthState)}async function w5(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),KU(n,new nx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _5;case"linkViaPopup":case"linkViaRedirect":return w5;case"reauthViaPopup":case"reauthViaRedirect":return x5;default:Dr(this.auth,"internal-error")}}resolve(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=new gh(2e3,1e4);class $a extends xR{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,$a.currentPopupAction&&$a.currentPopupAction.cancel(),$a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){zi(this.filter.length===1,"Popup operations only handle one event");const e=tx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,$a.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b5.get())};e()}}$a.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5="pendingRedirect",pf=new Map;class S5 extends xR{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pf.get(this.auth._key());if(!e){try{const r=await E5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pf.set(this.auth._key(),e)}return this.bypassAuthState||pf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function E5(t,e){const n=I5(e),r=C5(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function k5(t,e){pf.set(t._key(),e)}function C5(t){return Pi(t._redirectPersistence)}function I5(t){return ff(T5,t.config.apiKey,t.name)}async function A5(t,e,n=!1){if(Ci(t.app))return Promise.reject(js(t));const r=sa(t),i=v5(r,e),o=await new S5(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P5=10*60*1e3;class R5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!wR(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P5&&this.cachedEventUids.clear(),this.cachedEventUids.has(LS(e))}saveEventToCache(e){this.cachedEventUids.add(LS(e)),this.lastProcessedEventTime=Date.now()}}function LS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wR({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function N5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wR(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D5(t,e={}){return ui(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,M5=/^https?/;async function O5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await D5(t);for(const n of e)try{if(L5(n))return}catch{}Dr(t,"unauthorized-domain")}function L5(t){const e=Ov(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!M5.test(n))return!1;if(j5.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=new gh(3e4,6e4);function VS(){const t=ei().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function F5(t){return new Promise((e,n)=>{var r,i,s;function o(){VS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VS(),n(Zr(t,"network-request-failed"))},timeout:V5.get()})}if(!((i=(r=ei().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ei().gapi)===null||s===void 0)&&s.load)o();else{const a=IU("iframefcb");return ei()[a]=()=>{gapi.load?o():n(Zr(t,"network-request-failed"))},oR(`${CU()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw mf=null,e})}let mf=null;function U5(t){return mf=mf||F5(t),mf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5=new gh(5e3,15e3),z5="__/auth/iframe",$5="emulator/auth/iframe",W5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},H5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function q5(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Q_(e,$5):`https://${t.config.authDomain}/${z5}`,r={apiKey:e.apiKey,appName:t.name,v:ia},i=H5.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${mh(r).slice(1)}`}async function K5(t){const e=await U5(t),n=ei().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:q5(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:W5,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Zr(t,"network-request-failed"),a=ei().setTimeout(()=>{s(o)},B5.get());function l(){ei().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Y5=500,Q5=600,X5="_blank",J5="http://localhost";class FS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Z5(t,e,n,r=Y5,i=Q5){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},G5),{width:r.toString(),height:i.toString(),top:s,left:o}),c=wn().toLowerCase();n&&(a=ZP(c)?X5:n),XP(c)&&(e=e||J5,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(vU(c)&&a!=="_self")return eB(e||"",a),new FS(null);const f=window.open(e||"",a,u);he(f,t,"popup-blocked");try{f.focus()}catch{}return new FS(f)}function eB(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="__/auth/handler",nB="emulator/auth/handler",rB=encodeURIComponent("fac");async function US(t,e,n,r,i,s){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ia,eventId:i};if(e instanceof lR){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",zF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))o[u]=f}if(e instanceof yh){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${rB}=${encodeURIComponent(l)}`:"";return`${iB(t)}?${mh(a).slice(1)}${c}`}function iB({config:t}){return t.emulator?Q_(t,nB):`https://${t.authDomain}/${tB}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="webStorageSupport";class sB{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mR,this._completeRedirectFn=A5,this._overrideRedirectResult=k5}async _openPopup(e,n,r,i){var s;zi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await US(e,n,r,Ov(),i);return Z5(e,o,tx())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await US(e,n,r,Ov(),i);return l5(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(zi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await K5(e),r=new R5(e);return n.register("authEvent",i=>(he(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hg,{type:Hg},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Hg];o!==void 0&&n(!!o),Dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=O5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iR()||JP()||J_()}}const oB=sB;var BS="@firebase/auth",zS="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aB{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cB(t){Go(new Fs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;he(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sR(t)},c=new SU(r,i,s,l);return DU(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Go(new Fs("auth-internal",e=>{const n=sa(e.getProvider("auth").getImmediate());return(r=>new aB(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Jr(BS,zS,lB(t)),Jr(BS,zS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=5*60,hB=OP("authIdTokenMaxAge")||uB;let $S=null;const dB=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>hB)return;const i=n==null?void 0:n.token;$S!==i&&($S=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Mr(t=K_()){const e=lm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=NU(t,{popupRedirectResolver:oB,persistence:[y5,s5,mR]}),r=OP("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=dB(s.toString());t5(n,o,()=>o(n.currentUser)),e5(n,a=>o(a))}}const i=DP("auth");return i&&jU(n,`http://${i}`),n}function fB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}EU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Zr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",fB().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cB("Browser");var WS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lo,bR;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,T){function E(){}E.prototype=T.prototype,k.D=T.prototype,k.prototype=new E,k.prototype.constructor=k,k.C=function(C,D,A){for(var R=Array(arguments.length-2),$=2;$<arguments.length;$++)R[$-2]=arguments[$];return T.prototype[D].apply(C,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,T,E){E||(E=0);var C=Array(16);if(typeof T=="string")for(var D=0;16>D;++D)C[D]=T.charCodeAt(E++)|T.charCodeAt(E++)<<8|T.charCodeAt(E++)<<16|T.charCodeAt(E++)<<24;else for(D=0;16>D;++D)C[D]=T[E++]|T[E++]<<8|T[E++]<<16|T[E++]<<24;T=k.g[0],E=k.g[1],D=k.g[2];var A=k.g[3],R=T+(A^E&(D^A))+C[0]+3614090360&4294967295;T=E+(R<<7&4294967295|R>>>25),R=A+(D^T&(E^D))+C[1]+3905402710&4294967295,A=T+(R<<12&4294967295|R>>>20),R=D+(E^A&(T^E))+C[2]+606105819&4294967295,D=A+(R<<17&4294967295|R>>>15),R=E+(T^D&(A^T))+C[3]+3250441966&4294967295,E=D+(R<<22&4294967295|R>>>10),R=T+(A^E&(D^A))+C[4]+4118548399&4294967295,T=E+(R<<7&4294967295|R>>>25),R=A+(D^T&(E^D))+C[5]+1200080426&4294967295,A=T+(R<<12&4294967295|R>>>20),R=D+(E^A&(T^E))+C[6]+2821735955&4294967295,D=A+(R<<17&4294967295|R>>>15),R=E+(T^D&(A^T))+C[7]+4249261313&4294967295,E=D+(R<<22&4294967295|R>>>10),R=T+(A^E&(D^A))+C[8]+1770035416&4294967295,T=E+(R<<7&4294967295|R>>>25),R=A+(D^T&(E^D))+C[9]+2336552879&4294967295,A=T+(R<<12&4294967295|R>>>20),R=D+(E^A&(T^E))+C[10]+4294925233&4294967295,D=A+(R<<17&4294967295|R>>>15),R=E+(T^D&(A^T))+C[11]+2304563134&4294967295,E=D+(R<<22&4294967295|R>>>10),R=T+(A^E&(D^A))+C[12]+1804603682&4294967295,T=E+(R<<7&4294967295|R>>>25),R=A+(D^T&(E^D))+C[13]+4254626195&4294967295,A=T+(R<<12&4294967295|R>>>20),R=D+(E^A&(T^E))+C[14]+2792965006&4294967295,D=A+(R<<17&4294967295|R>>>15),R=E+(T^D&(A^T))+C[15]+1236535329&4294967295,E=D+(R<<22&4294967295|R>>>10),R=T+(D^A&(E^D))+C[1]+4129170786&4294967295,T=E+(R<<5&4294967295|R>>>27),R=A+(E^D&(T^E))+C[6]+3225465664&4294967295,A=T+(R<<9&4294967295|R>>>23),R=D+(T^E&(A^T))+C[11]+643717713&4294967295,D=A+(R<<14&4294967295|R>>>18),R=E+(A^T&(D^A))+C[0]+3921069994&4294967295,E=D+(R<<20&4294967295|R>>>12),R=T+(D^A&(E^D))+C[5]+3593408605&4294967295,T=E+(R<<5&4294967295|R>>>27),R=A+(E^D&(T^E))+C[10]+38016083&4294967295,A=T+(R<<9&4294967295|R>>>23),R=D+(T^E&(A^T))+C[15]+3634488961&4294967295,D=A+(R<<14&4294967295|R>>>18),R=E+(A^T&(D^A))+C[4]+3889429448&4294967295,E=D+(R<<20&4294967295|R>>>12),R=T+(D^A&(E^D))+C[9]+568446438&4294967295,T=E+(R<<5&4294967295|R>>>27),R=A+(E^D&(T^E))+C[14]+3275163606&4294967295,A=T+(R<<9&4294967295|R>>>23),R=D+(T^E&(A^T))+C[3]+4107603335&4294967295,D=A+(R<<14&4294967295|R>>>18),R=E+(A^T&(D^A))+C[8]+1163531501&4294967295,E=D+(R<<20&4294967295|R>>>12),R=T+(D^A&(E^D))+C[13]+2850285829&4294967295,T=E+(R<<5&4294967295|R>>>27),R=A+(E^D&(T^E))+C[2]+4243563512&4294967295,A=T+(R<<9&4294967295|R>>>23),R=D+(T^E&(A^T))+C[7]+1735328473&4294967295,D=A+(R<<14&4294967295|R>>>18),R=E+(A^T&(D^A))+C[12]+2368359562&4294967295,E=D+(R<<20&4294967295|R>>>12),R=T+(E^D^A)+C[5]+4294588738&4294967295,T=E+(R<<4&4294967295|R>>>28),R=A+(T^E^D)+C[8]+2272392833&4294967295,A=T+(R<<11&4294967295|R>>>21),R=D+(A^T^E)+C[11]+1839030562&4294967295,D=A+(R<<16&4294967295|R>>>16),R=E+(D^A^T)+C[14]+4259657740&4294967295,E=D+(R<<23&4294967295|R>>>9),R=T+(E^D^A)+C[1]+2763975236&4294967295,T=E+(R<<4&4294967295|R>>>28),R=A+(T^E^D)+C[4]+1272893353&4294967295,A=T+(R<<11&4294967295|R>>>21),R=D+(A^T^E)+C[7]+4139469664&4294967295,D=A+(R<<16&4294967295|R>>>16),R=E+(D^A^T)+C[10]+3200236656&4294967295,E=D+(R<<23&4294967295|R>>>9),R=T+(E^D^A)+C[13]+681279174&4294967295,T=E+(R<<4&4294967295|R>>>28),R=A+(T^E^D)+C[0]+3936430074&4294967295,A=T+(R<<11&4294967295|R>>>21),R=D+(A^T^E)+C[3]+3572445317&4294967295,D=A+(R<<16&4294967295|R>>>16),R=E+(D^A^T)+C[6]+76029189&4294967295,E=D+(R<<23&4294967295|R>>>9),R=T+(E^D^A)+C[9]+3654602809&4294967295,T=E+(R<<4&4294967295|R>>>28),R=A+(T^E^D)+C[12]+3873151461&4294967295,A=T+(R<<11&4294967295|R>>>21),R=D+(A^T^E)+C[15]+530742520&4294967295,D=A+(R<<16&4294967295|R>>>16),R=E+(D^A^T)+C[2]+3299628645&4294967295,E=D+(R<<23&4294967295|R>>>9),R=T+(D^(E|~A))+C[0]+4096336452&4294967295,T=E+(R<<6&4294967295|R>>>26),R=A+(E^(T|~D))+C[7]+1126891415&4294967295,A=T+(R<<10&4294967295|R>>>22),R=D+(T^(A|~E))+C[14]+2878612391&4294967295,D=A+(R<<15&4294967295|R>>>17),R=E+(A^(D|~T))+C[5]+4237533241&4294967295,E=D+(R<<21&4294967295|R>>>11),R=T+(D^(E|~A))+C[12]+1700485571&4294967295,T=E+(R<<6&4294967295|R>>>26),R=A+(E^(T|~D))+C[3]+2399980690&4294967295,A=T+(R<<10&4294967295|R>>>22),R=D+(T^(A|~E))+C[10]+4293915773&4294967295,D=A+(R<<15&4294967295|R>>>17),R=E+(A^(D|~T))+C[1]+2240044497&4294967295,E=D+(R<<21&4294967295|R>>>11),R=T+(D^(E|~A))+C[8]+1873313359&4294967295,T=E+(R<<6&4294967295|R>>>26),R=A+(E^(T|~D))+C[15]+4264355552&4294967295,A=T+(R<<10&4294967295|R>>>22),R=D+(T^(A|~E))+C[6]+2734768916&4294967295,D=A+(R<<15&4294967295|R>>>17),R=E+(A^(D|~T))+C[13]+1309151649&4294967295,E=D+(R<<21&4294967295|R>>>11),R=T+(D^(E|~A))+C[4]+4149444226&4294967295,T=E+(R<<6&4294967295|R>>>26),R=A+(E^(T|~D))+C[11]+3174756917&4294967295,A=T+(R<<10&4294967295|R>>>22),R=D+(T^(A|~E))+C[2]+718787259&4294967295,D=A+(R<<15&4294967295|R>>>17),R=E+(A^(D|~T))+C[9]+3951481745&4294967295,k.g[0]=k.g[0]+T&4294967295,k.g[1]=k.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+D&4294967295,k.g[3]=k.g[3]+A&4294967295}r.prototype.u=function(k,T){T===void 0&&(T=k.length);for(var E=T-this.blockSize,C=this.B,D=this.h,A=0;A<T;){if(D==0)for(;A<=E;)i(this,k,A),A+=this.blockSize;if(typeof k=="string"){for(;A<T;)if(C[D++]=k.charCodeAt(A++),D==this.blockSize){i(this,C),D=0;break}}else for(;A<T;)if(C[D++]=k[A++],D==this.blockSize){i(this,C),D=0;break}}this.h=D,this.o+=T},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var T=1;T<k.length-8;++T)k[T]=0;var E=8*this.o;for(T=k.length-8;T<k.length;++T)k[T]=E&255,E/=256;for(this.u(k),k=Array(16),T=E=0;4>T;++T)for(var C=0;32>C;C+=8)k[E++]=this.g[T]>>>C&255;return k};function s(k,T){var E=a;return Object.prototype.hasOwnProperty.call(E,k)?E[k]:E[k]=T(k)}function o(k,T){this.h=T;for(var E=[],C=!0,D=k.length-1;0<=D;D--){var A=k[D]|0;C&&A==T||(E[D]=A,C=!1)}this.g=E}var a={};function l(k){return-128<=k&&128>k?s(k,function(T){return new o([T|0],0>T?-1:0)}):new o([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return f;if(0>k)return x(c(-k));for(var T=[],E=1,C=0;k>=E;C++)T[C]=k/E|0,E*=4294967296;return new o(T,0)}function u(k,T){if(k.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(k.charAt(0)=="-")return x(u(k.substring(1),T));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(T,8)),C=f,D=0;D<k.length;D+=8){var A=Math.min(8,k.length-D),R=parseInt(k.substring(D,D+A),T);8>A?(A=c(Math.pow(T,A)),C=C.j(A).add(c(R))):(C=C.j(E),C=C.add(c(R)))}return C}var f=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-x(this).m();for(var k=0,T=1,E=0;E<this.g.length;E++){var C=this.i(E);k+=(0<=C?C:4294967296+C)*T,T*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(y(this))return"0";if(_(this))return"-"+x(this).toString(k);for(var T=c(Math.pow(k,6)),E=this,C="";;){var D=P(E,T).g;E=v(E,D.j(T));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(k);if(E=D,y(E))return A+C;for(;6>A.length;)A="0"+A;C=A+C}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function y(k){if(k.h!=0)return!1;for(var T=0;T<k.g.length;T++)if(k.g[T]!=0)return!1;return!0}function _(k){return k.h==-1}t.l=function(k){return k=v(this,k),_(k)?-1:y(k)?0:1};function x(k){for(var T=k.g.length,E=[],C=0;C<T;C++)E[C]=~k.g[C];return new o(E,~k.h).add(p)}t.abs=function(){return _(this)?x(this):this},t.add=function(k){for(var T=Math.max(this.g.length,k.g.length),E=[],C=0,D=0;D<=T;D++){var A=C+(this.i(D)&65535)+(k.i(D)&65535),R=(A>>>16)+(this.i(D)>>>16)+(k.i(D)>>>16);C=R>>>16,A&=65535,R&=65535,E[D]=R<<16|A}return new o(E,E[E.length-1]&-2147483648?-1:0)};function v(k,T){return k.add(x(T))}t.j=function(k){if(y(this)||y(k))return f;if(_(this))return _(k)?x(this).j(x(k)):x(x(this).j(k));if(_(k))return x(this.j(x(k)));if(0>this.l(m)&&0>k.l(m))return c(this.m()*k.m());for(var T=this.g.length+k.g.length,E=[],C=0;C<2*T;C++)E[C]=0;for(C=0;C<this.g.length;C++)for(var D=0;D<k.g.length;D++){var A=this.i(C)>>>16,R=this.i(C)&65535,$=k.i(D)>>>16,W=k.i(D)&65535;E[2*C+2*D]+=R*W,w(E,2*C+2*D),E[2*C+2*D+1]+=A*W,w(E,2*C+2*D+1),E[2*C+2*D+1]+=R*$,w(E,2*C+2*D+1),E[2*C+2*D+2]+=A*$,w(E,2*C+2*D+2)}for(C=0;C<T;C++)E[C]=E[2*C+1]<<16|E[2*C];for(C=T;C<2*T;C++)E[C]=0;return new o(E,0)};function w(k,T){for(;(k[T]&65535)!=k[T];)k[T+1]+=k[T]>>>16,k[T]&=65535,T++}function S(k,T){this.g=k,this.h=T}function P(k,T){if(y(T))throw Error("division by zero");if(y(k))return new S(f,f);if(_(k))return T=P(x(k),T),new S(x(T.g),x(T.h));if(_(T))return T=P(k,x(T)),new S(x(T.g),T.h);if(30<k.g.length){if(_(k)||_(T))throw Error("slowDivide_ only works with positive integers.");for(var E=p,C=T;0>=C.l(k);)E=I(E),C=I(C);var D=M(E,1),A=M(C,1);for(C=M(C,2),E=M(E,2);!y(C);){var R=A.add(C);0>=R.l(k)&&(D=D.add(E),A=R),C=M(C,1),E=M(E,1)}return T=v(k,D.j(T)),new S(D,T)}for(D=f;0<=k.l(T);){for(E=Math.max(1,Math.floor(k.m()/T.m())),C=Math.ceil(Math.log(E)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),A=c(E),R=A.j(T);_(R)||0<R.l(k);)E-=C,A=c(E),R=A.j(T);y(A)&&(A=p),D=D.add(A),k=v(k,R)}return new S(D,k)}t.A=function(k){return P(this,k).h},t.and=function(k){for(var T=Math.max(this.g.length,k.g.length),E=[],C=0;C<T;C++)E[C]=this.i(C)&k.i(C);return new o(E,this.h&k.h)},t.or=function(k){for(var T=Math.max(this.g.length,k.g.length),E=[],C=0;C<T;C++)E[C]=this.i(C)|k.i(C);return new o(E,this.h|k.h)},t.xor=function(k){for(var T=Math.max(this.g.length,k.g.length),E=[],C=0;C<T;C++)E[C]=this.i(C)^k.i(C);return new o(E,this.h^k.h)};function I(k){for(var T=k.g.length+1,E=[],C=0;C<T;C++)E[C]=k.i(C)<<1|k.i(C-1)>>>31;return new o(E,k.h)}function M(k,T){var E=T>>5;T%=32;for(var C=k.g.length-E,D=[],A=0;A<C;A++)D[A]=0<T?k.i(A+E)>>>T|k.i(A+E+1)<<32-T:k.i(A+E);return new o(D,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bR=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Lo=o}).apply(typeof WS<"u"?WS:typeof self<"u"?self:typeof window<"u"?window:{});var Td=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var TR,Mc,SR,gf,Uv,ER,kR,CR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,b){return d==Array.prototype||d==Object.prototype||(d[g]=b.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Td=="object"&&Td];for(var g=0;g<d.length;++g){var b=d[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function i(d,g){if(g)e:{var b=r;d=d.split(".");for(var N=0;N<d.length-1;N++){var L=d[N];if(!(L in b))break e;b=b[L]}d=d[d.length-1],N=b[d],g=g(N),g!=N&&g!=null&&e(b,d,{configurable:!0,writable:!0,value:g})}}function s(d,g){d instanceof String&&(d+="");var b=0,N=!1,L={next:function(){if(!N&&b<d.length){var F=b++;return{value:g(F,d[F]),done:!1}}return N=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(d){return d||function(){return s(this,function(g,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function c(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function u(d,g,b){return d.call.apply(d.bind,arguments)}function f(d,g,b){if(!d)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,N),d.apply(g,L)}}return function(){return d.apply(g,arguments)}}function p(d,g,b){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,p.apply(null,arguments)}function m(d,g){var b=Array.prototype.slice.call(arguments,1);return function(){var N=b.slice();return N.push.apply(N,arguments),d.apply(this,N)}}function y(d,g){function b(){}b.prototype=g.prototype,d.aa=g.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(N,L,F){for(var X=Array(arguments.length-2),He=2;He<arguments.length;He++)X[He-2]=arguments[He];return g.prototype[L].apply(N,X)}}function _(d){const g=d.length;if(0<g){const b=Array(g);for(let N=0;N<g;N++)b[N]=d[N];return b}return[]}function x(d,g){for(let b=1;b<arguments.length;b++){const N=arguments[b];if(l(N)){const L=d.length||0,F=N.length||0;d.length=L+F;for(let X=0;X<F;X++)d[L+X]=N[X]}else d.push(N)}}class v{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(d){return/^[\s\xa0]*$/.test(d)}function S(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function P(d){return P[" "](d),d}P[" "]=function(){};var I=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(d,g,b){for(const N in d)g.call(b,d[N],N,d)}function k(d,g){for(const b in d)g.call(void 0,d[b],b,d)}function T(d){const g={};for(const b in d)g[b]=d[b];return g}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(d,g){let b,N;for(let L=1;L<arguments.length;L++){N=arguments[L];for(b in N)d[b]=N[b];for(let F=0;F<E.length;F++)b=E[F],Object.prototype.hasOwnProperty.call(N,b)&&(d[b]=N[b])}}function D(d){var g=1;d=d.split(":");const b=[];for(;0<g&&d.length;)b.push(d.shift()),g--;return d.length&&b.push(d.join(":")),b}function A(d){a.setTimeout(()=>{throw d},0)}function R(){var d=Q;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class ${constructor(){this.h=this.g=null}add(g,b){const N=W.get();N.set(g,b),this.h?this.h.next=N:this.g=N,this.h=N}}var W=new v(()=>new q,d=>d.reset());class q{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,B=!1,Q=new $,J=()=>{const d=a.Promise.resolve(void 0);Z=()=>{d.then(me)}};var me=()=>{for(var d;d=R();){try{d.h.call(d.g)}catch(b){A(b)}var g=W;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}B=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var qe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};a.addEventListener("test",b,g),a.removeEventListener("test",b,g)}catch{}return d}();function nt(d,g){if(xe.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,N=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(I){e:{try{P(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else b=="mouseover"?g=d.fromElement:b=="mouseout"&&(g=d.toElement);this.relatedTarget=g,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ke[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&nt.aa.h.call(this)}}y(nt,xe);var Ke={2:"touch",3:"pen",4:"mouse"};nt.prototype.h=function(){nt.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var at="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(d,g,b,N,L){this.listener=d,this.proxy=null,this.src=g,this.type=b,this.capture=!!N,this.ha=L,this.key=++nn,this.da=this.fa=!1}function Rn(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Wn(d){this.src=d,this.g={},this.h=0}Wn.prototype.add=function(d,g,b,N,L){var F=d.toString();d=this.g[F],d||(d=this.g[F]=[],this.h++);var X=Ue(d,g,N,L);return-1<X?(g=d[X],b||(g.fa=!1)):(g=new rn(g,this.src,F,!!N,L),g.fa=b,d.push(g)),g};function re(d,g){var b=g.type;if(b in d.g){var N=d.g[b],L=Array.prototype.indexOf.call(N,g,void 0),F;(F=0<=L)&&Array.prototype.splice.call(N,L,1),F&&(Rn(g),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Ue(d,g,b,N){for(var L=0;L<d.length;++L){var F=d[L];if(!F.da&&F.listener==g&&F.capture==!!b&&F.ha==N)return L}return-1}var ve="closure_lm_"+(1e6*Math.random()|0),Be={};function be(d,g,b,N,L){if(Array.isArray(g)){for(var F=0;F<g.length;F++)be(d,g[F],b,N,L);return null}return b=G(b),d&&d[at]?d.K(g,b,c(N)?!!N.capture:!1,L):Yi(d,g,b,!1,N,L)}function Yi(d,g,b,N,L,F){if(!g)throw Error("Invalid event type");var X=c(L)?!!L.capture:!!L,He=ee(d);if(He||(d[ve]=He=new Wn(d)),b=He.add(g,b,N,X,F),b.proxy)return b;if(N=Yl(),b.proxy=N,N.src=d,N.listener=b,d.addEventListener)qe||(L=X),L===void 0&&(L=!1),d.addEventListener(g.toString(),N,L);else if(d.attachEvent)d.attachEvent(V(g.toString()),N);else if(d.addListener&&d.removeListener)d.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Yl(){function d(b){return g.call(d.src,d.listener,b)}const g=U;return d}function Qi(d,g,b,N,L){if(Array.isArray(g))for(var F=0;F<g.length;F++)Qi(d,g[F],b,N,L);else N=c(N)?!!N.capture:!!N,b=G(b),d&&d[at]?(d=d.i,g=String(g).toString(),g in d.g&&(F=d.g[g],b=Ue(F,b,N,L),-1<b&&(Rn(F[b]),Array.prototype.splice.call(F,b,1),F.length==0&&(delete d.g[g],d.h--)))):d&&(d=ee(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Ue(g,b,N,L)),(b=-1<d?g[d]:null)&&O(b))}function O(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[at])re(g.i,d);else{var b=d.type,N=d.proxy;g.removeEventListener?g.removeEventListener(b,N,d.capture):g.detachEvent?g.detachEvent(V(b),N):g.addListener&&g.removeListener&&g.removeListener(N),(b=ee(g))?(re(b,d),b.h==0&&(b.src=null,g[ve]=null)):Rn(d)}}}function V(d){return d in Be?Be[d]:Be[d]="on"+d}function U(d,g){if(d.da)d=!0;else{g=new nt(g,this);var b=d.listener,N=d.ha||d.src;d.fa&&O(d),d=b.call(N,g)}return d}function ee(d){return d=d[ve],d instanceof Wn?d:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function G(d){return typeof d=="function"?d:(d[Y]||(d[Y]=function(g){return d.handleEvent(g)}),d[Y])}function te(){ue.call(this),this.i=new Wn(this),this.M=this,this.F=null}y(te,ue),te.prototype[at]=!0,te.prototype.removeEventListener=function(d,g,b,N){Qi(this,d,g,b,N)};function de(d,g){var b,N=d.F;if(N)for(b=[];N;N=N.F)b.push(N);if(d=d.M,N=g.type||g,typeof g=="string")g=new xe(g,d);else if(g instanceof xe)g.target=g.target||d;else{var L=g;g=new xe(N,d),C(g,L)}if(L=!0,b)for(var F=b.length-1;0<=F;F--){var X=g.g=b[F];L=Ae(X,N,!0,g)&&L}if(X=g.g=d,L=Ae(X,N,!0,g)&&L,L=Ae(X,N,!1,g)&&L,b)for(F=0;F<b.length;F++)X=g.g=b[F],L=Ae(X,N,!1,g)&&L}te.prototype.N=function(){if(te.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var b=d.g[g],N=0;N<b.length;N++)Rn(b[N]);delete d.g[g],d.h--}}this.F=null},te.prototype.K=function(d,g,b,N){return this.i.add(String(d),g,!1,b,N)},te.prototype.L=function(d,g,b,N){return this.i.add(String(d),g,!0,b,N)};function Ae(d,g,b,N){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,F=0;F<g.length;++F){var X=g[F];if(X&&!X.da&&X.capture==b){var He=X.listener,Ht=X.ha||X.src;X.fa&&re(d.i,X),L=He.call(Ht,N)!==!1&&L}}return L&&!N.defaultPrevented}function Dt(d,g,b){if(typeof d=="function")b&&(d=p(d,b));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function Or(d){d.g=Dt(()=>{d.g=null,d.i&&(d.i=!1,Or(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class Hn extends ue{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Or(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function di(d){ue.call(this),this.h=d,this.g={}}y(di,ue);var vr=[];function fi(d){M(d.g,function(g,b){this.g.hasOwnProperty(b)&&O(g)},d),d.g={}}di.prototype.N=function(){di.aa.N.call(this),fi(this)},di.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ro=a.JSON.stringify,io=a.JSON.parse,ya=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Lr(){}Lr.prototype.h=null;function $h(d){return d.h||(d.h=d.i())}function Ql(){}var so={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function va(){xe.call(this,"d")}y(va,xe);function Lt(){xe.call(this,"c")}y(Lt,xe);var mt={},oo=null;function ze(){return oo=oo||new te}mt.La="serverreachability";function qn(d){xe.call(this,mt.La,d)}y(qn,xe);function ao(d){const g=ze();de(g,new qn(g))}mt.STAT_EVENT="statevent";function _a(d,g){xe.call(this,mt.STAT_EVENT,d),this.stat=g}y(_a,xe);function Vt(d){const g=ze();de(g,new _a(g,d))}mt.Ma="timingevent";function Xl(d,g){xe.call(this,mt.Ma,d),this.size=g}y(Xl,xe);function pi(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function Vr(){this.g=!0}Vr.prototype.xa=function(){this.g=!1};function Jl(d,g,b,N,L,F){d.info(function(){if(d.g)if(F)for(var X="",He=F.split("&"),Ht=0;Ht<He.length;Ht++){var Re=He[Ht].split("=");if(1<Re.length){var sn=Re[0];Re=Re[1];var on=sn.split("_");X=2<=on.length&&on[1]=="type"?X+(sn+"="+Re+"&"):X+(sn+"=redacted&")}}else X=null;else X=F;return"XMLHTTP REQ ("+N+") [attempt "+L+"]: "+g+`
`+b+`
`+X})}function Zl(d,g,b,N,L,F,X){d.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+L+"]: "+g+`
`+b+`
`+F+" "+X})}function Fr(d,g,b,N){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+ec(d,b)+(N?" "+N:"")})}function ng(d,g){d.info(function(){return"TIMEOUT: "+g})}Vr.prototype.info=function(){};function ec(d,g){if(!d.g)return g;if(!g)return null;try{var b=JSON.parse(g);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var N=b[d];if(!(2>N.length)){var L=N[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var X=1;X<L.length;X++)L[X]=""}}}}return ro(b)}catch{return g}}var lo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wh={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tc;function _e(){}y(_e,Lr),_e.prototype.g=function(){return new XMLHttpRequest},_e.prototype.i=function(){return{}},tc=new _e;function De(d,g,b,N){this.j=d,this.i=g,this.l=b,this.R=N||1,this.U=new di(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lt}function lt(){this.i=null,this.g="",this.h=!1}var Nn={},Tn={};function co(d,g,b){d.L=1,d.v=Qh(mi(g)),d.m=b,d.P=!0,Hh(d,null)}function Hh(d,g){d.F=Date.now(),Kh(d),d.A=mi(d.v);var b=d.A,N=d.R;Array.isArray(N)||(N=[String(N)]),Pb(b.i,"t",N),d.C=0,b=d.j.J,d.h=new lt,d.g=Gb(d.j,b?g:null,!d.m),0<d.O&&(d.M=new Hn(p(d.Y,d,d.g),d.O)),g=d.U,b=d.g,N=d.ca;var L="readystatechange";Array.isArray(L)||(L&&(vr[0]=L.toString()),L=vr);for(var F=0;F<L.length;F++){var X=be(b,L[F],N||g.handleEvent,!1,g.h||g);if(!X)break;g.g[X.key]=X}g=d.H?T(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),ao(),Jl(d.i,d.u,d.A,d.l,d.R,d.m)}De.prototype.ca=function(d){d=d.target;const g=this.M;g&&gi(d)==3?g.j():this.Y(d)},De.prototype.Y=function(d){try{if(d==this.g)e:{const on=gi(this.g);var g=this.g.Ba();const ba=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||Lb(this.g)))){this.J||on!=4||g==7||(g==8||0>=ba?ao(3):ao(2)),rg(this);var b=this.g.Z();this.X=b;t:if(qh(this)){var N=Lb(this.g);d="";var L=N.length,F=gi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){uo(this),nc(this);var X="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,d+=this.h.i.decode(N[g],{stream:!(F&&g==L-1)});N.length=0,this.h.g+=d,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=b==200,Zl(this.i,this.u,this.A,this.l,this.R,on,b),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Ht=this.g;if((He=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(He)){var Re=He;break t}}Re=null}if(b=Re)Fr(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ig(this,b);else{this.o=!1,this.s=3,Vt(12),uo(this),nc(this);break e}}if(this.P){b=!0;let _r;for(;!this.J&&this.C<X.length;)if(_r=TM(this,X),_r==Tn){on==4&&(this.s=4,Vt(14),b=!1),Fr(this.i,this.l,null,"[Incomplete Response]");break}else if(_r==Nn){this.s=4,Vt(15),Fr(this.i,this.l,X,"[Invalid Chunk]"),b=!1;break}else Fr(this.i,this.l,_r,null),ig(this,_r);if(qh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||X.length!=0||this.h.h||(this.s=1,Vt(16),b=!1),this.o=this.o&&b,!b)Fr(this.i,this.l,X,"[Invalid Chunked Response]"),uo(this),nc(this);else if(0<X.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),ug(sn),sn.M=!0,Vt(11))}}else Fr(this.i,this.l,X,null),ig(this,X);on==4&&uo(this),this.o&&!this.J&&(on==4?Wb(this.j,this):(this.o=!1,Kh(this)))}else UM(this.g),b==400&&0<X.indexOf("Unknown SID")?(this.s=3,Vt(12)):(this.s=0,Vt(13)),uo(this),nc(this)}}}catch{}finally{}};function qh(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function TM(d,g){var b=d.C,N=g.indexOf(`
`,b);return N==-1?Tn:(b=Number(g.substring(b,N)),isNaN(b)?Nn:(N+=1,N+b>g.length?Tn:(g=g.slice(N,N+b),d.C=N+b,g)))}De.prototype.cancel=function(){this.J=!0,uo(this)};function Kh(d){d.S=Date.now()+d.I,vb(d,d.I)}function vb(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=pi(p(d.ba,d),g)}function rg(d){d.B&&(a.clearTimeout(d.B),d.B=null)}De.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(ng(this.i,this.A),this.L!=2&&(ao(),Vt(17)),uo(this),this.s=2,nc(this)):vb(this,this.S-d)};function nc(d){d.j.G==0||d.J||Wb(d.j,d)}function uo(d){rg(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,fi(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function ig(d,g){try{var b=d.j;if(b.G!=0&&(b.g==d||sg(b.h,d))){if(!d.K&&sg(b.h,d)&&b.G==3){try{var N=b.Da.g.parse(g)}catch{N=null}if(Array.isArray(N)&&N.length==3){var L=N;if(L[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)nd(b),ed(b);else break e;cg(b),Vt(18)}}else b.za=L[1],0<b.za-b.T&&37500>L[2]&&b.F&&b.v==0&&!b.C&&(b.C=pi(p(b.Za,b),6e3));if(1>=wb(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else fo(b,11)}else if((d.K||b.g==d)&&nd(b),!w(g))for(L=b.Da.g.parse(g),g=0;g<L.length;g++){let Re=L[g];if(b.T=Re[0],Re=Re[1],b.G==2)if(Re[0]=="c"){b.K=Re[1],b.ia=Re[2];const sn=Re[3];sn!=null&&(b.la=sn,b.j.info("VER="+b.la));const on=Re[4];on!=null&&(b.Aa=on,b.j.info("SVER="+b.Aa));const ba=Re[5];ba!=null&&typeof ba=="number"&&0<ba&&(N=1.5*ba,b.L=N,b.j.info("backChannelRequestTimeoutMs_="+N)),N=b;const _r=d.g;if(_r){const id=_r.g?_r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(id){var F=N.h;F.g||id.indexOf("spdy")==-1&&id.indexOf("quic")==-1&&id.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(og(F,F.h),F.h=null))}if(N.D){const hg=_r.g?_r.g.getResponseHeader("X-HTTP-Session-Id"):null;hg&&(N.ya=hg,Qe(N.I,N.D,hg))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),N=b;var X=d;if(N.qa=Kb(N,N.J?N.ia:null,N.W),X.K){bb(N.h,X);var He=X,Ht=N.L;Ht&&(He.I=Ht),He.B&&(rg(He),Kh(He)),N.g=X}else zb(N);0<b.i.length&&td(b)}else Re[0]!="stop"&&Re[0]!="close"||fo(b,7);else b.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?fo(b,7):lg(b):Re[0]!="noop"&&b.l&&b.l.ta(Re),b.v=0)}}ao(4)}catch{}}var SM=class{constructor(d,g){this.g=d,this.map=g}};function _b(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xb(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function wb(d){return d.h?1:d.g?d.g.size:0}function sg(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function og(d,g){d.g?d.g.add(g):d.h=g}function bb(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}_b.prototype.cancel=function(){if(this.i=Tb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Tb(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const b of d.g.values())g=g.concat(b.D);return g}return _(d.i)}function EM(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var g=[],b=d.length,N=0;N<b;N++)g.push(d[N]);return g}g=[],b=0;for(N in d)g[b++]=d[N];return g}function kM(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var g=[];d=d.length;for(var b=0;b<d;b++)g.push(b);return g}g=[],b=0;for(const N in d)g[b++]=N;return g}}}function Sb(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var b=kM(d),N=EM(d),L=N.length,F=0;F<L;F++)g.call(void 0,N[F],b&&b[F],d)}var Eb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function CM(d,g){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var N=d[b].indexOf("="),L=null;if(0<=N){var F=d[b].substring(0,N);L=d[b].substring(N+1)}else F=d[b];g(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ho(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ho){this.h=d.h,Gh(this,d.j),this.o=d.o,this.g=d.g,Yh(this,d.s),this.l=d.l;var g=d.i,b=new sc;b.i=g.i,g.g&&(b.g=new Map(g.g),b.h=g.h),kb(this,b),this.m=d.m}else d&&(g=String(d).match(Eb))?(this.h=!1,Gh(this,g[1]||"",!0),this.o=rc(g[2]||""),this.g=rc(g[3]||"",!0),Yh(this,g[4]),this.l=rc(g[5]||"",!0),kb(this,g[6]||"",!0),this.m=rc(g[7]||"")):(this.h=!1,this.i=new sc(null,this.h))}ho.prototype.toString=function(){var d=[],g=this.j;g&&d.push(ic(g,Cb,!0),":");var b=this.g;return(b||g=="file")&&(d.push("//"),(g=this.o)&&d.push(ic(g,Cb,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(ic(b,b.charAt(0)=="/"?PM:AM,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",ic(b,NM)),d.join("")};function mi(d){return new ho(d)}function Gh(d,g,b){d.j=b?rc(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Yh(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function kb(d,g,b){g instanceof sc?(d.i=g,DM(d.i,d.h)):(b||(g=ic(g,RM)),d.i=new sc(g,d.h))}function Qe(d,g,b){d.i.set(g,b)}function Qh(d){return Qe(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function rc(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ic(d,g,b){return typeof d=="string"?(d=encodeURI(d).replace(g,IM),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function IM(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Cb=/[#\/\?@]/g,AM=/[#\?:]/g,PM=/[#\?]/g,RM=/[#\?@]/g,NM=/#/g;function sc(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Xi(d){d.g||(d.g=new Map,d.h=0,d.i&&CM(d.i,function(g,b){d.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}t=sc.prototype,t.add=function(d,g){Xi(this),this.i=null,d=xa(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(g),this.h+=1,this};function Ib(d,g){Xi(d),g=xa(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Ab(d,g){return Xi(d),g=xa(d,g),d.g.has(g)}t.forEach=function(d,g){Xi(this),this.g.forEach(function(b,N){b.forEach(function(L){d.call(g,L,N,this)},this)},this)},t.na=function(){Xi(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),b=[];for(let N=0;N<g.length;N++){const L=d[N];for(let F=0;F<L.length;F++)b.push(g[N])}return b},t.V=function(d){Xi(this);let g=[];if(typeof d=="string")Ab(this,d)&&(g=g.concat(this.g.get(xa(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)g=g.concat(d[b])}return g},t.set=function(d,g){return Xi(this),this.i=null,d=xa(this,d),Ab(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function Pb(d,g,b){Ib(d,g),0<b.length&&(d.i=null,d.g.set(xa(d,g),_(b)),d.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var b=0;b<g.length;b++){var N=g[b];const F=encodeURIComponent(String(N)),X=this.V(N);for(N=0;N<X.length;N++){var L=F;X[N]!==""&&(L+="="+encodeURIComponent(String(X[N]))),d.push(L)}}return this.i=d.join("&")};function xa(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function DM(d,g){g&&!d.j&&(Xi(d),d.i=null,d.g.forEach(function(b,N){var L=N.toLowerCase();N!=L&&(Ib(this,N),Pb(this,L,b))},d)),d.j=g}function jM(d,g){const b=new Vr;if(a.Image){const N=new Image;N.onload=m(Ji,b,"TestLoadImage: loaded",!0,g,N),N.onerror=m(Ji,b,"TestLoadImage: error",!1,g,N),N.onabort=m(Ji,b,"TestLoadImage: abort",!1,g,N),N.ontimeout=m(Ji,b,"TestLoadImage: timeout",!1,g,N),a.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=d}else g(!1)}function MM(d,g){const b=new Vr,N=new AbortController,L=setTimeout(()=>{N.abort(),Ji(b,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:N.signal}).then(F=>{clearTimeout(L),F.ok?Ji(b,"TestPingServer: ok",!0,g):Ji(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Ji(b,"TestPingServer: error",!1,g)})}function Ji(d,g,b,N,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),N(b)}catch{}}function OM(){this.g=new ya}function LM(d,g,b){const N=b||"";try{Sb(d,function(L,F){let X=L;c(L)&&(X=ro(L)),g.push(N+F+"="+encodeURIComponent(X))})}catch(L){throw g.push(N+"type="+encodeURIComponent("_badmap")),L}}function Xh(d){this.l=d.Ub||null,this.j=d.eb||!1}y(Xh,Lr),Xh.prototype.g=function(){return new Jh(this.l,this.j)},Xh.prototype.i=function(d){return function(){return d}}({});function Jh(d,g){te.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Jh,te),t=Jh.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,ac(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oc(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ac(this)),this.g&&(this.readyState=3,ac(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rb(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Rb(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?oc(this):ac(this),this.readyState==3&&Rb(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,oc(this))},t.Qa=function(d){this.g&&(this.response=d,oc(this))},t.ga=function(){this.g&&oc(this)};function oc(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ac(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=g.next();return d.join(`\r
`)};function ac(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Jh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Nb(d){let g="";return M(d,function(b,N){g+=N,g+=":",g+=b,g+=`\r
`}),g}function ag(d,g,b){e:{for(N in b){var N=!1;break e}N=!0}N||(b=Nb(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):Qe(d,g,b))}function gt(d){te.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(gt,te);var VM=/^https?$/i,FM=["POST","PUT"];t=gt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,b,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tc.g(),this.v=this.o?$h(this.o):$h(tc),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(F){Db(this,F);return}if(d=b||"",b=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var L in N)b.set(L,N[L]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const F of N.keys())b.set(F,N.get(F));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(b.keys()).find(F=>F.toLowerCase()=="content-type"),L=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(FM,g,void 0))||N||L||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,X]of b)this.g.setRequestHeader(F,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ob(this),this.u=!0,this.g.send(d),this.u=!1}catch(F){Db(this,F)}};function Db(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,jb(d),Zh(d)}function jb(d){d.A||(d.A=!0,de(d,"complete"),de(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,de(this,"complete"),de(this,"abort"),Zh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zh(this,!0)),gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Mb(this):this.bb())},t.bb=function(){Mb(this)};function Mb(d){if(d.h&&typeof o<"u"&&(!d.v[1]||gi(d)!=4||d.Z()!=2)){if(d.u&&gi(d)==4)Dt(d.Ea,0,d);else if(de(d,"readystatechange"),gi(d)==4){d.h=!1;try{const X=d.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var N;if(N=X===0){var L=String(d.D).match(Eb)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),N=!VM.test(L?L.toLowerCase():"")}b=N}if(b)de(d,"complete"),de(d,"success");else{d.m=6;try{var F=2<gi(d)?d.g.statusText:""}catch{F=""}d.l=F+" ["+d.Z()+"]",jb(d)}}finally{Zh(d)}}}}function Zh(d,g){if(d.g){Ob(d);const b=d.g,N=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||de(d,"ready");try{b.onreadystatechange=N}catch{}}}function Ob(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function gi(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<gi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),io(g)}};function Lb(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function UM(d){const g={};d=(d.g&&2<=gi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<d.length;N++){if(w(d[N]))continue;var b=D(d[N]);const L=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const F=g[L]||[];g[L]=F,F.push(b)}k(g,function(N){return N.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lc(d,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||g}function Vb(d){this.Aa=0,this.i=[],this.j=new Vr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lc("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lc("baseRetryDelayMs",5e3,d),this.cb=lc("retryDelaySeedMs",1e4,d),this.Wa=lc("forwardChannelMaxRetries",2,d),this.wa=lc("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new _b(d&&d.concurrentRequestLimit),this.Da=new OM,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Vb.prototype,t.la=8,t.G=1,t.connect=function(d,g,b,N){Vt(0),this.W=d,this.H=g||{},b&&N!==void 0&&(this.H.OSID=b,this.H.OAID=N),this.F=this.X,this.I=Kb(this,null,this.W),td(this)};function lg(d){if(Fb(d),d.G==3){var g=d.U++,b=mi(d.I);if(Qe(b,"SID",d.K),Qe(b,"RID",g),Qe(b,"TYPE","terminate"),cc(d,b),g=new De(d,d.j,g),g.L=2,g.v=Qh(mi(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!b&&a.Image&&(new Image().src=g.v,b=!0),b||(g.g=Gb(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Kh(g)}qb(d)}function ed(d){d.g&&(ug(d),d.g.cancel(),d.g=null)}function Fb(d){ed(d),d.u&&(a.clearTimeout(d.u),d.u=null),nd(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function td(d){if(!xb(d.h)&&!d.s){d.s=!0;var g=d.Ga;Z||J(),B||(Z(),B=!0),Q.add(g,d),d.B=0}}function BM(d,g){return wb(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=pi(p(d.Ga,d,g),Hb(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const L=new De(this,this.j,d);let F=this.o;if(this.S&&(F?(F=T(F),C(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var N=this.i[b];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(g+=N,4096<g){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=Bb(this,L,g),b=mi(this.I),Qe(b,"RID",d),Qe(b,"CVER",22),this.D&&Qe(b,"X-HTTP-Session-Id",this.D),cc(this,b),F&&(this.O?g="headers="+encodeURIComponent(String(Nb(F)))+"&"+g:this.m&&ag(b,this.m,F)),og(this.h,L),this.Ua&&Qe(b,"TYPE","init"),this.P?(Qe(b,"$req",g),Qe(b,"SID","null"),L.T=!0,co(L,b,null)):co(L,b,g),this.G=2}}else this.G==3&&(d?Ub(this,d):this.i.length==0||xb(this.h)||Ub(this))};function Ub(d,g){var b;g?b=g.l:b=d.U++;const N=mi(d.I);Qe(N,"SID",d.K),Qe(N,"RID",b),Qe(N,"AID",d.T),cc(d,N),d.m&&d.o&&ag(N,d.m,d.o),b=new De(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),g&&(d.i=g.D.concat(d.i)),g=Bb(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),og(d.h,b),co(b,N,g)}function cc(d,g){d.H&&M(d.H,function(b,N){Qe(g,N,b)}),d.l&&Sb({},function(b,N){Qe(g,N,b)})}function Bb(d,g,b){b=Math.min(d.i.length,b);var N=d.l?p(d.l.Na,d.l,d):null;e:{var L=d.i;let F=-1;for(;;){const X=["count="+b];F==-1?0<b?(F=L[0].g,X.push("ofs="+F)):F=0:X.push("ofs="+F);let He=!0;for(let Ht=0;Ht<b;Ht++){let Re=L[Ht].g;const sn=L[Ht].map;if(Re-=F,0>Re)F=Math.max(0,L[Ht].g-100),He=!1;else try{LM(sn,X,"req"+Re+"_")}catch{N&&N(sn)}}if(He){N=X.join("&");break e}}}return d=d.i.splice(0,b),g.D=d,N}function zb(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;Z||J(),B||(Z(),B=!0),Q.add(g,d),d.v=0}}function cg(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=pi(p(d.Fa,d),Hb(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,$b(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=pi(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vt(10),ed(this),$b(this))};function ug(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function $b(d){d.g=new De(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=mi(d.qa);Qe(g,"RID","rpc"),Qe(g,"SID",d.K),Qe(g,"AID",d.T),Qe(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&Qe(g,"TO",d.ja),Qe(g,"TYPE","xmlhttp"),cc(d,g),d.m&&d.o&&ag(g,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=Qh(mi(g)),b.m=null,b.P=!0,Hh(b,d)}t.Za=function(){this.C!=null&&(this.C=null,ed(this),cg(this),Vt(19))};function nd(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function Wb(d,g){var b=null;if(d.g==g){nd(d),ug(d),d.g=null;var N=2}else if(sg(d.h,g))b=g.D,bb(d.h,g),N=1;else return;if(d.G!=0){if(g.o)if(N==1){b=g.m?g.m.length:0,g=Date.now()-g.F;var L=d.B;N=ze(),de(N,new Xl(N,b)),td(d)}else zb(d);else if(L=g.s,L==3||L==0&&0<g.X||!(N==1&&BM(d,g)||N==2&&cg(d)))switch(b&&0<b.length&&(g=d.h,g.i=g.i.concat(b)),L){case 1:fo(d,5);break;case 4:fo(d,10);break;case 3:fo(d,6);break;default:fo(d,2)}}}function Hb(d,g){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*g}function fo(d,g){if(d.j.info("Error code "+g),g==2){var b=p(d.fb,d),N=d.Xa;const L=!N;N=new ho(N||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Gh(N,"https"),Qh(N),L?jM(N.toString(),b):MM(N.toString(),b)}else Vt(2);d.G=0,d.l&&d.l.sa(g),qb(d),Fb(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function qb(d){if(d.G=0,d.ka=[],d.l){const g=Tb(d.h);(g.length!=0||d.i.length!=0)&&(x(d.ka,g),x(d.ka,d.i),d.h.i.length=0,_(d.i),d.i.length=0),d.l.ra()}}function Kb(d,g,b){var N=b instanceof ho?mi(b):new ho(b);if(N.g!="")g&&(N.g=g+"."+N.g),Yh(N,N.s);else{var L=a.location;N=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var F=new ho(null);N&&Gh(F,N),g&&(F.g=g),L&&Yh(F,L),b&&(F.l=b),N=F}return b=d.D,g=d.ya,b&&g&&Qe(N,b,g),Qe(N,"VER",d.la),cc(d,N),N}function Gb(d,g,b){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new gt(new Xh({eb:b})):new gt(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yb(){}t=Yb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function rd(){}rd.prototype.g=function(d,g){return new Kn(d,g)};function Kn(d,g){te.call(this),this.g=new Vb(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!w(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new wa(this)}y(Kn,te),Kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){lg(this.g)},Kn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=ro(d),d=b);g.i.push(new SM(g.Ya++,d)),g.G==3&&td(g)},Kn.prototype.N=function(){this.g.l=null,delete this.j,lg(this.g),delete this.g,Kn.aa.N.call(this)};function Qb(d){va.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const b in g){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}y(Qb,va);function Xb(){Lt.call(this),this.status=1}y(Xb,Lt);function wa(d){this.g=d}y(wa,Yb),wa.prototype.ua=function(){de(this.g,"a")},wa.prototype.ta=function(d){de(this.g,new Qb(d))},wa.prototype.sa=function(d){de(this.g,new Xb)},wa.prototype.ra=function(){de(this.g,"b")},rd.prototype.createWebChannel=rd.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,CR=function(){return new rd},kR=function(){return ze()},ER=mt,Uv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lo.NO_ERROR=0,lo.TIMEOUT=8,lo.HTTP_ERROR=6,gf=lo,Wh.COMPLETE="complete",SR=Wh,Ql.EventType=so,so.OPEN="a",so.CLOSE="b",so.ERROR="c",so.MESSAGE="d",te.prototype.listen=te.prototype.K,Mc=Ql,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,TR=gt}).apply(typeof Td<"u"?Td:typeof self<"u"?self:typeof window<"u"?window:{});const HS="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new W_("@firebase/firestore");function vc(){return Qo.logLevel}function se(t,...e){if(Qo.logLevel<=ke.DEBUG){const n=e.map(rx);Qo.debug(`Firestore (${Fl}): ${t}`,...n)}}function $i(t,...e){if(Qo.logLevel<=ke.ERROR){const n=e.map(rx);Qo.error(`Firestore (${Fl}): ${t}`,...n)}}function _l(t,...e){if(Qo.logLevel<=ke.WARN){const n=e.map(rx);Qo.warn(`Firestore (${Fl}): ${t}`,...n)}}function rx(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(t="Unexpected state"){const e=`FIRESTORE (${Fl}) INTERNAL ASSERTION FAILED: `+t;throw $i(e),new Error(e)}function Fe(t,e){t||pe()}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends ci{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pB{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(fn.UNAUTHENTICATED))}shutdown(){}}class mB{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gB{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ni,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ni)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string"),new IR(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new fn(e)}}class yB{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vB{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new yB(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _B{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xB{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Fe(this.o===void 0);const r=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string"),this.R=n.token,new _B(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wB(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=wB(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ne(t,e){return t<e?-1:t>e?1:0}function xl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ot.fromMillis(Date.now())}static fromDate(e){return Ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ot(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Ot(0,0))}static max(){return new ge(new Ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n,r){n===void 0?n=0:n>e.length&&pe(),r===void 0?r=e.length-n:r>e.length-n&&pe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Uu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Uu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ge extends Uu{construct(e,n,r){return new Ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ge(n)}static emptyPath(){return new Ge([])}}const bB=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Uu{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return bB.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ne(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(Ge.fromString(e))}static fromName(e){return new ae(Ge.fromString(e).popFirst(5))}static empty(){return new ae(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new Ge(e.slice()))}}function TB(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new Ot(n+1,0):new Ot(n,r));return new Us(i,ae.empty(),e)}function SB(t){return new Us(t.readTime,t.key,-1)}class Us{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Us(ge.min(),ae.empty(),-1)}static max(){return new Us(ge.max(),ae.empty(),-1)}}function EB(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kB="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==kB)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(i=>i?H.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new H((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new H((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function IB(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xh(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ix.oe=-1;function fm(t){return t==null}function dp(t){return t===0&&1/t==-1/0}function AB(t){return typeof t=="number"&&Number.isInteger(t)&&!dp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function oa(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n){this.comparator=e,this.root=n||Yt.EMPTY}insert(e,n){return new ft(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sd(this.root,e,this.comparator,!0)}}class Sd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Yt.RED,this.left=i??Yt.EMPTY,this.right=s??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Yt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Yt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw pe();const e=this.left.check();if(e!==this.right.check())throw pe();return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw pe()}get value(){throw pe()}get color(){throw pe()}get left(){throw pe()}get right(){throw pe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Yt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new KS(this.data.getIterator())}getIteratorFrom(e){return new KS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Zt(this.comparator);return n.data=e,n}}class KS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Xn([])}unionWith(e){let n=new Zt(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new RR("Invalid base64 string: "+s):s}}(e);return new tn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const PB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(t){if(Fe(!!t),typeof t=="string"){let e=0;const n=PB.exec(t);if(Fe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(t.seconds),nanos:xt(t.nanos)}}function xt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xo(t){return typeof t=="string"?tn.fromBase64String(t):tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ox(t){const e=t.mapValue.fields.__previous_value__;return sx(e)?ox(e):e}function Bu(t){const e=Bs(t.mapValue.fields.__local_write_time__.timestampValue);return new Ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class zu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new zu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof zu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed={mapValue:{}};function Jo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sx(t)?4:DB(t)?9007199254740991:NB(t)?10:11:pe()}function oi(t,e){if(t===e)return!0;const n=Jo(t);if(n!==Jo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bu(t).isEqual(Bu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Bs(i.timestampValue),a=Bs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Xo(i.bytesValue).isEqual(Xo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return xt(i.geoPointValue.latitude)===xt(s.geoPointValue.latitude)&&xt(i.geoPointValue.longitude)===xt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return xt(i.integerValue)===xt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=xt(i.doubleValue),a=xt(s.doubleValue);return o===a?dp(o)===dp(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return xl(t.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(qS(o)!==qS(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!oi(o[l],a[l])))return!1;return!0}(t,e);default:return pe()}}function $u(t,e){return(t.values||[]).find(n=>oi(n,e))!==void 0}function wl(t,e){if(t===e)return 0;const n=Jo(t),r=Jo(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=xt(s.integerValue||s.doubleValue),l=xt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return GS(t.timestampValue,e.timestampValue);case 4:return GS(Bu(t),Bu(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Xo(s),l=Xo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Ne(a[c],l[c]);if(u!==0)return u}return Ne(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ne(xt(s.latitude),xt(o.latitude));return a!==0?a:Ne(xt(s.longitude),xt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return YS(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const f=s.fields||{},p=o.fields||{},m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,_=Ne(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0);return _!==0?_:YS(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ed.mapValue&&o===Ed.mapValue)return 0;if(s===Ed.mapValue)return 1;if(o===Ed.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=Ne(l[f],u[f]);if(p!==0)return p;const m=wl(a[l[f]],c[u[f]]);if(m!==0)return m}return Ne(l.length,u.length)}(t.mapValue,e.mapValue);default:throw pe()}}function GS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=Bs(t),r=Bs(e),i=Ne(n.seconds,r.seconds);return i!==0?i:Ne(n.nanos,r.nanos)}function YS(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=wl(n[i],r[i]);if(s)return s}return Ne(n.length,r.length)}function bl(t){return Bv(t)}function Bv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Bs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Bv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Bv(n.fields[o])}`;return i+"}"}(t.mapValue):pe()}function QS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function zv(t){return!!t&&"integerValue"in t}function ax(t){return!!t&&"arrayValue"in t}function XS(t){return!!t&&"nullValue"in t}function JS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yf(t){return!!t&&"mapValue"in t}function NB(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ru(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return oa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ru(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ru(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DB(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ru(n)}setAll(e){let n=Qt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ru(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());yf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];yf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){oa(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ln(ru(this.value))}}function NR(t){const e=[];return oa(t.fields,(n,r)=>{const i=new Qt([n]);if(yf(r)){const s=NR(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mn(e,0,ge.min(),ge.min(),ge.min(),Ln.empty(),0)}static newFoundDocument(e,n,r,i){return new mn(e,1,n,ge.min(),r,i,0)}static newNoDocument(e,n){return new mn(e,2,n,ge.min(),ge.min(),Ln.empty(),0)}static newUnknownDocument(e,n){return new mn(e,3,n,ge.min(),ge.min(),Ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(e,n){this.position=e,this.inclusive=n}}function ZS(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ae.comparator(ae.fromName(o.referenceValue),n.key):r=wl(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function eE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!oi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n="asc"){this.field=e,this.dir=n}}function jB(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{}class Pt extends DR{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new OB(e,n,r):n==="array-contains"?new FB(e,r):n==="in"?new UB(e,r):n==="not-in"?new BB(e,r):n==="array-contains-any"?new zB(e,r):new Pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new LB(e,r):new VB(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(wl(n,this.value)):n!==null&&Jo(this.value)===Jo(n)&&this.matchesComparison(wl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class jr extends DR{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new jr(e,n)}matches(e){return jR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function jR(t){return t.op==="and"}function MR(t){return MB(t)&&jR(t)}function MB(t){for(const e of t.filters)if(e instanceof jr)return!1;return!0}function $v(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+bl(t.value);if(MR(t))return t.filters.map(e=>$v(e)).join(",");{const e=t.filters.map(n=>$v(n)).join(",");return`${t.op}(${e})`}}function OR(t,e){return t instanceof Pt?function(r,i){return i instanceof Pt&&r.op===i.op&&r.field.isEqual(i.field)&&oi(r.value,i.value)}(t,e):t instanceof jr?function(r,i){return i instanceof jr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&OR(o,i.filters[a]),!0):!1}(t,e):void pe()}function LR(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${bl(n.value)}`}(t):t instanceof jr?function(n){return n.op.toString()+" {"+n.getFilters().map(LR).join(" ,")+"}"}(t):"Filter"}class OB extends Pt{constructor(e,n,r){super(e,n,r),this.key=ae.fromName(r.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class LB extends Pt{constructor(e,n){super(e,"in",n),this.keys=VR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VB extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=VR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function VR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ae.fromName(r.referenceValue))}class FB extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ax(n)&&$u(n.arrayValue,this.value)}}class UB extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$u(this.value.arrayValue,n)}}class BB extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if($u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!$u(this.value.arrayValue,n)}}class zB extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ax(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$u(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function tE(t,e=null,n=[],r=[],i=null,s=null,o=null){return new $B(t,e,n,r,i,s,o)}function lx(t){const e=ye(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$v(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),fm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>bl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>bl(r)).join(",")),e.ue=n}return e.ue}function cx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jB(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!eE(t.startAt,e.startAt)&&eE(t.endAt,e.endAt)}function Wv(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function WB(t,e,n,r,i,s,o,a){return new aa(t,e,n,r,i,s,o,a)}function pm(t){return new aa(t)}function nE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function FR(t){return t.collectionGroup!==null}function iu(t){const e=ye(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Zt(Qt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Wu(s,r))}),n.has(Qt.keyField().canonicalString())||e.ce.push(new Wu(Qt.keyField(),r))}return e.ce}function ti(t){const e=ye(t);return e.le||(e.le=HB(e,iu(t))),e.le}function HB(t,e){if(t.limitType==="F")return tE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Wu(i.field,s)});const n=t.endAt?new fp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fp(t.startAt.position,t.startAt.inclusive):null;return tE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Hv(t,e){const n=t.filters.concat([e]);return new aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pp(t,e,n){return new aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mm(t,e){return cx(ti(t),ti(e))&&t.limitType===e.limitType}function UR(t){return`${lx(ti(t))}|lt:${t.limitType}`}function Ca(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>LR(i)).join(", ")}]`),fm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>bl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>bl(i)).join(",")),`Target(${r})`}(ti(t))}; limitType=${t.limitType})`}function gm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ae.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of iu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=ZS(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,iu(r),i)||r.endAt&&!function(o,a,l){const c=ZS(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,iu(r),i))}(t,e)}function qB(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BR(t){return(e,n)=>{let r=!1;for(const i of iu(t)){const s=KB(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function KB(t,e,n){const r=t.field.isKeyField()?ae.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?wl(l,c):pe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){oa(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return PR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GB=new ft(ae.comparator);function Wi(){return GB}const zR=new ft(ae.comparator);function Oc(...t){let e=zR;for(const n of t)e=e.insert(n.key,n);return e}function $R(t){let e=zR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Po(){return su()}function WR(){return su()}function su(){return new Ul(t=>t.toString(),(t,e)=>t.isEqual(e))}const YB=new ft(ae.comparator),QB=new Zt(ae.comparator);function Ee(...t){let e=QB;for(const n of t)e=e.add(n);return e}const XB=new Zt(Ne);function JB(){return XB}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dp(e)?"-0":e}}function HR(t){return{integerValue:""+t}}function ZB(t,e){return AB(e)?HR(e):ux(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(){this._=void 0}}function ez(t,e,n){return t instanceof Hu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&sx(s)&&(s=ox(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof qu?KR(t,e):t instanceof Ku?GR(t,e):function(i,s){const o=qR(i,s),a=rE(o)+rE(i.Pe);return zv(o)&&zv(i.Pe)?HR(a):ux(i.serializer,a)}(t,e)}function tz(t,e,n){return t instanceof qu?KR(t,e):t instanceof Ku?GR(t,e):n}function qR(t,e){return t instanceof mp?function(r){return zv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Hu extends ym{}class qu extends ym{constructor(e){super(),this.elements=e}}function KR(t,e){const n=YR(e);for(const r of t.elements)n.some(i=>oi(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ku extends ym{constructor(e){super(),this.elements=e}}function GR(t,e){let n=YR(e);for(const r of t.elements)n=n.filter(i=>!oi(i,r));return{arrayValue:{values:n}}}class mp extends ym{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function rE(t){return xt(t.integerValue||t.doubleValue)}function YR(t){return ax(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e,n){this.field=e,this.transform=n}}function rz(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof qu&&i instanceof qu||r instanceof Ku&&i instanceof Ku?xl(r.elements,i.elements,oi):r instanceof mp&&i instanceof mp?oi(r.Pe,i.Pe):r instanceof Hu&&i instanceof Hu}(t.transform,e.transform)}class iz{constructor(e,n){this.version=e,this.transformResults=n}}class In{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new In}static exists(e){return new In(void 0,e)}static updateTime(e){return new In(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class vm{}function QR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _m(t.key,In.none()):new wh(t.key,t.data,In.none());{const n=t.data,r=Ln.empty();let i=new Zt(Qt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Xs(t.key,r,new Xn(i.toArray()),In.none())}}function sz(t,e,n){t instanceof wh?function(i,s,o){const a=i.value.clone(),l=sE(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Xs?function(i,s,o){if(!vf(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=sE(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(XR(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ou(t,e,n,r){return t instanceof wh?function(s,o,a,l){if(!vf(s.precondition,o))return a;const c=s.value.clone(),u=oE(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xs?function(s,o,a,l){if(!vf(s.precondition,o))return a;const c=oE(s.fieldTransforms,l,o),u=o.data;return u.setAll(XR(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return vf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function oz(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=qR(r.transform,i||null);s!=null&&(n===null&&(n=Ln.empty()),n.set(r.field,s))}return n||null}function iE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xl(r,i,(s,o)=>rz(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class wh extends vm{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Xs extends vm{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function XR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function sE(t,e,n){const r=new Map;Fe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,tz(o,a,n[i]))}return r}function oE(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,ez(s,o,e))}return r}class _m extends vm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class az extends vm{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lz{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&sz(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ou(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ou(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=WR();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=QR(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&xl(this.mutations,e.mutations,(n,r)=>iE(n,r))&&xl(this.baseMutations,e.baseMutations,(n,r)=>iE(n,r))}}class hx{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Fe(e.mutations.length===r.length);let i=function(){return YB}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new hx(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Ie;function hz(t){switch(t){default:return pe();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function JR(t){if(t===void 0)return $i("GRPC error has no .code"),z.UNKNOWN;switch(t){case Ct.OK:return z.OK;case Ct.CANCELLED:return z.CANCELLED;case Ct.UNKNOWN:return z.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return z.INTERNAL;case Ct.UNAVAILABLE:return z.UNAVAILABLE;case Ct.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Ct.NOT_FOUND:return z.NOT_FOUND;case Ct.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Ct.ABORTED:return z.ABORTED;case Ct.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Ct.DATA_LOSS:return z.DATA_LOSS;default:return pe()}}(Ie=Ct||(Ct={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dz(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz=new Lo([4294967295,4294967295],0);function aE(t){const e=dz().encode(t),n=new bR;return n.update(e),new Uint8Array(n.digest())}function lE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Lo([n,r],0),new Lo([i,s],0)]}class dx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Lc(`Invalid padding: ${n}`);if(r<0)throw new Lc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Lc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Lc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Lo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Lo.fromNumber(r)));return i.compare(fz)===1&&(i=new Lo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=aE(e),[r,i]=lE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new dx(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=aE(e),[r,i]=lE(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,bh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new xm(ge.min(),i,new ft(Ne),Wi(),Ee())}}class bh{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bh(r,n,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class ZR{constructor(e,n){this.targetId=e,this.me=n}}class eN{constructor(e,n,r=tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class cE{constructor(){this.fe=0,this.ge=hE(),this.pe=tn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ee(),n=Ee(),r=Ee();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:pe()}}),new bh(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=hE()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class pz{constructor(e){this.Le=e,this.Be=new Map,this.ke=Wi(),this.qe=uE(),this.Qe=new ft(Ne)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:pe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Wv(s))if(r===0){const o=new ae(s.path);this.Ue(n,o,mn.newNoDocument(o,ge.min()))}else Fe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Xo(r).toUint8Array()}catch(l){if(l instanceof RR)return _l("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new dx(o,i,s)}catch(l){return _l(l instanceof Lc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Wv(a.target)){const l=new ae(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,mn.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Ee();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new xm(e,n,this.Qe,this.ke,r);return this.ke=Wi(),this.qe=uE(),this.Qe=new ft(Ne),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new cE,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Zt(Ne),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cE),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function uE(){return new ft(ae.comparator)}function hE(){return new ft(ae.comparator)}const mz={asc:"ASCENDING",desc:"DESCENDING"},gz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yz={and:"AND",or:"OR"};class vz{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qv(t,e){return t.useProto3Json||fm(e)?e:{value:e}}function gp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function _z(t,e){return gp(t,e.toTimestamp())}function ni(t){return Fe(!!t),ge.fromTimestamp(function(n){const r=Bs(n);return new Ot(r.seconds,r.nanos)}(t))}function fx(t,e){return Kv(t,e).canonicalString()}function Kv(t,e){const n=function(i){return new Ge(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nN(t){const e=Ge.fromString(t);return Fe(aN(e)),e}function Gv(t,e){return fx(t.databaseId,e.path)}function qg(t,e){const n=nN(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(iN(n))}function rN(t,e){return fx(t.databaseId,e)}function xz(t){const e=nN(t);return e.length===4?Ge.emptyPath():iN(e)}function Yv(t){return new Ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iN(t){return Fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function dE(t,e,n){return{name:Gv(t,e),fields:n.value.mapValue.fields}}function wz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Fe(u===void 0||typeof u=="string"),tn.fromBase64String(u||"")):(Fe(u===void 0||u instanceof Buffer||u instanceof Uint8Array),tn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?z.UNKNOWN:JR(c.code);return new ne(u,c.message||"")}(o);n=new eN(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=qg(t,r.document.name),s=ni(r.document.updateTime),o=r.document.createTime?ni(r.document.createTime):ge.min(),a=new Ln({mapValue:{fields:r.document.fields}}),l=mn.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new _f(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=qg(t,r.document),s=r.readTime?ni(r.readTime):ge.min(),o=mn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new _f([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=qg(t,r.document),s=r.removedTargetIds||[];n=new _f([],s,i,null)}else{if(!("filter"in e))return pe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new uz(i,s),a=r.targetId;n=new ZR(a,o)}}return n}function bz(t,e){let n;if(e instanceof wh)n={update:dE(t,e.key,e.value)};else if(e instanceof _m)n={delete:Gv(t,e.key)};else if(e instanceof Xs)n={update:dE(t,e.key,e.data),updateMask:Rz(e.fieldMask)};else{if(!(e instanceof az))return pe();n={verify:Gv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Hu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof qu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ku)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof mp)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw pe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:_z(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:pe()}(t,e.precondition)),n}function Tz(t,e){return t&&t.length>0?(Fe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ni(i.updateTime):ni(s);return o.isEqual(ge.min())&&(o=ni(s)),new iz(o,i.transformResults||[])}(n,e))):[]}function Sz(t,e){return{documents:[rN(t,e.path)]}}function Ez(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rN(t,i);const s=function(c){if(c.length!==0)return oN(jr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:Ia(p.field),direction:Iz(p.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=qv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function kz(t){let e=xz(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Fe(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(f){const p=sN(f);return p instanceof jr&&MR(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(y){return new Wu(Aa(y.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,fm(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new fp(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new fp(m,p)}(n.endAt)),WB(e,i,o,s,a,"F",l,c)}function Cz(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Aa(n.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Aa(n.unaryFilter.field);return Pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Aa(n.unaryFilter.field);return Pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Aa(n.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return pe()}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(Aa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return pe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return jr.create(n.compositeFilter.filters.map(r=>sN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return pe()}}(n.compositeFilter.op))}(t):pe()}function Iz(t){return mz[t]}function Az(t){return gz[t]}function Pz(t){return yz[t]}function Ia(t){return{fieldPath:t.canonicalString()}}function Aa(t){return Qt.fromServerFormat(t.fieldPath)}function oN(t){return t instanceof Pt?function(n){if(n.op==="=="){if(JS(n.value))return{unaryFilter:{field:Ia(n.field),op:"IS_NAN"}};if(XS(n.value))return{unaryFilter:{field:Ia(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(JS(n.value))return{unaryFilter:{field:Ia(n.field),op:"IS_NOT_NAN"}};if(XS(n.value))return{unaryFilter:{field:Ia(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ia(n.field),op:Az(n.op),value:n.value}}}(t):t instanceof jr?function(n){const r=n.getFilters().map(i=>oN(i));return r.length===1?r[0]:{compositeFilter:{op:Pz(n.op),filters:r}}}(t):pe()}function Rz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function aN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n,r,i,s=ge.min(),o=ge.min(),a=tn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nz{constructor(e){this.ct=e}}function Dz(t){const e=kz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jz{constructor(){this.un=new Mz}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(Us.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(Us.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class Mz{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Zt(Ge.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Zt(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Tl(0)}static kn(){return new Tl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oz{constructor(){this.changes=new Ul(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vz{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ou(r.mutation,i,Xn.empty(),Ot.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const i=Po();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Oc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Po();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Wi();const o=su(),a=function(){return su()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Xs)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),ou(u.mutation,c,u.mutation.getFieldMask(),Ot.now())):o.set(c.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new Lz(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=su();let i=new ft((o,a)=>o-a),s=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Xn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(i.get(a.batchId)||Ee()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=WR();u.forEach(p=>{if(!s.has(p)){const m=QR(n.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ae.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):H.resolve(Po());let a=-1,l=s;return o.next(c=>H.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?H.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Ee())).next(u=>({batchId:a,changes:$R(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(r=>{let i=Oc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Oc();return this.indexManager.getCollectionParents(e,s).next(a=>H.forEach(a,l=>{const c=function(f,p){return new aa(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,mn.newInvalidDocument(u)))});let a=Oc();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&ou(u.mutation,c,Xn.empty(),Ot.now()),gm(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ni(i.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Dz(i.bundledQuery),readTime:ni(i.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{constructor(){this.overlays=new ft(ae.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Po();return H.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const i=Po(),s=n.length+1,o=new ae(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return H.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ft((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=Po(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Po(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return H.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new cz(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ee(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.Tr=new Zt(Ut.Er),this.dr=new Zt(Ut.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ut(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ut(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ae(new Ge([])),r=new Ut(n,e),i=new Ut(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ae(new Ge([])),r=new Ut(n,e),i=new Ut(n,e+1);let s=Ee();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ut(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ut{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ae.comparator(e.key,n.key)||Ne(e.wr,n.wr)}static Ar(e,n){return Ne(e.wr,n.wr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zz{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Zt(Ut.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new lz(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Ut(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return H.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ut(n,0),i=new Ut(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),H.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Zt(Ne);return n.forEach(i=>{const s=new Ut(i,0),o=new Ut(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),H.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ae.isDocumentKey(s)||(s=s.child(""));const o=new Ut(new ae(s),0);let a=new Zt(Ne);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),H.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return H.forEach(n.mutations,i=>{const s=new Ut(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ut(n,0),i=this.br.firstAfterOrEqual(r);return H.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $z{constructor(e){this.Mr=e,this.docs=function(){return new ft(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():mn.newInvalidDocument(n))}getEntries(e,n){let r=Wi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():mn.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Wi();const o=n.path,a=new ae(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||EB(SB(u),r)<=0||(i.has(u.key)||gm(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return H.resolve(s)}getAllFromCollectionGroup(e,n,r,i){pe()}Or(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Wz(this)}getSize(e){return H.resolve(this.size)}}class Wz extends Oz{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(e){this.persistence=e,this.Nr=new Ul(n=>lx(n),cx),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Lr=0,this.Br=new px,this.targetCount=0,this.kr=Tl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Tl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(s).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),H.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qz{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ix(0),this.Kr=!1,this.Kr=!0,this.$r=new Bz,this.referenceDelegate=e(this),this.Ur=new Hz(this),this.indexManager=new jz,this.remoteDocumentCache=function(i){return new $z(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Nz(n),this.Gr=new Fz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Uz,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new zz(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const i=new Kz(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return H.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Kz extends CB{constructor(e){super(),this.currentSequenceNumber=e}}class mx{constructor(e){this.persistence=e,this.Jr=new px,this.Yr=null}static Zr(e){return new mx(e)}get Xr(){if(this.Yr)return this.Yr;throw pe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,r=>{const i=ae.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ge.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ee(),i=Ee();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new gx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return OF()?8:IB(wn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Gz;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(vc()<=ke.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Ca(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(vc()<=ke.DEBUG&&se("QueryEngine","Query:",Ca(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(vc()<=ke.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Ca(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(n))):H.resolve())}Yi(e,n){if(nE(n))return H.resolve(null);let r=ti(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=pp(n,null,"F"),r=ti(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ee(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,pp(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return nE(n)||i.isEqual(ge.min())?H.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?H.resolve(null):(vc()<=ke.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ca(n)),this.rs(e,o,n,TB(i,-1)).next(a=>a))})}ts(e,n){let r=new Zt(BR(e));return n.forEach((i,s)=>{gm(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return vc()<=ke.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Ca(n)),this.Ji.getDocumentsMatchingQuery(e,n,Us.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qz{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new ft(Ne),this._s=new Ul(s=>lx(s),cx),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Vz(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Xz(t,e,n,r){return new Qz(t,e,n,r)}async function lN(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ee();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Jz(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,p=f.keys();let m=H.resolve();return p.forEach(y=>{m=m.next(()=>u.getEntry(l,y)).next(_=>{const x=c.docVersions.get(y);Fe(x!==null),_.version.compareTo(x)<0&&(f.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ee();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function cN(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Zz(t,e){const n=ye(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((u,f)=>{const p=i.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,u.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,u.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(tn.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(f,m),function(_,x,v){return _.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(p,m,u)&&a.push(n.Ur.updateTargetData(s,m))});let l=Wi(),c=Ee();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(e3(s,o,e.documentUpdates).next(u=>{l=u.Ps,c=u.Is})),!r.isEqual(ge.min())){const u=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return H.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function e3(t,e,n){let r=Ee(),i=Ee();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Wi();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ge.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):se("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function t3(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function n3(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,H.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new vs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Qv(t,e,n){const r=ye(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!xh(o))throw o;se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function fE(t,e,n){const r=ye(t);let i=ge.min(),s=Ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=ye(l),p=f._s.get(u);return p!==void 0?H.resolve(f.os.get(p)):f.Ur.getTargetData(c,u)}(r,o,ti(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ge.min(),n?s:Ee())).next(a=>(r3(r,qB(e),a),{documents:a,Ts:s})))}function r3(t,e,n){let r=t.us.get(e)||ge.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class pE{constructor(){this.activeTargetIds=JB()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class i3{constructor(){this.so=new pE,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new pE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s3{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kd=null;function Kg(){return kd===null?kd=function(){return 268435456+Math.round(2147483648*Math.random())}():kd++,"0x"+kd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class l3 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Kg(),l=this.xo(n,r.toUriEncodedString());se("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(u=>(se("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw _l("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Fl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=o3[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Kg();return new Promise((o,a)=>{const l=new TR;l.setWithCredentials(!0),l.listenOnce(SR.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gf.NO_ERROR:const u=l.getResponseJson();se(cn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case gf.TIMEOUT:se(cn,`RPC '${e}' ${s} timed out`),a(new ne(z.DEADLINE_EXCEEDED,"Request time out"));break;case gf.HTTP_ERROR:const f=l.getStatus();if(se(cn,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(x){const v=x.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(v)>=0?v:z.UNKNOWN}(m.status);a(new ne(y,m.message))}else a(new ne(z.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ne(z.UNAVAILABLE,"Connection failed."));break;default:pe()}}finally{se(cn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);se(cn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Kg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=CR(),a=kR(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");se(cn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const f=o.createWebChannel(u,l);let p=!1,m=!1;const y=new a3({Io:x=>{m?se(cn,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(p||(se(cn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),se(cn,`RPC '${e}' stream ${i} sending:`,x),f.send(x))},To:()=>f.close()}),_=(x,v,w)=>{x.listen(v,S=>{try{w(S)}catch(P){setTimeout(()=>{throw P},0)}})};return _(f,Mc.EventType.OPEN,()=>{m||(se(cn,`RPC '${e}' stream ${i} transport opened.`),y.yo())}),_(f,Mc.EventType.CLOSE,()=>{m||(m=!0,se(cn,`RPC '${e}' stream ${i} transport closed`),y.So())}),_(f,Mc.EventType.ERROR,x=>{m||(m=!0,_l(cn,`RPC '${e}' stream ${i} transport errored:`,x),y.So(new ne(z.UNAVAILABLE,"The operation could not be completed")))}),_(f,Mc.EventType.MESSAGE,x=>{var v;if(!m){const w=x.data[0];Fe(!!w);const S=w,P=S.error||((v=S[0])===null||v===void 0?void 0:v.error);if(P){se(cn,`RPC '${e}' stream ${i} received error:`,P);const I=P.status;let M=function(E){const C=Ct[E];if(C!==void 0)return JR(C)}(I),k=P.message;M===void 0&&(M=z.INTERNAL,k="Unknown error status: "+I+" with message "+P.message),m=!0,y.So(new ne(M,k)),f.close()}else se(cn,`RPC '${e}' stream ${i} received:`,w),y.bo(w)}}),_(a,ER.STAT_EVENT,x=>{x.stat===Uv.PROXY?se(cn,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Uv.NOPROXY&&se(cn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.wo()},0),y}}function Gg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t){return new vz(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new uN(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===z.RESOURCE_EXHAUSTED?($i(n.toString()),$i("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ne(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c3 extends hN{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=wz(this.serializer,e),r=function(s){if(!("targetChange"in s))return ge.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?ni(o.readTime):ge.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Yv(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Wv(l)?{documents:Sz(s,l)}:{query:Ez(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=tN(s,o.resumeToken);const c=qv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=gp(s,o.snapshotVersion.toTimestamp());const c=qv(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Cz(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Yv(this.serializer),n.removeTarget=e,this.a_(n)}}class u3 extends hN{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Tz(e.writeResults,e.commitTime),r=ni(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Yv(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bz(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3 extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ne(z.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Kv(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(z.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Kv(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(z.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class d3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?($i(n),this.D_=!1):se("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{la(this)&&(se("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ye(l);c.L_.add(4),await Th(c),c.q_.set("Unknown"),c.L_.delete(4),await bm(c)}(this))})}),this.q_=new d3(r,i)}}async function bm(t){if(la(t))for(const e of t.B_)await e(!0)}async function Th(t){for(const e of t.B_)await e(!1)}function dN(t,e){const n=ye(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xx(n)?_x(n):Bl(n).r_()&&vx(n,e))}function yx(t,e){const n=ye(t),r=Bl(n);n.N_.delete(e),r.r_()&&fN(n,e),n.N_.size===0&&(r.r_()?r.o_():la(n)&&n.q_.set("Unknown"))}function vx(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bl(t).A_(e)}function fN(t,e){t.Q_.xe(e),Bl(t).R_(e)}function _x(t){t.Q_=new pz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Bl(t).start(),t.q_.v_()}function xx(t){return la(t)&&!Bl(t).n_()&&t.N_.size>0}function la(t){return ye(t).L_.size===0}function pN(t){t.Q_=void 0}async function p3(t){t.q_.set("Online")}async function m3(t){t.N_.forEach((e,n)=>{vx(t,e)})}async function g3(t,e){pN(t),xx(t)?(t.q_.M_(e),_x(t)):t.q_.set("Unknown")}async function y3(t,e,n){if(t.q_.set("Online"),e instanceof eN&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yp(t,r)}else if(e instanceof _f?t.Q_.Ke(e):e instanceof ZR?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ge.min()))try{const r=await cN(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.N_.get(c);u&&s.N_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.N_.get(l);if(!u)return;s.N_.set(l,u.withResumeToken(tn.EMPTY_BYTE_STRING,u.snapshotVersion)),fN(s,l);const f=new vs(u.target,l,c,u.sequenceNumber);vx(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){se("RemoteStore","Failed to raise snapshot:",r),await yp(t,r)}}async function yp(t,e,n){if(!xh(e))throw e;t.L_.add(1),await Th(t),t.q_.set("Offline"),n||(n=()=>cN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await bm(t)})}function mN(t,e){return e().catch(n=>yp(t,n,e))}async function Tm(t){const e=ye(t),n=zs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;v3(e);)try{const i=await t3(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,_3(e,i)}catch(i){await yp(e,i)}gN(e)&&yN(e)}function v3(t){return la(t)&&t.O_.length<10}function _3(t,e){t.O_.push(e);const n=zs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function gN(t){return la(t)&&!zs(t).n_()&&t.O_.length>0}function yN(t){zs(t).start()}async function x3(t){zs(t).p_()}async function w3(t){const e=zs(t);for(const n of t.O_)e.m_(n.mutations)}async function b3(t,e,n){const r=t.O_.shift(),i=hx.from(r,e,n);await mN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Tm(t)}async function T3(t,e){e&&zs(t).V_&&await async function(r,i){if(function(o){return hz(o)&&o!==z.ABORTED}(i.code)){const s=r.O_.shift();zs(r).s_(),await mN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Tm(r)}}(t,e),gN(t)&&yN(t)}async function gE(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),se("RemoteStore","RemoteStore received new credentials");const r=la(n);n.L_.add(3),await Th(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await bm(n)}async function S3(t,e){const n=ye(t);e?(n.L_.delete(2),await bm(n)):e||(n.L_.add(2),await Th(n),n.q_.set("Unknown"))}function Bl(t){return t.K_||(t.K_=function(n,r,i){const s=ye(n);return s.w_(),new c3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:p3.bind(null,t),Ro:m3.bind(null,t),mo:g3.bind(null,t),d_:y3.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),xx(t)?_x(t):t.q_.set("Unknown")):(await t.K_.stop(),pN(t))})),t.K_}function zs(t){return t.U_||(t.U_=function(n,r,i){const s=ye(n);return s.w_(),new u3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:x3.bind(null,t),mo:T3.bind(null,t),f_:w3.bind(null,t),g_:b3.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Tm(t)):(await t.U_.stop(),t.O_.length>0&&(se("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new wx(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bx(t,e){if($i("AsyncQueue",`${e}: ${t}`),xh(t))return new ne(z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ae.comparator(n.key,r.key):(n,r)=>ae.comparator(n.key,r.key),this.keyedMap=Oc(),this.sortedSet=new ft(this.comparator)}static emptySet(e){return new ol(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ol)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ol;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(){this.W_=new ft(ae.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):pe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Sl{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Sl(e,n,ol.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class k3{constructor(){this.queries=vE(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ye(n),s=i.queries;i.queries=vE(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ne(z.ABORTED,"Firestore shutting down"))}}function vE(){return new Ul(t=>UR(t),mm)}async function Tx(t,e){const n=ye(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new E3,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=bx(o,`Initialization of query '${Ca(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Ex(n)}async function Sx(t,e){const n=ye(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function C3(t,e){const n=ye(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Ex(n)}function I3(t,e,n){const r=ye(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Ex(t){t.Y_.forEach(e=>{e.next()})}var Xv,_E;(_E=Xv||(Xv={})).ea="default",_E.Cache="cache";class kx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Sl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Sl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Xv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.key=e}}class _N{constructor(e){this.key=e}}class A3{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ee(),this.mutatedKeys=Ee(),this.Aa=BR(e),this.Ra=new ol(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new yE,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const p=i.get(u),m=gm(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let x=!1;p&&m?p.data.isEqual(m.data)?y!==_&&(r.track({type:3,doc:m}),x=!0):this.ga(p,m)||(r.track({type:2,doc:m}),x=!0,(l&&this.Aa(m,l)>0||c&&this.Aa(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),x=!0):p&&!m&&(r.track({type:1,doc:p}),x=!0,(l||c)&&(a=!0)),x&&(m?(o=o.add(m),s=_?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((u,f)=>function(m,y){const _=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe()}};return _(m)-_(y)}(u.type,f.type)||this.Aa(u.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Sl(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new yE,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ee(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new _N(r))}),this.da.forEach(r=>{e.has(r)||n.push(new vN(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ee();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Sl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class P3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class R3{constructor(e){this.key=e,this.va=!1}}class N3{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ul(a=>UR(a),mm),this.Ma=new Map,this.xa=new Set,this.Oa=new ft(ae.comparator),this.Na=new Map,this.La=new px,this.Ba={},this.ka=new Map,this.qa=Tl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function D3(t,e,n=!0){const r=EN(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await xN(r,e,n,!0),i}async function j3(t,e){const n=EN(t);await xN(n,e,!0,!1)}async function xN(t,e,n,r){const i=await n3(t.localStore,ti(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await M3(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&dN(t.remoteStore,i),a}async function M3(t,e,n,r,i){t.Ka=(f,p,m)=>async function(_,x,v,w){let S=x.view.ma(v);S.ns&&(S=await fE(_.localStore,x.query,!1).then(({documents:k})=>x.view.ma(k,S)));const P=w&&w.targetChanges.get(x.targetId),I=w&&w.targetMismatches.get(x.targetId)!=null,M=x.view.applyChanges(S,_.isPrimaryClient,P,I);return wE(_,x.targetId,M.wa),M.snapshot}(t,f,p,m);const s=await fE(t.localStore,e,!0),o=new A3(e,s.Ts),a=o.ma(s.documents),l=bh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);wE(t,n,c.wa);const u=new P3(e,n,o);return t.Fa.set(e,u),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function O3(t,e,n){const r=ye(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!mm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Qv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&yx(r.remoteStore,i.targetId),Jv(r,i.targetId)}).catch(_h)):(Jv(r,i.targetId),await Qv(r.localStore,i.targetId,!0))}async function L3(t,e){const n=ye(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yx(n.remoteStore,r.targetId))}async function V3(t,e,n){const r=H3(t);try{const i=await function(o,a){const l=ye(o),c=Ot.now(),u=a.reduce((m,y)=>m.add(y.key),Ee());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=Wi(),_=Ee();return l.cs.getEntries(m,u).next(x=>{y=x,y.forEach((v,w)=>{w.isValidDocument()||(_=_.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(x=>{f=x;const v=[];for(const w of a){const S=oz(w,f.get(w.key).overlayedDocument);S!=null&&v.push(new Xs(w.key,S,NR(S.value.mapValue),In.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,v,a)}).next(x=>{p=x;const v=x.applyToLocalDocumentSet(f,_);return l.documentOverlayCache.saveOverlays(m,x.batchId,v)})}).then(()=>({batchId:p.batchId,changes:$R(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new ft(Ne)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Sh(r,i.changes),await Tm(r.remoteStore)}catch(i){const s=bx(i,"Failed to persist write");n.reject(s)}}async function wN(t,e){const n=ye(t);try{const r=await Zz(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Fe(o.va):i.removedDocuments.size>0&&(Fe(o.va),o.va=!1))}),await Sh(n,r,e)}catch(r){await _h(r)}}function xE(t,e,n){const r=ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ye(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.j_)p.Z_(a)&&(c=!0)}),c&&Ex(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function F3(t,e,n){const r=ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new ft(ae.comparator);o=o.insert(s,mn.newNoDocument(s,ge.min()));const a=Ee().add(s),l=new xm(ge.min(),new Map,new ft(Ne),o,a);await wN(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Cx(r)}else await Qv(r.localStore,e,!1).then(()=>Jv(r,e,n)).catch(_h)}async function U3(t,e){const n=ye(t),r=e.batch.batchId;try{const i=await Jz(n.localStore,e);TN(n,r,null),bN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sh(n,i)}catch(i){await _h(i)}}async function B3(t,e,n){const r=ye(t);try{const i=await function(o,a){const l=ye(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Fe(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);TN(r,e,n),bN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Sh(r,i)}catch(i){await _h(i)}}function bN(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function TN(t,e,n){const r=ye(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Jv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||SN(t,r)})}function SN(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(yx(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Cx(t))}function wE(t,e,n){for(const r of n)r instanceof vN?(t.La.addReference(r.key,e),z3(t,r)):r instanceof _N?(se("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||SN(t,r.key)):pe()}function z3(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(se("SyncEngine","New document in limbo: "+n),t.xa.add(r),Cx(t))}function Cx(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ae(Ge.fromString(e)),r=t.qa.next();t.Na.set(r,new R3(n)),t.Oa=t.Oa.insert(n,r),dN(t.remoteStore,new vs(ti(pm(n.path)),r,"TargetPurposeLimboResolution",ix.oe))}}async function Sh(t,e,n){const r=ye(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=gx.Wi(l.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const u=ye(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>H.forEach(c,p=>H.forEach(p.$i,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>H.forEach(p.Ui,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!xh(f))throw f;se("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=u.os.get(p),y=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(y);u.os=u.os.insert(p,_)}}}(r.localStore,s))}async function $3(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){se("SyncEngine","User change. New user:",e.toKey());const r=await lN(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ne(z.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Sh(n,r.hs)}}function W3(t,e){const n=ye(t),r=n.Na.get(e);if(r&&r.va)return Ee().add(r.key);{let i=Ee();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function EN(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=W3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=F3.bind(null,e),e.Ca.d_=C3.bind(null,e.eventManager),e.Ca.$a=I3.bind(null,e.eventManager),e}function H3(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=U3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=B3.bind(null,e),e}class vp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wm(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Xz(this.persistence,new Yz,e.initialUser,this.serializer)}Ga(e){return new qz(mx.Zr,this.serializer)}Wa(e){return new i3}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vp.provider={build:()=>new vp};class Zv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$3.bind(null,this.syncEngine),await S3(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new k3}()}createDatastore(e){const n=wm(e.databaseInfo.databaseId),r=function(s){return new l3(s)}(e.databaseInfo);return function(s,o,a,l){return new h3(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new f3(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>xE(this.syncEngine,n,0),function(){return mE.D()?new mE:new s3}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const f=new N3(i,s,o,a,l,c);return u&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ye(i);se("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Th(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Zv.provider={build:()=>new Zv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):$i("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=fn.UNAUTHENTICATED,this.clientId=AR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{se("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yg(t,e){t.asyncQueue.verifyOperationInProgress(),se("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await lN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function bE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await K3(t);se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>gE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>gE(e.remoteStore,i)),t._onlineComponents=e}async function K3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===z.FAILED_PRECONDITION||i.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;_l("Error using user provided cache. Falling back to memory cache: "+n),await Yg(t,new vp)}}else se("FirestoreClient","Using default OfflineComponentProvider"),await Yg(t,new vp);return t._offlineComponents}async function kN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se("FirestoreClient","Using user provided OnlineComponentProvider"),await bE(t,t._uninitializedComponentsProvider._online)):(se("FirestoreClient","Using default OnlineComponentProvider"),await bE(t,new Zv))),t._onlineComponents}function G3(t){return kN(t).then(e=>e.syncEngine)}async function _p(t){const e=await kN(t),n=e.eventManager;return n.onListen=D3.bind(null,e.syncEngine),n.onUnlisten=O3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=j3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=L3.bind(null,e.syncEngine),n}function Y3(t,e,n={}){const r=new Ni;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new Ix({next:p=>{u.Za(),o.enqueueAndForget(()=>Sx(s,f));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new ne(z.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new ne(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new kx(pm(a.path),u,{includeMetadataChanges:!0,_a:!0});return Tx(s,f)}(await _p(t),t.asyncQueue,e,n,r)),r.promise}function Q3(t,e,n={}){const r=new Ni;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new Ix({next:p=>{u.Za(),o.enqueueAndForget(()=>Sx(s,f)),p.fromCache&&l.source==="server"?c.reject(new ne(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new kx(a,u,{includeMetadataChanges:!0,_a:!0});return Tx(s,f)}(await _p(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(t,e,n){if(!n)throw new ne(z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function X3(t,e,n,r){if(e===!0&&r===!0)throw new ne(z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function SE(t){if(!ae.isDocumentKey(t))throw new ne(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function EE(t){if(ae.isDocumentKey(t))throw new ne(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Sm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":pe()}function vn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sm(t);throw new ne(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function J3(t,e){if(e<=0)throw new ne(z.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}X3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ne(z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eh{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kE({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kE(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pB;switch(r.type){case"firstParty":return new vB(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=TE.get(n);r&&(se("ComponentProvider","Removing Datastore"),TE.delete(n),r.terminate())}(this),Promise.resolve()}}function Z3(t,e,n,r={}){var i;const s=(t=vn(t,Eh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&_l("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=fn.MOCK_USER;else{a=LP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ne(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new fn(c)}t._authCredentials=new mB(new IR(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hi(this.firestore,e,this._query)}}class _n{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _n(this.firestore,e,this._key)}}class Ms extends hi{constructor(e,n,r){super(e,n,pm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _n(this.firestore,null,new ae(e))}withConverter(e){return new Ms(this.firestore,e,this._path)}}function bt(t,e,...n){if(t=We(t),Ax("collection","path",e),t instanceof Eh){const r=Ge.fromString(e,...n);return EE(r),new Ms(t,null,r)}{if(!(t instanceof _n||t instanceof Ms))throw new ne(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return EE(r),new Ms(t.firestore,null,r)}}function au(t,e){if(t=vn(t,Eh),Ax("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ne(z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hi(t,null,function(r){return new aa(Ge.emptyPath(),r)}(e))}function Me(t,e,...n){if(t=We(t),arguments.length===1&&(e=AR.newId()),Ax("doc","path",e),t instanceof Eh){const r=Ge.fromString(e,...n);return SE(r),new _n(t,null,new ae(r))}{if(!(t instanceof _n||t instanceof Ms))throw new ne(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ge.fromString(e,...n));return SE(r),new _n(t.firestore,t instanceof Ms?t.converter:null,new ae(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new uN(this,"async_queue_retry"),this.Vu=()=>{const r=Gg();r&&se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Gg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Gg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ni;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xh(e))throw e;se("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw $i("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=wx.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function IE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class ai extends Eh{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new CE,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new CE(e),this._firestoreClient=void 0,await e}}}function IN(t,e){const n=typeof t=="object"?t:K_(),r=typeof t=="string"?t:"(default)",i=lm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=jP("firestore");s&&Z3(i,...s)}return i}function kh(t){if(t._terminated)throw new ne(z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||e6(t),t._firestoreClient}function e6(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new RB(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,CN(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new q3(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this._byteString=e}static fromBase64String(e){try{return new El(tn.fromBase64String(e))}catch(n){throw new ne(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new El(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6=/^__.*__$/;class n6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new wh(e,this.data,n,this.fieldTransforms)}}class AN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function PN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe()}}class Nx{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Nx(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return xp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(PN(this.Cu)&&t6.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class r6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wm(e)}Qu(e,n,r,i=!1){return new Nx({Cu:e,methodName:n,qu:r,path:Qt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ih(t){const e=t._freezeSettings(),n=wm(t._databaseId);return new r6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Dx(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Mx("Data must be an object, but it was:",o,r);const a=DN(r,o);let l,c;if(s.merge)l=new Xn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const f of s.mergeFields){const p=e0(e,f,n);if(!o.contains(p))throw new ne(z.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);MN(u,p)||u.push(p)}l=new Xn(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new n6(new Ln(a),l,c)}class km extends Em{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof km}}class jx extends Em{_toFieldTransform(e){return new nz(e.path,new Hu)}isEqual(e){return e instanceof jx}}function RN(t,e,n,r){const i=t.Qu(1,e,n);Mx("Data must be an object, but it was:",i,r);const s=[],o=Ln.empty();oa(r,(l,c)=>{const u=Ox(e,l,n);c=We(c);const f=i.Nu(u);if(c instanceof km)s.push(u);else{const p=Ah(c,f);p!=null&&(s.push(u),o.set(u,p))}});const a=new Xn(s);return new AN(o,a,i.fieldTransforms)}function NN(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[e0(e,r,n)],l=[i];if(s.length%2!=0)throw new ne(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(e0(e,s[p])),l.push(s[p+1]);const c=[],u=Ln.empty();for(let p=a.length-1;p>=0;--p)if(!MN(c,a[p])){const m=a[p];let y=l[p];y=We(y);const _=o.Nu(m);if(y instanceof km)c.push(m);else{const x=Ah(y,_);x!=null&&(c.push(m),u.set(m,x))}}const f=new Xn(c);return new AN(u,f,o.fieldTransforms)}function i6(t,e,n,r=!1){return Ah(n,t.Qu(r?4:3,e))}function Ah(t,e){if(jN(t=We(t)))return Mx("Unsupported field value:",e,t),DN(t,e);if(t instanceof Em)return function(r,i){if(!PN(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Ah(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ZB(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ot.fromDate(r);return{timestampValue:gp(i.serializer,s)}}if(r instanceof Ot){const s=new Ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gp(i.serializer,s)}}if(r instanceof Px)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof El)return{bytesValue:tN(i.serializer,r._byteString)};if(r instanceof _n){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Rx)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return ux(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Sm(r)}`)}(t,e)}function DN(t,e){const n={};return PR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oa(t,(r,i)=>{const s=Ah(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function jN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ot||t instanceof Px||t instanceof El||t instanceof _n||t instanceof Em||t instanceof Rx)}function Mx(t,e,n){if(!jN(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Sm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function e0(t,e,n){if((e=We(e))instanceof Ch)return e._internalPath;if(typeof e=="string")return Ox(t,e);throw xp("Field path arguments must be of type string or ",t,!1,void 0,n)}const s6=new RegExp("[~\\*/\\[\\]]");function Ox(t,e,n){if(e.search(s6)>=0)throw xp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ch(...e.split("."))._internalPath}catch{throw xp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xp(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ne(z.INVALID_ARGUMENT,a+t+l)}function MN(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new o6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Cm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class o6 extends ON{data(){return super.data()}}function Cm(t,e){return typeof e=="string"?Ox(t,e):e instanceof Ch?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lx{}class Vx extends Lx{}function dr(t,e,...n){let r=[];e instanceof Lx&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Fx).length,a=s.filter(l=>l instanceof Im).length;if(o>1||o>0&&a>0)throw new ne(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Im extends Vx{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Im(e,n,r)}_apply(e){const n=this._parse(e);return VN(e._query,n),new hi(e.firestore,e.converter,Hv(e._query,n))}_parse(e){const n=Ih(e.firestore);return function(s,o,a,l,c,u,f){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new ne(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){PE(f,u);const m=[];for(const y of f)m.push(AE(l,s,y));p={arrayValue:{values:m}}}else p=AE(l,s,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||PE(f,u),p=i6(a,o,f,u==="in"||u==="not-in");return Pt.create(c,u,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qg(t,e,n){const r=e,i=Cm("where",t);return Im._create(i,r,n)}class Fx extends Lx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fx(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:jr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)VN(o,l),o=Hv(o,l)}(e._query,n),new hi(e.firestore,e.converter,Hv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ux extends Vx{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ux(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ne(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ne(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wu(s,o)}(e._query,this._field,this._direction);return new hi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new aa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Di(t,e="asc"){const n=e,r=Cm("orderBy",t);return Ux._create(r,n)}class Bx extends Vx{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Bx(e,n,r)}_apply(e){return new hi(e.firestore,e.converter,pp(e._query,this._limit,this._limitType))}}function wp(t){return J3("limit",t),Bx._create("limit",t,"F")}function AE(t,e,n){if(typeof(n=We(n))=="string"){if(n==="")throw new ne(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FR(e)&&n.indexOf("/")!==-1)throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ge.fromString(n));if(!ae.isDocumentKey(r))throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return QS(t,new ae(r))}if(n instanceof _n)return QS(t,n._key);throw new ne(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sm(n)}.`)}function PE(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VN(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class a6{convertValue(e,n="none"){switch(Jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return oa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>xt(o.doubleValue));return new Rx(s)}convertGeoPoint(e){return new Px(xt(e.latitude),xt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ox(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Bu(e));default:return null}}convertTimestamp(e){const n=Bs(e);return new Ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ge.fromString(e);Fe(aN(r));const i=new zu(r.get(1),r.get(3)),s=new ae(r.popFirst(5));return i.isEqual(n)||$i(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class FN extends ON{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Cm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class xf extends FN{data(e={}){return super.data(e)}}class UN{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xf(this._firestore,this._userDataWriter,r.key,r,new Vc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new xf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new xf(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:l6(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function l6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(t){t=vn(t,_n);const e=vn(t.firestore,ai);return Y3(kh(e),t._key).then(n=>BN(e,t,n))}class $x extends a6{constructor(e){super(),this.firestore=e}convertBytes(e){return new El(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _n(this.firestore,null,n)}}function RE(t){t=vn(t,hi);const e=vn(t.firestore,ai),n=kh(e),r=new $x(e);return LN(t._query),Q3(n,t._query).then(i=>new UN(e,r,t,i))}function Vo(t,e,n){t=vn(t,_n);const r=vn(t.firestore,ai),i=zx(t.converter,e,n);return Ph(r,[Dx(Ih(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,In.none())])}function Gu(t,e,n,...r){t=vn(t,_n);const i=vn(t.firestore,ai),s=Ih(i);let o;return o=typeof(e=We(e))=="string"||e instanceof Ch?NN(s,"updateDoc",t._key,e,n,r):RN(s,"updateDoc",t._key,e),Ph(i,[o.toMutation(t._key,In.exists(!0))])}function Am(t){return Ph(vn(t.firestore,ai),[new _m(t._key,In.none())])}function Pm(t,e){const n=vn(t.firestore,ai),r=Me(t),i=zx(t.converter,e);return Ph(n,[Dx(Ih(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,In.exists(!1))]).then(()=>r)}function Tt(t,...e){var n,r,i;t=We(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||IE(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(IE(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let l,c,u;if(t instanceof _n)c=vn(t.firestore,ai),u=pm(t._key.path),l={next:f=>{e[o]&&e[o](BN(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=vn(t,hi);c=vn(f.firestore,ai),u=f._query;const p=new $x(c);l={next:m=>{e[o]&&e[o](new UN(c,p,f,m))},error:e[o+1],complete:e[o+2]},LN(t._query)}return function(p,m,y,_){const x=new Ix(_),v=new kx(m,x,y);return p.asyncQueue.enqueueAndForget(async()=>Tx(await _p(p),v)),()=>{x.Za(),p.asyncQueue.enqueueAndForget(async()=>Sx(await _p(p),v))}}(kh(c),u,a,l)}function Ph(t,e){return function(r,i){const s=new Ni;return r.asyncQueue.enqueueAndForget(async()=>V3(await G3(r),i,s)),s.promise}(kh(t),e)}function BN(t,e,n){const r=n.docs.get(e._key),i=new $x(t);return new FN(t,i,e._key,r,new Vc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ih(e)}set(e,n,r){this._verifyNotCommitted();const i=Xg(e,this._firestore),s=zx(i.converter,n,r),o=Dx(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,In.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Xg(e,this._firestore);let o;return o=typeof(n=We(n))=="string"||n instanceof Ch?NN(this._dataReader,"WriteBatch.update",s._key,n,r,i):RN(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,In.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Xg(e,this._firestore);return this._mutations=this._mutations.concat(new _m(n._key,In.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ne(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xg(t,e){if((t=We(t)).firestore!==e)throw new ne(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Un(){return new jx("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t){return kh(t=vn(t,ai)),new c6(t,e=>Ph(t,e))}(function(e,n=!0){(function(i){Fl=i})(ia),Go(new Fs("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ai(new gB(r.getProvider("auth-internal")),new xB(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ne(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zu(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Jr(HS,"4.7.3",e),Jr(HS,"4.7.3","esm2017")})();var u6="firebase",h6="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jr(u6,h6,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="firebasestorage.googleapis.com",$N="storageBucket",d6=2*60*1e3,f6=10*60*1e3,p6=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt extends ci{constructor(e,n,r=0){super(Jg(e),`Firebase Storage: ${n} (${Jg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var tt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(tt||(tt={}));function Jg(t){return"storage/"+t}function Hx(){const t="An unknown error occurred, please check the error payload for server response.";return new pt(tt.UNKNOWN,t)}function m6(t){return new pt(tt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function g6(t){return new pt(tt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function y6(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pt(tt.UNAUTHENTICATED,t)}function v6(){return new pt(tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _6(t){return new pt(tt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function WN(){return new pt(tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function HN(){return new pt(tt.CANCELED,"User canceled the upload/download.")}function x6(t){return new pt(tt.INVALID_URL,"Invalid URL '"+t+"'.")}function w6(t){return new pt(tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function b6(){return new pt(tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+$N+"' property when initializing the app?")}function qN(){return new pt(tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function T6(){return new pt(tt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function S6(){return new pt(tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function E6(t){return new pt(tt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function t0(t){return new pt(tt.INVALID_ARGUMENT,t)}function KN(){return new pt(tt.APP_DELETED,"The Firebase app was deleted.")}function k6(t){return new pt(tt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lu(t,e){return new pt(tt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function _c(t){throw new pt(tt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Jn.makeFromUrl(e,n)}catch{return new Jn(e,"")}if(r.path==="")return r;throw w6(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(P){P.path_=decodeURIComponent(P.path)}const u="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${u}/b/${i}/o${p}`,"i"),y={bucket:1,path:3},_=n===zN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",v=new RegExp(`^https?://${_}/${i}/${x}`,"i"),S=[{regex:a,indices:l,postModify:s},{regex:m,indices:y,postModify:c},{regex:v,indices:{bucket:1,path:2},postModify:c}];for(let P=0;P<S.length;P++){const I=S[P],M=I.regex.exec(e);if(M){const k=M[I.indices.bucket];let T=M[I.indices.path];T||(T=""),r=new Jn(k,T),I.postModify(r);break}}if(r==null)throw x6(e);return r}}class C6{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...x){c||(c=!0,e.apply(null,x))}function f(x){i=setTimeout(()=>{i=null,t(m,l())},x)}function p(){s&&clearTimeout(s)}function m(x,...v){if(c){p();return}if(x){p(),u.call(null,x,...v);return}if(l()||o){p(),u.call(null,x,...v);return}r<64&&(r*=2);let S;a===1?(a=2,S=0):S=(r+Math.random())*1e3,f(S)}let y=!1;function _(x){y||(y=!0,p(),!c&&(i!==null?(x||(a=2),clearTimeout(i),f(0)):x||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function A6(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t){return t!==void 0}function R6(t){return typeof t=="function"}function N6(t){return typeof t=="object"&&!Array.isArray(t)}function Rm(t){return typeof t=="string"||t instanceof String}function NE(t){return qx()&&t instanceof Blob}function qx(){return typeof Blob<"u"}function DE(t,e,n,r){if(r<e)throw t0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw t0(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zl(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function GN(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Fo;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Fo||(Fo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,n,r,i,s,o,a,l,c,u,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Cd(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Fo.NO_ERROR,l=s.getStatus();if(!a||YN(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Fo.ABORT;r(!1,new Cd(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Cd(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());P6(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Hx();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?KN():HN();o(l)}else{const l=WN();o(l)}};this.canceled_?n(!1,new Cd(!1,null,!0)):this.backoffId_=I6(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&A6(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Cd{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function j6(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function M6(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function O6(t,e){e&&(t["X-Firebase-GMPID"]=e)}function L6(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function V6(t,e,n,r,i,s,o=!0){const a=GN(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return O6(c,e),j6(c,n),M6(c,s),L6(c,r),new D6(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function U6(...t){const e=F6();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(qx())return new Blob(t);throw new pt(tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function B6(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z6(t){if(typeof atob>"u")throw E6("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zg{constructor(e,n){this.data=e,this.contentType=n||null}}function $6(t,e){switch(t){case Yr.RAW:return new Zg(QN(e));case Yr.BASE64:case Yr.BASE64URL:return new Zg(XN(t,e));case Yr.DATA_URL:return new Zg(H6(e),q6(e))}throw Hx()}function QN(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function W6(t){let e;try{e=decodeURIComponent(t)}catch{throw lu(Yr.DATA_URL,"Malformed data URL.")}return QN(e)}function XN(t,e){switch(t){case Yr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw lu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Yr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw lu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=z6(e)}catch(i){throw i.message.includes("polyfill")?i:lu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class JN{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw lu(Yr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=K6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function H6(t){const e=new JN(t);return e.base64?XN(Yr.BASE64,e.rest):W6(e.rest)}function q6(t){return new JN(t).contentType}function K6(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n){let r=0,i="";NE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(NE(this.data_)){const r=this.data_,i=B6(r,e,n);return i===null?null:new Si(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Si(r,!0)}}static getBlob(...e){if(qx()){const n=e.map(r=>r instanceof Si?r.data_:r);return new Si(U6.apply(null,n))}else{const n=e.map(o=>Rm(o)?$6(Yr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Si(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t){let e;try{e=JSON.parse(t)}catch{return null}return N6(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Y6(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function e2(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(t,e){return e}class Sn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Q6}}let Id=null;function X6(t){return!Rm(t)||t.length<2?t:e2(t)}function Kx(){if(Id)return Id;const t=[];t.push(new Sn("bucket")),t.push(new Sn("generation")),t.push(new Sn("metageneration")),t.push(new Sn("name","fullPath",!0));function e(s,o){return X6(o)}const n=new Sn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Sn("size");return i.xform=r,t.push(i),t.push(new Sn("timeCreated")),t.push(new Sn("updated")),t.push(new Sn("md5Hash",null,!0)),t.push(new Sn("cacheControl",null,!0)),t.push(new Sn("contentDisposition",null,!0)),t.push(new Sn("contentEncoding",null,!0)),t.push(new Sn("contentLanguage",null,!0)),t.push(new Sn("contentType",null,!0)),t.push(new Sn("metadata","customMetadata",!0)),Id=t,Id}function J6(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new Jn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Z6(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return J6(r,t),r}function t2(t,e,n){const r=ZN(e);return r===null?null:Z6(t,r,n)}function e9(t,e,n,r){const i=ZN(e);if(i===null||!Rm(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,f=t.fullPath,p="/b/"+o(u)+"/o/"+o(f),m=zl(p,n,r),y=GN({alt:"media",token:c});return m+y})[0]}function n2(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class ca{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(t){if(!t)throw Hx()}function Gx(t,e){function n(r,i){const s=t2(t,i,e);return ji(s!==null),s}return n}function t9(t,e){function n(r,i){const s=t2(t,i,e);return ji(s!==null),e9(s,i,t.host,t._protocol)}return n}function Rh(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=v6():i=y6():n.getStatus()===402?i=g6(t.bucket):n.getStatus()===403?i=_6(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Yx(t){const e=Rh(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=m6(t.path)),s.serverResponse=i.serverResponse,s}return n}function n9(t,e,n){const r=e.fullServerUrl(),i=zl(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new ca(i,s,Gx(t,n),o);return a.errorHandler=Yx(e),a}function r9(t,e,n){const r=e.fullServerUrl(),i=zl(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new ca(i,s,t9(t,n),o);return a.errorHandler=Yx(e),a}function i9(t,e){const n=e.fullServerUrl(),r=zl(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new ca(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Yx(e),a}function s9(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function r2(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=s9(null,e)),r}function i2(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let S="";for(let P=0;P<2;P++)S=S+Math.random().toString().slice(2);return S}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=r2(e,r,i),u=n2(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Si.getBlob(f,r,p);if(m===null)throw qN();const y={name:c.fullPath},_=zl(s,t.host,t._protocol),x="POST",v=t.maxUploadRetryTime,w=new ca(_,x,Gx(t,n),v);return w.urlParams=y,w.headers=o,w.body=m.uploadData(),w.errorHandler=Rh(e),w}class bp{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function Qx(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{ji(!1)}return ji(!!n&&(e||["active"]).indexOf(n)!==-1),n}function o9(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=r2(e,r,i),a={name:o.fullPath},l=zl(s,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=n2(o,n),p=t.maxUploadRetryTime;function m(_){Qx(_);let x;try{x=_.getResponseHeader("X-Goog-Upload-URL")}catch{ji(!1)}return ji(Rm(x)),x}const y=new ca(l,c,m,p);return y.urlParams=a,y.headers=u,y.body=f,y.errorHandler=Rh(e),y}function a9(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const u=Qx(c,["active","final"]);let f=null;try{f=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ji(!1)}f||ji(!1);const p=Number(f);return ji(!isNaN(p)),new bp(p,r.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,l=new ca(n,o,s,a);return l.headers=i,l.errorHandler=Rh(e),l}const jE=256*1024;function l9(t,e,n,r,i,s,o,a){const l=new bp(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw T6();const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const f=l.current,p=f+u;let m="";u===0?m="finalize":c===u?m="upload, finalize":m="upload";const y={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},_=r.slice(f,p);if(_===null)throw qN();function x(P,I){const M=Qx(P,["active","final"]),k=l.current+u,T=r.size();let E;return M==="final"?E=Gx(e,s)(P,I):E=null,new bp(k,T,M==="final",E)}const v="POST",w=e.maxUploadRetryTime,S=new ca(n,v,x,w);return S.headers=y,S.body=_.uploadData(),S.progressCallback=a||null,S.errorHandler=Rh(t),S}const Mn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ey(t){switch(t){case"running":case"pausing":case"canceling":return Mn.RUNNING;case"paused":return Mn.PAUSED;case"success":return Mn.SUCCESS;case"canceled":return Mn.CANCELED;case"error":return Mn.ERROR;default:return Mn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e,n,r){if(R6(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class u9{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw _c("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw _c("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw _c("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw _c("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw _c("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class h9 extends u9{initXhr(){this.xhr_.responseType="text"}}function fs(){return new h9}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d9{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Kx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(tt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(YN(i.status,[]))if(s)i=WN();else{this.sleepTime=Math.max(this.sleepTime*2,p6),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(tt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=o9(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,fs,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=a9(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,fs,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=jE*this._chunkMultiplier,n=new bp(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=l9(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,fs,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){jE*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=n9(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,fs,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=i2(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,fs,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=HN(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=ey(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new c9(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(ey(this._state)){case Mn.SUCCESS:Sa(this._resolve.bind(null,this.snapshot))();break;case Mn.CANCELED:case Mn.ERROR:const n=this._reject;Sa(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ey(this._state)){case Mn.RUNNING:case Mn.PAUSED:e.next&&Sa(e.next.bind(e,this.snapshot))();break;case Mn.SUCCESS:e.complete&&Sa(e.complete.bind(e))();break;case Mn.CANCELED:case Mn.ERROR:e.error&&Sa(e.error.bind(e,this._error))();break;default:e.error&&Sa(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this._service=e,n instanceof Jn?this._location=n:this._location=Jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Zo(e,n)}get root(){const e=new Jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return e2(this._location.path)}get storage(){return this._service}get parent(){const e=G6(this._location.path);if(e===null)return null;const n=new Jn(this._location.bucket,e);return new Zo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw k6(e)}}function f9(t,e,n){t._throwIfRoot("uploadBytes");const r=i2(t.storage,t._location,Kx(),new Si(e,!0),n);return t.storage.makeRequestWithTokens(r,fs).then(i=>({metadata:i,ref:t}))}function p9(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new d9(t,new Si(e),n)}function m9(t){t._throwIfRoot("getDownloadURL");const e=r9(t.storage,t._location,Kx());return t.storage.makeRequestWithTokens(e,fs).then(n=>{if(n===null)throw S6();return n})}function g9(t){t._throwIfRoot("deleteObject");const e=i9(t.storage,t._location);return t.storage.makeRequestWithTokens(e,fs)}function y9(t,e){const n=Y6(t._location.path,e),r=new Jn(t._location.bucket,n);return new Zo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v9(t){return/^[A-Za-z]+:\/\//.test(t)}function _9(t,e){return new Zo(t,e)}function s2(t,e){if(t instanceof Xx){const n=t;if(n._bucket==null)throw b6();const r=new Zo(n,n._bucket);return e!=null?s2(r,e):r}else return e!==void 0?y9(t,e):t}function x9(t,e){if(e&&v9(e)){if(t instanceof Xx)return _9(t,e);throw t0("To use ref(service, url), the first argument must be a Storage instance.")}else return s2(t,e)}function ME(t,e){const n=e==null?void 0:e[$N];return n==null?null:Jn.makeFromBucketSpec(n,t)}function w9(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:LP(i,t.app.options.projectId))}class Xx{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=zN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=d6,this._maxUploadRetryTime=f6,this._requests=new Set,i!=null?this._bucket=Jn.makeFromBucketSpec(i,this._host):this._bucket=ME(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jn.makeFromBucketSpec(this._url,e):this._bucket=ME(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){DE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){DE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new C6(KN());{const o=V6(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const OE="@firebase/storage",LE="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="storage";function a2(t,e,n){return t=We(t),f9(t,e,n)}function b9(t,e,n){return t=We(t),p9(t,e,n)}function Nm(t){return t=We(t),m9(t)}function T9(t){return t=We(t),g9(t)}function kl(t,e){return t=We(t),x9(t,e)}function Nh(t=K_(),e){t=We(t);const r=lm(t,o2).getImmediate({identifier:e}),i=jP("storage");return i&&S9(r,...i),r}function S9(t,e,n,r={}){w9(t,e,n,r)}function E9(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Xx(n,r,i,e,ia)}function k9(){Go(new Fs(o2,E9,"PUBLIC").setMultipleInstances(!0)),Jr(OE,LE,""),Jr(OE,LE,"esm2017")}k9();const C9={apiKey:"AIzaSyDU4GmH6xLhrEd2jSkyATXJOasIyEfisXY",authDomain:"biondo-fitness-coach.firebaseapp.com",projectId:"biondo-fitness-coach",storageBucket:"biondo-fitness-coach.firebasestorage.app",messagingSenderId:"1086406111438",appId:"1:1086406111438:web:1c8c3d9e49f1ffdb77609f",measurementId:"G-869HQ5KGVX"},Jx=q_(C9),le=IN(Jx),Tp=Mr(Jx),I9=Nh(Jx),Zx=j.createContext({});function ew(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const Dm=j.createContext(null),tw=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class A9 extends j.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function P9({children:t,isPresent:e}){const n=j.useId(),r=j.useRef(null),i=j.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=j.useContext(tw);return j.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=i.current;if(e||!r.current||!o||!a)return;r.current.dataset.motionPopId=n;const u=document.createElement("style");return s&&(u.nonce=s),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),h.jsx(A9,{isPresent:e,childRef:r,sizeRef:i,children:j.cloneElement(t,{ref:r})})}const R9=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o})=>{const a=ew(N9),l=j.useId(),c=j.useCallback(f=>{a.set(f,!0);for(const p of a.values())if(!p)return;r&&r()},[a,r]),u=j.useMemo(()=>({id:l,initial:e,isPresent:n,custom:i,onExitComplete:c,register:f=>(a.set(f,!1),()=>a.delete(f))}),s?[Math.random(),c]:[n,c]);return j.useMemo(()=>{a.forEach((f,p)=>a.set(p,!1))},[n]),j.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=h.jsx(P9,{isPresent:n,children:t})),h.jsx(Dm.Provider,{value:u,children:t})};function N9(){return new Map}function l2(t=!0){const e=j.useContext(Dm);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=j.useId();j.useEffect(()=>{t&&i(s)},[t]);const o=j.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Ad=t=>t.key||"";function VE(t){const e=[];return j.Children.forEach(t,n=>{j.isValidElement(n)&&e.push(n)}),e}const nw=typeof window<"u",c2=nw?j.useLayoutEffect:j.useEffect,ua=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=l2(o),c=j.useMemo(()=>VE(t),[t]),u=o&&!a?[]:c.map(Ad),f=j.useRef(!0),p=j.useRef(c),m=ew(()=>new Map),[y,_]=j.useState(c),[x,v]=j.useState(c);c2(()=>{f.current=!1,p.current=c;for(let P=0;P<x.length;P++){const I=Ad(x[P]);u.includes(I)?m.delete(I):m.get(I)!==!0&&m.set(I,!1)}},[x,u.length,u.join("-")]);const w=[];if(c!==y){let P=[...c];for(let I=0;I<x.length;I++){const M=x[I],k=Ad(M);u.includes(k)||(P.splice(I,0,M),w.push(M))}s==="wait"&&w.length&&(P=w),v(VE(P)),_(c);return}const{forceRender:S}=j.useContext(Zx);return h.jsx(h.Fragment,{children:x.map(P=>{const I=Ad(P),M=o&&!a?!1:c===x||u.includes(I),k=()=>{if(m.has(I))m.set(I,!0);else return;let T=!0;m.forEach(E=>{E||(T=!1)}),T&&(S==null||S(),v(p.current),o&&(l==null||l()),r&&r())};return h.jsx(R9,{isPresent:M,initial:!f.current||n?void 0:!1,custom:M?void 0:e,presenceAffectsLayout:i,mode:s,onExitComplete:M?void 0:k,children:P},I)})})},tr=t=>t;let u2=tr;function rw(t){let e;return()=>(e===void 0&&(e=t()),e)}const Cl=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Mi=t=>t*1e3,Oi=t=>t/1e3,D9={useManualTiming:!1};function j9(t){let e=new Set,n=new Set,r=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),t()),c(o)}const l={schedule:(c,u=!1,f=!1)=>{const m=f&&r?e:n;return u&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{n.delete(c),s.delete(c)},process:c=>{if(o=c,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(a),e.clear(),r=!1,i&&(i=!1,l.process(c))}};return l}const Pd=["read","resolveKeyframes","update","preRender","render","postRender"],M9=40;function h2(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Pd.reduce((v,w)=>(v[w]=j9(s),v),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:f,postRender:p}=o,m=()=>{const v=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,M9),1),i.timestamp=v,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),u.process(i),f.process(i),p.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(m))},y=()=>{n=!0,r=!0,i.isProcessing||t(m)};return{schedule:Pd.reduce((v,w)=>{const S=o[w];return v[w]=(P,I=!1,M=!1)=>(n||y(),S.schedule(P,I,M)),v},{}),cancel:v=>{for(let w=0;w<Pd.length;w++)o[Pd[w]].cancel(v)},state:i,steps:o}}const{schedule:et,cancel:$s,state:Gt,steps:ty}=h2(typeof requestAnimationFrame<"u"?requestAnimationFrame:tr,!0),d2=j.createContext({strict:!1}),FE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Il={};for(const t in FE)Il[t]={isEnabled:e=>FE[t].some(n=>!!e[n])};function O9(t){for(const e in t)Il[e]={...Il[e],...t[e]}}const L9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||L9.has(t)}let f2=t=>!Sp(t);function V9(t){t&&(f2=e=>e.startsWith("on")?!Sp(e):t(e))}try{V9(require("@emotion/is-prop-valid").default)}catch{}function F9(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(f2(i)||n===!0&&Sp(i)||!e&&!Sp(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function U9(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const jm=j.createContext({});function Yu(t){return typeof t=="string"||Array.isArray(t)}function Mm(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const iw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sw=["initial",...iw];function Om(t){return Mm(t.animate)||sw.some(e=>Yu(t[e]))}function p2(t){return!!(Om(t)||t.variants)}function B9(t,e){if(Om(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Yu(n)?n:void 0,animate:Yu(r)?r:void 0}}return t.inherit!==!1?e:{}}function z9(t){const{initial:e,animate:n}=B9(t,j.useContext(jm));return j.useMemo(()=>({initial:e,animate:n}),[UE(e),UE(n)])}function UE(t){return Array.isArray(t)?t.join(" "):t}const $9=Symbol.for("motionComponentSymbol");function Wa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function W9(t,e,n){return j.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Wa(n)&&(n.current=r))},[e])}const ow=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),H9="framerAppearId",m2="data-"+ow(H9),{schedule:aw}=h2(queueMicrotask,!1),g2=j.createContext({});function q9(t,e,n,r,i){var s,o;const{visualElement:a}=j.useContext(jm),l=j.useContext(d2),c=j.useContext(Dm),u=j.useContext(tw).reducedMotion,f=j.useRef(null);r=r||l.renderer,!f.current&&r&&(f.current=r(t,{visualState:e,parent:a,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const p=f.current,m=j.useContext(g2);p&&!p.projection&&i&&(p.type==="html"||p.type==="svg")&&K9(f.current,n,i,m);const y=j.useRef(!1);j.useInsertionEffect(()=>{p&&y.current&&p.update(n,c)});const _=n[m2],x=j.useRef(!!_&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,_))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,_)));return c2(()=>{p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),aw.render(p.render),x.current&&p.animationState&&p.animationState.animateChanges())}),j.useEffect(()=>{p&&(!x.current&&p.animationState&&p.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,_)}),x.current=!1))}),p}function K9(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:y2(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Wa(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:c})}function y2(t){if(t)return t.options.allowProjection!==!1?t.projection:y2(t.parent)}function G9({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var s,o;t&&O9(t);function a(c,u){let f;const p={...j.useContext(tw),...c,layoutId:Y9(c)},{isStatic:m}=p,y=z9(c),_=r(c,m);if(!m&&nw){Q9();const x=X9(p);f=x.MeasureLayout,y.visualElement=q9(i,_,p,e,x.ProjectionNode)}return h.jsxs(jm.Provider,{value:y,children:[f&&y.visualElement?h.jsx(f,{visualElement:y.visualElement,...p}):null,n(i,c,W9(_,y.visualElement,u),_,m,y.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${(o=(s=i.displayName)!==null&&s!==void 0?s:i.name)!==null&&o!==void 0?o:""})`}`;const l=j.forwardRef(a);return l[$9]=i,l}function Y9({layoutId:t}){const e=j.useContext(Zx).id;return e&&t!==void 0?e+"-"+t:t}function Q9(t,e){j.useContext(d2).strict}function X9(t){const{drag:e,layout:n}=Il;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const J9=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function lw(t){return typeof t!="string"||t.includes("-")?!1:!!(J9.indexOf(t)>-1||/[A-Z]/u.test(t))}function BE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function cw(t,e,n,r){if(typeof e=="function"){const[i,s]=BE(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=BE(r);e=e(n!==void 0?n:t.custom,i,s)}return e}const n0=t=>Array.isArray(t),Z9=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),e$=t=>n0(t)?t[t.length-1]||0:t,gn=t=>!!(t&&t.getVelocity);function wf(t){const e=gn(t)?t.get():t;return Z9(e)?e.toValue():e}function t$({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,s){const o={latestValues:n$(r,i,s,t),renderState:e()};return n&&(o.onMount=a=>n({props:r,current:a,...o}),o.onUpdate=a=>n(a)),o}const v2=t=>(e,n)=>{const r=j.useContext(jm),i=j.useContext(Dm),s=()=>t$(t,e,r,i);return n?s():ew(s)};function n$(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=wf(s[p]);let{initial:o,animate:a}=t;const l=Om(t),c=p2(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const f=u?a:o;if(f&&typeof f!="boolean"&&!Mm(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const y=cw(t,p[m]);if(y){const{transitionEnd:_,transition:x,...v}=y;for(const w in v){let S=v[w];if(Array.isArray(S)){const P=u?S.length-1:0;S=S[P]}S!==null&&(i[w]=S)}for(const w in _)i[w]=_[w]}}}return i}const $l=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ha=new Set($l),_2=t=>e=>typeof e=="string"&&e.startsWith(t),x2=_2("--"),r$=_2("var(--"),uw=t=>r$(t)?i$.test(t.split("/*")[0].trim()):!1,i$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,w2=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Hi=(t,e,n)=>n>e?e:n<t?t:n,Wl={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Qu={...Wl,transform:t=>Hi(0,1,t)},Rd={...Wl,default:1},Dh=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),rs=Dh("deg"),ri=Dh("%"),ce=Dh("px"),s$=Dh("vh"),o$=Dh("vw"),zE={...ri,parse:t=>ri.parse(t)/100,transform:t=>ri.transform(t*100)},a$={borderWidth:ce,borderTopWidth:ce,borderRightWidth:ce,borderBottomWidth:ce,borderLeftWidth:ce,borderRadius:ce,radius:ce,borderTopLeftRadius:ce,borderTopRightRadius:ce,borderBottomRightRadius:ce,borderBottomLeftRadius:ce,width:ce,maxWidth:ce,height:ce,maxHeight:ce,top:ce,right:ce,bottom:ce,left:ce,padding:ce,paddingTop:ce,paddingRight:ce,paddingBottom:ce,paddingLeft:ce,margin:ce,marginTop:ce,marginRight:ce,marginBottom:ce,marginLeft:ce,backgroundPositionX:ce,backgroundPositionY:ce},l$={rotate:rs,rotateX:rs,rotateY:rs,rotateZ:rs,scale:Rd,scaleX:Rd,scaleY:Rd,scaleZ:Rd,skew:rs,skewX:rs,skewY:rs,distance:ce,translateX:ce,translateY:ce,translateZ:ce,x:ce,y:ce,z:ce,perspective:ce,transformPerspective:ce,opacity:Qu,originX:zE,originY:zE,originZ:ce},$E={...Wl,transform:Math.round},hw={...a$,...l$,zIndex:$E,size:ce,fillOpacity:Qu,strokeOpacity:Qu,numOctaves:$E},c$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},u$=$l.length;function h$(t,e,n){let r="",i=!0;for(let s=0;s<u$;s++){const o=$l[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=w2(a,hw[o]);if(!l){i=!1;const u=c$[o]||o;r+=`${u}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function dw(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(ha.has(l)){o=!0;continue}else if(x2(l)){i[l]=c;continue}else{const u=w2(c,hw[l]);l.startsWith("origin")?(a=!0,s[l]=u):r[l]=u}}if(e.transform||(o||n?r.transform=h$(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;r.transformOrigin=`${l} ${c} ${u}`}}const d$={offset:"stroke-dashoffset",array:"stroke-dasharray"},f$={offset:"strokeDashoffset",array:"strokeDasharray"};function p$(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?d$:f$;t[s.offset]=ce.transform(-r);const o=ce.transform(e),a=ce.transform(n);t[s.array]=`${o} ${a}`}function WE(t,e,n){return typeof t=="string"?t:ce.transform(e+n*t)}function m$(t,e,n){const r=WE(e,t.x,t.width),i=WE(n,t.y,t.height);return`${r} ${i}`}function fw(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,f){if(dw(t,c,f),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m,dimensions:y}=t;p.transform&&(y&&(m.transform=p.transform),delete p.transform),y&&(i!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=m$(y,i!==void 0?i:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),o!==void 0&&p$(p,o,a,l,!1)}const pw=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),b2=()=>({...pw(),attrs:{}}),mw=t=>typeof t=="string"&&t.toLowerCase()==="svg";function T2(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}const S2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function E2(t,e,n,r){T2(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(S2.has(i)?i:ow(i),e.attrs[i])}const Ep={};function g$(t){Object.assign(Ep,t)}function k2(t,{layout:e,layoutId:n}){return ha.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Ep[t]||t==="opacity")}function gw(t,e,n){var r;const{style:i}=t,s={};for(const o in i)(gn(i[o])||e.style&&gn(e.style[o])||k2(o,t)||((r=n==null?void 0:n.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(s[o]=i[o]);return s}function C2(t,e,n){const r=gw(t,e,n);for(const i in t)if(gn(t[i])||gn(e[i])){const s=$l.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}function y$(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const HE=["x","y","width","height","cx","cy","r"],v$={useVisualState:v2({scrapeMotionValuesFromProps:C2,createRenderState:b2,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let s=!!t.drag;if(!s){for(const a in i)if(ha.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<HE.length;a++){const l=HE[a];t[l]!==e[l]&&(o=!0)}o&&et.read(()=>{y$(n,r),et.render(()=>{fw(r,i,mw(n.tagName),t.transformTemplate),E2(n,r)})})}})},_$={useVisualState:v2({scrapeMotionValuesFromProps:gw,createRenderState:pw})};function I2(t,e,n){for(const r in e)!gn(e[r])&&!k2(r,n)&&(t[r]=e[r])}function x$({transformTemplate:t},e){return j.useMemo(()=>{const n=pw();return dw(n,e,t),Object.assign({},n.vars,n.style)},[e])}function w$(t,e){const n=t.style||{},r={};return I2(r,n,t),Object.assign(r,x$(t,e)),r}function b$(t,e){const n={},r=w$(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function T$(t,e,n,r){const i=j.useMemo(()=>{const s=b2();return fw(s,e,mw(r),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};I2(s,t.style,t),i.style={...s,...i.style}}return i}function S$(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(lw(n)?T$:b$)(r,s,o,n),c=F9(r,typeof n=="string",t),u=n!==j.Fragment?{...c,...l,ref:i}:{},{children:f}=r,p=j.useMemo(()=>gn(f)?f.get():f,[f]);return j.createElement(n,{...u,children:p})}}function E$(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...lw(r)?v$:_$,preloadedFeatures:t,useRender:S$(i),createVisualElement:e,Component:r};return G9(o)}}function A2(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Lm(t,e,n){const r=t.getProps();return cw(r,e,n!==void 0?n:r.custom,t)}const k$=rw(()=>window.ScrollTimeline!==void 0);class C${constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(k$()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,s)=>{i&&i(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class I$ extends C${then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function yw(t,e){return t?t[e]||t.default||t:void 0}const r0=2e4;function P2(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<r0;)e+=n,r=t.next(e);return e>=r0?1/0:e}function vw(t){return typeof t=="function"}function qE(t,e){t.timeline=e,t.onfinish=null}const _w=t=>Array.isArray(t)&&typeof t[0]=="number",A$={linearEasing:void 0};function P$(t,e){const n=rw(t);return()=>{var r;return(r=A$[e])!==null&&r!==void 0?r:n()}}const kp=P$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),R2=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=t(Cl(0,i-1,s))+", ";return`linear(${r.substring(0,r.length-2)})`};function N2(t){return!!(typeof t=="function"&&kp()||!t||typeof t=="string"&&(t in i0||kp())||_w(t)||Array.isArray(t)&&t.every(N2))}const Fc=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,i0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fc([0,.65,.55,1]),circOut:Fc([.55,0,1,.45]),backIn:Fc([.31,.01,.66,-.59]),backOut:Fc([.33,1.53,.69,.99])};function D2(t,e){if(t)return typeof t=="function"&&kp()?R2(t,e):_w(t)?Fc(t):Array.isArray(t)?t.map(n=>D2(n,e)||i0.easeOut):i0[t]}const wr={x:!1,y:!1};function j2(){return wr.x||wr.y}function R$(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const s=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}function M2(t,e){const n=R$(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function KE(t){return e=>{e.pointerType==="touch"||j2()||t(e)}}function N$(t,e,n={}){const[r,i,s]=M2(t,n),o=KE(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=KE(f=>{c(f),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,i)});return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const O2=(t,e)=>e?t===e?!0:O2(t,e.parentElement):!1,xw=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,D$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function j$(t){return D$.has(t.tagName)||t.tabIndex!==-1}const Uc=new WeakSet;function GE(t){return e=>{e.key==="Enter"&&t(e)}}function ny(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const M$=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=GE(()=>{if(Uc.has(n))return;ny(n,"down");const i=GE(()=>{ny(n,"up")}),s=()=>ny(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function YE(t){return xw(t)&&!j2()}function O$(t,e,n={}){const[r,i,s]=M2(t,n),o=a=>{const l=a.currentTarget;if(!YE(a)||Uc.has(l))return;Uc.add(l);const c=e(a),u=(m,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),!(!YE(m)||!Uc.has(l))&&(Uc.delete(l),typeof c=="function"&&c(m,{success:y}))},f=m=>{u(m,n.useGlobalTarget||O2(l,m.target))},p=m=>{u(m,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{!j$(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),a.addEventListener("focus",c=>M$(c,i),i)}),s}function L$(t){return t==="x"||t==="y"?wr[t]?null:(wr[t]=!0,()=>{wr[t]=!1}):wr.x||wr.y?null:(wr.x=wr.y=!0,()=>{wr.x=wr.y=!1})}const L2=new Set(["width","height","top","left","right","bottom",...$l]);let bf;function V$(){bf=void 0}const ii={now:()=>(bf===void 0&&ii.set(Gt.isProcessing||D9.useManualTiming?Gt.timestamp:performance.now()),bf),set:t=>{bf=t,queueMicrotask(V$)}};function ww(t,e){t.indexOf(e)===-1&&t.push(e)}function bw(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Tw{constructor(){this.subscriptions=[]}add(e){return ww(this.subscriptions,e),()=>bw(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function V2(t,e){return e?t*(1e3/e):0}const QE=30,F$=t=>!isNaN(parseFloat(t));class U${constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const s=ii.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ii.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=F$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Tw);const r=this.events[e].add(n);return e==="change"?()=>{r(),et.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ii.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>QE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,QE);return V2(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Xu(t,e){return new U$(t,e)}function B$(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Xu(n))}function z$(t,e){const n=Lm(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=e$(s[o]);B$(t,o,a)}}function $$(t){return!!(gn(t)&&t.add)}function s0(t,e){const n=t.getValue("willChange");if($$(n))return n.add(e)}function F2(t){return t.props[m2]}const U2=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,W$=1e-7,H$=12;function q$(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=U2(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>W$&&++a<H$);return o}function jh(t,e,n,r){if(t===e&&n===r)return tr;const i=s=>q$(s,0,1,t,n);return s=>s===0||s===1?s:U2(i(s),e,r)}const B2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,z2=t=>e=>1-t(1-e),$2=jh(.33,1.53,.69,.99),Sw=z2($2),W2=B2(Sw),H2=t=>(t*=2)<1?.5*Sw(t):.5*(2-Math.pow(2,-10*(t-1))),Ew=t=>1-Math.sin(Math.acos(t)),q2=z2(Ew),K2=B2(Ew),G2=t=>/^0[^.\s]+$/u.test(t);function K$(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||G2(t):!0}const cu=t=>Math.round(t*1e5)/1e5,kw=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function G$(t){return t==null}const Y$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Cw=(t,e)=>n=>!!(typeof n=="string"&&Y$.test(n)&&n.startsWith(t)||e&&!G$(n)&&Object.prototype.hasOwnProperty.call(n,e)),Y2=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(kw);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Q$=t=>Hi(0,255,t),ry={...Wl,transform:t=>Math.round(Q$(t))},Ro={test:Cw("rgb","red"),parse:Y2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ry.transform(t)+", "+ry.transform(e)+", "+ry.transform(n)+", "+cu(Qu.transform(r))+")"};function X$(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const o0={test:Cw("#"),parse:X$,transform:Ro.transform},Ha={test:Cw("hsl","hue"),parse:Y2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ri.transform(cu(e))+", "+ri.transform(cu(n))+", "+cu(Qu.transform(r))+")"},dn={test:t=>Ro.test(t)||o0.test(t)||Ha.test(t),parse:t=>Ro.test(t)?Ro.parse(t):Ha.test(t)?Ha.parse(t):o0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ro.transform(t):Ha.transform(t)},J$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Z$(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(kw))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(J$))===null||n===void 0?void 0:n.length)||0)>0}const Q2="number",X2="color",eW="var",tW="var(",XE="${}",nW=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ju(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(nW,l=>(dn.test(l)?(r.color.push(s),i.push(X2),n.push(dn.parse(l))):l.startsWith(tW)?(r.var.push(s),i.push(eW),n.push(l)):(r.number.push(s),i.push(Q2),n.push(parseFloat(l))),++s,XE)).split(XE);return{values:n,split:a,indexes:r,types:i}}function J2(t){return Ju(t).values}function Z2(t){const{split:e,types:n}=Ju(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===Q2?s+=cu(i[o]):a===X2?s+=dn.transform(i[o]):s+=i[o]}return s}}const rW=t=>typeof t=="number"?0:t;function iW(t){const e=J2(t);return Z2(t)(e.map(rW))}const Ws={test:Z$,parse:J2,createTransformer:Z2,getAnimatableNone:iW},sW=new Set(["brightness","contrast","saturate","opacity"]);function oW(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(kw)||[];if(!r)return t;const i=n.replace(r,"");let s=sW.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const aW=/\b([a-z-]*)\(.*?\)/gu,a0={...Ws,getAnimatableNone:t=>{const e=t.match(aW);return e?e.map(oW).join(" "):t}},lW={...hw,color:dn,backgroundColor:dn,outlineColor:dn,fill:dn,stroke:dn,borderColor:dn,borderTopColor:dn,borderRightColor:dn,borderBottomColor:dn,borderLeftColor:dn,filter:a0,WebkitFilter:a0},Iw=t=>lW[t];function eD(t,e){let n=Iw(t);return n!==a0&&(n=Ws),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const cW=new Set(["auto","none","0"]);function uW(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!cW.has(s)&&Ju(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=eD(n,i)}const JE=t=>t===Wl||t===ce,ZE=(t,e)=>parseFloat(t.split(", ")[e]),e1=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return ZE(i[1],e);{const s=r.match(/^matrix\((.+)\)$/u);return s?ZE(s[1],t):0}},hW=new Set(["x","y","z"]),dW=$l.filter(t=>!hW.has(t));function fW(t){const e=[];return dW.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Al={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:e1(4,13),y:e1(5,14)};Al.translateX=Al.x;Al.translateY=Al.y;const Uo=new Set;let l0=!1,c0=!1;function tD(){if(c0){const t=Array.from(Uo).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=fW(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))===null||a===void 0||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}c0=!1,l0=!1,Uo.forEach(t=>t.complete()),Uo.clear()}function nD(){Uo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(c0=!0)})}function pW(){nD(),tD()}class Aw{constructor(e,n,r,i,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Uo.add(this),l0||(l0=!0,et.read(nD),et.resolveKeyframes(tD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Uo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Uo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const rD=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),mW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function gW(t){const e=mW.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function iD(t,e,n=1){const[r,i]=gW(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return rD(o)?parseFloat(o):o}return uw(i)?iD(i,e,n+1):i}const sD=t=>e=>e.test(t),yW={test:t=>t==="auto",parse:t=>t},oD=[Wl,ce,ri,rs,o$,s$,yW],t1=t=>oD.find(sD(t));class aD extends Aw{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),uw(c))){const u=iD(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!L2.has(r)||e.length!==2)return;const[i,s]=e,o=t1(i),a=t1(s);if(o!==a)if(JE(o)&&JE(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)K$(e[i])&&r.push(i);r.length&&uW(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Al[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const s=n.getValue(r);s&&s.jump(this.measuredOrigin,!1);const o=i.length-1,a=i[o];i[o]=Al[r](n.measureViewportBox(),window.getComputedStyle(n.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{n.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const n1=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ws.test(t)||t==="0")&&!t.startsWith("url("));function vW(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function _W(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=n1(i,e),a=n1(s,e);return!o||!a?!1:vW(t)||(n==="spring"||vw(n))&&r}const xW=t=>t!==null;function Vm(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(xW),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const wW=40;class lD{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ii.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>wW?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&pW(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ii.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!_W(e,r,i,s))if(o)this.options.duration=0;else{l&&l(Vm(e,this.options,n)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,n);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...u},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const ut=(t,e,n)=>t+(e-t)*n;function iy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function bW({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=iy(l,a,t+1/3),s=iy(l,a,t),o=iy(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Cp(t,e){return n=>n>0?e:t}const sy=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},TW=[o0,Ro,Ha],SW=t=>TW.find(e=>e.test(t));function r1(t){const e=SW(t);if(!e)return!1;let n=e.parse(t);return e===Ha&&(n=bW(n)),n}const i1=(t,e)=>{const n=r1(t),r=r1(e);if(!n||!r)return Cp(t,e);const i={...n};return s=>(i.red=sy(n.red,r.red,s),i.green=sy(n.green,r.green,s),i.blue=sy(n.blue,r.blue,s),i.alpha=ut(n.alpha,r.alpha,s),Ro.transform(i))},EW=(t,e)=>n=>e(t(n)),Mh=(...t)=>t.reduce(EW),u0=new Set(["none","hidden"]);function kW(t,e){return u0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function CW(t,e){return n=>ut(t,e,n)}function Pw(t){return typeof t=="number"?CW:typeof t=="string"?uw(t)?Cp:dn.test(t)?i1:PW:Array.isArray(t)?cD:typeof t=="object"?dn.test(t)?i1:IW:Cp}function cD(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Pw(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function IW(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Pw(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function AW(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=t.indexes[o][i[o]],l=(n=t.values[a])!==null&&n!==void 0?n:0;r[s]=l,i[o]++}return r}const PW=(t,e)=>{const n=Ws.createTransformer(e),r=Ju(t),i=Ju(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?u0.has(t)&&!i.values.length||u0.has(e)&&!r.values.length?kW(t,e):Mh(cD(AW(r,i),i.values),n):Cp(t,e)};function uD(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ut(t,e,n):Pw(t)(t,e)}const RW=5;function hD(t,e,n){const r=Math.max(e-RW,0);return V2(n-t(r),e-r)}const yt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},oy=.001;function NW({duration:t=yt.duration,bounce:e=yt.bounce,velocity:n=yt.velocity,mass:r=yt.mass}){let i,s,o=1-e;o=Hi(yt.minDamping,yt.maxDamping,o),t=Hi(yt.minDuration,yt.maxDuration,Oi(t)),o<1?(i=c=>{const u=c*o,f=u*t,p=u-n,m=h0(c,o),y=Math.exp(-f);return oy-p/m*y},s=c=>{const f=c*o*t,p=f*n+n,m=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-f),_=h0(Math.pow(c,2),o);return(-i(c)+oy>0?-1:1)*((p-m)*y)/_}):(i=c=>{const u=Math.exp(-c*t),f=(c-n)*t+1;return-oy+u*f},s=c=>{const u=Math.exp(-c*t),f=(n-c)*(t*t);return u*f});const a=5/t,l=jW(i,s,a);if(t=Mi(t),isNaN(l))return{stiffness:yt.stiffness,damping:yt.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const DW=12;function jW(t,e,n){let r=n;for(let i=1;i<DW;i++)r=r-t(r)/e(r);return r}function h0(t,e){return t*Math.sqrt(1-e*e)}const MW=["duration","bounce"],OW=["stiffness","damping","mass"];function s1(t,e){return e.some(n=>t[n]!==void 0)}function LW(t){let e={velocity:yt.velocity,stiffness:yt.stiffness,damping:yt.damping,mass:yt.mass,isResolvedFromDuration:!1,...t};if(!s1(t,OW)&&s1(t,MW))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Hi(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:yt.mass,stiffness:i,damping:s}}else{const n=NW(t);e={...e,...n,mass:yt.mass},e.isResolvedFromDuration=!0}return e}function dD(t=yt.visualDuration,e=yt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:p,isResolvedFromDuration:m}=LW({...n,velocity:-Oi(n.velocity||0)}),y=p||0,_=c/(2*Math.sqrt(l*u)),x=o-s,v=Oi(Math.sqrt(l/u)),w=Math.abs(x)<5;r||(r=w?yt.restSpeed.granular:yt.restSpeed.default),i||(i=w?yt.restDelta.granular:yt.restDelta.default);let S;if(_<1){const I=h0(v,_);S=M=>{const k=Math.exp(-_*v*M);return o-k*((y+_*v*x)/I*Math.sin(I*M)+x*Math.cos(I*M))}}else if(_===1)S=I=>o-Math.exp(-v*I)*(x+(y+v*x)*I);else{const I=v*Math.sqrt(_*_-1);S=M=>{const k=Math.exp(-_*v*M),T=Math.min(I*M,300);return o-k*((y+_*v*x)*Math.sinh(T)+I*x*Math.cosh(T))/I}}const P={calculatedDuration:m&&f||null,next:I=>{const M=S(I);if(m)a.done=I>=f;else{let k=0;_<1&&(k=I===0?Mi(y):hD(S,I,M));const T=Math.abs(k)<=r,E=Math.abs(o-M)<=i;a.done=T&&E}return a.value=a.done?o:M,a},toString:()=>{const I=Math.min(P2(P),r0),M=R2(k=>P.next(I*k).value,I,30);return I+"ms "+M}};return P}function o1({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=t[0],p={done:!1,value:f},m=T=>a!==void 0&&T<a||l!==void 0&&T>l,y=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let _=n*e;const x=f+_,v=o===void 0?x:o(x);v!==x&&(_=v-f);const w=T=>-_*Math.exp(-T/r),S=T=>v+w(T),P=T=>{const E=w(T),C=S(T);p.done=Math.abs(E)<=c,p.value=p.done?v:C};let I,M;const k=T=>{m(p.value)&&(I=T,M=dD({keyframes:[p.value,y(p.value)],velocity:hD(S,T,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return k(0),{calculatedDuration:null,next:T=>{let E=!1;return!M&&I===void 0&&(E=!0,P(T),k(T)),I!==void 0&&T>=I?M.next(T-I):(!E&&P(T),p)}}}const VW=jh(.42,0,1,1),FW=jh(0,0,.58,1),fD=jh(.42,0,.58,1),UW=t=>Array.isArray(t)&&typeof t[0]!="number",BW={linear:tr,easeIn:VW,easeInOut:fD,easeOut:FW,circIn:Ew,circInOut:K2,circOut:q2,backIn:Sw,backInOut:W2,backOut:$2,anticipate:H2},a1=t=>{if(_w(t)){u2(t.length===4);const[e,n,r,i]=t;return jh(e,n,r,i)}else if(typeof t=="string")return BW[t];return t};function zW(t,e,n){const r=[],i=n||uD,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||tr:e;a=Mh(l,a)}r.push(a)}return r}function $W(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(u2(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=zW(e,r,i),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(u<t[f+1]);f++);const p=Cl(t[f],t[f+1],u);return a[f](p)};return n?u=>c(Hi(t[0],t[s-1],u)):c}function WW(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Cl(0,e,r);t.push(ut(n,1,i))}}function HW(t){const e=[0];return WW(e,t.length-1),e}function qW(t,e){return t.map(n=>n*e)}function KW(t,e){return t.map(()=>e||fD).splice(0,t.length-1)}function Ip({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=UW(r)?r.map(a1):a1(r),s={done:!1,value:e[0]},o=qW(n&&n.length===e.length?n:HW(e),t),a=$W(o,e,{ease:Array.isArray(i)?i:KW(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const GW=t=>{const e=({timestamp:n})=>t(n);return{start:()=>et.update(e,!0),stop:()=>$s(e),now:()=>Gt.isProcessing?Gt.timestamp:ii.now()}},YW={decay:o1,inertia:o1,tween:Ip,keyframes:Ip,spring:dD},QW=t=>t/100;class Rw extends lD{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:n,motionValue:r,element:i,keyframes:s}=this.options,o=(i==null?void 0:i.KeyframeResolver)||Aw,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=this.options,a=vw(n)?n:YW[n]||Ip;let l,c;a!==Ip&&typeof e[0]!="number"&&(l=Mh(QW,uD(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=P2(u));const{calculatedDuration:f}=u,p=f+i,m=p*(r+1)-i;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:T}=this.options;return{done:!0,value:T[T.length-1]}}const{finalKeyframe:i,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:f}=r;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:y,repeatDelay:_,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-p*(this.speed>=0?1:-1),w=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let S=this.currentTime,P=s;if(m){const T=Math.min(this.currentTime,u)/f;let E=Math.floor(T),C=T%1;!C&&T>=1&&(C=1),C===1&&E--,E=Math.min(E,m+1),!!(E%2)&&(y==="reverse"?(C=1-C,_&&(C-=_/f)):y==="mirror"&&(P=o)),S=Hi(0,1,C)*f}const I=w?{done:!1,value:l[0]}:P.next(S);a&&(I.value=a(I.value));let{done:M}=I;!w&&c!==null&&(M=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return k&&i!==void 0&&(I.value=Vm(l,this.options,i)),x&&x(I.value),k&&this.finish(),I}get duration(){const{resolved:e}=this;return e?Oi(e.calculatedDuration):0}get time(){return Oi(this.currentTime)}set time(e){e=Mi(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Oi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=GW,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const XW=new Set(["opacity","clipPath","filter","transform"]);function JW(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:n};l&&(c.offset=l);const u=D2(a,i);return Array.isArray(u)&&(c.easing=u),t.animate(c,{delay:r,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const ZW=rw(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ap=10,e8=2e4;function t8(t){return vw(t.type)||t.type==="spring"||!N2(t.ease)}function n8(t,e){const n=new Rw({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let s=0;for(;!r.done&&s<e8;)r=n.sample(s),i.push(r.value),s+=Ap;return{times:void 0,keyframes:i,duration:s-Ap,ease:"linear"}}const pD={anticipate:H2,backInOut:W2,circInOut:K2};function r8(t){return t in pD}class l1 extends lD{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:s}=this.options;this.resolver=new aD(s,(o,a)=>this.onKeyframesResolved(o,a),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&kp()&&r8(s)&&(s=pD[s]),t8(this.options)){const{onComplete:f,onUpdate:p,motionValue:m,element:y,..._}=this.options,x=n8(e,_);e=x.keyframes,e.length===1&&(e[1]=e[0]),r=x.duration,i=x.times,s=x.ease,o="keyframes"}const u=JW(a.owner.current,l,e,{...this.options,duration:r,times:i,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(qE(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:f}=this.options;a.set(Vm(e,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:i,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Oi(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Oi(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Mi(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return tr;const{animation:r}=n;qE(r,e)}return tr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:s,ease:o,times:a}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:f,element:p,...m}=this.options,y=new Rw({...m,keyframes:r,duration:i,type:s,ease:o,times:a,isGenerator:!0}),_=Mi(this.time);c.setWithVelocity(y.sample(_-Ap).value,y.sample(_).value,Ap)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:s,damping:o,type:a}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=n.owner.getProps();return ZW()&&r&&XW.has(r)&&!l&&!c&&!i&&s!=="mirror"&&o!==0&&a!=="inertia"}}const i8={type:"spring",stiffness:500,damping:25,restSpeed:10},s8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),o8={type:"keyframes",duration:.8},a8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},l8=(t,{keyframes:e})=>e.length>2?o8:ha.has(t)?t.startsWith("scale")?s8(e[1]):i8:a8;function c8({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const Nw=(t,e,n,r={},i,s)=>o=>{const a=yw(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Mi(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};c8(a)||(u={...u,...l8(t,u)}),u.duration&&(u.duration=Mi(u.duration)),u.repeatDelay&&(u.repeatDelay=Mi(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const p=Vm(u.keyframes,a);if(p!==void 0)return et.update(()=>{u.onUpdate(p),u.onComplete()}),new I$([])}return!s&&l1.supports(u)?new l1(u):new Rw(u)};function u8({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function mD(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var s;let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const f in l){const p=t.getValue(f,(s=t.latestValues[f])!==null&&s!==void 0?s:null),m=l[f];if(m===void 0||u&&u8(u,f))continue;const y={delay:n,...yw(o||{},f)};let _=!1;if(window.MotionHandoffAnimation){const v=F2(t);if(v){const w=window.MotionHandoffAnimation(v,f,et);w!==null&&(y.startTime=w,_=!0)}}s0(t,f),p.start(Nw(f,p,m,t.shouldReduceMotion&&L2.has(f)?{type:!1}:y,t,_));const x=p.animation;x&&c.push(x)}return a&&Promise.all(c).then(()=>{et.update(()=>{a&&z$(t,a)})}),c}function d0(t,e,n={}){var r;const i=Lm(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(s=n.transitionOverride);const o=i?()=>Promise.all(mD(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:p}=s;return h8(t,e,u+c,f,p,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(n.delay)])}function h8(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(d8).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(d0(c,e,{...s,delay:n+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function d8(t,e){return t.sortNodePosition(e)}function f8(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>d0(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=d0(t,e,n);else{const i=typeof e=="function"?Lm(t,e,n.custom):e;r=Promise.all(mD(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const p8=sw.length;function gD(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?gD(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<p8;n++){const r=sw[n],i=t.props[r];(Yu(i)||i===!1)&&(e[r]=i)}return e}const m8=[...iw].reverse(),g8=iw.length;function y8(t){return e=>Promise.all(e.map(({animation:n,options:r})=>f8(t,n,r)))}function v8(t){let e=y8(t),n=c1(),r=!0;const i=l=>(c,u)=>{var f;const p=Lm(t,u,l==="exit"?(f=t.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:m,transitionEnd:y,..._}=p;c={...c,..._,...y}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=gD(t.parent)||{},f=[],p=new Set;let m={},y=1/0;for(let x=0;x<g8;x++){const v=m8[x],w=n[v],S=c[v]!==void 0?c[v]:u[v],P=Yu(S),I=v===l?w.isActive:null;I===!1&&(y=x);let M=S===u[v]&&S!==c[v]&&P;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),w.protectedKeys={...m},!w.isActive&&I===null||!S&&!w.prevProp||Mm(S)||typeof S=="boolean")continue;const k=_8(w.prevProp,S);let T=k||v===l&&w.isActive&&!M&&P||x>y&&P,E=!1;const C=Array.isArray(S)?S:[S];let D=C.reduce(i(v),{});I===!1&&(D={});const{prevResolvedValues:A={}}=w,R={...A,...D},$=Z=>{T=!0,p.has(Z)&&(E=!0,p.delete(Z)),w.needsAnimating[Z]=!0;const B=t.getValue(Z);B&&(B.liveStyle=!1)};for(const Z in R){const B=D[Z],Q=A[Z];if(m.hasOwnProperty(Z))continue;let J=!1;n0(B)&&n0(Q)?J=!A2(B,Q):J=B!==Q,J?B!=null?$(Z):p.add(Z):B!==void 0&&p.has(Z)?$(Z):w.protectedKeys[Z]=!0}w.prevProp=S,w.prevResolvedValues=D,w.isActive&&(m={...m,...D}),r&&t.blockInitialAnimation&&(T=!1),T&&(!(M&&k)||E)&&f.push(...C.map(Z=>({animation:Z,options:{type:v}})))}if(p.size){const x={};p.forEach(v=>{const w=t.getBaseTarget(v),S=t.getValue(v);S&&(S.liveStyle=!0),x[v]=w??null}),f.push({animation:x})}let _=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(f):Promise.resolve()}function a(l,c){var u;if(n[l].isActive===c)return Promise.resolve();(u=t.variantChildren)===null||u===void 0||u.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),n[l].isActive=c;const f=o(l);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=c1(),r=!0}}}function _8(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!A2(e,t):!1}function po(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function c1(){return{animate:po(!0),whileInView:po(),whileHover:po(),whileTap:po(),whileDrag:po(),whileFocus:po(),exit:po()}}class Zs{constructor(e){this.isMounted=!1,this.node=e}update(){}}class x8 extends Zs{constructor(e){super(e),e.animationState||(e.animationState=v8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Mm(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let w8=0;class b8 extends Zs{constructor(){super(...arguments),this.id=w8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const T8={animation:{Feature:x8},exit:{Feature:b8}};function Zu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Oh(t){return{point:{x:t.pageX,y:t.pageY}}}const S8=t=>e=>xw(e)&&t(e,Oh(e));function uu(t,e,n,r){return Zu(t,e,S8(n),r)}const u1=(t,e)=>Math.abs(t-e);function E8(t,e){const n=u1(t.x,e.x),r=u1(t.y,e.y);return Math.sqrt(n**2+r**2)}class yD{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=ly(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=E8(f.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:y}=f,{timestamp:_}=Gt;this.history.push({...y,timestamp:_});const{onStart:x,onMove:v}=this.handlers;p||(x&&x(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=ay(p,this.transformPagePoint),et.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=ly(f.type==="pointercancel"?this.lastMoveEventInfo:ay(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,x),y&&y(f,x)},!xw(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=Oh(e),a=ay(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Gt;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=n;u&&u(e,ly(a,this.history)),this.removeListeners=Mh(uu(this.contextWindow,"pointermove",this.handlePointerMove),uu(this.contextWindow,"pointerup",this.handlePointerUp),uu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),$s(this.updatePoint)}}function ay(t,e){return e?{point:e(t.point)}:t}function h1(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ly({point:t},e){return{point:t,delta:h1(t,vD(e)),offset:h1(t,k8(e)),velocity:C8(e,.1)}}function k8(t){return t[0]}function vD(t){return t[t.length-1]}function C8(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=vD(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Mi(e)));)n--;if(!r)return{x:0,y:0};const s=Oi(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const _D=1e-4,I8=1-_D,A8=1+_D,xD=.01,P8=0-xD,R8=0+xD;function rr(t){return t.max-t.min}function N8(t,e,n){return Math.abs(t-e)<=n}function d1(t,e,n,r=.5){t.origin=r,t.originPoint=ut(e.min,e.max,t.origin),t.scale=rr(n)/rr(e),t.translate=ut(n.min,n.max,t.origin)-t.originPoint,(t.scale>=I8&&t.scale<=A8||isNaN(t.scale))&&(t.scale=1),(t.translate>=P8&&t.translate<=R8||isNaN(t.translate))&&(t.translate=0)}function hu(t,e,n,r){d1(t.x,e.x,n.x,r?r.originX:void 0),d1(t.y,e.y,n.y,r?r.originY:void 0)}function f1(t,e,n){t.min=n.min+e.min,t.max=t.min+rr(e)}function D8(t,e,n){f1(t.x,e.x,n.x),f1(t.y,e.y,n.y)}function p1(t,e,n){t.min=e.min-n.min,t.max=t.min+rr(e)}function du(t,e,n){p1(t.x,e.x,n.x),p1(t.y,e.y,n.y)}function j8(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ut(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ut(n,t,r.max):Math.min(t,n)),t}function m1(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function M8(t,{top:e,left:n,bottom:r,right:i}){return{x:m1(t.x,n,i),y:m1(t.y,e,r)}}function g1(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function O8(t,e){return{x:g1(t.x,e.x),y:g1(t.y,e.y)}}function L8(t,e){let n=.5;const r=rr(t),i=rr(e);return i>r?n=Cl(e.min,e.max-r,t.min):r>i&&(n=Cl(t.min,t.max-i,e.min)),Hi(0,1,n)}function V8(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const f0=.35;function F8(t=f0){return t===!1?t=0:t===!0&&(t=f0),{x:y1(t,"left","right"),y:y1(t,"top","bottom")}}function y1(t,e,n){return{min:v1(t,e),max:v1(t,n)}}function v1(t,e){return typeof t=="number"?t:t[e]||0}const _1=()=>({translate:0,scale:1,origin:0,originPoint:0}),qa=()=>({x:_1(),y:_1()}),x1=()=>({min:0,max:0}),_t=()=>({x:x1(),y:x1()});function lr(t){return[t("x"),t("y")]}function wD({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function U8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function B8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function cy(t){return t===void 0||t===1}function p0({scale:t,scaleX:e,scaleY:n}){return!cy(t)||!cy(e)||!cy(n)}function wo(t){return p0(t)||bD(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function bD(t){return w1(t.x)||w1(t.y)}function w1(t){return t&&t!=="0%"}function Pp(t,e,n){const r=t-n,i=e*r;return n+i}function b1(t,e,n,r,i){return i!==void 0&&(t=Pp(t,i,r)),Pp(t,n,r)+e}function m0(t,e=0,n=1,r,i){t.min=b1(t.min,e,n,r,i),t.max=b1(t.max,e,n,r,i)}function TD(t,{x:e,y:n}){m0(t.x,e.translate,e.scale,e.originPoint),m0(t.y,n.translate,n.scale,n.originPoint)}const T1=.999999999999,S1=1.0000000000001;function z8(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ga(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,TD(t,o)),r&&wo(s.latestValues)&&Ga(t,s.latestValues))}e.x<S1&&e.x>T1&&(e.x=1),e.y<S1&&e.y>T1&&(e.y=1)}function Ka(t,e){t.min=t.min+e,t.max=t.max+e}function E1(t,e,n,r,i=.5){const s=ut(t.min,t.max,i);m0(t,e,n,s,r)}function Ga(t,e){E1(t.x,e.x,e.scaleX,e.scale,e.originX),E1(t.y,e.y,e.scaleY,e.scale,e.originY)}function SD(t,e){return wD(B8(t.getBoundingClientRect(),e))}function $8(t,e,n){const r=SD(t,n),{scroll:i}=e;return i&&(Ka(r.x,i.offset.x),Ka(r.y,i.offset.y)),r}const ED=({current:t})=>t?t.ownerDocument.defaultView:null,W8=new WeakMap;class H8{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_t(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Oh(u).point)},s=(u,f)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=L$(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),lr(x=>{let v=this.getAxisMotionValue(x).get()||0;if(ri.test(v)){const{projection:w}=this.visualElement;if(w&&w.layout){const S=w.layout.layoutBox[x];S&&(v=rr(S)*(parseFloat(v)/100))}}this.originPoint[x]=v}),y&&et.postRender(()=>y(u,f)),s0(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(u,f)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:_}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:x}=f;if(m&&this.currentDirection===null){this.currentDirection=q8(x),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,x),this.updateAxis("y",f.point,x),this.visualElement.render(),_&&_(u,f)},a=(u,f)=>this.stop(u,f),l=()=>lr(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new yD(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:ED(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&et.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Nd(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=j8(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;n&&Wa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=M8(i.layoutBox,n):this.constraints=!1,this.elastic=F8(r),s!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&lr(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=V8(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Wa(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=$8(r,i.root,this.visualElement.getTransformPagePoint());let o=O8(i.layout.layoutBox,s);if(n){const a=n(U8(o));this.hasMutatedConstraints=!!a,a&&(o=wD(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=lr(u=>{if(!Nd(u,n,this.currentDirection))return;let f=l&&l[u]||{};o&&(f={min:0,max:0});const p=i?200:1e6,m=i?40:1e7,y={type:"inertia",velocity:r?e[u]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(u,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return s0(this.visualElement,e),r.start(Nw(e,r,0,n,this.visualElement,!1))}stopAnimation(){lr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){lr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){lr(n=>{const{drag:r}=this.getProps();if(!Nd(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-ut(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Wa(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};lr(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=L8({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),lr(o=>{if(!Nd(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ut(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;W8.set(this.visualElement,this);const e=this.visualElement.current,n=uu(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Wa(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),et.read(r);const o=Zu(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(lr(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=f0,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Nd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function q8(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class K8 extends Zs{constructor(e){super(e),this.removeGroupControls=tr,this.removeListeners=tr,this.controls=new H8(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tr}unmount(){this.removeGroupControls(),this.removeListeners()}}const k1=t=>(e,n)=>{t&&et.postRender(()=>t(e,n))};class G8 extends Zs{constructor(){super(...arguments),this.removePointerDownListener=tr}onPointerDown(e){this.session=new yD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ED(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:k1(e),onStart:k1(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&et.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=uu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function C1(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const xc={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ce.test(t))t=parseFloat(t);else return t;const n=C1(t,e.target.x),r=C1(t,e.target.y);return`${n}% ${r}%`}},Y8={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Ws.parse(t);if(i.length>5)return r;const s=Ws.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=ut(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class Q8 extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;g$(X8),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Tf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,o=r.projection;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||et.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),aw.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kD(t){const[e,n]=l2(),r=j.useContext(Zx);return h.jsx(Q8,{...t,layoutGroup:r,switchLayoutGroup:j.useContext(g2),isPresent:e,safeToRemove:n})}const X8={borderRadius:{...xc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xc,borderTopRightRadius:xc,borderBottomLeftRadius:xc,borderBottomRightRadius:xc,boxShadow:Y8};function J8(t,e,n){const r=gn(t)?t:Xu(t);return r.start(Nw("",r,e,n)),r.animation}function Z8(t){return t instanceof SVGElement&&t.tagName!=="svg"}const eH=(t,e)=>t.depth-e.depth;class tH{constructor(){this.children=[],this.isDirty=!1}add(e){ww(this.children,e),this.isDirty=!0}remove(e){bw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(eH),this.isDirty=!1,this.children.forEach(e)}}function nH(t,e){const n=ii.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&($s(r),t(s-e))};return et.read(r,!0),()=>$s(r)}const CD=["TopLeft","TopRight","BottomLeft","BottomRight"],rH=CD.length,I1=t=>typeof t=="string"?parseFloat(t):t,A1=t=>typeof t=="number"||ce.test(t);function iH(t,e,n,r,i,s){i?(t.opacity=ut(0,n.opacity!==void 0?n.opacity:1,sH(r)),t.opacityExit=ut(e.opacity!==void 0?e.opacity:1,0,oH(r))):s&&(t.opacity=ut(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<rH;o++){const a=`border${CD[o]}Radius`;let l=P1(e,a),c=P1(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||A1(l)===A1(c)?(t[a]=Math.max(ut(I1(l),I1(c),r),0),(ri.test(c)||ri.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=ut(e.rotate||0,n.rotate||0,r))}function P1(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const sH=ID(0,.5,q2),oH=ID(.5,.95,tr);function ID(t,e,n){return r=>r<t?0:r>e?1:n(Cl(t,e,r))}function R1(t,e){t.min=e.min,t.max=e.max}function or(t,e){R1(t.x,e.x),R1(t.y,e.y)}function N1(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function D1(t,e,n,r,i){return t-=e,t=Pp(t,1/n,r),i!==void 0&&(t=Pp(t,1/i,r)),t}function aH(t,e=0,n=1,r=.5,i,s=t,o=t){if(ri.test(e)&&(e=parseFloat(e),e=ut(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ut(s.min,s.max,r);t===s&&(a-=e),t.min=D1(t.min,e,n,a,i),t.max=D1(t.max,e,n,a,i)}function j1(t,e,[n,r,i],s,o){aH(t,e[n],e[r],e[i],e.scale,s,o)}const lH=["x","scaleX","originX"],cH=["y","scaleY","originY"];function M1(t,e,n,r){j1(t.x,e,lH,n?n.x:void 0,r?r.x:void 0),j1(t.y,e,cH,n?n.y:void 0,r?r.y:void 0)}function O1(t){return t.translate===0&&t.scale===1}function AD(t){return O1(t.x)&&O1(t.y)}function L1(t,e){return t.min===e.min&&t.max===e.max}function uH(t,e){return L1(t.x,e.x)&&L1(t.y,e.y)}function V1(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function PD(t,e){return V1(t.x,e.x)&&V1(t.y,e.y)}function F1(t){return rr(t.x)/rr(t.y)}function U1(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class hH{constructor(){this.members=[]}add(e){ww(this.members,e),e.scheduleRender()}remove(e){if(bw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function dH(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:p,skewX:m,skewY:y}=n;c&&(r=`perspective(${c}px) ${r}`),u&&(r+=`rotate(${u}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),m&&(r+=`skewX(${m}deg) `),y&&(r+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const bo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Bc=typeof window<"u"&&window.MotionDebug!==void 0,uy=["","X","Y","Z"],fH={visibility:"hidden"},B1=1e3;let pH=0;function hy(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function RD(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=F2(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",et,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&RD(r)}function ND({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=pH++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Bc&&(bo.totalNodes=bo.resolvedTargetDeltas=bo.recalculatedProjection=0),this.nodes.forEach(yH),this.nodes.forEach(bH),this.nodes.forEach(TH),this.nodes.forEach(vH),Bc&&window.MotionDebug.record(bo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new tH)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Tw),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Z8(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),t){let f;const p=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=nH(p,250),Tf.hasAnimatedSinceResize&&(Tf.hasAnimatedSinceResize=!1,this.nodes.forEach($1))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||IH,{onLayoutAnimationStart:x,onLayoutAnimationComplete:v}=u.getProps(),w=!this.targetLayout||!PD(this.targetLayout,y)||m,S=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||p&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,S);const P={...yw(_,"layout"),onPlay:x,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(P.delay=0,P.type=!1),this.startAnimation(P)}else p||$1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,$s(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(SH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&RD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(z1);return}this.isUpdating||this.nodes.forEach(xH),this.isUpdating=!1,this.nodes.forEach(wH),this.nodes.forEach(mH),this.nodes.forEach(gH),this.clearAllSnapshots();const a=ii.now();Gt.delta=Hi(0,1e3/60,a-Gt.timestamp),Gt.timestamp=a,Gt.isProcessing=!0,ty.update.process(Gt),ty.preRender.process(Gt),ty.render.process(Gt),Gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,aw.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(_H),this.sharedNodes.forEach(EH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,et.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){et.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_t(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!AD(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||wo(this.latestValues)||u)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),AH(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return _t();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(PH))){const{scroll:u}=this.root;u&&(Ka(l.x,u.offset.x),Ka(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=_t();if(or(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:p}=u;u!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&or(l,o),Ka(l.x,f.offset.x),Ka(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=_t();or(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Ga(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),wo(u.latestValues)&&Ga(l,u.latestValues)}return wo(this.latestValues)&&Ga(l,this.latestValues),l}removeTransform(o){const a=_t();or(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!wo(c.latestValues))continue;p0(c.latestValues)&&c.updateSnapshot();const u=_t(),f=c.measurePageBox();or(u,f),M1(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return wo(this.latestValues)&&M1(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=Gt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_t(),this.relativeTargetOrigin=_t(),du(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),or(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=_t(),this.targetWithTransforms=_t()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),D8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):or(this.target,this.layout.layoutBox),TD(this.target,this.targetDelta)):or(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_t(),this.relativeTargetOrigin=_t(),du(this.relativeTargetOrigin,this.target,m.target),or(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Bc&&bo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||p0(this.parent.latestValues)||bD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Gt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;or(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;z8(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=_t());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(N1(this.prevProjectionDelta.x,this.projectionDelta.x),N1(this.prevProjectionDelta.y,this.projectionDelta.y)),hu(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!U1(this.projectionDelta.x,this.prevProjectionDelta.x)||!U1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),Bc&&bo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qa(),this.projectionDelta=qa(),this.projectionDeltaWithTransform=qa()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=qa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=_t(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,_=m!==y,x=this.getStack(),v=!x||x.members.length<=1,w=!!(_&&!v&&this.options.crossfade===!0&&!this.path.some(CH));this.animationProgress=0;let S;this.mixTargetDelta=P=>{const I=P/1e3;W1(f.x,o.x,I),W1(f.y,o.y,I),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(du(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kH(this.relativeTarget,this.relativeTargetOrigin,p,I),S&&uH(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=_t()),or(S,this.relativeTarget)),_&&(this.animationValues=u,iH(u,c,this.latestValues,I,w,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&($s(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=et.update(()=>{Tf.hasAnimatedSinceResize=!0,this.currentAnimation=J8(0,B1,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(B1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&DD(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||_t();const f=rr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=rr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}or(a,l),Ga(a,u),hu(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new hH),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&hy("z",o,c,this.animationValues);for(let u=0;u<uy.length;u++)hy(`rotate${uy[u]}`,o,c,this.animationValues),hy(`skew${uy[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return fH;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=wf(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=wf(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!wo(this.latestValues)&&(_.transform=u?u({},""):"none",this.hasProjected=!1),_}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=dH(this.projectionDeltaWithTransform,this.treeScale,p),u&&(c.transform=u(p,c.transform));const{x:m,y}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const _ in Ep){if(p[_]===void 0)continue;const{correct:x,applyTo:v}=Ep[_],w=c.transform==="none"?p[_]:x(p[_],f);if(v){const S=v.length;for(let P=0;P<S;P++)c[v[P]]=w}else c[_]=w}return this.options.layoutId&&(c.pointerEvents=f===this?wf(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(z1),this.root.sharedNodes.clear()}}}function mH(t){t.updateLayout()}function gH(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=n.source!==t.layout.source;s==="size"?lr(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],m=rr(p);p.min=r[f].min,p.max=p.min+m}):DD(s,n.layoutBox,r)&&lr(f=>{const p=o?n.measuredBox[f]:n.layoutBox[f],m=rr(r[f]);p.max=p.min+m,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+m)});const a=qa();hu(a,r,n.layoutBox);const l=qa();o?hu(l,t.applyTransform(i,!0),n.measuredBox):hu(l,r,n.layoutBox);const c=!AD(a);let u=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const y=_t();du(y,n.layoutBox,p.layoutBox);const _=_t();du(_,r,m.layoutBox),PD(y,_)||(u=!0),f.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=y,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function yH(t){Bc&&bo.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function vH(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function _H(t){t.clearSnapshot()}function z1(t){t.clearMeasurements()}function xH(t){t.isLayoutDirty=!1}function wH(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function bH(t){t.resolveTargetDelta()}function TH(t){t.calcProjection()}function SH(t){t.resetSkewAndRotation()}function EH(t){t.removeLeadSnapshot()}function W1(t,e,n){t.translate=ut(e.translate,0,n),t.scale=ut(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function H1(t,e,n,r){t.min=ut(e.min,n.min,r),t.max=ut(e.max,n.max,r)}function kH(t,e,n,r){H1(t.x,e.x,n.x,r),H1(t.y,e.y,n.y,r)}function CH(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const IH={duration:.45,ease:[.4,0,.1,1]},q1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),K1=q1("applewebkit/")&&!q1("chrome/")?Math.round:tr;function G1(t){t.min=K1(t.min),t.max=K1(t.max)}function AH(t){G1(t.x),G1(t.y)}function DD(t,e,n){return t==="position"||t==="preserve-aspect"&&!N8(F1(e),F1(n),.2)}function PH(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const RH=ND({attachResizeListener:(t,e)=>Zu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),dy={current:void 0},jD=ND({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!dy.current){const t=new RH({});t.mount(window),t.setOptions({layoutScroll:!0}),dy.current=t}return dy.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),NH={pan:{Feature:G8},drag:{Feature:K8,ProjectionNode:jD,MeasureLayout:kD}};function Y1(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&et.postRender(()=>s(e,Oh(e)))}class DH extends Zs{mount(){const{current:e}=this.node;e&&(this.unmount=N$(e,n=>(Y1(this.node,n,"Start"),r=>Y1(this.node,r,"End"))))}unmount(){}}class jH extends Zs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Mh(Zu(this.node.current,"focus",()=>this.onFocus()),Zu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Q1(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&et.postRender(()=>s(e,Oh(e)))}class MH extends Zs{mount(){const{current:e}=this.node;e&&(this.unmount=O$(e,n=>(Q1(this.node,n,"Start"),(r,{success:i})=>Q1(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const g0=new WeakMap,fy=new WeakMap,OH=t=>{const e=g0.get(t.target);e&&e(t)},LH=t=>{t.forEach(OH)};function VH({root:t,...e}){const n=t||document;fy.has(n)||fy.set(n,{});const r=fy.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(LH,{root:t,...e})),r[i]}function FH(t,e,n){const r=VH(e);return g0.set(t,n),r.observe(t),()=>{g0.delete(t),r.unobserve(t)}}const UH={some:0,all:1};class BH extends Zs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:UH[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),p=c?u:f;p&&p(l)};return FH(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(zH(e,n))&&this.startObserver()}unmount(){}}function zH({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const $H={inView:{Feature:BH},tap:{Feature:MH},focus:{Feature:jH},hover:{Feature:DH}},WH={layout:{ProjectionNode:jD,MeasureLayout:kD}},y0={current:null},MD={current:!1};function HH(){if(MD.current=!0,!!nw)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>y0.current=t.matches;t.addListener(e),e()}else y0.current=!1}const qH=[...oD,dn,Ws],KH=t=>qH.find(sD(t)),X1=new WeakMap;function GH(t,e,n){for(const r in e){const i=e[r],s=n[r];if(gn(i))t.addValue(r,i);else if(gn(s))t.addValue(r,Xu(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Xu(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const J1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class YH{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Aw,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=ii.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,et.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Om(n),this.isVariantNode=p2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const y=p[m];l[m]!==void 0&&gn(y)&&y.set(l[m],!1)}}mount(e){this.current=e,X1.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),MD.current||HH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:y0.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){X1.delete(this.current),this.projection&&this.projection.unmount(),$s(this.notifyUpdate),$s(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ha.has(e),i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&et.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Il){const n=Il[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_t()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<J1.length;r++){const i=J1[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=GH(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Xu(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(rD(i)||G2(i))?i=parseFloat(i):!KH(i)&&Ws.test(n)&&(i=eD(e,n)),this.setBaseTarget(e,gn(i)?i.get():i)),gn(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const o=cw(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(i=o[e])}if(r&&i!==void 0)return i;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!gn(s)?s:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Tw),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class OD extends YH{constructor(){super(...arguments),this.KeyframeResolver=aD}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gn(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function QH(t){return window.getComputedStyle(t)}class XH extends OD{constructor(){super(...arguments),this.type="html",this.renderInstance=T2}readValueFromInstance(e,n){if(ha.has(n)){const r=Iw(n);return r&&r.default||0}else{const r=QH(e),i=(x2(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return SD(e,n)}build(e,n,r){dw(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return gw(e,n,r)}}class JH extends OD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=_t}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ha.has(n)){const r=Iw(n);return r&&r.default||0}return n=S2.has(n)?n:ow(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return C2(e,n,r)}build(e,n,r){fw(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){E2(e,n,r,i)}mount(e){this.isSVGTag=mw(e.tagName),super.mount(e)}}const ZH=(t,e)=>lw(t)?new JH(e):new XH(e,{allowProjection:t!==j.Fragment}),e7=E$({...T8,...$H,...NH,...WH},ZH),$e=U9(e7),t7=({name:t,size:e=18})=>{let n="";switch(t){case"FiGrid":n="M3 3h7v7H3zM14 3h7v7h-7zM14 14h7v7h-7zM3 14h7v7H3z";break;case"FiUsers":n="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2M9 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM17 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8z";break;case"FiPlusCircle":n="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zM12 8v8M8 12h8";break;case"FiMessageSquare":n="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z";break;case"FiActivity":n="M22 12h-4l-3 9L9 3l-3 9H2";break;case"FiList":n="M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01";break;default:return null}return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:n})})},n7=()=>h.jsxs("div",{className:"flex items-center gap-2 py-3",children:[h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"#22d3ee",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-7 h-7",children:[h.jsx("path",{d:"M12 2a10 10 0 0 0-7 3c-1.5 1.5-2 4.5-2 7a10 10 0 0 0 14 0c0-2.5.5-5.5 2-7a10 10 0 0 0-7-3z",fill:"rgba(34, 211, 238, 0.1)"}),h.jsx("circle",{cx:"9",cy:"11",r:"1.5",fill:"#22d3ee"}),h.jsx("circle",{cx:"15",cy:"13",r:"1.5",fill:"#22d3ee"}),h.jsx("path",{d:"M10.5 11.5 L13.5 12.5",stroke:"#22d3ee",strokeWidth:"2"})]}),h.jsx("span",{className:"text-xl font-bold text-white",children:"PT Manager"})]}),r7=[{to:"/",iconKey:"FiGrid",label:"Dashboard"},{to:"/clients",iconKey:"FiUsers",label:"Clienti"},{to:"/new",iconKey:"FiPlusCircle",label:"Nuovo Cliente"},{to:"/admin/chat",iconKey:"FiMessageSquare",label:"Chat Admin"},{to:"/updates",iconKey:"FiActivity",label:"Aggiornamenti"},{to:"/plans",iconKey:"FiList",label:"Piani/Schede"}],i7=[{to:"/coach/dashboard",iconKey:"FiGrid",label:"Dashboard"},{to:"/coach/clients",iconKey:"FiUsers",label:"Clienti"},{to:"/coach/chat",iconKey:"FiMessageSquare",label:"Chat"}],s7=({to:t,iconKey:e,label:n,onClick:r,location:i,role:s})=>{let o=!1;const a=i.pathname||"";return s==="owner"?o=t==="/"&&a==="/"||t!=="/"&&a.startsWith(t):s==="coach"&&(o=a===t||a.startsWith(t+"/")),h.jsxs("button",{onClick:r,className:`flex items-center gap-3 w-full p-2.5 rounded-md text-sm transition-colors ${o?"bg-cyan-500/20 text-white font-semibold shadow-md":"text-zinc-300 hover:bg-white/10 hover:text-white"}`,children:[h.jsx(t7,{name:e,size:18}),h.jsx("span",{children:n})]})},Z1=({onLinkClick:t,role:e})=>{const n=Wt(),r=Mr(),i=Ki(),s=e==="coach"?i7:r7,o=()=>{cp(r).then(()=>{n("/login")}).catch(l=>{console.error("Errore durante il logout:",l),n("/login")})},a=()=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),h.jsx("polyline",{points:"16 17 21 12 16 7"}),h.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]});return h.jsxs("aside",{className:"w-64 bg-zinc-900/90 backdrop-blur-xl p-4 flex flex-col border-r border-white/20 shadow-2xl h-full text-white",children:[h.jsx("div",{className:"px-4 border-b border-white/10 mb-4",children:h.jsx(n7,{})}),h.jsx("nav",{className:"flex flex-col gap-2 flex-1",children:s.map(l=>h.jsx(s7,{to:l.to,iconKey:l.iconKey,label:l.label,location:i,role:e,onClick:()=>{n(l.to),t&&t()}},l.to))}),h.jsx("div",{className:"mt-4 pt-4 border-t border-white/10",children:h.jsxs("button",{onClick:o,className:"w-full flex items-center justify-center gap-3 px-4 py-2 bg-red-600/30 text-red-300 rounded-lg font-semibold hover:bg-red-600/40 transition-colors",children:[h.jsx(a,{}),h.jsx("span",{className:"text-sm",children:"Logout"})]})})]})};function ek({role:t="owner"}){var u;const[e,n]=j.useState(!1),r=Ki(),o=(((u=Mr().currentUser)==null?void 0:u.email)||(t==="coach"?"Coach":"Admin")).split("@")[0],a=t==="coach"?"Coach":"Admin",l=({size:f})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:f,height:f,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),h.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),h.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),c=({size:f})=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:f,height:f,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),h.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]});return h.jsxs("div",{className:"relative min-h-screen text-white flex",children:[h.jsx(o7,{}),h.jsx("div",{className:"hidden md:flex md:fixed h-screen z-30",children:h.jsx(Z1,{role:t})}),h.jsxs(ua,{children:[e&&h.jsx($e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>n(!1),className:"fixed inset-0 bg-black/50 z-40 md:hidden"}),e&&h.jsx($e.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 left-0 h-screen w-64 z-50 md:hidden",children:h.jsx(Z1,{onLinkClick:()=>n(!1),role:t})})]}),h.jsxs("div",{className:"flex-1 md:ml-64 min-h-screen bg-zinc-800/80 backdrop-blur-sm",children:[h.jsxs("header",{className:"md:hidden sticky top-0 bg-zinc-900/90 backdrop-blur-lg h-16 flex items-center justify-between px-4 border-b border-white/10 z-40",children:[h.jsx("button",{onClick:()=>n(!e),className:"text-white p-1",children:e?h.jsx(c,{size:24}):h.jsx(l,{size:24})}),h.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2",children:h.jsxs("p",{className:"text-sm font-semibold text-white",children:[a," Portal"]})}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsxs("span",{className:"text-sm text-zinc-300 hidden sm:inline",children:["Ciao, ",o,"!"]})})]}),h.jsx("main",{className:"p-4 sm:p-6 lg:p-8",children:h.jsx($e.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeInOut"},children:h.jsx(AP,{})},r.pathname)})]})]})}const o7=()=>h.jsxs("div",{className:"fixed inset-0 -z-10 overflow-hidden bg-[#0a0a0a]",children:[h.jsx($e.div,{className:"absolute top-[10%] left-[5%] h-[500px] w-[500px] rounded-full bg-purple-600/30 filter blur-3xl opacity-70",animate:{x:[0,150,-50,0],y:[0,-50,100,0],scale:[1,1.4,.9,1]},transition:{duration:40,repeat:1/0,repeatType:"mirror"}}),h.jsx($e.div,{className:"absolute bottom-[10%] right-[5%] h-[500px] w-[500px] rounded-full bg-cyan-500/30 filter blur-3xl opacity-70",animate:{x:[0,-100,50,0],y:[0,100,-50,0],scale:[1,.9,1.3,1]},transition:{duration:45,repeat:1/0,repeatType:"mirror",delay:7}})]});function a7(){Wt();const[t,e]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(""),o=async a=>{a.preventDefault(),s("");try{await hR(Tp,t,n),sessionStorage.setItem("app_role","admin")}catch(l){s("Credenziali non valide. Riprova."),console.error("Errore di login admin:",l)}};return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background text-foreground",children:h.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-card rounded-2xl border border-white/10 shadow-2xl",children:[h.jsx("h2",{className:"text-3xl font-bold text-center text-white",children:"Accesso Admin"}),h.jsxs("form",{onSubmit:o,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block mb-1 text-sm font-medium text-muted",children:"Email"}),h.jsx("input",{type:"email",value:t,onChange:a=>e(a.target.value),required:!0,className:"w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",autoComplete:"email"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block mb-1 text-sm font-medium text-muted",children:"Password"}),h.jsx("input",{type:"password",value:n,onChange:a=>r(a.target.value),required:!0,className:"w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",autoComplete:"current-password"})]}),i&&h.jsx("p",{className:"text-red-400 text-sm text-center",children:i}),h.jsx("div",{children:h.jsx("button",{type:"submit",className:"w-full px-4 py-2.5 font-bold text-white bg-primary rounded-lg hover:bg-primary/80",children:"Accedi"})})]})]})})}var LD={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},tk=it.createContext&&it.createContext(LD),l7=["attr","size","title"];function c7(t,e){if(t==null)return{};var n=u7(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function u7(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Rp(){return Rp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rp.apply(this,arguments)}function nk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Np(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nk(Object(n),!0).forEach(function(r){h7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function h7(t,e,n){return e=d7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d7(t){var e=f7(t,"string");return typeof e=="symbol"?e:e+""}function f7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VD(t){return t&&t.map((e,n)=>it.createElement(e.tag,Np({key:n},e.attr),VD(e.child)))}function Se(t){return e=>it.createElement(p7,Rp({attr:Np({},t.attr)},e),VD(t.child))}function p7(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=c7(t,l7),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),it.createElement("svg",Rp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Np(Np({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&it.createElement("title",null,s),t.children)};return tk!==void 0?it.createElement(tk.Consumer,null,n=>e(n)):e(LD)}function m7(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"},child:[]},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"},child:[]}]})(t)}function da(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"},child:[]},{tag:"polyline",attr:{points:"12 19 5 12 12 5"},child:[]}]})(t)}function FD(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"},child:[]},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"},child:[]},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"},child:[]}]})(t)}function g7(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"},child:[]},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"},child:[]}]})(t)}function Dw(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},child:[]},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"},child:[]},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"},child:[]},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"},child:[]}]})(t)}function UD(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"},child:[]}]})(t)}function jw(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},child:[]},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"},child:[]}]})(t)}function Dp(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 11 12 14 22 4"},child:[]},{tag:"path",attr:{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"},child:[]}]})(t)}function BD(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"},child:[]}]})(t)}function zD(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"},child:[]}]})(t)}function y7(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"18 15 12 9 6 15"},child:[]}]})(t)}function v7(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"polyline",attr:{points:"12 6 12 12 16 14"},child:[]}]})(t)}function _7(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"},child:[]}]})(t)}function fa(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"},child:[]},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"},child:[]}]})(t)}function x7(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"},child:[]}]})(t)}function $D(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"},child:[]},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"},child:[]}]})(t)}function WD(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"},child:[]},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"},child:[]}]})(t)}function Mw(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"},child:[]},{tag:"polyline",attr:{points:"14 2 14 8 20 8"},child:[]},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"},child:[]},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"},child:[]},{tag:"polyline",attr:{points:"10 9 9 9 8 9"},child:[]}]})(t)}function w7(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"},child:[]}]})(t)}function rk(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"},child:[]}]})(t)}function b7(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"},child:[]}]})(t)}function T7(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(t)}function S7(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"},child:[]},{tag:"polyline",attr:{points:"22,6 12,13 2,6"},child:[]}]})(t)}function E7(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"},child:[]}]})(t)}function Ow(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"},child:[]}]})(t)}function Fm(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"},child:[]},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"},child:[]}]})(t)}function Lw(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"},child:[]},{tag:"polyline",attr:{points:"1 20 1 14 7 14"},child:[]},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"},child:[]}]})(t)}function Vw(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"},child:[]},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"},child:[]},{tag:"polyline",attr:{points:"7 3 7 8 15 8"},child:[]}]})(t)}function HD(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"},child:[]},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},child:[]}]})(t)}function Fw(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"},child:[]},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"},child:[]}]})(t)}function k7(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"},child:[]}]})(t)}function Um(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"},child:[]},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"},child:[]},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"},child:[]},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"},child:[]}]})(t)}function C7(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]},{tag:"line",attr:{x1:"12",y1:"12",x2:"12",y2:"21"},child:[]},{tag:"path",attr:{d:"M20.39 18.39A5 5 0 0 0 18 9h-1.26A8 8 0 1 0 3 16.3"},child:[]},{tag:"polyline",attr:{points:"16 16 12 12 8 16"},child:[]}]})(t)}function I7(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"8.5",cy:"7",r:"4"},child:[]},{tag:"line",attr:{x1:"20",y1:"8",x2:"20",y2:"14"},child:[]},{tag:"line",attr:{x1:"23",y1:"11",x2:"17",y2:"11"},child:[]}]})(t)}function Uw(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},child:[]},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"},child:[]}]})(t)}function A7(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"},child:[]},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"},child:[]},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"},child:[]}]})(t)}function Bw(t){return Se({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(t)}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Lh(t){return t+.5|0}const _s=(t,e,n)=>Math.max(Math.min(t,n),e);function zc(t){return _s(Lh(t*2.55),0,255)}function Os(t){return _s(Lh(t*255),0,255)}function Ti(t){return _s(Lh(t/2.55)/100,0,1)}function ik(t){return _s(Lh(t*100),0,100)}const ar={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},v0=[..."0123456789ABCDEF"],P7=t=>v0[t&15],R7=t=>v0[(t&240)>>4]+v0[t&15],Dd=t=>(t&240)>>4===(t&15),N7=t=>Dd(t.r)&&Dd(t.g)&&Dd(t.b)&&Dd(t.a);function D7(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&ar[t[1]]*17,g:255&ar[t[2]]*17,b:255&ar[t[3]]*17,a:e===5?ar[t[4]]*17:255}:(e===7||e===9)&&(n={r:ar[t[1]]<<4|ar[t[2]],g:ar[t[3]]<<4|ar[t[4]],b:ar[t[5]]<<4|ar[t[6]],a:e===9?ar[t[7]]<<4|ar[t[8]]:255})),n}const j7=(t,e)=>t<255?e(t):"";function M7(t){var e=N7(t)?P7:R7;return t?"#"+e(t.r)+e(t.g)+e(t.b)+j7(t.a,e):void 0}const O7=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qD(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function L7(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function V7(t,e,n){const r=qD(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function F7(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function zw(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=F7(n,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function $w(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(Os)}function Ww(t,e,n){return $w(qD,t,e,n)}function U7(t,e,n){return $w(V7,t,e,n)}function B7(t,e,n){return $w(L7,t,e,n)}function KD(t){return(t%360+360)%360}function z7(t){const e=O7.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?zc(+e[5]):Os(+e[5]));const i=KD(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=U7(i,s,o):e[1]==="hsv"?r=B7(i,s,o):r=Ww(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function $7(t,e){var n=zw(t);n[0]=KD(n[0]+e),n=Ww(n),t.r=n[0],t.g=n[1],t.b=n[2]}function W7(t){if(!t)return;const e=zw(t),n=e[0],r=ik(e[1]),i=ik(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Ti(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const sk={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ok={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function H7(){const t={},e=Object.keys(ok),n=Object.keys(sk);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,sk[s]);s=parseInt(ok[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let jd;function q7(t){jd||(jd=H7(),jd.transparent=[0,0,0,0]);const e=jd[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const K7=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function G7(t){const e=K7.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?zc(o):_s(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?zc(r):_s(r,0,255)),i=255&(e[4]?zc(i):_s(i,0,255)),s=255&(e[6]?zc(s):_s(s,0,255)),{r,g:i,b:s,a:n}}}function Y7(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ti(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const py=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ea=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Q7(t,e,n){const r=Ea(Ti(t.r)),i=Ea(Ti(t.g)),s=Ea(Ti(t.b));return{r:Os(py(r+n*(Ea(Ti(e.r))-r))),g:Os(py(i+n*(Ea(Ti(e.g))-i))),b:Os(py(s+n*(Ea(Ti(e.b))-s))),a:t.a+n*(e.a-t.a)}}function Md(t,e,n){if(t){let r=zw(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Ww(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function GD(t,e){return t&&Object.assign(e||{},t)}function ak(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Os(t[3]))):(e=GD(t,{r:0,g:0,b:0,a:1}),e.a=Os(e.a)),e}function X7(t){return t.charAt(0)==="r"?G7(t):z7(t)}class eh{constructor(e){if(e instanceof eh)return e;const n=typeof e;let r;n==="object"?r=ak(e):n==="string"&&(r=D7(e)||q7(e)||X7(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=GD(this._rgb);return e&&(e.a=Ti(e.a)),e}set rgb(e){this._rgb=ak(e)}rgbString(){return this._valid?Y7(this._rgb):void 0}hexString(){return this._valid?M7(this._rgb):void 0}hslString(){return this._valid?W7(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=Q7(this._rgb,e._rgb,n)),this}clone(){return new eh(this.rgb)}alpha(e){return this._rgb.a=Os(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Lh(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Md(this._rgb,2,e),this}darken(e){return Md(this._rgb,2,-e),this}saturate(e){return Md(this._rgb,1,e),this}desaturate(e){return Md(this._rgb,1,-e),this}rotate(e){return $7(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function yi(){}const J7=(()=>{let t=0;return()=>t++})();function je(t){return t==null}function Rt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ce(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function bn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Br(t,e){return bn(t)?t:e}function we(t,e){return typeof t>"u"?e:t}const Z7=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Je(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Le(t,e,n,r){let i,s,o;if(Rt(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Ce(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function jp(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Mp(t){if(Rt(t))return t.map(Mp);if(Ce(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Mp(t[n[i]]);return e}return t}function YD(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function eq(t,e,n,r){if(!YD(t))return;const i=e[t],s=n[t];Ce(i)&&Ce(s)?th(i,s,r):e[t]=Mp(s)}function th(t,e,n){const r=Rt(e)?e:[e],i=r.length;if(!Ce(t))return t;n=n||{};const s=n.merger||eq;let o;for(let a=0;a<i;++a){if(o=r[a],!Ce(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function fu(t,e){return th(t,e,{merger:tq})}function tq(t,e,n){if(!YD(t))return;const r=e[t],i=n[t];Ce(r)&&Ce(i)?fu(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Mp(i))}const lk={"":t=>t,x:t=>t.x,y:t=>t.y};function nq(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function rq(t){const e=nq(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Pl(t,e){return(lk[e]||(lk[e]=rq(e)))(t)}function Hw(t){return t.charAt(0).toUpperCase()+t.slice(1)}const nh=t=>typeof t<"u",Hs=t=>typeof t=="function",ck=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function iq(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const $t=Math.PI,Rr=2*$t,sq=Rr+$t,Op=Number.POSITIVE_INFINITY,oq=$t/180,Ir=$t/2,mo=$t/4,uk=$t*2/3,QD=Math.log10,si=Math.sign;function pu(t,e,n){return Math.abs(t-e)<n}function hk(t){const e=Math.round(t);t=pu(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(QD(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function aq(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function lq(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function rh(t){return!lq(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function cq(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function uq(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function No(t){return t*($t/180)}function hq(t){return t*(180/$t)}function dk(t){if(!bn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function dq(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*$t&&(s+=Rr),{angle:s,distance:i}}function _0(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function fq(t,e){return(t-e+sq)%Rr-$t}function qr(t){return(t%Rr+Rr)%Rr}function XD(t,e,n,r){const i=qr(t),s=qr(e),o=qr(n),a=qr(s-i),l=qr(o-i),c=qr(i-s),u=qr(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function Zn(t,e,n){return Math.max(e,Math.min(n,t))}function pq(t){return Zn(t,-32768,32767)}function xs(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function qw(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Do=(t,e,n,r)=>qw(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),mq=(t,e,n)=>qw(t,n,r=>t[r][e]>=n);function gq(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const JD=["push","pop","shift","splice","unshift"];function yq(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),JD.forEach(n=>{const r="_onData"+Hw(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function fk(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(JD.forEach(s=>{delete t[s]}),delete t._chartjs)}function ZD(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ej=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function tj(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,ej.call(window,()=>{r=!1,t.apply(e,n)}))}}function vq(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const Kw=t=>t==="start"?"left":t==="end"?"right":"center",hn=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,_q=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function xq(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:f,max:p,minDefined:m,maxDefined:y}=o.getUserBounds();if(m){if(i=Math.min(Do(l,u,f).lo,n?r:Do(e,u,o.getPixelForValue(f)).lo),c){const _=l.slice(0,i+1).reverse().findIndex(x=>!je(x[a.axis]));i-=Math.max(0,_)}i=Zn(i,0,r-1)}if(y){let _=Math.max(Do(l,o.axis,p,!0).hi+1,n?0:Do(e,u,o.getPixelForValue(p),!0).hi+1);if(c){const x=l.slice(_-1).findIndex(v=>!je(v[a.axis]));_+=Math.max(0,x)}s=Zn(_,i,r)-i}else s=r-i}return{start:i,count:s}}function wq(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const Od=t=>t===0||t===1,pk=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Rr/n)),mk=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Rr/n)+1,mu={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Ir)+1,easeOutSine:t=>Math.sin(t*Ir),easeInOutSine:t=>-.5*(Math.cos($t*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Od(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Od(t)?t:pk(t,.075,.3),easeOutElastic:t=>Od(t)?t:mk(t,.075,.3),easeInOutElastic(t){return Od(t)?t:t<.5?.5*pk(t*2,.1125,.45):.5+.5*mk(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-mu.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?mu.easeInBounce(t*2)*.5:mu.easeOutBounce(t*2-1)*.5+.5};function Gw(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function gk(t){return Gw(t)?t:new eh(t)}function my(t){return Gw(t)?t:new eh(t).saturate(.5).darken(.1).hexString()}const bq=["x","y","borderWidth","radius","tension"],Tq=["color","borderColor","backgroundColor"];function Sq(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Tq},numbers:{type:"number",properties:bq}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Eq(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const yk=new Map;function kq(t,e){e=e||{};const n=t+JSON.stringify(e);let r=yk.get(n);return r||(r=new Intl.NumberFormat(t,e),yk.set(n,r)),r}function nj(t,e,n){return kq(e,n).format(t)}const Cq={values(t){return Rt(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=Iq(t,n)}const o=QD(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),nj(t,r,l)}};function Iq(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var rj={formatters:Cq};function Aq(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:rj.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ea=Object.create(null),x0=Object.create(null);function gu(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function gy(t,e,n){return typeof e=="string"?th(gu(t,e),n):th(gu(t,""),e)}class Pq{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>my(i.backgroundColor),this.hoverBorderColor=(r,i)=>my(i.borderColor),this.hoverColor=(r,i)=>my(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return gy(this,e,n)}get(e){return gu(this,e)}describe(e,n){return gy(x0,e,n)}override(e,n){return gy(ea,e,n)}route(e,n,r,i){const s=gu(this,e),o=gu(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Ce(l)?Object.assign({},c,l):we(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var St=new Pq({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Sq,Eq,Aq]);function Rq(t){return!t||je(t.size)||je(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function vk(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function go(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function _k(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function w0(t,e,n,r){ij(t,e,n,r,null)}function ij(t,e,n,r,i){let s,o,a,l,c,u,f,p;const m=e.pointStyle,y=e.rotation,_=e.radius;let x=(y||0)*oq;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(x),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(_)||_<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,_,0,0,Rr):t.arc(n,r,_,0,Rr),t.closePath();break;case"triangle":u=i?i/2:_,t.moveTo(n+Math.sin(x)*u,r-Math.cos(x)*_),x+=uk,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*_),x+=uk,t.lineTo(n+Math.sin(x)*u,r-Math.cos(x)*_),t.closePath();break;case"rectRounded":c=_*.516,l=_-c,o=Math.cos(x+mo)*l,f=Math.cos(x+mo)*(i?i/2-c:l),a=Math.sin(x+mo)*l,p=Math.sin(x+mo)*(i?i/2-c:l),t.arc(n-f,r-a,c,x-$t,x-Ir),t.arc(n+p,r-o,c,x-Ir,x),t.arc(n+f,r+a,c,x,x+Ir),t.arc(n-p,r+o,c,x+Ir,x+$t),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*_,u=i?i/2:l,t.rect(n-u,r-l,2*u,2*l);break}x+=mo;case"rectRot":f=Math.cos(x)*(i?i/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(i?i/2:_),t.moveTo(n-f,r-a),t.lineTo(n+p,r-o),t.lineTo(n+f,r+a),t.lineTo(n-p,r+o),t.closePath();break;case"crossRot":x+=mo;case"cross":f=Math.cos(x)*(i?i/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(i?i/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"star":f=Math.cos(x)*(i?i/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(i?i/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o),x+=mo,f=Math.cos(x)*(i?i/2:_),o=Math.cos(x)*_,a=Math.sin(x)*_,p=Math.sin(x)*(i?i/2:_),t.moveTo(n-f,r-a),t.lineTo(n+f,r+a),t.moveTo(n+p,r-o),t.lineTo(n-p,r+o);break;case"line":o=i?i/2:Math.cos(x)*_,a=Math.sin(x)*_,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(x)*(i?i/2:_),r+Math.sin(x)*_);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ih(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Bm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function zm(t){t.restore()}function Nq(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Dq(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function jq(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),je(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Mq(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Oq(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function sh(t,e,n,r,i,s={}){const o=Rt(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,jq(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Oq(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),je(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),Mq(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Lp(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*$t,$t,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,$t,Ir,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Ir,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Ir,!0),t.lineTo(n+o.topLeft,r)}const Lq=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Vq=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Fq(t,e){const n=(""+t).match(Lq);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Uq=t=>+t||0;function sj(t,e){const n={},r=Ce(e),i=r?Object.keys(e):e,s=Ce(t)?r?o=>we(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=Uq(s(o));return n}function oj(t){return sj(t,{top:"y",right:"x",bottom:"y",left:"x"})}function al(t){return sj(t,["topLeft","topRight","bottomLeft","bottomRight"])}function yr(t){const e=oj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function yn(t,e){t=t||{},e=e||St.font;let n=we(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=we(t.style,e.style);r&&!(""+r).match(Vq)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:we(t.family,e.family),lineHeight:Fq(we(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:we(t.weight,e.weight),string:""};return i.string=Rq(i),i}function Ld(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function Bq(t,e,n){const{min:r,max:i}=t,s=Z7(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function pa(t,e){return Object.assign(Object.create(t),e)}function Yw(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=uj("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>Yw([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return lj(a,l,()=>Yq(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return wk(a).includes(l)},ownKeys(a){return wk(a)},set(a,l,c){const u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function Rl(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:aj(t,r),setContext:s=>Rl(t,s,n,r),override:s=>Rl(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return lj(s,o,()=>$q(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function aj(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Hs(n)?n:()=>n,isIndexable:Hs(r)?r:()=>r}}const zq=(t,e)=>t?t+Hw(e):e,Qw=(t,e)=>Ce(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function lj(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const r=n();return t[e]=r,r}function $q(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Hs(a)&&o.isScriptable(e)&&(a=Wq(e,a,t,n)),Rt(a)&&a.length&&(a=Hq(e,a,t,o.isIndexable)),Qw(e,a)&&(a=Rl(a,i,s&&s[e],o)),a}function Wq(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),Qw(t,l)&&(l=Xw(i._scopes,i,t,l)),l}function Hq(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Ce(e[0])){const l=e,c=i._scopes.filter(u=>u!==l);e=[];for(const u of l){const f=Xw(c,i,t,u);e.push(Rl(f,s,o&&o[t],a))}}return e}function cj(t,e,n){return Hs(t)?t(e,n):t}const qq=(t,e)=>t===!0?e:typeof t=="string"?Pl(e,t):void 0;function Kq(t,e,n,r,i){for(const s of e){const o=qq(n,s);if(o){t.add(o);const a=cj(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function Xw(t,e,n,r){const i=e._rootScopes,s=cj(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=xk(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=xk(a,o,s,l,r),l===null)?!1:Yw(Array.from(a),[""],i,s,()=>Gq(e,n,r))}function xk(t,e,n,r,i){for(;n;)n=Kq(t,e,n,r,i);return n}function Gq(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Rt(i)&&Ce(n)?n:i||{}}function Yq(t,e,n,r){let i;for(const s of e)if(i=uj(zq(s,t),n),typeof i<"u")return Qw(t,i)?Xw(n,r,t,i):i}function uj(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function wk(t){let e=t._keys;return e||(e=t._keys=Qq(t._scopes)),e}function Qq(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}const Xq=Number.EPSILON||1e-14,Nl=(t,e)=>e<t.length&&!t[e].skip&&t[e],hj=t=>t==="x"?"y":"x";function Jq(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=_0(s,i),l=_0(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const f=r*c,p=r*u;return{previous:{x:s.x-f*(o.x-i.x),y:s.y-f*(o.y-i.y)},next:{x:s.x+p*(o.x-i.x),y:s.y+p*(o.y-i.y)}}}function Zq(t,e,n){const r=t.length;let i,s,o,a,l,c=Nl(t,0);for(let u=0;u<r-1;++u)if(l=c,c=Nl(t,u+1),!(!l||!c)){if(pu(e[u],0,Xq)){n[u]=n[u+1]=0;continue}i=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=i*o*e[u],n[u+1]=s*o*e[u])}}function eK(t,e,n="x"){const r=hj(n),i=t.length;let s,o,a,l=Nl(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Nl(t,c+1),!a)continue;const u=a[n],f=a[r];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${r}`]=f-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${r}`]=f+s*e[c])}}function tK(t,e="x"){const n=hj(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Nl(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Nl(t,o+1),!!l){if(c){const u=c[e]-l[e];i[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?si(i[o-1])!==si(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}Zq(t,i,s),eK(t,s,e)}function Vd(t,e,n){return Math.max(Math.min(t,n),e)}function nK(t,e){let n,r,i,s,o,a=ih(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&ih(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=Vd(i.cp1x,e.left,e.right),i.cp1y=Vd(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=Vd(i.cp2x,e.left,e.right),i.cp2y=Vd(i.cp2y,e.top,e.bottom)))}function rK(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")tK(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=Jq(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&nK(t,n)}function Jw(){return typeof window<"u"&&typeof document<"u"}function Zw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Vp(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const $m=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function iK(t,e){return $m(t).getPropertyValue(e)}const sK=["top","right","bottom","left"];function Bo(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=sK[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const oK=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function aK(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(oK(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function To(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=$m(n),s=i.boxSizing==="border-box",o=Bo(i,"padding"),a=Bo(i,"border","width"),{x:l,y:c,box:u}=aK(t,n),f=o.left+(u&&a.left),p=o.top+(u&&a.top);let{width:m,height:y}=e;return s&&(m-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-f)/m*n.width/r),y:Math.round((c-p)/y*n.height/r)}}function lK(t,e,n){let r,i;if(e===void 0||n===void 0){const s=t&&Zw(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=$m(s),l=Bo(a,"border","width"),c=Bo(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=Vp(a.maxWidth,s,"clientWidth"),i=Vp(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||Op,maxHeight:i||Op}}const Fd=t=>Math.round(t*10)/10;function cK(t,e,n,r){const i=$m(t),s=Bo(i,"margin"),o=Vp(i.maxWidth,t,"clientWidth")||Op,a=Vp(i.maxHeight,t,"clientHeight")||Op,l=lK(t,e,n);let{width:c,height:u}=l;if(i.boxSizing==="content-box"){const p=Bo(i,"border","width"),m=Bo(i,"padding");c-=m.width+p.width,u-=m.height+p.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=Fd(Math.min(c,o,l.maxWidth)),u=Fd(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Fd(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Fd(Math.floor(u*r))),{width:c,height:u}}function bk(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const uK=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Jw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Tk(t,e){const n=iK(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function So(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function hK(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function dK(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=So(t,i,n),a=So(i,s,n),l=So(s,e,n),c=So(o,a,n),u=So(a,l,n);return So(c,u,n)}const fK=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},pK=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ll(t,e,n){return t?fK(e,n):pK()}function dj(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function fj(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function pj(t){return t==="angle"?{between:XD,compare:fq,normalize:qr}:{between:xs,compare:(e,n)=>e-n,normalize:e=>e}}function Sk({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function mK(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=pj(r),l=e.length;let{start:c,end:u,loop:f}=t,p,m;if(f){for(c+=l,u+=l,p=0,m=l;p<m&&o(a(e[c%l][r]),i,s);++p)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:f,style:t.style}}function mj(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=pj(r),{start:u,end:f,loop:p,style:m}=mK(t,e,n),y=[];let _=!1,x=null,v,w,S;const P=()=>l(i,S,v)&&a(i,S)!==0,I=()=>a(s,v)===0||l(s,S,v),M=()=>_||P(),k=()=>!_||I();for(let T=u,E=u;T<=f;++T)w=e[T%o],!w.skip&&(v=c(w[r]),v!==S&&(_=l(v,i,s),x===null&&M()&&(x=a(v,i)===0?T:E),x!==null&&k()&&(y.push(Sk({start:x,end:T,loop:p,count:o,style:m})),x=null),E=T,S=v));return x!==null&&y.push(Sk({start:x,end:f,loop:p,count:o,style:m})),y}function gj(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=mj(r[i],t.points,e);s.length&&n.push(...s)}return n}function gK(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function yK(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function vK(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=gK(n,i,s,r);if(r===!0)return Ek(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return Ek(t,yK(n,o,l,c),n,e)}function Ek(t,e,n,r){return!r||!r.setContext||!n?e:_K(t,e,n,r)}function _K(t,e,n,r){const i=t._chart.getContext(),s=kk(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,f=e[0].start,p=f;function m(y,_,x,v){const w=a?-1:1;if(y!==_){for(y+=l;n[y%l].skip;)y-=w;for(;n[_%l].skip;)_+=w;y%l!==_%l&&(c.push({start:y%l,end:_%l,loop:x,style:v}),u=v,f=_%l)}}for(const y of e){f=a?f:y.start;let _=n[f%l],x;for(p=f+1;p<=y.end;p++){const v=n[p%l];x=kk(r.setContext(pa(i,{type:"segment",p0:_,p1:v,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:o}))),xK(x,u)&&m(f,p-1,y.loop,u),_=v,u=x}f<p-1&&m(f,p-1,y.loop,u)}return c}function kk(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function xK(t,e){if(!e)return!1;const n=[],r=function(i,s){return Gw(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Ud(t,e,n){return t.options.clip?t[n]:e[n]}function wK(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Ud(n,e,"left"),right:Ud(n,e,"right"),top:Ud(r,e,"top"),bottom:Ud(r,e,"bottom")}:e}function yj(t,e){const n=e._clip;if(n.disabled)return!1;const r=wK(e,t.chartArea);return{left:n.left===!1?0:r.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:r.right+(n.right===!0?0:n.right),top:n.top===!1?0:r.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:r.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class bK{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ej.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var _i=new bK;const Ck="transparent",TK={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=gk(t||Ck),i=r.valid&&gk(e||Ck);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class SK{constructor(e,n,r,i){const s=n[r];i=Ld([e.to,i,s,e.from]);const o=Ld([e.from,s,i]);this._active=!0,this._fn=e.fn||TK[e.type||typeof o],this._easing=mu[e.easing]||mu.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Ld([e.to,n,i,e.from]),this._from=Ld([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class vj{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ce(e))return;const n=Object.keys(St.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Ce(s))return;const o={};for(const a of n)o[a]=s[a];(Rt(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=kK(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&EK(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const u=n[c];let f=s[c];const p=r.get(c);if(f)if(p&&f.active()){f.update(p,u,a);continue}else f.cancel();if(!p||!p.duration){e[c]=u;continue}s[c]=f=new SK(p,e,c,u),i.push(f)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return _i.add(this._chart,r),!0}}function EK(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function kK(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Ik(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function CK(t,e,n){if(n===!1)return!1;const r=Ik(t,n),i=Ik(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function IK(t){let e,n,r,i;return Ce(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function _j(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function Ak(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(u=!0,r.all)continue;break}c=t.values[l],bn(c)&&(s||e===0||si(e)===si(c))&&(e+=c)}return!u&&!r.all?0:e}function AK(t,e){const{iScale:n,vScale:r}=e,i=n.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:t[u]};return a}function yy(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function PK(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function RK(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function NK(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function Pk(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function Rk(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=PK(s,o,r),f=e.length;let p;for(let m=0;m<f;++m){const y=e[m],{[l]:_,[c]:x}=y,v=y._stacks||(y._stacks={});p=v[c]=NK(i,u,_),p[a]=x,p._top=Pk(p,o,!0,r.type),p._bottom=Pk(p,o,!1,r.type);const w=p._visualValues||(p._visualValues={});w[a]=x}}function vy(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function DK(t,e){return pa(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function jK(t,e,n){return pa(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function wc(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const _y=t=>t==="reset"||t==="none",Nk=(t,e)=>e?t:Object.assign({},t),MK=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:_j(n,!0),values:null};class cl{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=yy(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&wc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(f,p,m,y)=>f==="x"?p:f==="r"?y:m,s=n.xAxisID=we(r.xAxisID,vy(e,"x")),o=n.yAxisID=we(r.yAxisID,vy(e,"y")),a=n.rAxisID=we(r.rAxisID,vy(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),u=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&fk(this._data,this),e._stacked&&wc(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Ce(n)){const i=this._cachedMeta;this._data=AK(n,i)}else if(r!==n){if(r){fk(r,this);const i=this._cachedMeta;wc(i),i._parsed=[]}n&&Object.isExtensible(n)&&yq(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=yy(n.vScale,n),n.stack!==r.stack&&(i=!0,wc(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&(Rk(this,n._parsed),n._stacked=yy(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],u,f,p;if(this._parsing===!1)r._parsed=i,r._sorted=!0,p=i;else{Rt(i[e])?p=this.parseArrayData(r,i,e,n):Ce(i[e])?p=this.parseObjectData(r,i,e,n):p=this.parsePrimitiveData(r,i,e,n);const m=()=>f[a]===null||c&&f[a]<c[a];for(u=0;u<n;++u)r._parsed[u+e]=f=p[u],l&&(m()&&(l=!1),c=f);r._sorted=l}o&&Rk(this,p)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,f=new Array(i);let p,m,y;for(p=0,m=i;p<m;++p)y=p+r,f[p]={[a]:u||s.parse(c[y],y),[l]:o.parse(n[y],y)};return f}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,u,f;for(l=0,c=i;l<c;++l)u=l+r,f=n[u],a[l]={x:s.parse(f[0],u),y:o.parse(f[1],u)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let u,f,p,m;for(u=0,f=i;u<f;++u)p=u+r,m=n[p],c[u]={x:s.parse(Pl(m,a),p),y:o.parse(Pl(m,l),p)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:_j(i,!0),values:n._stacks[e.axis]._visualValues};return Ak(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=Ak(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=MK(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:f}=RK(a);let p,m;function y(){m=i[p];const _=m[a.axis];return!bn(m[e.axis])||u>_||f<_}for(p=0;p<o&&!(!y()&&(this.updateRangeFromParsed(c,e,m,l),s));++p);if(s){for(p=o-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],bn(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=IK(we(this.options.clip,CK(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let u;for(r.dataset&&r.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const f=i[u];f.hidden||(f.active&&c?o.push(f):f.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=jK(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=DK(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&nh(r);if(a)return Nk(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),f=i?[`${e}Hover`,"hover",e,""]:[e,""],p=c.getOptionScopes(this.getDataset(),u),m=Object.keys(St.elements[e]),y=()=>this.getContext(r,i,n),_=c.resolveNamedOptions(p,m,y,f);return _.$shared&&(_.$shared=l,s[o]=Object.freeze(Nk(_,l))),_}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const u=this.chart.config,f=u.datasetAnimationScopeKeys(this._type,n),p=u.getOptionScopes(this.getDataset(),f);l=u.createResolver(p,this.getContext(e,r,n))}const c=new vj(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||_y(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){_y(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!_y(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&wc(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}fe(cl,"defaults",{}),fe(cl,"datasetElementType",null),fe(cl,"dataElementType",null);function OK(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=ZD(r.sort((i,s)=>i-s))}return t._cache.$bar}function LK(t){const e=t.iScale,n=OK(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(nh(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function VK(t,e,n,r){const i=n.barThickness;let s,o;return je(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function FK(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function UK(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function xj(t,e,n,r){return Rt(t)?UK(t,e,n,r):e[n.axis]=n.parse(t,r),e}function Dk(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,u,f,p;for(c=n,u=n+r;c<u;++c)p=e[c],f={},f[i.axis]=a||i.parse(o[c],c),l.push(xj(p,f,s,c));return l}function xy(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function BK(t,e,n){return t!==0?si(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function zK(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function $K(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=zK(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[jk(u,o,a,l)]=!0,i=c)),s[jk(i,o,a,l)]=!0,t.borderSkipped=s}function jk(t,e,n,r){return r?(t=WK(t,e,n),t=Mk(t,n,e)):t=Mk(t,e,n),t}function WK(t,e,n){return t===e?n:t===n?e:t}function Mk(t,e,n){return t==="start"?e:t==="end"?n:t}function HK(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class Sf extends cl{parsePrimitiveData(e,n,r,i){return Dk(e,n,r,i)}parseArrayData(e,n,r,i){return Dk(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,f=[];let p,m,y,_;for(p=r,m=r+i;p<m;++p)_=n[p],y={},y[s.axis]=s.parse(Pl(_,c),p),f.push(xj(Pl(_,u),y,o,p));return f}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=xy(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(n,i);for(let m=n;m<n+r;m++){const y=this.getParsed(m),_=s||je(y[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),x=this._calculateBarIndexPixels(m,u),v=(y._stacks||{})[a.axis],w={horizontal:c,base:_.base,enableBorderRadius:!v||xy(y._custom)||o===v._top||o===v._bottom,x:c?_.head:x.center,y:c?x.center:_.head,height:c?x.size:Math.abs(_.size),width:c?Math.abs(_.size):x.size};p&&(w.options=f||this.resolveDataElementOptions(m,e[m].active?"active":i));const S=w.options||e[m].options;$K(w,S,v,o),HK(w,S,u.ratio),this.updateElement(e[m],m,w,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=r.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[r.axis],c=u=>{const f=u._parsed.find(m=>m[r.axis]===l),p=f&&f[u.vScale.axis];if(je(p)||isNaN(p))return!0};for(const u of i)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[we(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||LK(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=xy(c);let f=l[n.axis],p=0,m=r?this.applyStack(n,l,r):f,y,_;m!==f&&(p=m-f,m=f),u&&(f=c.barStart,m=c.barEnd-c.barStart,f!==0&&si(f)!==si(c.barEnd)&&(p=0),p+=f);const x=!je(s)&&!u?s:p;let v=n.getPixelForValue(x);if(this.chart.getDataVisibility(e)?y=n.getPixelForValue(p+m):y=v,_=y-v,Math.abs(_)<o){_=BK(_,n,a)*o,f===a&&(v-=_/2);const w=n.getPixelForDecimal(0),S=n.getPixelForDecimal(1),P=Math.min(w,S),I=Math.max(w,S);v=Math.max(Math.min(v,I),P),y=v+_,r&&!u&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(y)-n.getValueForPixel(v))}if(v===n.getPixelForValue(a)){const w=si(_)*n.getLineWidthForValue(a)/2;v+=w,_-=w}return{size:_,base:v,head:y,center:y+_/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=we(i.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const u=s?this._getStackCount(e):n.stackCount,f=i.barThickness==="flex"?FK(e,n,i,u*c):VK(e,n,i,u*c),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(we(p,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+m;a=f.start+f.chunk*y+f.chunk/2,l=Math.min(o,f.chunk*f.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}fe(Sf,"id","bar"),fe(Sf,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),fe(Sf,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Ef extends cl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=xq(n,i,o);this._drawStart=a,this._drawCount=l,wq(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:f}=this._getSharedOptions(n,i),p=o.axis,m=a.axis,{spanGaps:y,segment:_}=this.options,x=rh(y)?y:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||s||i==="none",w=n+r,S=e.length;let P=n>0&&this.getParsed(n-1);for(let I=0;I<S;++I){const M=e[I],k=v?M:{};if(I<n||I>=w){k.skip=!0;continue}const T=this.getParsed(I),E=je(T[m]),C=k[p]=o.getPixelForValue(T[p],I),D=k[m]=s||E?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,T,l):T[m],I);k.skip=isNaN(C)||isNaN(D)||E,k.stop=I>0&&Math.abs(T[p]-P[p])>x,_&&(k.parsed=T,k.raw=c.data[I]),f&&(k.options=u||this.resolveDataElementOptions(I,M.active?"active":i)),v||this.updateElement(M,I,k,i),P=T}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}fe(Ef,"id","line"),fe(Ef,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),fe(Ef,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function yo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class eb{constructor(e){fe(this,"options");this.options=e||{}}static override(e){Object.assign(eb.prototype,e)}init(){}formats(){return yo()}parse(){return yo()}format(){return yo()}add(){return yo()}diff(){return yo()}startOf(){return yo()}endOf(){return yo()}}var qK={_date:eb};function KK(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?mq:Do;if(r){if(i._sharedOptions){const u=s[0],f=typeof u.getRange=="function"&&u.getRange(e);if(f){const p=c(s,e,n-f),m=c(s,e,n+f);return{lo:p.lo,hi:m.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:f}=i._cachedMeta,{_parsed:p}=t,m=p.slice(0,u.lo+1).reverse().findIndex(_=>!je(_[f.axis]));u.lo-=Math.max(0,m);const y=p.slice(u.hi).findIndex(_=>!je(_[f.axis]));u.hi+=Math.max(0,y)}return u}}return{lo:0,hi:s.length-1}}function Wm(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:f,hi:p}=KK(s[a],e,o,i);for(let m=f;m<=p;++m){const y=u[m];y.skip||r(y,c,m)}}}function GK(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function wy(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Wm(t,n,e,function(a,l,c){!i&&!ih(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function YK(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:f}=dq(o,{x:e.x,y:e.y});XD(f,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return Wm(t,n,e,s),i}function QK(t,e,n,r,i,s){let o=[];const a=GK(n);let l=Number.POSITIVE_INFINITY;function c(u,f,p){const m=u.inRange(e.x,e.y,i);if(r&&!m)return;const y=u.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!m)return;const x=a(e,y);x<l?(o=[{element:u,datasetIndex:f,index:p}],l=x):x===l&&o.push({element:u,datasetIndex:f,index:p})}return Wm(t,n,e,c),o}function by(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?YK(t,e,n,i):QK(t,e,n,r,i,s)}function Ok(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Wm(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var XK={modes:{index(t,e,n,r){const i=To(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?wy(t,i,s,r,o):by(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,f=c.data[u];f&&!f.skip&&l.push({element:f,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,r){const i=To(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?wy(t,i,s,r,o):by(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,r){const i=To(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return wy(t,i,s,r,o)},nearest(t,e,n,r){const i=To(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return by(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=To(e,t);return Ok(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=To(e,t);return Ok(t,i,"y",n.intersect,r)}}};const wj=["left","top","right","bottom"];function bc(t,e){return t.filter(n=>n.pos===e)}function Lk(t,e){return t.filter(n=>wj.indexOf(n.pos)===-1&&n.box.axis===e)}function Tc(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function JK(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function ZK(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!wj.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function eG(t,e){const n=ZK(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&e.availableHeight)}return n}function tG(t){const e=JK(t),n=Tc(e.filter(c=>c.box.fullSize),!0),r=Tc(bc(e,"left"),!0),i=Tc(bc(e,"right")),s=Tc(bc(e,"top"),!0),o=Tc(bc(e,"bottom")),a=Lk(e,"x"),l=Lk(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:bc(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function Vk(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function bj(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function nG(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Ce(i)){n.size&&(t[i]-=n.size);const f=r[n.stack]||{size:0,count:1};f.size=Math.max(f.size,n.horizontal?s.height:s.width),n.size=f.size/f.count,t[i]+=n.size}s.getPadding&&bj(o,s.getPadding());const a=Math.max(0,e.outerWidth-Vk(o,t,"left","right")),l=Math.max(0,e.outerHeight-Vk(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function rG(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function iG(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function $c(t,e,n,r){const i=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,iG(a.horizontal,e));const{same:f,other:p}=nG(e,n,a,r);c|=f&&i.length,u=u||p,l.fullSize||i.push(a)}return c&&$c(i,e,n,r)||u}function Bd(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Fk(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const f=e.w*u,p=c.size||l.height;nh(c.start)&&(o=c.start),l.fullSize?Bd(l,i.left,o,n.outerWidth-i.right-i.left,p):Bd(l,e.left+c.placed,o,f,p),c.start=o,c.placed+=f,o=l.bottom}else{const f=e.h*u,p=c.size||l.width;nh(c.start)&&(s=c.start),l.fullSize?Bd(l,s,i.top,p,n.outerHeight-i.bottom-i.top):Bd(l,s,e.top+c.placed,p,f),c.start=s,c.placed+=f,s=l.right}}e.x=s,e.y=o}var fr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=yr(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=tG(t.boxes),l=a.vertical,c=a.horizontal;Le(t.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});const u=l.reduce((_,x)=>x.box.options&&x.box.options.display===!1?_:_+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),p=Object.assign({},i);bj(p,yr(r));const m=Object.assign({maxPadding:p,w:s,h:o,x:i.left,y:i.top},i),y=eG(l.concat(c),f);$c(a.fullSize,m,f,y),$c(l,m,f,y),$c(c,m,f,y)&&$c(l,m,f,y),rG(m),Fk(a.leftAndTop,m,f,y),m.x+=m.w,m.y+=m.h,Fk(a.rightAndBottom,m,f,y),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Le(a.chartArea,_=>{const x=_.box;Object.assign(x,t.chartArea),x.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Tj{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class sG extends Tj{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const kf="$chartjs",oG={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Uk=t=>t===null||t==="";function aG(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[kf]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Uk(i)){const s=Tk(t,"width");s!==void 0&&(t.width=s)}if(Uk(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=Tk(t,"height");s!==void 0&&(t.height=s)}return t}const Sj=uK?{passive:!0}:!1;function lG(t,e,n){t&&t.addEventListener(e,n,Sj)}function cG(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Sj)}function uG(t,e){const n=oG[t.type]||t.type,{x:r,y:i}=To(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Fp(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function hG(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Fp(a.addedNodes,r),o=o&&!Fp(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function dG(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Fp(a.removedNodes,r),o=o&&!Fp(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const oh=new Map;let Bk=0;function Ej(){const t=window.devicePixelRatio;t!==Bk&&(Bk=t,oh.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function fG(t,e){oh.size||window.addEventListener("resize",Ej),oh.set(t,e)}function pG(t){oh.delete(t),oh.size||window.removeEventListener("resize",Ej)}function mG(t,e,n){const r=t.canvas,i=r&&Zw(r);if(!i)return;const s=tj((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),fG(t,s),o}function Ty(t,e,n){n&&n.disconnect(),e==="resize"&&pG(t)}function gG(t,e,n){const r=t.canvas,i=tj(s=>{t.ctx!==null&&n(uG(s,t))},t);return lG(r,e,i),i}class yG extends Tj{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(aG(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[kf])return!1;const r=n[kf].initial;["height","width"].forEach(s=>{const o=r[s];je(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[kf],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:hG,detach:dG,resize:mG}[n]||gG;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:Ty,detach:Ty,resize:Ty}[n]||cG)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return cK(e,n,r,i)}isAttached(e){const n=e&&Zw(e);return!!(n&&n.isConnected)}}function vG(t){return!Jw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?sG:yG}var Jd;let eo=(Jd=class{constructor(){fe(this,"x");fe(this,"y");fe(this,"active",!1);fe(this,"options");fe(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return rh(this.x)&&rh(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},fe(Jd,"defaults",{}),fe(Jd,"defaultRoutes"),Jd);function _G(t,e){const n=t.options.ticks,r=xG(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?bG(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return TG(e,c,s,o/i),c;const u=wG(s,e,i);if(o>0){let f,p;const m=o>1?Math.round((l-a)/(o-1)):null;for(zd(e,c,u,je(m)?0:a-m,a),f=0,p=o-1;f<p;f++)zd(e,c,u,s[f],s[f+1]);return zd(e,c,u,l,je(m)?e.length:l+m),c}return zd(e,c,u),c}function xG(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function wG(t,e,n){const r=SG(t),i=e.length/n;if(!r)return Math.max(i,1);const s=aq(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function bG(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function TG(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function zd(t,e,n,r,i){const s=we(r,0),o=Math.min(we(i,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function SG(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const EG=t=>t==="left"?"right":t==="right"?"left":t,zk=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,$k=(t,e)=>Math.min(e||t,t);function Wk(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function kG(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function CG(t,e){Le(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function Sc(t){return t.drawTicks?t.tickLength:0}function Hk(t,e){if(!t.display)return 0;const n=yn(t.font,e),r=yr(t.padding);return(Rt(t.text)?t.text.length:1)*n.lineHeight+r.height}function IG(t,e){return pa(t,{scale:e,type:"scale"})}function AG(t,e,n){return pa(t,{tick:n,index:e,type:"tick"})}function PG(t,e,n){let r=Kw(t);return(n&&e!=="right"||!n&&e==="right")&&(r=EG(r)),r}function RG(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let f=0,p,m,y;const _=o-i,x=a-s;if(t.isHorizontal()){if(m=hn(r,s,a),Ce(n)){const v=Object.keys(n)[0],w=n[v];y=u[v].getPixelForValue(w)+_-e}else n==="center"?y=(c.bottom+c.top)/2+_-e:y=zk(t,n,e);p=a-s}else{if(Ce(n)){const v=Object.keys(n)[0],w=n[v];m=u[v].getPixelForValue(w)-x+e}else n==="center"?m=(c.left+c.right)/2-x+e:m=zk(t,n,e);y=hn(r,o,i),f=n==="left"?-Ir:Ir}return{titleX:m,titleY:y,maxWidth:p,rotation:f}}class Hl extends eo{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=Br(e,Number.POSITIVE_INFINITY),n=Br(n,Number.NEGATIVE_INFINITY),r=Br(r,Number.POSITIVE_INFINITY),i=Br(i,Number.NEGATIVE_INFINITY),{min:Br(e,r),max:Br(n,i),minDefined:bn(e),maxDefined:bn(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:Br(n,Br(r,n)),max:Br(r,Br(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Je(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Bq(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?Wk(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=_G(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Je(this.options.afterUpdate,[this])}beforeSetDimensions(){Je(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Je(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Je(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Je(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Je(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Je(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Je(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=$k(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const u=this._getLabelSizes(),f=u.widest.width,p=u.highest.height,m=Zn(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),f+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-Sc(e.grid)-n.padding-Hk(e.title,this.chart.options.font),c=Math.sqrt(f*f+p*p),o=hq(Math.min(Math.asin(Zn((u.highest.height+6)/a,-1,1)),Math.asin(Zn(l/c,-1,1))-Math.asin(Zn(p/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Je(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Je(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=Hk(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=Sc(s)+l):(e.height=this.maxHeight,e.width=Sc(s)+l),r.display&&this.ticks.length){const{first:c,last:u,widest:f,highest:p}=this._getLabelSizes(),m=r.padding*2,y=No(this.labelRotation),_=Math.cos(y),x=Math.sin(y);if(a){const v=r.mirror?0:x*f.width+_*p.height;e.height=Math.min(this.maxHeight,e.height+v+m)}else{const v=r.mirror?0:_*f.width+x*p.height;e.width=Math.min(this.maxWidth,e.width+v+m)}this._calculatePadding(c,u,x,_)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,m=0;l?c?(p=i*e.width,m=r*n.height):(p=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,m=n.width/2),this.paddingLeft=Math.max((p-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-f+o)*this.width/(this.width-f),0)}else{let u=n.height/2,f=e.height/2;s==="start"?(u=0,f=e.height):s==="end"&&(u=n.height,f=0),this.paddingTop=u+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Je(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)je(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=Wk(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/$k(n,r));let c=0,u=0,f,p,m,y,_,x,v,w,S,P,I;for(f=0;f<n;f+=l){if(y=e[f].label,_=this._resolveTickFontOptions(f),i.font=x=_.string,v=s[x]=s[x]||{data:{},gc:[]},w=_.lineHeight,S=P=0,!je(y)&&!Rt(y))S=vk(i,v.data,v.gc,S,y),P=w;else if(Rt(y))for(p=0,m=y.length;p<m;++p)I=y[p],!je(I)&&!Rt(I)&&(S=vk(i,v.data,v.gc,S,I),P+=w);o.push(S),a.push(P),c=Math.max(S,c),u=Math.max(P,u)}CG(s,n);const M=o.indexOf(c),k=a.indexOf(u),T=E=>({width:o[E]||0,height:a[E]||0});return{first:T(0),last:T(n-1),widest:T(M),highest:T(k),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return pq(this._alignToPixels?go(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=AG(this.getContext(),e,r))}return this.$context||(this.$context=IG(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=No(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),f=this.ticks.length+(l?1:0),p=Sc(s),m=[],y=a.setContext(this.getContext()),_=y.display?y.width:0,x=_/2,v=function(q){return go(r,q,_)};let w,S,P,I,M,k,T,E,C,D,A,R;if(o==="top")w=v(this.bottom),k=this.bottom-p,E=w-x,D=v(e.top)+x,R=e.bottom;else if(o==="bottom")w=v(this.top),D=e.top,R=v(e.bottom)-x,k=w+x,E=this.top+p;else if(o==="left")w=v(this.right),M=this.right-p,T=w-x,C=v(e.left)+x,A=e.right;else if(o==="right")w=v(this.left),C=e.left,A=v(e.right)-x,M=w+x,T=this.left+p;else if(n==="x"){if(o==="center")w=v((e.top+e.bottom)/2+.5);else if(Ce(o)){const q=Object.keys(o)[0],Z=o[q];w=v(this.chart.scales[q].getPixelForValue(Z))}D=e.top,R=e.bottom,k=w+x,E=k+p}else if(n==="y"){if(o==="center")w=v((e.left+e.right)/2);else if(Ce(o)){const q=Object.keys(o)[0],Z=o[q];w=v(this.chart.scales[q].getPixelForValue(Z))}M=w-x,T=M-p,C=e.left,A=e.right}const $=we(i.ticks.maxTicksLimit,f),W=Math.max(1,Math.ceil(f/$));for(S=0;S<f;S+=W){const q=this.getContext(S),Z=s.setContext(q),B=a.setContext(q),Q=Z.lineWidth,J=Z.color,me=B.dash||[],ue=B.dashOffset,xe=Z.tickWidth,qe=Z.tickColor,nt=Z.tickBorderDash||[],Ke=Z.tickBorderDashOffset;P=kG(this,S,l),P!==void 0&&(I=go(r,P,Q),c?M=T=C=A=I:k=E=D=R=I,m.push({tx1:M,ty1:k,tx2:T,ty2:E,x1:C,y1:D,x2:A,y2:R,width:Q,color:J,borderDash:me,borderDashOffset:ue,tickWidth:xe,tickColor:qe,tickBorderDash:nt,tickBorderDashOffset:Ke}))}return this._ticksLength=f,this._borderValue=w,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:f}=s,p=Sc(r.grid),m=p+u,y=f?-u:m,_=-No(this.labelRotation),x=[];let v,w,S,P,I,M,k,T,E,C,D,A,R="middle";if(i==="top")M=this.bottom-y,k=this._getXAxisLabelAlignment();else if(i==="bottom")M=this.top+y,k=this._getXAxisLabelAlignment();else if(i==="left"){const W=this._getYAxisLabelAlignment(p);k=W.textAlign,I=W.x}else if(i==="right"){const W=this._getYAxisLabelAlignment(p);k=W.textAlign,I=W.x}else if(n==="x"){if(i==="center")M=(e.top+e.bottom)/2+m;else if(Ce(i)){const W=Object.keys(i)[0],q=i[W];M=this.chart.scales[W].getPixelForValue(q)+m}k=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")I=(e.left+e.right)/2-m;else if(Ce(i)){const W=Object.keys(i)[0],q=i[W];I=this.chart.scales[W].getPixelForValue(q)}k=this._getYAxisLabelAlignment(p).textAlign}n==="y"&&(l==="start"?R="top":l==="end"&&(R="bottom"));const $=this._getLabelSizes();for(v=0,w=a.length;v<w;++v){S=a[v],P=S.label;const W=s.setContext(this.getContext(v));T=this.getPixelForTick(v)+s.labelOffset,E=this._resolveTickFontOptions(v),C=E.lineHeight,D=Rt(P)?P.length:1;const q=D/2,Z=W.color,B=W.textStrokeColor,Q=W.textStrokeWidth;let J=k;o?(I=T,k==="inner"&&(v===w-1?J=this.options.reverse?"left":"right":v===0?J=this.options.reverse?"right":"left":J="center"),i==="top"?c==="near"||_!==0?A=-D*C+C/2:c==="center"?A=-$.highest.height/2-q*C+C:A=-$.highest.height+C/2:c==="near"||_!==0?A=C/2:c==="center"?A=$.highest.height/2-q*C:A=$.highest.height-D*C,f&&(A*=-1),_!==0&&!W.showLabelBackdrop&&(I+=C/2*Math.sin(_))):(M=T,A=(1-D)*C/2);let me;if(W.showLabelBackdrop){const ue=yr(W.backdropPadding),xe=$.heights[v],qe=$.widths[v];let nt=A-ue.top,Ke=0-ue.left;switch(R){case"middle":nt-=xe/2;break;case"bottom":nt-=xe;break}switch(k){case"center":Ke-=qe/2;break;case"right":Ke-=qe;break;case"inner":v===w-1?Ke-=qe:v>0&&(Ke-=qe/2);break}me={left:Ke,top:nt,width:qe+ue.width,height:xe+ue.height,color:W.backdropColor}}x.push({label:P,font:E,textOffset:A,options:{rotation:_,color:Z,strokeColor:B,strokeWidth:Q,textAlign:J,textBaseline:R,translation:[I,M],backdrop:me}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-No(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,f,p;this.isHorizontal()?(c=go(e,this.left,o)-o/2,u=go(e,this.right,a)+a/2,f=p=l):(f=go(e,this.top,o)-o/2,p=go(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,f),n.lineTo(u,p),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Bm(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;sh(r,c,0,u,l,a)}i&&zm(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=yn(r.font),o=yr(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Ce(n)?(l+=o.bottom,Rt(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:f,rotation:p}=RG(this,l,n,a);sh(e,r.text,0,0,s,{color:r.color,maxWidth:f,rotation:p,textAlign:PG(a,n,i),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=we(e.grid&&e.grid.z,-1),i=we(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Hl.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return yn(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class $d{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;jG(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,NG(e,o,r),this.override&&St.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in St[i]&&(delete St[i][r],this.override&&delete ea[r])}}function NG(t,e,n){const r=th(Object.create(null),[n?St.get(n):{},St.get(e),t.defaults]);St.set(e,r),t.defaultRoutes&&DG(e,t.defaultRoutes),t.descriptors&&St.describe(e,t.descriptors)}function DG(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");St.route(s,i,l,a)})}function jG(t){return"id"in t&&"defaults"in t}class MG{constructor(){this.controllers=new $d(cl,"datasets",!0),this.elements=new $d(eo,"elements"),this.plugins=new $d(Object,"plugins"),this.scales=new $d(Hl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Le(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=Hw(e);Je(r["before"+i],[],r),n[e](r),Je(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Hr=new MG;class OG{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Je(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){je(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=we(r.options&&r.options.plugins,{}),s=LG(r);return i===!1&&!n?[]:FG(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function LG(t){const e={},n=[],r=Object.keys(Hr.plugins.items);for(let s=0;s<r.length;s++)n.push(Hr.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function VG(t,e){return!e&&t===!1?null:t===!0?{}:t}function FG(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=VG(r[l],i);c!==null&&s.push({plugin:a,options:UG(t.config,{plugin:a,local:n[l]},c,o)})}return s}function UG(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function b0(t,e){const n=St.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function BG(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function zG(t,e){return t===e?"_index_":"_value_"}function qk(t){if(t==="x"||t==="y"||t==="r")return t}function $G(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function T0(t,...e){if(qk(t))return t;for(const n of e){const r=n.axis||$G(n.position)||t.length>1&&qk(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Kk(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function WG(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return Kk(t,"x",n[0])||Kk(t,"y",n[0])}return{}}function HG(t,e){const n=ea[t.type]||{scales:{}},r=e.scales||{},i=b0(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Ce(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=T0(o,a,WG(o,t),St.scales[a.type]),c=zG(l,i),u=n.scales||{};s[o]=fu(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||b0(a,e),u=(ea[a]||{}).scales||{};Object.keys(u).forEach(f=>{const p=BG(f,l),m=o[p+"AxisID"]||p;s[m]=s[m]||Object.create(null),fu(s[m],[{axis:p},r[m],u[f]])})}),Object.keys(s).forEach(o=>{const a=s[o];fu(a,[St.scales[a.type],St.scale])}),s}function kj(t){const e=t.options||(t.options={});e.plugins=we(e.plugins,{}),e.scales=HG(t,e)}function Cj(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function qG(t){return t=t||{},t.data=Cj(t.data),kj(t),t}const Gk=new Map,Ij=new Set;function Wd(t,e){let n=Gk.get(t);return n||(n=e(),Gk.set(t,n),Ij.add(n)),n}const Ec=(t,e,n)=>{const r=Pl(e,n);r!==void 0&&t.add(r)};class KG{constructor(e){this._config=qG(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Cj(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),kj(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Wd(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Wd(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Wd(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return Wd(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(f=>Ec(l,e,f))),u.forEach(f=>Ec(l,i,f)),u.forEach(f=>Ec(l,ea[s]||{},f)),u.forEach(f=>Ec(l,St,f)),u.forEach(f=>Ec(l,x0,f))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Ij.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,ea[n]||{},St.datasets[n]||{},{type:n},St,x0]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Yk(this._resolverCache,e,i);let l=o;if(YG(o,n)){s.$shared=!1,r=Hs(r)?r():r;const c=this.createResolver(e,r,a);l=Rl(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=Yk(this._resolverCache,e,r);return Ce(n)?Rl(s,n,void 0,i):s}}function Yk(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:Yw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const GG=t=>Ce(t)&&Object.getOwnPropertyNames(t).some(e=>Hs(t[e]));function YG(t,e){const{isScriptable:n,isIndexable:r}=aj(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Hs(a)||GG(a))||o&&Rt(a))return!0}return!1}var QG="4.5.0";const XG=["top","bottom","left","right","chartArea"];function Qk(t,e){return t==="top"||t==="bottom"||XG.indexOf(t)===-1&&e==="x"}function Xk(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function Jk(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Je(n&&n.onComplete,[t],e)}function JG(t){const e=t.chart,n=e.options.animation;Je(n&&n.onProgress,[t],e)}function Aj(t){return Jw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Cf={},Zk=t=>{const e=Aj(t);return Object.values(Cf).filter(n=>n.canvas===e).pop()};function ZG(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function eY(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}var ns;let Hm=(ns=class{static register(...e){Hr.add(...e),eC()}static unregister(...e){Hr.remove(...e),eC()}constructor(e,n){const r=this.config=new KG(n),i=Aj(e),s=Zk(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||vG(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=J7(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new OG,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=vq(f=>this.update(f),o.resizeDelay||0),this._dataChanges=[],Cf[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}_i.listen(this,"complete",Jk),_i.listen(this,"progress",JG),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return je(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Hr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():bk(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return _k(this.canvas,this.ctx),this}stop(){return _i.stop(this),this}resize(e,n){_i.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,bk(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Je(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Le(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=T0(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Le(s,o=>{const a=o.options,l=a.id,c=T0(l,a),u=we(a.type,o.dtype);(a.position===void 0||Qk(a.position,c)!==Qk(o.dposition))&&(a.position=o.dposition),i[l]=!0;let f=null;if(l in r&&r[l].type===u)f=r[l];else{const p=Hr.getScale(u);f=new p({id:l,type:u,ctx:this.ctx,chart:this}),r[f.id]=f}f.init(a,e)}),Le(i,(o,a)=>{o||delete r[a]}),Le(r,o=>{fr.configure(this,o,o.options),fr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(Xk("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||b0(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Hr.getController(a),{datasetElementType:c,dataElementType:u}=St.datasets[a];Object.assign(l,{dataElementType:Hr.getElement(u),datasetElementType:c&&Hr.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Le(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:f}=this.getDatasetMeta(c),p=!i&&s.indexOf(f)===-1;f.buildOrUpdateElements(p),o=Math.max(+f.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||Le(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Xk("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Le(this.scales,e=>{fr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!ck(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;ZG(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!ck(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;fr.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Le(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Hs(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(_i.has(this)?this.attached&&!_i.running(this)&&_i.start(this):(this.draw(),Jk({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=yj(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&Bm(n,i),e.controller.draw(),i&&zm(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return ih(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=XK.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=pa(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);nh(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),_i.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),_k(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Cf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Le(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Le(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Le(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!jp(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(f=>u.datasetIndex===f.datasetIndex&&u.index===f.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=iq(e),c=eY(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Je(s.onHover,[e,a,this],this),l&&Je(s.onClick,[e,a,this],this));const u=!jp(a,i);return(u||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,u}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}},fe(ns,"defaults",St),fe(ns,"instances",Cf),fe(ns,"overrides",ea),fe(ns,"registry",Hr),fe(ns,"version",QG),fe(ns,"getChart",Zk),ns);function eC(){return Le(Hm.instances,t=>t._plugins.invalidate())}function Pj(t,e,n=e){t.lineCap=we(n.borderCapStyle,e.borderCapStyle),t.setLineDash(we(n.borderDash,e.borderDash)),t.lineDashOffset=we(n.borderDashOffset,e.borderDashOffset),t.lineJoin=we(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=we(n.borderWidth,e.borderWidth),t.strokeStyle=we(n.borderColor,e.borderColor)}function tY(t,e,n){t.lineTo(n.x,n.y)}function nY(t){return t.stepped?Nq:t.tension||t.cubicInterpolationMode==="monotone"?Dq:tY}function Rj(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!u?r+c-l:c-l}}function rY(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=Rj(i,n,r),u=nY(s);let{move:f=!0,reverse:p}=r||{},m,y,_;for(m=0;m<=c;++m)y=i[(a+(p?c-m:m))%o],!y.skip&&(f?(t.moveTo(y.x,y.y),f=!1):u(t,_,y,p,s.stepped),_=y);return l&&(y=i[(a+(p?c:0))%o],u(t,_,y,p,s.stepped)),!!l}function iY(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=Rj(i,n,r),{move:l=!0,reverse:c}=r||{};let u=0,f=0,p,m,y,_,x,v;const w=P=>(o+(c?a-P:P))%s,S=()=>{_!==x&&(t.lineTo(u,x),t.lineTo(u,_),t.lineTo(u,v))};for(l&&(m=i[w(0)],t.moveTo(m.x,m.y)),p=0;p<=a;++p){if(m=i[w(p)],m.skip)continue;const P=m.x,I=m.y,M=P|0;M===y?(I<_?_=I:I>x&&(x=I),u=(f*u+P)/++f):(S(),t.lineTo(P,I),y=M,f=0,_=x=I),v=I}S()}function S0(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?iY:rY}function sY(t){return t.stepped?hK:t.tension||t.cubicInterpolationMode==="monotone"?dK:So}function oY(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),Pj(t,e.options),t.stroke(i)}function aY(t,e,n,r){const{segments:i,options:s}=e,o=S0(e);for(const a of i)Pj(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const lY=typeof Path2D=="function";function cY(t,e,n,r){lY&&!e.options.segment?oY(t,e,n,r):aY(t,e,n,r)}class ws extends eo{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;rK(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=vK(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=gj(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=sY(r);let c,u;for(c=0,u=o.length;c<u;++c){const{start:f,end:p}=o[c],m=s[f],y=s[p];if(m===y){a.push(m);continue}const _=Math.abs((i-m[n])/(y[n]-m[n])),x=l(m,y,_,r.stepped);x[n]=e[n],a.push(x)}return a.length===1?a[0]:a}pathSegment(e,n,r){return S0(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=S0(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),cY(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}fe(ws,"id","line"),fe(ws,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),fe(ws,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),fe(ws,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function tC(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class If extends eo{constructor(n){super();fe(this,"parsed");fe(this,"skip");fe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return tC(this,n,"x",r)}inYRange(n,r){return tC(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!ih(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,w0(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}fe(If,"id","point"),fe(If,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),fe(If,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Nj(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,f;return t.horizontal?(f=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-f,u=r+f):(f=s/2,a=n-f,l=n+f,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function bs(t,e,n,r){return t?0:Zn(e,n,r)}function uY(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=oj(r);return{t:bs(i.top,s.top,0,n),r:bs(i.right,s.right,0,e),b:bs(i.bottom,s.bottom,0,n),l:bs(i.left,s.left,0,e)}}function hY(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=al(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Ce(i);return{topLeft:bs(!l||a.top||a.left,s.topLeft,0,o),topRight:bs(!l||a.top||a.right,s.topRight,0,o),bottomLeft:bs(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:bs(!l||a.bottom||a.right,s.bottomRight,0,o)}}function dY(t){const e=Nj(t),n=e.right-e.left,r=e.bottom-e.top,i=uY(t,n/2,r/2),s=hY(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function Sy(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&Nj(t,r);return a&&(i||xs(e,a.left,a.right))&&(s||xs(n,a.top,a.bottom))}function fY(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function pY(t,e){t.rect(e.x,e.y,e.w,e.h)}function Ey(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Af extends eo{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=dY(this),a=fY(o.radius)?Lp:pY;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,Ey(o,n,s)),e.clip(),a(e,Ey(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,Ey(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return Sy(this,e,n,r)}inXRange(e,n){return Sy(this,e,null,n)}inYRange(e,n){return Sy(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}fe(Af,"id","bar"),fe(Af,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),fe(Af,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function mY(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=qm(l,c,i);const u=E0(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}const f=gj(e,u);for(const p of f){const m=E0(n,s[p.start],s[p.end],p.loop),y=mj(a,i,m);for(const _ of y)o.push({source:_,target:p,start:{[n]:nC(u,m,"start",Math.max)},end:{[n]:nC(u,m,"end",Math.min)}})}}return o}function E0(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=qr(i),s=qr(s)),{property:t,start:i,end:s}}function gY(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=qm(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function qm(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function nC(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function Dj(t,e){let n=[],r=!1;return Rt(t)?(r=!0,n=t):n=gY(t,e),n.length?new ws({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function rC(t){return t&&t.fill!==!1}function yY(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!bn(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function vY(t,e,n){const r=bY(t);if(Ce(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return bn(i)&&Math.floor(i)===i?_Y(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function _Y(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function xY(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Ce(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function wY(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Ce(t)?r=t.value:r=e.getBaseValue(),r}function bY(t){const e=t.options,n=e.fill;let r=we(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function TY(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=SY(e,n);a.push(Dj({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let u=c.start;u<=c.end;u++)EY(i,o[u],a)}return new ws({points:i,options:{}})}function SY(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function EY(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=kY(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function kY(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const u=s[c],f=o[u.start][n],p=o[u.end][n];if(xs(i,f,p)){a=i===f,l=i===p;break}}return{first:a,last:l,point:r}}class jj{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Rr},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function CY(t){const{chart:e,fill:n,line:r}=t;if(bn(n))return IY(e,n);if(n==="stack")return TY(t);if(n==="shape")return!0;const i=AY(t);return i instanceof jj?i:Dj(i,r)}function IY(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function AY(t){return(t.scale||{}).getPointPositionForValue?RY(t):PY(t)}function PY(t){const{scale:e={},fill:n}=t,r=xY(n,e);if(bn(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function RY(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=wY(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new jj({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function ky(t,e,n){const r=CY(e),{chart:i,index:s,line:o,scale:a,axis:l}=e,c=o.options,u=c.fill,f=c.backgroundColor,{above:p=f,below:m=f}=u||{},y=i.getDatasetMeta(s),_=yj(i,y);r&&o.points.length&&(Bm(t,n),NY(t,{line:o,target:r,above:p,below:m,area:n,scale:a,axis:l,clip:_}),zm(t))}function NY(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let u=s;s!==i&&(c==="x"?(iC(t,r,o.top),Cy(t,{line:n,target:r,color:i,scale:a,property:c,clip:l}),t.restore(),t.save(),iC(t,r,o.bottom)):c==="y"&&(sC(t,r,o.left),Cy(t,{line:n,target:r,color:s,scale:a,property:c,clip:l}),t.restore(),t.save(),sC(t,r,o.right),u=i)),Cy(t,{line:n,target:r,color:u,scale:a,property:c,clip:l}),t.restore()}function iC(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],f=i[qm(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(f.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function sC(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,u=i[l],f=i[qm(l,c,i)];s?(t.moveTo(u.x,u.y),s=!1):(t.lineTo(n,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(n,f.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function Cy(t,e){const{line:n,target:r,property:i,color:s,scale:o,clip:a}=e,l=mY(n,r,i);for(const{source:c,target:u,start:f,end:p}of l){const{style:{backgroundColor:m=s}={}}=c,y=r!==!0;t.save(),t.fillStyle=m,DY(t,o,a,y&&E0(i,f,p)),t.beginPath();const _=!!n.pathSegment(t,c);let x;if(y){_?t.closePath():oC(t,r,p,i);const v=!!r.pathSegment(t,u,{move:_,reverse:!0});x=_&&v,x||oC(t,r,f,i)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function DY(t,e,n,r){const i=e.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let l,c,u,f;s==="x"?(l=o,c=i.top,u=a,f=i.bottom):(l=i.left,c=o,u=i.right,f=a),t.beginPath(),n&&(l=Math.max(l,n.left),u=Math.min(u,n.right),c=Math.max(c,n.top),f=Math.min(f,n.bottom)),t.rect(l,c,u-l,f-c),t.clip()}}function oC(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var jY={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof ws&&(l={visible:t.isDatasetVisible(o),index:o,fill:vY(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=yY(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&ky(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;rC(s)&&ky(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!rC(r)||n.drawTime!=="beforeDatasetDraw"||ky(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const aC=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},MY=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class lC extends eo{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Je(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=yn(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=aC(r,s);let c,u;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a;let f=e;s.textAlign="left",s.textBaseline="middle";let p=-1,m=-u;return this.legendItems.forEach((y,_)=>{const x=r+n/2+s.measureText(y.text).width;(_===0||c[c.length-1]+x+2*a>o)&&(f+=u,c[c.length-(_>0?0:1)]=0,m+=u,p++),l[_]={left:0,top:m,row:p,width:x,height:i},c[c.length-1]+=x+a}),f}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let f=a,p=0,m=0,y=0,_=0;return this.legendItems.forEach((x,v)=>{const{itemWidth:w,itemHeight:S}=OY(r,n,s,x,i);v>0&&m+S+2*a>u&&(f+=p+a,c.push({width:p,height:m}),y+=p+a,_++,p=m=0),l[v]={left:y,top:m,col:_,width:w,height:S},p=Math.max(p,w),m+=S+a}),f+=p,c.push({width:p,height:m}),f}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=ll(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=hn(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=hn(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=hn(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=hn(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Bm(e,this),this._draw(),zm(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=St.color,l=ll(e.rtl,this.left,this.width),c=yn(o.font),{padding:u}=o,f=c.size,p=f/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:y,boxHeight:_,itemHeight:x}=aC(o,f),v=function(M,k,T){if(isNaN(y)||y<=0||isNaN(_)||_<0)return;i.save();const E=we(T.lineWidth,1);if(i.fillStyle=we(T.fillStyle,a),i.lineCap=we(T.lineCap,"butt"),i.lineDashOffset=we(T.lineDashOffset,0),i.lineJoin=we(T.lineJoin,"miter"),i.lineWidth=E,i.strokeStyle=we(T.strokeStyle,a),i.setLineDash(we(T.lineDash,[])),o.usePointStyle){const C={radius:_*Math.SQRT2/2,pointStyle:T.pointStyle,rotation:T.rotation,borderWidth:E},D=l.xPlus(M,y/2),A=k+p;ij(i,C,D,A,o.pointStyleWidth&&y)}else{const C=k+Math.max((f-_)/2,0),D=l.leftForLtr(M,y),A=al(T.borderRadius);i.beginPath(),Object.values(A).some(R=>R!==0)?Lp(i,{x:D,y:C,w:y,h:_,radius:A}):i.rect(D,C,y,_),i.fill(),E!==0&&i.stroke()}i.restore()},w=function(M,k,T){sh(i,T.text,M,k+x/2,c,{strikethrough:T.hidden,textAlign:l.textAlign(T.textAlign)})},S=this.isHorizontal(),P=this._computeTitleHeight();S?m={x:hn(s,this.left+u,this.right-r[0]),y:this.top+u+P,line:0}:m={x:this.left+u,y:hn(s,this.top+P+u,this.bottom-n[0].height),line:0},dj(this.ctx,e.textDirection);const I=x+u;this.legendItems.forEach((M,k)=>{i.strokeStyle=M.fontColor,i.fillStyle=M.fontColor;const T=i.measureText(M.text).width,E=l.textAlign(M.textAlign||(M.textAlign=o.textAlign)),C=y+p+T;let D=m.x,A=m.y;l.setWidth(this.width),S?k>0&&D+C+u>this.right&&(A=m.y+=I,m.line++,D=m.x=hn(s,this.left+u,this.right-r[m.line])):k>0&&A+I>this.bottom&&(D=m.x=D+n[m.line].width+u,m.line++,A=m.y=hn(s,this.top+P+u,this.bottom-n[m.line].height));const R=l.x(D);if(v(R,A,M),D=_q(E,D+y+p,S?D+C:this.right,e.rtl),w(l.x(D),A,M),S)m.x+=C+u;else if(typeof M.text!="string"){const $=c.lineHeight;m.y+=Mj(M,$)+u}else m.y+=I}),fj(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=yn(n.font),i=yr(n.padding);if(!n.display)return;const s=ll(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let u,f=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+c,f=hn(e.align,f,this.right-p);else{const y=this.columnSizes.reduce((_,x)=>Math.max(_,x.height),0);u=c+hn(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const m=hn(a,f,f+p);o.textAlign=s.textAlign(Kw(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,sh(o,n.text,m,u,r)}_computeTitleHeight(){const e=this.options.title,n=yn(e.font),r=yr(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(xs(e,this.left,this.right)&&xs(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],xs(e,i.left,i.left+i.width)&&xs(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!FY(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=MY(i,r);i&&!s&&Je(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Je(n.onHover,[e,r,this],this)}else r&&Je(n.onClick,[e,r,this],this)}}function OY(t,e,n,r,i){const s=LY(r,t,e,n),o=VY(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function LY(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function VY(t,e,n){let r=t;return typeof e.text!="string"&&(r=Mj(e,n)),r}function Mj(t,e){const n=t.text?t.text.length:0;return e*n}function FY(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var UY={id:"legend",_element:lC,start(t,e,n){const r=t.legend=new lC({ctx:t.ctx,options:n,chart:t});fr.configure(t,r,n),fr.addBox(t,r)},stop(t){fr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;fr.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=yr(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Oj extends eo{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Rt(r.text)?r.text.length:1;this._padding=yr(r.padding);const s=i*yn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,u,f;return this.isHorizontal()?(u=hn(a,r,s),f=n+e,c=s-r):(o.position==="left"?(u=r+e,f=hn(a,i,n),l=$t*-.5):(u=s-e,f=hn(a,n,i),l=$t*.5),c=i-n),{titleX:u,titleY:f,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=yn(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);sh(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:Kw(n.align),textBaseline:"middle",translation:[o,a]})}}function BY(t,e){const n=new Oj({ctx:t.ctx,options:e,chart:t});fr.configure(t,n,e),fr.addBox(t,n),t.titleBlock=n}var zY={id:"title",_element:Oj,start(t,e,n){BY(t,n)},stop(t){const e=t.titleBlock;fr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;fr.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Wc={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=_0(e,c);u<i&&(i=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function $r(t,e){return e&&(Rt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xi(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function $Y(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function cC(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=yn(e.bodyFont),c=yn(e.titleFont),u=yn(e.footerFont),f=s.length,p=i.length,m=r.length,y=yr(e.padding);let _=y.height,x=0,v=r.reduce((P,I)=>P+I.before.length+I.lines.length+I.after.length,0);if(v+=t.beforeBody.length+t.afterBody.length,f&&(_+=f*c.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),v){const P=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;_+=m*P+(v-m)*l.lineHeight+(v-1)*e.bodySpacing}p&&(_+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let w=0;const S=function(P){x=Math.max(x,n.measureText(P).width+w)};return n.save(),n.font=c.string,Le(t.title,S),n.font=l.string,Le(t.beforeBody.concat(t.afterBody),S),w=e.displayColors?o+2+e.boxPadding:0,Le(r,P=>{Le(P.before,S),Le(P.lines,S),Le(P.after,S)}),w=0,n.font=u.string,Le(t.footer,S),n.restore(),x+=y.width,{width:x,height:_}}function WY(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function HY(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function qY(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),HY(c,t,e,n)&&(c="center"),c}function uC(t,e,n){const r=n.yAlign||e.yAlign||WY(t,n);return{xAlign:n.xAlign||e.xAlign||qY(t,e,n,r),yAlign:r}}function KY(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function GY(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function hC(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:u,topRight:f,bottomLeft:p,bottomRight:m}=al(o);let y=KY(e,a);const _=GY(e,l,c);return l==="center"?a==="left"?y+=c:a==="right"&&(y-=c):a==="left"?y-=Math.max(u,p)+i:a==="right"&&(y+=Math.max(f,m)+i),{x:Zn(y,0,r.width-e.width),y:Zn(_,0,r.height-e.height)}}function Hd(t,e,n){const r=yr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function dC(t){return $r([],xi(t))}function YY(t,e,n){return pa(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function fC(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Lj={beforeTitle:yi,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:yi,beforeBody:yi,beforeLabel:yi,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return je(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:yi,afterBody:yi,beforeFooter:yi,footer:yi,afterFooter:yi};function Dn(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?Lj[e].call(n,r):i}class k0 extends eo{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new vj(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=YY(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Dn(r,"beforeTitle",this,e),s=Dn(r,"title",this,e),o=Dn(r,"afterTitle",this,e);let a=[];return a=$r(a,xi(i)),a=$r(a,xi(s)),a=$r(a,xi(o)),a}getBeforeBody(e,n){return dC(Dn(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return Le(e,s=>{const o={before:[],lines:[],after:[]},a=fC(r,s);$r(o.before,xi(Dn(a,"beforeLabel",this,s))),$r(o.lines,Dn(a,"label",this,s)),$r(o.after,xi(Dn(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return dC(Dn(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Dn(r,"beforeFooter",this,e),s=Dn(r,"footer",this,e),o=Dn(r,"afterFooter",this,e);let a=[];return a=$r(a,xi(i)),a=$r(a,xi(s)),a=$r(a,xi(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push($Y(this.chart,n[l]));return e.filter&&(a=a.filter((u,f,p)=>e.filter(u,f,p,r))),e.itemSort&&(a=a.sort((u,f)=>e.itemSort(u,f,r))),Le(a,u=>{const f=fC(e.callbacks,u);i.push(Dn(f,"labelColor",this,u)),s.push(Dn(f,"labelPointStyle",this,u)),o.push(Dn(f,"labelTextColor",this,u))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Wc[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=cC(this,r),c=Object.assign({},a,l),u=uC(this.chart,r,c),f=hC(r,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:f}=al(a),{x:p,y:m}=e,{width:y,height:_}=n;let x,v,w,S,P,I;return s==="center"?(P=m+_/2,i==="left"?(x=p,v=x-o,S=P+o,I=P-o):(x=p+y,v=x+o,S=P-o,I=P+o),w=x):(i==="left"?v=p+Math.max(l,u)+o:i==="right"?v=p+y-Math.max(c,f)-o:v=this.caretX,s==="top"?(S=m,P=S-o,x=v-o,w=v+o):(S=m+_,P=S+o,x=v+o,w=v-o),I=S),{x1:x,x2:v,x3:w,y1:S,y2:P,y3:I}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=ll(r.rtl,this.x,this.width);for(e.x=Hd(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=yn(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,u=yn(s.bodyFont),f=Hd(this,"left",s),p=i.x(f),m=l<u.lineHeight?(u.lineHeight-l)/2:0,y=n.y+m;if(s.usePointStyle){const _={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},x=i.leftForLtr(p,c)+c/2,v=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,w0(e,_,x,v),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,w0(e,_,x,v)}else{e.lineWidth=Ce(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const _=i.leftForLtr(p,c),x=i.leftForLtr(i.xPlus(p,1),c-2),v=al(o.borderRadius);Object.values(v).some(w=>w!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Lp(e,{x:_,y,w:c,h:l,radius:v}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Lp(e,{x,y:y+1,w:c-2,h:l-2,radius:v}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(_,y,c,l),e.strokeRect(_,y,c,l),e.fillStyle=o.backgroundColor,e.fillRect(x,y+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=r,f=yn(r.bodyFont);let p=f.lineHeight,m=0;const y=ll(r.rtl,this.x,this.width),_=function(T){n.fillText(T,y.x(e.x+m),e.y+p/2),e.y+=p+s},x=y.textAlign(o);let v,w,S,P,I,M,k;for(n.textAlign=o,n.textBaseline="middle",n.font=f.string,e.x=Hd(this,x,r),n.fillStyle=r.bodyColor,Le(this.beforeBody,_),m=a&&x!=="right"?o==="center"?c/2+u:c+2+u:0,P=0,M=i.length;P<M;++P){for(v=i[P],w=this.labelTextColors[P],n.fillStyle=w,Le(v.before,_),S=v.lines,a&&S.length&&(this._drawColorBox(n,e,P,y,r),p=Math.max(f.lineHeight,l)),I=0,k=S.length;I<k;++I)_(S[I]),p=f.lineHeight;Le(v.after,_)}m=0,p=f.lineHeight,Le(this.afterBody,_),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=ll(r.rtl,this.x,this.width);for(e.x=Hd(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=yn(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=r,{topLeft:f,topRight:p,bottomLeft:m,bottomRight:y}=al(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+f,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-p,l),n.quadraticCurveTo(a+c,l,a+c,l+p),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+u-y),n.quadraticCurveTo(a+c,l+u,a+c-y,l+u),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+u),n.quadraticCurveTo(a,l+u,a,l+u-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+f),n.quadraticCurveTo(a,l,a+f,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Wc[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=cC(this,e),l=Object.assign({},o,this._size),c=uC(n,e,l),u=hC(e,l,c,n);(i._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=yr(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),dj(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),fj(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!jp(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!jp(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Wc[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}fe(k0,"positioners",Wc);var QY={id:"tooltip",_element:k0,positioners:Wc,afterInit(t,e,n){n&&(t.tooltip=new k0({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Lj},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const XY=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function JY(t,e,n,r){const i=t.indexOf(e);if(i===-1)return XY(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const ZY=(t,e)=>t===null?null:Zn(Math.round(t),0,e);function pC(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class C0 extends Hl{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(je(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:JY(r,e,we(n,e),this._addedLabels),ZY(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return pC.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}fe(C0,"id","category"),fe(C0,"defaults",{ticks:{callback:pC}});function eQ(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:f,includeBounds:p}=t,m=s||1,y=u-1,{min:_,max:x}=e,v=!je(o),w=!je(a),S=!je(c),P=(x-_)/(f+1);let I=hk((x-_)/y/m)*m,M,k,T,E;if(I<1e-14&&!v&&!w)return[{value:_},{value:x}];E=Math.ceil(x/I)-Math.floor(_/I),E>y&&(I=hk(E*I/y/m)*m),je(l)||(M=Math.pow(10,l),I=Math.ceil(I*M)/M),i==="ticks"?(k=Math.floor(_/I)*I,T=Math.ceil(x/I)*I):(k=_,T=x),v&&w&&s&&cq((a-o)/s,I/1e3)?(E=Math.round(Math.min((a-o)/I,u)),I=(a-o)/E,k=o,T=a):S?(k=v?o:k,T=w?a:T,E=c-1,I=(T-k)/E):(E=(T-k)/I,pu(E,Math.round(E),I/1e3)?E=Math.round(E):E=Math.ceil(E));const C=Math.max(dk(I),dk(k));M=Math.pow(10,je(l)?C:l),k=Math.round(k*M)/M,T=Math.round(T*M)/M;let D=0;for(v&&(p&&k!==o?(n.push({value:o}),k<o&&D++,pu(Math.round((k+D*I)*M)/M,o,mC(o,P,t))&&D++):k<o&&D++);D<E;++D){const A=Math.round((k+D*I)*M)/M;if(w&&A>a)break;n.push({value:A})}return w&&p&&T!==a?n.length&&pu(n[n.length-1].value,a,mC(a,P,t))?n[n.length-1].value=a:n.push({value:a}):(!w||T===a)&&n.push({value:T}),n}function mC(t,e,{horizontal:n,minRotation:r}){const i=No(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class tQ extends Hl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return je(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=si(i),c=si(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=eQ(i,s);return e.bounds==="ticks"&&uq(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return nj(e,this.chart.options.locale,this.options.ticks.format)}}class I0 extends tQ{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=bn(e)?e:0,this.max=bn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=No(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}fe(I0,"id","linear"),fe(I0,"defaults",{ticks:{callback:rj.formatters.numeric}});const Km={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Vn=Object.keys(Km);function gC(t,e){return t-e}function yC(t,e){if(je(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),bn(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(rh(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function vC(t,e,n,r){const i=Vn.length;for(let s=Vn.indexOf(t);s<i-1;++s){const o=Km[Vn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Vn[s]}return Vn[i-1]}function nQ(t,e,n,r,i){for(let s=Vn.length-1;s>=Vn.indexOf(n);s--){const o=Vn[s];if(Km[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Vn[n?Vn.indexOf(n):0]}function rQ(t){for(let e=Vn.indexOf(t)+1,n=Vn.length;e<n;++e)if(Km[Vn[e]].common)return Vn[e]}function _C(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=qw(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function iQ(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function xC(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:iQ(t,r,i,n)}class Up extends Hl{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new qK._date(e.adapters.date);i.init(n),fu(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:yC(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=bn(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=bn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=gq(i,s,o);return this._unit=n.unit||(r.autoSkip?vC(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):nQ(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:rQ(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),xC(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Zn(n,0,o),r=Zn(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||vC(s.minUnit,n,r,this._getLabelCapacity(n)),a=we(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=rh(l)||l===!0,u={};let f=n,p,m;if(c&&(f=+e.startOf(f,"isoWeek",l)),f=+e.startOf(f,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const y=i.ticks.source==="data"&&this.getDataTimestamps();for(p=f,m=0;p<r;p=+e.add(p,a,o),m++)_C(u,p,y);return(p===r||i.bounds==="ticks"||m===1)&&_C(u,p,y),Object.keys(u).sort(gC).map(_=>+_)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Je(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],f=c&&a[c],p=r[n],m=c&&f&&p&&p.major;return this._adapter.format(e,i||(m?f:u))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=No(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,xC(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(yC(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return ZD(e.sort(gC))}}fe(Up,"id","time"),fe(Up,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function qd(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Do(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Do(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class wC extends Up{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=qd(n,this.min),this._tableRange=qd(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(qd(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return qd(this._table,r*this._tableRange+this._minPos,!0)}}fe(wC,"id","timeseries"),fe(wC,"defaults",Up.defaults);const Vj="label";function bC(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function sQ(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function Fj(t,e){t.labels=e}function Uj(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Vj;const r=[];t.datasets=e.map(i=>{const s=t.datasets.find(o=>o[n]===i[n]);return!s||!i.data||r.includes(s)?{...i}:(r.push(s),Object.assign(s,i),s)})}function oQ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Vj;const n={labels:[],datasets:[]};return Fj(n,t.labels),Uj(n,t.datasets,e),n}function aQ(t,e){const{height:n=150,width:r=300,redraw:i=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:f,...p}=t,m=j.useRef(null),y=j.useRef(null),_=()=>{m.current&&(y.current=new Hm(m.current,{type:o,data:oQ(a,s),options:l&&{...l},plugins:c}),bC(e,y.current))},x=()=>{bC(e,null),y.current&&(y.current.destroy(),y.current=null)};return j.useEffect(()=>{!i&&y.current&&l&&sQ(y.current,l)},[i,l]),j.useEffect(()=>{!i&&y.current&&Fj(y.current.config.data,a.labels)},[i,a.labels]),j.useEffect(()=>{!i&&y.current&&a.datasets&&Uj(y.current.config.data,a.datasets,s)},[i,a.datasets]),j.useEffect(()=>{y.current&&(i?(x(),setTimeout(_)):y.current.update(f))},[i,l,a.labels,a.datasets,f]),j.useEffect(()=>{y.current&&(x(),setTimeout(_))},[o]),j.useEffect(()=>(_(),()=>x()),[]),it.createElement("canvas",{ref:m,role:"img",height:n,width:r,...p},u)}const lQ=j.forwardRef(aQ);function Bj(t,e){return Hm.register(e),j.forwardRef((n,r)=>it.createElement(lQ,{...n,ref:r,type:t}))}const cQ=Bj("line",Ef),uQ=Bj("bar",Sf);Hm.register(C0,I0,Af,If,ws,zY,QY,UY,jY);const hQ=["QwWST9OVOlTOi5oheyCqfpXLOLg2","3j0AXIRa4XdHq1ywCl4UBxJNsku2","AeZKjJYu5zMZ4mvffaGiqCBb0cF2"];function un(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const dQ=t=>{if(!t)return"";const e=Math.floor((new Date-un(t))/1e3);let n=e/31536e3;return n>1?Math.floor(n)+" anni fa":(n=e/2592e3,n>1?Math.floor(n)+" mesi fa":(n=e/86400,n>1?Math.floor(n)+" gg fa":(n=e/3600,n>1?Math.floor(n)+" ore fa":(n=e/60,n>1?Math.floor(n)+" min fa":"ora"))))},Iy=({title:t,value:e,icon:n,isCurrency:r=!1,isPercentage:i=!1})=>h.jsxs("div",{className:"bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md h-full",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{className:"text-muted",children:n}),h.jsx("p",{className:"text-muted text-sm",children:t})]}),h.jsx("p",{className:"text-2xl font-bold text-foreground mt-2",children:r?new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(e):i?`${e}%`:e})]}),fQ=({item:t,navigate:e})=>{const n={expiring:h.jsx(v7,{className:"text-yellow-400"}),new_check:h.jsx(jw,{className:"text-green-400"}),new_anamnesi:h.jsx(Mw,{className:"text-blue-400"})},r={expiring:"payments",new_check:"checks",new_anamnesi:"anamnesi"};return h.jsxs($e.button,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>e(`/client/${t.clientId}?tab=${r[t.type]}`),className:"w-full flex items-start gap-3 p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors text-left",children:[h.jsx("div",{className:"mt-1 flex-shrink-0",children:n[t.type]}),h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"text-sm font-semibold",children:t.clientName}),h.jsx("p",{className:"text-xs text-muted",children:t.description})]}),h.jsx("div",{className:"text-xs text-muted flex-shrink-0",children:dQ(t.date)})]})},pQ=({dataType:t,setDataType:e,timeRange:n,setTimeRange:r})=>h.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mt-4",children:[h.jsxs("div",{className:"flex bg-card/50 p-1 rounded-lg border border-white/10 backdrop-blur-sm",children:[h.jsx("button",{onClick:()=>e("revenue"),className:`px-3 py-1 text-sm rounded-md transition ${t==="revenue"?"bg-primary text-white":"text-muted"}`,children:"Fatturato"}),h.jsx("button",{onClick:()=>e("clients"),className:`px-3 py-1 text-sm rounded-md transition ${t==="clients"?"bg-primary text-white":"text-muted"}`,children:"Nuovi Clienti"})]}),h.jsxs("div",{className:"flex bg-card/50 p-1 rounded-lg border border-white/10 backdrop-blur-sm",children:[h.jsx("button",{onClick:()=>r("monthly"),className:`px-3 py-1 text-sm rounded-md transition ${n==="monthly"?"bg-white/10 text-white":"text-muted"}`,children:"Mese"}),h.jsx("button",{onClick:()=>r("yearly"),className:`px-3 py-1 text-sm rounded-md transition ${n==="yearly"?"bg-white/10 text-white":"text-muted"}`,children:"Anno"})]})]}),mQ=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(!1),i=Me(le,"app-data","quickNotes");return j.useEffect(()=>{(async()=>{const o=await Js(i);o.exists()&&e(o.data().content)})()},[]),j.useEffect(()=>{const s=setTimeout(async()=>{if(t!==void 0){r(!0);try{await Vo(i,{content:t,lastUpdated:Un()})}catch(o){console.error("Error saving notes:",o)}finally{setTimeout(()=>r(!1),1e3)}}},2e3);return()=>clearTimeout(s)},[t]),h.jsxs("div",{className:"bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md h-full flex flex-col",children:[h.jsxs("h2",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[h.jsx(WD,{})," Appunti Rapidi"]}),h.jsx("textarea",{value:t,onChange:s=>e(s.target.value),className:"w-full h-full bg-transparent text-sm text-muted outline-none resize-none",placeholder:"Scrivi qui le tue idee o cose da fare..."}),h.jsx("p",{className:"text-xs text-right text-muted mt-2 h-4",children:n&&"Salvataggio..."})]})};function gQ(){const t=Wt(),[e,n]=j.useState([]),[r,i]=j.useState([]),[s,o]=j.useState([]),[a,l]=j.useState([]),[c,u]=j.useState([]),[f,p]=j.useState("revenue"),[m,y]=j.useState("yearly"),_=j.useMemo(()=>e.reduce((C,D)=>({...C,[D.id]:D.name}),{}),[e]);j.useEffect(()=>{const C=Tt(bt(le,"clients"),W=>n(W.docs.map(q=>({id:q.id,...q.data()})))),D=Tt(au(le,"payments"),W=>i(W.docs.map(q=>({...q.data(),clientId:q.ref.path.split("/")[1]})))),A=Tt(au(le,"checks"),W=>o(W.docs.map(q=>({...q.data(),clientId:q.ref.path.split("/")[1]})))),R=Tt(au(le,"anamnesi"),W=>l(W.docs.map(q=>({...q.data(),clientId:q.ref.path.split("/")[1]})))),$=Tt(bt(le,"chats"),W=>u(W.docs.map(q=>({id:q.id,...q.data()}))));return()=>{C(),D(),A(),R(),$()}},[]);const{clientStats:x,monthlyIncome:v,activityFeed:w,chartData:S,focusClient:P,retentionRate:I,unreadChatsCount:M}=j.useMemo(()=>{var Wn;const C=new Date,D=new Set(e.map(re=>re.id)),A=r.filter(re=>D.has(re.clientId));let R=0;e.forEach(re=>{const Ue=un(re.scadenza);(!Ue||Ue>=C)&&R++});let $,W,q;if(m==="yearly"){$=Array.from({length:12},(ve,Be)=>new Date(C.getFullYear(),C.getMonth()-11+Be,1).toLocaleString("it-IT",{month:"short"}));const re=Array(12).fill(0),Ue=Array(12).fill(0);A.forEach(ve=>{const Be=un(ve.paymentDate);if(Be){const be=(C.getFullYear()-Be.getFullYear())*12+(C.getMonth()-Be.getMonth());be>=0&&be<12&&(re[11-be]+=parseFloat(ve.amount))}}),e.forEach(ve=>{const Be=un(ve.createdAt);if(Be){const be=(C.getFullYear()-Be.getFullYear())*12+(C.getMonth()-Be.getMonth());be>=0&&be<12&&Ue[11-be]++}}),W=f==="revenue"?re:Ue}else{const re=new Date(C.getFullYear(),C.getMonth()+1,0).getDate();$=Array.from({length:re},(Be,be)=>be+1);const Ue=Array(re).fill(0),ve=Array(re).fill(0);A.forEach(Be=>{const be=un(Be.paymentDate);be&&be.getFullYear()===C.getFullYear()&&be.getMonth()===C.getMonth()&&(Ue[be.getDate()-1]+=parseFloat(Be.amount))}),e.forEach(Be=>{const be=un(Be.createdAt);be&&be.getFullYear()===C.getFullYear()&&be.getMonth()===C.getMonth()&&ve[be.getDate()-1]++}),W=f==="revenue"?Ue:ve}f==="revenue"?q={type:"line",label:"Fatturato",data:W,borderColor:"#22c55e",backgroundColor:"rgba(34, 197, 94, 0.2)",fill:!0,tension:.4}:q={type:"bar",label:"Nuovi Clienti",data:W,backgroundColor:"rgba(37, 99, 235, 0.6)"};const Z=e.filter(re=>{const Ue=un(re.scadenza);if(!Ue)return!1;const ve=Math.ceil((Ue-C)/(1e3*60*60*24));return ve>=0&&ve<=15}).map(re=>({type:"expiring",date:re.scadenza,clientId:re.id,description:`Scade tra ${Math.ceil((un(re.scadenza)-C)/(1e3*60*60*24))} giorni`})),B=s.map(re=>({type:"new_check",date:re.createdAt,clientId:re.clientId,description:"Ha inviato un nuovo check"})),Q=a.map(re=>({type:"new_anamnesi",date:re.createdAt,clientId:re.clientId,description:"Ha compilato l'anamnesi"})),J=[...Z,...B,...Q].sort((re,Ue)=>(un(Ue.date)||0)-(un(re.date)||0)).map(re=>({...re,clientName:_[re.clientId]})).filter(re=>re.clientName),me=new Date(C.getFullYear(),C.getMonth()-1,1),ue=new Date(C.getFullYear(),C.getMonth(),1),xe=new Set(e.filter(re=>un(re.scadenza)>me).map(re=>re.id)),qe=new Set(e.filter(re=>un(re.scadenza)>ue).map(re=>re.id)),nt=[...xe].filter(re=>qe.has(re)).length,Ke=xe.size>0?Math.round(nt/xe.size*100):100,at=e.filter(re=>!un(re.scadenza)||un(re.scadenza)>=C),nn=at.length>0?at[new Date().getDate()%at.length]:null,rn=(Wn=a.find(re=>re.clientId===(nn==null?void 0:nn.id)))==null?void 0:Wn.mainGoal,Rn=c.filter(re=>re.lastMessageSenderId&&!hQ.includes(re.lastMessageSenderId)).length;return{clientStats:{total:e.length,active:R},monthlyIncome:A.filter(re=>{var Ue,ve;return((Ue=un(re.paymentDate))==null?void 0:Ue.getMonth())===C.getMonth()&&((ve=un(re.paymentDate))==null?void 0:ve.getFullYear())===C.getFullYear()}).reduce((re,Ue)=>re+parseFloat(Ue.amount),0),activityFeed:J,chartData:{labels:$,datasets:[q]},focusClient:nn?{...nn,goal:rn}:null,retentionRate:Ke,unreadChatsCount:Rn}},[e,r,s,a,_,f,m,c]),k={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"#71717a"},grid:{color:"rgba(255,255,255,0.05)"}},y:{ticks:{color:f==="revenue"?"#22c55e":"#2563eb",callback:C=>f==="revenue"?`€${C}`:Number.isInteger(C)?C:null},grid:{color:"rgba(255,255,255,0.05)"}}}},T={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.07}}},E={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}};return h.jsxs($e.div,{className:"w-full relative",variants:T,initial:"hidden",animate:"visible",children:[h.jsxs($e.div,{className:"flex justify-between items-center mb-6",variants:E,children:[h.jsx("h1",{className:"text-3xl font-bold",children:"Command Center"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:()=>t("/admin/chat"),className:"relative px-3 py-1.5 bg-card/50 text-sm rounded-lg border border-white/10 backdrop-blur-sm hover:bg-white/10 transition",children:[h.jsx(Ow,{className:"inline -mt-1 mr-1"})," Gestisci Chat",M>0&&h.jsx("span",{className:"absolute top-0 right-0 transform translate-x-1/2 -translate-y-1/2 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center p-1",children:M})]}),h.jsx("button",{onClick:()=>t("/clients"),className:"px-3 py-1.5 bg-card/50 text-sm rounded-lg border border-white/10 backdrop-blur-sm hover:bg-white/10",children:"Gestisci Clienti"}),h.jsxs("button",{onClick:()=>t("/new"),className:"px-3 py-1.5 bg-primary text-sm font-semibold rounded-lg hover:bg-primary/80",children:[h.jsx(Fm,{className:"inline -mt-1 mr-1"})," Nuovo Cliente"]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[h.jsx($e.div,{variants:E,children:h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:[h.jsx(Iy,{title:"Incasso Mensile",value:v,icon:h.jsx(fa,{className:"text-green-400"}),isCurrency:!0}),h.jsx(Iy,{title:"Clienti Attivi",value:x.active,icon:h.jsx(jw,{className:"text-primary"})}),h.jsx(Iy,{title:"Retention Rate",value:I,icon:h.jsx(Lw,{className:"text-purple-400"}),isPercentage:!0})]})}),h.jsxs($e.div,{className:"bg-card/50 p-4 sm:p-6 rounded-xl border border-white/10 backdrop-blur-md",variants:E,children:[h.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[h.jsx(FD,{})," Business Overview"]}),h.jsx("div",{className:"h-80",children:f==="revenue"?h.jsx(cQ,{data:S,options:k}):h.jsx(uQ,{data:S,options:k})}),h.jsx(pQ,{dataType:f,setDataType:p,timeRange:m,setTimeRange:y})]}),h.jsxs($e.div,{className:"grid grid-cols-1 md:grid-cols-2 gap-6",variants:E,children:[P&&h.jsxs("div",{className:"bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md",children:[h.jsxs("h2",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[h.jsx(k7,{})," Focus Cliente del Giorno"]}),h.jsx("p",{className:"font-bold text-lg text-primary",children:P.name}),h.jsxs("p",{className:"text-sm text-muted mt-1",children:['Obiettivo: "',P.goal||"Non specificato",'"']})]}),h.jsx(mQ,{})]})]}),h.jsxs($e.div,{className:"bg-card/50 p-4 sm:p-6 rounded-xl border border-white/10 backdrop-blur-md",variants:E,children:[h.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[h.jsx(g7,{})," Feed Attività"]}),h.jsx("div",{className:"space-y-3 max-h-[44rem] overflow-y-auto pr-2",children:h.jsx(ua,{children:w.length>0?w.map(C=>{var D;return h.jsx(fQ,{item:C,navigate:t},`${C.type}-${C.clientId}-${(D=C.date)==null?void 0:D.seconds}`)}):h.jsx("p",{className:"text-sm text-muted p-2",children:"Nessuna attività recente da mostrare."})})})]})]})]})}const yQ=()=>h.jsxs("div",{className:"p-6 bg-card rounded-xl shadow-2xl",children:[h.jsx("h1",{className:"text-3xl font-bold text-primary-400 mb-4",children:"Accesso Coach Riuscito!"}),h.jsx("p",{className:"text-white",children:"Se vedi questo messaggio, il problema di routing e l'errore di riferimento sono stati risolti."}),h.jsx("p",{className:"text-sm text-muted mt-2",children:"Ora puoi iniziare a costruire il contenuto reale della tua dashboard qui."})]});function Eo(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const kc=t=>{const e=Eo(t);if(!e)return"na";const r=Math.ceil((e-new Date)/(1e3*60*60*24));return r<0?"expired":r<=15?"expiring":"paid"},vQ=({status:t})=>{switch(t){case"paid":return h.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-900/50 text-green-400",children:"Pagato"});case"expiring":return h.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-yellow-900/50 text-yellow-400",children:"In Scadenza"});case"expired":return h.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-900/50 text-red-400",children:"Scaduto"});default:return h.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-700 text-gray-300",children:"N/D"})}};function TC({isCoach:t=!1}){const e=Wt(),n=Ki(),[r,i]=j.useState([]),[s,o]=j.useState(!0),[a,l]=j.useState(""),[c,u]=j.useState("all"),[f,p]=j.useState("createdAt"),[m,y]=j.useState("desc"),[_,x]=j.useState(1),v=10;j.useEffect(()=>{const C=new URLSearchParams(n.search).get("filter");!t&&C&&["paid","expiring","expired"].includes(C)&&u(C)},[n.search,t]),j.useEffect(()=>{const E=Tt(bt(le,"clients"),C=>{i(C.docs.map(D=>({id:D.id,...D.data()}))),o(!1)});return()=>E()},[]);const w=async E=>{if(!t&&window.confirm("Sei sicuro di voler eliminare questo cliente? L'operazione è irreversibile."))try{await Am(Me(le,"clients",E))}catch(C){console.error("Errore delete:",C)}},S=j.useMemo(()=>{let E=[...r];!t&&c!=="all"&&(E=E.filter(A=>kc(A.scadenza)===c));const C=a.trim().toLowerCase();C&&(E=E.filter(A=>(A.name||"").toLowerCase().includes(C)||(A.email||"").toLowerCase().includes(C)));const D=(A,R)=>{var $,W;switch(R){case"name":return(A.name||"").toLowerCase();case"scadenza":return t?0:(($=Eo(A.scadenza))==null?void 0:$.getTime())||0;case"createdAt":default:return((W=Eo(A.createdAt))==null?void 0:W.getTime())||0}};return E.sort((A,R)=>{const $=D(A,f),W=D(R,f);return $===W?0:m==="asc"?$>W?1:-1:$<W?1:-1}),E},[r,a,c,f,m,t]);Math.ceil(S.length/v);const P=S.slice((_-1)*v,_*v),I=E=>{t&&(E==="scadenza"||E==="status")||(f===E?y(C=>C==="asc"?"desc":"asc"):(p(E),y(E==="scadenza"||E==="createdAt"?"desc":"asc")))},M=({col:E})=>f===E?m==="asc"?h.jsx(y7,{className:"inline ml-1"}):h.jsx(zD,{className:"inline ml-1"}):null,k=({status:E,label:C,count:D})=>h.jsxs("button",{onClick:()=>{u(E),x(1)},className:`px-3 py-1 text-sm font-semibold rounded-full transition-colors whitespace-nowrap 
        ${c===E?"bg-primary text-white":"bg-white/10 text-muted hover:bg-white/20"}`,children:[C," (",D,")"]}),T=j.useMemo(()=>t?{all:r.length}:{all:r.length,paid:r.filter(E=>kc(E.scadenza)==="paid").length,expiring:r.filter(E=>kc(E.scadenza)==="expiring").length,expired:r.filter(E=>kc(E.scadenza)==="expired").length},[r,t]);return h.jsxs("div",{className:"w-full",children:[h.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[h.jsx("h1",{className:"text-3xl font-bold",children:t?"I Miei Clienti":"Gestione Clienti Admin"}),h.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[h.jsxs("div",{className:"flex items-center gap-2 bg-card border border-white/10 rounded-lg px-3 py-2 flex-1 min-w-[150px]",children:[h.jsx(HD,{className:"text-muted"}),h.jsx("input",{value:a,onChange:E=>{l(E.target.value),x(1)},className:"bg-transparent outline-none placeholder-muted w-full",placeholder:"Cerca per nome o email…"})]}),!t&&h.jsxs("button",{onClick:()=>e("/new"),className:"flex items-center justify-center gap-2 px-4 py-2 bg-primary hover:bg-primary/80 text-white rounded-lg whitespace-nowrap",children:[h.jsx(Fm,{})," Nuovo"]})]})]}),!t&&h.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-background rounded-lg overflow-x-auto whitespace-nowrap",children:[h.jsx(w7,{className:"text-muted ml-1 flex-shrink-0"}),h.jsx(k,{status:"all",label:"Tutti",count:T.all}),h.jsx(k,{status:"paid",label:"Pagato",count:T.paid}),h.jsx(k,{status:"expiring",label:"In Scadenza",count:T.expiring}),h.jsx(k,{status:"expired",label:"Scaduto",count:T.expired})]}),h.jsx($e.div,{className:"bg-card rounded-xl shadow border border-white/10 overflow-hidden",initial:{opacity:0},animate:{opacity:1},children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-white/5 text-left",children:[h.jsxs("th",{className:"p-3 cursor-pointer select-none",onClick:()=>I("name"),children:["Nome ",h.jsx(M,{col:"name"})]}),h.jsx("th",{className:"p-3",children:"Email"}),!t&&h.jsxs(h.Fragment,{children:[h.jsx("th",{className:"p-3",children:"Stato Pagamento"}),h.jsxs("th",{className:"p-3 cursor-pointer select-none",onClick:()=>I("scadenza"),children:["Scadenza ",h.jsx(M,{col:"scadenza"})]})]}),h.jsxs("th",{className:"p-3 cursor-pointer select-none",onClick:()=>I("createdAt"),children:["Iscritto ",h.jsx(M,{col:"createdAt"})]}),h.jsx("th",{className:"p-3 text-right",children:"Azioni"})]})}),h.jsx("tbody",{children:P.map((E,C)=>h.jsxs($e.tr,{className:"border-b border-white/10 hover:bg-white/5",initial:{opacity:0},animate:{opacity:1},transition:{delay:C*.05},children:[h.jsx("td",{className:"p-3 font-medium",children:h.jsx("button",{className:"hover:underline",onClick:()=>e(t?`/coach/client/${E.id}`:`/client/${E.id}`),children:E.name||"-"})}),h.jsx("td",{className:"p-3 text-muted",children:E.email||"-"}),!t&&h.jsxs(h.Fragment,{children:[h.jsx("td",{className:"p-3",children:h.jsx(vQ,{status:kc(E.scadenza)})}),h.jsx("td",{className:"p-3 text-muted",children:Eo(E.scadenza)?Eo(E.scadenza).toLocaleDateString("it-IT"):"-"})]}),h.jsx("td",{className:"p-3 text-muted",children:Eo(E.createdAt)?Eo(E.createdAt).toLocaleDateString("it-IT"):"-"}),h.jsx("td",{className:"p-3",children:h.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[h.jsx("button",{onClick:()=>e(t?`/coach/edit/${E.id}`:`/edit/${E.id}`),className:"p-1.5 text-yellow-400 hover:bg-white/10 rounded-md",title:"Modifica",children:h.jsx(x7,{size:14})}),!t&&h.jsx("button",{onClick:()=>w(E.id),className:"p-1.5 text-red-400 hover:bg-white/10 rounded-md",title:"Elimina",children:h.jsx(Um,{size:14})})]})})]},E.id))})]})})})]})}var Vh=t=>t.type==="checkbox",jo=t=>t instanceof Date,kn=t=>t==null;const zj=t=>typeof t=="object";var Nt=t=>!kn(t)&&!Array.isArray(t)&&zj(t)&&!jo(t),_Q=t=>Nt(t)&&t.target?Vh(t.target)?t.target.checked:t.target.value:t,xQ=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,wQ=(t,e)=>t.has(xQ(e)),bQ=t=>{const e=t.constructor&&t.constructor.prototype;return Nt(e)&&e.hasOwnProperty("isPrototypeOf")},tb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ft(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(tb&&(t instanceof Blob||r))&&(n||Nt(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!bQ(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Ft(t[i]));else return t;return e}var Gm=t=>/^\w*$/.test(t),It=t=>t===void 0,nb=t=>Array.isArray(t)?t.filter(Boolean):[],rb=t=>nb(t.replace(/["|']|\]/g,"").split(/\.|\[/)),oe=(t,e,n)=>{if(!e||!Nt(t))return n;const r=(Gm(e)?[e]:rb(e)).reduce((i,s)=>kn(i)?i:i[s],t);return It(r)||r===t?It(t[e])?n:t[e]:r},Kr=t=>typeof t=="boolean",rt=(t,e,n)=>{let r=-1;const i=Gm(e)?[e]:rb(e),s=i.length,o=s-1;for(;++r<s;){const a=i[r];let l=n;if(r!==o){const c=t[a];l=Nt(c)||Array.isArray(c)?c:isNaN(+i[r+1])?{}:[]}if(a==="__proto__"||a==="constructor"||a==="prototype")return;t[a]=l,t=t[a]}};const SC={BLUR:"blur",FOCUS_OUT:"focusout"},kr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},vi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},TQ=it.createContext(null);TQ.displayName="HookFormContext";var SQ=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const s in t)Object.defineProperty(i,s,{get:()=>{const o=s;return e._proxyFormState[o]!==kr.all&&(e._proxyFormState[o]=!r||kr.all),t[o]}});return i};const EQ=typeof window<"u"?it.useLayoutEffect:it.useEffect;var Yn=t=>typeof t=="string",kQ=(t,e,n,r,i)=>Yn(t)?(r&&e.watch.add(t),oe(n,t,i)):Array.isArray(t)?t.map(s=>(r&&e.watch.add(s),oe(n,s))):(r&&(e.watchAll=!0),n),A0=t=>kn(t)||!zj(t);function ps(t,e,n=new WeakSet){if(A0(t)||A0(e))return t===e;if(jo(t)&&jo(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const s of r){const o=t[s];if(!i.includes(s))return!1;if(s!=="ref"){const a=e[s];if(jo(o)&&jo(a)||Nt(o)&&Nt(a)||Array.isArray(o)&&Array.isArray(a)?!ps(o,a,n):o!==a)return!1}}return!0}var CQ=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},yu=t=>Array.isArray(t)?t:[t],EC=()=>{let t=[];return{get observers(){return t},next:i=>{for(const s of t)s.next&&s.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(s=>s!==i)}}),unsubscribe:()=>{t=[]}}};function $j(t,e){const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r],s=e[r];if(i&&Nt(i)&&s){const o=$j(i,s);Nt(o)&&(n[r]=o)}else t[r]&&(n[r]=s)}return n}var jn=t=>Nt(t)&&!Object.keys(t).length,ib=t=>t.type==="file",Cr=t=>typeof t=="function",Bp=t=>{if(!tb)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Wj=t=>t.type==="select-multiple",sb=t=>t.type==="radio",IQ=t=>sb(t)||Vh(t),Ay=t=>Bp(t)&&t.isConnected;function AQ(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=It(t)?r++:t[e[r++]];return t}function PQ(t){for(const e in t)if(t.hasOwnProperty(e)&&!It(t[e]))return!1;return!0}function kt(t,e){const n=Array.isArray(e)?e:Gm(e)?[e]:rb(e),r=n.length===1?t:AQ(t,n),i=n.length-1,s=n[i];return r&&delete r[s],i!==0&&(Nt(r)&&jn(r)||Array.isArray(r)&&PQ(r))&&kt(t,n.slice(0,-1)),t}var RQ=t=>{for(const e in t)if(Cr(t[e]))return!0;return!1};function Hj(t){return Array.isArray(t)||Nt(t)&&!RQ(t)}function P0(t,e={}){for(const n in t)Hj(t[n])?(e[n]=Array.isArray(t[n])?[]:{},P0(t[n],e[n])):kn(t[n])||(e[n]=!0);return e}function Pa(t,e,n){n||(n=P0(e));for(const r in t)Hj(t[r])?It(e)||A0(n[r])?n[r]=P0(t[r],Array.isArray(t[r])?[]:{}):Pa(t[r],kn(e)?{}:e[r],n[r]):n[r]=!ps(t[r],e[r]);return n}const kC={value:!1,isValid:!1},CC={value:!0,isValid:!0};var qj=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!It(t[0].attributes.value)?It(t[0].value)||t[0].value===""?CC:{value:t[0].value,isValid:!0}:CC:kC}return kC},Kj=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>It(t)?t:e?t===""?NaN:t&&+t:n&&Yn(t)?new Date(t):r?r(t):t;const IC={isValid:!1,value:null};var Gj=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,IC):IC;function AC(t){const e=t.ref;return ib(e)?e.files:sb(e)?Gj(t.refs).value:Wj(e)?[...e.selectedOptions].map(({value:n})=>n):Vh(e)?qj(t.refs).value:Kj(It(e.value)?t.ref.value:e.value,t)}var NQ=(t,e,n,r)=>{const i={};for(const s of t){const o=oe(e,s);o&&rt(i,s,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},zp=t=>t instanceof RegExp,Cc=t=>It(t)?t:zp(t)?t.source:Nt(t)?zp(t.value)?t.value.source:t.value:t,PC=t=>({isOnSubmit:!t||t===kr.onSubmit,isOnBlur:t===kr.onBlur,isOnChange:t===kr.onChange,isOnAll:t===kr.all,isOnTouch:t===kr.onTouched});const RC="AsyncFunction";var DQ=t=>!!t&&!!t.validate&&!!(Cr(t.validate)&&t.validate.constructor.name===RC||Nt(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===RC)),jQ=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),NC=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const vu=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const s=oe(t,i);if(s){const{_f:o,...a}=s;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(vu(a,e))break}else if(Nt(a)&&vu(a,e))break}}};function DC(t,e,n){const r=oe(t,n);if(r||Gm(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const s=i.join("."),o=oe(e,s),a=oe(t,s);if(o&&!Array.isArray(o)&&n!==s)return{name:n};if(a&&a.type)return{name:s,error:a};if(a&&a.root&&a.root.type)return{name:`${s}.root`,error:a.root};i.pop()}return{name:n}}var MQ=(t,e,n,r)=>{n(t);const{name:i,...s}=t;return jn(s)||Object.keys(s).length>=Object.keys(e).length||Object.keys(s).find(o=>e[o]===(!r||kr.all))},OQ=(t,e,n)=>!t||!e||t===e||yu(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),LQ=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,VQ=(t,e)=>!nb(oe(t,e)).length&&kt(t,e),FQ=(t,e,n)=>{const r=yu(oe(t,n));return rt(r,"root",e[n]),rt(t,n,r),t};function jC(t,e,n="validate"){if(Yn(t)||Array.isArray(t)&&t.every(Yn)||Kr(t)&&!t)return{type:n,message:Yn(t)?t:"",ref:e}}var ka=t=>Nt(t)&&!zp(t)?t:{value:t,message:""},MC=async(t,e,n,r,i,s)=>{const{ref:o,refs:a,required:l,maxLength:c,minLength:u,min:f,max:p,pattern:m,validate:y,name:_,valueAsNumber:x,mount:v}=t._f,w=oe(n,_);if(!v||e.has(_))return{};const S=a?a[0]:o,P=A=>{i&&S.reportValidity&&(S.setCustomValidity(Kr(A)?"":A||""),S.reportValidity())},I={},M=sb(o),k=Vh(o),T=M||k,E=(x||ib(o))&&It(o.value)&&It(w)||Bp(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,C=CQ.bind(null,_,r,I),D=(A,R,$,W=vi.maxLength,q=vi.minLength)=>{const Z=A?R:$;I[_]={type:A?W:q,message:Z,ref:o,...C(A?W:q,Z)}};if(s?!Array.isArray(w)||!w.length:l&&(!T&&(E||kn(w))||Kr(w)&&!w||k&&!qj(a).isValid||M&&!Gj(a).isValid)){const{value:A,message:R}=Yn(l)?{value:!!l,message:l}:ka(l);if(A&&(I[_]={type:vi.required,message:R,ref:S,...C(vi.required,R)},!r))return P(R),I}if(!E&&(!kn(f)||!kn(p))){let A,R;const $=ka(p),W=ka(f);if(!kn(w)&&!isNaN(w)){const q=o.valueAsNumber||w&&+w;kn($.value)||(A=q>$.value),kn(W.value)||(R=q<W.value)}else{const q=o.valueAsDate||new Date(w),Z=J=>new Date(new Date().toDateString()+" "+J),B=o.type=="time",Q=o.type=="week";Yn($.value)&&w&&(A=B?Z(w)>Z($.value):Q?w>$.value:q>new Date($.value)),Yn(W.value)&&w&&(R=B?Z(w)<Z(W.value):Q?w<W.value:q<new Date(W.value))}if((A||R)&&(D(!!A,$.message,W.message,vi.max,vi.min),!r))return P(I[_].message),I}if((c||u)&&!E&&(Yn(w)||s&&Array.isArray(w))){const A=ka(c),R=ka(u),$=!kn(A.value)&&w.length>+A.value,W=!kn(R.value)&&w.length<+R.value;if(($||W)&&(D($,A.message,R.message),!r))return P(I[_].message),I}if(m&&!E&&Yn(w)){const{value:A,message:R}=ka(m);if(zp(A)&&!w.match(A)&&(I[_]={type:vi.pattern,message:R,ref:o,...C(vi.pattern,R)},!r))return P(R),I}if(y){if(Cr(y)){const A=await y(w,n),R=jC(A,S);if(R&&(I[_]={...R,...C(vi.validate,R.message)},!r))return P(R.message),I}else if(Nt(y)){let A={};for(const R in y){if(!jn(A)&&!r)break;const $=jC(await y[R](w,n),S,R);$&&(A={...$,...C(R,$.message)},P($.message),r&&(I[_]=A))}if(!jn(A)&&(I[_]={ref:S,...A},!r))return I}}return P(!0),I};const UQ={mode:kr.onSubmit,reValidateMode:kr.onChange,shouldFocusError:!0};function BQ(t={}){let e={...UQ,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:Cr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Nt(e.defaultValues)||Nt(e.values)?Ft(e.defaultValues||e.values)||{}:{},s=e.shouldUnregister?{}:Ft(i),o={action:!1,mount:!1,watch:!1},a={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},l,c=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const p={array:EC(),state:EC()},m=e.criteriaMode===kr.all,y=O=>V=>{clearTimeout(c),c=setTimeout(O,V)},_=async O=>{if(!e.disabled&&(u.isValid||f.isValid||O)){const V=e.resolver?jn((await k()).errors):await E(r,!0);V!==n.isValid&&p.state.next({isValid:V})}},x=(O,V)=>{!e.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((O||Array.from(a.mount)).forEach(U=>{U&&(V?rt(n.validatingFields,U,V):kt(n.validatingFields,U))}),p.state.next({validatingFields:n.validatingFields,isValidating:!jn(n.validatingFields)}))},v=(O,V=[],U,ee,Y=!0,G=!0)=>{if(ee&&U&&!e.disabled){if(o.action=!0,G&&Array.isArray(oe(r,O))){const te=U(oe(r,O),ee.argA,ee.argB);Y&&rt(r,O,te)}if(G&&Array.isArray(oe(n.errors,O))){const te=U(oe(n.errors,O),ee.argA,ee.argB);Y&&rt(n.errors,O,te),VQ(n.errors,O)}if((u.touchedFields||f.touchedFields)&&G&&Array.isArray(oe(n.touchedFields,O))){const te=U(oe(n.touchedFields,O),ee.argA,ee.argB);Y&&rt(n.touchedFields,O,te)}(u.dirtyFields||f.dirtyFields)&&(n.dirtyFields=Pa(i,s)),p.state.next({name:O,isDirty:D(O,V),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else rt(s,O,V)},w=(O,V)=>{rt(n.errors,O,V),p.state.next({errors:n.errors})},S=O=>{n.errors=O,p.state.next({errors:n.errors,isValid:!1})},P=(O,V,U,ee)=>{const Y=oe(r,O);if(Y){const G=oe(s,O,It(U)?oe(i,O):U);It(G)||ee&&ee.defaultChecked||V?rt(s,O,V?G:AC(Y._f)):$(O,G),o.mount&&_()}},I=(O,V,U,ee,Y)=>{let G=!1,te=!1;const de={name:O};if(!e.disabled){if(!U||ee){(u.isDirty||f.isDirty)&&(te=n.isDirty,n.isDirty=de.isDirty=D(),G=te!==de.isDirty);const Ae=ps(oe(i,O),V);te=!!oe(n.dirtyFields,O),Ae?kt(n.dirtyFields,O):rt(n.dirtyFields,O,!0),de.dirtyFields=n.dirtyFields,G=G||(u.dirtyFields||f.dirtyFields)&&te!==!Ae}if(U){const Ae=oe(n.touchedFields,O);Ae||(rt(n.touchedFields,O,U),de.touchedFields=n.touchedFields,G=G||(u.touchedFields||f.touchedFields)&&Ae!==U)}G&&Y&&p.state.next(de)}return G?de:{}},M=(O,V,U,ee)=>{const Y=oe(n.errors,O),G=(u.isValid||f.isValid)&&Kr(V)&&n.isValid!==V;if(e.delayError&&U?(l=y(()=>w(O,U)),l(e.delayError)):(clearTimeout(c),l=null,U?rt(n.errors,O,U):kt(n.errors,O)),(U?!ps(Y,U):Y)||!jn(ee)||G){const te={...ee,...G&&Kr(V)?{isValid:V}:{},errors:n.errors,name:O};n={...n,...te},p.state.next(te)}},k=async O=>{x(O,!0);const V=await e.resolver(s,e.context,NQ(O||a.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return x(O),V},T=async O=>{const{errors:V}=await k(O);if(O)for(const U of O){const ee=oe(V,U);ee?rt(n.errors,U,ee):kt(n.errors,U)}else n.errors=V;return V},E=async(O,V,U={valid:!0})=>{for(const ee in O){const Y=O[ee];if(Y){const{_f:G,...te}=Y;if(G){const de=a.array.has(G.name),Ae=Y._f&&DQ(Y._f);Ae&&u.validatingFields&&x([G.name],!0);const Dt=await MC(Y,a.disabled,s,m,e.shouldUseNativeValidation&&!V,de);if(Ae&&u.validatingFields&&x([G.name]),Dt[G.name]&&(U.valid=!1,V))break;!V&&(oe(Dt,G.name)?de?FQ(n.errors,Dt,G.name):rt(n.errors,G.name,Dt[G.name]):kt(n.errors,G.name))}!jn(te)&&await E(te,V,U)}}return U.valid},C=()=>{for(const O of a.unMount){const V=oe(r,O);V&&(V._f.refs?V._f.refs.every(U=>!Ay(U)):!Ay(V._f.ref))&&at(O)}a.unMount=new Set},D=(O,V)=>!e.disabled&&(O&&V&&rt(s,O,V),!ps(J(),i)),A=(O,V,U)=>kQ(O,a,{...o.mount?s:It(V)?i:Yn(O)?{[O]:V}:V},U,V),R=O=>nb(oe(o.mount?s:i,O,e.shouldUnregister?oe(i,O,[]):[])),$=(O,V,U={})=>{const ee=oe(r,O);let Y=V;if(ee){const G=ee._f;G&&(!G.disabled&&rt(s,O,Kj(V,G)),Y=Bp(G.ref)&&kn(V)?"":V,Wj(G.ref)?[...G.ref.options].forEach(te=>te.selected=Y.includes(te.value)):G.refs?Vh(G.ref)?G.refs.forEach(te=>{(!te.defaultChecked||!te.disabled)&&(Array.isArray(Y)?te.checked=!!Y.find(de=>de===te.value):te.checked=Y===te.value||!!Y)}):G.refs.forEach(te=>te.checked=te.value===Y):ib(G.ref)?G.ref.value="":(G.ref.value=Y,G.ref.type||p.state.next({name:O,values:Ft(s)})))}(U.shouldDirty||U.shouldTouch)&&I(O,Y,U.shouldTouch,U.shouldDirty,!0),U.shouldValidate&&Q(O)},W=(O,V,U)=>{for(const ee in V){if(!V.hasOwnProperty(ee))return;const Y=V[ee],G=O+"."+ee,te=oe(r,G);(a.array.has(O)||Nt(Y)||te&&!te._f)&&!jo(Y)?W(G,Y,U):$(G,Y,U)}},q=(O,V,U={})=>{const ee=oe(r,O),Y=a.array.has(O),G=Ft(V);rt(s,O,G),Y?(p.array.next({name:O,values:Ft(s)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&U.shouldDirty&&p.state.next({name:O,dirtyFields:Pa(i,s),isDirty:D(O,G)})):ee&&!ee._f&&!kn(G)?W(O,G,U):$(O,G,U),NC(O,a)&&p.state.next({...n,name:O}),p.state.next({name:o.mount?O:void 0,values:Ft(s)})},Z=async O=>{o.mount=!0;const V=O.target;let U=V.name,ee=!0;const Y=oe(r,U),G=Ae=>{ee=Number.isNaN(Ae)||jo(Ae)&&isNaN(Ae.getTime())||ps(Ae,oe(s,U,Ae))},te=PC(e.mode),de=PC(e.reValidateMode);if(Y){let Ae,Dt;const Or=V.type?AC(Y._f):_Q(O),Hn=O.type===SC.BLUR||O.type===SC.FOCUS_OUT,di=!jQ(Y._f)&&!e.resolver&&!oe(n.errors,U)&&!Y._f.deps||LQ(Hn,oe(n.touchedFields,U),n.isSubmitted,de,te),vr=NC(U,a,Hn);rt(s,U,Or),Hn?(!V||!V.readOnly)&&(Y._f.onBlur&&Y._f.onBlur(O),l&&l(0)):Y._f.onChange&&Y._f.onChange(O);const fi=I(U,Or,Hn),ro=!jn(fi)||vr;if(!Hn&&p.state.next({name:U,type:O.type,values:Ft(s)}),di)return(u.isValid||f.isValid)&&(e.mode==="onBlur"?Hn&&_():Hn||_()),ro&&p.state.next({name:U,...vr?{}:fi});if(!Hn&&vr&&p.state.next({...n}),e.resolver){const{errors:io}=await k([U]);if(G(Or),ee){const ya=DC(n.errors,r,U),Lr=DC(io,r,ya.name||U);Ae=Lr.error,U=Lr.name,Dt=jn(io)}}else x([U],!0),Ae=(await MC(Y,a.disabled,s,m,e.shouldUseNativeValidation))[U],x([U]),G(Or),ee&&(Ae?Dt=!1:(u.isValid||f.isValid)&&(Dt=await E(r,!0)));ee&&(Y._f.deps&&(!Array.isArray(Y._f.deps)||Y._f.deps.length>0)&&Q(Y._f.deps),M(U,Dt,Ae,fi))}},B=(O,V)=>{if(oe(n.errors,V)&&O.focus)return O.focus(),1},Q=async(O,V={})=>{let U,ee;const Y=yu(O);if(e.resolver){const G=await T(It(O)?O:Y);U=jn(G),ee=O?!Y.some(te=>oe(G,te)):U}else O?(ee=(await Promise.all(Y.map(async G=>{const te=oe(r,G);return await E(te&&te._f?{[G]:te}:te)}))).every(Boolean),!(!ee&&!n.isValid)&&_()):ee=U=await E(r);return p.state.next({...!Yn(O)||(u.isValid||f.isValid)&&U!==n.isValid?{}:{name:O},...e.resolver||!O?{isValid:U}:{},errors:n.errors}),V.shouldFocus&&!ee&&vu(r,B,O?Y:a.mount),ee},J=(O,V)=>{let U={...o.mount?s:i};return V&&(U=$j(V.dirtyFields?n.dirtyFields:n.touchedFields,U)),It(O)?U:Yn(O)?oe(U,O):O.map(ee=>oe(U,ee))},me=(O,V)=>({invalid:!!oe((V||n).errors,O),isDirty:!!oe((V||n).dirtyFields,O),error:oe((V||n).errors,O),isValidating:!!oe(n.validatingFields,O),isTouched:!!oe((V||n).touchedFields,O)}),ue=O=>{O&&yu(O).forEach(V=>kt(n.errors,V)),p.state.next({errors:O?n.errors:{}})},xe=(O,V,U)=>{const ee=(oe(r,O,{_f:{}})._f||{}).ref,Y=oe(n.errors,O)||{},{ref:G,message:te,type:de,...Ae}=Y;rt(n.errors,O,{...Ae,...V,ref:ee}),p.state.next({name:O,errors:n.errors,isValid:!1}),U&&U.shouldFocus&&ee&&ee.focus&&ee.focus()},qe=(O,V)=>Cr(O)?p.state.subscribe({next:U=>"values"in U&&O(A(void 0,V),U)}):A(O,V,!0),nt=O=>p.state.subscribe({next:V=>{OQ(O.name,V.name,O.exact)&&MQ(V,O.formState||u,Yi,O.reRenderRoot)&&O.callback({values:{...s},...n,...V,defaultValues:i})}}).unsubscribe,Ke=O=>(o.mount=!0,f={...f,...O.formState},nt({...O,formState:f})),at=(O,V={})=>{for(const U of O?yu(O):a.mount)a.mount.delete(U),a.array.delete(U),V.keepValue||(kt(r,U),kt(s,U)),!V.keepError&&kt(n.errors,U),!V.keepDirty&&kt(n.dirtyFields,U),!V.keepTouched&&kt(n.touchedFields,U),!V.keepIsValidating&&kt(n.validatingFields,U),!e.shouldUnregister&&!V.keepDefaultValue&&kt(i,U);p.state.next({values:Ft(s)}),p.state.next({...n,...V.keepDirty?{isDirty:D()}:{}}),!V.keepIsValid&&_()},nn=({disabled:O,name:V})=>{(Kr(O)&&o.mount||O||a.disabled.has(V))&&(O?a.disabled.add(V):a.disabled.delete(V))},rn=(O,V={})=>{let U=oe(r,O);const ee=Kr(V.disabled)||Kr(e.disabled);return rt(r,O,{...U||{},_f:{...U&&U._f?U._f:{ref:{name:O}},name:O,mount:!0,...V}}),a.mount.add(O),U?nn({disabled:Kr(V.disabled)?V.disabled:e.disabled,name:O}):P(O,!0,V.value),{...ee?{disabled:V.disabled||e.disabled}:{},...e.progressive?{required:!!V.required,min:Cc(V.min),max:Cc(V.max),minLength:Cc(V.minLength),maxLength:Cc(V.maxLength),pattern:Cc(V.pattern)}:{},name:O,onChange:Z,onBlur:Z,ref:Y=>{if(Y){rn(O,V),U=oe(r,O);const G=It(Y.value)&&Y.querySelectorAll&&Y.querySelectorAll("input,select,textarea")[0]||Y,te=IQ(G),de=U._f.refs||[];if(te?de.find(Ae=>Ae===G):G===U._f.ref)return;rt(r,O,{_f:{...U._f,...te?{refs:[...de.filter(Ay),G,...Array.isArray(oe(i,O))?[{}]:[]],ref:{type:G.type,name:O}}:{ref:G}}}),P(O,!1,void 0,G)}else U=oe(r,O,{}),U._f&&(U._f.mount=!1),(e.shouldUnregister||V.shouldUnregister)&&!(wQ(a.array,O)&&o.action)&&a.unMount.add(O)}}},Rn=()=>e.shouldFocusError&&vu(r,B,a.mount),Wn=O=>{Kr(O)&&(p.state.next({disabled:O}),vu(r,(V,U)=>{const ee=oe(r,U);ee&&(V.disabled=ee._f.disabled||O,Array.isArray(ee._f.refs)&&ee._f.refs.forEach(Y=>{Y.disabled=ee._f.disabled||O}))},0,!1))},re=(O,V)=>async U=>{let ee;U&&(U.preventDefault&&U.preventDefault(),U.persist&&U.persist());let Y=Ft(s);if(p.state.next({isSubmitting:!0}),e.resolver){const{errors:G,values:te}=await k();n.errors=G,Y=Ft(te)}else await E(r);if(a.disabled.size)for(const G of a.disabled)kt(Y,G);if(kt(n.errors,"root"),jn(n.errors)){p.state.next({errors:{}});try{await O(Y,U)}catch(G){ee=G}}else V&&await V({...n.errors},U),Rn(),setTimeout(Rn);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:jn(n.errors)&&!ee,submitCount:n.submitCount+1,errors:n.errors}),ee)throw ee},Ue=(O,V={})=>{oe(r,O)&&(It(V.defaultValue)?q(O,Ft(oe(i,O))):(q(O,V.defaultValue),rt(i,O,Ft(V.defaultValue))),V.keepTouched||kt(n.touchedFields,O),V.keepDirty||(kt(n.dirtyFields,O),n.isDirty=V.defaultValue?D(O,Ft(oe(i,O))):D()),V.keepError||(kt(n.errors,O),u.isValid&&_()),p.state.next({...n}))},ve=(O,V={})=>{const U=O?Ft(O):i,ee=Ft(U),Y=jn(O),G=Y?i:ee;if(V.keepDefaultValues||(i=U),!V.keepValues){if(V.keepDirtyValues){const te=new Set([...a.mount,...Object.keys(Pa(i,s))]);for(const de of Array.from(te))oe(n.dirtyFields,de)?rt(G,de,oe(s,de)):q(de,oe(G,de))}else{if(tb&&It(O))for(const te of a.mount){const de=oe(r,te);if(de&&de._f){const Ae=Array.isArray(de._f.refs)?de._f.refs[0]:de._f.ref;if(Bp(Ae)){const Dt=Ae.closest("form");if(Dt){Dt.reset();break}}}}if(V.keepFieldsRef)for(const te of a.mount)q(te,oe(G,te));else r={}}s=e.shouldUnregister?V.keepDefaultValues?Ft(i):{}:Ft(G),p.array.next({values:{...G}}),p.state.next({values:{...G}})}a={mount:V.keepDirtyValues?a.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!V.keepIsValid||!!V.keepDirtyValues,o.watch=!!e.shouldUnregister,p.state.next({submitCount:V.keepSubmitCount?n.submitCount:0,isDirty:Y?!1:V.keepDirty?n.isDirty:!!(V.keepDefaultValues&&!ps(O,i)),isSubmitted:V.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Y?{}:V.keepDirtyValues?V.keepDefaultValues&&s?Pa(i,s):n.dirtyFields:V.keepDefaultValues&&O?Pa(i,O):V.keepDirty?n.dirtyFields:{},touchedFields:V.keepTouched?n.touchedFields:{},errors:V.keepErrors?n.errors:{},isSubmitSuccessful:V.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Be=(O,V)=>ve(Cr(O)?O(s):O,V),be=(O,V={})=>{const U=oe(r,O),ee=U&&U._f;if(ee){const Y=ee.refs?ee.refs[0]:ee.ref;Y.focus&&(Y.focus(),V.shouldSelect&&Cr(Y.select)&&Y.select())}},Yi=O=>{n={...n,...O}},Qi={control:{register:rn,unregister:at,getFieldState:me,handleSubmit:re,setError:xe,_subscribe:nt,_runSchema:k,_focusError:Rn,_getWatch:A,_getDirty:D,_setValid:_,_setFieldArray:v,_setDisabledField:nn,_setErrors:S,_getFieldArray:R,_reset:ve,_resetDefaultValues:()=>Cr(e.defaultValues)&&e.defaultValues().then(O=>{Be(O,e.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:C,_disableForm:Wn,_subjects:p,_proxyFormState:u,get _fields(){return r},get _formValues(){return s},get _state(){return o},set _state(O){o=O},get _defaultValues(){return i},get _names(){return a},set _names(O){a=O},get _formState(){return n},get _options(){return e},set _options(O){e={...e,...O}}},subscribe:Ke,trigger:Q,register:rn,handleSubmit:re,watch:qe,setValue:q,getValues:J,reset:Be,resetField:Ue,clearErrors:ue,unregister:at,setError:xe,setFocus:be,getFieldState:me};return{...Qi,formControl:Qi}}function ql(t={}){const e=it.useRef(void 0),n=it.useRef(void 0),[r,i]=it.useState({isDirty:!1,isValidating:!1,isLoading:Cr(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Cr(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!Cr(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...a}=BQ(t);e.current={...a,formState:r}}const s=e.current.control;return s._options=t,EQ(()=>{const o=s._subscribe({formState:s._proxyFormState,callback:()=>i({...s._formState}),reRenderRoot:!0});return i(a=>({...a,isReady:!0})),s._formState.isReady=!0,o},[s]),it.useEffect(()=>s._disableForm(t.disabled),[s,t.disabled]),it.useEffect(()=>{t.mode&&(s._options.mode=t.mode),t.reValidateMode&&(s._options.reValidateMode=t.reValidateMode)},[s,t.mode,t.reValidateMode]),it.useEffect(()=>{t.errors&&(s._setErrors(t.errors),s._focusError())},[s,t.errors]),it.useEffect(()=>{t.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,t.shouldUnregister]),it.useEffect(()=>{if(s._proxyFormState.isDirty){const o=s._getDirty();o!==r.isDirty&&s._subjects.state.next({isDirty:o})}},[s,r.isDirty]),it.useEffect(()=>{t.values&&!ps(t.values,n.current)?(s._reset(t.values,{keepFieldsRef:!0,...s._options.resetOptions}),n.current=t.values,i(o=>({...o}))):s._resetDefaultValues()},[s,t.values]),it.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),e.current.formState=SQ(r,s),e.current}const zQ=()=>{const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let r=0,i=e.length;r<8;++r)n+=e.charAt(Math.floor(Math.random()*i));return n},OC=(t,e,n)=>`Ciao ${t},

Ecco le tue credenziali per accedere alla tua area riservata:

Email (Username): ${e}
Password Temporanea: ${n}
Link di accesso: https://mentalfitmanager.github.io/#/client-login

Ti consiglio di cambiare la password al primo accesso.
A presto!`;function $Q(){const t=Wt(),{register:e,handleSubmit:n,reset:r,formState:{isSubmitting:i}}=ql(),[s,o]=j.useState(!1),[a,l]=j.useState(null),[c,u]=j.useState(!1),[f,p]=j.useState(null),m=async I=>{const M=zQ();try{const k=Wx(le),T=Me(bt(le,"clients")),E=T.id,C=parseInt(I.duration,10),D=new Date;D.setMonth(D.getMonth()+C);const A={name:I.name,name_lowercase:I.name.toLowerCase(),email:I.email,phone:I.phone||null,status:"attivo",planType:I.planType,createdAt:Un(),scadenza:D,isClient:!0,firstLogin:!0,tempPassword:M};if(k.set(T,A),I.paymentAmount){const R=Me(bt(le,"clients",E,"payments")),$={amount:parseFloat(I.paymentAmount),duration:`${C} mes${C>1?"i":"e"}`,paymentMethod:I.paymentMethod||null,paymentDate:Un()};k.set(R,$)}await k.commit(),l({name:I.name,email:I.email,password:M}),p(E),o(!0)}catch(k){console.error("Errore nella creazione del cliente:",k),alert(`Errore: ${k.message}`)}},y=()=>{const I=OC(a.name,a.email,a.password);navigator.clipboard.writeText(I),u(!0),setTimeout(()=>u(!1),2500)},_=()=>{o(!1),r(),t(f?`/clients/${f}`:"/clients")},x="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",v="block mb-1 text-sm font-medium text-muted",w="bg-card/40 p-4 rounded-xl border border-white/10 backdrop-blur-md",S="font-semibold mb-3 text-lg text-primary",P=a?OC(a.name,a.email,a.password):"";return h.jsxs(h.Fragment,{children:[h.jsxs($e.div,{className:"w-full max-w-2xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsx("h1",{className:"text-2xl font-bold",children:"Onboarding Nuovo Cliente"}),h.jsxs("button",{onClick:()=>t("/clients"),className:"flex items-center gap-2 px-3 py-1.5 bg-card/50 text-sm rounded-lg border border-white/10 backdrop-blur-sm hover:bg-white/10",children:[h.jsx(da,{})," Torna"]})]}),h.jsxs("form",{onSubmit:n(m),className:"space-y-6",children:[h.jsxs("div",{className:w,children:[h.jsx("h4",{className:S,children:"1. Anagrafica"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:v,children:"Nome e Cognome*"}),h.jsx("input",{...e("name",{required:!0}),className:x})]}),h.jsxs("div",{children:[h.jsx("label",{className:v,children:"Email (sarà il suo username)*"}),h.jsx("input",{type:"email",...e("email",{required:!0}),className:x})]}),h.jsxs("div",{children:[h.jsx("label",{className:v,children:"Telefono (Opzionale)"}),h.jsx("input",{...e("phone"),className:x})]})]})]}),h.jsxs("div",{className:w,children:[h.jsx("h4",{className:S,children:"2. Dettagli Percorso"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:v,children:"Tipo di Percorso*"}),h.jsxs("select",{...e("planType",{required:!0}),className:x,children:[h.jsx("option",{value:"allenamento",children:"Solo Allenamento"}),h.jsx("option",{value:"alimentazione",children:"Solo Alimentazione"}),h.jsx("option",{value:"completo",children:"Completo (Allenamento + Alimentazione)"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:v,children:"Durata del Percorso*"}),h.jsxs("select",{...e("duration",{required:!0}),className:x,children:[h.jsx("option",{value:"",children:"Seleziona durata"}),[...Array(24).keys()].map(I=>{const M=I+1;return h.jsxs("option",{value:M,children:[M," mes",M>1?"i":"e"]},M)})]})]})]})]}),h.jsxs("div",{className:w,children:[h.jsxs("h4",{className:S+" flex items-center gap-2",children:[h.jsx(fa,{})," 3. Primo Pagamento (Opzionale)"]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:v,children:"Importo Pagato (€)"}),h.jsx("input",{type:"number",step:"0.01",...e("paymentAmount"),className:x})]}),h.jsxs("div",{children:[h.jsx("label",{className:v,children:"Metodo di Pagamento"}),h.jsx("input",{...e("paymentMethod"),className:x,placeholder:"Es. Bonifico, Contanti"})]})]})]}),h.jsx("div",{className:"flex justify-end pt-4",children:h.jsxs("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-5 py-2.5 bg-primary hover:bg-primary/80 text-white rounded-lg transition disabled:opacity-50 font-semibold",children:[h.jsx(Vw,{})," ",i?"Creazione in corso...":"Crea Cliente e Genera Password"]})})]})]}),h.jsx(ua,{children:s&&h.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:h.jsxs($e.div,{className:"bg-card p-6 rounded-2xl border border-white/10 w-full max-w-md shadow-2xl",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},children:[h.jsx("h2",{className:"text-xl font-bold text-center text-foreground",children:"Cliente Creato con Successo!"}),h.jsx("p",{className:"text-center text-muted text-sm mt-2",children:"Copia il messaggio e invialo al cliente per il suo primo accesso."}),h.jsxs("div",{className:"my-6",children:[h.jsx("label",{className:"block mb-2 text-sm font-medium text-muted",children:"Messaggio pronto da copiare:"}),h.jsx("textarea",{readOnly:!0,value:P,className:"w-full p-3 bg-background border border-white/10 rounded-lg text-white font-mono text-sm resize-none h-48"})]}),h.jsx($e.button,{onClick:y,className:"w-full py-3 bg-green-500 text-white font-semibold rounded-lg flex items-center justify-center gap-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:c?h.jsxs(h.Fragment,{children:[h.jsx(BD,{})," Messaggio Copiato!"]}):h.jsxs(h.Fragment,{children:[h.jsx(b7,{})," Copia Messaggio Completo"]})}),h.jsx("button",{onClick:_,className:"w-full mt-2 py-2 text-muted text-sm text-center hover:text-white",children:"Chiudi e vai alla scheda cliente"})]})})})]})}function Yj(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Yj(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ym(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Yj(t))&&(r&&(r+=" "),r+=e);return r}const WQ=(t,e,n,r)=>{if(n==="length"||n==="prototype"||n==="arguments"||n==="caller")return;const i=Object.getOwnPropertyDescriptor(t,n),s=Object.getOwnPropertyDescriptor(e,n);!HQ(i,s)&&r||Object.defineProperty(t,n,s)},HQ=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},qQ=(t,e)=>{const n=Object.getPrototypeOf(e);n!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,n)},KQ=(t,e)=>`/* Wrapped ${t}*/
${e}`,GQ=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),YQ=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),QQ=(t,e,n)=>{const r=n===""?"":`with ${n.trim()}() `,i=KQ.bind(null,r,e.toString());Object.defineProperty(i,"name",YQ);const{writable:s,enumerable:o,configurable:a}=GQ;Object.defineProperty(t,"toString",{value:i,writable:s,enumerable:o,configurable:a})};function XQ(t,e,{ignoreNonConfigurable:n=!1}={}){const{name:r}=t;for(const i of Reflect.ownKeys(e))WQ(t,e,i,n);return qQ(t,e),QQ(t,e,r),t}const JQ=new WeakMap,LC=new WeakMap;function Qj(t,{cacheKey:e,cache:n=new Map,maxAge:r}={}){if(r===0)return t;if(typeof r=="number"){if(r>2147483647)throw new TypeError("The `maxAge` option cannot exceed 2147483647.");if(r<0)throw new TypeError("The `maxAge` option should not be a negative number.")}const i=function(...s){var u;const o=e?e(s):s[0],a=n.get(o);if(a)return a.data;const l=t.apply(this,s),c=typeof r=="function"?r(...s):r;if(n.set(o,{data:l,maxAge:c?Date.now()+c:Number.POSITIVE_INFINITY}),c&&c>0&&c!==Number.POSITIVE_INFINITY){const f=setTimeout(()=>{n.delete(o)},c);(u=f.unref)==null||u.call(f);const p=LC.get(t)??new Set;p.add(f),LC.set(t,p)}return l};return XQ(i,t,{ignoreNonConfigurable:!0}),JQ.set(i,n),i}function ZQ(t){return typeof t=="string"}function eX(t,e,n){return n.indexOf(t)===e}function tX(t){return t.toLowerCase()===t}function VC(t){return t.indexOf(",")===-1?t:t.split(",")}function R0(t){if(!t)return t;if(t==="C"||t==="posix"||t==="POSIX")return"en-US";if(t.indexOf(".")!==-1){var e=t.split(".")[0],n=e===void 0?"":e;return R0(n)}if(t.indexOf("@")!==-1){var r=t.split("@")[0],n=r===void 0?"":r;return R0(n)}if(t.indexOf("-")===-1||!tX(t))return t;var i=t.split("-"),s=i[0],o=i[1],a=o===void 0?"":o;return"".concat(s,"-").concat(a.toUpperCase())}function nX(t){var e=t===void 0?{}:t,n=e.useFallbackLocale,r=n===void 0?!0:n,i=e.fallbackLocale,s=i===void 0?"en-US":i,o=[];if(typeof navigator<"u"){for(var a=navigator.languages||[],l=[],c=0,u=a;c<u.length;c++){var f=u[c];l=l.concat(VC(f))}var p=navigator.language,m=p&&VC(p);o=o.concat(l,m)}return r&&o.push(s),o.filter(ZQ).map(R0).filter(eX)}var rX=Qj(nX,{cacheKey:JSON.stringify});function iX(t){return rX(t)[0]||null}var Xj=Qj(iX,{cacheKey:JSON.stringify});function Gi(t,e,n){return function(i,s=n){const o=t(i)+s;return e(o)}}function Fh(t){return function(n){return new Date(t(n).getTime()-1)}}function Uh(t,e){return function(r){return[t(r),e(r)]}}function ot(t){if(t instanceof Date)return t.getFullYear();if(typeof t=="number")return t;const e=Number.parseInt(t,10);if(typeof t=="string"&&!Number.isNaN(e))return e;throw new Error(`Failed to get year from date: ${t}.`)}function to(t){if(t instanceof Date)return t.getMonth();throw new Error(`Failed to get month from date: ${t}.`)}function Qm(t){if(t instanceof Date)return t.getDate();throw new Error(`Failed to get year from date: ${t}.`)}function Kl(t){const e=ot(t),n=e+(-e+1)%100,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}const sX=Gi(ot,Kl,-100),Jj=Gi(ot,Kl,100),ob=Fh(Jj),oX=Gi(ot,ob,-100),Zj=Uh(Kl,ob);function no(t){const e=ot(t),n=e+(-e+1)%10,r=new Date;return r.setFullYear(n,0,1),r.setHours(0,0,0,0),r}const eM=Gi(ot,no,-10),ab=Gi(ot,no,10),Xm=Fh(ab),tM=Gi(ot,Xm,-10),nM=Uh(no,Xm);function Gl(t){const e=ot(t),n=new Date;return n.setFullYear(e,0,1),n.setHours(0,0,0,0),n}const rM=Gi(ot,Gl,-1),lb=Gi(ot,Gl,1),Jm=Fh(lb),iM=Gi(ot,Jm,-1),aX=Uh(Gl,Jm);function cb(t,e){return function(r,i=e){const s=ot(r),o=to(r)+i,a=new Date;return a.setFullYear(s,o,1),a.setHours(0,0,0,0),t(a)}}function ma(t){const e=ot(t),n=to(t),r=new Date;return r.setFullYear(e,n,1),r.setHours(0,0,0,0),r}const sM=cb(ma,-1),ub=cb(ma,1),Bh=Fh(ub),oM=cb(Bh,-1),lX=Uh(ma,Bh);function cX(t,e){return function(r,i=e){const s=ot(r),o=to(r),a=Qm(r)+i,l=new Date;return l.setFullYear(s,o,a),l.setHours(0,0,0,0),t(l)}}function zh(t){const e=ot(t),n=to(t),r=Qm(t),i=new Date;return i.setFullYear(e,n,r),i.setHours(0,0,0,0),i}const uX=cX(zh,1),hb=Fh(uX),hX=Uh(zh,hb);function aM(t){return Qm(Bh(t))}var Xt={GREGORY:"gregory",HEBREW:"hebrew",ISLAMIC:"islamic",ISO_8601:"iso8601"},dX={gregory:["en-CA","en-US","es-AR","es-BO","es-CL","es-CO","es-CR","es-DO","es-EC","es-GT","es-HN","es-MX","es-NI","es-PA","es-PE","es-PR","es-SV","es-VE","pt-BR"],hebrew:["he","he-IL"],islamic:["ar","ar-AE","ar-BH","ar-DZ","ar-EG","ar-IQ","ar-JO","ar-KW","ar-LY","ar-OM","ar-QA","ar-SA","ar-SD","ar-SY","ar-YE","dv","dv-MV","ps","ps-AR"]},db=[0,1,2,3,4,5,6],Py=new Map;function fX(t){return function(n,r){var i=n||Xj();Py.has(i)||Py.set(i,new Map);var s=Py.get(i);return s.has(t)||s.set(t,new Intl.DateTimeFormat(i||void 0,t).format),s.get(t)(r)}}function pX(t){var e=new Date(t);return new Date(e.setHours(12))}function ga(t){return function(e,n){return fX(t)(e,pX(n))}}var mX={day:"numeric"},gX={day:"numeric",month:"long",year:"numeric"},yX={month:"long"},vX={month:"long",year:"numeric"},_X={weekday:"short"},xX={weekday:"long"},wX={year:"numeric"},bX=ga(mX),TX=ga(gX),SX=ga(yX),lM=ga(vX),EX=ga(_X),kX=ga(xX),Zm=ga(wX),CX=db[0],IX=db[5],FC=db[6];function ah(t,e){e===void 0&&(e=Xt.ISO_8601);var n=t.getDay();switch(e){case Xt.ISO_8601:return(n+6)%7;case Xt.ISLAMIC:return(n+1)%7;case Xt.HEBREW:case Xt.GREGORY:return n;default:throw new Error("Unsupported calendar type.")}}function AX(t){var e=Kl(t);return ot(e)}function PX(t){var e=no(t);return ot(e)}function N0(t,e){e===void 0&&(e=Xt.ISO_8601);var n=ot(t),r=to(t),i=t.getDate()-ah(t,e);return new Date(n,r,i)}function RX(t,e){e===void 0&&(e=Xt.ISO_8601);var n=e===Xt.GREGORY?Xt.GREGORY:Xt.ISO_8601,r=N0(t,e),i=ot(t)+1,s,o;do s=new Date(i,0,n===Xt.ISO_8601?4:1),o=N0(s,e),i-=1;while(t<o);return Math.round((r.getTime()-o.getTime())/(864e5*7))+1}function zo(t,e){switch(t){case"century":return Kl(e);case"decade":return no(e);case"year":return Gl(e);case"month":return ma(e);case"day":return zh(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function NX(t,e){switch(t){case"century":return sX(e);case"decade":return eM(e);case"year":return rM(e);case"month":return sM(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function cM(t,e){switch(t){case"century":return Jj(e);case"decade":return ab(e);case"year":return lb(e);case"month":return ub(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function DX(t,e){switch(t){case"decade":return eM(e,-100);case"year":return rM(e,-10);case"month":return sM(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function jX(t,e){switch(t){case"decade":return ab(e,100);case"year":return lb(e,10);case"month":return ub(e,12);default:throw new Error("Invalid rangeType: ".concat(t))}}function uM(t,e){switch(t){case"century":return ob(e);case"decade":return Xm(e);case"year":return Jm(e);case"month":return Bh(e);case"day":return hb(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function MX(t,e){switch(t){case"century":return oX(e);case"decade":return tM(e);case"year":return iM(e);case"month":return oM(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function OX(t,e){switch(t){case"decade":return tM(e,-100);case"year":return iM(e,-10);case"month":return oM(e,-12);default:throw new Error("Invalid rangeType: ".concat(t))}}function UC(t,e){switch(t){case"century":return Zj(e);case"decade":return nM(e);case"year":return aX(e);case"month":return lX(e);case"day":return hX(e);default:throw new Error("Invalid rangeType: ".concat(t))}}function LX(t,e,n){var r=[e,n].sort(function(i,s){return i.getTime()-s.getTime()});return[zo(t,r[0]),uM(t,r[1])]}function hM(t,e,n){return n.map(function(r){return(e||Zm)(t,r)}).join(" – ")}function VX(t,e,n){return hM(t,e,Zj(n))}function dM(t,e,n){return hM(t,e,nM(n))}function FX(t){return t.getDay()===new Date().getDay()}function fM(t,e){e===void 0&&(e=Xt.ISO_8601);var n=t.getDay();switch(e){case Xt.ISLAMIC:case Xt.HEBREW:return n===IX||n===FC;case Xt.ISO_8601:case Xt.GREGORY:return n===FC||n===CX;default:throw new Error("Unsupported calendar type.")}}var zr="react-calendar__navigation";function UX(t){var e=t.activeStartDate,n=t.drillUp,r=t.formatMonthYear,i=r===void 0?lM:r,s=t.formatYear,o=s===void 0?Zm:s,a=t.locale,l=t.maxDate,c=t.minDate,u=t.navigationAriaLabel,f=u===void 0?"":u,p=t.navigationAriaLive,m=t.navigationLabel,y=t.next2AriaLabel,_=y===void 0?"":y,x=t.next2Label,v=x===void 0?"»":x,w=t.nextAriaLabel,S=w===void 0?"":w,P=t.nextLabel,I=P===void 0?"›":P,M=t.prev2AriaLabel,k=M===void 0?"":M,T=t.prev2Label,E=T===void 0?"«":T,C=t.prevAriaLabel,D=C===void 0?"":C,A=t.prevLabel,R=A===void 0?"‹":A,$=t.setActiveStartDate,W=t.showDoubleView,q=t.view,Z=t.views,B=Z.indexOf(q)>0,Q=q!=="century",J=NX(q,e),me=Q?DX(q,e):void 0,ue=cM(q,e),xe=Q?jX(q,e):void 0,qe=function(){if(J.getFullYear()<0)return!0;var ve=MX(q,e);return c&&c>=ve}(),nt=Q&&function(){if(me.getFullYear()<0)return!0;var ve=OX(q,e);return c&&c>=ve}(),Ke=l&&l<ue,at=Q&&l&&l<xe;function nn(){$(J,"prev")}function rn(){$(me,"prev2")}function Rn(){$(ue,"next")}function Wn(){$(xe,"next2")}function re(ve){var Be=function(){switch(q){case"century":return VX(a,o,ve);case"decade":return dM(a,o,ve);case"year":return o(a,ve);case"month":return i(a,ve);default:throw new Error("Invalid view: ".concat(q,"."))}}();return m?m({date:ve,label:Be,locale:a||Xj()||void 0,view:q}):Be}function Ue(){var ve="".concat(zr,"__label");return h.jsxs("button",{"aria-label":f,"aria-live":p,className:ve,disabled:!B,onClick:n,style:{flexGrow:1},type:"button",children:[h.jsx("span",{className:"".concat(ve,"__labelText ").concat(ve,"__labelText--from"),children:re(e)}),W?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"".concat(ve,"__divider"),children:" – "}),h.jsx("span",{className:"".concat(ve,"__labelText ").concat(ve,"__labelText--to"),children:re(ue)})]}):null]})}return h.jsxs("div",{className:zr,children:[E!==null&&Q?h.jsx("button",{"aria-label":k,className:"".concat(zr,"__arrow ").concat(zr,"__prev2-button"),disabled:nt,onClick:rn,type:"button",children:E}):null,R!==null&&h.jsx("button",{"aria-label":D,className:"".concat(zr,"__arrow ").concat(zr,"__prev-button"),disabled:qe,onClick:nn,type:"button",children:R}),Ue(),I!==null&&h.jsx("button",{"aria-label":S,className:"".concat(zr,"__arrow ").concat(zr,"__next-button"),disabled:Ke,onClick:Rn,type:"button",children:I}),v!==null&&Q?h.jsx("button",{"aria-label":_,className:"".concat(zr,"__arrow ").concat(zr,"__next2-button"),disabled:at,onClick:Wn,type:"button",children:v}):null]})}var Ya=function(){return Ya=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ya.apply(this,arguments)},BX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function BC(t){return"".concat(t,"%")}function fb(t){var e=t.children,n=t.className,r=t.count,i=t.direction,s=t.offset,o=t.style,a=t.wrap,l=BX(t,["children","className","count","direction","offset","style","wrap"]);return h.jsx("div",Ya({className:n,style:Ya({display:"flex",flexDirection:i,flexWrap:a?"wrap":"nowrap"},o)},l,{children:j.Children.map(e,function(c,u){var f=s&&u===0?BC(100*s/r):null;return j.cloneElement(c,Ya(Ya({},c.props),{style:{flexBasis:BC(100/r),flexShrink:0,flexGrow:0,overflow:"hidden",marginLeft:f,marginInlineStart:f,marginInlineEnd:0}}))})}))}function zX(t,e,n){return e&&e>t?e:n&&n<t?n:t}function lh(t,e){return e[0]<=t&&e[1]>=t}function $X(t,e){return t[0]<=e[0]&&t[1]>=e[1]}function pM(t,e){return lh(t[0],e)||lh(t[1],e)}function zC(t,e,n){var r=pM(e,t),i=[];if(r){i.push(n);var s=lh(t[0],e),o=lh(t[1],e);s&&i.push("".concat(n,"Start")),o&&i.push("".concat(n,"End")),s&&o&&i.push("".concat(n,"BothEnds"))}return i}function WX(t){return Array.isArray(t)?t[0]!==null&&t[1]!==null:t!==null}function HX(t){if(!t)throw new Error("args is required");var e=t.value,n=t.date,r=t.hover,i="react-calendar__tile",s=[i];if(!n)return s;var o=new Date,a=function(){if(Array.isArray(n))return n;var m=t.dateType;if(!m)throw new Error("dateType is required when date is not an array of two dates");return UC(m,n)}();if(lh(o,a)&&s.push("".concat(i,"--now")),!e||!WX(e))return s;var l=function(){if(Array.isArray(e))return e;var m=t.valueType;if(!m)throw new Error("valueType is required when value is not an array of two dates");return UC(m,e)}();$X(l,a)?s.push("".concat(i,"--active")):pM(l,a)&&s.push("".concat(i,"--hasActive"));var c=zC(l,a,"".concat(i,"--range"));s.push.apply(s,c);var u=Array.isArray(e)?e:[e];if(r&&u.length===1){var f=r>l[0]?[l[0],r]:[r,l[0]],p=zC(f,a,"".concat(i,"--hover"));s.push.apply(s,p)}return s}function eg(t){for(var e=t.className,n=t.count,r=n===void 0?3:n,i=t.dateTransform,s=t.dateType,o=t.end,a=t.hover,l=t.offset,c=t.renderTile,u=t.start,f=t.step,p=f===void 0?1:f,m=t.value,y=t.valueType,_=[],x=u;x<=o;x+=p){var v=i(x);_.push(c({classes:HX({date:v,dateType:s,hover:a,value:m,valueType:y}),date:v}))}return h.jsx(fb,{className:e,count:r,offset:l,wrap:!0,children:_})}function tg(t){var e=t.activeStartDate,n=t.children,r=t.classes,i=t.date,s=t.formatAbbr,o=t.locale,a=t.maxDate,l=t.maxDateTransform,c=t.minDate,u=t.minDateTransform,f=t.onClick,p=t.onMouseOver,m=t.style,y=t.tileClassName,_=t.tileContent,x=t.tileDisabled,v=t.view,w=j.useMemo(function(){var P={activeStartDate:e,date:i,view:v};return typeof y=="function"?y(P):y},[e,i,y,v]),S=j.useMemo(function(){var P={activeStartDate:e,date:i,view:v};return typeof _=="function"?_(P):_},[e,i,_,v]);return h.jsxs("button",{className:Ym(r,w),disabled:c&&u(c)>i||a&&l(a)<i||(x==null?void 0:x({activeStartDate:e,date:i,view:v})),onClick:f?function(P){return f(i,P)}:void 0,onFocus:p?function(){return p(i)}:void 0,onMouseOver:p?function(){return p(i)}:void 0,style:m,type:"button",children:[s?h.jsx("abbr",{"aria-label":s(o,i),children:n}):n,S]})}var D0=function(){return D0=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},D0.apply(this,arguments)},qX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},$C="react-calendar__century-view__decades__decade";function KX(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentCentury,i=t.formatYear,s=i===void 0?Zm:i,o=qX(t,["classes","currentCentury","formatYear"]),a=o.date,l=o.locale,c=[];return n&&c.push.apply(c,n),c.push($C),Kl(a).getFullYear()!==r&&c.push("".concat($C,"--neighboringCentury")),h.jsx(tg,D0({},o,{classes:c,maxDateTransform:Xm,minDateTransform:no,view:"century",children:dM(l,s,a)}))}var j0=function(){return j0=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},j0.apply(this,arguments)},WC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function GX(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringCentury,i=t.value,s=t.valueType,o=WC(t,["activeStartDate","hover","showNeighboringCentury","value","valueType"]),a=AX(e),l=a+(r?119:99);return h.jsx(eg,{className:"react-calendar__century-view__decades",dateTransform:no,dateType:"decade",end:l,hover:n,renderTile:function(c){var u=c.date,f=WC(c,["date"]);return h.jsx(KX,j0({},o,f,{activeStartDate:e,currentCentury:a,date:u}),u.getTime())},start:a,step:10,value:i,valueType:s})}var M0=function(){return M0=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},M0.apply(this,arguments)};function YX(t){function e(){return h.jsx(GX,M0({},t))}return h.jsx("div",{className:"react-calendar__century-view",children:e()})}var O0=function(){return O0=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},O0.apply(this,arguments)},QX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},HC="react-calendar__decade-view__years__year";function XX(t){var e=t.classes,n=e===void 0?[]:e,r=t.currentDecade,i=t.formatYear,s=i===void 0?Zm:i,o=QX(t,["classes","currentDecade","formatYear"]),a=o.date,l=o.locale,c=[];return n&&c.push.apply(c,n),c.push(HC),no(a).getFullYear()!==r&&c.push("".concat(HC,"--neighboringDecade")),h.jsx(tg,O0({},o,{classes:c,maxDateTransform:Jm,minDateTransform:Gl,view:"decade",children:s(l,a)}))}var L0=function(){return L0=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},L0.apply(this,arguments)},qC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function JX(t){var e=t.activeStartDate,n=t.hover,r=t.showNeighboringDecade,i=t.value,s=t.valueType,o=qC(t,["activeStartDate","hover","showNeighboringDecade","value","valueType"]),a=PX(e),l=a+(r?11:9);return h.jsx(eg,{className:"react-calendar__decade-view__years",dateTransform:Gl,dateType:"year",end:l,hover:n,renderTile:function(c){var u=c.date,f=qC(c,["date"]);return h.jsx(XX,L0({},o,f,{activeStartDate:e,currentDecade:a,date:u}),u.getTime())},start:a,value:i,valueType:s})}var V0=function(){return V0=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},V0.apply(this,arguments)};function ZX(t){function e(){return h.jsx(JX,V0({},t))}return h.jsx("div",{className:"react-calendar__decade-view",children:e()})}var F0=function(){return F0=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},F0.apply(this,arguments)},eJ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},KC=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},tJ="react-calendar__year-view__months__month";function nJ(t){var e=t.classes,n=e===void 0?[]:e,r=t.formatMonth,i=r===void 0?SX:r,s=t.formatMonthYear,o=s===void 0?lM:s,a=eJ(t,["classes","formatMonth","formatMonthYear"]),l=a.date,c=a.locale;return h.jsx(tg,F0({},a,{classes:KC(KC([],n,!0),[tJ],!1),formatAbbr:o,maxDateTransform:Bh,minDateTransform:ma,view:"year",children:i(c,l)}))}var U0=function(){return U0=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},U0.apply(this,arguments)},GC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function rJ(t){var e=t.activeStartDate,n=t.hover,r=t.value,i=t.valueType,s=GC(t,["activeStartDate","hover","value","valueType"]),o=0,a=11,l=ot(e);return h.jsx(eg,{className:"react-calendar__year-view__months",dateTransform:function(c){var u=new Date;return u.setFullYear(l,c,1),ma(u)},dateType:"month",end:a,hover:n,renderTile:function(c){var u=c.date,f=GC(c,["date"]);return h.jsx(nJ,U0({},s,f,{activeStartDate:e,date:u}),u.getTime())},start:o,value:r,valueType:i})}var B0=function(){return B0=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},B0.apply(this,arguments)};function iJ(t){function e(){return h.jsx(rJ,B0({},t))}return h.jsx("div",{className:"react-calendar__year-view",children:e()})}var z0=function(){return z0=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},z0.apply(this,arguments)},sJ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Ry="react-calendar__month-view__days__day";function oJ(t){var e=t.calendarType,n=t.classes,r=n===void 0?[]:n,i=t.currentMonthIndex,s=t.formatDay,o=s===void 0?bX:s,a=t.formatLongDate,l=a===void 0?TX:a,c=sJ(t,["calendarType","classes","currentMonthIndex","formatDay","formatLongDate"]),u=c.date,f=c.locale,p=[];return r&&p.push.apply(p,r),p.push(Ry),fM(u,e)&&p.push("".concat(Ry,"--weekend")),u.getMonth()!==i&&p.push("".concat(Ry,"--neighboringMonth")),h.jsx(tg,z0({},c,{classes:p,formatAbbr:l,maxDateTransform:hb,minDateTransform:zh,view:"month",children:o(f,u)}))}var $0=function(){return $0=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},$0.apply(this,arguments)},YC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function aJ(t){var e=t.activeStartDate,n=t.calendarType,r=t.hover,i=t.showFixedNumberOfWeeks,s=t.showNeighboringMonth,o=t.value,a=t.valueType,l=YC(t,["activeStartDate","calendarType","hover","showFixedNumberOfWeeks","showNeighboringMonth","value","valueType"]),c=ot(e),u=to(e),f=i||s,p=ah(e,n),m=f?0:p,y=(f?-p:0)+1,_=function(){if(i)return y+6*7-1;var x=aM(e);if(s){var v=new Date;v.setFullYear(c,u,x),v.setHours(0,0,0,0);var w=7-ah(v,n)-1;return x+w}return x}();return h.jsx(eg,{className:"react-calendar__month-view__days",count:7,dateTransform:function(x){var v=new Date;return v.setFullYear(c,u,x),zh(v)},dateType:"day",hover:r,end:_,renderTile:function(x){var v=x.date,w=YC(x,["date"]);return h.jsx(oJ,$0({},l,w,{activeStartDate:e,calendarType:n,currentMonthIndex:u,date:v}),v.getTime())},offset:m,start:y,value:o,valueType:a})}var mM="react-calendar__month-view__weekdays",Ny="".concat(mM,"__weekday");function lJ(t){for(var e=t.calendarType,n=t.formatShortWeekday,r=n===void 0?EX:n,i=t.formatWeekday,s=i===void 0?kX:i,o=t.locale,a=t.onMouseLeave,l=new Date,c=ma(l),u=ot(c),f=to(c),p=[],m=1;m<=7;m+=1){var y=new Date(u,f,m-ah(c,e)),_=s(o,y);p.push(h.jsx("div",{className:Ym(Ny,FX(y)&&"".concat(Ny,"--current"),fM(y,e)&&"".concat(Ny,"--weekend")),children:h.jsx("abbr",{"aria-label":_,title:_,children:r(o,y).replace(".","")})},m))}return h.jsx(fb,{className:mM,count:7,onFocus:a,onMouseOver:a,children:p})}var $p=function(){return $p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},$p.apply(this,arguments)},QC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},XC="react-calendar__tile";function cJ(t){var e=t.onClickWeekNumber,n=t.weekNumber,r=h.jsx("span",{children:n});if(e){var i=t.date,s=t.onClickWeekNumber,o=t.weekNumber,a=QC(t,["date","onClickWeekNumber","weekNumber"]);return h.jsx("button",$p({},a,{className:XC,onClick:function(l){return s(o,i,l)},type:"button",children:r}))}else{t.date,t.onClickWeekNumber,t.weekNumber;var a=QC(t,["date","onClickWeekNumber","weekNumber"]);return h.jsx("div",$p({},a,{className:XC,children:r}))}}function uJ(t){var e=t.activeStartDate,n=t.calendarType,r=t.onClickWeekNumber,i=t.onMouseLeave,s=t.showFixedNumberOfWeeks,o=function(){if(s)return 6;var c=aM(e),u=ah(e,n),f=c-(7-u);return 1+Math.ceil(f/7)}(),a=function(){for(var c=ot(e),u=to(e),f=Qm(e),p=[],m=0;m<o;m+=1)p.push(N0(new Date(c,u,f+m*7),n));return p}(),l=a.map(function(c){return RX(c,n)});return h.jsx(fb,{className:"react-calendar__month-view__weekNumbers",count:o,direction:"column",onFocus:i,onMouseOver:i,style:{flexBasis:"calc(100% * (1 / 8)",flexShrink:0},children:l.map(function(c,u){var f=a[u];if(!f)throw new Error("date is not defined");return h.jsx(cJ,{date:f,onClickWeekNumber:r,weekNumber:c},c)})})}var W0=function(){return W0=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},W0.apply(this,arguments)},hJ=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function dJ(t){if(t)for(var e=0,n=Object.entries(dX);e<n.length;e++){var r=n[e],i=r[0],s=r[1];if(s.includes(t))return i}return Xt.ISO_8601}function fJ(t){var e=t.activeStartDate,n=t.locale,r=t.onMouseLeave,i=t.showFixedNumberOfWeeks,s=t.calendarType,o=s===void 0?dJ(n):s,a=t.formatShortWeekday,l=t.formatWeekday,c=t.onClickWeekNumber,u=t.showWeekNumbers,f=hJ(t,["calendarType","formatShortWeekday","formatWeekday","onClickWeekNumber","showWeekNumbers"]);function p(){return h.jsx(lJ,{calendarType:o,formatShortWeekday:a,formatWeekday:l,locale:n,onMouseLeave:r})}function m(){return u?h.jsx(uJ,{activeStartDate:e,calendarType:o,onClickWeekNumber:c,onMouseLeave:r,showFixedNumberOfWeeks:i}):null}function y(){return h.jsx(aJ,W0({calendarType:o},f))}var _="react-calendar__month-view";return h.jsx("div",{className:Ym(_,u?"".concat(_,"--weekNumbers"):""),children:h.jsxs("div",{style:{display:"flex",alignItems:"flex-end"},children:[m(),h.jsxs("div",{style:{flexGrow:1,width:"100%"},children:[p(),y()]})]})})}var Qa=function(){return Qa=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Qa.apply(this,arguments)},Kd="react-calendar",Pf=["century","decade","year","month"],pJ=["decade","year","month","day"],pb=new Date;pb.setFullYear(1,0,1);pb.setHours(0,0,0,0);var mJ=new Date(864e13);function Hc(t){return t instanceof Date?t:new Date(t)}function gM(t,e){return Pf.slice(Pf.indexOf(t),Pf.indexOf(e)+1)}function gJ(t,e,n){var r=gM(e,n);return r.indexOf(t)!==-1}function mb(t,e,n){return t&&gJ(t,e,n)?t:n}function yM(t){var e=Pf.indexOf(t);return pJ[e]}function yJ(t,e){var n=Array.isArray(t)?t[e]:t;if(!n)return null;var r=Hc(n);if(Number.isNaN(r.getTime()))throw new Error("Invalid date: ".concat(t));return r}function vM(t,e){var n=t.value,r=t.minDate,i=t.maxDate,s=t.maxDetail,o=yJ(n,e);if(!o)return null;var a=yM(s),l=function(){switch(e){case 0:return zo(a,o);case 1:return uM(a,o);default:throw new Error("Invalid index value: ".concat(e))}}();return zX(l,r,i)}var gb=function(t){return vM(t,0)},_M=function(t){return vM(t,1)},vJ=function(t){return[gb,_M].map(function(e){return e(t)})};function xM(t){var e=t.maxDate,n=t.maxDetail,r=t.minDate,i=t.minDetail,s=t.value,o=t.view,a=mb(o,i,n),l=gb({value:s,minDate:r,maxDate:e,maxDetail:n})||new Date;return zo(a,l)}function _J(t){var e=t.activeStartDate,n=t.defaultActiveStartDate,r=t.defaultValue,i=t.defaultView,s=t.maxDate,o=t.maxDetail,a=t.minDate,l=t.minDetail,c=t.value,u=t.view,f=mb(u,l,o),p=e||n;return p?zo(f,p):xM({maxDate:s,maxDetail:o,minDate:a,minDetail:l,value:c||r,view:u||i})}function Dy(t){return t&&(!Array.isArray(t)||t.length===1)}function Gd(t,e){return t instanceof Date&&e instanceof Date&&t.getTime()===e.getTime()}var wM=j.forwardRef(function(e,n){var r=e.activeStartDate,i=e.allowPartialRange,s=e.calendarType,o=e.className,a=e.defaultActiveStartDate,l=e.defaultValue,c=e.defaultView,u=e.formatDay,f=e.formatLongDate,p=e.formatMonth,m=e.formatMonthYear,y=e.formatShortWeekday,_=e.formatWeekday,x=e.formatYear,v=e.goToRangeStartOnSelect,w=v===void 0?!0:v,S=e.inputRef,P=e.locale,I=e.maxDate,M=I===void 0?mJ:I,k=e.maxDetail,T=k===void 0?"month":k,E=e.minDate,C=E===void 0?pb:E,D=e.minDetail,A=D===void 0?"century":D,R=e.navigationAriaLabel,$=e.navigationAriaLive,W=e.navigationLabel,q=e.next2AriaLabel,Z=e.next2Label,B=e.nextAriaLabel,Q=e.nextLabel,J=e.onActiveStartDateChange,me=e.onChange,ue=e.onClickDay,xe=e.onClickDecade,qe=e.onClickMonth,nt=e.onClickWeekNumber,Ke=e.onClickYear,at=e.onDrillDown,nn=e.onDrillUp,rn=e.onViewChange,Rn=e.prev2AriaLabel,Wn=e.prev2Label,re=e.prevAriaLabel,Ue=e.prevLabel,ve=e.returnValue,Be=ve===void 0?"start":ve,be=e.selectRange,Yi=e.showDoubleView,Yl=e.showFixedNumberOfWeeks,Qi=e.showNavigation,O=Qi===void 0?!0:Qi,V=e.showNeighboringCentury,U=e.showNeighboringDecade,ee=e.showNeighboringMonth,Y=ee===void 0?!0:ee,G=e.showWeekNumbers,te=e.tileClassName,de=e.tileContent,Ae=e.tileDisabled,Dt=e.value,Or=e.view,Hn=j.useState(a),di=Hn[0],vr=Hn[1],fi=j.useState(null),ro=fi[0],io=fi[1],ya=j.useState(Array.isArray(l)?l.map(function(_e){return _e!==null?Hc(_e):null}):l!=null?Hc(l):null),Lr=ya[0],$h=ya[1],Ql=j.useState(c),so=Ql[0],va=Ql[1],Lt=r||di||_J({activeStartDate:r,defaultActiveStartDate:a,defaultValue:l,defaultView:c,maxDate:M,maxDetail:T,minDate:C,minDetail:A,value:Dt,view:Or}),mt=function(){var _e=function(){return be&&Dy(Lr)?Lr:Dt!==void 0?Dt:Lr}();return _e?Array.isArray(_e)?_e.map(function(De){return De!==null?Hc(De):null}):_e!==null?Hc(_e):null:null}(),oo=yM(T),ze=mb(Or||so,A,T),qn=gM(A,T),ao=be?ro:null,_a=qn.indexOf(ze)<qn.length-1,Vt=qn.indexOf(ze)>0,Xl=j.useCallback(function(_e){var De=function(){switch(Be){case"start":return gb;case"end":return _M;case"range":return vJ;default:throw new Error("Invalid returnValue.")}}();return De({maxDate:M,maxDetail:T,minDate:C,value:_e})},[M,T,C,Be]),pi=j.useCallback(function(_e,De){vr(_e);var lt={action:De,activeStartDate:_e,value:mt,view:ze};J&&!Gd(Lt,_e)&&J(lt)},[Lt,J,mt,ze]),Vr=j.useCallback(function(_e,De){var lt=function(){switch(ze){case"century":return xe;case"decade":return Ke;case"year":return qe;case"month":return ue;default:throw new Error("Invalid view: ".concat(ze,"."))}}();lt&&lt(_e,De)},[ue,xe,qe,Ke,ze]),Jl=j.useCallback(function(_e,De){if(_a){Vr(_e,De);var lt=qn[qn.indexOf(ze)+1];if(!lt)throw new Error("Attempted to drill down from the lowest view.");vr(_e),va(lt);var Nn={action:"drillDown",activeStartDate:_e,value:mt,view:lt};J&&!Gd(Lt,_e)&&J(Nn),rn&&ze!==lt&&rn(Nn),at&&at(Nn)}},[Lt,_a,J,Vr,at,rn,mt,ze,qn]),Zl=j.useCallback(function(){if(Vt){var _e=qn[qn.indexOf(ze)-1];if(!_e)throw new Error("Attempted to drill up from the highest view.");var De=zo(_e,Lt);vr(De),va(_e);var lt={action:"drillUp",activeStartDate:De,value:mt,view:_e};J&&!Gd(Lt,De)&&J(lt),rn&&ze!==_e&&rn(lt),nn&&nn(lt)}},[Lt,Vt,J,nn,rn,mt,ze,qn]),Fr=j.useCallback(function(_e,De){var lt=mt;Vr(_e,De);var Nn=be&&!Dy(lt),Tn;if(be)if(Nn)Tn=zo(oo,_e);else{if(!lt)throw new Error("previousValue is required");if(Array.isArray(lt))throw new Error("previousValue must not be an array");Tn=LX(oo,lt,_e)}else Tn=Xl(_e);var co=!be||Nn||w?xM({maxDate:M,maxDetail:T,minDate:C,minDetail:A,value:Tn,view:ze}):null;De.persist(),vr(co),$h(Tn);var Hh={action:"onChange",activeStartDate:co,value:Tn,view:ze};if(J&&!Gd(Lt,co)&&J(Hh),me)if(be){var qh=Dy(Tn);if(!qh)me(Tn||null,De);else if(i){if(Array.isArray(Tn))throw new Error("value must not be an array");me([Tn||null,null],De)}}else me(Tn||null,De)},[Lt,i,Xl,w,M,T,C,A,J,me,Vr,be,mt,oo,ze]);function ng(_e){io(_e)}function ec(){io(null)}j.useImperativeHandle(n,function(){return{activeStartDate:Lt,drillDown:Jl,drillUp:Zl,onChange:Fr,setActiveStartDate:pi,value:mt,view:ze}},[Lt,Jl,Zl,Fr,pi,mt,ze]);function lo(_e){var De=_e?cM(ze,Lt):zo(ze,Lt),lt=_a?Jl:Fr,Nn={activeStartDate:De,hover:ao,locale:P,maxDate:M,minDate:C,onClick:lt,onMouseOver:be?ng:void 0,tileClassName:te,tileContent:de,tileDisabled:Ae,value:mt,valueType:oo};switch(ze){case"century":return h.jsx(YX,Qa({formatYear:x,showNeighboringCentury:V},Nn));case"decade":return h.jsx(ZX,Qa({formatYear:x,showNeighboringDecade:U},Nn));case"year":return h.jsx(iJ,Qa({formatMonth:p,formatMonthYear:m},Nn));case"month":return h.jsx(fJ,Qa({calendarType:s,formatDay:u,formatLongDate:f,formatShortWeekday:y,formatWeekday:_,onClickWeekNumber:nt,onMouseLeave:be?ec:void 0,showFixedNumberOfWeeks:typeof Yl<"u"?Yl:Yi,showNeighboringMonth:Y,showWeekNumbers:G},Nn));default:throw new Error("Invalid view: ".concat(ze,"."))}}function Wh(){return O?h.jsx(UX,{activeStartDate:Lt,drillUp:Zl,formatMonthYear:m,formatYear:x,locale:P,maxDate:M,minDate:C,navigationAriaLabel:R,navigationAriaLive:$,navigationLabel:W,next2AriaLabel:q,next2Label:Z,nextAriaLabel:B,nextLabel:Q,prev2AriaLabel:Rn,prev2Label:Wn,prevAriaLabel:re,prevLabel:Ue,setActiveStartDate:pi,showDoubleView:Yi,view:ze,views:qn}):null}var tc=Array.isArray(mt)?mt:[mt];return h.jsxs("div",{className:Ym(Kd,be&&tc.length===1&&"".concat(Kd,"--selectRange"),Yi&&"".concat(Kd,"--doubleView"),o),ref:S,children:[Wh(),h.jsxs("div",{className:"".concat(Kd,"__viewContainer"),onBlur:be?ec:void 0,onMouseLeave:be?ec:void 0,children:[lo(),Yi?lo(!0):null]})]})});let Yd;const xJ=new Uint8Array(16);function wJ(){if(!Yd&&(Yd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Yd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Yd(xJ)}const qt=[];for(let t=0;t<256;++t)qt.push((t+256).toString(16).slice(1));function bJ(t,e=0){return qt[t[e+0]]+qt[t[e+1]]+qt[t[e+2]]+qt[t[e+3]]+"-"+qt[t[e+4]]+qt[t[e+5]]+"-"+qt[t[e+6]]+qt[t[e+7]]+"-"+qt[t[e+8]]+qt[t[e+9]]+"-"+qt[t[e+10]]+qt[t[e+11]]+qt[t[e+12]]+qt[t[e+13]]+qt[t[e+14]]+qt[t[e+15]]}const TJ=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),JC={randomUUID:TJ};function yb(t,e,n){if(JC.randomUUID&&!t)return JC.randomUUID();t=t||{};const r=t.random||(t.rng||wJ)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,bJ(r)}function SJ({clientId:t}){const{register:e,handleSubmit:n,reset:r,formState:{errors:i}}=ql(),[s,o]=j.useState(!1),[a,l]=j.useState(0),c=async p=>{o(!0),l(0);const m=Array.from(p.photos);if(m.length===0){alert("Per favore, seleziona almeno una foto."),o(!1);return}try{const y=await Promise.all(m.map(_=>new Promise((x,v)=>{const w=`${yb()}-${_.name}`,S=kl(I9,`clients/${t}/checks/${w}`),P=b9(S,_);P.on("state_changed",I=>{const M=I.bytesTransferred/I.totalBytes*100;l(M)},I=>v(I),async()=>{const I=await Nm(P.snapshot.ref);x(I)})})));await Pm(bt(le,"clients",t,"checks"),{notes:p.notes,photoURLs:y,createdAt:Un()}),r()}catch(y){console.error("Errore nel processo di salvataggio del check:",y),alert("Si è verificato un errore durante il salvataggio.")}finally{o(!1),l(0)}},u="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary transition-all",f="block mb-1 text-sm font-medium text-muted";return h.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[h.jsxs("h3",{className:"text-xl font-semibold mb-4 text-primary flex items-center gap-2",children:[h.jsx(C7,{})," Nuovo Check"]}),h.jsxs("form",{onSubmit:n(c),className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"notes",className:f,children:"Note sui progressi"}),h.jsx("textarea",{id:"notes",...e("notes"),rows:"4",className:u,placeholder:"Es. Aumento carichi, sensazioni, misure..."})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"photos",className:f,children:"Foto Progressi"}),h.jsx("input",{id:"photos",type:"file",multiple:!0,accept:"image/png, image/jpeg, image/webp",...e("photos",{required:"Le foto sono obbligatorie."}),className:"w-full text-sm text-muted file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary/20 file:text-primary hover:file:bg-primary/30"}),i.photos&&h.jsx("p",{className:"text-red-400 text-xs mt-1",children:i.photos.message})]}),s&&h.jsx("div",{className:"w-full bg-background rounded-full h-2.5",children:h.jsx("div",{className:"bg-primary h-2.5 rounded-full",style:{width:`${a}%`}})}),h.jsx("div",{className:"flex justify-end",children:h.jsx("button",{type:"submit",disabled:s,className:"px-5 py-2.5 bg-primary hover:bg-primary/80 text-white rounded-lg transition disabled:opacity-50 font-semibold",children:s?`Caricamento... ${Math.round(a)}%`:"Salva Check"})})]})]})}function EJ({clientId:t,onSave:e}){const{register:n,handleSubmit:r,formState:{isSubmitting:i,errors:s}}=ql(),[o,a]=j.useState(""),[l,c]=j.useState(!1),u=async _=>{a(""),c(!1);try{const x=Me(le,"clients",t,"anamnesi","initial");await Vo(x,{..._,createdAt:Un()}),a("Anamnesi salvata con successo!"),setTimeout(e,1500)}catch(x){console.error("Errore nel salvataggio dell'anamnesi:",x),a("Si è verificato un errore. Riprova."),c(!0)}},f="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",p="block mb-1 text-sm font-medium text-muted",m="bg-card p-4 rounded-lg border border-white/10",y="font-semibold mb-3 text-lg text-primary";return h.jsxs($e.div,{initial:{opacity:0},animate:{opacity:1},children:[h.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Compila Anamnesi Iniziale"}),h.jsxs("form",{onSubmit:r(u),className:"space-y-6",children:[h.jsxs("div",{className:m,children:[h.jsx("h4",{className:y,children:"Dati Anagrafici e Misure"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Nome*"}),h.jsx("input",{...n("firstName",{required:!0}),className:f})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Cognome*"}),h.jsx("input",{...n("lastName",{required:!0}),className:f})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Data di Nascita*"}),h.jsx("input",{type:"date",...n("birthDate",{required:!0}),className:f+" text-muted"})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Che lavoro fai?*"}),h.jsx("input",{...n("job",{required:!0}),className:f,placeholder:"Es. Impiegato, operaio..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Peso (kg)*"}),h.jsx("input",{type:"number",step:"0.1",...n("weight",{required:!0}),className:f,placeholder:"Es. 75.5"})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Altezza (cm)*"}),h.jsx("input",{type:"number",...n("height",{required:!0}),className:f,placeholder:"Es. 180"})]})]})]}),h.jsxs("div",{className:m,children:[h.jsx("h4",{className:y,children:"Abitudini Alimentari"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Quanti pasti riesci a fare al giorno?*"}),h.jsxs("select",{...n("mealsPerDay",{required:!0}),className:f,children:[h.jsx("option",{value:"3",children:"3"}),h.jsx("option",{value:"4",children:"4"}),h.jsx("option",{value:"5",children:"5"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Colazione: Dolce o Salata?*"}),h.jsxs("select",{...n("breakfastType",{required:!0}),className:f,children:[h.jsx("option",{value:"dolce",children:"Dolce"}),h.jsx("option",{value:"salato",children:"Salato"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Scrivimi una lista di alimenti da inserire nella settimana*"}),h.jsx("textarea",{...n("desiredFoods",{required:!0}),rows:"3",className:f,placeholder:"Elenca qui gli alimenti che preferisci..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Cosa non mangi?*"}),h.jsx("textarea",{...n("dislikedFoods",{required:!0}),rows:"2",className:f,placeholder:"Elenca qui gli alimenti da evitare..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Hai intolleranze?*"}),h.jsx("input",{...n("intolerances",{required:!0}),className:f,placeholder:"Es. Lattosio, glutine, nessuna..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Hai problemi di digestione o gonfiore?*"}),h.jsx("input",{...n("digestionIssues",{required:!0}),className:f,placeholder:"Sì/No, e se sì quali..."})]})]})]}),h.jsxs("div",{className:m,children:[h.jsx("h4",{className:y,children:"Allenamento"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Quanti allenamenti a settimana?*"}),h.jsx("input",{type:"number",...n("workoutsPerWeek",{required:!0}),className:f,placeholder:"Es. 3"})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Specialità, dove ti alleni e con quali attrezzi?*"}),h.jsx("textarea",{...n("trainingDetails",{required:!0}),rows:"3",className:f,placeholder:"Es. Bodybuilding in palestra, a casa con manubri e panca..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"A che ora e per quanto tempo ti alleni?*"}),h.jsx("input",{...n("trainingTime",{required:!0}),className:f,placeholder:"Es. La sera dalle 18 alle 19:30"})]})]})]}),h.jsxs("div",{className:m,children:[h.jsx("h4",{className:y,children:"Salute e Obiettivi"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Infortuni o problematiche posturali/articolari?*"}),h.jsx("textarea",{...n("injuries",{required:!0}),rows:"3",className:f,placeholder:"Es. Mal di schiena, ernie, sciatalgie..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Prendi farmaci?*"}),h.jsx("input",{...n("medications",{required:!0}),className:f,placeholder:"Sì/No, e se sì quali..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Usi integratori? (se sì, quali)*"}),h.jsx("input",{...n("supplements",{required:!0}),className:f,placeholder:"Sì/No, e se sì quali..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Scrivimi il tuo obiettivo*"}),h.jsx("textarea",{...n("mainGoal",{required:!0}),rows:"3",className:f,placeholder:"Descrivi in dettaglio l'obiettivo che vuoi raggiungere..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Durata percorso scelto?*"}),h.jsx("input",{...n("programDuration",{required:!0}),className:f,placeholder:"Es. 3 mesi, 6 mesi..."})]})]})]}),h.jsx("div",{className:"bg-primary/10 p-4 rounded-lg border border-primary/30 text-center",children:h.jsx("p",{className:"text-sm text-primary",children:"Ricorda di richiedere al cliente le 4 foto per il check iniziale (frontale, laterali, posteriore)."})}),o&&h.jsxs("div",{className:`p-3 rounded-lg flex items-center gap-2 text-sm ${l?"bg-red-900/50 text-red-300":"bg-green-900/50 text-green-300"}`,children:[l?h.jsx(m7,{}):h.jsx(jw,{}),o]}),h.jsx("div",{className:"flex justify-end pt-2",children:h.jsxs("button",{type:"submit",disabled:i,className:"flex items-center gap-2 px-5 py-2.5 bg-primary hover:bg-primary/80 text-white rounded-lg transition disabled:opacity-50 font-semibold",children:[h.jsx(Vw,{})," ",i?"Salvataggio...":"Salva Anamnesi"]})})]})]})}const ZC=t=>{if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e};function kJ({clientId:t}){const{register:e,handleSubmit:n,reset:r,formState:{isSubmitting:i}}=ql(),[s,o]=j.useState([]),[a,l]=j.useState(!1);j.useEffect(()=>{const m=dr(bt(le,"clients",t,"payments"),Di("paymentDate","desc")),y=Tt(m,_=>{o(_.docs.map(x=>({id:x.id,...x.data()})))});return()=>y()},[t]);const c=async m=>{const y=parseInt(m.duration,10),_=Wx(le),x=Me(bt(le,"clients",t,"payments"));_.set(x,{amount:parseFloat(m.amount),duration:`${y} mes${y>1?"i":"e"}`,paymentMethod:m.paymentMethod,paymentDate:Un()});const v=Me(le,"clients",t),S=(await Js(v)).data();let P=ZC(S.scadenza);(!P||P<new Date)&&(P=new Date);const I=new Date(P);I.setMonth(I.getMonth()+y),_.update(v,{scadenza:I}),await _.commit(),r(),l(!1)},u=async m=>{if(window.confirm("Sei sicuro di voler eliminare questo pagamento? L'operazione non è reversibile."))try{const y=Me(le,"clients",t,"payments",m);await Am(y)}catch(y){console.error("Errore nell'eliminazione del pagamento:",y),alert("Si è verificato un errore.")}},f="w-full p-2 bg-background border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-primary",p="block mb-1 text-sm font-medium text-muted";return h.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("h3",{className:"text-xl font-semibold text-primary flex items-center gap-2",children:[h.jsx(fa,{})," Gestione Pagamenti"]}),h.jsxs("button",{onClick:()=>l(!a),className:"flex items-center gap-2 px-3 py-1.5 bg-primary/20 hover:bg-primary/30 text-primary rounded-lg text-sm",children:[a?h.jsx(Bw,{}):h.jsx(Fm,{})," ",a?"Annulla":"Aggiungi Rinnovo"]})]}),h.jsx(ua,{children:a&&h.jsxs($e.form,{onSubmit:n(c),className:"space-y-4 mb-6 pt-4 border-t border-white/10",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Importo Pagato (€)*"}),h.jsx("input",{type:"number",step:"0.01",...e("amount",{required:!0}),className:f})]}),h.jsxs("div",{children:[h.jsx("label",{className:p,children:"Durata Rinnovo (mesi)*"}),h.jsx("select",{...e("duration",{required:!0}),className:f,children:[...Array(24).keys()].map(m=>h.jsxs("option",{value:m+1,children:[m+1," mes",m>0?"i":"e"]},m+1))})]}),h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("label",{className:p,children:"Metodo di Pagamento"}),h.jsx("input",{...e("paymentMethod"),className:f,placeholder:"Es. Bonifico, Contanti"})]})]}),h.jsx("div",{className:"flex justify-end",children:h.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-primary text-white rounded-lg font-semibold transition disabled:opacity-50",children:i?"Salvataggio...":"Salva Pagamento"})})]})}),h.jsx("h4",{className:"font-semibold mb-3 mt-4",children:"Cronologia Rinnovi"}),h.jsx("div",{className:"space-y-2",children:s.length>0?s.map(m=>{var y;return h.jsxs("div",{className:"flex justify-between items-center p-3 bg-background rounded-md border border-white/10",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Dw,{className:"text-muted"}),h.jsxs("div",{children:[h.jsxs("p",{className:"font-semibold",children:[m.duration," - €",m.amount.toFixed(2)]}),h.jsxs("p",{className:"text-xs text-muted",children:["Pagato il ",(y=ZC(m.paymentDate))==null?void 0:y.toLocaleDateString("it-IT"),m.paymentMethod&&` via ${m.paymentMethod}`]})]})]}),h.jsx("button",{onClick:()=>u(m.id),className:"p-1.5 text-red-500/50 hover:text-red-500 rounded-md transition-colors",children:h.jsx(Um,{size:16})})]},m.id)}):h.jsx("p",{className:"text-sm text-muted",children:"Nessun pagamento registrato."})})]})}const CJ=`
.react-calendar { width: 100%; background: #1f2937; border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 1rem; }
.react-calendar__tile, .react-calendar__month-view__weekdays__weekday { color: white; }
.react-calendar__navigation button { color: #22d3ee; font-weight: bold; }
.react-calendar__tile--now { background: #374151; border-radius: 0.5rem; }
.react-calendar__tile--active { background: #0891b2; border-radius: 0.5rem; }
.react-calendar__tile:enabled:hover, .react-calendar__tile:enabled:focus { background: #4b5563; border-radius: 0.5rem; }
.check-day-highlight { background-color: rgba(34, 197, 94, 0.5); border-radius: 50%; }
`;function Dl(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const IJ=({urls:t})=>!t||Object.keys(t).length===0?h.jsx("p",{className:"text-muted italic",children:"Nessuna foto caricata."}):h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t border-white/10",children:["front","right","left","back"].map(e=>{const n=t[e],r=e==="front"?"Frontale":e==="back"?"Posteriore":`Laterale ${e==="left"?"Sinistro":"Destro"}`;return h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-semibold text-muted mb-1",children:r}),n?h.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:h.jsx("img",{src:n,alt:r,className:"rounded-lg w-full h-auto object-cover border border-white/20"})}):h.jsx("div",{className:"flex justify-center items-center w-full h-24 bg-background/50 rounded-lg text-gray-500 text-xs",children:"N/D"})]},e)})}),AJ=({clientId:t})=>{var l;const[e,n]=j.useState(null),[r,i]=j.useState(!0),[s,o]=j.useState({}),a=Nh();if(j.useEffect(()=>{const c=Tt(Me(le,"clients",t,"anamnesi","initial"),async u=>{if(i(!0),u.exists()){const f=u.data();if(n(f),f.photoPaths){const p={};await Promise.all(Object.entries(f.photoPaths).map(async([m,y])=>{try{const _=await Nm(kl(a,y));p[m]=_}catch(_){console.error(`Errore nel caricamento URL per ${m}:`,_)}})),o(p)}else o({})}else n(null),o({});i(!1)});return()=>c()},[t,a]),r)return h.jsx("p",{className:"text-muted text-center p-4",children:"Caricamento..."});if(e){const{photoPaths:c,submittedAt:u,...f}=e;return h.jsxs($e.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[h.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[h.jsx("h3",{className:"text-xl font-semibold text-primary mb-4",children:"Dati Anamnesi"}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(f).map(([p,m])=>{var v;const _=m&&typeof m.toDate=="function"?(v=Dl(m))==null?void 0:v.toLocaleDateString("it-IT"):String(m),x=p.replace(/([A-Z])/g," $1").replace(/_/g," ").trim();return h.jsxs("div",{className:"pb-2",children:[h.jsx("h4",{className:"font-semibold text-muted capitalize text-sm",children:x}),h.jsx("p",{className:"text-foreground whitespace-pre-wrap mt-1",children:_||"N/D"})]},p)})}),u&&h.jsxs("p",{className:"text-xs text-muted mt-4 pt-4 border-t border-white/10",children:["Compilato il: ",(l=Dl(u))==null?void 0:l.toLocaleString("it-IT")]})]}),h.jsxs("div",{className:"bg-card p-6 rounded-xl border border-white/10",children:[h.jsx("h3",{className:"text-xl font-semibold text-primary mb-4",children:"Foto Iniziali"}),h.jsx(IJ,{urls:s})]})]})}return h.jsx(EJ,{clientId:t,onSave:()=>{}})},PJ=({check:t,clientId:e})=>{var m,y;const[n,r]=j.useState(!1),[i,s]=j.useState(t.coachNotes||""),[o,a]=j.useState(!1),[l,c]=j.useState(!1),u=Nh(),f=async()=>{a(!0);try{await Gu(Me(le,"clients",e,"checks",t.id),{coachNotes:i})}finally{a(!1)}},p=async()=>{var _;if(window.confirm("Sei sicuro di voler eliminare questo check?")){c(!0);try{((_=t.photoURLs)==null?void 0:_.length)>0&&await Promise.all(t.photoURLs.map(x=>{try{const v=x.split("?")[0].split("o/")[1],w=kl(u,decodeURIComponent(v));return T9(w)}catch(v){return console.warn("Impossibile eliminare l'immagine dallo Storage. Proseguo con l'eliminazione del documento:",v),Promise.resolve()}})),await Am(Me(le,"clients",e,"checks",t.id))}catch(x){console.error("Errore eliminazione:",x),alert("Errore durante l'eliminazione."),c(!1)}}};return h.jsxs("div",{className:"bg-card rounded-lg border border-white/10 overflow-hidden",children:[h.jsxs("div",{className:"flex justify-between items-center p-4",children:[h.jsxs("button",{onClick:()=>r(!n),className:"flex-1 flex justify-between items-center text-left",children:[h.jsxs("span",{className:"font-semibold",children:["Check del ",((m=Dl(t.createdAt))==null?void 0:m.toLocaleDateString("it-IT"))||"Data Sconosciuta"]}),h.jsx($e.div,{animate:{rotate:n?180:0},children:h.jsx(zD,{})})]}),h.jsx("button",{onClick:p,disabled:l,className:"ml-4 p-1.5 text-red-500/60 hover:text-red-500 rounded-md",title:"Elimina Check",children:h.jsx(Um,{size:14})})]}),h.jsx(ua,{children:n&&h.jsx($e.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"px-4 pb-4",children:h.jsxs("div",{className:"pt-4 border-t border-white/20 space-y-4",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-semibold text-muted mb-2",children:"Note del cliente:"}),h.jsx("p",{className:"text-foreground whitespace-pre-wrap",children:t.notes||"-"})]}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:(y=t.photoURLs)==null?void 0:y.map((_,x)=>h.jsx("a",{href:_,target:"_blank",rel:"noopener noreferrer",children:h.jsx("img",{src:_,alt:`Foto ${x+1}`,className:"rounded-md aspect-square object-cover"})},x))}),h.jsxs("div",{className:"pt-4 border-t border-white/20",children:[h.jsxs("h4",{className:"text-sm font-semibold text-muted mb-2 flex items-center gap-2",children:[h.jsx($D,{})," Feedback:"]}),h.jsx("textarea",{value:i,onChange:_=>s(_.target.value),rows:"3",className:"w-full p-2 bg-background rounded-lg border border-white/10",placeholder:"Scrivi qui il tuo feedback..."}),h.jsx("div",{className:"flex justify-end mt-2",children:h.jsx("button",{onClick:f,disabled:o,className:"px-3 py-1.5 bg-primary text-white text-xs font-semibold rounded-lg",children:o?"Salvo...":"Salva"})})]})]})})})]})},RJ=({clientId:t})=>{const[e,n]=j.useState([]),[r,i]=j.useState(!0),[s,o]=j.useState(null),[a,l]=j.useState(null),[c,u]=j.useState(!1);j.useEffect(()=>{const m=dr(bt(le,"clients",t,"checks"),Di("createdAt","desc")),y=Tt(m,_=>{const x=_.docs.map(v=>({id:v.id,...v.data()})).filter(v=>v.createdAt);n(x),i(!1),o(null)},_=>{console.error("Errore nel caricamento dei checks:",_),o("Impossibile caricare i check. Controlla i permessi di Firestore."),i(!1)});return()=>y()},[t]);const f=({date:m,view:y})=>{if(y==="month"&&e.some(x=>{var v;return((v=Dl(x.createdAt))==null?void 0:v.toDateString())===m.toDateString()}))return"check-day-highlight"},p=a?e.filter(m=>{var y;return((y=Dl(m.createdAt))==null?void 0:y.toDateString())===a.toDateString()}):e;return h.jsxs(h.Fragment,{children:[h.jsx(ua,{children:c&&h.jsx($e.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex justify-center items-center z-50 p-4",onClick:()=>u(!1),children:h.jsxs($e.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"w-full max-w-2xl relative",onClick:m=>m.stopPropagation(),children:[h.jsx("button",{onClick:()=>u(!1),className:"absolute -top-2 -right-2 bg-card rounded-full p-1.5 text-muted hover:text-white z-10",children:h.jsx(Bw,{})}),h.jsx(SJ,{clientId:t})]})})}),h.jsxs("div",{className:"pt-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-xl font-semibold",children:"Cronologia Check"}),h.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-primary hover:bg-primary/80 text-white text-sm font-semibold rounded-lg transition",children:[h.jsx(Fm,{})," Crea Check"]})]}),r?h.jsx("p",{className:"text-muted",children:"Caricamento..."}):s?h.jsxs("div",{className:"text-center text-red-400 p-4 bg-red-900/50 rounded-lg border border-red-500/50",children:[h.jsxs("p",{children:["ERRORE: ",s]}),h.jsx("p",{className:"text-xs mt-2",children:"Controlla la console del browser per i dettagli tecnici."})]}):h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"lg:col-span-1",children:[e.length>0?h.jsx(wM,{onChange:l,value:a,tileClassName:f}):h.jsx("div",{className:"h-64 flex justify-center items-center bg-card rounded-xl border border-white/10",children:h.jsx("p",{className:"text-muted",children:"Aggiungi il primo check!"})}),a&&h.jsx("button",{onClick:()=>l(null),className:"w-full text-center text-primary text-sm mt-2 p-2 bg-card rounded-lg border border-white/10 hover:bg-white/10",children:"Mostra tutti i check"})]}),h.jsxs("div",{className:"lg:col-span-2",children:[h.jsx("h4",{className:"font-semibold text-muted mb-2",children:a?`Check del ${a.toLocaleDateString("it-IT")}`:"Tutti i check"}),p.length>0?h.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:p.map(m=>h.jsx(PJ,{check:m,clientId:t},m.id))}):h.jsx("div",{className:"text-center text-muted p-4 bg-card rounded-lg border border-white/10",children:h.jsx("p",{children:a?"Nessun check trovato per questa data.":"Nessun check trovato."})})]})]})]})]})};function eI(){var _;const{clientId:t}=SP(),e=Wt(),n=Ki(),[r,i]=j.useState(null),[s,o]=j.useState(!0),[a,l]=j.useState("anamnesi"),[c,u]=j.useState(!1),f=j.useCallback((x,v,w)=>`Ciao ${x},

Ecco le tue credenziali per accedere alla tua area riservata:

Email (Username): ${v}
Password Temporanea: ${w}
Link di accesso: https://mentalfitmanager.github.io/#/client-login

Ti consiglio di cambiare la password al primo accesso.
A presto!`,[]);j.useEffect(()=>{const x=new URLSearchParams(n.search).get("tab");x&&l(x)},[n.search]),j.useEffect(()=>{const x=Tt(Me(le,"clients",t),v=>{v.exists()?i({id:v.id,...v.data()}):e("/clients"),o(!1)});return()=>x()},[t,e]);const p=x=>{navigator.clipboard.writeText(x),u(!0),setTimeout(()=>u(!1),2e3)},m=()=>{if(r!=null&&r.tempPassword){const x=f(r.name,r.email,r.tempPassword);p(x)}};if(s)return h.jsx("div",{className:"text-center text-muted p-8",children:"Caricamento..."});if(!r)return null;const y=((_=Dl(r.createdAt))==null?void 0:_.toLocaleDateString("it-IT"))||"N/A";return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:CJ}),h.jsxs("div",{className:"w-full",children:[h.jsxs($e.div,{className:"flex items-center justify-between mb-6",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-bold",children:r.name}),h.jsxs("p",{className:"text-muted",children:["Cliente dal: ",y]})]}),h.jsxs("button",{onClick:()=>e("/clients"),className:"flex items-center gap-2 px-3 py-1.5 bg-card hover:bg-white/10 rounded-lg text-sm text-muted border border-white/10",children:[h.jsx(da,{})," Torna"]})]}),h.jsxs($e.div,{className:"bg-card p-6 rounded-xl border border-white/10 mb-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.1},children:[h.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[h.jsx("div",{className:"bg-primary/20 text-primary p-3 rounded-full",children:h.jsx(Uw,{size:24})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-semibold",children:"Profilo"}),h.jsx("p",{className:"text-muted",children:r.email}),r.phone&&h.jsx("p",{className:"text-muted",children:r.phone})]})]}),r.tempPassword&&h.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10",children:[h.jsxs("div",{className:"bg-background p-3 rounded-lg",children:[h.jsxs("p",{className:"text-xs text-muted flex items-center gap-1 mb-2",children:[h.jsx(rk,{size:12})," Messaggio di Benvenuto Pronto"]}),h.jsx("textarea",{readOnly:!0,value:f(r.name,r.email,r.tempPassword),className:"w-full p-2 bg-background border border-white/10 rounded-lg text-white font-mono text-xs resize-none h-40"}),h.jsxs("div",{className:"flex gap-2 mt-3",children:[h.jsx("button",{onClick:m,className:"flex-1 py-2 bg-primary/20 rounded-lg text-primary flex items-center justify-center gap-2 hover:bg-primary/30",children:c?h.jsxs(h.Fragment,{children:[h.jsx(BD,{})," Messaggio Copiato!"]}):h.jsxs(h.Fragment,{children:[h.jsx(_7,{})," Copia Messaggio"]})}),h.jsxs("a",{href:"https://mentalfitmanager.github.io/#/client-login",target:"_blank",rel:"noopener noreferrer",className:"py-2 px-4 bg-primary rounded-lg text-white flex items-center justify-center gap-2 hover:bg-primary/80 transition",children:[h.jsx(rk,{})," Accedi Cliente"]})]})]}),h.jsx("p",{className:"text-xs text-muted mt-2 text-center",children:"Questo messaggio non è più necessario una volta che il cliente ha cambiato password."})]})]}),h.jsxs("div",{className:"flex border-b border-white/10 mb-6",children:[h.jsxs("button",{onClick:()=>l("anamnesi"),className:`px-4 py-2 text-sm ${a==="anamnesi"?"border-b-2 border-primary text-white":"text-muted"}`,children:[h.jsx(Mw,{className:"inline mr-2"}),"Anamnesi"]}),h.jsxs("button",{onClick:()=>l("checks"),className:`px-4 py-2 text-sm ${a==="checks"?"border-b-2 border-primary text-white":"text-muted"}`,children:[h.jsx(Dp,{className:"inline mr-2"}),"Checks"]}),h.jsxs("button",{onClick:()=>l("payments"),className:`px-4 py-2 text-sm ${a==="payments"?"border-b-2 border-primary text-white":"text-muted"}`,children:[h.jsx(fa,{className:"inline mr-2"}),"Pagamenti"]})]}),h.jsxs("div",{children:[a==="anamnesi"&&h.jsx(AJ,{clientId:t}),a==="checks"&&h.jsx(RJ,{clientId:t}),a==="payments"&&h.jsx(kJ,{clientId:t})]})]})]})}const ts=({name:t,size:e=18,color:n="currentColor"})=>{let r="";switch(t){case"FiSave":r="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2zM17 21v-8a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v8M7 3v4a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V3";break;case"FiArrowLeft":r="M19 12H5M12 19l-7-7 7-7";break;case"FiMail":r="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2zM22 6l-10 7L2 6";break;case"FiClock":r="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zM12 6v6l4 2";break;case"FiDollarSign":r="M12 2c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm-3.5-9h7M12 7v8M16 9h-8";break;case"FiUser":r="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2M12 7a4 4 0 1 0 0-8 4 4 0 0 0 0 8z";break;case"FiKey":r="M15.5 3.5a2.5 2.5 0 0 1 3.5 3.5L12 18 6 12 15.5 3.5zM17 14l2-2M7 17l-3 3M19 12l2-2M15 16l3-3";break;default:return null}return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:r})})};let os;try{const t=JSON.parse(__firebase_config),e=q_(t);os=IN(e)}catch(t){console.error("ERRORE: Impossibile inizializzare Firebase. Assicurati che '__firebase_config' sia definito.",t),os={}}const NJ=["email","endDate","status","tempPassword","noteFinanziarie"],DJ=t=>{if(!t)return"";const e=typeof t.toDate=="function"?t.toDate():new Date(t);if(isNaN(e))return"";const n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${n}-${r}-${i}`};function tI({isCoach:t=!1}){const e=Wt(),{clientId:n}=SP(),{register:r,handleSubmit:i,reset:s,formState:{isSubmitting:o}}=ql(),[a,l]=j.useState(!0),[c,u]=j.useState({});j.useEffect(()=>{if(!os||typeof os.app>"u"){console.error("Firestore non inizializzato correttamente. Impossibile caricare i dati."),l(!1);return}(async()=>{try{const _=Me(os,"clients",n),x=await Js(_);if(x.exists()){const v=x.data();u(v),s({...v,endDate:DJ(v.endDate)})}else e(t?"/coach/clients":"/clients")}catch(_){console.error("Errore nel caricamento del cliente:",_)}finally{l(!1)}})()},[n,s,e,t]);const f=async y=>{if(!os||typeof os.app>"u"){console.error("Firestore non inizializzato correttamente. Impossibile salvare i dati.");return}let _={...y};t&&NJ.forEach(x=>{delete _[x]}),_.name&&(_.name_lowercase=_.name.toLowerCase()),_.endDate&&(_.endDate=new Date(_.endDate)),(_.tempPassword===""||!_.tempPassword)&&delete _.tempPassword;try{const x=Me(os,"clients",n);await Gu(x,_),e(t?`/coach/client/${n}`:`/client/${n}`)}catch(x){console.error("Errore nell'aggiornamento del cliente: ",x)}},p="w-full p-2 bg-zinc-800 border border-white/10 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500 text-white",m="block mb-1 text-sm font-medium text-zinc-300 flex items-center gap-2";return a?h.jsx("div",{className:"text-center p-8 text-zinc-300",children:"Caricamento..."}):h.jsxs($e.div,{className:"w-full max-w-2xl mx-auto bg-zinc-900 rounded-xl shadow border border-white/10 p-6 text-white",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[h.jsxs("div",{className:"flex items-center justify-between mb-6 border-b border-white/10 pb-4",children:[h.jsxs("h1",{className:"text-2xl font-bold text-cyan-500",children:["Modifica Cliente ",h.jsx("span",{className:"text-zinc-400 text-lg",children:t?"(Coach)":"(Admin)"})]}),h.jsxs("button",{onClick:()=>e(t?`/coach/client/${n}`:`/client/${n}`),className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 rounded-lg text-sm text-zinc-300 transition-colors",children:[h.jsx(ts,{name:"FiArrowLeft",size:18})," Annulla"]})]}),h.jsxs("form",{onSubmit:i(f),className:"space-y-6",children:[h.jsxs("div",{className:"bg-zinc-800/50 p-5 rounded-lg border border-white/10",children:[h.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[h.jsx(ts,{name:"FiUser",size:20})," Dati Base"]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:m,children:"Nome e Cognome"}),h.jsx("input",{...r("name",{required:!0}),className:p})]}),h.jsxs("div",{children:[h.jsx("label",{className:m,children:"Telefono (Opzionale)"}),h.jsx("input",{...r("phone"),className:p})]}),h.jsxs("div",{children:[h.jsx("label",{className:m,children:"Obiettivo / Note Generali"}),h.jsx("textarea",{...r("goal"),rows:"3",className:p})]})]})]}),!t&&h.jsxs("div",{className:"bg-red-900/10 p-5 rounded-lg border border-red-500/30",children:[h.jsxs("h2",{className:"text-xl font-semibold text-red-400 mb-4 flex items-center gap-2",children:[h.jsx(ts,{name:"FiDollarSign",size:20})," Gestione Finanziaria e Accessi (Admin/Owner)"]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsxs("label",{className:m,children:[h.jsx(ts,{name:"FiMail",size:14})," Email (Login)"]}),h.jsx("input",{type:"email",...r("email",{required:!0}),className:p})]}),h.jsxs("div",{children:[h.jsx("label",{className:m,children:"Stato Cliente"}),h.jsxs("select",{...r("status"),className:p+" appearance-none",children:[h.jsx("option",{value:"attivo",children:"Attivo"}),h.jsx("option",{value:"in prova",children:"In Prova"}),h.jsx("option",{value:"sospeso",children:"Sospeso"}),h.jsx("option",{value:"scaduto",children:"Scaduto"})]})]}),h.jsxs("div",{children:[h.jsxs("label",{className:m,children:[h.jsx(ts,{name:"FiClock",size:14})," Data Scadenza Attuale"]}),h.jsx("input",{type:"date",...r("endDate"),className:p+" text-zinc-300"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:m,children:[h.jsx(ts,{name:"FiKey",size:14})," Password Temporanea"]}),h.jsx("input",{type:"password",...r("tempPassword"),placeholder:"Lascia vuoto per non cambiarla",className:p})]}),h.jsxs("div",{children:[h.jsxs("label",{className:m,children:[h.jsx(ts,{name:"FiDollarSign",size:14})," Note Finanziarie"]}),h.jsx("textarea",{...r("noteFinanziarie"),rows:"3",className:p})]})]})]}),h.jsx("div",{className:"flex justify-end pt-4",children:h.jsxs("button",{type:"submit",disabled:o,className:"flex items-center gap-2 px-5 py-2.5 bg-cyan-500 hover:bg-cyan-600 text-white rounded-lg font-semibold transition-colors disabled:bg-cyan-700 disabled:cursor-not-allowed",children:[h.jsx(ts,{name:"FiSave",size:18})," ",o?"Salvataggio...":"Salva Modifiche"]})})]})]})}function Tr(t){if(!t)return null;if(typeof(t==null?void 0:t.toDate)=="function")return t.toDate();const e=new Date(t);return isNaN(e)?null:e}const nI=t=>{const e=Tr(t);if(!e)return"na";const r=Math.ceil((e-new Date)/(1e3*60*60*24));return r<0?"expired":r<=15?"expiring":"paid"},Qd=({title:t,icon:e,items:n,navigate:r,tab:i,onDismiss:s})=>h.jsxs("div",{className:"bg-card p-4 rounded-lg border border-white/10 flex-1 min-w-[280px]",children:[h.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e," ",t]}),h.jsx("div",{className:"space-y-2",children:h.jsx(ua,{children:n.length>0?n.map((o,a)=>{var l;return h.jsxs($e.div,{layout:!0,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10,transition:{duration:.2}},className:"group flex items-center justify-between p-2 rounded-md hover:bg-white/5",children:[h.jsxs("button",{className:"flex-1 text-left",onClick:()=>r(`/client/${o.clientId}?tab=${i}`),children:[h.jsx("p",{className:"font-medium text-sm",children:o.clientName}),h.jsxs("p",{className:"text-xs text-muted",children:[(l=Tr(o.date))==null?void 0:l.toLocaleDateString("it-IT",{day:"numeric",month:"long"}),o.scadenza&&h.jsx("span",{className:"text-red-400 ml-2 font-bold",children:`(Scad. ${Tr(o.scadenza).toLocaleDateString("it-IT")})`})]})]}),h.jsx("button",{onClick:()=>s(o.id),className:"p-1 rounded-full opacity-0 group-hover:opacity-60 hover:!opacity-100 hover:bg-white/10 transition-opacity",title:"Archivia notifica",children:h.jsx(Bw,{size:14})})]},o.id)}):h.jsx("p",{className:"text-sm text-muted px-2",children:"Nessun aggiornamento recente."})})})]});function jJ(){const t=Wt(),[e,n]=j.useState([]),[r,i]=j.useState([]),[s,o]=j.useState([]),[a,l]=j.useState([]);j.useEffect(()=>{const v=Tt(bt(le,"clients"),w=>{n(w.docs.map(S=>({id:S.id,...S.data()})))});return()=>v()},[]);const c=j.useMemo(()=>e.reduce((v,w)=>(v[w.id]=w.name,v),{}),[e]);j.useEffect(()=>{if(Object.keys(c).length===0)return;const v=dr(au(le,"checks"),wp(30)),w=Tt(v,I=>{const M=I.docs.map(k=>{const T=k.ref.path.split("/")[1];return{id:k.id,clientId:T,clientName:c[T],date:k.data().createdAt}}).filter(k=>k.clientName);M.sort((k,T)=>(Tr(T.date)||0)-(Tr(k.date)||0)),i(M.slice(0,10))}),S=dr(au(le,"anamnesi"),wp(30)),P=Tt(S,I=>{const M=I.docs.map(k=>{const T=k.ref.path.split("/")[1];return{id:k.id,clientId:T,clientName:c[T],date:k.data().submittedAt||k.data().createdAt}}).filter(k=>k.clientName);M.sort((k,T)=>(Tr(T.date)||0)-(Tr(k.date)||0)),o(M.slice(0,10))});return()=>{w(),P()}},[c]);const u=j.useMemo(()=>[...e].sort((v,w)=>(Tr(w.createdAt)||0)-(Tr(v.createdAt)||0)).slice(0,5).map(v=>({id:v.id,clientId:v.id,clientName:v.name,date:v.createdAt})),[e]),f=j.useMemo(()=>e.filter(v=>nI(v.scadenza)==="expiring"||nI(v.scadenza)==="expired").sort((v,w)=>(Tr(v.scadenza)||0)-(Tr(w.scadenza)||0)).map(v=>({id:v.id,clientId:v.id,clientName:v.name,date:v.scadenza,scadenza:v.scadenza})),[e]),p=v=>{l(w=>[...w,v])},m=u.filter(v=>!a.includes(v.id)),y=f.filter(v=>!a.includes(v.id)),_=r.filter(v=>!a.includes(v.id)),x=s.filter(v=>!a.includes(v.id));return h.jsxs("div",{className:"w-full",children:[h.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Ultimi Aggiornamenti"}),h.jsxs("div",{className:"flex flex-col md:flex-row gap-6 overflow-x-auto pb-4",children:[" ",h.jsx(Qd,{title:"In Scadenza",icon:h.jsx(fa,{className:"text-red-400"}),items:y,navigate:t,tab:"payments",onDismiss:p}),h.jsx(Qd,{title:"Clienti Nuovi",icon:h.jsx(I7,{className:"text-primary"}),items:m,navigate:t,tab:"anamnesi",onDismiss:p}),h.jsx(Qd,{title:"Check Nuovi",icon:h.jsx(Dp,{className:"text-green-400"}),items:_,navigate:t,tab:"checks",onDismiss:p}),h.jsx(Qd,{title:"Anamnesi Nuove",icon:h.jsx(Mw,{className:"text-yellow-400"}),items:x,navigate:t,tab:"anamnesi",onDismiss:p})]})]})}const qc="l0RI8TzFjbNVoAdmcXNQkP9mWb12",Rf=["QwWST9OVOlTOi5oheyCqfpXLOLg2","3j0AXIRa4XdHq1ywCl4UBxJNsku2","AeZKjJYu5zMZ4mvffaGiqCBb0cF2"],bM=Rf.reduce((t,e)=>({...t,[e]:"Owner/Admin"}),{});bM[qc]="Mattia (Coach)";const rI=()=>h.jsx("div",{className:"flex justify-center items-center h-full p-4",children:h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})}),iI=({isCoach:t=!1})=>{const[e,n]=j.useState([]),[r,i]=j.useState(null),[s,o]=j.useState([]),[a,l]=j.useState(""),[c,u]=j.useState(!0),[f,p]=j.useState(!1),[m,y]=j.useState(""),[_,x]=j.useState([]),[v,w]=j.useState(!1),S=j.useRef(null),I=Mr().currentUser,M=I==null?void 0:I.uid;j.useEffect(()=>{if(!M)return;const A=bt(le,"chats");let R;t?R=dr(A,Qg("participants","array-contains",M),Di("updatedAt","desc")):R=dr(A,Di("lastUpdate","desc")),u(!0);const $=Tt(R,W=>{const Z=W.docs.map(B=>({id:B.id,...B.data()})).map(B=>{const Q=B.participants.find(ue=>ue!==qc&&!Rf.includes(ue)),J=B.participantNames&&B.participantNames[Q]||"Cliente Sconosciuto",me=B.participants.includes(qc);return{...B,clientUID:Q,clientName:J,isChatWithMattia:me}}).filter(B=>B.clientUID);n(Z),u(!1),r&&!Z.find(B=>B.id===r)?i(Z.length>0?Z[0].id:null):!r&&Z.length>0&&i(Z[0].id)},W=>{console.error("Errore nel caricare le chat:",W),u(!1)});return()=>$()},[M,t]),j.useEffect(()=>{if(!r){o([]);return}p(!0);const A=bt(le,"chats",r,"messages"),R=dr(A,Di("createdAt")),$=Tt(R,W=>{o(W.docs.map(q=>({id:q.id,...q.data()}))),p(!1)},W=>{console.error("Errore nel caricare i messaggi:",W),p(!1)});return()=>$()},[r]),j.useEffect(()=>{if(!r||!M||e.length===0)return;const A=e.find(R=>R.id===r);if(A&&A.lastMessageSenderId&&!Rf.includes(A.lastMessageSenderId)&&A.lastMessageSenderId!==qc){const $=Me(le,"chats",r);Vo($,{lastMessageSenderId:M},{merge:!0}).catch(W=>{console.error("Errore nell'azzeramento contatore chat:",W)})}},[r,M,e]),j.useEffect(()=>{var A;(A=S.current)==null||A.scrollIntoView({behavior:"smooth"})},[s]),j.useEffect(()=>{const A=async()=>{if(m.trim().length<2){x([]),w(!1);return}w(!0);const $=bt(le,"clients"),W=m.toLowerCase(),q=dr($,Qg("name_lowercase",">=",W),Qg("name_lowercase","<=",W+""),wp(10));try{const Z=await RE(q);x(Z.docs.map(B=>({id:B.id,...B.data()})))}catch(Z){console.error("Errore nella ricerca (potrebbe mancare un indice in Firestore):",Z)}w(!1)},R=setTimeout(()=>{A()},300);return()=>clearTimeout(R)},[m]);const k=async A=>{if(!M)return;const R=t?qc:Rf[0],W=[A.id,R].sort().join("_");if(!e.find(Z=>Z.id===W)){const Z=Me(le,"chats",W),B=[A.id,R],Q={[A.id]:A.name,[R]:bM[R]||"Coach"};await Vo(Z,{participants:B,participantNames:Q,lastMessage:`Conversazione avviata con ${Q[R]}`,lastUpdate:Un(),createdAt:Un()})}i(W),y(""),x([])},T=async A=>{if(A.preventDefault(),a.trim()===""||!r||!M){console.error("Invio messaggio fallito: Campi mancanti o Admin non autenticato.");return}const R=bt(le,"chats",r,"messages");try{await Pm(R,{text:a,createdAt:Un(),senderId:M});const $=Me(le,"chats",r);await Vo($,{lastMessage:a,lastUpdate:Un(),lastMessageSenderId:M},{merge:!0}),l("")}catch($){console.error("ERRORE FIREBASE DURANTE L'INVIO DEL MESSAGGIO:",$)}},E=async()=>{if(r&&window.confirm("SEI SICURO? Questa azione eliminerà la chat e tutti i messaggi definitivamente."))try{const A=bt(le,"chats",r,"messages"),R=await RE(A),$=Wx(le);R.docs.forEach(q=>{$.delete(q.ref)}),await $.commit();const W=Me(le,"chats",r);await Am(W),i(null),o([]),console.log(`Chat ${r} eliminata con successo.`)}catch(A){console.error("ERRORE NELL'ELIMINAZIONE DELLA CHAT:",A),alert("Errore durante l'eliminazione della chat. Controlla i permessi di scrittura in Firestore.")}},C=e.find(A=>A.id===r);C==null||C.clientUID;const D=C?C.clientName||"Chat Cliente":"Chat";return h.jsxs("div",{className:"flex h-[calc(100vh-120px)] bg-card/60 backdrop-blur-lg rounded-xl border border-white/10 overflow-hidden",children:[h.jsxs("div",{className:"w-full md:w-1/3 border-r border-white/10 flex flex-col",children:[h.jsx("div",{className:"p-4 border-b border-white/10 flex-shrink-0",children:h.jsxs("div",{className:"relative",children:[h.jsx(HD,{className:"absolute top-1/2 left-3 -translate-y-1/2 text-muted"}),h.jsx("input",{type:"text",placeholder:"Cerca o avvia una chat...",value:m,onChange:A=>y(A.target.value),className:"w-full bg-background p-2 pl-9 rounded-lg border border-white/10 outline-none focus:ring-2 focus:ring-primary"})]})}),m.length>1?h.jsxs("div",{className:"flex-1 overflow-y-auto",children:[v&&h.jsxs("p",{className:"p-4 text-muted text-sm flex items-center gap-2",children:[h.jsx(Lw,{className:"animate-spin"})," Ricerca..."]}),!v&&_.length===0&&h.jsx("p",{className:"p-4 text-muted text-sm",children:"Nessun cliente trovato."}),!v&&_.map(A=>h.jsxs("div",{onClick:()=>k(A),className:"p-4 cursor-pointer hover:bg-white/5",children:[h.jsx("p",{className:"font-semibold text-white",children:A.name}),h.jsx("p",{className:"text-sm text-muted",children:A.email})]},A.id))]}):h.jsx(h.Fragment,{children:c?h.jsx(rI,{}):h.jsx("div",{className:"flex-1 overflow-y-auto",children:e.map(A=>{const R=A.clientName||"Cliente",$=A.lastMessageSenderId===A.clientUID,W=A.isChatWithMattia?"Mattia":"Owner";return h.jsxs("div",{onClick:()=>i(A.id),className:`p-4 cursor-pointer border-l-4 ${r===A.id?"bg-primary/20 border-primary":"border-transparent hover:bg-white/5"}`,children:[h.jsx("p",{className:`font-semibold ${$?"text-white":"text-muted"}`,children:R}),h.jsxs("span",{className:`text-xs block ${A.isChatWithMattia?"text-green-400":"text-cyan-400"}`,children:["Chat con ",W]}),h.jsx("p",{className:"text-sm text-muted truncate",children:A.lastMessage})]},A.id)})})})]}),h.jsx("div",{className:"w-full md:w-2/3 flex flex-col",children:r?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"p-4 border-b border-white/10 flex-shrink-0 flex justify-between items-center bg-card/70 backdrop-blur-sm",children:[h.jsx("h3",{className:"font-bold text-lg text-white",children:D}),h.jsx("button",{onClick:E,className:"text-red-500/80 hover:text-red-500 p-2 rounded-full transition-colors",title:"Elimina la conversazione",disabled:!r||t,children:h.jsx(Um,{size:20})})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[f?h.jsx(rI,{}):s.map(A=>h.jsx("div",{className:`flex ${A.senderId===M?"justify-end":"justify-start"}`,children:h.jsxs("div",{className:`max-w-md p-3 rounded-2xl ${A.senderId===M?"bg-primary rounded-br-none":"bg-background rounded-bl-none"}`,children:[h.jsx("p",{className:"text-white break-words",children:A.text}),h.jsx("p",{className:"text-xs text-muted mt-1 text-right",children:A.createdAt&&A.createdAt.toDate().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})})]})},A.id)),h.jsx("div",{ref:S})]}),h.jsx("div",{className:"p-4 border-t border-white/10 flex-shrink-0 bg-card/70 backdrop-blur-sm",children:h.jsxs("form",{onSubmit:T,className:"flex items-center gap-4",children:[h.jsx("input",{type:"text",value:a,onChange:A=>l(A.target.value),placeholder:"Scrivi una risposta...",className:"flex-1 p-3 bg-background border border-white/10 rounded-full outline-none focus:ring-2 focus:ring-primary text-white"}),h.jsx("button",{type:"submit",className:"p-3 bg-primary hover:bg-primary/80 text-white rounded-full disabled:opacity-50",disabled:!a.trim()||!r,children:h.jsx(Fw,{size:20})})]})})]}):h.jsxs("div",{className:"flex flex-col justify-center items-center h-full text-muted",children:[h.jsx(Ow,{size:48}),h.jsx("p",{className:"mt-4",children:"Seleziona una conversazione o cercala per nome."})]})})]})},MJ=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(""),o=Wt(),a=async l=>{l.preventDefault(),s("");try{const u=(await hR(Tp,t,n)).user,f=Me(le,"clients",u.uid),p=await Js(f);if(p.exists()&&p.data().isClient===!0){sessionStorage.setItem("app_role","client");const m=p.data().firstLogin===!0;o(m?"/client/first-access":"/client/dashboard")}else s("Accesso non autorizzato. Area riservata ai clienti."),await cp(Tp)}catch(c){s("Credenziali non valide. Riprova."),console.error("Errore di login:",c.message)}};return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:h.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg backdrop-filter backdrop-blur-lg bg-opacity-50",children:[h.jsx("h2",{className:"text-3xl font-bold text-center text-cyan-400",children:"Accesso Area Clienti"}),h.jsx("p",{className:"text-center text-gray-300",children:"Usa le credenziali fornite dal tuo coach."}),h.jsxs("form",{onSubmit:a,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400",children:"Email"}),h.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:l=>e(l.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-400",children:"Password"}),h.jsx(Ao,{to:"/client/forgot-password",className:"text-xs text-gray-400 hover:text-cyan-400 sm:hidden",children:"Password dimenticata?"})]}),h.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:n,onChange:l=>r(l.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),i&&h.jsx("p",{className:"text-red-500 text-sm text-center",children:i}),h.jsx("div",{children:h.jsx("button",{type:"submit",className:"w-full px-4 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500",children:"Accedi"})})]}),h.jsx("div",{className:"text-center hidden sm:block",children:h.jsx(Ao,{to:"/client/forgot-password",className:"text-sm text-gray-400 hover:text-cyan-400 hover:underline",children:"Password dimenticata?"})})]})})},OJ=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(""),[o,a]=j.useState(""),l=Wt(),u=Mr().currentUser,f=async p=>{if(p.preventDefault(),s(""),a(""),!u){s("Utente non autenticato. Per favore, effettua nuovamente il login."),setTimeout(()=>l("/client-login"),3e3);return}if(t.length<6){s("La nuova password deve contenere almeno 6 caratteri.");return}if(t!==n){s("Le password non coincidono. Riprova.");return}try{await JU(u,t);const m=Me(le,"clients",u.uid);await Gu(m,{firstLogin:!1}),a("Password aggiornata con successo! Sarai reindirizzato alla tua dashboard tra poco."),setTimeout(()=>{l("/client/dashboard")},3e3)}catch(m){s("Si è verificato un errore. Potrebbe essere necessario effettuare nuovamente il login prima di riprovare."),console.error("Errore durante l'aggiornamento della password:",m)}};return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:h.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg",children:[h.jsx("h2",{className:"text-3xl font-bold text-center text-cyan-400",children:"Imposta la tua Password"}),h.jsx("p",{className:"text-center text-gray-300",children:"Per la tua sicurezza, scegli una password personale per i futuri accessi."}),h.jsxs("form",{onSubmit:f,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-400",children:"Nuova Password"}),h.jsx("input",{id:"new-password",type:"password",required:!0,value:t,onChange:p=>e(p.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-400",children:"Conferma Nuova Password"}),h.jsx("input",{id:"confirm-password",type:"password",required:!0,value:n,onChange:p=>r(p.target.value),className:"w-full px-3 py-2 mt-1 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]}),i&&h.jsx("p",{className:"text-red-500 text-sm text-center",children:i}),o&&h.jsx("p",{className:"text-green-500 text-sm text-center",children:o}),h.jsx("div",{children:h.jsx("button",{type:"submit",className:"w-full px-4 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-700 disabled:opacity-50",disabled:!!o,children:o?"Reindirizzamento...":"Imposta Nuova Password"})})]})]})})},LJ=()=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"#22d3ee",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-8 h-8",children:[h.jsx("path",{d:"M12 2a10 10 0 0 0-7 3c-1.5 1.5-2 4.5-2 7a10 10 0 0 0 14 0c0-2.5.5-5.5 2-7a10 10 0 0 0-7-3z",fill:"rgba(34, 211, 238, 0.1)"}),h.jsx("circle",{cx:"9",cy:"11",r:"1.5",fill:"#22d3ee"}),h.jsx("circle",{cx:"15",cy:"13",r:"1.5",fill:"#22d3ee"}),h.jsx("path",{d:"M10.5 11.5 L13.5 12.5",stroke:"#22d3ee",strokeWidth:"2"})]}),VJ=()=>h.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:h.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),jy=({title:t,value:e,subtext:n,icon:r})=>h.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-300",children:t}),h.jsx("div",{className:"text-cyan-400",children:r})]}),h.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:e}),h.jsx("p",{className:"text-sm text-gray-400 mt-1",children:n})]});function FJ(){const[t,e]=j.useState(null),[n,r]=j.useState(!0),[i,s]=j.useState("Da pianificare"),o=Wt(),a=Mr(),l=a.currentUser;j.useEffect(()=>{if(!l){o("/client-login");return}const p=Me(le,"clients",l.uid),m=Tt(p,v=>{if(v.exists()){const w=v.data();if(w.firstLogin){o("/client/first-access",{replace:!0});return}e(w)}else console.error("Dati del cliente non trovati!"),cp(a).then(()=>o("/client-login"));r(!1)}),y=bt(le,`clients/${l.uid}/checks`),_=dr(y,Di("createdAt","desc")),x=Tt(_,v=>{const w=v.docs.map(S=>S.data());if(w.length>0){const S=w[0].createdAt.toDate();let P=new Date(S.getTime());P.setDate(P.getDate()+7),s(P.toLocaleDateString("it-IT"))}else s("Invia il 1° check")});return()=>{m(),x()}},[l,o]);const c=()=>{cp(a).then(()=>o("/client-login"))};if(n||t&&t.firstLogin)return h.jsx(VJ,{});if(!t)return h.jsx("p",{children:"Errore nel caricamento dei dati."});let u="N/D",f="Non impostata";if(t.scadenza&&t.scadenza.toDate){const p=t.scadenza.toDate(),m=new Date;p.setHours(0,0,0,0),m.setHours(0,0,0,0);const y=p-m;u=Math.ceil(y/(1e3*60*60*24)),f=p.toLocaleDateString("it-IT")}return h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[h.jsxs("header",{className:"flex justify-between items-center mb-8",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx(LJ,{}),h.jsxs("div",{children:[h.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:["Ciao, ",t.name,"!"]}),h.jsx("p",{className:"text-gray-300",children:"Benvenuto nella tua area personale."})]})]}),h.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-3 py-2 bg-red-600/80 hover:bg-red-600 text-white text-sm font-semibold rounded-lg transition-colors",children:[h.jsx(T7,{}),h.jsx("span",{children:"Logout"})]})]}),h.jsxs("main",{children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[h.jsx(jy,{title:"Scadenza Percorso",value:`${u} giorni`,subtext:`Scade il: ${f}`,icon:h.jsx(Dw,{size:24})}),h.jsx(jy,{title:"Tipo Percorso",value:t.planType||"Non specificato",subtext:"Il tuo piano attuale",icon:h.jsx(FD,{size:24})}),h.jsx(jy,{title:"Prossimo Check Consigliato",value:i,subtext:"Rimani costante!",icon:h.jsx(Dp,{size:24})})]}),h.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",children:[h.jsx("h3",{className:"text-2xl font-bold mb-4 text-white",children:"Cosa vuoi fare?"}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsxs(Ao,{to:"/client/anamnesi",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[h.jsx(Uw,{size:22})," La mia Anamnesi"]}),h.jsxs(Ao,{to:"/client/checks",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[h.jsx(Dp,{size:22})," I miei Check"]}),h.jsxs(Ao,{to:"/client/payments",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[h.jsx(fa,{size:22})," I miei Pagamenti"]}),h.jsxs(Ao,{to:"/client/chat",className:"bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-4 rounded-lg text-center transition-colors flex flex-col items-center justify-center gap-2",children:[h.jsx(Ow,{size:22})," Chatta con il Coach"]})]})]})]})]})}const UJ=()=>h.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:h.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),BJ=()=>{const[t,e]=j.useState(null),[n,r]=j.useState(!0),[i,s]=j.useState(!1),[o,a]=j.useState({front:null,right:null,left:null,back:null}),[l,c]=j.useState({front:null,right:null,left:null,back:null}),u=Wt(),p=Mr().currentUser,m=Nh(),{register:y,handleSubmit:_,setValue:x,formState:{isSubmitting:v}}=ql();j.useEffect(()=>{if(!p){u("/client-login");return}(async()=>{const A=Me(le,`clients/${p.uid}/anamnesi`,"initial"),R=await Js(A);if(R.exists()){const $=R.data();if(e($),$.photoPaths){const W={};await Promise.all(Object.entries($.photoPaths).map(async([q,Z])=>{try{const B=await Nm(kl(m,Z));W[q]=B}catch(B){console.error(`Errore nel caricamento URL per ${q}:`,B)}})),c(W)}Object.keys($).forEach(W=>x(W,$[W])),s(!1)}else s(!0);r(!1)})()},[p,u,x]);const w=(D,A)=>{const R=D.target.files[0];R&&(a($=>({...$,[A]:R})),c($=>({...$,[A]:URL.createObjectURL(R)})))},S=async D=>{if(p){if(!t&&Object.values(o).some(A=>A===null)){alert("Per favore, carica tutte e 4 le foto iniziali.");return}r(!0);try{let A=(t==null?void 0:t.photoPaths)||{};const R=Object.entries(o).filter(([,q])=>q!==null);R.length>0&&(await Promise.all(R.map(async([Z,B])=>{const Q=`clients/${p.uid}/anamnesi_photos/${Z}-${yb()}`,J=kl(m,Q);return await a2(J,B),{type:Z,path:Q}}))).forEach(({type:Z,path:B})=>{A[Z]=B});const $=Me(le,`clients/${p.uid}/anamnesi`,"initial"),W={...D,photoPaths:A,submittedAt:Un()};await Vo($,W,{merge:!0}),e(W),s(!1),alert("Anamnesi salvata con successo!"),a({front:null,right:null,left:null,back:null})}catch(A){console.error("Errore nel salvataggio:",A),alert("Si è verificato un errore.")}finally{r(!1)}}};if(n)return h.jsx(UJ,{});const P="w-full p-2 mt-1 bg-gray-700 border border-gray-600 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500",I="block text-sm font-medium text-gray-300",M="bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",k="font-semibold mb-4 text-lg text-cyan-400 border-b border-cyan-400/20 pb-2",T=({type:D,label:A})=>h.jsxs("div",{className:"text-center",children:[h.jsx("label",{className:I,children:A}),h.jsxs("div",{className:"mt-2 flex justify-center items-center w-full h-48 bg-gray-700/50 rounded-lg border-2 border-dashed border-gray-600 relative",children:[l[D]?h.jsx("img",{src:l[D],alt:"preview",className:"h-full w-full object-contain rounded-lg"}):h.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[h.jsx(UD,{size:40}),h.jsx("p",{className:"mt-2 text-sm",children:"Carica foto"})]}),h.jsx("input",{type:"file",accept:"image/*",onChange:R=>w(R,D),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})]}),E=({label:D,value:A})=>h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-semibold text-gray-400",children:D}),h.jsx("p",{className:"mt-1 p-2 bg-gray-800 rounded-lg min-h-[40px] text-white break-words",children:A||"Non specificato"})]}),C=({urls:D})=>h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["front","right","left","back"].map(A=>h.jsxs("div",{children:[h.jsx("h4",{className:"text-sm font-semibold text-gray-400 capitalize",children:A==="front"?"Frontale":A==="back"?"Posteriore":`Laterale ${A==="left"?"Sinistro":"Destro"}`}),D!=null&&D[A]?h.jsx("img",{src:D[A],alt:A,className:"mt-2 rounded-lg w-full h-auto object-cover"}):h.jsx("div",{className:"mt-2 flex justify-center items-center w-full h-48 bg-gray-800 rounded-lg text-gray-500",children:h.jsx("span",{children:"Non caricata"})})]},A))});return h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[h.jsxs("header",{className:"flex justify-between items-center mb-8",children:[h.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:"La mia Anamnesi"}),h.jsxs("button",{onClick:()=>u("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg transition-colors",children:[h.jsx(da,{}),h.jsx("span",{children:"Dashboard"})]})]}),i?h.jsxs("form",{onSubmit:_(S),className:"space-y-8",children:[h.jsxs("div",{className:M,children:[h.jsx("h4",{className:k,children:"Dati Anagrafici e Misure"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Nome*"}),h.jsx("input",{...y("firstName",{required:!0}),className:P})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Cognome*"}),h.jsx("input",{...y("lastName",{required:!0}),className:P})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Data di Nascita*"}),h.jsx("input",{type:"date",...y("birthDate",{required:!0}),className:P})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Che lavoro fai?*"}),h.jsx("input",{...y("job",{required:!0}),className:P,placeholder:"Es. Impiegato..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Peso (kg)*"}),h.jsx("input",{type:"number",step:"0.1",...y("weight",{required:!0}),className:P,placeholder:"Es. 75.5"})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Altezza (cm)*"}),h.jsx("input",{type:"number",...y("height",{required:!0}),className:P,placeholder:"Es. 180"})]})]})]}),h.jsxs("div",{className:M,children:[h.jsx("h4",{className:k,children:"Abitudini Alimentari"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Quanti pasti riesci a fare al giorno?*"}),h.jsxs("select",{...y("mealsPerDay",{required:!0}),className:P,children:[h.jsx("option",{value:"3",children:"3"}),h.jsx("option",{value:"4",children:"4"}),h.jsx("option",{value:"5",children:"5"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Colazione: Dolce o Salata?*"}),h.jsxs("select",{...y("breakfastType",{required:!0}),className:P,children:[h.jsx("option",{value:"dolce",children:"Dolce"}),h.jsx("option",{value:"salato",children:"Salato"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Alimenti da inserire nella settimana*"}),h.jsx("textarea",{...y("desiredFoods",{required:!0}),rows:"3",className:P,placeholder:"Elenca qui..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Cosa non mangi?*"}),h.jsx("textarea",{...y("dislikedFoods",{required:!0}),rows:"2",className:P,placeholder:"Elenca qui..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Intolleranze?*"}),h.jsx("input",{...y("intolerances",{required:!0}),className:P,placeholder:"Es. Lattosio, nessuna..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Problemi di digestione o gonfiore?*"}),h.jsx("input",{...y("digestionIssues",{required:!0}),className:P,placeholder:"Sì/No, e se sì quali..."})]})]})]}),h.jsxs("div",{className:M,children:[h.jsx("h4",{className:k,children:"Allenamento"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Quanti allenamenti a settimana?*"}),h.jsx("input",{type:"number",...y("workoutsPerWeek",{required:!0}),className:P,placeholder:"Es. 3"})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Specialità, dove ti alleni e con quali attrezzi?*"}),h.jsx("textarea",{...y("trainingDetails",{required:!0}),rows:"3",className:P,placeholder:"Es. Bodybuilding in palestra..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"A che ora e per quanto tempo ti alleni?*"}),h.jsx("input",{...y("trainingTime",{required:!0}),className:P,placeholder:"Es. La sera dalle 18 alle 19:30"})]})]})]}),h.jsxs("div",{className:M,children:[h.jsx("h4",{className:k,children:"Salute e Obiettivi"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Infortuni o problematiche?*"}),h.jsx("textarea",{...y("injuries",{required:!0}),rows:"3",className:P,placeholder:"Es. Mal di schiena, ernie..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Prendi farmaci?*"}),h.jsx("input",{...y("medications",{required:!0}),className:P,placeholder:"Sì/No, e se sì quali..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Usi integratori?*"}),h.jsx("input",{...y("supplements",{required:!0}),className:P,placeholder:"Sì/No, e se sì quali..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Scrivimi il tuo obiettivo*"}),h.jsx("textarea",{...y("mainGoal",{required:!0}),rows:"3",className:P,placeholder:"Descrivi in dettaglio..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:I,children:"Durata percorso scelto?*"}),h.jsx("input",{...y("programDuration",{required:!0}),className:P,placeholder:"Es. 3 mesi, 6 mesi..."})]})]})]}),h.jsxs("div",{className:M,children:[h.jsx("h4",{className:k,children:"Foto Iniziali"}),h.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Carica 4 foto per il check iniziale: frontale, laterale destro, laterale sinistro e posteriore."}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx(T,{type:"front",label:"Frontale"}),h.jsx(T,{type:"right",label:"Laterale Destro"}),h.jsx(T,{type:"left",label:"Laterale Sinistro"}),h.jsx(T,{type:"back",label:"Posteriore"})]})]}),h.jsx("div",{className:"flex justify-end pt-4",children:h.jsxs("button",{type:"submit",disabled:v,className:"flex items-center gap-2 px-5 py-2.5 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition font-semibold disabled:opacity-50",children:[h.jsx(Vw,{})," ",v?"Salvataggio...":"Salva Anamnesi e Foto"]})})]}):t&&h.jsxs("div",{className:"space-y-8",children:[h.jsxs("div",{className:M,children:[h.jsx("h4",{className:k,children:"Dati Anagrafici"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsx(E,{label:"Nome",value:t.firstName}),h.jsx(E,{label:"Cognome",value:t.lastName}),h.jsx(E,{label:"Data di Nascita",value:t.birthDate}),h.jsx(E,{label:"Lavoro",value:t.job}),h.jsx(E,{label:"Peso (kg)",value:t.weight}),h.jsx(E,{label:"Altezza (cm)",value:t.height})]})]}),h.jsxs("div",{className:M,children:[h.jsx("h4",{className:k,children:"Abitudini Alimentari"}),h.jsxs("div",{className:"space-y-4",children:[h.jsx(E,{label:"Pasti al giorno",value:t.mealsPerDay}),h.jsx(E,{label:"Tipo Colazione",value:t.breakfastType}),h.jsx(E,{label:"Alimenti da inserire",value:t.desiredFoods}),h.jsx(E,{label:"Alimenti da evitare",value:t.dislikedFoods}),h.jsx(E,{label:"Intolleranze",value:t.intolerances}),h.jsx(E,{label:"Problemi di digestione",value:t.digestionIssues})]})]}),h.jsxs("div",{className:M,children:[h.jsx("h4",{className:k,children:"Allenamento"}),h.jsxs("div",{className:"space-y-4",children:[h.jsx(E,{label:"Allenamenti a settimana",value:t.workoutsPerWeek}),h.jsx(E,{label:"Dettagli Allenamento",value:t.trainingDetails}),h.jsx(E,{label:"Orario e Durata",value:t.trainingTime})]})]}),h.jsxs("div",{className:M,children:[h.jsx("h4",{className:k,children:"Salute e Obiettivi"}),h.jsxs("div",{className:"space-y-4",children:[h.jsx(E,{label:"Infortuni o problematiche",value:t.injuries}),h.jsx(E,{label:"Farmaci",value:t.medications}),h.jsx(E,{label:"Integratori",value:t.supplements}),h.jsx(E,{label:"Obiettivo Principale",value:t.mainGoal}),h.jsx(E,{label:"Durata Percorso",value:t.programDuration})]})]}),h.jsxs("div",{className:M,children:[h.jsx("h4",{className:k,children:"Foto Iniziali"}),h.jsx(C,{urls:l})]}),h.jsx("div",{className:"flex justify-end pt-4",children:h.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition font-semibold",children:[h.jsx($D,{})," Modifica"]})})]})]})},zJ=`
.react-calendar { width: 100%; background: rgba(31, 41, 55, 0.5); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 1rem; backdrop-filter: blur(10px); font-family: sans-serif; }
.react-calendar__tile, .react-calendar__month-view__weekdays__weekday { color: white; padding: 0.75em 0.5em; }
.react-calendar__navigation button { color: #22d3ee; font-weight: bold; font-size: 1.1em; }
.react-calendar__tile--now { background: rgba(55, 65, 81, 0.7); border-radius: 0.5rem; }
.react-calendar__tile--active { background: #0891b2; border-radius: 0.5rem; }
.react-calendar__tile:enabled:hover, .react-calendar__tile:enabled:focus { background: rgba(55, 65, 81, 1); border-radius: 0.5rem; }
.check-submitted { background-color: rgba(34, 197, 94, 0.5); border-radius: 50%; }
.suggested-day { box-shadow: 0 0 0 2px rgba(34, 211, 238, 0.6); border-radius: 50%; }
`,$J=()=>h.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:h.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),sI=({formState:t,setFormState:e,handleSubmit:n,isUploading:r,handleFileChange:i})=>{const s=()=>e({id:null,notes:"",weight:"",photos:{},photoPreviews:{}}),o=({type:a,label:l,preview:c})=>h.jsxs("div",{className:"text-center",children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300",children:l}),h.jsxs("div",{className:"mt-2 flex justify-center items-center w-full h-48 bg-gray-700/50 rounded-lg border-2 border-dashed border-gray-600 relative",children:[c?h.jsx("img",{src:c,alt:"preview",className:"h-full w-full object-contain rounded-lg"}):h.jsxs("div",{className:"flex flex-col items-center text-gray-400",children:[h.jsx(UD,{size:40}),h.jsx("p",{className:"mt-2 text-sm",children:"Carica foto"})]}),h.jsx("input",{type:"file",accept:"image/*",onChange:u=>i(u,a),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})]});return h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("h3",{className:"font-bold text-lg mb-4 text-cyan-400",children:t.id?"Modifica Check":"Carica Nuovo Check"}),h.jsx("button",{onClick:s,className:"text-gray-400 hover:text-white",children:h.jsx(A7,{size:20})})]}),h.jsxs("form",{onSubmit:n,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Peso Attuale (kg)*"}),h.jsx("input",{type:"number",step:"0.1",value:t.weight,onChange:a=>e(l=>({...l,weight:a.target.value})),required:!0,className:"w-full p-2 bg-gray-700 border border-gray-600 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500",placeholder:"Es. 75.5"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Note sul check"}),h.jsx("textarea",{value:t.notes,onChange:a=>e(l=>({...l,notes:a.target.value})),rows:"4",className:"w-full p-2 bg-gray-700 border border-gray-600 rounded-lg outline-none focus:ring-2 focus:ring-cyan-500"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[h.jsx(o,{type:"front",label:"Frontale",preview:t.photoPreviews.front}),h.jsx(o,{type:"right",label:"Laterale Destro",preview:t.photoPreviews.right}),h.jsx(o,{type:"left",label:"Laterale Sinistro",preview:t.photoPreviews.left}),h.jsx(o,{type:"back",label:"Posteriore",preview:t.photoPreviews.back})]}),h.jsx("div",{className:"flex justify-end",children:h.jsxs("button",{type:"submit",disabled:r,className:"flex items-center gap-2 px-5 py-2.5 bg-cyan-600 hover:bg-cyan-700 text-white rounded-lg transition font-semibold disabled:opacity-50",children:[h.jsx(Fw,{})," ",r?"Salvataggio...":t.id?"Salva Modifiche":"Invia Check"]})})]})]})},WJ=({check:t,handleEditClick:e})=>{const n=(new Date-t.createdAt.toDate())/36e5<2;return h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("h3",{className:"font-bold text-lg text-cyan-400",children:["Riepilogo del ",t.createdAt.toDate().toLocaleDateString("it-IT")]}),n&&h.jsxs("button",{onClick:()=>e(t),className:"flex items-center gap-2 px-3 py-1.5 bg-gray-600 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg",children:[h.jsx(WD,{})," Modifica"]})]}),h.jsxs("div",{className:"mt-4 space-y-6",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold text-gray-300",children:"Peso Registrato:"}),h.jsxs("p",{className:"text-white text-xl font-bold",children:[t.weight," kg"]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold text-gray-300",children:"Le tue note:"}),h.jsx("p",{className:"text-gray-400 p-3 bg-gray-900/50 rounded-lg min-h-[50px] whitespace-pre-wrap",children:t.notes||"Nessuna nota fornita."})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold text-gray-300",children:"Feedback del Coach:"}),h.jsx("p",{className:"text-cyan-300 p-3 bg-cyan-900/30 rounded-lg min-h-[50px] whitespace-pre-wrap",children:t.coachNotes||"Il tuo coach non ha ancora lasciato un feedback."})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold text-gray-300",children:"Le tue foto:"}),h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-2",children:t.photoURLs&&Object.values(t.photoURLs).map((r,i)=>h.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",children:h.jsx("img",{src:r,alt:`foto check ${i}`,className:"rounded-lg w-full h-auto aspect-square object-cover"})},i))})]})]})]})};function HJ(){const[t,e]=j.useState([]),[n,r]=j.useState(!0),[i,s]=j.useState(new Date),[o,a]=j.useState({id:null,notes:"",weight:"",photos:{},photoPreviews:{}}),[l,c]=j.useState(!1),[u,f]=j.useState(null),p=Wt(),y=Mr().currentUser,_=Nh();j.useEffect(()=>{if(!y){p("/client-login");return}const I=bt(le,`clients/${y.uid}/checks`),M=dr(I,Di("createdAt","desc")),k=Tt(M,C=>{e(C.docs.map(D=>({id:D.id,...D.data()}))),r(!1)}),T=Me(le,`clients/${y.uid}`),E=Tt(T,C=>{C.exists()&&C.data().prossimoCheck&&f(C.data().prossimoCheck.toDate())});return()=>{k(),E()}},[y,p]);const x=({date:I,view:M})=>{if(M==="month"){if(t.some(T=>T.createdAt&&T.createdAt.toDate().toDateString()===I.toDateString()))return"check-submitted";if(u&&I.toDateString()===u.toDateString())return"suggested-day"}},v=(I,M)=>{const k=I.target.files[0];k&&a(T=>({...T,photos:{...T.photos,[M]:k},photoPreviews:{...T.photoPreviews,[M]:URL.createObjectURL(k)}}))},w=I=>{s(I.createdAt.toDate()),a({id:I.id,notes:I.notes,weight:I.weight,photos:{},photoPreviews:I.photoURLs})},S=async I=>{I.preventDefault();const{id:M,notes:k,weight:T,photos:E}=o;if(!y||!T){alert("Per favore, compila almeno il peso.");return}c(!0);try{const C=M?t.find(R=>R.id===M):null;let D=C?{...C.photoURLs}:{};await Promise.all(Object.entries(E).map(async([R,$])=>{if($){const W=`clients/${y.uid}/checks/${yb()}-${$.name}`,q=kl(_,W);await a2(q,$),D[R]=await Nm(q)}}));const A={notes:k,weight:parseFloat(T),photoURLs:D};if(M)await Gu(Me(le,`clients/${y.uid}/checks`,M),{...A,lastUpdatedAt:Un()}),alert("Check modificato con successo!");else{await Pm(bt(le,`clients/${y.uid}/checks`),{...A,createdAt:i});const R=Me(le,"clients",y.uid),$=await Js(R);if($.exists()&&$.data().prossimoCheck){const W=$.data().prossimoCheck.toDate(),q=new Date(W);q.setDate(W.getDate()+7),await Gu(R,{prossimoCheck:q})}alert("Check caricato con successo! La prossima scadenza è stata aggiornata.")}a({id:null,notes:"",weight:"",photos:{},photoPreviews:{}})}catch(C){console.error("Errore:",C),alert("Si è verificato un errore.")}finally{c(!1)}},P=()=>{const I=t.find(M=>M.createdAt&&M.createdAt.toDate().toDateString()===i.toDateString());return o.id?h.jsx(sI,{formState:o,setFormState:a,handleSubmit:S,isUploading:l,handleFileChange:v}):I?h.jsx(WJ,{check:I,handleEditClick:w}):h.jsx(sI,{formState:o,setFormState:a,handleSubmit:S,isUploading:l,handleFileChange:v})};return n?h.jsx($J,{}):h.jsxs(h.Fragment,{children:[h.jsx("style",{children:zJ}),h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[h.jsxs("header",{className:"flex justify-between items-center mb-8",children:[h.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:"I miei Check"}),h.jsxs("button",{onClick:()=>p("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg transition-colors",children:[h.jsx(da,{}),h.jsx("span",{children:"Dashboard"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"lg:col-span-1",children:[h.jsxs("div",{className:"mb-4 text-xs text-gray-400 flex flex-col gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500/50"})," Check inviato"]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-4 h-4 rounded-full shadow-[0_0_0_2px_rgba(34,211,238,0.6)]"})," Giorno di check"]})]}),h.jsx(wM,{onChange:I=>{a({id:null,notes:"",weight:"",photos:{},photoPreviews:{}}),s(I)},value:i,tileClassName:x})]}),h.jsx("div",{className:"lg:col-span-2 bg-gray-800/50 p-6 rounded-xl border border-white/10 min-h-[400px]",children:P()})]})]})]})}const qJ=()=>h.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex justify-center items-center",children:h.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-cyan-500"})}),KJ=t=>t&&typeof t.toDate=="function"?t.toDate().toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric"}):"Data non disponibile",GJ=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(!0),i=Wt(),o=Mr().currentUser;return j.useEffect(()=>{if(!o){i("/client-login");return}const a=bt(le,`clients/${o.uid}/payments`),l=dr(a,Di("paymentDate","desc")),c=Tt(l,u=>{const f=u.docs.map(p=>({id:p.id,...p.data()}));e(f),r(!1)},u=>{console.error("Errore nel caricare i pagamenti:",u),r(!1)});return()=>c()},[o,i]),n?h.jsx(qJ,{}):h.jsxs("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-8 font-sans",children:[h.jsxs("header",{className:"flex justify-between items-center mb-8",children:[h.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-cyan-400",children:"Storico Pagamenti"}),h.jsxs("button",{onClick:()=>i("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg transition-colors",children:[h.jsx(da,{}),h.jsx("span",{children:"Dashboard"})]})]}),h.jsx("main",{className:"bg-gray-800/50 p-6 rounded-xl shadow-lg backdrop-blur-sm border border-white/10",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"border-b border-white/10",children:[h.jsxs("th",{className:"p-4 text-sm font-semibold text-gray-300",children:[h.jsx(Dw,{className:"inline mr-2"}),"Data"]}),h.jsxs("th",{className:"p-4 text-sm font-semibold text-gray-300",children:[h.jsx(fa,{className:"inline mr-2"}),"Importo"]}),h.jsxs("th",{className:"p-4 text-sm font-semibold text-gray-300",children:[h.jsx(Lw,{className:"inline mr-2"}),"Durata"]}),h.jsx("th",{className:"p-4 text-sm font-semibold text-gray-300 hidden sm:table-cell",children:"Metodo"})]})}),h.jsx("tbody",{children:t.length>0?t.map(a=>{var l;return h.jsxs("tr",{className:"border-b border-white/5 last:border-b-0",children:[h.jsx("td",{className:"p-4",children:KJ(a.paymentDate)}),h.jsxs("td",{className:"p-4 font-semibold text-cyan-400",children:["€ ",(l=a.amount)==null?void 0:l.toFixed(2)]}),h.jsx("td",{className:"p-4",children:a.duration}),h.jsx("td",{className:"p-4 hidden sm:table-cell",children:a.paymentMethod||"Non specificato"})]},a.id)}):h.jsx("tr",{children:h.jsx("td",{colSpan:"4",className:"text-center text-gray-500 p-8",children:"Non è stato registrato ancora nessun pagamento."})})})]})})})]})},YJ="AeZKjJYu5zMZ4mvffaGiqCBb0cF2",QJ="l0RI8TzFjbNVoAdmcXNQkP9mWb12",oI=[{uid:YJ,name:"Owner (Admin)",role:"owner"},{uid:QJ,name:"Mattia (Coach)",role:"coach"}],XJ=(t,e)=>{const n=[t,e].sort();return`${n[0]}_${n[1]}`},JJ=()=>h.jsx("div",{className:"flex justify-center items-center h-full min-h-[400px]",children:h.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-cyan-500"})}),ZJ=()=>{const e=Mr().currentUser,n=e==null?void 0:e.uid,r=Wt(),[i,s]=j.useState(""),[o,a]=j.useState([]),[l,c]=j.useState(oI[0]),[u,f]=j.useState(null),[p,m]=j.useState(!0),y=j.useRef(null),[_,x]=j.useState("Cliente");j.useEffect(()=>{if(!n)return;(async()=>{const k=await Js(Me(le,"clients",n));k.exists()&&x(k.data().name||k.data().email||"Cliente")})();const P=XJ(n,l.uid);f(P);let I=()=>{};return(async()=>{const k=bt(le,"chats",P,"messages"),T=dr(k,Di("timestamp"),wp(50));m(!0),I=Tt(T,E=>{const C=E.docs.map(D=>{var A;return{id:D.id,...D.data(),timestamp:(A=D.data().timestamp)==null?void 0:A.toDate()}});a(C),m(!1)},E=>{console.error("Errore nel listener messaggi:",E),m(!1)})})(),()=>I()},[n,l]),j.useEffect(()=>{var S;(S=y.current)==null||S.scrollIntoView({behavior:"smooth"})},[o]);const v=async S=>{if(S.preventDefault(),i.trim()===""||!u||!e)return;const P=Me(le,"chats",u),I=bt(P,"messages"),M=l.uid;try{await Vo(P,{participants:[n,M],lastMessage:i.trim(),updatedAt:Un(),participantNames:{[n]:_,[M]:l.name}},{merge:!0}),await Pm(I,{text:i.trim(),senderId:n,senderName:_,timestamp:Un()}),s("")}catch(k){console.error("Errore nell'invio del messaggio:",k),console.log("Errore: Impossibile inviare il messaggio. Controlla le regole di sicurezza.")}};if(!e)return h.jsx("div",{className:"p-6 text-gray-400",children:"Autenticazione in corso..."});const w=S=>{const P=S.senderId===n;return{container:P?"justify-end":"justify-start",bubble:P?"bg-cyan-600 rounded-br-none":"bg-gray-700 rounded-bl-none",name:P?"text-right text-xs text-gray-400":"text-left text-xs text-gray-400"}};return h.jsxs("div",{className:"flex flex-col h-[85vh] bg-gray-900 text-white p-4 rounded-xl shadow-2xl border border-white/10",children:[h.jsxs("header",{className:"flex justify-between items-center pb-4 border-b border-white/10 sticky top-0 bg-gray-900 z-10",children:[h.jsxs("h1",{className:"text-3xl font-bold text-cyan-400 flex items-center gap-2",children:[h.jsx(E7,{})," Chat Coach"]}),h.jsxs("button",{onClick:()=>r("/client/dashboard"),className:"flex items-center gap-2 px-3 py-2 bg-gray-700/80 hover:bg-gray-700 text-white text-sm font-semibold rounded-lg transition-colors",children:[h.jsx(da,{}),h.jsx("span",{children:"Dashboard"})]})]}),h.jsxs("div",{className:"mt-4 mb-4 flex flex-wrap items-center gap-4 p-3 bg-gray-800 rounded-lg shadow-inner",children:[h.jsxs("label",{className:"text-sm font-medium text-gray-300 flex items-center gap-2 whitespace-nowrap",children:[h.jsx(Uw,{size:18})," Chatta con:"]}),oI.map(S=>h.jsx("button",{onClick:()=>c(S),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-colors border ${l.uid===S.uid?"bg-cyan-600 text-white border-cyan-700 shadow-md":"bg-gray-700/50 text-gray-300 border-gray-600 hover:bg-gray-600/70"}`,children:S.name},S.uid))]}),h.jsx("main",{className:"flex-1 overflow-y-auto space-y-4 p-4 rounded-xl bg-gray-800 mb-4 border border-gray-700 shadow-inner",children:p?h.jsx(JJ,{}):h.jsxs(h.Fragment,{children:[o.length===0&&h.jsxs("div",{className:"text-center text-gray-400 p-10",children:["Inizia la tua conversazione con **",l.name,"**!"]}),o.map(S=>{const P=w(S);return h.jsx("div",{className:`flex ${P.container}`,children:h.jsxs("div",{className:"max-w-xs md:max-w-md",children:[h.jsx("p",{className:P.name,children:S.senderName||"Utente Sconosciuto"}),h.jsx("div",{className:`p-3 rounded-2xl shadow-lg break-words ${P.bubble}`,children:S.text}),h.jsx("span",{className:`text-xs mt-1 text-gray-500 block ${P.container.includes("end")?"text-right":"text-left"}`,children:S.timestamp?S.timestamp.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}):"Invio..."})]})},S.id)}),h.jsx("div",{ref:y})]})}),h.jsx("footer",{className:"sticky bottom-0 bg-gray-900 pt-2",children:h.jsxs("form",{onSubmit:v,className:"flex items-center gap-4 p-3 bg-gray-800 rounded-xl shadow-lg border border-gray-700",children:[h.jsx("input",{type:"text",value:i,onChange:S=>s(S.target.value),placeholder:`Scrivi un messaggio a ${l.name}...`,className:"flex-1 p-3 bg-gray-700 border border-gray-600 rounded-full outline-none focus:ring-2 focus:ring-cyan-500 text-white placeholder-gray-400",disabled:p}),h.jsx("button",{type:"submit",className:"bg-cyan-600 text-white p-3 rounded-full hover:bg-cyan-700 transition-colors disabled:opacity-50",disabled:i.trim()===""||p,children:h.jsx(Fw,{size:20})})]})})]})},eZ=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[i,s]=j.useState(""),[o,a]=j.useState(!1),l=Mr(),c=async u=>{u.preventDefault(),r(""),s(""),a(!0);try{await XU(l,t),r("Email di reset inviata con successo! Controlla la tua casella di posta.")}catch(f){s("Nessun utente trovato con questa email. Controlla che sia corretta."),console.error("Errore nel reset password:",f)}finally{a(!1)}};return h.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-900 text-white",children:h.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-gray-800 rounded-lg shadow-lg",children:[h.jsx("h2",{className:"text-3xl font-bold text-center text-cyan-400",children:"Recupera Password"}),h.jsx("p",{className:"text-center text-gray-300",children:"Inserisci la tua email per ricevere un link di recupero."}),n?h.jsx("div",{className:"text-center p-4 bg-green-500/20 text-green-300 rounded-lg",children:h.jsx("p",{children:n})}):h.jsxs("form",{onSubmit:c,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400",children:"Email"}),h.jsxs("div",{className:"relative mt-1",children:[h.jsx(S7,{className:"absolute top-1/2 left-3 -translate-y-1/2 text-gray-400"}),h.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:u=>e(u.target.value),className:"w-full pl-10 pr-3 py-2 text-white bg-gray-700 border border-gray-600 rounded-md focus:ring-cyan-500 focus:border-cyan-500"})]})]}),i&&h.jsx("p",{className:"text-red-500 text-sm text-center",children:i}),h.jsx("div",{children:h.jsx("button",{type:"submit",disabled:o,className:"w-full px-4 py-2 font-bold text-white bg-cyan-600 rounded-md hover:bg-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500 disabled:bg-gray-500",children:o?"Invio in corso...":"Invia Link di Recupero"})})]}),h.jsx("div",{className:"text-center",children:h.jsxs(Ao,{to:"/client-login",className:"text-sm text-cyan-400 hover:underline flex items-center justify-center gap-2",children:[h.jsx(da,{})," Torna al Login"]})})]})})},tZ="l0RI8TzFjbNVoAdmcXNQkP9mWb12",nZ=()=>h.jsxs("div",{className:"flex justify-center items-center min-h-screen bg-gray-50 text-gray-800 text-lg font-semibold",children:[h.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Caricamento Autenticazione..."]}),Xd=({isAllowed:t,redirectPath:e,children:n})=>t?n||h.jsx(AP,{}):h.jsx(Nc,{to:e,replace:!0}),rZ=()=>{const[t,e]=j.useState({isLoading:!0,user:null,isClient:!1,isCoach:!1,isOwner:!1}),n=Wt();if(j.useEffect(()=>{const a=n5(Tp,async l=>{if(l){const c=Me(le,"clients",l.uid),p=((await Js(c)).data()||{}).isClient||!1,m=l.uid===tZ,_={isLoading:!1,user:l,isClient:p,isCoach:m,isOwner:!p&&!m};e(_);const x=window.location.hash.substring(1);(x==="/login"||x==="/client-login"||x==="")&&(_.isClient?n("/client/dashboard",{replace:!0}):_.isCoach?n("/coach/dashboard",{replace:!0}):_.isOwner&&n("/",{replace:!0}))}else e({isLoading:!1,user:null,isClient:!1,isCoach:!1,isOwner:!1})});return()=>a()},[n]),t.isLoading)return h.jsx(nZ,{});const r=t.user&&t.isOwner,i=t.user&&t.isCoach,s=t.user&&t.isClient,o=r||i;return h.jsxs(hF,{children:[h.jsx(Oe,{path:"/login",element:h.jsx(a7,{})}),h.jsx(Oe,{path:"/client-login",element:h.jsx(MJ,{})}),h.jsx(Oe,{path:"/client/forgot-password",element:h.jsx(eZ,{})}),h.jsxs(Oe,{element:h.jsx(Xd,{isAllowed:o,redirectPath:"/login"}),children:[h.jsx(Oe,{element:h.jsx(Xd,{isAllowed:r,redirectPath:"/coach/dashboard"}),children:h.jsxs(Oe,{element:h.jsx(ek,{role:"owner"}),children:[h.jsx(Oe,{index:!0,element:h.jsx(gQ,{})}),h.jsx(Oe,{path:"/clients",element:h.jsx(TC,{isCoach:!1})}),h.jsx(Oe,{path:"/new",element:h.jsx($Q,{})}),h.jsx(Oe,{path:"/client/:clientId",element:h.jsx(eI,{isCoach:!1})}),h.jsx(Oe,{path:"/edit/:clientId",element:h.jsx(tI,{isCoach:!1})}),h.jsx(Oe,{path:"/updates",element:h.jsx(jJ,{})}),h.jsx(Oe,{path:"/admin/chat",element:h.jsx(iI,{isCoach:!1})})]})}),h.jsx(Oe,{element:h.jsx(Xd,{isAllowed:i,redirectPath:"/login"}),children:h.jsxs(Oe,{element:h.jsx(ek,{role:"coach"}),children:[h.jsx(Oe,{path:"/coach/dashboard",element:h.jsx(yQ,{})}),h.jsx(Oe,{path:"/coach/clients",element:h.jsx(TC,{isCoach:!0})}),h.jsx(Oe,{path:"/coach/client/:clientId",element:h.jsx(eI,{isCoach:!0})}),h.jsx(Oe,{path:"/coach/edit/:clientId",element:h.jsx(tI,{isCoach:!0})}),h.jsx(Oe,{path:"/coach/chat",element:h.jsx(iI,{isCoach:!0})})]})})]}),h.jsxs(Oe,{element:h.jsx(Xd,{isAllowed:s,redirectPath:"/client-login"}),children:[h.jsx(Oe,{path:"/client/first-access",element:h.jsx(OJ,{})}),h.jsx(Oe,{path:"/client/dashboard",element:h.jsx(FJ,{})}),h.jsx(Oe,{path:"/client/anamnesi",element:h.jsx(BJ,{})}),h.jsx(Oe,{path:"/client/checks",element:h.jsx(HJ,{})}),h.jsx(Oe,{path:"/client/payments",element:h.jsx(GJ,{})}),h.jsx(Oe,{path:"/client/chat",element:h.jsx(ZJ,{})})]}),h.jsx(Oe,{path:"*",element:t.user?s?h.jsx(Nc,{to:"/client/dashboard"}):i?h.jsx(Nc,{to:"/coach/dashboard"}):h.jsx(Nc,{to:"/"}):h.jsx(Nc,{to:"/login"})})]})};function iZ(){return h.jsx(vF,{children:h.jsx(rZ,{})})}My.createRoot(document.getElementById("root")).render(h.jsx(it.StrictMode,{children:h.jsx(iZ,{})}));
